(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s2={exports:{}},Sm={},i2={exports:{}},Dn={};var Z_;function FB(){if(Z_)return Dn;Z_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(W,T,q){this.props=W,this.context=T,this.refs=v,this.updater=q||p}g.prototype.isReactComponent={},g.prototype.setState=function(W,T){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,T,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function b(){}b.prototype=g.prototype;function w(W,T,q){this.props=W,this.context=T,this.refs=v,this.updater=q||p}var j=w.prototype=new b;j.constructor=w,y(j,g.prototype),j.isPureReactComponent=!0;var N=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function P(W,T,q){var V,B={},K=null,oe=null;if(T!=null)for(V in T.ref!==void 0&&(oe=T.ref),T.key!==void 0&&(K=""+T.key),T)S.call(T,V)&&!_.hasOwnProperty(V)&&(B[V]=T[V]);var me=arguments.length-2;if(me===1)B.children=q;else if(1<me){for(var se=Array(me),de=0;de<me;de++)se[de]=arguments[de+2];B.children=se}if(W&&W.defaultProps)for(V in me=W.defaultProps,me)B[V]===void 0&&(B[V]=me[V]);return{$$typeof:e,type:W,key:K,ref:oe,props:B,_owner:E.current}}function I(W,T){return{$$typeof:e,type:W.type,key:T,ref:W.ref,props:W.props,_owner:W._owner}}function U(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function C(W){var T={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(q){return T[q]})}var O=/\/+/g;function R(W,T){return typeof W=="object"&&W!==null&&W.key!=null?C(""+W.key):T.toString(36)}function z(W,T,q,V,B){var K=typeof W;(K==="undefined"||K==="boolean")&&(W=null);var oe=!1;if(W===null)oe=!0;else switch(K){case"string":case"number":oe=!0;break;case"object":switch(W.$$typeof){case e:case t:oe=!0}}if(oe)return oe=W,B=B(oe),W=V===""?"."+R(oe,0):V,N(B)?(q="",W!=null&&(q=W.replace(O,"$&/")+"/"),z(B,T,q,"",function(de){return de})):B!=null&&(U(B)&&(B=I(B,q+(!B.key||oe&&oe.key===B.key?"":(""+B.key).replace(O,"$&/")+"/")+W)),T.push(B)),1;if(oe=0,V=V===""?".":V+":",N(W))for(var me=0;me<W.length;me++){K=W[me];var se=V+R(K,me);oe+=z(K,T,q,se,B)}else if(se=m(W),typeof se=="function")for(W=se.call(W),me=0;!(K=W.next()).done;)K=K.value,se=V+R(K,me++),oe+=z(K,T,q,se,B);else if(K==="object")throw T=String(W),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return oe}function H(W,T,q){if(W==null)return W;var V=[],B=0;return z(W,V,"","",function(K){return T.call(q,K,B++)}),V}function Q(W){if(W._status===-1){var T=W._result;T=T(),T.then(function(q){(W._status===0||W._status===-1)&&(W._status=1,W._result=q)},function(q){(W._status===0||W._status===-1)&&(W._status=2,W._result=q)}),W._status===-1&&(W._status=0,W._result=T)}if(W._status===1)return W._result.default;throw W._result}var J={current:null},re={transition:null},X={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:re,ReactCurrentOwner:E};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Dn.Children={map:H,forEach:function(W,T,q){H(W,function(){T.apply(this,arguments)},q)},count:function(W){var T=0;return H(W,function(){T++}),T},toArray:function(W){return H(W,function(T){return T})||[]},only:function(W){if(!U(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Dn.Component=g,Dn.Fragment=r,Dn.Profiler=s,Dn.PureComponent=w,Dn.StrictMode=a,Dn.Suspense=c,Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Dn.act=ee,Dn.cloneElement=function(W,T,q){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var V=y({},W.props),B=W.key,K=W.ref,oe=W._owner;if(T!=null){if(T.ref!==void 0&&(K=T.ref,oe=E.current),T.key!==void 0&&(B=""+T.key),W.type&&W.type.defaultProps)var me=W.type.defaultProps;for(se in T)S.call(T,se)&&!_.hasOwnProperty(se)&&(V[se]=T[se]===void 0&&me!==void 0?me[se]:T[se])}var se=arguments.length-2;if(se===1)V.children=q;else if(1<se){me=Array(se);for(var de=0;de<se;de++)me[de]=arguments[de+2];V.children=me}return{$$typeof:e,type:W.type,key:B,ref:K,props:V,_owner:oe}},Dn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Dn.createElement=P,Dn.createFactory=function(W){var T=P.bind(null,W);return T.type=W,T},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(W){return{$$typeof:l,render:W}},Dn.isValidElement=U,Dn.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:Q}},Dn.memo=function(W,T){return{$$typeof:d,type:W,compare:T===void 0?null:T}},Dn.startTransition=function(W){var T=re.transition;re.transition={};try{W()}finally{re.transition=T}},Dn.unstable_act=ee,Dn.useCallback=function(W,T){return J.current.useCallback(W,T)},Dn.useContext=function(W){return J.current.useContext(W)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(W){return J.current.useDeferredValue(W)},Dn.useEffect=function(W,T){return J.current.useEffect(W,T)},Dn.useId=function(){return J.current.useId()},Dn.useImperativeHandle=function(W,T,q){return J.current.useImperativeHandle(W,T,q)},Dn.useInsertionEffect=function(W,T){return J.current.useInsertionEffect(W,T)},Dn.useLayoutEffect=function(W,T){return J.current.useLayoutEffect(W,T)},Dn.useMemo=function(W,T){return J.current.useMemo(W,T)},Dn.useReducer=function(W,T,q){return J.current.useReducer(W,T,q)},Dn.useRef=function(W){return J.current.useRef(W)},Dn.useState=function(W){return J.current.useState(W)},Dn.useSyncExternalStore=function(W,T,q){return J.current.useSyncExternalStore(W,T,q)},Dn.useTransition=function(){return J.current.useTransition()},Dn.version="18.3.1",Dn}var e6;function Cy(){return e6||(e6=1,i2.exports=FB()),i2.exports}var t6;function MB(){if(t6)return Sm;t6=1;var e=Cy(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,f={},m=null,p=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(p=c.ref);for(u in c)a.call(c,u)&&!i.hasOwnProperty(u)&&(f[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:t,type:l,key:m,ref:p,props:f,_owner:s.current}}return Sm.Fragment=r,Sm.jsx=o,Sm.jsxs=o,Sm}var r6;function RB(){return r6||(r6=1,s2.exports=MB()),s2.exports}var n=RB(),L=Cy();const ut=Oa(L);var rv={},o2={exports:{}},Wl={},l2={exports:{}},c2={};var n6;function BB(){return n6||(n6=1,(function(e){function t(re,X){var ee=re.length;re.push(X);e:for(;0<ee;){var W=ee-1>>>1,T=re[W];if(0<s(T,X))re[W]=X,re[ee]=T,ee=W;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var X=re[0],ee=re.pop();if(ee!==X){re[0]=ee;e:for(var W=0,T=re.length,q=T>>>1;W<q;){var V=2*(W+1)-1,B=re[V],K=V+1,oe=re[K];if(0>s(B,ee))K<T&&0>s(oe,B)?(re[W]=oe,re[K]=ee,W=K):(re[W]=B,re[V]=ee,W=V);else if(K<T&&0>s(oe,ee))re[W]=oe,re[K]=ee,W=K;else break e}}return X}function s(re,X){var ee=re.sortIndex-X.sortIndex;return ee!==0?ee:re.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,m=3,p=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(re){for(var X=r(d);X!==null;){if(X.callback===null)a(d);else if(X.startTime<=re)a(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(d)}}function N(re){if(v=!1,j(re),!y)if(r(c)!==null)y=!0,Q(S);else{var X=r(d);X!==null&&J(N,X.startTime-re)}}function S(re,X){y=!1,v&&(v=!1,b(P),P=-1),p=!0;var ee=m;try{for(j(X),f=r(c);f!==null&&(!(f.expirationTime>X)||re&&!C());){var W=f.callback;if(typeof W=="function"){f.callback=null,m=f.priorityLevel;var T=W(f.expirationTime<=X);X=e.unstable_now(),typeof T=="function"?f.callback=T:f===r(c)&&a(c),j(X)}else a(c);f=r(c)}if(f!==null)var q=!0;else{var V=r(d);V!==null&&J(N,V.startTime-X),q=!1}return q}finally{f=null,m=ee,p=!1}}var E=!1,_=null,P=-1,I=5,U=-1;function C(){return!(e.unstable_now()-U<I)}function O(){if(_!==null){var re=e.unstable_now();U=re;var X=!0;try{X=_(!0,re)}finally{X?R():(E=!1,_=null)}}else E=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=O,R=function(){H.postMessage(null)}}else R=function(){g(O,0)};function Q(re){_=re,E||(E=!0,R())}function J(re,X){P=g(function(){re(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,Q(S))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(re){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var ee=m;m=X;try{return re()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,X){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ee=m;m=re;try{return X()}finally{m=ee}},e.unstable_scheduleCallback=function(re,X,ee){var W=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,re){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ee+T,re={id:u++,callback:X,priorityLevel:re,startTime:ee,expirationTime:T,sortIndex:-1},ee>W?(re.sortIndex=ee,t(d,re),r(c)===null&&re===r(d)&&(v?(b(P),P=-1):v=!0,J(N,ee-W))):(re.sortIndex=T,t(c,re),y||p||(y=!0,Q(S))),re},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(re){var X=m;return function(){var ee=m;m=X;try{return re.apply(this,arguments)}finally{m=ee}}}})(c2)),c2}var a6;function UB(){return a6||(a6=1,l2.exports=BB()),l2.exports}var s6;function qB(){if(s6)return Wl;s6=1;var e=Cy(),t=UB();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)a.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function m(h){return c.call(f,h)?!0:c.call(u,h)?!1:d.test(h)?f[h]=!0:(u[h]=!0,!1)}function p(h,x,k,F){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return F?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,x,k,F){if(x===null||typeof x>"u"||p(h,x,k,F))return!0;if(F)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,F,Y,ae,Te){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=F,this.attributeNamespace=Y,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=ae,this.removeEmptyString=Te}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,F){var Y=g.hasOwnProperty(x)?g[x]:null;(Y!==null?Y.type!==0:F||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(y(x,k,Y,F)&&(k=null),F||Y===null?m(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):Y.mustUseProperty?h[Y.propertyName]=k===null?Y.type===3?!1:"":k:(x=Y.attributeName,F=Y.attributeNamespace,k===null?h.removeAttribute(x):(Y=Y.type,k=Y===3||Y===4&&k===!0?"":""+k,F?h.setAttributeNS(F,x,k):h.setAttribute(x,k))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),re=Symbol.iterator;function X(h){return h===null||typeof h!="object"?null:(h=re&&h[re]||h["@@iterator"],typeof h=="function"?h:null)}var ee=Object.assign,W;function T(h){if(W===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+h}var q=!1;function V(h,x){if(!h||q)return"";q=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(kt){var F=kt}Reflect.construct(h,[],x)}else{try{x.call()}catch(kt){F=kt}h.call(x.prototype)}else{try{throw Error()}catch(kt){F=kt}h()}}catch(kt){if(kt&&F&&typeof kt.stack=="string"){for(var Y=kt.stack.split(`
`),ae=F.stack.split(`
`),Te=Y.length-1,et=ae.length-1;1<=Te&&0<=et&&Y[Te]!==ae[et];)et--;for(;1<=Te&&0<=et;Te--,et--)if(Y[Te]!==ae[et]){if(Te!==1||et!==1)do if(Te--,et--,0>et||Y[Te]!==ae[et]){var lt=`
`+Y[Te].replace(" at new "," at ");return h.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",h.displayName)),lt}while(1<=Te&&0<=et);break}}}finally{q=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?T(h):""}function B(h){switch(h.tag){case 5:return T(h.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return h=V(h.type,!1),h;case 11:return h=V(h.type.render,!1),h;case 1:return h=V(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case _:return"Fragment";case E:return"Portal";case I:return"Profiler";case P:return"StrictMode";case R:return"Suspense";case z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case C:return(h.displayName||"Context")+".Consumer";case U:return(h._context.displayName||"Context")+".Provider";case O:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case H:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Q:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function oe(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function me(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function se(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function de(h){var x=se(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),F=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Y=k.get,ae=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return Y.call(this)},set:function(Te){F=""+Te,ae.call(this,Te)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return F},setValue:function(Te){F=""+Te},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function Re(h){h._valueTracker||(h._valueTracker=de(h))}function he(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),F="";return h&&(F=se(h)?h.checked?"true":"false":h.value),h=F,h!==k?(x.setValue(h),!0):!1}function Ue(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Oe(h,x){var k=x.checked;return ee({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function le(h,x){var k=x.defaultValue==null?"":x.defaultValue,F=x.checked!=null?x.checked:x.defaultChecked;k=me(x.value!=null?x.value:k),h._wrapperState={initialChecked:F,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function te(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function Se(h,x){te(h,x);var k=me(x.value),F=x.type;if(k!=null)F==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(F==="submit"||F==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Pe(h,x.type,k):x.hasOwnProperty("defaultValue")&&Pe(h,x.type,me(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function we(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var F=x.type;if(!(F!=="submit"&&F!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Pe(h,x,k){(x!=="number"||Ue(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var fe=Array.isArray;function ue(h,x,k,F){if(h=h.options,x){x={};for(var Y=0;Y<k.length;Y++)x["$"+k[Y]]=!0;for(k=0;k<h.length;k++)Y=x.hasOwnProperty("$"+h[k].value),h[k].selected!==Y&&(h[k].selected=Y),Y&&F&&(h[k].defaultSelected=!0)}else{for(k=""+me(k),x=null,Y=0;Y<h.length;Y++){if(h[Y].value===k){h[Y].selected=!0,F&&(h[Y].defaultSelected=!0);return}x!==null||h[Y].disabled||(x=h[Y])}x!==null&&(x.selected=!0)}}function Ee(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ye(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(fe(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:me(k)}}function xe(h,x){var k=me(x.value),F=me(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),F!=null&&(h.defaultValue=""+F)}function ve(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function Fe(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?Fe(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var _e,Be=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,F,Y){MSApp.execUnsafeLocalFunction(function(){return h(x,k,F,Y)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(_e=_e||document.createElement("div"),_e.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=_e.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function qe(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vt=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(h){Vt.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),Ze[x]=Ze[h]})});function Dt(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||Ze.hasOwnProperty(h)&&Ze[h]?(""+x).trim():x+"px"}function dt(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var F=k.indexOf("--")===0,Y=Dt(k,x[k],F);k==="float"&&(k="cssFloat"),F?h.setProperty(k,Y):h[k]=Y}}var Tt=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(h,x){if(x){if(Tt[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function Ve(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=null;function gr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var nr=null,Ar=null,Ir=null;function Xt(h){if(h=Ll(h)){if(typeof nr!="function")throw Error(r(280));var x=h.stateNode;x&&(x=Qu(x),nr(h.stateNode,h.type,x))}}function Qt(h){Ar?Ir?Ir.push(h):Ir=[h]:Ar=h}function mr(){if(Ar){var h=Ar,x=Ir;if(Ir=Ar=null,Xt(h),x)for(h=0;h<x.length;h++)Xt(x[h])}}function Fr(h,x){return h(x)}function fn(){}var Br=!1;function Qr(h,x,k){if(Br)return h(x,k);Br=!0;try{return Fr(h,x,k)}finally{Br=!1,(Ar!==null||Ir!==null)&&(fn(),mr())}}function ir(h,x){var k=h.stateNode;if(k===null)return null;var F=Qu(k);if(F===null)return null;k=F[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(h=h.type,F=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!F;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var qn=!1;if(l)try{var an={};Object.defineProperty(an,"passive",{get:function(){qn=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{qn=!1}function wn(h,x,k,F,Y,ae,Te,et,lt){var kt=Array.prototype.slice.call(arguments,3);try{x.apply(k,kt)}catch(Yt){this.onError(Yt)}}var Tr=!1,zr=null,ne=!1,je=null,ke={onError:function(h){Tr=!0,zr=h}};function ie(h,x,k,F,Y,ae,Te,et,lt){Tr=!1,zr=null,wn.apply(ke,arguments)}function ge(h,x,k,F,Y,ae,Te,et,lt){if(ie.apply(this,arguments),Tr){if(Tr){var kt=zr;Tr=!1,zr=null}else throw Error(r(198));ne||(ne=!0,je=kt)}}function Ae(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function Ge(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function rt(h){if(Ae(h)!==h)throw Error(r(188))}function Qe(h){var x=h.alternate;if(!x){if(x=Ae(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,F=x;;){var Y=k.return;if(Y===null)break;var ae=Y.alternate;if(ae===null){if(F=Y.return,F!==null){k=F;continue}break}if(Y.child===ae.child){for(ae=Y.child;ae;){if(ae===k)return rt(Y),h;if(ae===F)return rt(Y),x;ae=ae.sibling}throw Error(r(188))}if(k.return!==F.return)k=Y,F=ae;else{for(var Te=!1,et=Y.child;et;){if(et===k){Te=!0,k=Y,F=ae;break}if(et===F){Te=!0,F=Y,k=ae;break}et=et.sibling}if(!Te){for(et=ae.child;et;){if(et===k){Te=!0,k=ae,F=Y;break}if(et===F){Te=!0,F=ae,k=Y;break}et=et.sibling}if(!Te)throw Error(r(189))}}if(k.alternate!==F)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function tt(h){return h=Qe(h),h!==null?Ke(h):null}function Ke(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=Ke(h);if(x!==null)return x;h=h.sibling}return null}var Le=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,mt=t.unstable_shouldYield,Ot=t.unstable_requestPaint,Lt=t.unstable_now,vr=t.unstable_getCurrentPriorityLevel,Mr=t.unstable_ImmediatePriority,Vr=t.unstable_UserBlockingPriority,Mn=t.unstable_NormalPriority,Fs=t.unstable_LowPriority,$n=t.unstable_IdlePriority,hs=null,zn=null;function As(h){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(hs,h,void 0,(h.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:ua,Nn=Math.log,ul=Math.LN2;function ua(h){return h>>>=0,h===0?32:31-(Nn(h)/ul|0)|0}var We=64,Et=4194304;function _t(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function sr(h,x){var k=h.pendingLanes;if(k===0)return 0;var F=0,Y=h.suspendedLanes,ae=h.pingedLanes,Te=k&268435455;if(Te!==0){var et=Te&~Y;et!==0?F=_t(et):(ae&=Te,ae!==0&&(F=_t(ae)))}else Te=k&~Y,Te!==0?F=_t(Te):ae!==0&&(F=_t(ae));if(F===0)return 0;if(x!==0&&x!==F&&(x&Y)===0&&(Y=F&-F,ae=x&-x,Y>=ae||Y===16&&(ae&4194240)!==0))return x;if((F&4)!==0&&(F|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=F;0<x;)k=31-Hn(x),Y=1<<k,F|=h[k],x&=~Y;return F}function yr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(h,x){for(var k=h.suspendedLanes,F=h.pingedLanes,Y=h.expirationTimes,ae=h.pendingLanes;0<ae;){var Te=31-Hn(ae),et=1<<Te,lt=Y[Te];lt===-1?((et&k)===0||(et&F)!==0)&&(Y[Te]=yr(et,x)):lt<=x&&(h.expiredLanes|=et),ae&=~et}}function Dr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ta(){var h=We;return We<<=1,(We&4194240)===0&&(We=64),h}function jn(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function Jt(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-Hn(x),h[x]=k}function cr(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var F=h.eventTimes;for(h=h.expirationTimes;0<k;){var Y=31-Hn(k),ae=1<<Y;x[Y]=0,F[Y]=-1,h[Y]=-1,k&=~ae}}function Ft(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var F=31-Hn(k),Y=1<<F;Y&x|h[F]&x&&(h[F]|=x),k&=~Y}}var wr=0;function zt(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Ua,Ia,Da,er,Jr,fa=!1,bn=[],mn=null,Nr=null,Wr=null,or=new Map,Vn=new Map,Hr=[],Ja="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fo(h,x){switch(h){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":or.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(x.pointerId)}}function Si(h,x,k,F,Y,ae){return h===null||h.nativeEvent!==ae?(h={blockedOn:x,domEventName:k,eventSystemFlags:F,nativeEvent:ae,targetContainers:[Y]},x!==null&&(x=Ll(x),x!==null&&Ia(x)),h):(h.eventSystemFlags|=F,x=h.targetContainers,Y!==null&&x.indexOf(Y)===-1&&x.push(Y),h)}function ps(h,x,k,F,Y){switch(x){case"focusin":return mn=Si(mn,h,x,k,F,Y),!0;case"dragenter":return Nr=Si(Nr,h,x,k,F,Y),!0;case"mouseover":return Wr=Si(Wr,h,x,k,F,Y),!0;case"pointerover":var ae=Y.pointerId;return or.set(ae,Si(or.get(ae)||null,h,x,k,F,Y)),!0;case"gotpointercapture":return ae=Y.pointerId,Vn.set(ae,Si(Vn.get(ae)||null,h,x,k,F,Y)),!0}return!1}function ms(h){var x=Pc(h.target);if(x!==null){var k=Ae(x);if(k!==null){if(x=k.tag,x===13){if(x=Ge(k),x!==null){h.blockedOn=x,Jr(h.priority,function(){Da(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ho(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=jc(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var F=new k.constructor(k.type,k);jt=F,k.target.dispatchEvent(F),jt=null}else return x=Ll(k),x!==null&&Ia(x),h.blockedOn=k,!1;x.shift()}return!0}function He(h,x,k){ho(h)&&k.delete(x)}function br(){fa=!1,mn!==null&&ho(mn)&&(mn=null),Nr!==null&&ho(Nr)&&(Nr=null),Wr!==null&&ho(Wr)&&(Wr=null),or.forEach(He),Vn.forEach(He)}function Cr(h,x){h.blockedOn===x&&(h.blockedOn=null,fa||(fa=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,br)))}function Er(h){function x(Y){return Cr(Y,h)}if(0<bn.length){Cr(bn[0],h);for(var k=1;k<bn.length;k++){var F=bn[k];F.blockedOn===h&&(F.blockedOn=null)}}for(mn!==null&&Cr(mn,h),Nr!==null&&Cr(Nr,h),Wr!==null&&Cr(Wr,h),or.forEach(x),Vn.forEach(x),k=0;k<Hr.length;k++)F=Hr[k],F.blockedOn===h&&(F.blockedOn=null);for(;0<Hr.length&&(k=Hr[0],k.blockedOn===null);)ms(k),k.blockedOn===null&&Hr.shift()}var Kr=N.ReactCurrentBatchConfig,Rn=!0;function ka(h,x,k,F){var Y=wr,ae=Kr.transition;Kr.transition=null;try{wr=1,_i(h,x,k,F)}finally{wr=Y,Kr.transition=ae}}function Ys(h,x,k,F){var Y=wr,ae=Kr.transition;Kr.transition=null;try{wr=4,_i(h,x,k,F)}finally{wr=Y,Kr.transition=ae}}function _i(h,x,k,F){if(Rn){var Y=jc(h,x,k,F);if(Y===null)Vu(h,x,F,dd,k),fo(h,F);else if(ps(Y,h,x,k,F))F.stopPropagation();else if(fo(h,F),x&4&&-1<Ja.indexOf(h)){for(;Y!==null;){var ae=Ll(Y);if(ae!==null&&Ua(ae),ae=jc(h,x,k,F),ae===null&&Vu(h,x,F,dd,k),ae===Y)break;Y=ae}Y!==null&&F.stopPropagation()}else Vu(h,x,F,null,k)}}var dd=null;function jc(h,x,k,F){if(dd=null,h=gr(F),h=Pc(h),h!==null)if(x=Ae(h),x===null)h=null;else if(k=x.tag,k===13){if(h=Ge(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return dd=h,null}function ud(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vr()){case Mr:return 1;case Vr:return 4;case Mn:case Fs:return 16;case $n:return 536870912;default:return 16}default:return 16}}var po=null,zi=null,Hi=null;function Lf(){if(Hi)return Hi;var h,x=zi,k=x.length,F,Y="value"in po?po.value:po.textContent,ae=Y.length;for(h=0;h<k&&x[h]===Y[h];h++);var Te=k-h;for(F=1;F<=Te&&x[k-F]===Y[ae-F];F++);return Hi=Y.slice(h,1<F?1-F:void 0)}function Wi(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function Ai(){return!0}function El(){return!1}function xs(h){function x(k,F,Y,ae,Te){this._reactName=k,this._targetInst=Y,this.type=F,this.nativeEvent=ae,this.target=Te,this.currentTarget=null;for(var et in h)h.hasOwnProperty(et)&&(k=h[et],this[et]=k?k(ae):ae[et]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?Ai:El,this.isPropagationStopped=El,this}return ee(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),x}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=xs(mo),fd=ee({},mo,{view:0,detail:0}),kc=xs(fd),hd,fl,Ci,Do=ee({},fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ci&&(Ci&&h.type==="mousemove"?(hd=h.screenX-Ci.screenX,fl=h.screenY-Ci.screenY):fl=hd=0,Ci=h),hd)},movementY:function(h){return"movementY"in h?h.movementY:fl}}),pd=xs(Do),$u=ee({},Do,{dataTransfer:0}),tu=xs($u),Sc=ee({},fd,{relatedTarget:0}),ba=xs(Sc),zu=ee({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=xs(zu),ru=ee({},mo,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),G=xs(ru),Ne=ee({},mo,{data:0}),Xe=xs(Ne),nt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Pt[h])?!!x[h]:!1}function xr(){return Gt}var qr=ee({},fd,{key:function(h){if(h.key){var x=nt[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=Wi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?xt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(h){return h.type==="keypress"?Wi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Wi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),sn=xs(qr),Zr=ee({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sn=xs(Zr),qa=ee({},fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),$a=xs(qa),gs=ee({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qs=xs(gs),Ms=ee({},Do,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Lo=xs(Ms),Js=[9,13,27,32],xo=l&&"CompositionEvent"in window,go=null;l&&"documentMode"in document&&(go=document.documentMode);var nu=l&&"TextEvent"in window&&!go,au=l&&(!xo||go&&8<go&&11>=go),_c=" ",md=!1;function xd(h,x){switch(h){case"keyup":return Js.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gd(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Sa=!1;function vo(h,x){switch(h){case"compositionend":return gd(x);case"keypress":return x.which!==32?null:(md=!0,_c);case"textInput":return h=x.data,h===_c&&md?null:h;default:return null}}function hl(h,x){if(Sa)return h==="compositionend"||!xo&&xd(h,x)?(h=Lf(),Hi=zi=po=null,Sa=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return au&&x.locale!=="ko"?null:x.data;default:return null}}var Za={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!Za[h.type]:x==="textarea"}function on(h,x,k,F){Qt(F),x=Gu(x,"onChange"),0<x.length&&(k=new Io("onChange","change",null,k,F),h.push({event:k,listeners:x}))}var rs=null,ga=null;function ui(h){Wu(h,0)}function Bn(h){var x=Ic(h);if(he(x))return h}function Rs(h,x){if(h==="change")return x}var za=!1;if(l){var Vi;if(l){var Ha="oninput"in document;if(!Ha){var vs=document.createElement("div");vs.setAttribute("oninput","return;"),Ha=typeof vs.oninput=="function"}Vi=Ha}else Vi=!1;za=Vi&&(!document.documentMode||9<document.documentMode)}function wa(){rs&&(rs.detachEvent("onpropertychange",ns),ga=rs=null)}function ns(h){if(h.propertyName==="value"&&Bn(ga)){var x=[];on(x,ga,h,gr(h)),Qr(ui,x)}}function Gi(h,x,k){h==="focusin"?(wa(),rs=x,ga=k,rs.attachEvent("onpropertychange",ns)):h==="focusout"&&wa()}function Tl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Bn(ga)}function Fo(h,x){if(h==="click")return Bn(x)}function su(h,x){if(h==="input"||h==="change")return Bn(x)}function pl(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var Gn=typeof Object.is=="function"?Object.is:pl;function Ol(h,x){if(Gn(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),F=Object.keys(x);if(k.length!==F.length)return!1;for(F=0;F<k.length;F++){var Y=k[F];if(!c.call(x,Y)||!Gn(h[Y],x[Y]))return!1}return!0}function Zs(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ei(h,x){var k=Zs(h);h=0;for(var F;k;){if(k.nodeType===3){if(F=h+k.textContent.length,h<=x&&F>=x)return{node:k,offset:x-h};h=F}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Zs(k)}}function Pl(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Pl(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function vd(){for(var h=window,x=Ue();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=Ue(h.document)}return x}function Il(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function Mo(h){var x=vd(),k=h.focusedElem,F=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&Pl(k.ownerDocument.documentElement,k)){if(F!==null&&Il(k)){if(x=F.start,h=F.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var Y=k.textContent.length,ae=Math.min(F.start,Y);F=F.end===void 0?ae:Math.min(F.end,Y),!h.extend&&ae>F&&(Y=F,F=ae,ae=Y),Y=Ei(k,ae);var Te=Ei(k,F);Y&&Te&&(h.rangeCount!==1||h.anchorNode!==Y.node||h.anchorOffset!==Y.offset||h.focusNode!==Te.node||h.focusOffset!==Te.offset)&&(x=x.createRange(),x.setStart(Y.node,Y.offset),h.removeAllRanges(),ae>F?(h.addRange(x),h.extend(Te.node,Te.offset)):(x.setEnd(Te.node,Te.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Ki=l&&"documentMode"in document&&11>=document.documentMode,Bs=null,Xi=null,Ti=null,Yi=!1;function yo(h,x,k){var F=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Yi||Bs==null||Bs!==Ue(F)||(F=Bs,"selectionStart"in F&&Il(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Ti&&Ol(Ti,F)||(Ti=F,F=Gu(Xi,"onSelect"),0<F.length&&(x=new Io("onSelect","select",null,x,k),h.push({event:x,listeners:F}),x.target=Bs)))}function Cc(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var ys={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},bs={},ra={};l&&(ra=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Xn(h){if(bs[h])return bs[h];if(!ys[h])return h;var x=ys[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in ra)return bs[h]=x[k];return h}var _n=Xn("animationend"),_a=Xn("animationiteration"),Ro=Xn("animationstart"),iu=Xn("transitionend"),Bo=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uo(h,x){Bo.set(h,x),i(x,[h])}for(var Dl=0;Dl<yd.length;Dl++){var fi=yd[Dl],hi=fi.toLowerCase(),Hu=fi[0].toUpperCase()+fi.slice(1);Uo(hi,"on"+Hu)}Uo(_n,"onAnimationEnd"),Uo(_a,"onAnimationIteration"),Uo(Ro,"onAnimationStart"),Uo("dblclick","onDoubleClick"),Uo("focusin","onFocus"),Uo("focusout","onBlur"),Uo(iu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vh=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function ou(h,x,k){var F=h.type||"unknown-event";h.currentTarget=k,ge(F,x,void 0,h),h.currentTarget=null}function Wu(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var F=h[k],Y=F.event;F=F.listeners;e:{var ae=void 0;if(x)for(var Te=F.length-1;0<=Te;Te--){var et=F[Te],lt=et.instance,kt=et.currentTarget;if(et=et.listener,lt!==ae&&Y.isPropagationStopped())break e;ou(Y,et,kt),ae=lt}else for(Te=0;Te<F.length;Te++){if(et=F[Te],lt=et.instance,kt=et.currentTarget,et=et.listener,lt!==ae&&Y.isPropagationStopped())break e;ou(Y,et,kt),ae=lt}}}if(ne)throw h=je,ne=!1,je=null,h}function ha(h,x){var k=x[Qi];k===void 0&&(k=x[Qi]=new Set);var F=h+"__bubble";k.has(F)||(lu(x,h,2,!1),k.add(F))}function Ff(h,x,k){var F=0;x&&(F|=4),lu(k,h,F,x)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function bd(h){if(!h[Ec]){h[Ec]=!0,a.forEach(function(k){k!=="selectionchange"&&(Vh.has(k)||Ff(k,!1,h),Ff(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[Ec]||(x[Ec]=!0,Ff("selectionchange",!1,x))}}function lu(h,x,k,F){switch(ud(x)){case 1:var Y=ka;break;case 4:Y=Ys;break;default:Y=_i}k=Y.bind(null,x,k,h),Y=void 0,!qn||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Y=!0),F?Y!==void 0?h.addEventListener(x,k,{capture:!0,passive:Y}):h.addEventListener(x,k,!0):Y!==void 0?h.addEventListener(x,k,{passive:Y}):h.addEventListener(x,k,!1)}function Vu(h,x,k,F,Y){var ae=F;if((x&1)===0&&(x&2)===0&&F!==null)e:for(;;){if(F===null)return;var Te=F.tag;if(Te===3||Te===4){var et=F.stateNode.containerInfo;if(et===Y||et.nodeType===8&&et.parentNode===Y)break;if(Te===4)for(Te=F.return;Te!==null;){var lt=Te.tag;if((lt===3||lt===4)&&(lt=Te.stateNode.containerInfo,lt===Y||lt.nodeType===8&&lt.parentNode===Y))return;Te=Te.return}for(;et!==null;){if(Te=Pc(et),Te===null)return;if(lt=Te.tag,lt===5||lt===6){F=ae=Te;continue e}et=et.parentNode}}F=F.return}Qr(function(){var kt=ae,Yt=gr(k),Zt=[];e:{var Kt=Bo.get(h);if(Kt!==void 0){var jr=Io,Or=h;switch(h){case"keypress":if(Wi(k)===0)break e;case"keydown":case"keyup":jr=sn;break;case"focusin":Or="focus",jr=ba;break;case"focusout":Or="blur",jr=ba;break;case"beforeblur":case"afterblur":jr=ba;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jr=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jr=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jr=$a;break;case _n:case _a:case Ro:jr=ec;break;case iu:jr=Qs;break;case"scroll":jr=kc;break;case"wheel":jr=Lo;break;case"copy":case"cut":case"paste":jr=G;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jr=Sn}var Rr=(x&4)!==0,ri=!Rr&&h==="scroll",bt=Rr?Kt!==null?Kt+"Capture":null:Kt;Rr=[];for(var ft=kt,Nt;ft!==null;){Nt=ft;var ar=Nt.stateNode;if(Nt.tag===5&&ar!==null&&(Nt=ar,bt!==null&&(ar=ir(ft,bt),ar!=null&&Rr.push(Tc(ft,ar,Nt)))),ri)break;ft=ft.return}0<Rr.length&&(Kt=new jr(Kt,Or,null,k,Yt),Zt.push({event:Kt,listeners:Rr}))}}if((x&7)===0){e:{if(Kt=h==="mouseover"||h==="pointerover",jr=h==="mouseout"||h==="pointerout",Kt&&k!==jt&&(Or=k.relatedTarget||k.fromElement)&&(Pc(Or)||Or[ss]))break e;if((jr||Kt)&&(Kt=Yt.window===Yt?Yt:(Kt=Yt.ownerDocument)?Kt.defaultView||Kt.parentWindow:window,jr?(Or=k.relatedTarget||k.toElement,jr=kt,Or=Or?Pc(Or):null,Or!==null&&(ri=Ae(Or),Or!==ri||Or.tag!==5&&Or.tag!==6)&&(Or=null)):(jr=null,Or=kt),jr!==Or)){if(Rr=pd,ar="onMouseLeave",bt="onMouseEnter",ft="mouse",(h==="pointerout"||h==="pointerover")&&(Rr=Sn,ar="onPointerLeave",bt="onPointerEnter",ft="pointer"),ri=jr==null?Kt:Ic(jr),Nt=Or==null?Kt:Ic(Or),Kt=new Rr(ar,ft+"leave",jr,k,Yt),Kt.target=ri,Kt.relatedTarget=Nt,ar=null,Pc(Yt)===kt&&(Rr=new Rr(bt,ft+"enter",Or,k,Yt),Rr.target=Nt,Rr.relatedTarget=ri,ar=Rr),ri=ar,jr&&Or)t:{for(Rr=jr,bt=Or,ft=0,Nt=Rr;Nt;Nt=wd(Nt))ft++;for(Nt=0,ar=bt;ar;ar=wd(ar))Nt++;for(;0<ft-Nt;)Rr=wd(Rr),ft--;for(;0<Nt-ft;)bt=wd(bt),Nt--;for(;ft--;){if(Rr===bt||bt!==null&&Rr===bt.alternate)break t;Rr=wd(Rr),bt=wd(bt)}Rr=null}else Rr=null;jr!==null&&M0(Zt,Kt,jr,Rr,!1),Or!==null&&ri!==null&&M0(Zt,ri,Or,Rr,!0)}}e:{if(Kt=kt?Ic(kt):window,jr=Kt.nodeName&&Kt.nodeName.toLowerCase(),jr==="select"||jr==="input"&&Kt.type==="file")var Ur=Rs;else if(Ac(Kt))if(za)Ur=su;else{Ur=Tl;var Xr=Gi}else(jr=Kt.nodeName)&&jr.toLowerCase()==="input"&&(Kt.type==="checkbox"||Kt.type==="radio")&&(Ur=Fo);if(Ur&&(Ur=Ur(h,kt))){on(Zt,Ur,k,Yt);break e}Xr&&Xr(h,Kt,kt),h==="focusout"&&(Xr=Kt._wrapperState)&&Xr.controlled&&Kt.type==="number"&&Pe(Kt,"number",Kt.value)}switch(Xr=kt?Ic(kt):window,h){case"focusin":(Ac(Xr)||Xr.contentEditable==="true")&&(Bs=Xr,Xi=kt,Ti=null);break;case"focusout":Ti=Xi=Bs=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,yo(Zt,k,Yt);break;case"selectionchange":if(Ki)break;case"keydown":case"keyup":yo(Zt,k,Yt)}var Yr;if(xo)e:{switch(h){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else Sa?xd(h,k)&&(pn="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(pn="onCompositionStart");pn&&(au&&k.locale!=="ko"&&(Sa||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&Sa&&(Yr=Lf()):(po=Yt,zi="value"in po?po.value:po.textContent,Sa=!0)),Xr=Gu(kt,pn),0<Xr.length&&(pn=new Xe(pn,h,null,k,Yt),Zt.push({event:pn,listeners:Xr}),Yr?pn.data=Yr:(Yr=gd(k),Yr!==null&&(pn.data=Yr)))),(Yr=nu?vo(h,k):hl(h,k))&&(kt=Gu(kt,"onBeforeInput"),0<kt.length&&(Yt=new Xe("onBeforeInput","beforeinput",null,k,Yt),Zt.push({event:Yt,listeners:kt}),Yt.data=Yr))}Wu(Zt,x)})}function Tc(h,x,k){return{instance:h,listener:x,currentTarget:k}}function Gu(h,x){for(var k=x+"Capture",F=[];h!==null;){var Y=h,ae=Y.stateNode;Y.tag===5&&ae!==null&&(Y=ae,ae=ir(h,k),ae!=null&&F.unshift(Tc(h,ae,Y)),ae=ir(h,x),ae!=null&&F.push(Tc(h,ae,Y))),h=h.return}return F}function wd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function M0(h,x,k,F,Y){for(var ae=x._reactName,Te=[];k!==null&&k!==F;){var et=k,lt=et.alternate,kt=et.stateNode;if(lt!==null&&lt===F)break;et.tag===5&&kt!==null&&(et=kt,Y?(lt=ir(k,ae),lt!=null&&Te.unshift(Tc(k,lt,et))):Y||(lt=ir(k,ae),lt!=null&&Te.push(Tc(k,lt,et)))),k=k.return}Te.length!==0&&h.push({event:x,listeners:Te})}var Mf=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function Ku(h){return(typeof h=="string"?h:""+h).replace(Mf,`
`).replace(Gh,"")}function Xu(h,x,k){if(x=Ku(x),Ku(h)!==x&&k)throw Error(r(425))}function rc(){}var cu=null,du=null;function Rf(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,Oc=typeof clearTimeout=="function"?clearTimeout:void 0,nc=typeof Promise=="function"?Promise:void 0,Nd=typeof queueMicrotask=="function"?queueMicrotask:typeof nc<"u"?function(h){return nc.resolve(null).then(h).catch(gm)}:R0;function gm(h){setTimeout(function(){throw h})}function Yu(h,x){var k=x,F=0;do{var Y=k.nextSibling;if(h.removeChild(k),Y&&Y.nodeType===8)if(k=Y.data,k==="/$"){if(F===0){h.removeChild(Y),Er(x);return}F--}else k!=="$"&&k!=="$?"&&k!=="$!"||F++;k=Y}while(k);Er(x)}function as(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function bo(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),wo="__reactFiber$"+Oi,uu="__reactProps$"+Oi,ss="__reactContainer$"+Oi,Qi="__reactEvents$"+Oi,vm="__reactListeners$"+Oi,Bf="__reactHandles$"+Oi;function Pc(h){var x=h[wo];if(x)return x;for(var k=h.parentNode;k;){if(x=k[ss]||k[wo]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=bo(h);h!==null;){if(k=h[wo])return k;h=bo(h)}return x}h=k,k=h.parentNode}return null}function Ll(h){return h=h[wo]||h[ss],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Ic(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Qu(h){return h[uu]||null}var Uf=[],qo=-1;function ml(h){return{current:h}}function Yn(h){0>qo||(h.current=Uf[qo],Uf[qo]=null,qo--)}function na(h,x){qo++,Uf[qo]=h.current,h.current=x}var Dc={},ws=ml(Dc),pi=ml(!1),Fl=Dc;function jd(h,x){var k=h.type.contextTypes;if(!k)return Dc;var F=h.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===x)return F.__reactInternalMemoizedMaskedChildContext;var Y={},ae;for(ae in k)Y[ae]=x[ae];return F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=Y),Y}function Ji(h){return h=h.childContextTypes,h!=null}function Ju(){Yn(pi),Yn(ws)}function qf(h,x,k){if(ws.current!==Dc)throw Error(r(168));na(ws,x),na(pi,k)}function B0(h,x,k){var F=h.stateNode;if(x=x.childContextTypes,typeof F.getChildContext!="function")return k;F=F.getChildContext();for(var Y in F)if(!(Y in x))throw Error(r(108,oe(h)||"Unknown",Y));return ee({},k,F)}function Lc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Dc,Fl=ws.current,na(ws,h),na(pi,pi.current),!0}function Kh(h,x,k){var F=h.stateNode;if(!F)throw Error(r(169));k?(h=B0(h,x,Fl),F.__reactInternalMemoizedMergedChildContext=h,Yn(pi),Yn(ws),na(ws,h)):Yn(pi),na(pi,k)}var $o=null,La=!1,A=!1;function M(h){$o===null?$o=[h]:$o.push(h)}function Z(h){La=!0,M(h)}function ce(){if(!A&&$o!==null){A=!0;var h=0,x=wr;try{var k=$o;for(wr=1;h<k.length;h++){var F=k[h];do F=F(!0);while(F!==null)}$o=null,La=!1}catch(Y){throw $o!==null&&($o=$o.slice(h+1)),Le(Mr,ce),Y}finally{wr=x,A=!1}}return null}var ye=[],Ce=0,Ie=null,De=0,Me=[],ze=0,at=null,gt=1,vt="";function ht(h,x){ye[Ce++]=De,ye[Ce++]=Ie,Ie=h,De=x}function qt(h,x,k){Me[ze++]=gt,Me[ze++]=vt,Me[ze++]=at,at=h;var F=gt;h=vt;var Y=32-Hn(F)-1;F&=~(1<<Y),k+=1;var ae=32-Hn(x)+Y;if(30<ae){var Te=Y-Y%5;ae=(F&(1<<Te)-1).toString(32),F>>=Te,Y-=Te,gt=1<<32-Hn(x)+Y|k<<Y|F,vt=ae+h}else gt=1<<ae|k<<Y|F,vt=h}function St(h){h.return!==null&&(ht(h,1),qt(h,1,0))}function ct(h){for(;h===Ie;)Ie=ye[--Ce],ye[Ce]=null,De=ye[--Ce],ye[Ce]=null;for(;h===at;)at=Me[--ze],Me[ze]=null,vt=Me[--ze],Me[ze]=null,gt=Me[--ze],Me[ze]=null}var it=null,Ct=null,At=!1,Mt=null;function dr(h,x){var k=Uc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function rr(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,it=h,Ct=as(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,it=h,Ct=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=at!==null?{id:gt,overflow:vt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Uc(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,it=h,Ct=null,!0):!1;default:return!1}}function $r(h){return(h.mode&1)!==0&&(h.flags&128)===0}function fr(h){if(At){var x=Ct;if(x){var k=x;if(!rr(h,x)){if($r(h))throw Error(r(418));x=as(k.nextSibling);var F=it;x&&rr(h,x)?dr(F,k):(h.flags=h.flags&-4097|2,At=!1,it=h)}}else{if($r(h))throw Error(r(418));h.flags=h.flags&-4097|2,At=!1,it=h}}}function vn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;it=h}function Tn(h){if(h!==it)return!1;if(!At)return vn(h),At=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!Rf(h.type,h.memoizedProps)),x&&(x=Ct)){if($r(h))throw An(),Error(r(418));for(;x;)dr(h,x),x=as(x.nextSibling)}if(vn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){Ct=as(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}Ct=null}}else Ct=it?as(h.stateNode.nextSibling):null;return!0}function An(){for(var h=Ct;h;)h=as(h.nextSibling)}function ln(){Ct=it=null,At=!1}function Qn(h){Mt===null?Mt=[h]:Mt.push(h)}var In=N.ReactCurrentBatchConfig;function en(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var F=k.stateNode}if(!F)throw Error(r(147,h));var Y=F,ae=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ae?x.ref:(x=function(Te){var et=Y.refs;Te===null?delete et[ae]:et[ae]=Te},x._stringRef=ae,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function Wa(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Pi(h){var x=h._init;return x(h._payload)}function Va(h){function x(bt,ft){if(h){var Nt=bt.deletions;Nt===null?(bt.deletions=[ft],bt.flags|=16):Nt.push(ft)}}function k(bt,ft){if(!h)return null;for(;ft!==null;)x(bt,ft),ft=ft.sibling;return null}function F(bt,ft){for(bt=new Map;ft!==null;)ft.key!==null?bt.set(ft.key,ft):bt.set(ft.index,ft),ft=ft.sibling;return bt}function Y(bt,ft){return bt=Qf(bt,ft),bt.index=0,bt.sibling=null,bt}function ae(bt,ft,Nt){return bt.index=Nt,h?(Nt=bt.alternate,Nt!==null?(Nt=Nt.index,Nt<ft?(bt.flags|=2,ft):Nt):(bt.flags|=2,ft)):(bt.flags|=1048576,ft)}function Te(bt){return h&&bt.alternate===null&&(bt.flags|=2),bt}function et(bt,ft,Nt,ar){return ft===null||ft.tag!==6?(ft=Zb(Nt,bt.mode,ar),ft.return=bt,ft):(ft=Y(ft,Nt),ft.return=bt,ft)}function lt(bt,ft,Nt,ar){var Ur=Nt.type;return Ur===_?Yt(bt,ft,Nt.props.children,ar,Nt.key):ft!==null&&(ft.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===Q&&Pi(Ur)===ft.type)?(ar=Y(ft,Nt.props),ar.ref=en(bt,ft,Nt),ar.return=bt,ar):(ar=Gg(Nt.type,Nt.key,Nt.props,null,bt.mode,ar),ar.ref=en(bt,ft,Nt),ar.return=bt,ar)}function kt(bt,ft,Nt,ar){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==Nt.containerInfo||ft.stateNode.implementation!==Nt.implementation?(ft=e2(Nt,bt.mode,ar),ft.return=bt,ft):(ft=Y(ft,Nt.children||[]),ft.return=bt,ft)}function Yt(bt,ft,Nt,ar,Ur){return ft===null||ft.tag!==7?(ft=K0(Nt,bt.mode,ar,Ur),ft.return=bt,ft):(ft=Y(ft,Nt),ft.return=bt,ft)}function Zt(bt,ft,Nt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ft=Zb(""+ft,bt.mode,Nt),ft.return=bt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case S:return Nt=Gg(ft.type,ft.key,ft.props,null,bt.mode,Nt),Nt.ref=en(bt,null,ft),Nt.return=bt,Nt;case E:return ft=e2(ft,bt.mode,Nt),ft.return=bt,ft;case Q:var ar=ft._init;return Zt(bt,ar(ft._payload),Nt)}if(fe(ft)||X(ft))return ft=K0(ft,bt.mode,Nt,null),ft.return=bt,ft;Wa(bt,ft)}return null}function Kt(bt,ft,Nt,ar){var Ur=ft!==null?ft.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Ur!==null?null:et(bt,ft,""+Nt,ar);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:return Nt.key===Ur?lt(bt,ft,Nt,ar):null;case E:return Nt.key===Ur?kt(bt,ft,Nt,ar):null;case Q:return Ur=Nt._init,Kt(bt,ft,Ur(Nt._payload),ar)}if(fe(Nt)||X(Nt))return Ur!==null?null:Yt(bt,ft,Nt,ar,null);Wa(bt,Nt)}return null}function jr(bt,ft,Nt,ar,Ur){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return bt=bt.get(Nt)||null,et(ft,bt,""+ar,Ur);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case S:return bt=bt.get(ar.key===null?Nt:ar.key)||null,lt(ft,bt,ar,Ur);case E:return bt=bt.get(ar.key===null?Nt:ar.key)||null,kt(ft,bt,ar,Ur);case Q:var Xr=ar._init;return jr(bt,ft,Nt,Xr(ar._payload),Ur)}if(fe(ar)||X(ar))return bt=bt.get(Nt)||null,Yt(ft,bt,ar,Ur,null);Wa(ft,ar)}return null}function Or(bt,ft,Nt,ar){for(var Ur=null,Xr=null,Yr=ft,pn=ft=0,no=null;Yr!==null&&pn<Nt.length;pn++){Yr.index>pn?(no=Yr,Yr=null):no=Yr.sibling;var pa=Kt(bt,Yr,Nt[pn],ar);if(pa===null){Yr===null&&(Yr=no);break}h&&Yr&&pa.alternate===null&&x(bt,Yr),ft=ae(pa,ft,pn),Xr===null?Ur=pa:Xr.sibling=pa,Xr=pa,Yr=no}if(pn===Nt.length)return k(bt,Yr),At&&ht(bt,pn),Ur;if(Yr===null){for(;pn<Nt.length;pn++)Yr=Zt(bt,Nt[pn],ar),Yr!==null&&(ft=ae(Yr,ft,pn),Xr===null?Ur=Yr:Xr.sibling=Yr,Xr=Yr);return At&&ht(bt,pn),Ur}for(Yr=F(bt,Yr);pn<Nt.length;pn++)no=jr(Yr,bt,pn,Nt[pn],ar),no!==null&&(h&&no.alternate!==null&&Yr.delete(no.key===null?pn:no.key),ft=ae(no,ft,pn),Xr===null?Ur=no:Xr.sibling=no,Xr=no);return h&&Yr.forEach(function(Jf){return x(bt,Jf)}),At&&ht(bt,pn),Ur}function Rr(bt,ft,Nt,ar){var Ur=X(Nt);if(typeof Ur!="function")throw Error(r(150));if(Nt=Ur.call(Nt),Nt==null)throw Error(r(151));for(var Xr=Ur=null,Yr=ft,pn=ft=0,no=null,pa=Nt.next();Yr!==null&&!pa.done;pn++,pa=Nt.next()){Yr.index>pn?(no=Yr,Yr=null):no=Yr.sibling;var Jf=Kt(bt,Yr,pa.value,ar);if(Jf===null){Yr===null&&(Yr=no);break}h&&Yr&&Jf.alternate===null&&x(bt,Yr),ft=ae(Jf,ft,pn),Xr===null?Ur=Jf:Xr.sibling=Jf,Xr=Jf,Yr=no}if(pa.done)return k(bt,Yr),At&&ht(bt,pn),Ur;if(Yr===null){for(;!pa.done;pn++,pa=Nt.next())pa=Zt(bt,pa.value,ar),pa!==null&&(ft=ae(pa,ft,pn),Xr===null?Ur=pa:Xr.sibling=pa,Xr=pa);return At&&ht(bt,pn),Ur}for(Yr=F(bt,Yr);!pa.done;pn++,pa=Nt.next())pa=jr(Yr,bt,pn,pa.value,ar),pa!==null&&(h&&pa.alternate!==null&&Yr.delete(pa.key===null?pn:pa.key),ft=ae(pa,ft,pn),Xr===null?Ur=pa:Xr.sibling=pa,Xr=pa);return h&&Yr.forEach(function(LB){return x(bt,LB)}),At&&ht(bt,pn),Ur}function ri(bt,ft,Nt,ar){if(typeof Nt=="object"&&Nt!==null&&Nt.type===_&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:e:{for(var Ur=Nt.key,Xr=ft;Xr!==null;){if(Xr.key===Ur){if(Ur=Nt.type,Ur===_){if(Xr.tag===7){k(bt,Xr.sibling),ft=Y(Xr,Nt.props.children),ft.return=bt,bt=ft;break e}}else if(Xr.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===Q&&Pi(Ur)===Xr.type){k(bt,Xr.sibling),ft=Y(Xr,Nt.props),ft.ref=en(bt,Xr,Nt),ft.return=bt,bt=ft;break e}k(bt,Xr);break}else x(bt,Xr);Xr=Xr.sibling}Nt.type===_?(ft=K0(Nt.props.children,bt.mode,ar,Nt.key),ft.return=bt,bt=ft):(ar=Gg(Nt.type,Nt.key,Nt.props,null,bt.mode,ar),ar.ref=en(bt,ft,Nt),ar.return=bt,bt=ar)}return Te(bt);case E:e:{for(Xr=Nt.key;ft!==null;){if(ft.key===Xr)if(ft.tag===4&&ft.stateNode.containerInfo===Nt.containerInfo&&ft.stateNode.implementation===Nt.implementation){k(bt,ft.sibling),ft=Y(ft,Nt.children||[]),ft.return=bt,bt=ft;break e}else{k(bt,ft);break}else x(bt,ft);ft=ft.sibling}ft=e2(Nt,bt.mode,ar),ft.return=bt,bt=ft}return Te(bt);case Q:return Xr=Nt._init,ri(bt,ft,Xr(Nt._payload),ar)}if(fe(Nt))return Or(bt,ft,Nt,ar);if(X(Nt))return Rr(bt,ft,Nt,ar);Wa(bt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"?(Nt=""+Nt,ft!==null&&ft.tag===6?(k(bt,ft.sibling),ft=Y(ft,Nt),ft.return=bt,bt=ft):(k(bt,ft),ft=Zb(Nt,bt.mode,ar),ft.return=bt,bt=ft),Te(bt)):k(bt,ft)}return ri}var Ns=Va(!0),Jn=Va(!1),Cs=ml(null),mi=null,Ga=null,Fa=null;function Us(){Fa=Ga=mi=null}function Ii(h){var x=Cs.current;Yn(Cs),h._currentValue=x}function zo(h,x,k){for(;h!==null;){var F=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,F!==null&&(F.childLanes|=x)):F!==null&&(F.childLanes&x)!==x&&(F.childLanes|=x),h===k)break;h=h.return}}function Ka(h,x){mi=h,Fa=Ga=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&($l=!0),h.firstContext=null)}function es(h){var x=h._currentValue;if(Fa!==h)if(h={context:h,memoizedValue:x,next:null},Ga===null){if(mi===null)throw Error(r(308));Ga=h,mi.dependencies={lanes:0,firstContext:h}}else Ga=Ga.next=h;return x}var Es=null;function Fc(h){Es===null?Es=[h]:Es.push(h)}function Zi(h,x,k,F){var Y=x.interleaved;return Y===null?(k.next=k,Fc(x)):(k.next=Y.next,Y.next=k),x.interleaved=k,Kn(h,F)}function Kn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Ml=!1;function kd(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fu(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ho(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function No(h,x,k){var F=h.updateQueue;if(F===null)return null;if(F=F.shared,(ia&2)!==0){var Y=F.pending;return Y===null?x.next=x:(x.next=Y.next,Y.next=x),F.pending=x,Kn(h,k)}return Y=F.interleaved,Y===null?(x.next=x,Fc(F)):(x.next=Y.next,Y.next=x),F.interleaved=x,Kn(h,k)}function ac(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Ft(h,k)}}function jo(h,x){var k=h.updateQueue,F=h.alternate;if(F!==null&&(F=F.updateQueue,k===F)){var Y=null,ae=null;if(k=k.firstBaseUpdate,k!==null){do{var Te={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ae===null?Y=ae=Te:ae=ae.next=Te,k=k.next}while(k!==null);ae===null?Y=ae=x:ae=ae.next=x}else Y=ae=x;k={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:ae,shared:F.shared,effects:F.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function Rl(h,x,k,F){var Y=h.updateQueue;Ml=!1;var ae=Y.firstBaseUpdate,Te=Y.lastBaseUpdate,et=Y.shared.pending;if(et!==null){Y.shared.pending=null;var lt=et,kt=lt.next;lt.next=null,Te===null?ae=kt:Te.next=kt,Te=lt;var Yt=h.alternate;Yt!==null&&(Yt=Yt.updateQueue,et=Yt.lastBaseUpdate,et!==Te&&(et===null?Yt.firstBaseUpdate=kt:et.next=kt,Yt.lastBaseUpdate=lt))}if(ae!==null){var Zt=Y.baseState;Te=0,Yt=kt=lt=null,et=ae;do{var Kt=et.lane,jr=et.eventTime;if((F&Kt)===Kt){Yt!==null&&(Yt=Yt.next={eventTime:jr,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var Or=h,Rr=et;switch(Kt=x,jr=k,Rr.tag){case 1:if(Or=Rr.payload,typeof Or=="function"){Zt=Or.call(jr,Zt,Kt);break e}Zt=Or;break e;case 3:Or.flags=Or.flags&-65537|128;case 0:if(Or=Rr.payload,Kt=typeof Or=="function"?Or.call(jr,Zt,Kt):Or,Kt==null)break e;Zt=ee({},Zt,Kt);break e;case 2:Ml=!0}}et.callback!==null&&et.lane!==0&&(h.flags|=64,Kt=Y.effects,Kt===null?Y.effects=[et]:Kt.push(et))}else jr={eventTime:jr,lane:Kt,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Yt===null?(kt=Yt=jr,lt=Zt):Yt=Yt.next=jr,Te|=Kt;if(et=et.next,et===null){if(et=Y.shared.pending,et===null)break;Kt=et,et=Kt.next,Kt.next=null,Y.lastBaseUpdate=Kt,Y.shared.pending=null}}while(!0);if(Yt===null&&(lt=Zt),Y.baseState=lt,Y.firstBaseUpdate=kt,Y.lastBaseUpdate=Yt,x=Y.shared.interleaved,x!==null){Y=x;do Te|=Y.lane,Y=Y.next;while(Y!==x)}else ae===null&&(Y.shared.lanes=0);H0|=Te,h.lanes=Te,h.memoizedState=Zt}}function Sd(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var F=h[x],Y=F.callback;if(Y!==null){if(F.callback=null,F=k,typeof Y!="function")throw Error(r(191,Y));Y.call(F)}}}var hu={},ko=ml(hu),pu=ml(hu),Mc=ml(hu);function sc(h){if(h===hu)throw Error(r(174));return h}function mu(h,x){switch(na(Mc,x),na(pu,h),na(ko,hu),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:$e(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=$e(x,h)}Yn(ko),na(ko,x)}function Bl(){Yn(ko),Yn(pu),Yn(Mc)}function Xh(h){sc(Mc.current);var x=sc(ko.current),k=$e(x,h.type);x!==k&&(na(pu,h),na(ko,k))}function Zu(h){pu.current===h&&(Yn(ko),Yn(pu))}var va=ml(0);function ei(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var ic=[];function U0(){for(var h=0;h<ic.length;h++)ic[h]._workInProgressVersionPrimary=null;ic.length=0}var _d=N.ReactCurrentDispatcher,$f=N.ReactCurrentBatchConfig,Ul=0,Ma=null,js=null,is=null,xu=!1,oc=!1,Rc=0,q0=0;function Ts(){throw Error(r(321))}function zf(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!Gn(h[k],x[k]))return!1;return!0}function ef(h,x,k,F,Y,ae){if(Ul=ae,Ma=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,_d.current=h===null||h.memoizedState===null?oB:lB,h=k(F,Y),oc){ae=0;do{if(oc=!1,Rc=0,25<=ae)throw Error(r(301));ae+=1,is=js=null,x.updateQueue=null,_d.current=cB,h=k(F,Y)}while(oc)}if(_d.current=Ig,x=js!==null&&js.next!==null,Ul=0,is=js=Ma=null,xu=!1,x)throw Error(r(300));return h}function ql(){var h=Rc!==0;return Rc=0,h}function Wo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?Ma.memoizedState=is=h:is=is.next=h,is}function eo(){if(js===null){var h=Ma.alternate;h=h!==null?h.memoizedState:null}else h=js.next;var x=is===null?Ma.memoizedState:is.next;if(x!==null)is=x,js=h;else{if(h===null)throw Error(r(310));js=h,h={memoizedState:js.memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},is===null?Ma.memoizedState=is=h:is=is.next=h}return is}function tf(h,x){return typeof x=="function"?x(h):x}function Hf(h){var x=eo(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=js,Y=F.baseQueue,ae=k.pending;if(ae!==null){if(Y!==null){var Te=Y.next;Y.next=ae.next,ae.next=Te}F.baseQueue=Y=ae,k.pending=null}if(Y!==null){ae=Y.next,F=F.baseState;var et=Te=null,lt=null,kt=ae;do{var Yt=kt.lane;if((Ul&Yt)===Yt)lt!==null&&(lt=lt.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),F=kt.hasEagerState?kt.eagerState:h(F,kt.action);else{var Zt={lane:Yt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};lt===null?(et=lt=Zt,Te=F):lt=lt.next=Zt,Ma.lanes|=Yt,H0|=Yt}kt=kt.next}while(kt!==null&&kt!==ae);lt===null?Te=F:lt.next=et,Gn(F,x.memoizedState)||($l=!0),x.memoizedState=F,x.baseState=Te,x.baseQueue=lt,k.lastRenderedState=F}if(h=k.interleaved,h!==null){Y=h;do ae=Y.lane,Ma.lanes|=ae,H0|=ae,Y=Y.next;while(Y!==h)}else Y===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function lc(h){var x=eo(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=k.dispatch,Y=k.pending,ae=x.memoizedState;if(Y!==null){k.pending=null;var Te=Y=Y.next;do ae=h(ae,Te.action),Te=Te.next;while(Te!==Y);Gn(ae,x.memoizedState)||($l=!0),x.memoizedState=ae,x.baseQueue===null&&(x.baseState=ae),k.lastRenderedState=ae}return[ae,F]}function Ad(){}function rf(h,x){var k=Ma,F=eo(),Y=x(),ae=!Gn(F.memoizedState,Y);if(ae&&(F.memoizedState=Y,$l=!0),F=F.queue,wt(z0.bind(null,k,F,h),[h]),F.getSnapshot!==x||ae||is!==null&&is.memoizedState.tag&1){if(k.flags|=2048,pe(9,$0.bind(null,k,F,Y,x),void 0,null),ro===null)throw Error(r(349));(Ul&30)!==0||to(k,x,Y)}return Y}function to(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=Ma.updateQueue,x===null?(x={lastEffect:null,stores:null},Ma.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function $0(h,x,k,F){x.value=k,x.getSnapshot=F,cc(x)&&nf(h)}function z0(h,x,k){return k(function(){cc(x)&&nf(h)})}function cc(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!Gn(h,k)}catch{return!0}}function nf(h){var x=Kn(h,1);x!==null&&Od(x,h,1,-1)}function D(h){var x=Wo();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:h},x.queue=h,h=h.dispatch=iB.bind(null,Ma,h),[x.memoizedState,h]}function pe(h,x,k,F){return h={tag:h,create:x,destroy:k,deps:F,next:null},x=Ma.updateQueue,x===null?(x={lastEffect:null,stores:null},Ma.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(F=k.next,k.next=h,h.next=F,x.lastEffect=h)),h}function be(){return eo().memoizedState}function Je(h,x,k,F){var Y=Wo();Ma.flags|=h,Y.memoizedState=pe(1|x,k,void 0,F===void 0?null:F)}function ot(h,x,k,F){var Y=eo();F=F===void 0?null:F;var ae=void 0;if(js!==null){var Te=js.memoizedState;if(ae=Te.destroy,F!==null&&zf(F,Te.deps)){Y.memoizedState=pe(x,k,ae,F);return}}Ma.flags|=h,Y.memoizedState=pe(1|x,k,ae,F)}function It(h,x){return Je(8390656,8,h,x)}function wt(h,x){return ot(2048,8,h,x)}function $t(h,x){return ot(4,2,h,x)}function kr(h,x){return ot(4,4,h,x)}function xn(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function aa(h,x,k){return k=k!=null?k.concat([h]):null,ot(4,4,xn.bind(null,x,h),k)}function sa(){}function ti(h,x){var k=eo();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&zf(x,F[1])?F[0]:(k.memoizedState=[h,x],h)}function Wf(h,x){var k=eo();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&zf(x,F[1])?F[0]:(h=h(),k.memoizedState=[h,x],h)}function _b(h,x,k){return(Ul&21)===0?(h.baseState&&(h.baseState=!1,$l=!0),h.memoizedState=k):(Gn(k,x)||(k=ta(),Ma.lanes|=k,H0|=k,h.baseState=!0),x)}function aB(h,x){var k=wr;wr=k!==0&&4>k?k:4,h(!0);var F=$f.transition;$f.transition={};try{h(!1),x()}finally{wr=k,$f.transition=F}}function t_(){return eo().memoizedState}function sB(h,x,k){var F=Xf(h);if(k={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null},r_(h))n_(x,k);else if(k=Zi(h,x,k,F),k!==null){var Y=gl();Od(k,h,F,Y),a_(k,x,F)}}function iB(h,x,k){var F=Xf(h),Y={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null};if(r_(h))n_(x,Y);else{var ae=h.alternate;if(h.lanes===0&&(ae===null||ae.lanes===0)&&(ae=x.lastRenderedReducer,ae!==null))try{var Te=x.lastRenderedState,et=ae(Te,k);if(Y.hasEagerState=!0,Y.eagerState=et,Gn(et,Te)){var lt=x.interleaved;lt===null?(Y.next=Y,Fc(x)):(Y.next=lt.next,lt.next=Y),x.interleaved=Y;return}}catch{}k=Zi(h,x,Y,F),k!==null&&(Y=gl(),Od(k,h,F,Y),a_(k,x,F))}}function r_(h){var x=h.alternate;return h===Ma||x!==null&&x===Ma}function n_(h,x){oc=xu=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function a_(h,x,k){if((k&4194240)!==0){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Ft(h,k)}}var Ig={readContext:es,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useInsertionEffect:Ts,useLayoutEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useMutableSource:Ts,useSyncExternalStore:Ts,useId:Ts,unstable_isNewReconciler:!1},oB={readContext:es,useCallback:function(h,x){return Wo().memoizedState=[h,x===void 0?null:x],h},useContext:es,useEffect:It,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,Je(4194308,4,xn.bind(null,x,h),k)},useLayoutEffect:function(h,x){return Je(4194308,4,h,x)},useInsertionEffect:function(h,x){return Je(4,2,h,x)},useMemo:function(h,x){var k=Wo();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var F=Wo();return x=k!==void 0?k(x):x,F.memoizedState=F.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},F.queue=h,h=h.dispatch=sB.bind(null,Ma,h),[F.memoizedState,h]},useRef:function(h){var x=Wo();return h={current:h},x.memoizedState=h},useState:D,useDebugValue:sa,useDeferredValue:function(h){return Wo().memoizedState=h},useTransition:function(){var h=D(!1),x=h[0];return h=aB.bind(null,h[1]),Wo().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var F=Ma,Y=Wo();if(At){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),ro===null)throw Error(r(349));(Ul&30)!==0||to(F,x,k)}Y.memoizedState=k;var ae={value:k,getSnapshot:x};return Y.queue=ae,It(z0.bind(null,F,ae,h),[h]),F.flags|=2048,pe(9,$0.bind(null,F,ae,k,x),void 0,null),k},useId:function(){var h=Wo(),x=ro.identifierPrefix;if(At){var k=vt,F=gt;k=(F&~(1<<32-Hn(F)-1)).toString(32)+k,x=":"+x+"R"+k,k=Rc++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=q0++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},lB={readContext:es,useCallback:ti,useContext:es,useEffect:wt,useImperativeHandle:aa,useInsertionEffect:$t,useLayoutEffect:kr,useMemo:Wf,useReducer:Hf,useRef:be,useState:function(){return Hf(tf)},useDebugValue:sa,useDeferredValue:function(h){var x=eo();return _b(x,js.memoizedState,h)},useTransition:function(){var h=Hf(tf)[0],x=eo().memoizedState;return[h,x]},useMutableSource:Ad,useSyncExternalStore:rf,useId:t_,unstable_isNewReconciler:!1},cB={readContext:es,useCallback:ti,useContext:es,useEffect:wt,useImperativeHandle:aa,useInsertionEffect:$t,useLayoutEffect:kr,useMemo:Wf,useReducer:lc,useRef:be,useState:function(){return lc(tf)},useDebugValue:sa,useDeferredValue:function(h){var x=eo();return js===null?x.memoizedState=h:_b(x,js.memoizedState,h)},useTransition:function(){var h=lc(tf)[0],x=eo().memoizedState;return[h,x]},useMutableSource:Ad,useSyncExternalStore:rf,useId:t_,unstable_isNewReconciler:!1};function Cd(h,x){if(h&&h.defaultProps){x=ee({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function Ab(h,x,k,F){x=h.memoizedState,k=k(F,x),k=k==null?x:ee({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var Dg={isMounted:function(h){return(h=h._reactInternals)?Ae(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var F=gl(),Y=Xf(h),ae=Ho(F,Y);ae.payload=x,k!=null&&(ae.callback=k),x=No(h,ae,Y),x!==null&&(Od(x,h,Y,F),ac(x,h,Y))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var F=gl(),Y=Xf(h),ae=Ho(F,Y);ae.tag=1,ae.payload=x,k!=null&&(ae.callback=k),x=No(h,ae,Y),x!==null&&(Od(x,h,Y,F),ac(x,h,Y))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=gl(),F=Xf(h),Y=Ho(k,F);Y.tag=2,x!=null&&(Y.callback=x),x=No(h,Y,F),x!==null&&(Od(x,h,F,k),ac(x,h,F))}};function s_(h,x,k,F,Y,ae,Te){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(F,ae,Te):x.prototype&&x.prototype.isPureReactComponent?!Ol(k,F)||!Ol(Y,ae):!0}function i_(h,x,k){var F=!1,Y=Dc,ae=x.contextType;return typeof ae=="object"&&ae!==null?ae=es(ae):(Y=Ji(x)?Fl:ws.current,F=x.contextTypes,ae=(F=F!=null)?jd(h,Y):Dc),x=new x(k,ae),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Dg,h.stateNode=x,x._reactInternals=h,F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=Y,h.__reactInternalMemoizedMaskedChildContext=ae),x}function o_(h,x,k,F){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,F),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,F),x.state!==h&&Dg.enqueueReplaceState(x,x.state,null)}function Cb(h,x,k,F){var Y=h.stateNode;Y.props=k,Y.state=h.memoizedState,Y.refs={},kd(h);var ae=x.contextType;typeof ae=="object"&&ae!==null?Y.context=es(ae):(ae=Ji(x)?Fl:ws.current,Y.context=jd(h,ae)),Y.state=h.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(Ab(h,x,ae,k),Y.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(x=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),x!==Y.state&&Dg.enqueueReplaceState(Y,Y.state,null),Rl(h,k,Y,F),Y.state=h.memoizedState),typeof Y.componentDidMount=="function"&&(h.flags|=4194308)}function Yh(h,x){try{var k="",F=x;do k+=B(F),F=F.return;while(F);var Y=k}catch(ae){Y=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:h,source:x,stack:Y,digest:null}}function Eb(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function Tb(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var dB=typeof WeakMap=="function"?WeakMap:Map;function l_(h,x,k){k=Ho(-1,k),k.tag=3,k.payload={element:null};var F=x.value;return k.callback=function(){qg||(qg=!0,Wb=F),Tb(h,x)},k}function c_(h,x,k){k=Ho(-1,k),k.tag=3;var F=h.type.getDerivedStateFromError;if(typeof F=="function"){var Y=x.value;k.payload=function(){return F(Y)},k.callback=function(){Tb(h,x)}}var ae=h.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(k.callback=function(){Tb(h,x),typeof F!="function"&&(Gf===null?Gf=new Set([this]):Gf.add(this));var Te=x.stack;this.componentDidCatch(x.value,{componentStack:Te!==null?Te:""})}),k}function d_(h,x,k){var F=h.pingCache;if(F===null){F=h.pingCache=new dB;var Y=new Set;F.set(x,Y)}else Y=F.get(x),Y===void 0&&(Y=new Set,F.set(x,Y));Y.has(k)||(Y.add(k),h=kB.bind(null,h,x,k),x.then(h,h))}function u_(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function f_(h,x,k,F,Y){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Ho(-1,1),x.tag=2,No(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=Y,h)}var uB=N.ReactCurrentOwner,$l=!1;function xl(h,x,k,F){x.child=h===null?Jn(x,null,k,F):Ns(x,h.child,k,F)}function h_(h,x,k,F,Y){k=k.render;var ae=x.ref;return Ka(x,Y),F=ef(h,x,k,F,ae,Y),k=ql(),h!==null&&!$l?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Y,af(h,x,Y)):(At&&k&&St(x),x.flags|=1,xl(h,x,F,Y),x.child)}function p_(h,x,k,F,Y){if(h===null){var ae=k.type;return typeof ae=="function"&&!Jb(ae)&&ae.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=ae,m_(h,x,ae,F,Y)):(h=Gg(k.type,null,F,x,x.mode,Y),h.ref=x.ref,h.return=x,x.child=h)}if(ae=h.child,(h.lanes&Y)===0){var Te=ae.memoizedProps;if(k=k.compare,k=k!==null?k:Ol,k(Te,F)&&h.ref===x.ref)return af(h,x,Y)}return x.flags|=1,h=Qf(ae,F),h.ref=x.ref,h.return=x,x.child=h}function m_(h,x,k,F,Y){if(h!==null){var ae=h.memoizedProps;if(Ol(ae,F)&&h.ref===x.ref)if($l=!1,x.pendingProps=F=ae,(h.lanes&Y)!==0)(h.flags&131072)!==0&&($l=!0);else return x.lanes=h.lanes,af(h,x,Y)}return Ob(h,x,k,F,Y)}function x_(h,x,k){var F=x.pendingProps,Y=F.children,ae=h!==null?h.memoizedState:null;if(F.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},na(Jh,dc),dc|=k;else{if((k&1073741824)===0)return h=ae!==null?ae.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,na(Jh,dc),dc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ae!==null?ae.baseLanes:k,na(Jh,dc),dc|=F}else ae!==null?(F=ae.baseLanes|k,x.memoizedState=null):F=k,na(Jh,dc),dc|=F;return xl(h,x,Y,k),x.child}function g_(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function Ob(h,x,k,F,Y){var ae=Ji(k)?Fl:ws.current;return ae=jd(x,ae),Ka(x,Y),k=ef(h,x,k,F,ae,Y),F=ql(),h!==null&&!$l?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Y,af(h,x,Y)):(At&&F&&St(x),x.flags|=1,xl(h,x,k,Y),x.child)}function v_(h,x,k,F,Y){if(Ji(k)){var ae=!0;Lc(x)}else ae=!1;if(Ka(x,Y),x.stateNode===null)Fg(h,x),i_(x,k,F),Cb(x,k,F,Y),F=!0;else if(h===null){var Te=x.stateNode,et=x.memoizedProps;Te.props=et;var lt=Te.context,kt=k.contextType;typeof kt=="object"&&kt!==null?kt=es(kt):(kt=Ji(k)?Fl:ws.current,kt=jd(x,kt));var Yt=k.getDerivedStateFromProps,Zt=typeof Yt=="function"||typeof Te.getSnapshotBeforeUpdate=="function";Zt||typeof Te.UNSAFE_componentWillReceiveProps!="function"&&typeof Te.componentWillReceiveProps!="function"||(et!==F||lt!==kt)&&o_(x,Te,F,kt),Ml=!1;var Kt=x.memoizedState;Te.state=Kt,Rl(x,F,Te,Y),lt=x.memoizedState,et!==F||Kt!==lt||pi.current||Ml?(typeof Yt=="function"&&(Ab(x,k,Yt,F),lt=x.memoizedState),(et=Ml||s_(x,k,et,F,Kt,lt,kt))?(Zt||typeof Te.UNSAFE_componentWillMount!="function"&&typeof Te.componentWillMount!="function"||(typeof Te.componentWillMount=="function"&&Te.componentWillMount(),typeof Te.UNSAFE_componentWillMount=="function"&&Te.UNSAFE_componentWillMount()),typeof Te.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Te.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=F,x.memoizedState=lt),Te.props=F,Te.state=lt,Te.context=kt,F=et):(typeof Te.componentDidMount=="function"&&(x.flags|=4194308),F=!1)}else{Te=x.stateNode,fu(h,x),et=x.memoizedProps,kt=x.type===x.elementType?et:Cd(x.type,et),Te.props=kt,Zt=x.pendingProps,Kt=Te.context,lt=k.contextType,typeof lt=="object"&&lt!==null?lt=es(lt):(lt=Ji(k)?Fl:ws.current,lt=jd(x,lt));var jr=k.getDerivedStateFromProps;(Yt=typeof jr=="function"||typeof Te.getSnapshotBeforeUpdate=="function")||typeof Te.UNSAFE_componentWillReceiveProps!="function"&&typeof Te.componentWillReceiveProps!="function"||(et!==Zt||Kt!==lt)&&o_(x,Te,F,lt),Ml=!1,Kt=x.memoizedState,Te.state=Kt,Rl(x,F,Te,Y);var Or=x.memoizedState;et!==Zt||Kt!==Or||pi.current||Ml?(typeof jr=="function"&&(Ab(x,k,jr,F),Or=x.memoizedState),(kt=Ml||s_(x,k,kt,F,Kt,Or,lt)||!1)?(Yt||typeof Te.UNSAFE_componentWillUpdate!="function"&&typeof Te.componentWillUpdate!="function"||(typeof Te.componentWillUpdate=="function"&&Te.componentWillUpdate(F,Or,lt),typeof Te.UNSAFE_componentWillUpdate=="function"&&Te.UNSAFE_componentWillUpdate(F,Or,lt)),typeof Te.componentDidUpdate=="function"&&(x.flags|=4),typeof Te.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Te.componentDidUpdate!="function"||et===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=4),typeof Te.getSnapshotBeforeUpdate!="function"||et===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=1024),x.memoizedProps=F,x.memoizedState=Or),Te.props=F,Te.state=Or,Te.context=lt,F=kt):(typeof Te.componentDidUpdate!="function"||et===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=4),typeof Te.getSnapshotBeforeUpdate!="function"||et===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=1024),F=!1)}return Pb(h,x,k,F,ae,Y)}function Pb(h,x,k,F,Y,ae){g_(h,x);var Te=(x.flags&128)!==0;if(!F&&!Te)return Y&&Kh(x,k,!1),af(h,x,ae);F=x.stateNode,uB.current=x;var et=Te&&typeof k.getDerivedStateFromError!="function"?null:F.render();return x.flags|=1,h!==null&&Te?(x.child=Ns(x,h.child,null,ae),x.child=Ns(x,null,et,ae)):xl(h,x,et,ae),x.memoizedState=F.state,Y&&Kh(x,k,!0),x.child}function y_(h){var x=h.stateNode;x.pendingContext?qf(h,x.pendingContext,x.pendingContext!==x.context):x.context&&qf(h,x.context,!1),mu(h,x.containerInfo)}function b_(h,x,k,F,Y){return ln(),Qn(Y),x.flags|=256,xl(h,x,k,F),x.child}var Ib={dehydrated:null,treeContext:null,retryLane:0};function Db(h){return{baseLanes:h,cachePool:null,transitions:null}}function w_(h,x,k){var F=x.pendingProps,Y=va.current,ae=!1,Te=(x.flags&128)!==0,et;if((et=Te)||(et=h!==null&&h.memoizedState===null?!1:(Y&2)!==0),et?(ae=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(Y|=1),na(va,Y&1),h===null)return fr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(Te=F.children,h=F.fallback,ae?(F=x.mode,ae=x.child,Te={mode:"hidden",children:Te},(F&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=Te):ae=Kg(Te,F,0,null),h=K0(h,F,k,null),ae.return=x,h.return=x,ae.sibling=h,x.child=ae,x.child.memoizedState=Db(k),x.memoizedState=Ib,h):Lb(x,Te));if(Y=h.memoizedState,Y!==null&&(et=Y.dehydrated,et!==null))return fB(h,x,Te,F,et,Y,k);if(ae){ae=F.fallback,Te=x.mode,Y=h.child,et=Y.sibling;var lt={mode:"hidden",children:F.children};return(Te&1)===0&&x.child!==Y?(F=x.child,F.childLanes=0,F.pendingProps=lt,x.deletions=null):(F=Qf(Y,lt),F.subtreeFlags=Y.subtreeFlags&14680064),et!==null?ae=Qf(et,ae):(ae=K0(ae,Te,k,null),ae.flags|=2),ae.return=x,F.return=x,F.sibling=ae,x.child=F,F=ae,ae=x.child,Te=h.child.memoizedState,Te=Te===null?Db(k):{baseLanes:Te.baseLanes|k,cachePool:null,transitions:Te.transitions},ae.memoizedState=Te,ae.childLanes=h.childLanes&~k,x.memoizedState=Ib,F}return ae=h.child,h=ae.sibling,F=Qf(ae,{mode:"visible",children:F.children}),(x.mode&1)===0&&(F.lanes=k),F.return=x,F.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=F,x.memoizedState=null,F}function Lb(h,x){return x=Kg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function Lg(h,x,k,F){return F!==null&&Qn(F),Ns(x,h.child,null,k),h=Lb(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function fB(h,x,k,F,Y,ae,Te){if(k)return x.flags&256?(x.flags&=-257,F=Eb(Error(r(422))),Lg(h,x,Te,F)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ae=F.fallback,Y=x.mode,F=Kg({mode:"visible",children:F.children},Y,0,null),ae=K0(ae,Y,Te,null),ae.flags|=2,F.return=x,ae.return=x,F.sibling=ae,x.child=F,(x.mode&1)!==0&&Ns(x,h.child,null,Te),x.child.memoizedState=Db(Te),x.memoizedState=Ib,ae);if((x.mode&1)===0)return Lg(h,x,Te,null);if(Y.data==="$!"){if(F=Y.nextSibling&&Y.nextSibling.dataset,F)var et=F.dgst;return F=et,ae=Error(r(419)),F=Eb(ae,F,void 0),Lg(h,x,Te,F)}if(et=(Te&h.childLanes)!==0,$l||et){if(F=ro,F!==null){switch(Te&-Te){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(F.suspendedLanes|Te))!==0?0:Y,Y!==0&&Y!==ae.retryLane&&(ae.retryLane=Y,Kn(h,Y),Od(F,h,Y,-1))}return Qb(),F=Eb(Error(r(421))),Lg(h,x,Te,F)}return Y.data==="$?"?(x.flags|=128,x.child=h.child,x=SB.bind(null,h),Y._reactRetry=x,null):(h=ae.treeContext,Ct=as(Y.nextSibling),it=x,At=!0,Mt=null,h!==null&&(Me[ze++]=gt,Me[ze++]=vt,Me[ze++]=at,gt=h.id,vt=h.overflow,at=x),x=Lb(x,F.children),x.flags|=4096,x)}function N_(h,x,k){h.lanes|=x;var F=h.alternate;F!==null&&(F.lanes|=x),zo(h.return,x,k)}function Fb(h,x,k,F,Y){var ae=h.memoizedState;ae===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:F,tail:k,tailMode:Y}:(ae.isBackwards=x,ae.rendering=null,ae.renderingStartTime=0,ae.last=F,ae.tail=k,ae.tailMode=Y)}function j_(h,x,k){var F=x.pendingProps,Y=F.revealOrder,ae=F.tail;if(xl(h,x,F.children,k),F=va.current,(F&2)!==0)F=F&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&N_(h,k,x);else if(h.tag===19)N_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}F&=1}if(na(va,F),(x.mode&1)===0)x.memoizedState=null;else switch(Y){case"forwards":for(k=x.child,Y=null;k!==null;)h=k.alternate,h!==null&&ei(h)===null&&(Y=k),k=k.sibling;k=Y,k===null?(Y=x.child,x.child=null):(Y=k.sibling,k.sibling=null),Fb(x,!1,Y,k,ae);break;case"backwards":for(k=null,Y=x.child,x.child=null;Y!==null;){if(h=Y.alternate,h!==null&&ei(h)===null){x.child=Y;break}h=Y.sibling,Y.sibling=k,k=Y,Y=h}Fb(x,!0,k,null,ae);break;case"together":Fb(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Fg(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function af(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),H0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=Qf(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=Qf(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function hB(h,x,k){switch(x.tag){case 3:y_(x),ln();break;case 5:Xh(x);break;case 1:Ji(x.type)&&Lc(x);break;case 4:mu(x,x.stateNode.containerInfo);break;case 10:var F=x.type._context,Y=x.memoizedProps.value;na(Cs,F._currentValue),F._currentValue=Y;break;case 13:if(F=x.memoizedState,F!==null)return F.dehydrated!==null?(na(va,va.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?w_(h,x,k):(na(va,va.current&1),h=af(h,x,k),h!==null?h.sibling:null);na(va,va.current&1);break;case 19:if(F=(k&x.childLanes)!==0,(h.flags&128)!==0){if(F)return j_(h,x,k);x.flags|=128}if(Y=x.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),na(va,va.current),F)break;return null;case 22:case 23:return x.lanes=0,x_(h,x,k)}return af(h,x,k)}var k_,Mb,S_,__;k_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Mb=function(){},S_=function(h,x,k,F){var Y=h.memoizedProps;if(Y!==F){h=x.stateNode,sc(ko.current);var ae=null;switch(k){case"input":Y=Oe(h,Y),F=Oe(h,F),ae=[];break;case"select":Y=ee({},Y,{value:void 0}),F=ee({},F,{value:void 0}),ae=[];break;case"textarea":Y=Ee(h,Y),F=Ee(h,F),ae=[];break;default:typeof Y.onClick!="function"&&typeof F.onClick=="function"&&(h.onclick=rc)}Ht(k,F);var Te;k=null;for(kt in Y)if(!F.hasOwnProperty(kt)&&Y.hasOwnProperty(kt)&&Y[kt]!=null)if(kt==="style"){var et=Y[kt];for(Te in et)et.hasOwnProperty(Te)&&(k||(k={}),k[Te]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(s.hasOwnProperty(kt)?ae||(ae=[]):(ae=ae||[]).push(kt,null));for(kt in F){var lt=F[kt];if(et=Y?.[kt],F.hasOwnProperty(kt)&&lt!==et&&(lt!=null||et!=null))if(kt==="style")if(et){for(Te in et)!et.hasOwnProperty(Te)||lt&&lt.hasOwnProperty(Te)||(k||(k={}),k[Te]="");for(Te in lt)lt.hasOwnProperty(Te)&&et[Te]!==lt[Te]&&(k||(k={}),k[Te]=lt[Te])}else k||(ae||(ae=[]),ae.push(kt,k)),k=lt;else kt==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,et=et?et.__html:void 0,lt!=null&&et!==lt&&(ae=ae||[]).push(kt,lt)):kt==="children"?typeof lt!="string"&&typeof lt!="number"||(ae=ae||[]).push(kt,""+lt):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(s.hasOwnProperty(kt)?(lt!=null&&kt==="onScroll"&&ha("scroll",h),ae||et===lt||(ae=[])):(ae=ae||[]).push(kt,lt))}k&&(ae=ae||[]).push("style",k);var kt=ae;(x.updateQueue=kt)&&(x.flags|=4)}},__=function(h,x,k,F){k!==F&&(x.flags|=4)};function ym(h,x){if(!At)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var F=null;k!==null;)k.alternate!==null&&(F=k),k=k.sibling;F===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:F.sibling=null}}function Vo(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,F=0;if(x)for(var Y=h.child;Y!==null;)k|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&14680064,F|=Y.flags&14680064,Y.return=h,Y=Y.sibling;else for(Y=h.child;Y!==null;)k|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=h,Y=Y.sibling;return h.subtreeFlags|=F,h.childLanes=k,x}function pB(h,x,k){var F=x.pendingProps;switch(ct(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(x),null;case 1:return Ji(x.type)&&Ju(),Vo(x),null;case 3:return F=x.stateNode,Bl(),Yn(pi),Yn(ws),U0(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(h===null||h.child===null)&&(Tn(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Mt!==null&&(Kb(Mt),Mt=null))),Mb(h,x),Vo(x),null;case 5:Zu(x);var Y=sc(Mc.current);if(k=x.type,h!==null&&x.stateNode!=null)S_(h,x,k,F,Y),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!F){if(x.stateNode===null)throw Error(r(166));return Vo(x),null}if(h=sc(ko.current),Tn(x)){F=x.stateNode,k=x.type;var ae=x.memoizedProps;switch(F[wo]=x,F[uu]=ae,h=(x.mode&1)!==0,k){case"dialog":ha("cancel",F),ha("close",F);break;case"iframe":case"object":case"embed":ha("load",F);break;case"video":case"audio":for(Y=0;Y<tc.length;Y++)ha(tc[Y],F);break;case"source":ha("error",F);break;case"img":case"image":case"link":ha("error",F),ha("load",F);break;case"details":ha("toggle",F);break;case"input":le(F,ae),ha("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ae.multiple},ha("invalid",F);break;case"textarea":Ye(F,ae),ha("invalid",F)}Ht(k,ae),Y=null;for(var Te in ae)if(ae.hasOwnProperty(Te)){var et=ae[Te];Te==="children"?typeof et=="string"?F.textContent!==et&&(ae.suppressHydrationWarning!==!0&&Xu(F.textContent,et,h),Y=["children",et]):typeof et=="number"&&F.textContent!==""+et&&(ae.suppressHydrationWarning!==!0&&Xu(F.textContent,et,h),Y=["children",""+et]):s.hasOwnProperty(Te)&&et!=null&&Te==="onScroll"&&ha("scroll",F)}switch(k){case"input":Re(F),we(F,ae,!0);break;case"textarea":Re(F),ve(F);break;case"select":case"option":break;default:typeof ae.onClick=="function"&&(F.onclick=rc)}F=Y,x.updateQueue=F,F!==null&&(x.flags|=4)}else{Te=Y.nodeType===9?Y:Y.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Fe(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=Te.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof F.is=="string"?h=Te.createElement(k,{is:F.is}):(h=Te.createElement(k),k==="select"&&(Te=h,F.multiple?Te.multiple=!0:F.size&&(Te.size=F.size))):h=Te.createElementNS(h,k),h[wo]=x,h[uu]=F,k_(h,x,!1,!1),x.stateNode=h;e:{switch(Te=Ve(k,F),k){case"dialog":ha("cancel",h),ha("close",h),Y=F;break;case"iframe":case"object":case"embed":ha("load",h),Y=F;break;case"video":case"audio":for(Y=0;Y<tc.length;Y++)ha(tc[Y],h);Y=F;break;case"source":ha("error",h),Y=F;break;case"img":case"image":case"link":ha("error",h),ha("load",h),Y=F;break;case"details":ha("toggle",h),Y=F;break;case"input":le(h,F),Y=Oe(h,F),ha("invalid",h);break;case"option":Y=F;break;case"select":h._wrapperState={wasMultiple:!!F.multiple},Y=ee({},F,{value:void 0}),ha("invalid",h);break;case"textarea":Ye(h,F),Y=Ee(h,F),ha("invalid",h);break;default:Y=F}Ht(k,Y),et=Y;for(ae in et)if(et.hasOwnProperty(ae)){var lt=et[ae];ae==="style"?dt(h,lt):ae==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&Be(h,lt)):ae==="children"?typeof lt=="string"?(k!=="textarea"||lt!=="")&&qe(h,lt):typeof lt=="number"&&qe(h,""+lt):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?lt!=null&&ae==="onScroll"&&ha("scroll",h):lt!=null&&j(h,ae,lt,Te))}switch(k){case"input":Re(h),we(h,F,!1);break;case"textarea":Re(h),ve(h);break;case"option":F.value!=null&&h.setAttribute("value",""+me(F.value));break;case"select":h.multiple=!!F.multiple,ae=F.value,ae!=null?ue(h,!!F.multiple,ae,!1):F.defaultValue!=null&&ue(h,!!F.multiple,F.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(h.onclick=rc)}switch(k){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Vo(x),null;case 6:if(h&&x.stateNode!=null)__(h,x,h.memoizedProps,F);else{if(typeof F!="string"&&x.stateNode===null)throw Error(r(166));if(k=sc(Mc.current),sc(ko.current),Tn(x)){if(F=x.stateNode,k=x.memoizedProps,F[wo]=x,(ae=F.nodeValue!==k)&&(h=it,h!==null))switch(h.tag){case 3:Xu(F.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Xu(F.nodeValue,k,(h.mode&1)!==0)}ae&&(x.flags|=4)}else F=(k.nodeType===9?k:k.ownerDocument).createTextNode(F),F[wo]=x,x.stateNode=F}return Vo(x),null;case 13:if(Yn(va),F=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(At&&Ct!==null&&(x.mode&1)!==0&&(x.flags&128)===0)An(),ln(),x.flags|=98560,ae=!1;else if(ae=Tn(x),F!==null&&F.dehydrated!==null){if(h===null){if(!ae)throw Error(r(318));if(ae=x.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(r(317));ae[wo]=x}else ln(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Vo(x),ae=!1}else Mt!==null&&(Kb(Mt),Mt=null),ae=!0;if(!ae)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(F=F!==null,F!==(h!==null&&h.memoizedState!==null)&&F&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(va.current&1)!==0?Di===0&&(Di=3):Qb())),x.updateQueue!==null&&(x.flags|=4),Vo(x),null);case 4:return Bl(),Mb(h,x),h===null&&bd(x.stateNode.containerInfo),Vo(x),null;case 10:return Ii(x.type._context),Vo(x),null;case 17:return Ji(x.type)&&Ju(),Vo(x),null;case 19:if(Yn(va),ae=x.memoizedState,ae===null)return Vo(x),null;if(F=(x.flags&128)!==0,Te=ae.rendering,Te===null)if(F)ym(ae,!1);else{if(Di!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(Te=ei(h),Te!==null){for(x.flags|=128,ym(ae,!1),F=Te.updateQueue,F!==null&&(x.updateQueue=F,x.flags|=4),x.subtreeFlags=0,F=k,k=x.child;k!==null;)ae=k,h=F,ae.flags&=14680066,Te=ae.alternate,Te===null?(ae.childLanes=0,ae.lanes=h,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=Te.childLanes,ae.lanes=Te.lanes,ae.child=Te.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=Te.memoizedProps,ae.memoizedState=Te.memoizedState,ae.updateQueue=Te.updateQueue,ae.type=Te.type,h=Te.dependencies,ae.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return na(va,va.current&1|2),x.child}h=h.sibling}ae.tail!==null&&Lt()>Zh&&(x.flags|=128,F=!0,ym(ae,!1),x.lanes=4194304)}else{if(!F)if(h=ei(Te),h!==null){if(x.flags|=128,F=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),ym(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!Te.alternate&&!At)return Vo(x),null}else 2*Lt()-ae.renderingStartTime>Zh&&k!==1073741824&&(x.flags|=128,F=!0,ym(ae,!1),x.lanes=4194304);ae.isBackwards?(Te.sibling=x.child,x.child=Te):(k=ae.last,k!==null?k.sibling=Te:x.child=Te,ae.last=Te)}return ae.tail!==null?(x=ae.tail,ae.rendering=x,ae.tail=x.sibling,ae.renderingStartTime=Lt(),x.sibling=null,k=va.current,na(va,F?k&1|2:k&1),x):(Vo(x),null);case 22:case 23:return Yb(),F=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==F&&(x.flags|=8192),F&&(x.mode&1)!==0?(dc&1073741824)!==0&&(Vo(x),x.subtreeFlags&6&&(x.flags|=8192)):Vo(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function mB(h,x){switch(ct(x),x.tag){case 1:return Ji(x.type)&&Ju(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return Bl(),Yn(pi),Yn(ws),U0(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return Zu(x),null;case 13:if(Yn(va),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));ln()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return Yn(va),null;case 4:return Bl(),null;case 10:return Ii(x.type._context),null;case 22:case 23:return Yb(),null;case 24:return null;default:return null}}var Mg=!1,Go=!1,xB=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function Qh(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(F){qs(h,x,F)}else k.current=null}function Rb(h,x,k){try{k()}catch(F){qs(h,x,F)}}var A_=!1;function gB(h,x){if(cu=Rn,h=vd(),Il(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var F=k.getSelection&&k.getSelection();if(F&&F.rangeCount!==0){k=F.anchorNode;var Y=F.anchorOffset,ae=F.focusNode;F=F.focusOffset;try{k.nodeType,ae.nodeType}catch{k=null;break e}var Te=0,et=-1,lt=-1,kt=0,Yt=0,Zt=h,Kt=null;t:for(;;){for(var jr;Zt!==k||Y!==0&&Zt.nodeType!==3||(et=Te+Y),Zt!==ae||F!==0&&Zt.nodeType!==3||(lt=Te+F),Zt.nodeType===3&&(Te+=Zt.nodeValue.length),(jr=Zt.firstChild)!==null;)Kt=Zt,Zt=jr;for(;;){if(Zt===h)break t;if(Kt===k&&++kt===Y&&(et=Te),Kt===ae&&++Yt===F&&(lt=Te),(jr=Zt.nextSibling)!==null)break;Zt=Kt,Kt=Zt.parentNode}Zt=jr}k=et===-1||lt===-1?null:{start:et,end:lt}}else k=null}k=k||{start:0,end:0}}else k=null;for(du={focusedElem:h,selectionRange:k},Rn=!1,Sr=x;Sr!==null;)if(x=Sr,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Sr=h;else for(;Sr!==null;){x=Sr;try{var Or=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Or!==null){var Rr=Or.memoizedProps,ri=Or.memoizedState,bt=x.stateNode,ft=bt.getSnapshotBeforeUpdate(x.elementType===x.type?Rr:Cd(x.type,Rr),ri);bt.__reactInternalSnapshotBeforeUpdate=ft}break;case 3:var Nt=x.stateNode.containerInfo;Nt.nodeType===1?Nt.textContent="":Nt.nodeType===9&&Nt.documentElement&&Nt.removeChild(Nt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ar){qs(x,x.return,ar)}if(h=x.sibling,h!==null){h.return=x.return,Sr=h;break}Sr=x.return}return Or=A_,A_=!1,Or}function bm(h,x,k){var F=x.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Y=F=F.next;do{if((Y.tag&h)===h){var ae=Y.destroy;Y.destroy=void 0,ae!==void 0&&Rb(x,k,ae)}Y=Y.next}while(Y!==F)}}function Rg(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var F=k.create;k.destroy=F()}k=k.next}while(k!==x)}}function Bb(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function C_(h){var x=h.alternate;x!==null&&(h.alternate=null,C_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[wo],delete x[uu],delete x[Qi],delete x[vm],delete x[Bf])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function E_(h){return h.tag===5||h.tag===3||h.tag===4}function T_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||E_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ub(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=rc));else if(F!==4&&(h=h.child,h!==null))for(Ub(h,x,k),h=h.sibling;h!==null;)Ub(h,x,k),h=h.sibling}function qb(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(F!==4&&(h=h.child,h!==null))for(qb(h,x,k),h=h.sibling;h!==null;)qb(h,x,k),h=h.sibling}var So=null,Ed=!1;function Vf(h,x,k){for(k=k.child;k!==null;)O_(h,x,k),k=k.sibling}function O_(h,x,k){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(hs,k)}catch{}switch(k.tag){case 5:Go||Qh(k,x);case 6:var F=So,Y=Ed;So=null,Vf(h,x,k),So=F,Ed=Y,So!==null&&(Ed?(h=So,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):So.removeChild(k.stateNode));break;case 18:So!==null&&(Ed?(h=So,k=k.stateNode,h.nodeType===8?Yu(h.parentNode,k):h.nodeType===1&&Yu(h,k),Er(h)):Yu(So,k.stateNode));break;case 4:F=So,Y=Ed,So=k.stateNode.containerInfo,Ed=!0,Vf(h,x,k),So=F,Ed=Y;break;case 0:case 11:case 14:case 15:if(!Go&&(F=k.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Y=F=F.next;do{var ae=Y,Te=ae.destroy;ae=ae.tag,Te!==void 0&&((ae&2)!==0||(ae&4)!==0)&&Rb(k,x,Te),Y=Y.next}while(Y!==F)}Vf(h,x,k);break;case 1:if(!Go&&(Qh(k,x),F=k.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=k.memoizedProps,F.state=k.memoizedState,F.componentWillUnmount()}catch(et){qs(k,x,et)}Vf(h,x,k);break;case 21:Vf(h,x,k);break;case 22:k.mode&1?(Go=(F=Go)||k.memoizedState!==null,Vf(h,x,k),Go=F):Vf(h,x,k);break;default:Vf(h,x,k)}}function P_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new xB),x.forEach(function(F){var Y=_B.bind(null,h,F);k.has(F)||(k.add(F),F.then(Y,Y))})}}function Td(h,x){var k=x.deletions;if(k!==null)for(var F=0;F<k.length;F++){var Y=k[F];try{var ae=h,Te=x,et=Te;e:for(;et!==null;){switch(et.tag){case 5:So=et.stateNode,Ed=!1;break e;case 3:So=et.stateNode.containerInfo,Ed=!0;break e;case 4:So=et.stateNode.containerInfo,Ed=!0;break e}et=et.return}if(So===null)throw Error(r(160));O_(ae,Te,Y),So=null,Ed=!1;var lt=Y.alternate;lt!==null&&(lt.return=null),Y.return=null}catch(kt){qs(Y,x,kt)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)I_(x,h),x=x.sibling}function I_(h,x){var k=h.alternate,F=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Td(x,h),gu(h),F&4){try{bm(3,h,h.return),Rg(3,h)}catch(Rr){qs(h,h.return,Rr)}try{bm(5,h,h.return)}catch(Rr){qs(h,h.return,Rr)}}break;case 1:Td(x,h),gu(h),F&512&&k!==null&&Qh(k,k.return);break;case 5:if(Td(x,h),gu(h),F&512&&k!==null&&Qh(k,k.return),h.flags&32){var Y=h.stateNode;try{qe(Y,"")}catch(Rr){qs(h,h.return,Rr)}}if(F&4&&(Y=h.stateNode,Y!=null)){var ae=h.memoizedProps,Te=k!==null?k.memoizedProps:ae,et=h.type,lt=h.updateQueue;if(h.updateQueue=null,lt!==null)try{et==="input"&&ae.type==="radio"&&ae.name!=null&&te(Y,ae),Ve(et,Te);var kt=Ve(et,ae);for(Te=0;Te<lt.length;Te+=2){var Yt=lt[Te],Zt=lt[Te+1];Yt==="style"?dt(Y,Zt):Yt==="dangerouslySetInnerHTML"?Be(Y,Zt):Yt==="children"?qe(Y,Zt):j(Y,Yt,Zt,kt)}switch(et){case"input":Se(Y,ae);break;case"textarea":xe(Y,ae);break;case"select":var Kt=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!ae.multiple;var jr=ae.value;jr!=null?ue(Y,!!ae.multiple,jr,!1):Kt!==!!ae.multiple&&(ae.defaultValue!=null?ue(Y,!!ae.multiple,ae.defaultValue,!0):ue(Y,!!ae.multiple,ae.multiple?[]:"",!1))}Y[uu]=ae}catch(Rr){qs(h,h.return,Rr)}}break;case 6:if(Td(x,h),gu(h),F&4){if(h.stateNode===null)throw Error(r(162));Y=h.stateNode,ae=h.memoizedProps;try{Y.nodeValue=ae}catch(Rr){qs(h,h.return,Rr)}}break;case 3:if(Td(x,h),gu(h),F&4&&k!==null&&k.memoizedState.isDehydrated)try{Er(x.containerInfo)}catch(Rr){qs(h,h.return,Rr)}break;case 4:Td(x,h),gu(h);break;case 13:Td(x,h),gu(h),Y=h.child,Y.flags&8192&&(ae=Y.memoizedState!==null,Y.stateNode.isHidden=ae,!ae||Y.alternate!==null&&Y.alternate.memoizedState!==null||(Hb=Lt())),F&4&&P_(h);break;case 22:if(Yt=k!==null&&k.memoizedState!==null,h.mode&1?(Go=(kt=Go)||Yt,Td(x,h),Go=kt):Td(x,h),gu(h),F&8192){if(kt=h.memoizedState!==null,(h.stateNode.isHidden=kt)&&!Yt&&(h.mode&1)!==0)for(Sr=h,Yt=h.child;Yt!==null;){for(Zt=Sr=Yt;Sr!==null;){switch(Kt=Sr,jr=Kt.child,Kt.tag){case 0:case 11:case 14:case 15:bm(4,Kt,Kt.return);break;case 1:Qh(Kt,Kt.return);var Or=Kt.stateNode;if(typeof Or.componentWillUnmount=="function"){F=Kt,k=Kt.return;try{x=F,Or.props=x.memoizedProps,Or.state=x.memoizedState,Or.componentWillUnmount()}catch(Rr){qs(F,k,Rr)}}break;case 5:Qh(Kt,Kt.return);break;case 22:if(Kt.memoizedState!==null){F_(Zt);continue}}jr!==null?(jr.return=Kt,Sr=jr):F_(Zt)}Yt=Yt.sibling}e:for(Yt=null,Zt=h;;){if(Zt.tag===5){if(Yt===null){Yt=Zt;try{Y=Zt.stateNode,kt?(ae=Y.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none"):(et=Zt.stateNode,lt=Zt.memoizedProps.style,Te=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,et.style.display=Dt("display",Te))}catch(Rr){qs(h,h.return,Rr)}}}else if(Zt.tag===6){if(Yt===null)try{Zt.stateNode.nodeValue=kt?"":Zt.memoizedProps}catch(Rr){qs(h,h.return,Rr)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===h)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===h)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===h)break e;Yt===Zt&&(Yt=null),Zt=Zt.return}Yt===Zt&&(Yt=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}break;case 19:Td(x,h),gu(h),F&4&&P_(h);break;case 21:break;default:Td(x,h),gu(h)}}function gu(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(E_(k)){var F=k;break e}k=k.return}throw Error(r(160))}switch(F.tag){case 5:var Y=F.stateNode;F.flags&32&&(qe(Y,""),F.flags&=-33);var ae=T_(h);qb(h,ae,Y);break;case 3:case 4:var Te=F.stateNode.containerInfo,et=T_(h);Ub(h,et,Te);break;default:throw Error(r(161))}}catch(lt){qs(h,h.return,lt)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function vB(h,x,k){Sr=h,D_(h)}function D_(h,x,k){for(var F=(h.mode&1)!==0;Sr!==null;){var Y=Sr,ae=Y.child;if(Y.tag===22&&F){var Te=Y.memoizedState!==null||Mg;if(!Te){var et=Y.alternate,lt=et!==null&&et.memoizedState!==null||Go;et=Mg;var kt=Go;if(Mg=Te,(Go=lt)&&!kt)for(Sr=Y;Sr!==null;)Te=Sr,lt=Te.child,Te.tag===22&&Te.memoizedState!==null?M_(Y):lt!==null?(lt.return=Te,Sr=lt):M_(Y);for(;ae!==null;)Sr=ae,D_(ae),ae=ae.sibling;Sr=Y,Mg=et,Go=kt}L_(h)}else(Y.subtreeFlags&8772)!==0&&ae!==null?(ae.return=Y,Sr=ae):L_(h)}}function L_(h){for(;Sr!==null;){var x=Sr;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Go||Rg(5,x);break;case 1:var F=x.stateNode;if(x.flags&4&&!Go)if(k===null)F.componentDidMount();else{var Y=x.elementType===x.type?k.memoizedProps:Cd(x.type,k.memoizedProps);F.componentDidUpdate(Y,k.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ae=x.updateQueue;ae!==null&&Sd(x,ae,F);break;case 3:var Te=x.updateQueue;if(Te!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}Sd(x,Te,k)}break;case 5:var et=x.stateNode;if(k===null&&x.flags&4){k=et;var lt=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&k.focus();break;case"img":lt.src&&(k.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var kt=x.alternate;if(kt!==null){var Yt=kt.memoizedState;if(Yt!==null){var Zt=Yt.dehydrated;Zt!==null&&Er(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Go||x.flags&512&&Bb(x)}catch(Kt){qs(x,x.return,Kt)}}if(x===h){Sr=null;break}if(k=x.sibling,k!==null){k.return=x.return,Sr=k;break}Sr=x.return}}function F_(h){for(;Sr!==null;){var x=Sr;if(x===h){Sr=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Sr=k;break}Sr=x.return}}function M_(h){for(;Sr!==null;){var x=Sr;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Rg(4,x)}catch(lt){qs(x,k,lt)}break;case 1:var F=x.stateNode;if(typeof F.componentDidMount=="function"){var Y=x.return;try{F.componentDidMount()}catch(lt){qs(x,Y,lt)}}var ae=x.return;try{Bb(x)}catch(lt){qs(x,ae,lt)}break;case 5:var Te=x.return;try{Bb(x)}catch(lt){qs(x,Te,lt)}}}catch(lt){qs(x,x.return,lt)}if(x===h){Sr=null;break}var et=x.sibling;if(et!==null){et.return=x.return,Sr=et;break}Sr=x.return}}var yB=Math.ceil,Bg=N.ReactCurrentDispatcher,$b=N.ReactCurrentOwner,Bc=N.ReactCurrentBatchConfig,ia=0,ro=null,xi=null,_o=0,dc=0,Jh=ml(0),Di=0,wm=null,H0=0,Ug=0,zb=0,Nm=null,zl=null,Hb=0,Zh=1/0,sf=null,qg=!1,Wb=null,Gf=null,$g=!1,Kf=null,zg=0,jm=0,Vb=null,Hg=-1,Wg=0;function gl(){return(ia&6)!==0?Lt():Hg!==-1?Hg:Hg=Lt()}function Xf(h){return(h.mode&1)===0?1:(ia&2)!==0&&_o!==0?_o&-_o:In.transition!==null?(Wg===0&&(Wg=ta()),Wg):(h=wr,h!==0||(h=window.event,h=h===void 0?16:ud(h.type)),h)}function Od(h,x,k,F){if(50<jm)throw jm=0,Vb=null,Error(r(185));Jt(h,k,F),((ia&2)===0||h!==ro)&&(h===ro&&((ia&2)===0&&(Ug|=k),Di===4&&Yf(h,_o)),Hl(h,F),k===1&&ia===0&&(x.mode&1)===0&&(Zh=Lt()+500,La&&ce()))}function Hl(h,x){var k=h.callbackNode;pr(h,x);var F=sr(h,h===ro?_o:0);if(F===0)k!==null&&st(k),h.callbackNode=null,h.callbackPriority=0;else if(x=F&-F,h.callbackPriority!==x){if(k!=null&&st(k),x===1)h.tag===0?Z(B_.bind(null,h)):M(B_.bind(null,h)),Nd(function(){(ia&6)===0&&ce()}),k=null;else{switch(zt(F)){case 1:k=Mr;break;case 4:k=Vr;break;case 16:k=Mn;break;case 536870912:k=$n;break;default:k=Mn}k=G_(k,R_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function R_(h,x){if(Hg=-1,Wg=0,(ia&6)!==0)throw Error(r(327));var k=h.callbackNode;if(ep()&&h.callbackNode!==k)return null;var F=sr(h,h===ro?_o:0);if(F===0)return null;if((F&30)!==0||(F&h.expiredLanes)!==0||x)x=Vg(h,F);else{x=F;var Y=ia;ia|=2;var ae=q_();(ro!==h||_o!==x)&&(sf=null,Zh=Lt()+500,V0(h,x));do try{NB();break}catch(et){U_(h,et)}while(!0);Us(),Bg.current=ae,ia=Y,xi!==null?x=0:(ro=null,_o=0,x=Di)}if(x!==0){if(x===2&&(Y=Dr(h),Y!==0&&(F=Y,x=Gb(h,Y))),x===1)throw k=wm,V0(h,0),Yf(h,F),Hl(h,Lt()),k;if(x===6)Yf(h,F);else{if(Y=h.current.alternate,(F&30)===0&&!bB(Y)&&(x=Vg(h,F),x===2&&(ae=Dr(h),ae!==0&&(F=ae,x=Gb(h,ae))),x===1))throw k=wm,V0(h,0),Yf(h,F),Hl(h,Lt()),k;switch(h.finishedWork=Y,h.finishedLanes=F,x){case 0:case 1:throw Error(r(345));case 2:G0(h,zl,sf);break;case 3:if(Yf(h,F),(F&130023424)===F&&(x=Hb+500-Lt(),10<x)){if(sr(h,0)!==0)break;if(Y=h.suspendedLanes,(Y&F)!==F){gl(),h.pingedLanes|=h.suspendedLanes&Y;break}h.timeoutHandle=R0(G0.bind(null,h,zl,sf),x);break}G0(h,zl,sf);break;case 4:if(Yf(h,F),(F&4194240)===F)break;for(x=h.eventTimes,Y=-1;0<F;){var Te=31-Hn(F);ae=1<<Te,Te=x[Te],Te>Y&&(Y=Te),F&=~ae}if(F=Y,F=Lt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*yB(F/1960))-F,10<F){h.timeoutHandle=R0(G0.bind(null,h,zl,sf),F);break}G0(h,zl,sf);break;case 5:G0(h,zl,sf);break;default:throw Error(r(329))}}}return Hl(h,Lt()),h.callbackNode===k?R_.bind(null,h):null}function Gb(h,x){var k=Nm;return h.current.memoizedState.isDehydrated&&(V0(h,x).flags|=256),h=Vg(h,x),h!==2&&(x=zl,zl=k,x!==null&&Kb(x)),h}function Kb(h){zl===null?zl=h:zl.push.apply(zl,h)}function bB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var F=0;F<k.length;F++){var Y=k[F],ae=Y.getSnapshot;Y=Y.value;try{if(!Gn(ae(),Y))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Yf(h,x){for(x&=~zb,x&=~Ug,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-Hn(x),F=1<<k;h[k]=-1,x&=~F}}function B_(h){if((ia&6)!==0)throw Error(r(327));ep();var x=sr(h,0);if((x&1)===0)return Hl(h,Lt()),null;var k=Vg(h,x);if(h.tag!==0&&k===2){var F=Dr(h);F!==0&&(x=F,k=Gb(h,F))}if(k===1)throw k=wm,V0(h,0),Yf(h,x),Hl(h,Lt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,G0(h,zl,sf),Hl(h,Lt()),null}function Xb(h,x){var k=ia;ia|=1;try{return h(x)}finally{ia=k,ia===0&&(Zh=Lt()+500,La&&ce())}}function W0(h){Kf!==null&&Kf.tag===0&&(ia&6)===0&&ep();var x=ia;ia|=1;var k=Bc.transition,F=wr;try{if(Bc.transition=null,wr=1,h)return h()}finally{wr=F,Bc.transition=k,ia=x,(ia&6)===0&&ce()}}function Yb(){dc=Jh.current,Yn(Jh)}function V0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,Oc(k)),xi!==null)for(k=xi.return;k!==null;){var F=k;switch(ct(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Ju();break;case 3:Bl(),Yn(pi),Yn(ws),U0();break;case 5:Zu(F);break;case 4:Bl();break;case 13:Yn(va);break;case 19:Yn(va);break;case 10:Ii(F.type._context);break;case 22:case 23:Yb()}k=k.return}if(ro=h,xi=h=Qf(h.current,null),_o=dc=x,Di=0,wm=null,zb=Ug=H0=0,zl=Nm=null,Es!==null){for(x=0;x<Es.length;x++)if(k=Es[x],F=k.interleaved,F!==null){k.interleaved=null;var Y=F.next,ae=k.pending;if(ae!==null){var Te=ae.next;ae.next=Y,F.next=Te}k.pending=F}Es=null}return h}function U_(h,x){do{var k=xi;try{if(Us(),_d.current=Ig,xu){for(var F=Ma.memoizedState;F!==null;){var Y=F.queue;Y!==null&&(Y.pending=null),F=F.next}xu=!1}if(Ul=0,is=js=Ma=null,oc=!1,Rc=0,$b.current=null,k===null||k.return===null){Di=1,wm=x,xi=null;break}e:{var ae=h,Te=k.return,et=k,lt=x;if(x=_o,et.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var kt=lt,Yt=et,Zt=Yt.tag;if((Yt.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var Kt=Yt.alternate;Kt?(Yt.updateQueue=Kt.updateQueue,Yt.memoizedState=Kt.memoizedState,Yt.lanes=Kt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var jr=u_(Te);if(jr!==null){jr.flags&=-257,f_(jr,Te,et,ae,x),jr.mode&1&&d_(ae,kt,x),x=jr,lt=kt;var Or=x.updateQueue;if(Or===null){var Rr=new Set;Rr.add(lt),x.updateQueue=Rr}else Or.add(lt);break e}else{if((x&1)===0){d_(ae,kt,x),Qb();break e}lt=Error(r(426))}}else if(At&&et.mode&1){var ri=u_(Te);if(ri!==null){(ri.flags&65536)===0&&(ri.flags|=256),f_(ri,Te,et,ae,x),Qn(Yh(lt,et));break e}}ae=lt=Yh(lt,et),Di!==4&&(Di=2),Nm===null?Nm=[ae]:Nm.push(ae),ae=Te;do{switch(ae.tag){case 3:ae.flags|=65536,x&=-x,ae.lanes|=x;var bt=l_(ae,lt,x);jo(ae,bt);break e;case 1:et=lt;var ft=ae.type,Nt=ae.stateNode;if((ae.flags&128)===0&&(typeof ft.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(Gf===null||!Gf.has(Nt)))){ae.flags|=65536,x&=-x,ae.lanes|=x;var ar=c_(ae,et,x);jo(ae,ar);break e}}ae=ae.return}while(ae!==null)}z_(k)}catch(Ur){x=Ur,xi===k&&k!==null&&(xi=k=k.return);continue}break}while(!0)}function q_(){var h=Bg.current;return Bg.current=Ig,h===null?Ig:h}function Qb(){(Di===0||Di===3||Di===2)&&(Di=4),ro===null||(H0&268435455)===0&&(Ug&268435455)===0||Yf(ro,_o)}function Vg(h,x){var k=ia;ia|=2;var F=q_();(ro!==h||_o!==x)&&(sf=null,V0(h,x));do try{wB();break}catch(Y){U_(h,Y)}while(!0);if(Us(),ia=k,Bg.current=F,xi!==null)throw Error(r(261));return ro=null,_o=0,Di}function wB(){for(;xi!==null;)$_(xi)}function NB(){for(;xi!==null&&!mt();)$_(xi)}function $_(h){var x=V_(h.alternate,h,dc);h.memoizedProps=h.pendingProps,x===null?z_(h):xi=x,$b.current=null}function z_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=pB(k,x,dc),k!==null){xi=k;return}}else{if(k=mB(k,x),k!==null){k.flags&=32767,xi=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Di=6,xi=null;return}}if(x=x.sibling,x!==null){xi=x;return}xi=x=h}while(x!==null);Di===0&&(Di=5)}function G0(h,x,k){var F=wr,Y=Bc.transition;try{Bc.transition=null,wr=1,jB(h,x,k,F)}finally{Bc.transition=Y,wr=F}return null}function jB(h,x,k,F){do ep();while(Kf!==null);if((ia&6)!==0)throw Error(r(327));k=h.finishedWork;var Y=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var ae=k.lanes|k.childLanes;if(cr(h,ae),h===ro&&(xi=ro=null,_o=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||$g||($g=!0,G_(Mn,function(){return ep(),null})),ae=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||ae){ae=Bc.transition,Bc.transition=null;var Te=wr;wr=1;var et=ia;ia|=4,$b.current=null,gB(h,k),I_(k,h),Mo(du),Rn=!!cu,du=cu=null,h.current=k,vB(k),Ot(),ia=et,wr=Te,Bc.transition=ae}else h.current=k;if($g&&($g=!1,Kf=h,zg=Y),ae=h.pendingLanes,ae===0&&(Gf=null),As(k.stateNode),Hl(h,Lt()),x!==null)for(F=h.onRecoverableError,k=0;k<x.length;k++)Y=x[k],F(Y.value,{componentStack:Y.stack,digest:Y.digest});if(qg)throw qg=!1,h=Wb,Wb=null,h;return(zg&1)!==0&&h.tag!==0&&ep(),ae=h.pendingLanes,(ae&1)!==0?h===Vb?jm++:(jm=0,Vb=h):jm=0,ce(),null}function ep(){if(Kf!==null){var h=zt(zg),x=Bc.transition,k=wr;try{if(Bc.transition=null,wr=16>h?16:h,Kf===null)var F=!1;else{if(h=Kf,Kf=null,zg=0,(ia&6)!==0)throw Error(r(331));var Y=ia;for(ia|=4,Sr=h.current;Sr!==null;){var ae=Sr,Te=ae.child;if((Sr.flags&16)!==0){var et=ae.deletions;if(et!==null){for(var lt=0;lt<et.length;lt++){var kt=et[lt];for(Sr=kt;Sr!==null;){var Yt=Sr;switch(Yt.tag){case 0:case 11:case 15:bm(8,Yt,ae)}var Zt=Yt.child;if(Zt!==null)Zt.return=Yt,Sr=Zt;else for(;Sr!==null;){Yt=Sr;var Kt=Yt.sibling,jr=Yt.return;if(C_(Yt),Yt===kt){Sr=null;break}if(Kt!==null){Kt.return=jr,Sr=Kt;break}Sr=jr}}}var Or=ae.alternate;if(Or!==null){var Rr=Or.child;if(Rr!==null){Or.child=null;do{var ri=Rr.sibling;Rr.sibling=null,Rr=ri}while(Rr!==null)}}Sr=ae}}if((ae.subtreeFlags&2064)!==0&&Te!==null)Te.return=ae,Sr=Te;else e:for(;Sr!==null;){if(ae=Sr,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:bm(9,ae,ae.return)}var bt=ae.sibling;if(bt!==null){bt.return=ae.return,Sr=bt;break e}Sr=ae.return}}var ft=h.current;for(Sr=ft;Sr!==null;){Te=Sr;var Nt=Te.child;if((Te.subtreeFlags&2064)!==0&&Nt!==null)Nt.return=Te,Sr=Nt;else e:for(Te=ft;Sr!==null;){if(et=Sr,(et.flags&2048)!==0)try{switch(et.tag){case 0:case 11:case 15:Rg(9,et)}}catch(Ur){qs(et,et.return,Ur)}if(et===Te){Sr=null;break e}var ar=et.sibling;if(ar!==null){ar.return=et.return,Sr=ar;break e}Sr=et.return}}if(ia=Y,ce(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(hs,h)}catch{}F=!0}return F}finally{wr=k,Bc.transition=x}}return!1}function H_(h,x,k){x=Yh(k,x),x=l_(h,x,1),h=No(h,x,1),x=gl(),h!==null&&(Jt(h,1,x),Hl(h,x))}function qs(h,x,k){if(h.tag===3)H_(h,h,k);else for(;x!==null;){if(x.tag===3){H_(x,h,k);break}else if(x.tag===1){var F=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Gf===null||!Gf.has(F))){h=Yh(k,h),h=c_(x,h,1),x=No(x,h,1),h=gl(),x!==null&&(Jt(x,1,h),Hl(x,h));break}}x=x.return}}function kB(h,x,k){var F=h.pingCache;F!==null&&F.delete(x),x=gl(),h.pingedLanes|=h.suspendedLanes&k,ro===h&&(_o&k)===k&&(Di===4||Di===3&&(_o&130023424)===_o&&500>Lt()-Hb?V0(h,0):zb|=k),Hl(h,x)}function W_(h,x){x===0&&((h.mode&1)===0?x=1:(x=Et,Et<<=1,(Et&130023424)===0&&(Et=4194304)));var k=gl();h=Kn(h,x),h!==null&&(Jt(h,x,k),Hl(h,k))}function SB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),W_(h,k)}function _B(h,x){var k=0;switch(h.tag){case 13:var F=h.stateNode,Y=h.memoizedState;Y!==null&&(k=Y.retryLane);break;case 19:F=h.stateNode;break;default:throw Error(r(314))}F!==null&&F.delete(x),W_(h,k)}var V_;V_=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||pi.current)$l=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return $l=!1,hB(h,x,k);$l=(h.flags&131072)!==0}else $l=!1,At&&(x.flags&1048576)!==0&&qt(x,De,x.index);switch(x.lanes=0,x.tag){case 2:var F=x.type;Fg(h,x),h=x.pendingProps;var Y=jd(x,ws.current);Ka(x,k),Y=ef(null,x,F,h,Y,k);var ae=ql();return x.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ji(F)?(ae=!0,Lc(x)):ae=!1,x.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,kd(x),Y.updater=Dg,x.stateNode=Y,Y._reactInternals=x,Cb(x,F,h,k),x=Pb(null,x,F,!0,ae,k)):(x.tag=0,At&&ae&&St(x),xl(null,x,Y,k),x=x.child),x;case 16:F=x.elementType;e:{switch(Fg(h,x),h=x.pendingProps,Y=F._init,F=Y(F._payload),x.type=F,Y=x.tag=CB(F),h=Cd(F,h),Y){case 0:x=Ob(null,x,F,h,k);break e;case 1:x=v_(null,x,F,h,k);break e;case 11:x=h_(null,x,F,h,k);break e;case 14:x=p_(null,x,F,Cd(F.type,h),k);break e}throw Error(r(306,F,""))}return x;case 0:return F=x.type,Y=x.pendingProps,Y=x.elementType===F?Y:Cd(F,Y),Ob(h,x,F,Y,k);case 1:return F=x.type,Y=x.pendingProps,Y=x.elementType===F?Y:Cd(F,Y),v_(h,x,F,Y,k);case 3:e:{if(y_(x),h===null)throw Error(r(387));F=x.pendingProps,ae=x.memoizedState,Y=ae.element,fu(h,x),Rl(x,F,null,k);var Te=x.memoizedState;if(F=Te.element,ae.isDehydrated)if(ae={element:F,isDehydrated:!1,cache:Te.cache,pendingSuspenseBoundaries:Te.pendingSuspenseBoundaries,transitions:Te.transitions},x.updateQueue.baseState=ae,x.memoizedState=ae,x.flags&256){Y=Yh(Error(r(423)),x),x=b_(h,x,F,k,Y);break e}else if(F!==Y){Y=Yh(Error(r(424)),x),x=b_(h,x,F,k,Y);break e}else for(Ct=as(x.stateNode.containerInfo.firstChild),it=x,At=!0,Mt=null,k=Jn(x,null,F,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(ln(),F===Y){x=af(h,x,k);break e}xl(h,x,F,k)}x=x.child}return x;case 5:return Xh(x),h===null&&fr(x),F=x.type,Y=x.pendingProps,ae=h!==null?h.memoizedProps:null,Te=Y.children,Rf(F,Y)?Te=null:ae!==null&&Rf(F,ae)&&(x.flags|=32),g_(h,x),xl(h,x,Te,k),x.child;case 6:return h===null&&fr(x),null;case 13:return w_(h,x,k);case 4:return mu(x,x.stateNode.containerInfo),F=x.pendingProps,h===null?x.child=Ns(x,null,F,k):xl(h,x,F,k),x.child;case 11:return F=x.type,Y=x.pendingProps,Y=x.elementType===F?Y:Cd(F,Y),h_(h,x,F,Y,k);case 7:return xl(h,x,x.pendingProps,k),x.child;case 8:return xl(h,x,x.pendingProps.children,k),x.child;case 12:return xl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(F=x.type._context,Y=x.pendingProps,ae=x.memoizedProps,Te=Y.value,na(Cs,F._currentValue),F._currentValue=Te,ae!==null)if(Gn(ae.value,Te)){if(ae.children===Y.children&&!pi.current){x=af(h,x,k);break e}}else for(ae=x.child,ae!==null&&(ae.return=x);ae!==null;){var et=ae.dependencies;if(et!==null){Te=ae.child;for(var lt=et.firstContext;lt!==null;){if(lt.context===F){if(ae.tag===1){lt=Ho(-1,k&-k),lt.tag=2;var kt=ae.updateQueue;if(kt!==null){kt=kt.shared;var Yt=kt.pending;Yt===null?lt.next=lt:(lt.next=Yt.next,Yt.next=lt),kt.pending=lt}}ae.lanes|=k,lt=ae.alternate,lt!==null&&(lt.lanes|=k),zo(ae.return,k,x),et.lanes|=k;break}lt=lt.next}}else if(ae.tag===10)Te=ae.type===x.type?null:ae.child;else if(ae.tag===18){if(Te=ae.return,Te===null)throw Error(r(341));Te.lanes|=k,et=Te.alternate,et!==null&&(et.lanes|=k),zo(Te,k,x),Te=ae.sibling}else Te=ae.child;if(Te!==null)Te.return=ae;else for(Te=ae;Te!==null;){if(Te===x){Te=null;break}if(ae=Te.sibling,ae!==null){ae.return=Te.return,Te=ae;break}Te=Te.return}ae=Te}xl(h,x,Y.children,k),x=x.child}return x;case 9:return Y=x.type,F=x.pendingProps.children,Ka(x,k),Y=es(Y),F=F(Y),x.flags|=1,xl(h,x,F,k),x.child;case 14:return F=x.type,Y=Cd(F,x.pendingProps),Y=Cd(F.type,Y),p_(h,x,F,Y,k);case 15:return m_(h,x,x.type,x.pendingProps,k);case 17:return F=x.type,Y=x.pendingProps,Y=x.elementType===F?Y:Cd(F,Y),Fg(h,x),x.tag=1,Ji(F)?(h=!0,Lc(x)):h=!1,Ka(x,k),i_(x,F,Y),Cb(x,F,Y,k),Pb(null,x,F,!0,h,k);case 19:return j_(h,x,k);case 22:return x_(h,x,k)}throw Error(r(156,x.tag))};function G_(h,x){return Le(h,x)}function AB(h,x,k,F){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uc(h,x,k,F){return new AB(h,x,k,F)}function Jb(h){return h=h.prototype,!(!h||!h.isReactComponent)}function CB(h){if(typeof h=="function")return Jb(h)?1:0;if(h!=null){if(h=h.$$typeof,h===O)return 11;if(h===H)return 14}return 2}function Qf(h,x){var k=h.alternate;return k===null?(k=Uc(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Gg(h,x,k,F,Y,ae){var Te=2;if(F=h,typeof h=="function")Jb(h)&&(Te=1);else if(typeof h=="string")Te=5;else e:switch(h){case _:return K0(k.children,Y,ae,x);case P:Te=8,Y|=8;break;case I:return h=Uc(12,k,x,Y|2),h.elementType=I,h.lanes=ae,h;case R:return h=Uc(13,k,x,Y),h.elementType=R,h.lanes=ae,h;case z:return h=Uc(19,k,x,Y),h.elementType=z,h.lanes=ae,h;case J:return Kg(k,Y,ae,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case U:Te=10;break e;case C:Te=9;break e;case O:Te=11;break e;case H:Te=14;break e;case Q:Te=16,F=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=Uc(Te,k,x,Y),x.elementType=h,x.type=F,x.lanes=ae,x}function K0(h,x,k,F){return h=Uc(7,h,F,x),h.lanes=k,h}function Kg(h,x,k,F){return h=Uc(22,h,F,x),h.elementType=J,h.lanes=k,h.stateNode={isHidden:!1},h}function Zb(h,x,k){return h=Uc(6,h,null,x),h.lanes=k,h}function e2(h,x,k){return x=Uc(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function EB(h,x,k,F,Y){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jn(0),this.expirationTimes=jn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jn(0),this.identifierPrefix=F,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function t2(h,x,k,F,Y,ae,Te,et,lt){return h=new EB(h,x,k,et,lt),x===1?(x=1,ae===!0&&(x|=8)):x=0,ae=Uc(3,null,null,x),h.current=ae,ae.stateNode=h,ae.memoizedState={element:F,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(ae),h}function TB(h,x,k){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:F==null?null:""+F,children:h,containerInfo:x,implementation:k}}function K_(h){if(!h)return Dc;h=h._reactInternals;e:{if(Ae(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Ji(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(Ji(k))return B0(h,k,x)}return x}function X_(h,x,k,F,Y,ae,Te,et,lt){return h=t2(k,F,!0,h,Y,ae,Te,et,lt),h.context=K_(null),k=h.current,F=gl(),Y=Xf(k),ae=Ho(F,Y),ae.callback=x??null,No(k,ae,Y),h.current.lanes=Y,Jt(h,Y,F),Hl(h,F),h}function Xg(h,x,k,F){var Y=x.current,ae=gl(),Te=Xf(Y);return k=K_(k),x.context===null?x.context=k:x.pendingContext=k,x=Ho(ae,Te),x.payload={element:h},F=F===void 0?null:F,F!==null&&(x.callback=F),h=No(Y,x,Te),h!==null&&(Od(h,Y,Te,ae),ac(h,Y,Te)),Te}function Yg(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function Y_(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function r2(h,x){Y_(h,x),(h=h.alternate)&&Y_(h,x)}function OB(){return null}var Q_=typeof reportError=="function"?reportError:function(h){console.error(h)};function n2(h){this._internalRoot=h}Qg.prototype.render=n2.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));Xg(h,x,null,null)},Qg.prototype.unmount=n2.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;W0(function(){Xg(null,h,null,null)}),x[ss]=null}};function Qg(h){this._internalRoot=h}Qg.prototype.unstable_scheduleHydration=function(h){if(h){var x=er();h={blockedOn:null,target:h,priority:x};for(var k=0;k<Hr.length&&x!==0&&x<Hr[k].priority;k++);Hr.splice(k,0,h),k===0&&ms(h)}};function a2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Jg(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function J_(){}function PB(h,x,k,F,Y){if(Y){if(typeof F=="function"){var ae=F;F=function(){var kt=Yg(Te);ae.call(kt)}}var Te=X_(x,F,h,0,null,!1,!1,"",J_);return h._reactRootContainer=Te,h[ss]=Te.current,bd(h.nodeType===8?h.parentNode:h),W0(),Te}for(;Y=h.lastChild;)h.removeChild(Y);if(typeof F=="function"){var et=F;F=function(){var kt=Yg(lt);et.call(kt)}}var lt=t2(h,0,!1,null,null,!1,!1,"",J_);return h._reactRootContainer=lt,h[ss]=lt.current,bd(h.nodeType===8?h.parentNode:h),W0(function(){Xg(x,lt,k,F)}),lt}function Zg(h,x,k,F,Y){var ae=k._reactRootContainer;if(ae){var Te=ae;if(typeof Y=="function"){var et=Y;Y=function(){var lt=Yg(Te);et.call(lt)}}Xg(x,Te,h,Y)}else Te=PB(k,x,h,Y,F);return Yg(Te)}Ua=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=_t(x.pendingLanes);k!==0&&(Ft(x,k|1),Hl(x,Lt()),(ia&6)===0&&(Zh=Lt()+500,ce()))}break;case 13:W0(function(){var F=Kn(h,1);if(F!==null){var Y=gl();Od(F,h,1,Y)}}),r2(h,1)}},Ia=function(h){if(h.tag===13){var x=Kn(h,134217728);if(x!==null){var k=gl();Od(x,h,134217728,k)}r2(h,134217728)}},Da=function(h){if(h.tag===13){var x=Xf(h),k=Kn(h,x);if(k!==null){var F=gl();Od(k,h,x,F)}r2(h,x)}},er=function(){return wr},Jr=function(h,x){var k=wr;try{return wr=h,x()}finally{wr=k}},nr=function(h,x,k){switch(x){case"input":if(Se(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var F=k[x];if(F!==h&&F.form===h.form){var Y=Qu(F);if(!Y)throw Error(r(90));he(F),Se(F,Y)}}}break;case"textarea":xe(h,k);break;case"select":x=k.value,x!=null&&ue(h,!!k.multiple,x,!1)}},Fr=Xb,fn=W0;var IB={usingClientEntryPoint:!1,Events:[Ll,Ic,Qu,Qt,mr,Xb]},km={findFiberByHostInstance:Pc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DB={bundleType:km.bundleType,version:km.version,rendererPackageName:km.rendererPackageName,rendererConfig:km.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=tt(h),h===null?null:h.stateNode},findFiberByHostInstance:km.findFiberByHostInstance||OB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ev.isDisabled&&ev.supportsFiber)try{hs=ev.inject(DB),zn=ev}catch{}}return Wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IB,Wl.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(x))throw Error(r(200));return TB(h,x,null,k)},Wl.createRoot=function(h,x){if(!a2(h))throw Error(r(299));var k=!1,F="",Y=Q_;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(F=x.identifierPrefix),x.onRecoverableError!==void 0&&(Y=x.onRecoverableError)),x=t2(h,1,!1,null,null,k,!1,F,Y),h[ss]=x.current,bd(h.nodeType===8?h.parentNode:h),new n2(x)},Wl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=tt(x),h=h===null?null:h.stateNode,h},Wl.flushSync=function(h){return W0(h)},Wl.hydrate=function(h,x,k){if(!Jg(x))throw Error(r(200));return Zg(null,h,x,!0,k)},Wl.hydrateRoot=function(h,x,k){if(!a2(h))throw Error(r(405));var F=k!=null&&k.hydratedSources||null,Y=!1,ae="",Te=Q_;if(k!=null&&(k.unstable_strictMode===!0&&(Y=!0),k.identifierPrefix!==void 0&&(ae=k.identifierPrefix),k.onRecoverableError!==void 0&&(Te=k.onRecoverableError)),x=X_(x,null,h,1,k??null,Y,!1,ae,Te),h[ss]=x.current,bd(h),F)for(h=0;h<F.length;h++)k=F[h],Y=k._getVersion,Y=Y(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,Y]:x.mutableSourceEagerHydrationData.push(k,Y);return new Qg(x)},Wl.render=function(h,x,k){if(!Jg(x))throw Error(r(200));return Zg(null,h,x,!1,k)},Wl.unmountComponentAtNode=function(h){if(!Jg(h))throw Error(r(40));return h._reactRootContainer?(W0(function(){Zg(null,null,h,!1,function(){h._reactRootContainer=null,h[ss]=null})}),!0):!1},Wl.unstable_batchedUpdates=Xb,Wl.unstable_renderSubtreeIntoContainer=function(h,x,k,F){if(!Jg(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return Zg(h,x,k,!1,F)},Wl.version="18.3.1-next-f1338f8080-20240426",Wl}var i6;function xD(){if(i6)return o2.exports;i6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),o2.exports=qB(),o2.exports}var o6;function $B(){if(o6)return rv;o6=1;var e=xD();return rv.createRoot=e.createRoot,rv.hydrateRoot=e.hydrateRoot,rv}var zB=$B();const HB=Oa(zB),WB="modulepreload",VB=function(e){return"/"+e},l6={},n1=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=VB(d),d in l6)return;l6[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":WB,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,y)=>{m.addEventListener("load",p),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const GB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gD=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();var KB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const XB=L.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>L.createElement("svg",{ref:c,...KB,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:gD("lucide",s),...l},[...o.map(([d,u])=>L.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Ut=(e,t)=>{const r=L.forwardRef(({className:a,...s},i)=>L.createElement(XB,{ref:i,iconNode:t,className:gD(`lucide-${GB(e)}`,a),...s}));return r.displayName=`${e}`,r};const c6=Ut("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const YB=Ut("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const ku=Ut("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Vk=Ut("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Eo=Ut("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const QB=Ut("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const yh=Ut("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const nv=Ut("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const Ey=Ut("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const oi=Ut("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const d6=Ut("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const a1=Ut("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const kl=Ut("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Hv=Ut("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const Wd=Ut("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const oa=Ut("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const u6=Ut("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const vD=Ut("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Zm=Ut("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const Lu=Ut("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const zs=Ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Uj=Ut("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ya=Ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const qj=Ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Zn=Ut("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const gn=Ut("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const JB=Ut("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ZB=Ut("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const yD=Ut("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Eu=Ut("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Is=Ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const s0=Ut("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const eU=Ut("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const bD=Ut("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const wD=Ut("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Fu=Ut("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const h0=Ut("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const f6=Ut("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Gk=Ut("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Ss=Ut("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const tU=Ut("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Tu=Ut("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const rU=Ut("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Wv=Ut("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const nU=Ut("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const aU=Ut("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const ea=Ut("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const h6=Ut("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const sU=Ut("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const iU=Ut("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const uc=Ut("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const p0=Ut("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Vd=Ut("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const dh=Ut("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const oU=Ut("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const fc=Ut("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const lU=Ut("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const xf=Ut("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const cU=Ut("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Nl=Ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const av=Ut("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const y0=Ut("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const $j=Ut("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const zj=Ut("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const i0=Ut("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const uh=Ut("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const Ty=Ut("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const dU=Ut("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const yt=Ut("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const uU=Ut("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const ND=Ut("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Qa=Ut("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const jD=Ut("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Vv=Ut("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const fU=Ut("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const hU=Ut("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Gv=Ut("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const pU=Ut("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const lo=Ut("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const mU=Ut("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const xU=Ut("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const Kk=Ut("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Hj=Ut("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Q0=Ut("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const gU=Ut("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Wj=Ut("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const Sl=Ut("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Vj=Ut("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const vU=Ut("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const nn=Ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Gj=Ut("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const Ou=Ut("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const yU=Ut("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const s1=Ut("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ni=Ut("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const bU=Ut("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const Yl=Ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Gl=Ut("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const p6=Ut("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const Kj=Ut("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const i1=Ut("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const wU=Ut("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Oy=Ut("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const mx=Ut("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Mi=Ut("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const ji=Ut("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const NU=Ut("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const jU=Ut("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const gf=Ut("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Os=Ut("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const _m=Ut("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Lr=Ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const kU=Ut("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const SU=Ut("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Gd=Ut("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const b0=Ut("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Qd=Ut("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const sv=Ut("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const ed=Ut("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const ol=Ut("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const m0=Ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const fp=Ut("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const _U=Ut("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const tr=Ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const o1=Ut("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),kD=[{id:"dashboard",label:"Dashboard",icon:n.jsx(cU,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:n.jsx(ji,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:n.jsx(oa,{className:"w-5 h-5"})}],Kv=[{id:"sales-crm",label:"Sales & CRM",icon:n.jsx(kl,{className:"w-5 h-5"}),items:[{id:"crm",label:"CRM",icon:n.jsx(m0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:n.jsx(kl,{className:"w-5 h-5"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(oi,{className:"w-5 h-5"})},{id:"products-services",label:"Products & Services",icon:n.jsx(Kk,{className:"w-5 h-5"})}]},{id:"client-management",label:"Client Management",icon:n.jsx(Qa,{className:"w-5 h-5"}),items:[{id:"inbox",label:"Shared Inbox",icon:n.jsx(Qa,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:n.jsx(gf,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:n.jsx(Wv,{className:"w-5 h-5"})}]},{id:"finance",label:"Finance",icon:n.jsx(Fu,{className:"w-5 h-5"}),items:[{id:"invoices",label:"Billing & Invoicing",icon:n.jsx(Fu,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:n.jsx(Gj,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:n.jsx(Zm,{className:"w-5 h-5"})}]},{id:"projects",label:"Projects",icon:n.jsx(ea,{className:"w-5 h-5"}),items:[{id:"projects",label:"Projects",icon:n.jsx(ea,{className:"w-5 h-5"})}]}],SD={id:"system",label:"System",icon:n.jsx(Kj,{className:"w-5 h-5"}),items:[{id:"integrations",label:"Integrations",icon:n.jsx(i1,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:n.jsx(Vv,{className:"w-5 h-5"})},{id:"settings",label:"Settings",icon:n.jsx(Kj,{className:"w-5 h-5"})},{id:"data-hygiene",label:"Data Hygiene",icon:n.jsx(Oy,{className:"w-5 h-5"})}]},AU=SD.items;[...kD,...Kv.flatMap(e=>e.items),...AU];const Xv=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],iv=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"task-comment",label:"Task Comment/Note Added",description:"Alerts when someone posts in the Notes & Comments section of a task you're assigned to or involved in",inApp:!0,email:!1},{id:"task-mention",label:"Task @Mention",description:"Alerts when someone uses @ to mention you in a task comment",inApp:!0,email:!0},{id:"task-status-changed",label:"Task Status Changed",description:"Alerts when a task you're assigned to or created moves between statuses",inApp:!0,email:!1},{id:"task-due-date-reminder",label:"Task Due Date Reminder",description:"Alert before a task is due",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],CU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,a=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(a+s/60)},ex=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],Am=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(ex.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),d=`UTC${t>=0?"+":"-"}${o}:${l}`;if(ex.find(u=>u.value===d))return d}const a=t;let s="UTC+0",i=1/0;return ex.forEach(o=>{const l=CU(o.value),c=Math.abs(l-a);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},m6=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function _D(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=_D(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ca(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=_D(e))&&(a&&(a+=" "),a+=t);return a}var d2,x6;function Jl(){if(x6)return d2;x6=1;var e=Array.isArray;return d2=e,d2}var u2,g6;function AD(){if(g6)return u2;g6=1;var e=typeof tv=="object"&&tv&&tv.Object===Object&&tv;return u2=e,u2}var f2,v6;function Ru(){if(v6)return f2;v6=1;var e=AD(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return f2=r,f2}var h2,y6;function mg(){if(y6)return h2;y6=1;var e=Ru(),t=e.Symbol;return h2=t,h2}var p2,b6;function EU(){if(b6)return p2;b6=1;var e=mg(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var d=!0}catch{}var u=a.call(o);return d&&(l?o[s]=c:delete o[s]),u}return p2=i,p2}var m2,w6;function TU(){if(w6)return m2;w6=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return m2=r,m2}var x2,N6;function Ef(){if(N6)return x2;N6=1;var e=mg(),t=EU(),r=TU(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return x2=o,x2}var g2,j6;function Tf(){if(j6)return g2;j6=1;function e(t){return t!=null&&typeof t=="object"}return g2=e,g2}var v2,k6;function nm(){if(k6)return v2;k6=1;var e=Ef(),t=Tf(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return v2=a,v2}var y2,S6;function Xk(){if(S6)return y2;S6=1;var e=Jl(),t=nm(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return y2=s,y2}var b2,_6;function A0(){if(_6)return b2;_6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return b2=e,b2}var w2,A6;function Yk(){if(A6)return w2;A6=1;var e=Ef(),t=A0(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==a||c==s||c==r||c==i}return w2=o,w2}var N2,C6;function OU(){if(C6)return N2;C6=1;var e=Ru(),t=e["__core-js_shared__"];return N2=t,N2}var j2,E6;function PU(){if(E6)return j2;E6=1;var e=OU(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return j2=r,j2}var k2,T6;function CD(){if(T6)return k2;T6=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return k2=r,k2}var S2,O6;function IU(){if(O6)return S2;O6=1;var e=Yk(),t=PU(),r=A0(),a=CD(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(m){if(!r(m)||t(m))return!1;var p=e(m)?u:i;return p.test(a(m))}return S2=f,S2}var _2,P6;function DU(){if(P6)return _2;P6=1;function e(t,r){return t?.[r]}return _2=e,_2}var A2,I6;function Dh(){if(I6)return A2;I6=1;var e=IU(),t=DU();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return A2=r,A2}var C2,D6;function Py(){if(D6)return C2;D6=1;var e=Dh(),t=e(Object,"create");return C2=t,C2}var E2,L6;function LU(){if(L6)return E2;L6=1;var e=Py();function t(){this.__data__=e?e(null):{},this.size=0}return E2=t,E2}var T2,F6;function FU(){if(F6)return T2;F6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return T2=e,T2}var O2,M6;function MU(){if(M6)return O2;M6=1;var e=Py(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return O2=s,O2}var P2,R6;function RU(){if(R6)return P2;R6=1;var e=Py(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return P2=a,P2}var I2,B6;function BU(){if(B6)return I2;B6=1;var e=Py(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return I2=r,I2}var D2,U6;function UU(){if(U6)return D2;U6=1;var e=LU(),t=FU(),r=MU(),a=RU(),s=BU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,D2=i,D2}var L2,q6;function qU(){if(q6)return L2;q6=1;function e(){this.__data__=[],this.size=0}return L2=e,L2}var F2,$6;function Qk(){if($6)return F2;$6=1;function e(t,r){return t===r||t!==t&&r!==r}return F2=e,F2}var M2,z6;function Iy(){if(z6)return M2;z6=1;var e=Qk();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return M2=t,M2}var R2,H6;function $U(){if(H6)return R2;H6=1;var e=Iy(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return R2=a,R2}var B2,W6;function zU(){if(W6)return B2;W6=1;var e=Iy();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return B2=t,B2}var U2,V6;function HU(){if(V6)return U2;V6=1;var e=Iy();function t(r){return e(this.__data__,r)>-1}return U2=t,U2}var q2,G6;function WU(){if(G6)return q2;G6=1;var e=Iy();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return q2=t,q2}var $2,K6;function Dy(){if(K6)return $2;K6=1;var e=qU(),t=$U(),r=zU(),a=HU(),s=WU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,$2=i,$2}var z2,X6;function Jk(){if(X6)return z2;X6=1;var e=Dh(),t=Ru(),r=e(t,"Map");return z2=r,z2}var H2,Y6;function VU(){if(Y6)return H2;Y6=1;var e=UU(),t=Dy(),r=Jk();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return H2=a,H2}var W2,Q6;function GU(){if(Q6)return W2;Q6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return W2=e,W2}var V2,J6;function Ly(){if(J6)return V2;J6=1;var e=GU();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return V2=t,V2}var G2,Z6;function KU(){if(Z6)return G2;Z6=1;var e=Ly();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return G2=t,G2}var K2,eA;function XU(){if(eA)return K2;eA=1;var e=Ly();function t(r){return e(this,r).get(r)}return K2=t,K2}var X2,tA;function YU(){if(tA)return X2;tA=1;var e=Ly();function t(r){return e(this,r).has(r)}return X2=t,X2}var Y2,rA;function QU(){if(rA)return Y2;rA=1;var e=Ly();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return Y2=t,Y2}var Q2,nA;function Zk(){if(nA)return Q2;nA=1;var e=VU(),t=KU(),r=XU(),a=YU(),s=QU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,Q2=i,Q2}var J2,aA;function ED(){if(aA)return J2;aA=1;var e=Zk(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,J2=r,J2}var Z2,sA;function JU(){if(sA)return Z2;sA=1;var e=ED(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Z2=r,Z2}var ew,iA;function ZU(){if(iA)return ew;iA=1;var e=JU(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,d){i.push(c?d.replace(r,"$1"):l||o)}),i});return ew=a,ew}var tw,oA;function eS(){if(oA)return tw;oA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return tw=e,tw}var rw,lA;function eq(){if(lA)return rw;lA=1;var e=mg(),t=eS(),r=Jl(),a=nm(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return rw=o,rw}var nw,cA;function TD(){if(cA)return nw;cA=1;var e=eq();function t(r){return r==null?"":e(r)}return nw=t,nw}var aw,dA;function OD(){if(dA)return aw;dA=1;var e=Jl(),t=Xk(),r=ZU(),a=TD();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return aw=s,aw}var sw,uA;function Fy(){if(uA)return sw;uA=1;var e=nm();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return sw=t,sw}var iw,fA;function tS(){if(fA)return iw;fA=1;var e=OD(),t=Fy();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return iw=r,iw}var ow,hA;function PD(){if(hA)return ow;hA=1;var e=tS();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return ow=t,ow}var tq=PD();const td=Oa(tq);var lw,pA;function rq(){if(pA)return lw;pA=1;function e(t){return t==null}return lw=e,lw}var nq=rq();const Wn=Oa(nq);var cw,mA;function aq(){if(mA)return cw;mA=1;var e=Ef(),t=Jl(),r=Tf(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return cw=s,cw}var sq=aq();const bh=Oa(sq);var iq=Yk();const En=Oa(iq);var oq=A0();const am=Oa(oq);var dw={exports:{}},Na={};var xA;function lq(){if(xA)return Na;xA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case a:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case m:case f:case i:return g;default:return b}}case t:return b}}}return Na.ContextConsumer=o,Na.ContextProvider=i,Na.Element=e,Na.ForwardRef=c,Na.Fragment=r,Na.Lazy=m,Na.Memo=f,Na.Portal=t,Na.Profiler=s,Na.StrictMode=a,Na.Suspense=d,Na.SuspenseList=u,Na.isAsyncMode=function(){return!1},Na.isConcurrentMode=function(){return!1},Na.isContextConsumer=function(g){return v(g)===o},Na.isContextProvider=function(g){return v(g)===i},Na.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Na.isForwardRef=function(g){return v(g)===c},Na.isFragment=function(g){return v(g)===r},Na.isLazy=function(g){return v(g)===m},Na.isMemo=function(g){return v(g)===f},Na.isPortal=function(g){return v(g)===t},Na.isProfiler=function(g){return v(g)===s},Na.isStrictMode=function(g){return v(g)===a},Na.isSuspense=function(g){return v(g)===d},Na.isSuspenseList=function(g){return v(g)===u},Na.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===d||g===u||g===p||typeof g=="object"&&g!==null&&(g.$$typeof===m||g.$$typeof===f||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===y||g.getModuleId!==void 0)},Na.typeOf=v,Na}var gA;function cq(){return gA||(gA=1,dw.exports=lq()),dw.exports}var dq=cq(),uw,vA;function ID(){if(vA)return uw;vA=1;var e=Ef(),t=Tf(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return uw=a,uw}var fw,yA;function uq(){if(yA)return fw;yA=1;var e=ID();function t(r){return e(r)&&r!=+r}return fw=t,fw}var fq=uq();const sm=Oa(fq);var hq=ID();const pq=Oa(hq);var $d=function(t){return t===0?0:t>0?1:-1},nh=function(t){return bh(t)&&t.indexOf("%")===t.length-1},lr=function(t){return pq(t)&&!sm(t)},mq=function(t){return Wn(t)},Ui=function(t){return lr(t)||bh(t)},xq=0,xg=function(t){var r=++xq;return"".concat(t||"").concat(r)},wh=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lr(t)&&!bh(t))return a;var i;if(nh(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return sm(i)&&(i=a),s&&i>r&&(i=r),i},o0=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},gq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Jc=function(t,r){return lr(t)&&lr(r)?function(a){return t+a*(r-t)}:function(){return r}};function l1(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):td(a,t))===r})}var vq=function(t,r){return lr(t)&&lr(r)?t-r:bh(t)&&bh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function vp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Xj(e){"@babel/helpers - typeof";return Xj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xj(e)}var yq=["viewBox","children"],bq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bA=["points","pathLength"],hw={svg:yq,polygon:bA,polyline:bA},rS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(L.isValidElement(t)&&(a=t.props),!am(a))return null;var s={};return Object.keys(a).forEach(function(i){rS.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},wq=function(t,r,a){return function(s){return t(r,a,s),null}},d1=function(t,r,a){if(!am(t)||Xj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];rS.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=wq(o,r,a))}),s},Nq=["children"],jq=["children"];function wA(e,t){if(e==null)return{};var r=kq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Yj(e){"@babel/helpers - typeof";return Yj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yj(e)}var NA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},vf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},jA=null,pw=null,nS=function e(t){if(t===jA&&Array.isArray(pw))return pw;var r=[];return L.Children.forEach(t,function(a){Wn(a)||(dq.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),pw=r,jA=t,r};function Kd(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return vf(s)}):a=[vf(t)],nS(e).forEach(function(s){var i=td(s,"type.displayName")||td(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function pc(e,t){var r=Kd(e,t);return r&&r[0]}var kA=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!lr(a)||a<=0||!lr(s)||s<=0)},Sq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_q=function(t){return t&&t.type&&bh(t.type)&&Sq.indexOf(t.type)>=0},Aq=function(t){return t&&Yj(t)==="object"&&"clipDot"in t},Cq=function(t,r,a,s){var i,o=(i=hw?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!En(t)&&(s&&o.includes(r)||bq.includes(r))||a&&rS.includes(r)},Un=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(L.isValidElement(t)&&(s=t.props),!am(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Cq((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Qj=function e(t,r){if(t===r)return!0;var a=L.Children.count(t);if(a!==L.Children.count(r))return!1;if(a===0)return!0;if(a===1)return SA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!SA(i,o))return!1}return!0},SA=function(t,r){if(Wn(t)&&Wn(r))return!0;if(!Wn(t)&&!Wn(r)){var a=t.props||{},s=a.children,i=wA(a,Nq),o=r.props||{},l=o.children,c=wA(o,jq);return s&&l?vp(i,c)&&Qj(s,l):!s&&!l?vp(i,c):!1}return!1},_A=function(t,r){var a=[],s={};return nS(t).forEach(function(i,o){if(_q(i))a.push(i);else if(i){var l=vf(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var f=d(i,l,o);a.push(f),s[l]=!0}}}),a},Eq=function(t){var r=t&&t.type;return r&&NA[r]?NA[r]:null},Tq=function(t,r){return nS(r).indexOf(t)},Oq=["children","width","height","viewBox","className","style","title","desc"];function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jj.apply(this,arguments)}function Pq(e,t){if(e==null)return{};var r=Iq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Iq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Zj(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=Pq(e,Oq),u=s||{width:r,height:a,x:0,y:0},f=ca("recharts-surface",i);return ut.createElement("svg",Jj({},Un(d,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ut.createElement("title",null,l),ut.createElement("desc",null,c),t)}var Dq=["children","className"];function e4(){return e4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},e4.apply(this,arguments)}function Lq(e,t){if(e==null)return{};var r=Fq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Fq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ps=ut.forwardRef(function(e,t){var r=e.children,a=e.className,s=Lq(e,Dq),i=ca("recharts-layer",a);return ut.createElement("g",e4({className:i},Un(s,!0),{ref:t}),r)}),yf=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},mw,AA;function Mq(){if(AA)return mw;AA=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return mw=e,mw}var xw,CA;function Rq(){if(CA)return xw;CA=1;var e=Mq();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return xw=t,xw}var gw,EA;function DD(){if(EA)return gw;EA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(d){return l.test(d)}return gw=c,gw}var vw,TA;function Bq(){if(TA)return vw;TA=1;function e(t){return t.split("")}return vw=e,vw}var yw,OA;function Uq(){if(OA)return yw;OA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=d+"?",v="["+i+"]?",g="(?:"+p+"(?:"+[u,f,m].join("|")+")"+v+y+")*",b=v+y+g,w="(?:"+[u+l+"?",l,f,m,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+w+b,"g");function N(S){return S.match(j)||[]}return yw=N,yw}var bw,PA;function qq(){if(PA)return bw;PA=1;var e=Bq(),t=DD(),r=Uq();function a(s){return t(s)?r(s):e(s)}return bw=a,bw}var ww,IA;function $q(){if(IA)return ww;IA=1;var e=Rq(),t=DD(),r=qq(),a=TD();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return ww=s,ww}var Nw,DA;function zq(){if(DA)return Nw;DA=1;var e=$q(),t=e("toUpperCase");return Nw=t,Nw}var Hq=zq();const My=Oa(Hq);function ts(e){return function(){return e}}const LD=Math.cos,u1=Math.sin,Jd=Math.sqrt,f1=Math.PI,Ry=2*f1,t4=Math.PI,r4=2*t4,J0=1e-6,Wq=r4-J0;function FD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Vq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FD;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Gq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FD:Vq(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,f=l-r,m=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>J0)if(!(Math.abs(f*c-d*u)>J0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-o,y=s-l,v=c*c+d*d,g=p*p+y*y,b=Math.sqrt(v),w=Math.sqrt(m),j=i*Math.tan((t4-Math.acos((v+m-g)/(2*b*w)))/2),N=j/w,S=j/b;Math.abs(N-1)>J0&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*p>u*y)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>J0||Math.abs(this._y1-u)>J0)&&this._append`L${d},${u}`,a&&(m<0&&(m=m%r4+r4),m>Wq?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:m>J0&&this._append`A${a},${a},0,${+(m>=t4)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function aS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Gq(t)}function sS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function MD(e){this._context=e}MD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function By(e){return new MD(e)}function RD(e){return e[0]}function BD(e){return e[1]}function UD(e,t){var r=ts(!0),a=null,s=By,i=null,o=aS(l);e=typeof e=="function"?e:e===void 0?RD:ts(e),t=typeof t=="function"?t:t===void 0?BD:ts(t);function l(c){var d,u=(c=sS(c)).length,f,m=!1,p;for(a==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,d,c),+t(f,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ts(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ts(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ts(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function ov(e,t,r){var a=null,s=ts(!0),i=null,o=By,l=null,c=aS(d);e=typeof e=="function"?e:e===void 0?RD:ts(+e),t=typeof t=="function"?t:ts(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?BD:ts(+r);function d(f){var m,p,y,v=(f=sS(f)).length,g,b=!1,w,j=new Array(v),N=new Array(v);for(i==null&&(l=o(w=c())),m=0;m<=v;++m){if(!(m<v&&s(g=f[m],m,f))===b)if(b=!b)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(j[y],N[y]);l.lineEnd(),l.areaEnd()}b&&(j[m]=+e(g,m,f),N[m]=+t(g,m,f),l.point(a?+a(g,m,f):j[m],r?+r(g,m,f):N[m]))}if(w)return l=null,w+""||null}function u(){return UD().defined(s).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:ts(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ts(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:ts(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:ts(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ts(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ts(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(s=typeof f=="function"?f:ts(!!f),d):s},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class qD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Kq(e){return new qD(e,!0)}function Xq(e){return new qD(e,!1)}const iS={draw(e,t){const r=Jd(t/f1);e.moveTo(r,0),e.arc(0,0,r,0,Ry)}},Yq={draw(e,t){const r=Jd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},$D=Jd(1/3),Qq=$D*2,Jq={draw(e,t){const r=Jd(t/Qq),a=r*$D;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},Zq={draw(e,t){const r=Jd(t),a=-r/2;e.rect(a,a,r,r)}},e$=.8908130915292852,zD=u1(f1/10)/u1(7*f1/10),t$=u1(Ry/10)*zD,r$=-LD(Ry/10)*zD,n$={draw(e,t){const r=Jd(t*e$),a=t$*r,s=r$*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Ry*i/5,l=LD(o),c=u1(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},jw=Jd(3),a$={draw(e,t){const r=-Jd(t/(jw*3));e.moveTo(0,r*2),e.lineTo(-jw*r,-r),e.lineTo(jw*r,-r),e.closePath()}},qc=-.5,$c=Jd(3)/2,n4=1/Jd(12),s$=(n4/2+1)*3,i$={draw(e,t){const r=Jd(t/s$),a=r/2,s=r*n4,i=a,o=r*n4+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(qc*a-$c*s,$c*a+qc*s),e.lineTo(qc*i-$c*o,$c*i+qc*o),e.lineTo(qc*l-$c*c,$c*l+qc*c),e.lineTo(qc*a+$c*s,qc*s-$c*a),e.lineTo(qc*i+$c*o,qc*o-$c*i),e.lineTo(qc*l+$c*c,qc*c-$c*l),e.closePath()}};function o$(e,t){let r=null,a=aS(s);e=typeof e=="function"?e:ts(e||iS),t=typeof t=="function"?t:ts(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ts(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ts(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function h1(){}function p1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function HD(e){this._context=e}HD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l$(e){return new HD(e)}function WD(e){this._context=e}WD.prototype={areaStart:h1,areaEnd:h1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c$(e){return new WD(e)}function VD(e){this._context=e}VD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d$(e){return new VD(e)}function GD(e){this._context=e}GD.prototype={areaStart:h1,areaEnd:h1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function u$(e){return new GD(e)}function LA(e){return e<0?-1:1}function FA(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(LA(i)+LA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function MA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function kw(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function m1(e){this._context=e}m1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kw(this,this._t0,MA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kw(this,MA(this,r=FA(this,e,t)),r);break;default:kw(this,this._t0,r=FA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function KD(e){this._context=new XD(e)}(KD.prototype=Object.create(m1.prototype)).point=function(e,t){m1.prototype.point.call(this,t,e)};function XD(e){this._context=e}XD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function f$(e){return new m1(e)}function h$(e){return new KD(e)}function YD(e){this._context=e}YD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=RA(e),s=RA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RA(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function p$(e){return new YD(e)}function Uy(e,t){this._context=e,this._t=t}Uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function m$(e){return new Uy(e,.5)}function x$(e){return new Uy(e,0)}function g$(e){return new Uy(e,1)}function Tp(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function a4(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function v$(e,t){return e[t]}function y$(e){const t=[];return t.key=e,t}function b$(){var e=ts([]),t=a4,r=Tp,a=v$;function s(i){var o=Array.from(e.apply(this,arguments),y$),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,u=sS(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ts(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:ts(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?a4:typeof i=="function"?i:ts(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Tp,s):r},s}function w$(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Tp(e,t)}}function N$(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Tp(e,t)}}function j$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[a][1]||0,m=u[a-1][1]||0,p=(f-m)/2,y=0;y<l;++y){var v=e[t[y]],g=v[a][1]||0,b=v[a-1][1]||0;p+=g-b}c+=f,d+=p*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,Tp(e,t)}}function xx(e){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xx(e)}var k$=["type","size","sizeType"];function s4(){return s4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s4.apply(this,arguments)}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function UA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(a){S$(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S$(e,t,r){return t=_$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _$(e){var t=A$(e,"string");return xx(t)=="symbol"?t:t+""}function A$(e,t){if(xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(xx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C$(e,t){if(e==null)return{};var r=E$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function E$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var QD={symbolCircle:iS,symbolCross:Yq,symbolDiamond:Jq,symbolSquare:Zq,symbolStar:n$,symbolTriangle:a$,symbolWye:i$},T$=Math.PI/180,O$=function(t){var r="symbol".concat(My(t));return QD[r]||iS},P$=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*T$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},I$=function(t,r){QD["symbol".concat(My(t))]=r},oS=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=C$(t,k$),d=UA(UA({},c),{},{type:a,size:i,sizeType:l}),u=function(){var g=O$(a),b=o$().type(g).size(P$(i,l,a));return b()},f=d.className,m=d.cx,p=d.cy,y=Un(d,!0);return m===+m&&p===+p&&i===+i?ut.createElement("path",s4({},y,{className:ca("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:u()})):null};oS.registerSymbol=I$;function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function i4(){return i4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i4.apply(this,arguments)}function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function D$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(a){gx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ZD(a.key),a)}}function M$(e,t,r){return t&&F$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R$(e,t,r){return t=x1(t),B$(e,JD()?Reflect.construct(t,r||[],x1(e).constructor):t.apply(e,r))}function B$(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U$(e)}function U$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function x1(e){return x1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x1(e)}function q$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o4(e,t)}function o4(e,t){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},o4(e,t)}function gx(e,t,r){return t=ZD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZD(e){var t=$$(e,"string");return Op(t)=="symbol"?t:t+""}function $$(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Op(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zc=32,lS=(function(e){function t(){return L$(this,t),R$(this,t,arguments)}return q$(t,e),M$(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=zc/2,o=zc/6,l=zc/3,c=a.inactive?s:a.color;if(a.type==="plainline")return ut.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:zc,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ut.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(zc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ut.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(zc/8,"h").concat(zc,"v").concat(zc*3/4,"h").concat(-zc,"z"),className:"recharts-legend-icon"});if(ut.isValidElement(a.legendIcon)){var d=D$({},a);return delete d.legendIcon,ut.cloneElement(a.legendIcon,d)}return ut.createElement(oS,{fill:c,cx:i,cy:i,size:zc,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:zc,height:zc},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var v=p.formatter||c,g=ca(gx(gx({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=En(p.value)?null:p.value;yf(!En(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?d:p.color;return ut.createElement("li",i4({className:g,style:f,key:"legend-item-".concat(y)},d1(a.props,p,y)),ut.createElement(Zj,{width:o,height:o,viewBox:u,style:m},a.renderIcon(p)),ut.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(b,p,y):b))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ut.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(L.PureComponent);gx(lS,"displayName","Legend");gx(lS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Sw,$A;function z$(){if($A)return Sw;$A=1;var e=Dy();function t(){this.__data__=new e,this.size=0}return Sw=t,Sw}var _w,zA;function H$(){if(zA)return _w;zA=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return _w=e,_w}var Aw,HA;function W$(){if(HA)return Aw;HA=1;function e(t){return this.__data__.get(t)}return Aw=e,Aw}var Cw,WA;function V$(){if(WA)return Cw;WA=1;function e(t){return this.__data__.has(t)}return Cw=e,Cw}var Ew,VA;function G$(){if(VA)return Ew;VA=1;var e=Dy(),t=Jk(),r=Zk(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<a-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return Ew=s,Ew}var Tw,GA;function eL(){if(GA)return Tw;GA=1;var e=Dy(),t=z$(),r=H$(),a=W$(),s=V$(),i=G$();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,Tw=o,Tw}var Ow,KA;function K$(){if(KA)return Ow;KA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Ow=t,Ow}var Pw,XA;function X$(){if(XA)return Pw;XA=1;function e(t){return this.__data__.has(t)}return Pw=e,Pw}var Iw,YA;function tL(){if(YA)return Iw;YA=1;var e=Zk(),t=K$(),r=X$();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,Iw=a,Iw}var Dw,QA;function rL(){if(QA)return Dw;QA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return Dw=e,Dw}var Lw,JA;function nL(){if(JA)return Lw;JA=1;function e(t,r){return t.has(r)}return Lw=e,Lw}var Fw,ZA;function aL(){if(ZA)return Fw;ZA=1;var e=tL(),t=rL(),r=nL(),a=1,s=2;function i(o,l,c,d,u,f){var m=c&a,p=o.length,y=l.length;if(p!=y&&!(m&&y>p))return!1;var v=f.get(o),g=f.get(l);if(v&&g)return v==l&&g==o;var b=-1,w=!0,j=c&s?new e:void 0;for(f.set(o,l),f.set(l,o);++b<p;){var N=o[b],S=l[b];if(d)var E=m?d(S,N,b,l,o,f):d(N,S,b,o,l,f);if(E!==void 0){if(E)continue;w=!1;break}if(j){if(!t(l,function(_,P){if(!r(j,P)&&(N===_||u(N,_,c,d,f)))return j.push(P)})){w=!1;break}}else if(!(N===S||u(N,S,c,d,f))){w=!1;break}}return f.delete(o),f.delete(l),w}return Fw=i,Fw}var Mw,eC;function Y$(){if(eC)return Mw;eC=1;var e=Ru(),t=e.Uint8Array;return Mw=t,Mw}var Rw,tC;function Q$(){if(tC)return Rw;tC=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return Rw=e,Rw}var Bw,rC;function cS(){if(rC)return Bw;rC=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return Bw=e,Bw}var Uw,nC;function J$(){if(nC)return Uw;nC=1;var e=mg(),t=Y$(),r=Qk(),a=aL(),s=Q$(),i=cS(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",f="[object Map]",m="[object Number]",p="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",j=e?e.prototype:void 0,N=j?j.valueOf:void 0;function S(E,_,P,I,U,C,O){switch(P){case w:if(E.byteLength!=_.byteLength||E.byteOffset!=_.byteOffset)return!1;E=E.buffer,_=_.buffer;case b:return!(E.byteLength!=_.byteLength||!C(new t(E),new t(_)));case c:case d:case m:return r(+E,+_);case u:return E.name==_.name&&E.message==_.message;case p:case v:return E==_+"";case f:var R=s;case y:var z=I&o;if(R||(R=i),E.size!=_.size&&!z)return!1;var H=O.get(E);if(H)return H==_;I|=l,O.set(E,_);var Q=a(R(E),R(_),I,U,C,O);return O.delete(E),Q;case g:if(N)return N.call(E)==N.call(_)}return!1}return Uw=S,Uw}var qw,aC;function sL(){if(aC)return qw;aC=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return qw=e,qw}var $w,sC;function Z$(){if(sC)return $w;sC=1;var e=sL(),t=Jl();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return $w=r,$w}var zw,iC;function ez(){if(iC)return zw;iC=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return zw=e,zw}var Hw,oC;function tz(){if(oC)return Hw;oC=1;function e(){return[]}return Hw=e,Hw}var Ww,lC;function rz(){if(lC)return Ww;lC=1;var e=ez(),t=tz(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Ww=i,Ww}var Vw,cC;function nz(){if(cC)return Vw;cC=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return Vw=e,Vw}var Gw,dC;function az(){if(dC)return Gw;dC=1;var e=Ef(),t=Tf(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return Gw=a,Gw}var Kw,uC;function dS(){if(uC)return Kw;uC=1;var e=az(),t=Tf(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return Kw=i,Kw}var Wm={exports:{}},Xw,fC;function sz(){if(fC)return Xw;fC=1;function e(){return!1}return Xw=e,Xw}Wm.exports;var hC;function iL(){return hC||(hC=1,(function(e,t){var r=Ru(),a=sz(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Wm,Wm.exports)),Wm.exports}var Yw,pC;function uS(){if(pC)return Yw;pC=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return Yw=r,Yw}var Qw,mC;function fS(){if(mC)return Qw;mC=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Qw=t,Qw}var Jw,xC;function iz(){if(xC)return Jw;xC=1;var e=Ef(),t=fS(),r=Tf(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",f="[object Object]",m="[object RegExp]",p="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",j="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",_="[object Uint8Array]",P="[object Uint8ClampedArray]",I="[object Uint16Array]",U="[object Uint32Array]",C={};C[w]=C[j]=C[N]=C[S]=C[E]=C[_]=C[P]=C[I]=C[U]=!0,C[a]=C[s]=C[g]=C[i]=C[b]=C[o]=C[l]=C[c]=C[d]=C[u]=C[f]=C[m]=C[p]=C[y]=C[v]=!1;function O(R){return r(R)&&t(R.length)&&!!C[e(R)]}return Jw=O,Jw}var Zw,gC;function oL(){if(gC)return Zw;gC=1;function e(t){return function(r){return t(r)}}return Zw=e,Zw}var Vm={exports:{}};Vm.exports;var vC;function oz(){return vC||(vC=1,(function(e,t){var r=AD(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Vm,Vm.exports)),Vm.exports}var eN,yC;function lL(){if(yC)return eN;yC=1;var e=iz(),t=oL(),r=oz(),a=r&&r.isTypedArray,s=a?t(a):e;return eN=s,eN}var tN,bC;function lz(){if(bC)return tN;bC=1;var e=nz(),t=dS(),r=Jl(),a=iL(),s=uS(),i=lL(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var f=r(d),m=!f&&t(d),p=!f&&!m&&a(d),y=!f&&!m&&!p&&i(d),v=f||m||p||y,g=v?e(d.length,String):[],b=g.length;for(var w in d)(u||l.call(d,w))&&!(v&&(w=="length"||p&&(w=="offset"||w=="parent")||y&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,b)))&&g.push(w);return g}return tN=c,tN}var rN,wC;function cz(){if(wC)return rN;wC=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return rN=t,rN}var nN,NC;function cL(){if(NC)return nN;NC=1;function e(t,r){return function(a){return t(r(a))}}return nN=e,nN}var aN,jC;function dz(){if(jC)return aN;jC=1;var e=cL(),t=e(Object.keys,Object);return aN=t,aN}var sN,kC;function uz(){if(kC)return sN;kC=1;var e=cz(),t=dz(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return sN=s,sN}var iN,SC;function gg(){if(SC)return iN;SC=1;var e=Yk(),t=fS();function r(a){return a!=null&&t(a.length)&&!e(a)}return iN=r,iN}var oN,_C;function qy(){if(_C)return oN;_C=1;var e=lz(),t=uz(),r=gg();function a(s){return r(s)?e(s):t(s)}return oN=a,oN}var lN,AC;function fz(){if(AC)return lN;AC=1;var e=Z$(),t=rz(),r=qy();function a(s){return e(s,r,t)}return lN=a,lN}var cN,CC;function hz(){if(CC)return cN;CC=1;var e=fz(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,c,d,u){var f=l&t,m=e(i),p=m.length,y=e(o),v=y.length;if(p!=v&&!f)return!1;for(var g=p;g--;){var b=m[g];if(!(f?b in o:a.call(o,b)))return!1}var w=u.get(i),j=u.get(o);if(w&&j)return w==o&&j==i;var N=!0;u.set(i,o),u.set(o,i);for(var S=f;++g<p;){b=m[g];var E=i[b],_=o[b];if(c)var P=f?c(_,E,b,o,i,u):c(E,_,b,i,o,u);if(!(P===void 0?E===_||d(E,_,l,c,u):P)){N=!1;break}S||(S=b=="constructor")}if(N&&!S){var I=i.constructor,U=o.constructor;I!=U&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof U=="function"&&U instanceof U)&&(N=!1)}return u.delete(i),u.delete(o),N}return cN=s,cN}var dN,EC;function pz(){if(EC)return dN;EC=1;var e=Dh(),t=Ru(),r=e(t,"DataView");return dN=r,dN}var uN,TC;function mz(){if(TC)return uN;TC=1;var e=Dh(),t=Ru(),r=e(t,"Promise");return uN=r,uN}var fN,OC;function dL(){if(OC)return fN;OC=1;var e=Dh(),t=Ru(),r=e(t,"Set");return fN=r,fN}var hN,PC;function xz(){if(PC)return hN;PC=1;var e=Dh(),t=Ru(),r=e(t,"WeakMap");return hN=r,hN}var pN,IC;function gz(){if(IC)return pN;IC=1;var e=pz(),t=Jk(),r=mz(),a=dL(),s=xz(),i=Ef(),o=CD(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",f="[object WeakMap]",m="[object DataView]",p=o(e),y=o(t),v=o(r),g=o(a),b=o(s),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=m||t&&w(new t)!=l||r&&w(r.resolve())!=d||a&&w(new a)!=u||s&&w(new s)!=f)&&(w=function(j){var N=i(j),S=N==c?j.constructor:void 0,E=S?o(S):"";if(E)switch(E){case p:return m;case y:return l;case v:return d;case g:return u;case b:return f}return N}),pN=w,pN}var mN,DC;function vz(){if(DC)return mN;DC=1;var e=eL(),t=aL(),r=J$(),a=hz(),s=gz(),i=Jl(),o=iL(),l=lL(),c=1,d="[object Arguments]",u="[object Array]",f="[object Object]",m=Object.prototype,p=m.hasOwnProperty;function y(v,g,b,w,j,N){var S=i(v),E=i(g),_=S?u:s(v),P=E?u:s(g);_=_==d?f:_,P=P==d?f:P;var I=_==f,U=P==f,C=_==P;if(C&&o(v)){if(!o(g))return!1;S=!0,I=!1}if(C&&!I)return N||(N=new e),S||l(v)?t(v,g,b,w,j,N):r(v,g,_,b,w,j,N);if(!(b&c)){var O=I&&p.call(v,"__wrapped__"),R=U&&p.call(g,"__wrapped__");if(O||R){var z=O?v.value():v,H=R?g.value():g;return N||(N=new e),j(z,H,b,w,N)}}return C?(N||(N=new e),a(v,g,b,w,j,N)):!1}return mN=y,mN}var xN,LC;function hS(){if(LC)return xN;LC=1;var e=vz(),t=Tf();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return xN=r,xN}var gN,FC;function yz(){if(FC)return gN;FC=1;var e=eL(),t=hS(),r=1,a=2;function s(i,o,l,c){var d=l.length,u=d,f=!c;if(i==null)return!u;for(i=Object(i);d--;){var m=l[d];if(f&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<u;){m=l[d];var p=m[0],y=i[p],v=m[1];if(f&&m[2]){if(y===void 0&&!(p in i))return!1}else{var g=new e;if(c)var b=c(y,v,p,i,o,g);if(!(b===void 0?t(v,y,r|a,c,g):b))return!1}}return!0}return gN=s,gN}var vN,MC;function uL(){if(MC)return vN;MC=1;var e=A0();function t(r){return r===r&&!e(r)}return vN=t,vN}var yN,RC;function bz(){if(RC)return yN;RC=1;var e=uL(),t=qy();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return yN=r,yN}var bN,BC;function fL(){if(BC)return bN;BC=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return bN=e,bN}var wN,UC;function wz(){if(UC)return wN;UC=1;var e=yz(),t=bz(),r=fL();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return wN=a,wN}var NN,qC;function Nz(){if(qC)return NN;qC=1;function e(t,r){return t!=null&&r in Object(t)}return NN=e,NN}var jN,$C;function jz(){if($C)return jN;$C=1;var e=OD(),t=dS(),r=Jl(),a=uS(),s=fS(),i=Fy();function o(l,c,d){c=e(c,l);for(var u=-1,f=c.length,m=!1;++u<f;){var p=i(c[u]);if(!(m=l!=null&&d(l,p)))break;l=l[p]}return m||++u!=f?m:(f=l==null?0:l.length,!!f&&s(f)&&a(p,f)&&(r(l)||t(l)))}return jN=o,jN}var kN,zC;function kz(){if(zC)return kN;zC=1;var e=Nz(),t=jz();function r(a,s){return a!=null&&t(a,s,e)}return kN=r,kN}var SN,HC;function Sz(){if(HC)return SN;HC=1;var e=hS(),t=PD(),r=kz(),a=Xk(),s=uL(),i=fL(),o=Fy(),l=1,c=2;function d(u,f){return a(u)&&s(f)?i(o(u),f):function(m){var p=t(m,u);return p===void 0&&p===f?r(m,u):e(f,p,l|c)}}return SN=d,SN}var _N,WC;function im(){if(WC)return _N;WC=1;function e(t){return t}return _N=e,_N}var AN,VC;function _z(){if(VC)return AN;VC=1;function e(t){return function(r){return r?.[t]}}return AN=e,AN}var CN,GC;function Az(){if(GC)return CN;GC=1;var e=tS();function t(r){return function(a){return e(a,r)}}return CN=t,CN}var EN,KC;function Cz(){if(KC)return EN;KC=1;var e=_z(),t=Az(),r=Xk(),a=Fy();function s(i){return r(i)?e(a(i)):t(i)}return EN=s,EN}var TN,XC;function C0(){if(XC)return TN;XC=1;var e=wz(),t=Sz(),r=im(),a=Jl(),s=Cz();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return TN=i,TN}var ON,YC;function hL(){if(YC)return ON;YC=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return ON=e,ON}var PN,QC;function Ez(){if(QC)return PN;QC=1;function e(t){return t!==t}return PN=e,PN}var IN,JC;function Tz(){if(JC)return IN;JC=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return IN=e,IN}var DN,ZC;function Oz(){if(ZC)return DN;ZC=1;var e=hL(),t=Ez(),r=Tz();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return DN=a,DN}var LN,eE;function Pz(){if(eE)return LN;eE=1;var e=Oz();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return LN=t,LN}var FN,tE;function Iz(){if(tE)return FN;tE=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return FN=e,FN}var MN,rE;function Dz(){if(rE)return MN;rE=1;function e(){}return MN=e,MN}var RN,nE;function Lz(){if(nE)return RN;nE=1;var e=dL(),t=Dz(),r=cS(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return RN=s,RN}var BN,aE;function Fz(){if(aE)return BN;aE=1;var e=tL(),t=Pz(),r=Iz(),a=nL(),s=Lz(),i=cS(),o=200;function l(c,d,u){var f=-1,m=t,p=c.length,y=!0,v=[],g=v;if(u)y=!1,m=r;else if(p>=o){var b=d?null:s(c);if(b)return i(b);y=!1,m=a,g=new e}else g=d?[]:v;e:for(;++f<p;){var w=c[f],j=d?d(w):w;if(w=u||w!==0?w:0,y&&j===j){for(var N=g.length;N--;)if(g[N]===j)continue e;d&&g.push(j),v.push(w)}else m(g,j,u)||(g!==v&&g.push(j),v.push(w))}return v}return BN=l,BN}var UN,sE;function Mz(){if(sE)return UN;sE=1;var e=C0(),t=Fz();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return UN=r,UN}var Rz=Mz();const iE=Oa(Rz);function pL(e,t,r){return t===!0?iE(e,r):En(t)?iE(e,t):e}function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}var Bz=["ref"];function oE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(r),!0).forEach(function(a){$y(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Uz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,xL(a.key),a)}}function qz(e,t,r){return t&&lE(e.prototype,t),r&&lE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $z(e,t,r){return t=g1(t),zz(e,mL()?Reflect.construct(t,r||[],g1(e).constructor):t.apply(e,r))}function zz(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hz(e)}function Hz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mL=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g1(e)}function Wz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l4(e,t)}function l4(e,t){return l4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},l4(e,t)}function $y(e,t,r){return t=xL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xL(e){var t=Vz(e,"string");return Pp(t)=="symbol"?t:t+""}function Vz(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Pp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gz(e,t){if(e==null)return{};var r=Kz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Kz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Xz(e){return e.value}function Yz(e,t){if(ut.isValidElement(e))return ut.cloneElement(e,t);if(typeof e=="function")return ut.createElement(e,t);t.ref;var r=Gz(t,Bz);return ut.createElement(lS,r)}var cE=1,yp=(function(e){function t(){var r;Uz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=$z(this,t,[].concat(s)),$y(r,"lastBoundingBox",{width:-1,height:-1}),r}return Wz(t,e),qz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>cE||Math.abs(s.height-this.lastBoundingBox.height)>cE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?of({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,f,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((u||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return of(of({},f),m)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,f=of(of({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ut.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){a.wrapperNode=p}},Yz(i,of(of({},this.props),{},{payload:pL(u,d,Xz)})))}}],[{key:"getWithHeight",value:function(a,s){var i=of(of({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&lr(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(L.PureComponent);$y(yp,"displayName","Legend");$y(yp,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qN,dE;function Qz(){if(dE)return qN;dE=1;var e=mg(),t=dS(),r=Jl(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return qN=s,qN}var $N,uE;function gL(){if(uE)return $N;uE=1;var e=sL(),t=Qz();function r(a,s,i,o,l){var c=-1,d=a.length;for(i||(i=t),l||(l=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?r(u,s-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return $N=r,$N}var zN,fE;function Jz(){if(fE)return zN;fE=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var d=l[t?c:++i];if(a(o[d],d,o)===!1)break}return r}}return zN=e,zN}var HN,hE;function Zz(){if(hE)return HN;hE=1;var e=Jz(),t=e();return HN=t,HN}var WN,pE;function vL(){if(pE)return WN;pE=1;var e=Zz(),t=qy();function r(a,s){return a&&e(a,s,t)}return WN=r,WN}var VN,mE;function eH(){if(mE)return VN;mE=1;var e=gg();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,c=Object(s);(a?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return VN=t,VN}var GN,xE;function pS(){if(xE)return GN;xE=1;var e=vL(),t=eH(),r=t(e);return GN=r,GN}var KN,gE;function yL(){if(gE)return KN;gE=1;var e=pS(),t=gg();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,c,d){o[++i]=s(l,c,d)}),o}return KN=r,KN}var XN,vE;function tH(){if(vE)return XN;vE=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return XN=e,XN}var YN,yE;function rH(){if(yE)return YN;yE=1;var e=nm();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=a!==void 0,d=a===null,u=a===a,f=e(a);if(!d&&!f&&!l&&r>a||l&&c&&u&&!d&&!f||i&&c&&u||!s&&u||!o)return 1;if(!i&&!l&&!f&&r<a||f&&s&&o&&!i&&!l||d&&s&&o||!c&&o||!u)return-1}return 0}return YN=t,YN}var QN,bE;function nH(){if(bE)return QN;bE=1;var e=rH();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,c=o.length,d=s.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var f=s[i];return u*(f=="desc"?-1:1)}}return r.index-a.index}return QN=t,QN}var JN,wE;function aH(){if(wE)return JN;wE=1;var e=eS(),t=tS(),r=C0(),a=yL(),s=tH(),i=oL(),o=nH(),l=im(),c=Jl();function d(u,f,m){f.length?f=e(f,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):f=[l];var p=-1;f=e(f,i(r));var y=a(u,function(v,g,b){var w=e(f,function(j){return j(v)});return{criteria:w,index:++p,value:v}});return s(y,function(v,g){return o(v,g,m)})}return JN=d,JN}var ZN,NE;function sH(){if(NE)return ZN;NE=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return ZN=e,ZN}var e5,jE;function iH(){if(jE)return e5;jE=1;var e=sH(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),d=Array(c);++l<c;)d[l]=o[s+l];l=-1;for(var u=Array(s+1);++l<s;)u[l]=o[l];return u[s]=i(d),e(a,this,u)}}return e5=r,e5}var t5,kE;function oH(){if(kE)return t5;kE=1;function e(t){return function(){return t}}return t5=e,t5}var r5,SE;function bL(){if(SE)return r5;SE=1;var e=Dh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return r5=t,r5}var n5,_E;function lH(){if(_E)return n5;_E=1;var e=oH(),t=bL(),r=im(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return n5=a,n5}var a5,AE;function cH(){if(AE)return a5;AE=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return a5=a,a5}var s5,CE;function dH(){if(CE)return s5;CE=1;var e=lH(),t=cH(),r=t(e);return s5=r,s5}var i5,EE;function uH(){if(EE)return i5;EE=1;var e=im(),t=iH(),r=dH();function a(s,i){return r(t(s,i,e),s+"")}return i5=a,i5}var o5,TE;function zy(){if(TE)return o5;TE=1;var e=Qk(),t=gg(),r=uS(),a=A0();function s(i,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return o5=s,o5}var l5,OE;function fH(){if(OE)return l5;OE=1;var e=gL(),t=aH(),r=uH(),a=zy(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return l5=s,l5}var hH=fH();const mS=Oa(hH);function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}function c4(){return c4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c4.apply(this,arguments)}function pH(e,t){return vH(e)||gH(e,t)||xH(e,t)||mH()}function mH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xH(e,t){if(e){if(typeof e=="string")return PE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PE(e,t)}}function PE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function vH(e){if(Array.isArray(e))return e}function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function c5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(a){yH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yH(e,t,r){return t=bH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bH(e){var t=wH(e,"string");return vx(t)=="symbol"?t:t+""}function wH(e,t){if(vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NH(e){return Array.isArray(e)&&Ui(e[0])&&Ui(e[1])?e.join(" ~ "):e}var jH=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,v=t.label,g=t.labelFormatter,b=t.accessibilityLayer,w=b===void 0?!1:b,j=function(){if(u&&u.length){var O={padding:0,margin:0},R=(m?mS(u,m):u).map(function(z,H){if(z.type==="none")return null;var Q=c5({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),J=z.formatter||f||NH,re=z.value,X=z.name,ee=re,W=X;if(J&&ee!=null&&W!=null){var T=J(re,X,z,H,u);if(Array.isArray(T)){var q=pH(T,2);ee=q[0],W=q[1]}else ee=T}return ut.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Q},Ui(W)?ut.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Ui(W)?ut.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ut.createElement("span",{className:"recharts-tooltip-item-value"},ee),ut.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ut.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},N=c5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=c5({margin:0},d),E=!Wn(v),_=E?v:"",P=ca("recharts-default-tooltip",p),I=ca("recharts-tooltip-label",y);E&&g&&u!==void 0&&u!==null&&(_=g(v,u));var U=w?{role:"status","aria-live":"assertive"}:{};return ut.createElement("div",c4({className:P,style:N},U),ut.createElement("p",{className:I,style:S},ut.isValidElement(_)?_:"".concat(_)),j())};function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function lv(e,t,r){return t=kH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=SH(e,"string");return yx(t)=="symbol"?t:t+""}function SH(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cm="recharts-tooltip-wrapper",_H={visibility:"hidden"};function AH(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return ca(Cm,lv(lv(lv(lv({},"".concat(Cm,"-right"),lr(r)&&t&&lr(t.x)&&r>=t.x),"".concat(Cm,"-left"),lr(r)&&t&&lr(t.x)&&r<t.x),"".concat(Cm,"-bottom"),lr(a)&&t&&lr(t.y)&&a>=t.y),"".concat(Cm,"-top"),lr(a)&&t&&lr(t.y)&&a<t.y))}function DE(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&lr(i[a]))return i[a];var u=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?u:f;if(o[a]){var m=u,p=c[a];return m<p?Math.max(f,c[a]):Math.max(u,c[a])}var y=f+l,v=c[a]+d;return y>v?Math.max(u,c[a]):Math.max(f,c[a])}function CH(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function EH(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=DE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=DE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=CH({translateX:u,translateY:f,useTranslate3d:l})):d=_H,{cssProperties:d,cssClasses:AH({translateX:u,translateY:f,coordinate:r})}}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function LE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function FE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(r),!0).forEach(function(a){u4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,NL(a.key),a)}}function PH(e,t,r){return t&&OH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IH(e,t,r){return t=v1(t),DH(e,wL()?Reflect.construct(t,r||[],v1(e).constructor):t.apply(e,r))}function DH(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LH(e)}function LH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wL=function(){return!!e})()}function v1(e){return v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v1(e)}function FH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d4(e,t)}function d4(e,t){return d4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},d4(e,t)}function u4(e,t,r){return t=NL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NL(e){var t=MH(e,"string");return Ip(t)=="symbol"?t:t+""}function MH(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ip(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ME=1,RH=(function(e){function t(){var r;TH(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=IH(this,t,[].concat(s)),u4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),u4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return FH(t,e),PH(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>ME||Math.abs(a.height-this.state.lastBoundingBox.height)>ME)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,f=s.hasPayload,m=s.isAnimationActive,p=s.offset,y=s.position,v=s.reverseDirection,g=s.useTranslate3d,b=s.viewBox,w=s.wrapperStyle,j=EH({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),N=j.cssClasses,S=j.cssProperties,E=FE(FE({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ut.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(P){a.wrapperNode=P}},d)}}])})(L.PureComponent),BH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},om={isSsr:BH()};function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function BE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(a){xS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,kL(a.key),a)}}function $H(e,t,r){return t&&qH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,r){return t=y1(t),HH(e,jL()?Reflect.construct(t,r||[],y1(e).constructor):t.apply(e,r))}function HH(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WH(e)}function WH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jL=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(e)}function VH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f4(e,t)}function f4(e,t){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},f4(e,t)}function xS(e,t,r){return t=kL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kL(e){var t=GH(e,"string");return Dp(t)=="symbol"?t:t+""}function GH(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KH(e){return e.dataKey}function XH(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):typeof e=="function"?ut.createElement(e,t):ut.createElement(jH,t)}var ju=(function(e){function t(){return UH(this,t),zH(this,t,arguments)}return VH(t,e),$H(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,f=s.filterNull,m=s.isAnimationActive,p=s.offset,y=s.payload,v=s.payloadUniqBy,g=s.position,b=s.reverseDirection,w=s.useTranslate3d,j=s.viewBox,N=s.wrapperStyle,S=y??[];f&&S.length&&(S=pL(y.filter(function(_){return _.value!=null&&(_.hide!==!0||a.props.includeHidden)}),v,KH));var E=S.length>0;return ut.createElement(RH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:u,hasPayload:E,offset:p,position:g,reverseDirection:b,useTranslate3d:w,viewBox:j,wrapperStyle:N},XH(d,BE(BE({},this.props),{},{payload:S})))}}])})(L.PureComponent);xS(ju,"displayName","Tooltip");xS(ju,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!om.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var d5,UE;function YH(){if(UE)return d5;UE=1;var e=Ru(),t=function(){return e.Date.now()};return d5=t,d5}var u5,qE;function QH(){if(qE)return u5;qE=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return u5=t,u5}var f5,$E;function JH(){if($E)return f5;$E=1;var e=QH(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return f5=r,f5}var h5,zE;function SL(){if(zE)return h5;zE=1;var e=JH(),t=A0(),r=nm(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return a;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=i.test(d);return f||o.test(d)?l(d.slice(2),f?2:8):s.test(d)?a:+d}return h5=c,h5}var p5,HE;function ZH(){if(HE)return p5;HE=1;var e=A0(),t=YH(),r=SL(),a="Expected a function",s=Math.max,i=Math.min;function o(l,c,d){var u,f,m,p,y,v,g=0,b=!1,w=!1,j=!0;if(typeof l!="function")throw new TypeError(a);c=r(c)||0,e(d)&&(b=!!d.leading,w="maxWait"in d,m=w?s(r(d.maxWait)||0,c):m,j="trailing"in d?!!d.trailing:j);function N(R){var z=u,H=f;return u=f=void 0,g=R,p=l.apply(H,z),p}function S(R){return g=R,y=setTimeout(P,c),b?N(R):p}function E(R){var z=R-v,H=R-g,Q=c-z;return w?i(Q,m-H):Q}function _(R){var z=R-v,H=R-g;return v===void 0||z>=c||z<0||w&&H>=m}function P(){var R=t();if(_(R))return I(R);y=setTimeout(P,E(R))}function I(R){return y=void 0,j&&u?N(R):(u=f=void 0,p)}function U(){y!==void 0&&clearTimeout(y),g=0,u=v=f=y=void 0}function C(){return y===void 0?p:I(t())}function O(){var R=t(),z=_(R);if(u=arguments,f=this,v=R,z){if(y===void 0)return S(v);if(w)return clearTimeout(y),y=setTimeout(P,c),N(v)}return y===void 0&&(y=setTimeout(P,c)),p}return O.cancel=U,O.flush=C,O}return p5=o,p5}var m5,WE;function eW(){if(WE)return m5;WE=1;var e=ZH(),t=A0(),r="Expected a function";function a(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return m5=a,m5}var tW=eW();const _L=Oa(tW);function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(a){rW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rW(e,t,r){return t=nW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=aW(e,"string");return bx(t)=="symbol"?t:t+""}function aW(e,t){if(bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(bx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sW(e,t){return cW(e)||lW(e,t)||oW(e,t)||iW()}function iW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oW(e,t){if(e){if(typeof e=="string")return GE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GE(e,t)}}function GE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function lW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function cW(e){if(Array.isArray(e))return e}var dW=L.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,v=y===void 0?0:y,g=e.id,b=e.className,w=e.onResize,j=e.style,N=j===void 0?{}:j,S=L.useRef(null),E=L.useRef();E.current=w,L.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var _=L.useState({containerWidth:s.width,containerHeight:s.height}),P=sW(_,2),I=P[0],U=P[1],C=L.useCallback(function(R,z){U(function(H){var Q=Math.round(R),J=Math.round(z);return H.containerWidth===Q&&H.containerHeight===J?H:{containerWidth:Q,containerHeight:J}})},[]);L.useEffect(function(){var R=function(X){var ee,W=X[0].contentRect,T=W.width,q=W.height;C(T,q),(ee=E.current)===null||ee===void 0||ee.call(E,T,q)};v>0&&(R=_L(R,v,{trailing:!0,leading:!1}));var z=new ResizeObserver(R),H=S.current.getBoundingClientRect(),Q=H.width,J=H.height;return C(Q,J),z.observe(S.current),function(){z.disconnect()}},[C,v]);var O=L.useMemo(function(){var R=I.containerWidth,z=I.containerHeight;if(R<0||z<0)return null;yf(nh(o)||nh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),yf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var H=nh(o)?R:o,Q=nh(c)?z:c;r&&r>0&&(H?Q=H/r:Q&&(H=Q*r),m&&Q>m&&(Q=m)),yf(H>0||Q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,Q,o,c,u,f,r);var J=!Array.isArray(p)&&vf(p.type).endsWith("Chart");return ut.Children.map(p,function(re){return ut.isValidElement(re)?L.cloneElement(re,cv({width:H,height:Q},J?{style:cv({height:"100%",width:"100%",maxHeight:Q,maxWidth:H},re.props.style)}:{})):re})},[r,p,c,m,f,u,I,o]);return ut.createElement("div",{id:g?"".concat(g):void 0,className:ca("recharts-responsive-container",b),style:cv(cv({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:m}),ref:S},O)}),AL=function(t){return null};AL.displayName="Cell";function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function h4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(a){uW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uW(e,t,r){return t=fW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fW(e){var t=hW(e,"string");return wx(t)=="symbol"?t:t+""}function hW(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tp={widthCache:{},cacheCount:0},pW=2e3,mW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XE="recharts_measurement_span";function xW(e){var t=h4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var tx=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||om.isSsr)return{width:0,height:0};var a=xW(r),s=JSON.stringify({text:t,copyStyle:a});if(tp.widthCache[s])return tp.widthCache[s];try{var i=document.getElementById(XE);i||(i=document.createElement("span"),i.setAttribute("id",XE),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=h4(h4({},mW),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return tp.widthCache[s]=c,++tp.cacheCount>pW&&(tp.cacheCount=0,tp.widthCache={}),c}catch{return{width:0,height:0}}},gW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function b1(e,t){return wW(e)||bW(e,t)||yW(e,t)||vW()}function vW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yW(e,t){if(e){if(typeof e=="string")return YE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YE(e,t)}}function YE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function wW(e){if(Array.isArray(e))return e}function NW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,kW(a.key),a)}}function jW(e,t,r){return t&&QE(e.prototype,t),r&&QE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kW(e){var t=SW(e,"string");return Nx(t)=="symbol"?t:t+""}function SW(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Nx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_W=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CW=Object.keys(CL),hp="NaN";function EW(e,t){return e*CL[t]}var dv=(function(){function e(t,r){NW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!_W.test(r)&&(this.num=NaN,this.unit=""),CW.includes(r)&&(this.num=EW(t,r),this.unit="px")}return jW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=AW.exec(r))!==null&&a!==void 0?a:[],i=b1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function EL(e){if(e.includes(hp))return hp;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=JE.exec(t))!==null&&r!==void 0?r:[],s=b1(a,4),i=s[1],o=s[2],l=s[3],c=dv.parse(i??""),d=dv.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return hp;t=t.replace(JE,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=ZE.exec(t))!==null&&f!==void 0?f:[],p=b1(m,4),y=p[1],v=p[2],g=p[3],b=dv.parse(y??""),w=dv.parse(g??""),j=v==="+"?b.add(w):b.subtract(w);if(j.isNaN())return hp;t=t.replace(ZE,j.toString())}return t}var eT=/\(([^()]*)\)/;function TW(e){for(var t=e;t.includes("(");){var r=eT.exec(t),a=b1(r,2),s=a[1];t=t.replace(eT,EL(s))}return t}function OW(e){var t=e.replace(/\s+/g,"");return t=TW(t),t=EL(t),t}function PW(e){try{return OW(e)}catch{return hp}}function x5(e){var t=PW(e.slice(5,-1));return t===hp?"":t}var IW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],DW=["dx","dy","angle","className","breakAll"];function p4(){return p4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p4.apply(this,arguments)}function tT(e,t){if(e==null)return{};var r=LW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function rT(e,t){return BW(e)||RW(e,t)||MW(e,t)||FW()}function FW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MW(e,t){if(e){if(typeof e=="string")return nT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nT(e,t)}}function nT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function RW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function BW(e){if(Array.isArray(e))return e}var TL=/[ \f\n\r\t\v\u2028\u2029]+/,OL=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];Wn(r)||(a?i=r.toString().split(""):i=r.toString().split(TL));var o=i.map(function(c){return{word:c,width:tx(c,s).width}}),l=a?0:tx("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},UW=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=lr(o),f=l,m=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(Q,J){var re=J.word,X=J.width,ee=Q[Q.length-1];if(ee&&(s==null||i||ee.width+X+a<Number(s)))ee.words.push(re),ee.width+=X+a;else{var W={words:[re],width:X};Q.push(W)}return Q},[])},p=m(r),y=function(H){return H.reduce(function(Q,J){return Q.width>J.width?Q:J})};if(!u)return p;for(var v="",g=function(H){var Q=f.slice(0,H),J=OL({breakAll:d,style:c,children:Q+v}).wordsWithComputedWidth,re=m(J),X=re.length>o||y(re).width>Number(s);return[X,re]},b=0,w=f.length-1,j=0,N;b<=w&&j<=f.length-1;){var S=Math.floor((b+w)/2),E=S-1,_=g(E),P=rT(_,2),I=P[0],U=P[1],C=g(S),O=rT(C,1),R=O[0];if(!I&&!R&&(b=S+1),I&&R&&(w=S-1),!I&&R){N=U;break}j++}return N||p},aT=function(t){var r=Wn(t)?[]:t.toString().split(TL);return[{words:r}]},qW=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!om.isSsr){var c,d,u=OL({breakAll:o,children:s,style:i});if(u){var f=u.wordsWithComputedWidth,m=u.spaceWidth;c=f,d=m}else return aT(s);return UW({breakAll:o,children:s,maxLines:l,style:i},c,d,r,a)}return aT(s)},sT="#808080",w1=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,v=y===void 0?"end":y,g=t.fill,b=g===void 0?sT:g,w=tT(t,IW),j=L.useMemo(function(){return qW({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),N=w.dx,S=w.dy,E=w.angle,_=w.className,P=w.breakAll,I=tT(w,DW);if(!Ui(a)||!Ui(i))return null;var U=a+(lr(N)?N:0),C=i+(lr(S)?S:0),O;switch(v){case"start":O=x5("calc(".concat(d,")"));break;case"middle":O=x5("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:O=x5("calc(".concat(j.length-1," * -").concat(l,")"));break}var R=[];if(f){var z=j[0].width,H=w.width;R.push("scale(".concat((lr(H)?H/z:1)/z,")"))}return E&&R.push("rotate(".concat(E,", ").concat(U,", ").concat(C,")")),R.length&&(I.transform=R.join(" ")),ut.createElement("text",p4({},Un(I,!0),{x:U,y:C,className:ca("recharts-text",_),textAnchor:p,fill:b.includes("url")?sT:b}),j.map(function(Q,J){var re=Q.words.join(P?"":" ");return ut.createElement("tspan",{x:U,dy:J===0?O:l,key:"".concat(re,"-").concat(J)},re)}))};function x0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $W(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gS(e){let t,r,a;e.length!==2?(t=x0,r=(l,c)=>x0(e(l),c),a=(l,c)=>e(l)-c):(t=e===x0||e===$W?e:zW,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=s(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function zW(){return 0}function PL(e){return e===null?NaN:+e}function*HW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const WW=gS(x0),vg=WW.right;gS(PL).center;class iT extends Map{constructor(t,r=KW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(oT(this,t))}has(t){return super.has(oT(this,t))}set(t,r){return super.set(VW(this,t),r)}delete(t){return super.delete(GW(this,t))}}function oT({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function VW({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function GW({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function KW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XW(e=x0){if(e===x0)return IL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function IL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YW=Math.sqrt(50),QW=Math.sqrt(10),JW=Math.sqrt(2);function N1(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=YW?10:i>=QW?5:i>=JW?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?N1(e,t,r*2):[l,c,d]}function m4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?N1(t,e,r):N1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function x4(e,t,r){return t=+t,e=+e,r=+r,N1(e,t,r)[2]}function g4(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?x4(t,e,r):x4(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function lT(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function cT(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function DL(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?IL:XW(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*f/c+m)),y=Math.min(a,Math.floor(t+(c-d)*f/c+m));DL(e,t,p,y,s)}const i=e[t];let o=r,l=a;for(Em(e,r,t),s(e[a],i)>0&&Em(e,r,a);o<l;){for(Em(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Em(e,r,l):(++l,Em(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Em(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function ZW(e,t,r){if(e=Float64Array.from(HW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return cT(e);if(t>=1)return lT(e);var a,s=(a-1)*t,i=Math.floor(s),o=lT(DL(e,i).subarray(0,i+1)),l=cT(e.subarray(i+1));return o+(l-o)*(s-i)}}function eV(e,t,r=PL){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function tV(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function od(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Of(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const v4=Symbol("implicit");function vS(){var e=new iT,t=[],r=[],a=v4;function s(i){let o=e.get(i);if(o===void 0){if(a!==v4)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new iT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return vS(t,r).unknown(a)},od.apply(s,arguments),s}function jx(){var e=vS().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var m=t().length,p=s<a,y=p?s:a,v=p?a:s;i=(v-y)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),y+=(v-y-i*(m-c))*u,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var g=tV(m).map(function(b){return y+i*b});return r(p?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([a,s]=m,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(m){return[a,s]=m,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,f()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),f()):u},e.copy=function(){return jx(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},od.apply(f(),arguments)}function LL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return LL(t())},e}function rx(){return LL(jx.apply(null,arguments).paddingInner(1))}function yS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function FL(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function yg(){}var kx=.7,j1=1/kx,bp="\\s*([+-]?\\d+)\\s*",Sx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rV=/^#([0-9a-f]{3,8})$/,nV=new RegExp(`^rgb\\(${bp},${bp},${bp}\\)$`),aV=new RegExp(`^rgb\\(${Pu},${Pu},${Pu}\\)$`),sV=new RegExp(`^rgba\\(${bp},${bp},${bp},${Sx}\\)$`),iV=new RegExp(`^rgba\\(${Pu},${Pu},${Pu},${Sx}\\)$`),oV=new RegExp(`^hsl\\(${Sx},${Pu},${Pu}\\)$`),lV=new RegExp(`^hsla\\(${Sx},${Pu},${Pu},${Sx}\\)$`),dT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yS(yg,_x,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uT,formatHex:uT,formatHex8:cV,formatHsl:dV,formatRgb:fT,toString:fT});function uT(){return this.rgb().formatHex()}function cV(){return this.rgb().formatHex8()}function dV(){return ML(this).formatHsl()}function fT(){return this.rgb().formatRgb()}function _x(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=rV.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?hT(t):r===3?new Kl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?uv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?uv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nV.exec(e))?new Kl(t[1],t[2],t[3],1):(t=aV.exec(e))?new Kl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sV.exec(e))?uv(t[1],t[2],t[3],t[4]):(t=iV.exec(e))?uv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oV.exec(e))?xT(t[1],t[2]/100,t[3]/100,1):(t=lV.exec(e))?xT(t[1],t[2]/100,t[3]/100,t[4]):dT.hasOwnProperty(e)?hT(dT[e]):e==="transparent"?new Kl(NaN,NaN,NaN,0):null}function hT(e){return new Kl(e>>16&255,e>>8&255,e&255,1)}function uv(e,t,r,a){return a<=0&&(e=t=r=NaN),new Kl(e,t,r,a)}function uV(e){return e instanceof yg||(e=_x(e)),e?(e=e.rgb(),new Kl(e.r,e.g,e.b,e.opacity)):new Kl}function y4(e,t,r,a){return arguments.length===1?uV(e):new Kl(e,t,r,a??1)}function Kl(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}yS(Kl,y4,FL(yg,{brighter(e){return e=e==null?j1:Math.pow(j1,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kx:Math.pow(kx,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kl(fh(this.r),fh(this.g),fh(this.b),k1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pT,formatHex:pT,formatHex8:fV,formatRgb:mT,toString:mT}));function pT(){return`#${ah(this.r)}${ah(this.g)}${ah(this.b)}`}function fV(){return`#${ah(this.r)}${ah(this.g)}${ah(this.b)}${ah((isNaN(this.opacity)?1:this.opacity)*255)}`}function mT(){const e=k1(this.opacity);return`${e===1?"rgb(":"rgba("}${fh(this.r)}, ${fh(this.g)}, ${fh(this.b)}${e===1?")":`, ${e})`}`}function k1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ah(e){return e=fh(e),(e<16?"0":"")+e.toString(16)}function xT(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qd(e,t,r,a)}function ML(e){if(e instanceof qd)return new qd(e.h,e.s,e.l,e.opacity);if(e instanceof yg||(e=_x(e)),!e)return new qd;if(e instanceof qd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new qd(o,l,c,e.opacity)}function hV(e,t,r,a){return arguments.length===1?ML(e):new qd(e,t,r,a??1)}function qd(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}yS(qd,hV,FL(yg,{brighter(e){return e=e==null?j1:Math.pow(j1,e),new qd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kx:Math.pow(kx,e),new qd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Kl(g5(e>=240?e-240:e+120,s,a),g5(e,s,a),g5(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new qd(gT(this.h),fv(this.s),fv(this.l),k1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=k1(this.opacity);return`${e===1?"hsl(":"hsla("}${gT(this.h)}, ${fv(this.s)*100}%, ${fv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gT(e){return e=(e||0)%360,e<0?e+360:e}function fv(e){return Math.max(0,Math.min(1,e||0))}function g5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const bS=e=>()=>e;function pV(e,t){return function(r){return e+r*t}}function mV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function xV(e){return(e=+e)==1?RL:function(t,r){return r-t?mV(t,r,e):bS(isNaN(t)?r:t)}}function RL(e,t){var r=t-e;return r?pV(e,r):bS(isNaN(e)?t:e)}const vT=(function e(t){var r=xV(t);function a(s,i){var o=r((s=y4(s)).r,(i=y4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=RL(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a})(1);function gV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function vV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yV(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=lm(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function bV(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function S1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function wV(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=lm(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var b4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v5=new RegExp(b4.source,"g");function NV(e){return function(){return e}}function jV(e){return function(t){return e(t)+""}}function kV(e,t){var r=b4.lastIndex=v5.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=b4.exec(e))&&(s=v5.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:S1(a,s)})),r=v5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jV(c[0].x):NV(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function lm(e,t){var r=typeof t,a;return t==null||r==="boolean"?bS(t):(r==="number"?S1:r==="string"?(a=_x(t))?(t=a,vT):kV:t instanceof _x?vT:t instanceof Date?bV:vV(t)?gV:Array.isArray(t)?yV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wV:S1)(e,t)}function wS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function SV(e,t){t===void 0&&(t=e,e=lm);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function _V(e){return function(){return e}}function _1(e){return+e}var yT=[0,1];function jl(e){return e}function w4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:_V(isNaN(t)?NaN:.5)}function AV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function CV(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=w4(s,a),i=r(o,i)):(a=w4(a,s),i=r(i,o)),function(l){return i(a(l))}}function EV(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=w4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=vg(e,l,1,a)-1;return i[c](s[c](l))}}function bg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hy(){var e=yT,t=yT,r=lm,a,s,i,o=jl,l,c,d;function u(){var m=Math.min(e.length,t.length);return o!==jl&&(o=AV(e[0],e[m-1])),l=m>2?EV:CV,c=d=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(a),t,r)))(a(o(m)))}return f.invert=function(m){return o(s((d||(d=l(t,e.map(a),S1)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,_1),u()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=wS,u()},f.clamp=function(m){return arguments.length?(o=m?!0:jl,u()):o!==jl},f.interpolate=function(m){return arguments.length?(r=m,u()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return a=m,s=p,u()}}function NS(){return Hy()(jl,jl)}function TV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function A1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Lp(e){return e=A1(Math.abs(e)),e?e[1]:NaN}function OV(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function PV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var IV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ax(e){if(!(t=IV.exec(e)))throw new Error("invalid format: "+e);var t;return new jS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ax.prototype=jS.prototype;function jS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DV(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var C1;function LV(e,t){var r=A1(e,t);if(!r)return C1=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(C1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+A1(e,Math.max(0,t+i-1))[0]}function bT(e,t){var r=A1(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const wT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bT(e*100,t),r:bT,s:LV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function NT(e){return e}var jT=Array.prototype.map,kT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FV(e){var t=e.grouping===void 0||e.thousands===void 0?NT:OV(jT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?NT:PV(jT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f,m){f=Ax(f);var p=f.fill,y=f.align,v=f.sign,g=f.symbol,b=f.zero,w=f.width,j=f.comma,N=f.precision,S=f.trim,E=f.type;E==="n"?(j=!0,E="g"):wT[E]||(N===void 0&&(N=12),S=!0,E="g"),(b||p==="0"&&y==="=")&&(b=!0,p="0",y="=");var _=(m&&m.prefix!==void 0?m.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),P=(g==="$"?a:/[%p]/.test(E)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),I=wT[E],U=/[defgprs%]/.test(E);N=N===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function C(O){var R=_,z=P,H,Q,J;if(E==="c")z=I(O)+z,O="";else{O=+O;var re=O<0||1/O<0;if(O=isNaN(O)?c:I(Math.abs(O),N),S&&(O=DV(O)),re&&+O==0&&v!=="+"&&(re=!1),R=(re?v==="("?v:l:v==="-"||v==="("?"":v)+R,z=(E==="s"&&!isNaN(O)&&C1!==void 0?kT[8+C1/3]:"")+z+(re&&v==="("?")":""),U){for(H=-1,Q=O.length;++H<Q;)if(J=O.charCodeAt(H),48>J||J>57){z=(J===46?s+O.slice(H+1):O.slice(H))+z,O=O.slice(0,H);break}}}j&&!b&&(O=t(O,1/0));var X=R.length+O.length+z.length,ee=X<w?new Array(w-X+1).join(p):"";switch(j&&b&&(O=t(ee+O,ee.length?w-z.length:1/0),ee=""),y){case"<":O=R+O+z+ee;break;case"=":O=R+ee+O+z;break;case"^":O=ee.slice(0,X=ee.length>>1)+R+O+z+ee.slice(X);break;default:O=ee+R+O+z;break}return i(O)}return C.toString=function(){return f+""},C}function u(f,m){var p=Math.max(-8,Math.min(8,Math.floor(Lp(m)/3)))*3,y=Math.pow(10,-p),v=d((f=Ax(f),f.type="f",f),{suffix:kT[8+p/3]});return function(g){return v(y*g)}}return{format:d,formatPrefix:u}}var hv,kS,BL;MV({thousands:",",grouping:[3],currency:["$",""]});function MV(e){return hv=FV(e),kS=hv.format,BL=hv.formatPrefix,hv}function RV(e){return Math.max(0,-Lp(Math.abs(e)))}function BV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lp(t)/3)))*3-Lp(Math.abs(e)))}function UV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lp(t)-Lp(e))+1}function UL(e,t,r,a){var s=g4(e,t,r),i;switch(a=Ax(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=BV(s,o))&&(a.precision=i),BL(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=UV(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=RV(s))&&(a.precision=i-(a.type==="%")*2);break}}return kS(a)}function E0(e){var t=e.domain;return e.ticks=function(r){var a=t();return m4(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return UL(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=x4(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function E1(){var e=NS();return e.copy=function(){return bg(e,E1())},od.apply(e,arguments),E0(e)}function qL(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,_1),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return qL(e).unknown(t)},e=arguments.length?Array.from(e,_1):[0,1],E0(r)}function $L(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function ST(e){return Math.log(e)}function _T(e){return Math.exp(e)}function qV(e){return-Math.log(-e)}function $V(e){return-Math.exp(-e)}function zV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HV(e){return e===10?zV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function AT(e){return(t,r)=>-e(-t,r)}function SS(e){const t=e(ST,_T),r=t.domain;let a=10,s,i;function o(){return s=WV(a),i=HV(a),r()[0]<0?(s=AT(s),i=AT(i),e(qV,$V)):e(ST,_T),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let m=s(d),p=s(u),y,v;const g=l==null?10:+l;let b=[];if(!(a%1)&&p-m<g){if(m=Math.floor(m),p=Math.ceil(p),d>0){for(;m<=p;++m)for(y=1;y<a;++y)if(v=m<0?y/i(-m):y*i(m),!(v<d)){if(v>u)break;b.push(v)}}else for(;m<=p;++m)for(y=a-1;y>=1;--y)if(v=m>0?y/i(-m):y*i(m),!(v<d)){if(v>u)break;b.push(v)}b.length*2<g&&(b=m4(d,u,g))}else b=m4(m,p,Math.min(p-m,g)).map(i);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ax(c)).precision==null&&(c.trim=!0),c=kS(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let f=u/i(Math.round(s(u)));return f*a<a-.5&&(f*=a),f<=d?c(u):""}},t.nice=()=>r($L(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function zL(){const e=SS(Hy()).domain([1,10]);return e.copy=()=>bg(e,zL()).base(e.base()),od.apply(e,arguments),e}function CT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ET(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _S(e){var t=1,r=e(CT(t),ET(t));return r.constant=function(a){return arguments.length?e(CT(t=+a),ET(t)):t},E0(r)}function HL(){var e=_S(Hy());return e.copy=function(){return bg(e,HL()).constant(e.constant())},od.apply(e,arguments)}function TT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GV(e){return e<0?-e*e:e*e}function AS(e){var t=e(jl,jl),r=1;function a(){return r===1?e(jl,jl):r===.5?e(VV,GV):e(TT(r),TT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},E0(t)}function CS(){var e=AS(Hy());return e.copy=function(){return bg(e,CS()).exponent(e.exponent())},od.apply(e,arguments),e}function KV(){return CS.apply(null,arguments).exponent(.5)}function OT(e){return Math.sign(e)*e*e}function XV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function WL(){var e=NS(),t=[0,1],r=!1,a;function s(i){var o=XV(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(OT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,_1)).map(OT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return WL(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},od.apply(s,arguments),E0(s)}function VL(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=eV(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[vg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(x0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return VL().domain(e).range(t).unknown(a)},od.apply(i,arguments)}function GL(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[vg(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return GL().domain([e,t]).range(s).unknown(i)},od.apply(E0(o),arguments)}function KL(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[vg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return KL().domain(e).range(t).unknown(r)},od.apply(s,arguments)}const y5=new Date,b5=new Date;function $i(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>$i(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(y5.setTime(+i),b5.setTime(+o),e(y5),e(b5),Math.floor(r(y5,b5))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const T1=$i(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);T1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$i(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):T1);T1.range;const df=1e3,Zc=df*60,uf=Zc*60,kf=uf*24,ES=kf*7,PT=kf*30,w5=kf*365,sh=$i(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*df)},(e,t)=>(t-e)/df,e=>e.getUTCSeconds());sh.range;const TS=$i(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*df)},(e,t)=>{e.setTime(+e+t*Zc)},(e,t)=>(t-e)/Zc,e=>e.getMinutes());TS.range;const OS=$i(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zc)},(e,t)=>(t-e)/Zc,e=>e.getUTCMinutes());OS.range;const PS=$i(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*df-e.getMinutes()*Zc)},(e,t)=>{e.setTime(+e+t*uf)},(e,t)=>(t-e)/uf,e=>e.getHours());PS.range;const IS=$i(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*uf)},(e,t)=>(t-e)/uf,e=>e.getUTCHours());IS.range;const wg=$i(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zc)/kf,e=>e.getDate()-1);wg.range;const Wy=$i(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kf,e=>e.getUTCDate()-1);Wy.range;const XL=$i(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kf,e=>Math.floor(e/kf));XL.range;function Lh(e){return $i(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Zc)/ES)}const Vy=Lh(0),O1=Lh(1),YV=Lh(2),QV=Lh(3),Fp=Lh(4),JV=Lh(5),ZV=Lh(6);Vy.range;O1.range;YV.range;QV.range;Fp.range;JV.range;ZV.range;function Fh(e){return $i(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ES)}const Gy=Fh(0),P1=Fh(1),eG=Fh(2),tG=Fh(3),Mp=Fh(4),rG=Fh(5),nG=Fh(6);Gy.range;P1.range;eG.range;tG.range;Mp.range;rG.range;nG.range;const DS=$i(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());DS.range;const LS=$i(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LS.range;const Sf=$i(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Sf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$i(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Sf.range;const _f=$i(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_f.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$i(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_f.range;function YL(e,t,r,a,s,i){const o=[[sh,1,df],[sh,5,5*df],[sh,15,15*df],[sh,30,30*df],[i,1,Zc],[i,5,5*Zc],[i,15,15*Zc],[i,30,30*Zc],[s,1,uf],[s,3,3*uf],[s,6,6*uf],[s,12,12*uf],[a,1,kf],[a,2,2*kf],[r,1,ES],[t,1,PT],[t,3,3*PT],[e,1,w5]];function l(d,u,f){const m=u<d;m&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:c(d,u,f),y=p?p.range(d,+u+1):[];return m?y.reverse():y}function c(d,u,f){const m=Math.abs(u-d)/f,p=gS(([,,g])=>g).right(o,m);if(p===o.length)return e.every(g4(d/w5,u/w5,f));if(p===0)return T1.every(Math.max(g4(d,u,f),1));const[y,v]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return y.every(v)}return[l,c]}const[aG,sG]=YL(_f,LS,Gy,XL,IS,OS),[iG,oG]=YL(Sf,DS,Vy,wg,PS,TS);function N5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function j5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Tm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lG(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Om(s),u=Pm(s),f=Om(i),m=Pm(i),p=Om(o),y=Pm(o),v=Om(l),g=Pm(l),b=Om(c),w=Pm(c),j={a:J,A:re,b:X,B:ee,c:null,d:RT,e:RT,f:OG,g:qG,G:zG,H:CG,I:EG,j:TG,L:QL,m:PG,M:IG,p:W,q:T,Q:qT,s:$T,S:DG,u:LG,U:FG,V:MG,w:RG,W:BG,x:null,X:null,y:UG,Y:$G,Z:HG,"%":UT},N={a:q,A:V,b:B,B:K,c:null,d:BT,e:BT,f:KG,g:aK,G:iK,H:WG,I:VG,j:GG,L:ZL,m:XG,M:YG,p:oe,q:me,Q:qT,s:$T,S:QG,u:JG,U:ZG,V:eK,w:tK,W:rK,x:null,X:null,y:nK,Y:sK,Z:oK,"%":UT},S={a:U,A:C,b:O,B:R,c:z,d:FT,e:FT,f:kG,g:LT,G:DT,H:MT,I:MT,j:bG,L:jG,m:yG,M:wG,p:I,q:vG,Q:_G,s:AG,S:NG,u:hG,U:pG,V:mG,w:fG,W:xG,x:H,X:Q,y:LT,Y:DT,Z:gG,"%":SG};j.x=E(r,j),j.X=E(a,j),j.c=E(t,j),N.x=E(r,N),N.X=E(a,N),N.c=E(t,N);function E(se,de){return function(Re){var he=[],Ue=-1,Oe=0,le=se.length,te,Se,we;for(Re instanceof Date||(Re=new Date(+Re));++Ue<le;)se.charCodeAt(Ue)===37&&(he.push(se.slice(Oe,Ue)),(Se=IT[te=se.charAt(++Ue)])!=null?te=se.charAt(++Ue):Se=te==="e"?" ":"0",(we=de[te])&&(te=we(Re,Se)),he.push(te),Oe=Ue+1);return he.push(se.slice(Oe,Ue)),he.join("")}}function _(se,de){return function(Re){var he=Tm(1900,void 0,1),Ue=P(he,se,Re+="",0),Oe,le;if(Ue!=Re.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(de&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Oe=j5(Tm(he.y,0,1)),le=Oe.getUTCDay(),Oe=le>4||le===0?P1.ceil(Oe):P1(Oe),Oe=Wy.offset(Oe,(he.V-1)*7),he.y=Oe.getUTCFullYear(),he.m=Oe.getUTCMonth(),he.d=Oe.getUTCDate()+(he.w+6)%7):(Oe=N5(Tm(he.y,0,1)),le=Oe.getDay(),Oe=le>4||le===0?O1.ceil(Oe):O1(Oe),Oe=wg.offset(Oe,(he.V-1)*7),he.y=Oe.getFullYear(),he.m=Oe.getMonth(),he.d=Oe.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),le="Z"in he?j5(Tm(he.y,0,1)).getUTCDay():N5(Tm(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(le+5)%7:he.w+he.U*7-(le+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,j5(he)):N5(he)}}function P(se,de,Re,he){for(var Ue=0,Oe=de.length,le=Re.length,te,Se;Ue<Oe;){if(he>=le)return-1;if(te=de.charCodeAt(Ue++),te===37){if(te=de.charAt(Ue++),Se=S[te in IT?de.charAt(Ue++):te],!Se||(he=Se(se,Re,he))<0)return-1}else if(te!=Re.charCodeAt(he++))return-1}return he}function I(se,de,Re){var he=d.exec(de.slice(Re));return he?(se.p=u.get(he[0].toLowerCase()),Re+he[0].length):-1}function U(se,de,Re){var he=p.exec(de.slice(Re));return he?(se.w=y.get(he[0].toLowerCase()),Re+he[0].length):-1}function C(se,de,Re){var he=f.exec(de.slice(Re));return he?(se.w=m.get(he[0].toLowerCase()),Re+he[0].length):-1}function O(se,de,Re){var he=b.exec(de.slice(Re));return he?(se.m=w.get(he[0].toLowerCase()),Re+he[0].length):-1}function R(se,de,Re){var he=v.exec(de.slice(Re));return he?(se.m=g.get(he[0].toLowerCase()),Re+he[0].length):-1}function z(se,de,Re){return P(se,t,de,Re)}function H(se,de,Re){return P(se,r,de,Re)}function Q(se,de,Re){return P(se,a,de,Re)}function J(se){return o[se.getDay()]}function re(se){return i[se.getDay()]}function X(se){return c[se.getMonth()]}function ee(se){return l[se.getMonth()]}function W(se){return s[+(se.getHours()>=12)]}function T(se){return 1+~~(se.getMonth()/3)}function q(se){return o[se.getUTCDay()]}function V(se){return i[se.getUTCDay()]}function B(se){return c[se.getUTCMonth()]}function K(se){return l[se.getUTCMonth()]}function oe(se){return s[+(se.getUTCHours()>=12)]}function me(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var de=E(se+="",j);return de.toString=function(){return se},de},parse:function(se){var de=_(se+="",!1);return de.toString=function(){return se},de},utcFormat:function(se){var de=E(se+="",N);return de.toString=function(){return se},de},utcParse:function(se){var de=_(se+="",!0);return de.toString=function(){return se},de}}}var IT={"-":"",_:" ",0:"0"},uo=/^\s*\d+/,cG=/^%/,dG=/[\\^$*+?|[\]().{}]/g;function xa(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function uG(e){return e.replace(dG,"\\$&")}function Om(e){return new RegExp("^(?:"+e.map(uG).join("|")+")","i")}function Pm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function fG(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function hG(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function pG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function mG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function xG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function DT(e,t,r){var a=uo.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function LT(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function gG(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function vG(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function yG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function FT(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function bG(e,t,r){var a=uo.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function MT(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function wG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function NG(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function jG(e,t,r){var a=uo.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function kG(e,t,r){var a=uo.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function SG(e,t,r){var a=cG.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function _G(e,t,r){var a=uo.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function AG(e,t,r){var a=uo.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function RT(e,t){return xa(e.getDate(),t,2)}function CG(e,t){return xa(e.getHours(),t,2)}function EG(e,t){return xa(e.getHours()%12||12,t,2)}function TG(e,t){return xa(1+wg.count(Sf(e),e),t,3)}function QL(e,t){return xa(e.getMilliseconds(),t,3)}function OG(e,t){return QL(e,t)+"000"}function PG(e,t){return xa(e.getMonth()+1,t,2)}function IG(e,t){return xa(e.getMinutes(),t,2)}function DG(e,t){return xa(e.getSeconds(),t,2)}function LG(e){var t=e.getDay();return t===0?7:t}function FG(e,t){return xa(Vy.count(Sf(e)-1,e),t,2)}function JL(e){var t=e.getDay();return t>=4||t===0?Fp(e):Fp.ceil(e)}function MG(e,t){return e=JL(e),xa(Fp.count(Sf(e),e)+(Sf(e).getDay()===4),t,2)}function RG(e){return e.getDay()}function BG(e,t){return xa(O1.count(Sf(e)-1,e),t,2)}function UG(e,t){return xa(e.getFullYear()%100,t,2)}function qG(e,t){return e=JL(e),xa(e.getFullYear()%100,t,2)}function $G(e,t){return xa(e.getFullYear()%1e4,t,4)}function zG(e,t){var r=e.getDay();return e=r>=4||r===0?Fp(e):Fp.ceil(e),xa(e.getFullYear()%1e4,t,4)}function HG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xa(t/60|0,"0",2)+xa(t%60,"0",2)}function BT(e,t){return xa(e.getUTCDate(),t,2)}function WG(e,t){return xa(e.getUTCHours(),t,2)}function VG(e,t){return xa(e.getUTCHours()%12||12,t,2)}function GG(e,t){return xa(1+Wy.count(_f(e),e),t,3)}function ZL(e,t){return xa(e.getUTCMilliseconds(),t,3)}function KG(e,t){return ZL(e,t)+"000"}function XG(e,t){return xa(e.getUTCMonth()+1,t,2)}function YG(e,t){return xa(e.getUTCMinutes(),t,2)}function QG(e,t){return xa(e.getUTCSeconds(),t,2)}function JG(e){var t=e.getUTCDay();return t===0?7:t}function ZG(e,t){return xa(Gy.count(_f(e)-1,e),t,2)}function eF(e){var t=e.getUTCDay();return t>=4||t===0?Mp(e):Mp.ceil(e)}function eK(e,t){return e=eF(e),xa(Mp.count(_f(e),e)+(_f(e).getUTCDay()===4),t,2)}function tK(e){return e.getUTCDay()}function rK(e,t){return xa(P1.count(_f(e)-1,e),t,2)}function nK(e,t){return xa(e.getUTCFullYear()%100,t,2)}function aK(e,t){return e=eF(e),xa(e.getUTCFullYear()%100,t,2)}function sK(e,t){return xa(e.getUTCFullYear()%1e4,t,4)}function iK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Mp(e):Mp.ceil(e),xa(e.getUTCFullYear()%1e4,t,4)}function oK(){return"+0000"}function UT(){return"%"}function qT(e){return+e}function $T(e){return Math.floor(+e/1e3)}var rp,tF,rF;lK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lK(e){return rp=lG(e),tF=rp.format,rp.parse,rF=rp.utcFormat,rp.utcParse,rp}function cK(e){return new Date(e)}function dK(e){return e instanceof Date?+e:+new Date(+e)}function FS(e,t,r,a,s,i,o,l,c,d){var u=NS(),f=u.invert,m=u.domain,p=d(".%L"),y=d(":%S"),v=d("%I:%M"),g=d("%I %p"),b=d("%a %d"),w=d("%b %d"),j=d("%B"),N=d("%Y");function S(E){return(c(E)<E?p:l(E)<E?y:o(E)<E?v:i(E)<E?g:a(E)<E?s(E)<E?b:w:r(E)<E?j:N)(E)}return u.invert=function(E){return new Date(f(E))},u.domain=function(E){return arguments.length?m(Array.from(E,dK)):m().map(cK)},u.ticks=function(E){var _=m();return e(_[0],_[_.length-1],E??10)},u.tickFormat=function(E,_){return _==null?S:d(_)},u.nice=function(E){var _=m();return(!E||typeof E.range!="function")&&(E=t(_[0],_[_.length-1],E??10)),E?m($L(_,E)):u},u.copy=function(){return bg(u,FS(e,t,r,a,s,i,o,l,c,d))},u}function uK(){return od.apply(FS(iG,oG,Sf,DS,Vy,wg,PS,TS,sh,tF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fK(){return od.apply(FS(aG,sG,_f,LS,Gy,Wy,IS,OS,sh,rF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ky(){var e=0,t=1,r,a,s,i,o=jl,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(m){var p,y;return arguments.length?([p,y]=m,o=f(p,y),d):[o(0),o(1)]}}return d.range=u(lm),d.rangeRound=u(wS),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),d}}function T0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nF(){var e=E0(Ky()(jl));return e.copy=function(){return T0(e,nF())},Of.apply(e,arguments)}function aF(){var e=SS(Ky()).domain([1,10]);return e.copy=function(){return T0(e,aF()).base(e.base())},Of.apply(e,arguments)}function sF(){var e=_S(Ky());return e.copy=function(){return T0(e,sF()).constant(e.constant())},Of.apply(e,arguments)}function MS(){var e=AS(Ky());return e.copy=function(){return T0(e,MS()).exponent(e.exponent())},Of.apply(e,arguments)}function hK(){return MS.apply(null,arguments).exponent(.5)}function iF(){var e=[],t=jl;function r(a){if(a!=null&&!isNaN(a=+a))return t((vg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(x0),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>ZW(e,i/a))},r.copy=function(){return iF(t).domain(e)},Of.apply(r,arguments)}function Xy(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=jl,u,f=!1,m;function p(v){return isNaN(v=+v)?m:(v=.5+((v=+u(v))-i)*(a*v<a*i?l:c),d(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(d=v,p):d};function y(v){return function(g){var b,w,j;return arguments.length?([b,w,j]=g,d=SV(v,[b,w,j]),p):[d(0),d(.5),d(1)]}}return p.range=y(lm),p.rangeRound=y(wS),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return u=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p}}function oF(){var e=E0(Xy()(jl));return e.copy=function(){return T0(e,oF())},Of.apply(e,arguments)}function lF(){var e=SS(Xy()).domain([.1,1,10]);return e.copy=function(){return T0(e,lF()).base(e.base())},Of.apply(e,arguments)}function cF(){var e=_S(Xy());return e.copy=function(){return T0(e,cF()).constant(e.constant())},Of.apply(e,arguments)}function RS(){var e=AS(Xy());return e.copy=function(){return T0(e,RS()).exponent(e.exponent())},Of.apply(e,arguments)}function pK(){return RS.apply(null,arguments).exponent(.5)}const zT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jx,scaleDiverging:oF,scaleDivergingLog:lF,scaleDivergingPow:RS,scaleDivergingSqrt:pK,scaleDivergingSymlog:cF,scaleIdentity:qL,scaleImplicit:v4,scaleLinear:E1,scaleLog:zL,scaleOrdinal:vS,scalePoint:rx,scalePow:CS,scaleQuantile:VL,scaleQuantize:GL,scaleRadial:WL,scaleSequential:nF,scaleSequentialLog:aF,scaleSequentialPow:MS,scaleSequentialQuantile:iF,scaleSequentialSqrt:hK,scaleSequentialSymlog:sF,scaleSqrt:KV,scaleSymlog:HL,scaleThreshold:KL,scaleTime:uK,scaleUtc:fK,tickFormat:UL},Symbol.toStringTag,{value:"Module"}));var k5,HT;function dF(){if(HT)return k5;HT=1;var e=nm();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a(l);if(c!=null&&(d===void 0?c===c&&!e(c):s(c,d)))var d=c,u=l}return u}return k5=t,k5}var S5,WT;function mK(){if(WT)return S5;WT=1;function e(t,r){return t>r}return S5=e,S5}var _5,VT;function xK(){if(VT)return _5;VT=1;var e=dF(),t=mK(),r=im();function a(s){return s&&s.length?e(s,r,t):void 0}return _5=a,_5}var gK=xK();const l0=Oa(gK);var A5,GT;function vK(){if(GT)return A5;GT=1;function e(t,r){return t<r}return A5=e,A5}var C5,KT;function yK(){if(KT)return C5;KT=1;var e=dF(),t=vK(),r=im();function a(s){return s&&s.length?e(s,r,t):void 0}return C5=a,C5}var bK=yK();const Yy=Oa(bK);var E5,XT;function wK(){if(XT)return E5;XT=1;var e=eS(),t=C0(),r=yL(),a=Jl();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return E5=s,E5}var T5,YT;function NK(){if(YT)return T5;YT=1;var e=gL(),t=wK();function r(a,s){return e(t(a,s),1)}return T5=r,T5}var jK=NK();const kK=Oa(jK);var O5,QT;function uF(){if(QT)return O5;QT=1;var e=hS();function t(r,a){return e(r,a)}return O5=t,O5}var SK=uF();const Cx=Oa(SK);var cm=1e9,_K={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},US,_s=!0,nd="[DecimalError] ",hh=nd+"Invalid argument: ",BS=nd+"Exponent out of range: ",dm=Math.floor,Z0=Math.pow,AK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gc,ao=1e7,ls=7,fF=9007199254740991,I1=dm(fF/ls),_r={};_r.absoluteValue=_r.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_r.comparedTo=_r.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};_r.decimalPlaces=_r.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ls;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};_r.dividedBy=_r.div=function(e){return bf(this,new this.constructor(e))};_r.dividedToIntegerBy=_r.idiv=function(e){var t=this,r=t.constructor;return Ya(bf(t,new r(e),0,1),r.precision)};_r.equals=_r.eq=function(e){return!this.cmp(e)};_r.exponent=function(){return ki(this)};_r.greaterThan=_r.gt=function(e){return this.cmp(e)>0};_r.greaterThanOrEqualTo=_r.gte=function(e){return this.cmp(e)>=0};_r.isInteger=_r.isint=function(){return this.e>this.d.length-2};_r.isNegative=_r.isneg=function(){return this.s<0};_r.isPositive=_r.ispos=function(){return this.s>0};_r.isZero=function(){return this.s===0};_r.lessThan=_r.lt=function(e){return this.cmp(e)<0};_r.lessThanOrEqualTo=_r.lte=function(e){return this.cmp(e)<1};_r.logarithm=_r.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(gc))throw Error(nd+"NaN");if(r.s<1)throw Error(nd+(r.s?"NaN":"-Infinity"));return r.eq(gc)?new a(0):(_s=!1,t=bf(Ex(r,i),Ex(e,i),i),_s=!0,Ya(t,s))};_r.minus=_r.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mF(t,e):hF(t,(e.s=-e.s,e))};_r.modulo=_r.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(nd+"NaN");return r.s?(_s=!1,t=bf(r,e,0,1).times(e),_s=!0,r.minus(t)):Ya(new a(r),s)};_r.naturalExponential=_r.exp=function(){return pF(this)};_r.naturalLogarithm=_r.ln=function(){return Ex(this)};_r.negated=_r.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_r.plus=_r.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hF(t,e):mF(t,(e.s=-e.s,e))};_r.precision=_r.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hh+e);if(t=ki(s)+1,a=s.d.length-1,r=a*ls+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};_r.squareRoot=_r.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(nd+"NaN")}for(e=ki(l),_s=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Su(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=dm((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(bf(l,i,o+2)).times(.5),Su(i.d).slice(0,o)===(t=Su(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Ya(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return _s=!0,Ya(a,r)};_r.times=_r.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,f=u.constructor,m=u.d,p=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=m.length,d=p.length,c<d&&(i=m,m=p,p=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+p[a]*m[s-a-1]+t,i[s--]=l%ao|0,t=l/ao|0;i[s]=(i[s]+t)%ao|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,_s?Ya(e,f.precision):e};_r.toDecimalPlaces=_r.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Mu(e,0,cm),t===void 0?t=a.rounding:Mu(t,0,8),Ya(r,e+ki(r)+1,t))};_r.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Nh(a,!0):(Mu(e,0,cm),t===void 0?t=s.rounding:Mu(t,0,8),a=Ya(new s(a),e+1,t),r=Nh(a,!0,e+1)),r};_r.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Nh(s):(Mu(e,0,cm),t===void 0?t=i.rounding:Mu(t,0,8),a=Ya(new i(s),e+ki(s)+1,t),r=Nh(a.abs(),!1,e+ki(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};_r.toInteger=_r.toint=function(){var e=this,t=e.constructor;return Ya(new t(e),ki(e)+1,t.rounding)};_r.toNumber=function(){return+this};_r.toPower=_r.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(gc);if(l=new c(l),!l.s){if(e.s<1)throw Error(nd+"Infinity");return l}if(l.eq(gc))return l;if(a=c.precision,e.eq(gc))return Ya(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=fF){for(s=new c(gc),t=Math.ceil(a/ls+4),_s=!1;r%2&&(s=s.times(l),ZT(s.d,t)),r=dm(r/2),r!==0;)l=l.times(l),ZT(l.d,t);return _s=!0,e.s<0?new c(gc).div(s):Ya(s,a)}}else if(i<0)throw Error(nd+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,_s=!1,s=e.times(Ex(l,a+d)),_s=!0,s=pF(s),s.s=i,s};_r.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=ki(s),a=Nh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Mu(e,1,cm),t===void 0?t=i.rounding:Mu(t,0,8),s=Ya(new i(s),e,t),r=ki(s),a=Nh(s,e<=r||r<=i.toExpNeg,e)),a};_r.toSignificantDigits=_r.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Mu(e,1,cm),t===void 0?t=a.rounding:Mu(t,0,8)),Ya(new a(r),e,t)};_r.toString=_r.valueOf=_r.val=_r.toJSON=_r[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ki(e),r=e.constructor;return Nh(e,t<=r.toExpNeg||t>=r.toExpPos)};function hF(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),_s?Ya(t,f):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(f/ls),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/ao|0,c[i]%=ao;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,_s?Ya(t,f):t}function Mu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hh+e)}function Su(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=ls-a.length,r&&(i+=a0(r)),i+=a;o=e[t],a=o+"",r=ls-a.length,r&&(i+=a0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var bf=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%ao|0,o=i/ao|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*ao+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,f,m,p,y,v,g,b,w,j,N,S,E,_,P,I=a.constructor,U=a.s==s.s?1:-1,C=a.d,O=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(nd+"Division by zero");for(c=a.e-s.e,_=O.length,S=C.length,p=new I(U),y=p.d=[],d=0;O[d]==(C[d]||0);)++d;if(O[d]>(C[d]||0)&&--c,i==null?w=i=I.precision:o?w=i+(ki(a)-ki(s))+1:w=i,w<0)return new I(0);if(w=w/ls+2|0,d=0,_==1)for(u=0,O=O[0],w++;(d<S||u)&&w--;d++)j=u*ao+(C[d]||0),y[d]=j/O|0,u=j%O|0;else{for(u=ao/(O[0]+1)|0,u>1&&(O=e(O,u),C=e(C,u),_=O.length,S=C.length),N=_,v=C.slice(0,_),g=v.length;g<_;)v[g++]=0;P=O.slice(),P.unshift(0),E=O[0],O[1]>=ao/2&&++E;do u=0,l=t(O,v,_,g),l<0?(b=v[0],_!=g&&(b=b*ao+(v[1]||0)),u=b/E|0,u>1?(u>=ao&&(u=ao-1),f=e(O,u),m=f.length,g=v.length,l=t(f,v,m,g),l==1&&(u--,r(f,_<m?P:O,m))):(u==0&&(l=u=1),f=O.slice()),m=f.length,m<g&&f.unshift(0),r(v,f,g),l==-1&&(g=v.length,l=t(O,v,_,g),l<1&&(u++,r(v,_<g?P:O,g))),g=v.length):l===0&&(u++,v=[0]),y[d++]=u,l&&v[0]?v[g++]=C[N]||0:(v=[C[N]],g=1);while((N++<S||v[0]!==void 0)&&w--)}return y[0]||y.shift(),p.e=c,Ya(p,o?i+ki(p)+1:i)}})();function pF(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(ki(e)>16)throw Error(BS+ki(e));if(!e.s)return new u(gc);for(_s=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(Z0(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(gc),u.precision=l;;){if(s=Ya(s.times(e),l),r=r.times(++c),o=i.plus(bf(s,r,l)),Su(o.d).slice(0,l)===Su(i.d).slice(0,l)){for(;d--;)i=Ya(i.times(i),l);return u.precision=f,t==null?(_s=!0,Ya(i,f)):i}i=o}}function ki(e){for(var t=e.e*ls,r=e.d[0];r>=10;r/=10)t++;return t}function P5(e,t,r){if(t>e.LN10.sd())throw _s=!0,r&&(e.precision=r),Error(nd+"LN10 precision limit exceeded");return Ya(new e(e.LN10),t)}function a0(e){for(var t="";e--;)t+="0";return t}function Ex(e,t){var r,a,s,i,o,l,c,d,u,f=1,m=10,p=e,y=p.d,v=p.constructor,g=v.precision;if(p.s<1)throw Error(nd+(p.s?"NaN":"-Infinity"));if(p.eq(gc))return new v(0);if(t==null?(_s=!1,d=g):d=t,p.eq(10))return t==null&&(_s=!0),P5(v,d);if(d+=m,v.precision=d,r=Su(y),a=r.charAt(0),i=ki(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=Su(p.d),a=r.charAt(0),f++;i=ki(p),a>1?(p=new v("0."+r),i++):p=new v(a+"."+r.slice(1))}else return c=P5(v,d+2,g).times(i+""),p=Ex(new v(a+"."+r.slice(1)),d-m).plus(c),v.precision=g,t==null?(_s=!0,Ya(p,g)):p;for(l=o=p=bf(p.minus(gc),p.plus(gc),d),u=Ya(p.times(p),d),s=3;;){if(o=Ya(o.times(u),d),c=l.plus(bf(o,new v(s),d)),Su(c.d).slice(0,d)===Su(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(P5(v,d+2,g).times(i+""))),l=bf(l,new v(f),d),v.precision=g,t==null?(_s=!0,Ya(l,g)):l;l=c,s+=2}}function JT(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=dm(r/ls),e.d=[],a=(r+1)%ls,r<0&&(a+=ls),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=ls;a<s;)e.d.push(+t.slice(a,a+=ls));t=t.slice(a),a=ls-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),_s&&(e.e>I1||e.e<-I1))throw Error(BS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ya(e,t,r){var a,s,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=ls,s=t,d=f[u=0];else{if(u=Math.ceil((a+1)/ls),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;a%=ls,s=a-ls+o}if(r!==void 0&&(i=Z0(10,o-s-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/Z0(10,o-s):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ki(e),f.length=1,t=t-i-1,f[0]=Z0(10,(ls-t%ls)%ls),e.e=dm(-t/ls)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=u,i=1,u--):(f.length=u+1,i=Z0(10,ls-a),f[u]=s>0?(d/Z0(10,o-s)%Z0(10,s)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ao&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=ao)break;f[u--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(_s&&(e.e>I1||e.e<-I1))throw Error(BS+ki(e));return e}function mF(e,t){var r,a,s,i,o,l,c,d,u,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),_s?Ya(t,p):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,a=d,l=c.length),s=Math.max(Math.ceil(p/ls),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){u=c[s]<f[s];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=ao-1;--c[i],c[s]+=ao}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,_s?Ya(t,p):t):new m(0)}function Nh(e,t,r){var a,s=ki(e),i=Su(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+a0(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+a0(-s-1)+i,r&&(a=r-o)>0&&(i+=a0(a))):s>=o?(i+=a0(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+a0(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=a0(a))),e.s<0?"-"+i:i}function ZT(e,t){if(e.length>t)return e.length=t,!0}function xF(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(hh+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return JT(o,i.toString())}else if(typeof i!="string")throw Error(hh+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,AK.test(i))JT(o,i);else throw Error(hh+i)}if(s.prototype=_r,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=xF,s.config=s.set=CK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function CK(e){if(!e||typeof e!="object")throw Error(nd+"Object expected");var t,r,a,s=["precision",1,cm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(dm(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(hh+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(hh+r+": "+a);return this}var US=xF(_K);gc=new US(1);const Ra=US;function EK(e){return IK(e)||PK(e)||OK(e)||TK()}function TK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(e,t){if(e){if(typeof e=="string")return N4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,t)}}function PK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function IK(e){if(Array.isArray(e))return N4(e)}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var DK=function(t){return t},gF={},vF=function(t){return t===gF},eO=function(t){return function r(){return arguments.length===0||arguments.length===1&&vF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},LK=function e(t,r){return t===1?r:eO(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==gF}).length;return o>=t?r.apply(void 0,s):e(t-o,eO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(f){return vF(f)?c.shift():f});return r.apply(void 0,EK(u).concat(c))}))})},Qy=function(t){return LK(t.length,t)},j4=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},FK=Qy(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),MK=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return DK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},k4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},yF=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function RK(e){var t;return e===0?t=1:t=Math.floor(new Ra(e).abs().log(10).toNumber())+1,t}function BK(e,t,r){for(var a=new Ra(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var UK=Qy(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),qK=Qy(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),$K=Qy(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Jy={rangeStep:BK,getDigitCount:RK,interpolateNumber:UK,uninterpolateNumber:qK,uninterpolateTruncation:$K};function S4(e){return WK(e)||HK(e)||bF(e)||zK()}function zK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function WK(e){if(Array.isArray(e))return _4(e)}function Tx(e,t){return KK(e)||GK(e,t)||bF(e,t)||VK()}function VK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bF(e,t){if(e){if(typeof e=="string")return _4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _4(e,t)}}function _4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function GK(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function KK(e){if(Array.isArray(e))return e}function wF(e){var t=Tx(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function NF(e,t,r){if(e.lte(0))return new Ra(0);var a=Jy.getDigitCount(e.toNumber()),s=new Ra(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Ra(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Ra(Math.ceil(c))}function XK(e,t,r){var a=1,s=new Ra(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Ra(10).pow(Jy.getDigitCount(e)-1),s=new Ra(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Ra(Math.floor(e)))}else e===0?s=new Ra(Math.floor((t-1)/2)):r||(s=new Ra(Math.floor(e)));var o=Math.floor((t-1)/2),l=MK(FK(function(c){return s.add(new Ra(c-o).mul(a)).toNumber()}),j4);return l(0,t)}function jF(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ra(0),tickMin:new Ra(0),tickMax:new Ra(0)};var i=NF(new Ra(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new Ra(0):(o=new Ra(e).add(t).div(2),o=o.sub(new Ra(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ra(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?jF(e,t,r,a,s+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Ra(l).mul(i)),tickMax:o.add(new Ra(c).mul(i))})}function YK(e){var t=Tx(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=wF([r,a]),c=Tx(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(S4(j4(0,s-1).map(function(){return 1/0}))):[].concat(S4(j4(0,s-1).map(function(){return-1/0})),[u]);return r>a?k4(f):f}if(d===u)return XK(d,s,i);var m=jF(d,u,o,i),p=m.step,y=m.tickMin,v=m.tickMax,g=Jy.rangeStep(y,v.add(new Ra(.1).mul(p)),p);return r>a?k4(g):g}function QK(e,t){var r=Tx(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=wF([a,s]),l=Tx(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var u=Math.max(t,2),f=NF(new Ra(d).sub(c).div(u-1),i,0),m=[].concat(S4(Jy.rangeStep(new Ra(c),new Ra(d).sub(new Ra(.99).mul(f)),f)),[d]);return a>s?k4(m):m}var JK=yF(YK),ZK=yF(QK),eX="Invariant failed";function jh(e,t){throw new Error(eX)}var tX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D1.apply(this,arguments)}function rX(e,t){return iX(e)||sX(e,t)||aX(e,t)||nX()}function nX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(e,t){if(e){if(typeof e=="string")return tO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tO(e,t)}}function tO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function iX(e){if(Array.isArray(e))return e}function oX(e,t){if(e==null)return{};var r=lX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dX(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_F(a.key),a)}}function uX(e,t,r){return t&&dX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fX(e,t,r){return t=L1(t),hX(e,kF()?Reflect.construct(t,r||[],L1(e).constructor):t.apply(e,r))}function hX(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pX(e)}function pX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kF=function(){return!!e})()}function L1(e){return L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L1(e)}function mX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A4(e,t)}function A4(e,t){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},A4(e,t)}function SF(e,t,r){return t=_F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _F(e){var t=xX(e,"string");return Rp(t)=="symbol"?t:t+""}function xX(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zy=(function(e){function t(){return cX(this,t),fX(this,t,arguments)}return mX(t,e),uX(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,u=a.xAxis,f=a.yAxis,m=oX(a,tX),p=Un(m,!1);this.props.direction==="x"&&u.type!=="number"&&jh();var y=c.map(function(v){var g=d(v,l),b=g.x,w=g.y,j=g.value,N=g.errorVal;if(!N)return null;var S=[],E,_;if(Array.isArray(N)){var P=rX(N,2);E=P[0],_=P[1]}else E=_=N;if(i==="vertical"){var I=u.scale,U=w+s,C=U+o,O=U-o,R=I(j-E),z=I(j+_);S.push({x1:z,y1:C,x2:z,y2:O}),S.push({x1:R,y1:U,x2:z,y2:U}),S.push({x1:R,y1:C,x2:R,y2:O})}else if(i==="horizontal"){var H=f.scale,Q=b+s,J=Q-o,re=Q+o,X=H(j-E),ee=H(j+_);S.push({x1:J,y1:ee,x2:re,y2:ee}),S.push({x1:Q,y1:X,x2:Q,y2:ee}),S.push({x1:J,y1:X,x2:re,y2:X})}return ut.createElement(Ps,D1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},p),S.map(function(W){return ut.createElement("line",D1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ut.createElement(Ps,{className:"recharts-errorBars"},y)}}])})(ut.Component);SF(Zy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});SF(Zy,"displayName","ErrorBar");function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function X0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(a){gX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gX(e,t,r){return t=vX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vX(e){var t=yX(e,"string");return Ox(t)=="symbol"?t:t+""}function yX(e,t){if(Ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ox(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AF=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=pc(r,yp);if(!o)return null;var l=yp.defaultProps,c=l!==void 0?X0(X0({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(u,f){var m=f.item,p=f.props,y=p.sectors||p.data||[];return u.concat(y.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(a||[]).map(function(u){var f=u.item,m=f.type.defaultProps,p=m!==void 0?X0(X0({},m),f.props):{},y=p.dataKey,v=p.name,g=p.legendType,b=p.hide;return{inactive:b,dataKey:y,type:c.iconType||g||"square",color:qS(f),value:v||y,payload:p}}),X0(X0(X0({},c),yp.getWithHeight(o,s)),{},{payload:d,item:o})};function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function nO(e){return jX(e)||NX(e)||wX(e)||bX()}function bX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(e,t){if(e){if(typeof e=="string")return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}function NX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jX(e){if(Array.isArray(e))return C4(e)}function C4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(a){wp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wp(e,t,r){return t=kX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=SX(e,"string");return Px(t)=="symbol"?t:t+""}function SX(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Px(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wc(e,t,r){return Wn(e)||Wn(t)?r:Ui(t)?td(e,t,r):En(t)?t(e):r}function nx(e,t,r,a){var s=kK(e,function(l){return wc(l,t)});if(r==="number"){var i=s.filter(function(l){return lr(l)||parseFloat(l)});return i.length?[Yy(i),l0(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!Wn(l)}):s;return o.map(function(l){return Ui(l)||l instanceof Date?l:""})}var _X=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,f=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,p=void 0;if($d(f-u)!==$d(m-f)){var y=[];if($d(m-f)===$d(c[1]-c[0])){p=m;var v=f+c[1]-c[0];y[0]=Math.min(v,(v+u)/2),y[1]=Math.max(v,(v+u)/2)}else{p=u;var g=m+c[1]-c[0];y[0]=Math.min(f,(g+f)/2),y[1]=Math.max(f,(g+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>b[0]&&t<=b[1]||t>=y[0]&&t<=y[1]){o=s[d].index;break}}else{var w=Math.min(u,m),j=Math.max(u,m);if(t>(w+f)/2&&t<=(j+f)/2){o=s[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N>0&&N<l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N===l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2){o=a[N].index;break}return o},qS=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Hs(Hs({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},AX=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),m=0,p=f.length;m<p;m++){var y=u[f[m]],v=y.items,g=y.cateAxisId,b=v.filter(function(_){return vf(_.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,j=w!==void 0?Hs(Hs({},w),b[0].props):b[0].props,N=j.barSize,S=j[g];o[S]||(o[S]=[]);var E=Wn(N)?r:N;o[S].push({item:b[0],stackList:b.slice(1),barSize:Wn(E)?void 0:wh(E,a,0)})}}return o},CX=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=wh(r,s,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=s/c,y=o.reduce(function(N,S){return N+S.barSize||0},0);y+=(c-1)*d,y>=s&&(y-=(c-1)*d,d=0),y>=s&&p>0&&(m=!0,p*=.9,y=c*p);var v=(s-y)/2>>0,g={offset:v-d,size:0};u=o.reduce(function(N,S){var E={item:S.item,position:{offset:g.offset+g.size+d,size:m?p:S.barSize}},_=[].concat(nO(N),[E]);return g=_[_.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){_.push({item:P,position:g})}),_},f)}else{var b=wh(a,s,0,!0);s-2*b-(c-1)*d<=0&&(d=0);var w=(s-2*b-(c-1)*d)/c;w>1&&(w>>=0);var j=l===+l?Math.min(w,l):w;u=o.reduce(function(N,S,E){var _=[].concat(nO(N),[{item:S.item,position:{offset:b+(w+d)*E+(w-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){_.push({item:P,position:_[_.length-1].position})}),_},f)}return u},EX=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=AF({children:i,legendWidth:c});if(d){var u=s||{},f=u.width,m=u.height,p=d.align,y=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&lr(t[p]))return Hs(Hs({},t),{},wp({},p,t[p]+(f||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&lr(t[y]))return Hs(Hs({},t),{},wp({},y,t[y]+(m||0)))}return t},TX=function(t,r,a){return Wn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},CF=function(t,r,a,s,i){var o=r.props.children,l=Kd(o,Zy).filter(function(d){return TX(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=wc(u,a);if(Wn(f))return d;var m=Array.isArray(f)?[Yy(f),l0(f)]:[f,f],p=c.reduce(function(y,v){var g=wc(u,v,0),b=m[0]-Math.abs(Array.isArray(g)?g[0]:g),w=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},OX=function(t,r,a,s,i){var o=r.map(function(l){return CF(t,l,a,i,s)}).filter(function(l){return!Wn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},EF=function(t,r,a,s,i){var o=r.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&CF(t,c,d,s)||nx(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},TF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},OF=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},ff=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?$d(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:s(m)+d,value:f,offset:d}});return u.filter(function(f){return!sm(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:s(f)+d,value:f,index:m,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+d,value:f,offset:d}}):s.domain().map(function(f,m){return{coordinate:s(f)+d,value:i?i[f]:f,index:m,offset:d}})},I5=new WeakMap,pv=function(t,r){if(typeof r!="function")return t;I5.has(t)||I5.set(t,new WeakMap);var a=I5.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},PX=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:jx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:E1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:rx(),realScaleType:"point"}:i==="category"?{scale:jx(),realScaleType:"band"}:{scale:E1(),realScaleType:"linear"};if(bh(s)){var c="scale".concat(My(s));return{scale:(zT[c]||rx)(),realScaleType:zT[c]?c:"point"}}return En(s)?{scale:s}:{scale:rx(),realScaleType:"point"}},sO=1e-4,IX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-sO,o=Math.max(s[0],s[1])+sO,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},DX=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},LX=function(t,r){if(!r||r.length!==2||!lr(r[0])||!lr(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!lr(t[0])||t[0]<a)&&(i[0]=a),(!lr(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},FX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=sm(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},MX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=sm(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},RX={sign:FX,expand:w$,none:Tp,silhouette:N$,wiggle:j$,positive:MX},BX=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=RX[a],o=b$().keys(s).value(function(l,c){return+wc(l,c,0)}).order(a4).offset(i);return o(t)},UX=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Hs(Hs({},m.type.defaultProps),m.props):m.props,v=y.stackId,g=y.hide;if(g)return f;var b=y[a],w=f[b]||{hasStack:!1,stackGroups:{}};if(Ui(v)){var j=w.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};j.items.push(m),w.hasStack=!0,w.stackGroups[v]=j}else w.stackGroups[xg("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[m]};return Hs(Hs({},f),{},wp({},b,w))},c),u={};return Object.keys(d).reduce(function(f,m){var p=d[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,g){var b=p.stackGroups[g];return Hs(Hs({},v),{},wp({},g,{numericAxisId:a,cateAxisId:s,items:b.items,stackedData:BX(t,b.items,i)}))},y)}return Hs(Hs({},f),{},wp({},m,p))},u)},qX=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=JK(d,i,l);return t.domain([Yy(u),l0(u)]),{niceTicks:u}}if(i&&s==="number"){var f=t.domain(),m=ZK(f,i,l);return{niceTicks:m}}return null};function iO(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Wn(s[t.dataKey])){var l=l1(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=wc(s,Wn(o)?t.dataKey:o);return Wn(c)?null:t.scale(c)}var oO=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=wc(o,r.dataKey,r.domain[l]);return Wn(c)?null:r.scale(c)-i/2+s},$X=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},zX=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Hs(Hs({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Ui(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},HX=function(t){return t.reduce(function(r,a){return[Yy(a.concat([r[0]]).filter(lr)),l0(a.concat([r[1]]).filter(lr))]},[1/0,-1/0])},PF=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var f=HX(u.slice(r,a+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},lO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,E4=function(t,r,a){if(En(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(lr(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(lO.test(t[0])){var i=+lO.exec(t[0])[1];s[0]=r[0]-i}else En(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(lr(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(cO.test(t[1])){var o=+cO.exec(t[1])[1];s[1]=r[1]+o}else En(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},F1=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=mS(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},dO=function(t,r,a){return!t||!t.length||Cx(t,td(a,"type.defaultProps.domain"))?r:t},IF=function(t,r){var a=t.type.defaultProps?Hs(Hs({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,u=a.hide;return Hs(Hs({},Un(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:qS(t),value:wc(r,s),type:c,payload:r,chartType:d,hide:u})};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(a){WX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WX(e,t,r){return t=VX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e){var t=GX(e,"string");return Ix(t)=="symbol"?t:t+""}function GX(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ix(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M1=Math.PI/180,KX=function(t){return t*180/Math.PI},Po=function(t,r,a,s){return{x:t+Math.cos(-M1*s)*a,y:r+Math.sin(-M1*s)*a}},XX=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},YX=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=XX({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:KX(d),angleInRadian:d}},QX=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},JX=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},hO=function(t,r){var a=t.x,s=t.y,i=YX({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=QX(r),f=u.startAngle,m=u.endAngle,p=l,y;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=f}return y?fO(fO({},r),{},{radius:o,angle:JX(p,r)}):null};function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}var ZX=["offset"];function eY(e){return aY(e)||nY(e)||rY(e)||tY()}function tY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rY(e,t){if(e){if(typeof e=="string")return T4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T4(e,t)}}function nY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aY(e){if(Array.isArray(e))return T4(e)}function T4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sY(e,t){if(e==null)return{};var r=iY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function iY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(r),!0).forEach(function(a){oY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oY(e,t,r){return t=lY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return Dx(t)=="symbol"?t:t+""}function cY(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lx.apply(this,arguments)}var dY=function(t){var r=t.value,a=t.formatter,s=Wn(t.children)?r:t.children;return En(a)?a(s):s},uY=function(t,r){var a=$d(r-t),s=Math.min(Math.abs(r-t),360);return a*s},fY=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,g=(f+m)/2,b=uY(p,y),w=b>=0?1:-1,j,N;s==="insideStart"?(j=p+w*o,N=v):s==="insideEnd"?(j=y-w*o,N=!v):s==="end"&&(j=y+w*o,N=v),N=b<=0?N:!N;var S=Po(d,u,g,j),E=Po(d,u,g,j+(N?1:-1)*359),_="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),P=Wn(t.id)?xg("recharts-radial-line-"):t.id;return ut.createElement("text",Lx({},a,{dominantBaseline:"central",className:ca("recharts-radial-bar-label",l)}),ut.createElement("defs",null,ut.createElement("path",{id:P,d:_})),ut.createElement("textPath",{xlinkHref:"#".concat(P)},r))},hY=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,m=(u+f)/2;if(s==="outside"){var p=Po(o,l,d+a,m),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,b=Po(o,l,g,m),w=b.x,j=b.y;return{x:w,y:j,textAnchor:"middle",verticalAnchor:"middle"}},pY=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,m=f*s,p=f>0?"end":"start",y=f>0?"start":"end",v=d>=0?1:-1,g=v*s,b=v>0?"end":"start",w=v>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:c-f*s,textAnchor:"middle",verticalAnchor:p};return Fi(Fi({},j),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+u+m,textAnchor:"middle",verticalAnchor:y};return Fi(Fi({},N),a?{height:Math.max(a.y+a.height-(c+u),0),width:d}:{})}if(i==="left"){var S={x:l-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Fi(Fi({},S),a?{width:Math.max(S.x-a.x,0),height:u}:{})}if(i==="right"){var E={x:l+d+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Fi(Fi({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var _=a?{width:d,height:u}:{};return i==="insideLeft"?Fi({x:l+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},_):i==="insideRight"?Fi({x:l+d-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},_):i==="insideTop"?Fi({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:y},_):i==="insideBottom"?Fi({x:l+d/2,y:c+u-m,textAnchor:"middle",verticalAnchor:p},_):i==="insideTopLeft"?Fi({x:l+g,y:c+m,textAnchor:w,verticalAnchor:y},_):i==="insideTopRight"?Fi({x:l+d-g,y:c+m,textAnchor:b,verticalAnchor:y},_):i==="insideBottomLeft"?Fi({x:l+g,y:c+u-m,textAnchor:w,verticalAnchor:p},_):i==="insideBottomRight"?Fi({x:l+d-g,y:c+u-m,textAnchor:b,verticalAnchor:p},_):am(i)&&(lr(i.x)||nh(i.x))&&(lr(i.y)||nh(i.y))?Fi({x:l+wh(i.x,d),y:c+wh(i.y,u),textAnchor:"end",verticalAnchor:"end"},_):Fi({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},mY=function(t){return"cx"in t&&lr(t.cx)};function rl(e){var t=e.offset,r=t===void 0?5:t,a=sY(e,ZX),s=Fi({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,f=u===void 0?"":u,m=s.textBreakAll;if(!i||Wn(l)&&Wn(c)&&!L.isValidElement(d)&&!En(d))return null;if(L.isValidElement(d))return L.cloneElement(d,s);var p;if(En(d)){if(p=L.createElement(d,s),L.isValidElement(p))return p}else p=dY(s);var y=mY(i),v=Un(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return fY(s,p,v);var g=y?hY(s):pY(s);return ut.createElement(w1,Lx({className:ca("recharts-label",f)},v,g,{breakAll:m}),p)}rl.displayName="Label";var DF=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,m=t.y,p=t.top,y=t.left,v=t.width,g=t.height,b=t.clockWise,w=t.labelViewBox;if(w)return w;if(lr(v)&&lr(g)){if(lr(f)&&lr(m))return{x:f,y:m,width:v,height:g};if(lr(p)&&lr(y))return{x:p,y,width:v,height:g}}return lr(f)&&lr(m)?{x:f,y:m,width:0,height:0}:lr(r)&&lr(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},xY=function(t,r){return t?t===!0?ut.createElement(rl,{key:"label-implicit",viewBox:r}):Ui(t)?ut.createElement(rl,{key:"label-implicit",viewBox:r,value:t}):L.isValidElement(t)?t.type===rl?L.cloneElement(t,{key:"label-implicit",viewBox:r}):ut.createElement(rl,{key:"label-implicit",content:t,viewBox:r}):En(t)?ut.createElement(rl,{key:"label-implicit",content:t,viewBox:r}):am(t)?ut.createElement(rl,Lx({viewBox:r},t,{key:"label-implicit"})):null:null},gY=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=DF(t),o=Kd(s,rl).map(function(c,d){return L.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!a)return o;var l=xY(t.label,r||i);return[l].concat(eY(o))};rl.parseViewBox=DF;rl.renderCallByParent=gY;var D5,mO;function vY(){if(mO)return D5;mO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return D5=e,D5}var yY=vY();const bY=Oa(yY);function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}var wY=["valueAccessor"],NY=["data","dataKey","clockWise","id","textBreakAll"];function jY(e){return AY(e)||_Y(e)||SY(e)||kY()}function kY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SY(e,t){if(e){if(typeof e=="string")return O4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O4(e,t)}}function _Y(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AY(e){if(Array.isArray(e))return O4(e)}function O4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R1.apply(this,arguments)}function xO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(r),!0).forEach(function(a){CY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function CY(e,t,r){return t=EY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EY(e){var t=TY(e,"string");return Fx(t)=="symbol"?t:t+""}function TY(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vO(e,t){if(e==null)return{};var r=OY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function OY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var PY=function(t){return Array.isArray(t.value)?bY(t.value):t.value};function g0(e){var t=e.valueAccessor,r=t===void 0?PY:t,a=vO(e,wY),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=vO(a,NY);return!s||!s.length?null:ut.createElement(Ps,{className:"recharts-label-list"},s.map(function(u,f){var m=Wn(i)?r(u,f):wc(u&&u.payload,i),p=Wn(l)?{}:{id:"".concat(l,"-").concat(f)};return ut.createElement(rl,R1({},Un(u,!0),d,p,{parentViewBox:u.parentViewBox,value:m,textBreakAll:c,viewBox:rl.parseViewBox(Wn(o)?u:gO(gO({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}g0.displayName="LabelList";function IY(e,t){return e?e===!0?ut.createElement(g0,{key:"labelList-implicit",data:t}):ut.isValidElement(e)||En(e)?ut.createElement(g0,{key:"labelList-implicit",data:t,content:e}):am(e)?ut.createElement(g0,R1({data:t},e,{key:"labelList-implicit"})):null:null}function DY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Kd(a,g0).map(function(o,l){return L.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=IY(e.label,t);return[i].concat(jY(s))}g0.renderCallByParent=DY;function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function P4(){return P4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},P4.apply(this,arguments)}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(a){LY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function LY(e,t,r){return t=FY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=MY(e,"string");return Mx(t)=="symbol"?t:t+""}function MY(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RY=function(t,r){var a=$d(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},mv=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,f=Math.asin(c/u)/M1,m=d?i:i+o*f,p=Po(r,a,u,m),y=Po(r,a,s,m),v=d?i-o*f:i,g=Po(r,a,u*Math.cos(f*M1),v);return{center:p,circleTangency:y,lineTangency:g,theta:f}},LF=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=RY(o,l),d=o+c,u=Po(r,a,i,o),f=Po(r,a,i,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=Po(r,a,s,o),y=Po(r,a,s,d);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(a," Z");return m},BY=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=$d(u-d),m=mv({cx:r,cy:a,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,v=m.theta,g=mv({cx:r,cy:a,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,w=g.lineTangency,j=g.theta,N=c?Math.abs(d-u):Math.abs(d-u)-v-j;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):LF({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(s>0){var E=mv({cx:r,cy:a,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=E.circleTangency,P=E.lineTangency,I=E.theta,U=mv({cx:r,cy:a,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=U.circleTangency,O=U.lineTangency,R=U.theta,z=c?Math.abs(d-u):Math.abs(d-u)-I-R;if(z<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},UY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},FF=function(t){var r=bO(bO({},UY),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,m=r.className;if(o<i||u===f)return null;var p=ca("recharts-sector",m),y=o-i,v=wh(l,y,0,!0),g;return v>0&&Math.abs(u-f)<360?g=BY({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):g=LF({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),ut.createElement("path",P4({},Un(r,!0),{className:p,d:g,role:"img"}))};function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function I4(){return I4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I4.apply(this,arguments)}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function NO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(a){qY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qY(e,t,r){return t=$Y(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e){var t=zY(e,"string");return Rx(t)=="symbol"?t:t+""}function zY(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jO={curveBasisClosed:c$,curveBasisOpen:d$,curveBasis:l$,curveBumpX:Kq,curveBumpY:Xq,curveLinearClosed:u$,curveLinear:By,curveMonotoneX:f$,curveMonotoneY:h$,curveNatural:p$,curveStep:m$,curveStepAfter:g$,curveStepBefore:x$},xv=function(t){return t.x===+t.x&&t.y===+t.y},Im=function(t){return t.x},Dm=function(t){return t.y},HY=function(t,r){if(En(t))return t;var a="curve".concat(My(t));return(a==="curveMonotone"||a==="curveBump")&&r?jO["".concat(a).concat(r==="vertical"?"Y":"X")]:jO[a]||By},WY=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=HY(a,l),f=d?i.filter(function(v){return xv(v)}):i,m;if(Array.isArray(o)){var p=d?o.filter(function(v){return xv(v)}):o,y=f.map(function(v,g){return NO(NO({},v),{},{base:p[g]})});return l==="vertical"?m=ov().y(Dm).x1(Im).x0(function(v){return v.base.x}):m=ov().x(Im).y1(Dm).y0(function(v){return v.base.y}),m.defined(xv).curve(u),m(y)}return l==="vertical"&&lr(o)?m=ov().y(Dm).x1(Im).x0(o):lr(o)?m=ov().x(Im).y1(Dm).y0(o):m=UD().x(Im).y(Dm),m.defined(xv).curve(u),m(f)},ax=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?WY(t):s;return L.createElement("path",I4({},Un(t,!1),c1(t),{className:ca("recharts-curve",r),d:o,ref:i}))},L5={exports:{}},F5,kO;function VY(){if(kO)return F5;kO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return F5=e,F5}var M5,SO;function GY(){if(SO)return M5;SO=1;var e=VY();function t(){}function r(){}return r.resetWarningCache=t,M5=function(){function a(o,l,c,d,u,f){if(f!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},M5}var _O;function KY(){return _O||(_O=1,L5.exports=GY()()),L5.exports}var XY=KY();const ja=Oa(XY),{getOwnPropertyNames:YY,getOwnPropertySymbols:QY}=Object,{hasOwnProperty:JY}=Object.prototype;function R5(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function gv(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const c=e(r,a,s);return i.delete(r),i.delete(a),c}}function ZY(e){return e?.[Symbol.toStringTag]}function AO(e){return YY(e).concat(QY(e))}const eQ=Object.hasOwn||((e,t)=>JY.call(e,t));function Mh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const tQ="__v",rQ="__o",nQ="_owner",{getOwnPropertyDescriptor:CO,keys:EO}=Object;function aQ(e,t){return e.byteLength===t.byteLength&&B1(new Uint8Array(e),new Uint8Array(t))}function sQ(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function iQ(e,t){return e.byteLength===t.byteLength&&B1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function oQ(e,t){return Mh(e.getTime(),t.getTime())}function lQ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function cQ(e,t){return e===t}function TO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(s[f]){f++;continue}const m=o.value,p=l.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1;c++}return!0}const dQ=Mh;function uQ(e,t,r){const a=EO(e);let s=a.length;if(EO(t).length!==s)return!1;for(;s-- >0;)if(!MF(e,t,r,a[s]))return!1;return!0}function Lm(e,t,r){const a=AO(e);let s=a.length;if(AO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!MF(e,t,r,i)||(o=CO(e,i),l=CO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function fQ(e,t){return Mh(e.valueOf(),t.valueOf())}function hQ(e,t){return e.source===t.source&&e.flags===t.flags}function OO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function B1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function pQ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function MF(e,t,r,a){return(a===nQ||a===rQ||a===tQ)&&(e.$$typeof||t.$$typeof)?!0:eQ(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const mQ="[object ArrayBuffer]",xQ="[object Arguments]",gQ="[object Boolean]",vQ="[object DataView]",yQ="[object Date]",bQ="[object Error]",wQ="[object Map]",NQ="[object Number]",jQ="[object Object]",kQ="[object RegExp]",SQ="[object Set]",_Q="[object String]",AQ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},CQ="[object URL]",EQ=Object.prototype.toString;function TQ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:m,areUrlsEqual:p,unknownTagComparators:y}){return function(g,b,w){if(g===b)return!0;if(g==null||b==null)return!1;const j=typeof g;if(j!==typeof b)return!1;if(j!=="object")return j==="number"?l(g,b,w):j==="function"?i(g,b,w):!1;const N=g.constructor;if(N!==b.constructor)return!1;if(N===Object)return c(g,b,w);if(Array.isArray(g))return t(g,b,w);if(N===Date)return a(g,b,w);if(N===RegExp)return u(g,b,w);if(N===Map)return o(g,b,w);if(N===Set)return f(g,b,w);const S=EQ.call(g);if(S===yQ)return a(g,b,w);if(S===kQ)return u(g,b,w);if(S===wQ)return o(g,b,w);if(S===SQ)return f(g,b,w);if(S===jQ)return typeof g.then!="function"&&typeof b.then!="function"&&c(g,b,w);if(S===CQ)return p(g,b,w);if(S===bQ)return s(g,b,w);if(S===xQ)return c(g,b,w);if(AQ[S])return m(g,b,w);if(S===mQ)return e(g,b,w);if(S===vQ)return r(g,b,w);if(S===gQ||S===NQ||S===_Q)return d(g,b,w);if(y){let E=y[S];if(!E){const _=ZY(g);_&&(E=y[_])}if(E)return E(g,b,w)}return!1}}function OQ({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:aQ,areArraysEqual:r?Lm:sQ,areDataViewsEqual:iQ,areDatesEqual:oQ,areErrorsEqual:lQ,areFunctionsEqual:cQ,areMapsEqual:r?R5(TO,Lm):TO,areNumbersEqual:dQ,areObjectsEqual:r?Lm:uQ,arePrimitiveWrappersEqual:fQ,areRegExpsEqual:hQ,areSetsEqual:r?R5(OO,Lm):OO,areTypedArraysEqual:r?R5(B1,Lm):B1,areUrlsEqual:pQ,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=gv(a.areArraysEqual),i=gv(a.areMapsEqual),o=gv(a.areObjectsEqual),l=gv(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function PQ(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function IQ({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=r();return t(l,c,{cache:d,equals:a,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const DQ=O0();O0({strict:!0});O0({circular:!0});O0({circular:!0,strict:!0});O0({createInternalComparator:()=>Mh});O0({strict:!0,createInternalComparator:()=>Mh});O0({circular:!0,createInternalComparator:()=>Mh});O0({circular:!0,createInternalComparator:()=>Mh,strict:!0});function O0(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=OQ(e),o=TQ(i),l=r?r(o):PQ(o);return IQ({circular:t,comparator:o,createState:a,equals:l,strict:s})}function LQ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function PO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):LQ(s)};requestAnimationFrame(a)}function D4(e){"@babel/helpers - typeof";return D4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D4(e)}function FQ(e){return UQ(e)||BQ(e)||RQ(e)||MQ()}function MQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RQ(e,t){if(e){if(typeof e=="string")return IO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IO(e,t)}}function IO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function BQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UQ(e){if(Array.isArray(e))return e}function qQ(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=FQ(o),c=l[0],d=l.slice(1);if(typeof c=="number"){PO(s.bind(null,d),c);return}s(c),PO(s.bind(null,d));return}D4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function LO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(a){RF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RF(e,t,r){return t=$Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=zQ(e,"string");return Bx(t)==="symbol"?t:String(t)}function zQ(e,t){if(Bx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bx(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HQ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},WQ=function(t){return t},VQ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},sx=function(t,r){return Object.keys(r).reduce(function(a,s){return LO(LO({},a),{},RF({},s,t(s,r[s])))},{})},FO=function(t,r,a){return t.map(function(s){return"".concat(VQ(s)," ").concat(r,"ms ").concat(a)}).join(",")};function GQ(e,t){return YQ(e)||XQ(e,t)||BF(e,t)||KQ()}function KQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function YQ(e){if(Array.isArray(e))return e}function QQ(e){return eJ(e)||ZQ(e)||BF(e)||JQ()}function JQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BF(e,t){if(e){if(typeof e=="string")return L4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L4(e,t)}}function ZQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eJ(e){if(Array.isArray(e))return L4(e)}function L4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var U1=1e-4,UF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},qF=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},MO=function(t,r){return function(a){var s=UF(t,r);return qF(s,a)}},tJ=function(t,r){return function(a){var s=UF(t,r),i=[].concat(QQ(s.map(function(o,l){return o*l}).slice(1)),[0]);return qF(i,a)}},RO=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=GQ(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var f=MO(s,o),m=MO(i,l),p=tJ(s,o),y=function(b){return b>1?1:b<0?0:b},v=function(b){for(var w=b>1?1:b,j=w,N=0;N<8;++N){var S=f(j)-w,E=p(j);if(Math.abs(S-w)<U1||E<U1)return m(j);j=y(j-S/E)}return m(j)};return v.isStepper=!1,v},rJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,f,m){var p=-(u-f)*a,y=m*i,v=m+(p-y)*l/1e3,g=m*l/1e3+u;return Math.abs(g-f)<U1&&Math.abs(v)<U1?[f,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},nJ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RO(s);case"spring":return rJ();default:if(s.split("(")[0]==="cubic-bezier")return RO(s)}return typeof s=="function"?s:null};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function BO(e){return iJ(e)||sJ(e)||$F(e)||aJ()}function aJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iJ(e){if(Array.isArray(e))return M4(e)}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(a){F4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function F4(e,t,r){return t=oJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=lJ(e,"string");return Ux(t)==="symbol"?t:String(t)}function lJ(e,t){if(Ux(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ux(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cJ(e,t){return fJ(e)||uJ(e,t)||$F(e,t)||dJ()}function dJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $F(e,t){if(e){if(typeof e=="string")return M4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M4(e,t)}}function M4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function uJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fJ(e){if(Array.isArray(e))return e}var q1=function(t,r,a){return t+(r-t)*a},R4=function(t){var r=t.from,a=t.to;return r!==a},hJ=function e(t,r,a){var s=sx(function(i,o){if(R4(o)){var l=t(o.from,o.to,o.velocity),c=cJ(l,2),d=c[0],u=c[1];return Co(Co({},o),{},{from:d,velocity:u})}return o},r);return a<1?sx(function(i,o){return R4(o)?Co(Co({},o),{},{velocity:q1(o.velocity,s[i].velocity,a),from:q1(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const pJ=(function(e,t,r,a,s){var i=HQ(e,t),o=i.reduce(function(g,b){return Co(Co({},g),{},F4({},b,[e[b],t[b]]))},{}),l=i.reduce(function(g,b){return Co(Co({},g),{},F4({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,d,u,f=function(){return null},m=function(){return sx(function(b,w){return w.from},l)},p=function(){return!Object.values(l).filter(R4).length},y=function(b){d||(d=b);var w=b-d,j=w/r.dt;l=hJ(r,l,j),s(Co(Co(Co({},e),t),m())),d=b,p()||(c=requestAnimationFrame(f))},v=function(b){u||(u=b);var w=(b-u)/a,j=sx(function(S,E){return q1.apply(void 0,BO(E).concat([r(w)]))},o);if(s(Co(Co(Co({},e),t),j)),w<1)c=requestAnimationFrame(f);else{var N=sx(function(S,E){return q1.apply(void 0,BO(E).concat([r(1)]))},o);s(Co(Co(Co({},e),t),N))}};return f=r.isStepper?y:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}var mJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xJ(e,t){if(e==null)return{};var r=gJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gJ(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function B5(e){return wJ(e)||bJ(e)||yJ(e)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yJ(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function bJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wJ(e){if(Array.isArray(e))return B4(e)}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(a){Gm(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gm(e,t,r){return t=zF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zF(a.key),a)}}function kJ(e,t,r){return t&&jJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zF(e){var t=SJ(e,"string");return Bp(t)==="symbol"?t:String(t)}function SJ(e,t){if(Bp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bp(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U4(e,t)}function U4(e,t){return U4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},U4(e,t)}function AJ(e){var t=CJ();return function(){var a=$1(e),s;if(t){var i=$1(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return q4(this,s)}}function q4(e,t){if(t&&(Bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $4(e)}function $4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$1(e)}var Af=(function(e){_J(r,e);var t=AJ(r);function r(a,s){var i;NJ(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind($4(i)),i.changeStyle=i.changeStyle.bind($4(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:u}),q4(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof m=="function")return i.state={style:d},q4(i);i.state={style:c?Gm({},c,d):d}}else i.state={style:{}};return i}return kJ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Gm({},c,u):u};this.state&&m&&(c&&m[c]!==u||!c&&m!==u)&&this.setState(p);return}if(!(DQ(s.to,u)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||d?f:s.to;if(this.state&&m){var g={style:c?Gm({},c,v):v};(c&&m[c]!==v||!c&&m!==v)&&this.setState(g)}this.runAnimation(Pd(Pd({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,f=s.onAnimationEnd,m=s.onAnimationStart,p=pJ(o,l,nJ(d),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,u,y,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,f=d.duration,m=f===void 0?0:f,p=function(v,g,b){if(b===0)return v;var w=g.duration,j=g.easing,N=j===void 0?"ease":j,S=g.style,E=g.properties,_=g.onAnimationEnd,P=b>0?o[b-1]:g,I=E||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(B5(v),[i.runJSAnimation.bind(i,{from:P.style,to:S,duration:w,easing:N}),w]);var U=FO(I,w,N),C=Pd(Pd(Pd({},P.style),S),{},{transition:U});return[].concat(B5(v),[C,w,_]).filter(WQ)};return this.manager.start([c].concat(B5(o.reduce(p,[u,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=qQ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,f=s.onAnimationEnd,m=s.steps,p=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var v=l?Gm({},l,c):c,g=FO(Object.keys(v),o,d);y.start([u,i,Pd(Pd({},v),{},{transition:g}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=xJ(s,mJ),d=L.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(p){var y=p.props,v=y.style,g=v===void 0?{}:v,b=y.className,w=L.cloneElement(p,Pd(Pd({},c),{},{style:Pd(Pd({},g),u),className:b}));return w};return d===1?f(L.Children.only(i)):ut.createElement("div",null,L.Children.map(i,function(m){return f(m)}))}}]),r})(L.PureComponent);Af.displayName="Animate";Af.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Af.propTypes={from:ja.oneOfType([ja.object,ja.string]),to:ja.oneOfType([ja.object,ja.string]),attributeName:ja.string,duration:ja.number,begin:ja.number,easing:ja.oneOfType([ja.string,ja.func]),steps:ja.arrayOf(ja.shape({duration:ja.number.isRequired,style:ja.object.isRequired,easing:ja.oneOfType([ja.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ja.func]),properties:ja.arrayOf("string"),onAnimationEnd:ja.func})),children:ja.oneOfType([ja.node,ja.func]),isActive:ja.bool,canBegin:ja.bool,onAnimationEnd:ja.func,shouldReAnimate:ja.bool,onAnimationStart:ja.func,onAnimationReStart:ja.func};function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function z1(){return z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z1.apply(this,arguments)}function EJ(e,t){return IJ(e)||PJ(e,t)||OJ(e,t)||TJ()}function TJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){if(e){if(typeof e=="string")return $O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $O(e,t)}}function $O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function PJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function IJ(e){if(Array.isArray(e))return e}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function HO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(a){DJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DJ(e,t,r){return t=LJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=FJ(e,"string");return qx(t)=="symbol"?t:t+""}function FJ(e,t){if(qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WO=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>o?o:i[m];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(r+l*f[1])),u+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),u+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);u="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+a-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+a,",").concat(r+l*y,`
            L `).concat(t+a,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+a-c*y,",").concat(r+s,`
            L `).concat(t+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*y," Z")}else u="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return u},MJ=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return a>=d&&a<=u&&s>=f&&s<=m}return!1},RJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$S=function(t){var r=HO(HO({},RJ),t),a=L.useRef(),s=L.useState(-1),i=EJ(s,2),o=i[0],l=i[1];L.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var N=a.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,m=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=ca("recharts-rectangle",p);return w?ut.createElement(Af,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:v,animationEasing:y,isActive:w},function(N){var S=N.width,E=N.height,_=N.x,P=N.y;return ut.createElement(Af,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:b,easing:y},ut.createElement("path",z1({},Un(r,!0),{className:j,d:WO(_,P,S,E,m),ref:a})))}):ut.createElement("path",z1({},Un(r,!0),{className:j,d:WO(c,d,u,f,m)}))};function z4(){return z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z4.apply(this,arguments)}var zS=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=ca("recharts-dot",i);return r===+r&&a===+a&&s===+s?L.createElement("circle",z4({},Un(t,!1),c1(t),{className:o,cx:r,cy:a,r:s})):null};function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}var BJ=["x","y","top","left","width","height","className"];function H4(){return H4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H4.apply(this,arguments)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function UJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(a){qJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qJ(e,t,r){return t=$J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=zJ(e,"string");return $x(t)=="symbol"?t:t+""}function zJ(e,t){if($x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($x(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HJ(e,t){if(e==null)return{};var r=WJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WJ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var VJ=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},GJ=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,m=t.height,p=m===void 0?0:m,y=t.className,v=HJ(t,BJ),g=UJ({x:a,y:i,top:l,left:d,width:f,height:p},v);return!lr(a)||!lr(i)||!lr(f)||!lr(p)||!lr(l)||!lr(d)?null:ut.createElement("path",H4({},Un(g,!0),{className:ca("recharts-cross",y),d:VJ(a,i,f,p,l,d)}))},U5,GO;function KJ(){if(GO)return U5;GO=1;var e=cL(),t=e(Object.getPrototypeOf,Object);return U5=t,U5}var q5,KO;function XJ(){if(KO)return q5;KO=1;var e=Ef(),t=KJ(),r=Tf(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||e(u)!=a)return!1;var f=t(u);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return q5=d,q5}var YJ=XJ();const QJ=Oa(YJ);var $5,XO;function JJ(){if(XO)return $5;XO=1;var e=Ef(),t=Tf(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return $5=a,$5}var ZJ=JJ();const eZ=Oa(ZJ);function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H1.apply(this,arguments)}function tZ(e,t){return sZ(e)||aZ(e,t)||nZ(e,t)||rZ()}function rZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nZ(e,t){if(e){if(typeof e=="string")return YO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YO(e,t)}}function YO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function sZ(e){if(Array.isArray(e))return e}function QO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function JO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(r),!0).forEach(function(a){iZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iZ(e,t,r){return t=oZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZ(e){var t=lZ(e,"string");return zx(t)=="symbol"?t:t+""}function lZ(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZO=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},cZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dZ=function(t){var r=JO(JO({},cZ),t),a=L.useRef(),s=L.useState(-1),i=tZ(s,2),o=i[0],l=i[1];L.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var j=a.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||m!==+m||u===0&&f===0||m===0)return null;var w=ca("recharts-trapezoid",p);return b?ut.createElement(Af,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:m,x:c,y:d},duration:v,animationEasing:y,isActive:b},function(j){var N=j.upperWidth,S=j.lowerWidth,E=j.height,_=j.x,P=j.y;return ut.createElement(Af,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:y},ut.createElement("path",H1({},Un(r,!0),{className:w,d:ZO(_,P,N,S,E),ref:a})))}):ut.createElement("g",null,ut.createElement("path",H1({},Un(r,!0),{className:w,d:ZO(c,d,u,f,m)})))},uZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function fZ(e,t){if(e==null)return{};var r=hZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function W1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(a){pZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pZ(e,t,r){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=xZ(e,"string");return Hx(t)=="symbol"?t:t+""}function xZ(e,t){if(Hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gZ(e,t){return W1(W1({},t),e)}function vZ(e,t){return e==="symbols"}function tP(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ut.createElement($S,r);case"trapezoid":return ut.createElement(dZ,r);case"sector":return ut.createElement(FF,r);case"symbols":if(vZ(t))return ut.createElement(oS,r);break;default:return null}}function yZ(e){return L.isValidElement(e)?e.props:e}function bZ(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?gZ:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=fZ(e,uZ),d;if(L.isValidElement(t))d=L.cloneElement(t,W1(W1({},c),yZ(t)));else if(En(t))d=t(c);else if(QJ(t)&&!eZ(t)){var u=s(t,c);d=ut.createElement(tP,{shapeType:r,elementProps:u})}else{var f=c;d=ut.createElement(tP,{shapeType:r,elementProps:f})}return l?ut.createElement(Ps,{className:o},d):d}function eb(e,t){return t!=null&&"trapezoids"in e.props}function tb(e,t){return t!=null&&"sectors"in e.props}function Wx(e,t){return t!=null&&"points"in e.props}function wZ(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function NZ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function jZ(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function kZ(e,t){var r;return eb(e,t)?r=wZ:tb(e,t)?r=NZ:Wx(e,t)&&(r=jZ),r}function SZ(e,t){var r;return eb(e,t)?r="trapezoids":tb(e,t)?r="sectors":Wx(e,t)&&(r="points"),r}function _Z(e,t){if(eb(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(tb(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Wx(e,t)?t.payload:{}}function AZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=SZ(r,t),i=_Z(r,t),o=a.filter(function(c,d){var u=Cx(i,c),f=r.props[s].filter(function(y){var v=kZ(r,t);return v(y,t)}),m=r.props[s].indexOf(f[f.length-1]),p=d===m;return u&&p}),l=a.indexOf(o[o.length-1]);return l}var z5,rP;function CZ(){if(rP)return z5;rP=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,c=t(e((s-a)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=i;return d}return z5=r,z5}var H5,nP;function HF(){if(nP)return H5;nP=1;var e=SL(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return H5=a,H5}var W5,aP;function EZ(){if(aP)return W5;aP=1;var e=CZ(),t=zy(),r=HF();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return W5=a,W5}var V5,sP;function TZ(){if(sP)return V5;sP=1;var e=EZ(),t=e();return V5=t,V5}var OZ=TZ();const V1=Oa(OZ);function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function oP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(a){WF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WF(e,t,r){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PZ(e){var t=IZ(e,"string");return Vx(t)=="symbol"?t:t+""}function IZ(e,t){if(Vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DZ=["Webkit","Moz","O","ms"],LZ=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=DZ.reduce(function(i,o){return oP(oP({},i),{},WF({},o+a,r))},{});return s[t]=r,s};function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function G1(){return G1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G1.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function G5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(a){hc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GF(a.key),a)}}function MZ(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RZ(e,t,r){return t=K1(t),BZ(e,VF()?Reflect.construct(t,r||[],K1(e).constructor):t.apply(e,r))}function BZ(e,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UZ(e)}function UZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!e})()}function K1(e){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K1(e)}function qZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W4(e,t)}function W4(e,t){return W4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},W4(e,t)}function hc(e,t,r){return t=GF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=$Z(e,"string");return Up(t)=="symbol"?t:t+""}function $Z(e,t){if(Up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Up(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zZ=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=rx().domain(V1(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:u}},dP=function(t){return t.changedTouches&&!!t.changedTouches.length},qp=(function(e){function t(r){var a;return FZ(this,t),a=RZ(this,t,[r]),hc(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),hc(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),hc(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),hc(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),hc(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),hc(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),hc(a,"handleSlideDragStart",function(s){var i=dP(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return qZ(t,e),MZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(o,f),y=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:y===u?u:y-y%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=wc(i[a],l,a);return En(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,v=a.pageX-i;v>0?v=Math.min(v,d+u-f-l,d+u-f-o):v<0&&(v=Math.max(v,d-o,d-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==m||g.endIndex!==p)&&y&&y(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=dP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,f=u.x,m=u.width,p=u.travellerWidth,y=u.onChange,v=u.gap,g=u.data,b={startX:this.state.startX,endX:this.state.endX},w=a.pageX-i;w>0?w=Math.min(w,f+m-p-d):w<0&&(w=Math.max(w,f-d)),b[o]=d+w;var j=this.getIndex(b),N=j.startIndex,S=j.endIndex,E=function(){var P=g.length-1;return o==="startX"&&(l>c?N%v===0:S%v===0)||l<c&&S===P||o==="endX"&&(l>c?S%v===0:N%v===0)||l>c&&S===P};this.setState(hc(hc({},o,d+w),"brushMoveStartX",a.pageX),function(){y&&E()&&y(j)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],f=l.indexOf(u);if(f!==-1){var m=f+a;if(!(m===-1||m>=l.length)){var p=l[m];s==="startX"&&p>=d||s==="endX"&&p<=c||this.setState(hc({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return ut.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,u=a.padding,f=L.Children.only(d);return f?ut.cloneElement(f,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,g=c.endIndex,b=Math.max(a,this.props.x),w=G5(G5({},Un(this.props,!1)),{},{x:b,y:d,width:u,height:f}),j=p||"Min value: ".concat((i=y[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[g])===null||o===void 0?void 0:o.name);return ut.createElement(Ps,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,w))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(a,s)+d,f=Math.max(Math.abs(s-a)-d,0);return ut.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,u=this.state,f=u.startX,m=u.endX,p=5,y={pointerEvents:"none",fill:d};return ut.createElement(Ps,{className:"recharts-brush-texts"},ut.createElement(w1,G1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:o+l/2},y),this.getTextOfTick(s)),ut.createElement(w1,G1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,u=a.height,f=a.alwaysShowText,m=this.state,p=m.startX,y=m.endX,v=m.isTextActive,g=m.isSlideMoving,b=m.isTravellerMoving,w=m.isTravellerFocused;if(!s||!s.length||!lr(l)||!lr(c)||!lr(d)||!lr(u)||d<=0||u<=0)return null;var j=ca("recharts-brush",i),N=ut.Children.count(o)===1,S=LZ("userSelect","none");return ut.createElement(Ps,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||g||b||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return ut.createElement(ut.Fragment,null,ut.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),ut.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),ut.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ut.isValidElement(a)?i=ut.cloneElement(a,s):En(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,u=a.startIndex,f=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return G5({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?zZ({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])})(L.PureComponent);hc(qp,"displayName","Brush");hc(qp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var K5,uP;function HZ(){if(uP)return K5;uP=1;var e=pS();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return K5=t,K5}var X5,fP;function WZ(){if(fP)return X5;fP=1;var e=rL(),t=C0(),r=HZ(),a=Jl(),s=zy();function i(o,l,c){var d=a(o)?e:r;return c&&s(o,l,c)&&(l=void 0),d(o,t(l,3))}return X5=i,X5}var VZ=WZ();const GZ=Oa(VZ);var Iu=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},Y5,hP;function KZ(){if(hP)return Y5;hP=1;var e=bL();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return Y5=t,Y5}var Q5,pP;function XZ(){if(pP)return Q5;pP=1;var e=KZ(),t=vL(),r=C0();function a(s,i){var o={};return i=r(i,3),t(s,function(l,c,d){e(o,c,i(l,c,d))}),o}return Q5=a,Q5}var YZ=XZ();const QZ=Oa(YZ);var J5,mP;function JZ(){if(mP)return J5;mP=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return J5=e,J5}var Z5,xP;function ZZ(){if(xP)return Z5;xP=1;var e=pS();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return Z5=t,Z5}var ej,gP;function eee(){if(gP)return ej;gP=1;var e=JZ(),t=ZZ(),r=C0(),a=Jl(),s=zy();function i(o,l,c){var d=a(o)?e:t;return c&&s(o,l,c)&&(l=void 0),d(o,r(l,3))}return ej=i,ej}var tee=eee();const KF=Oa(tee);var ree=["x","y"];function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function V4(){return V4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},V4.apply(this,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(a){nee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nee(e,t,r){return t=aee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aee(e){var t=see(e,"string");return Gx(t)=="symbol"?t:t+""}function see(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iee(e,t){if(e==null)return{};var r=oee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function oee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function lee(e,t){var r=e.x,a=e.y,s=iee(e,ree),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),f="".concat(t.width||s.width),m=parseInt(f,10);return Fm(Fm(Fm(Fm(Fm({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:m,name:t.name,radius:t.radius})}function yP(e){return ut.createElement(bZ,V4({shapeType:"rectangle",propTransformer:lee,activeClassName:"recharts-active-bar"},e))}var cee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=lr(a)||mq(a);return i?t(a,s):(i||jh(),r)}},dee=["value","background"],XF;function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function uee(e,t){if(e==null)return{};var r=fee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X1.apply(this,arguments)}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(a){c0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QF(a.key),a)}}function pee(e,t,r){return t&&wP(e.prototype,t),r&&wP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mee(e,t,r){return t=Y1(t),xee(e,YF()?Reflect.construct(t,r||[],Y1(e).constructor):t.apply(e,r))}function xee(e,t){if(t&&($p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gee(e)}function gee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YF=function(){return!!e})()}function Y1(e){return Y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y1(e)}function vee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G4(e,t)}function G4(e,t){return G4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},G4(e,t)}function c0(e,t,r){return t=QF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QF(e){var t=yee(e,"string");return $p(t)=="symbol"?t:t+""}function yee(e,t){if($p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($p(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ng=(function(e){function t(){var r;hee(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=mee(this,t,[].concat(s)),c0(r,"state",{isAnimationFinished:!1}),c0(r,"id",xg("recharts-bar-")),c0(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),c0(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return vee(t,e),pee(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Un(this.props,!1);return a&&a.map(function(f,m){var p=m===c,y=p?d:o,v=vi(vi(vi({},u),f),{},{isActive:p,option:y,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ut.createElement(Ps,X1({className:"recharts-bar-rectangle"},d1(s.props,f,m),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(m)}),ut.createElement(yP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state.prevData;return ut.createElement(Af,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=i.map(function(g,b){var w=m&&m[b];if(w){var j=Jc(w.x,g.x),N=Jc(w.y,g.y),S=Jc(w.width,g.width),E=Jc(w.height,g.height);return vi(vi({},g),{},{x:j(y),y:N(y),width:S(y),height:E(y)})}if(o==="horizontal"){var _=Jc(0,g.height),P=_(y);return vi(vi({},g),{},{y:g.y+g.height-P,height:P})}var I=Jc(0,g.width),U=I(y);return vi(vi({},g),{},{width:U})});return ut.createElement(Ps,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Cx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Un(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,m=uee(d,dee);if(!f)return null;var p=vi(vi(vi(vi(vi({},m),{},{fill:"#eee"},f),c),d1(a.props,d,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ut.createElement(yP,X1({key:"background-bar-".concat(u),option:a.props.background,isActive:u===l},p))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Kd(u,Zy);if(!f)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,p=function(g,b){var w=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:w,errorVal:wc(g,b)}},y={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ut.createElement(Ps,y,f.map(function(v){return ut.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,u=a.top,f=a.width,m=a.height,p=a.isAnimationActive,y=a.background,v=a.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,b=ca("recharts-bar",o),w=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=w||j,S=Wn(v)?this.id:v;return ut.createElement(Ps,{className:b},w||j?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(S)},ut.createElement("rect",{x:w?d:d-f/2,y:j?u:u-m/2,width:w?f:f*2,height:j?m:m*2}))):null,ut.createElement(Ps,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!p||g)&&g0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(L.PureComponent);XF=Ng;c0(Ng,"displayName","Bar");c0(Ng,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!om.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});c0(Ng,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,m=e.offset,p=DX(a,r);if(!p)return null;var y=t.layout,v=r.type.defaultProps,g=v!==void 0?vi(vi({},v),r.props):r.props,b=g.dataKey,w=g.children,j=g.minPointSize,N=y==="horizontal"?o:i,S=d?N.scale.domain():null,E=$X({numericAxis:N}),_=Kd(w,AL),P=f.map(function(I,U){var C,O,R,z,H,Q;d?C=LX(d[u+U],S):(C=wc(I,b),Array.isArray(C)||(C=[E,C]));var J=cee(j,XF.defaultProps.minPointSize)(C[1],U);if(y==="horizontal"){var re,X=[o.scale(C[0]),o.scale(C[1])],ee=X[0],W=X[1];O=oO({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:I,index:U}),R=(re=W??ee)!==null&&re!==void 0?re:void 0,z=p.size;var T=ee-W;if(H=Number.isNaN(T)?0:T,Q={x:O,y:o.y,width:z,height:o.height},Math.abs(J)>0&&Math.abs(H)<Math.abs(J)){var q=$d(H||J)*(Math.abs(J)-Math.abs(H));R-=q,H+=q}}else{var V=[i.scale(C[0]),i.scale(C[1])],B=V[0],K=V[1];if(O=B,R=oO({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:I,index:U}),z=K-B,H=p.size,Q={x:i.x,y:R,width:i.width,height:H},Math.abs(J)>0&&Math.abs(z)<Math.abs(J)){var oe=$d(z||J)*(Math.abs(J)-Math.abs(z));z+=oe}}return vi(vi(vi({},I),{},{x:O,y:R,width:z,height:H,value:d?C:C[1],payload:I,background:Q},_&&_[U]&&_[U].props),{},{tooltipPayload:[IF(r,I)],tooltipPosition:{x:O+z/2,y:R+H/2}})});return vi({data:P,layout:y},m)});function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,JF(a.key),a)}}function wee(e,t,r){return t&&NP(e.prototype,t),r&&NP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ud(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(r),!0).forEach(function(a){rb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rb(e,t,r){return t=JF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JF(e){var t=Nee(e,"string");return Kx(t)=="symbol"?t:t+""}function Nee(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jee=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},m=!!pc(d,Ng);return u.reduce(function(p,y){var v=r[y],g=v.orientation,b=v.domain,w=v.padding,j=w===void 0?{}:w,N=v.mirror,S=v.reversed,E="".concat(g).concat(N?"Mirror":""),_,P,I,U,C;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var O=b[1]-b[0],R=1/0,z=v.categoricalDomain.sort(vq);if(z.forEach(function(V,B){B>0&&(R=Math.min((V||0)-(z[B-1]||0),R))}),Number.isFinite(R)){var H=R/O,Q=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(_=H*Q/2),v.padding==="no-gap"){var J=wh(t.barCategoryGap,H*Q),re=H*Q/2;_=re-J-(re-J)/Q*J}}}s==="xAxis"?P=[a.left+(j.left||0)+(_||0),a.left+a.width-(j.right||0)-(_||0)]:s==="yAxis"?P=c==="horizontal"?[a.top+a.height-(j.bottom||0),a.top+(j.top||0)]:[a.top+(j.top||0)+(_||0),a.top+a.height-(j.bottom||0)-(_||0)]:P=v.range,S&&(P=[P[1],P[0]]);var X=PX(v,i,m),ee=X.scale,W=X.realScaleType;ee.domain(b).range(P),IX(ee);var T=qX(ee,Ud(Ud({},v),{},{realScaleType:W}));s==="xAxis"?(C=g==="top"&&!N||g==="bottom"&&N,I=a.left,U=f[E]-C*v.height):s==="yAxis"&&(C=g==="left"&&!N||g==="right"&&N,I=f[E]-C*v.width,U=a.top);var q=Ud(Ud(Ud({},v),T),{},{realScaleType:W,x:I,y:U,scale:ee,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return q.bandSize=F1(q,T),!v.hide&&s==="xAxis"?f[E]+=(C?-1:1)*q.height:v.hide||(f[E]+=(C?-1:1)*q.width),Ud(Ud({},p),{},rb({},y,q))},{})},ZF=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},kee=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return ZF({x:r,y:a},{x:s,y:i})},e7=(function(){function e(t){bee(this,e),this.scale=t}return wee(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();rb(e7,"EPS",1e-4);var HS=function(t){var r=Object.keys(t).reduce(function(a,s){return Ud(Ud({},a),{},rb({},s,e7.create(t[s])))},{});return Ud(Ud({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return QZ(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return KF(s,function(i,o){return r[o].isInRange(i)})}})};function See(e){return(e%180+180)%180}var _ee=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=See(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},tj,kP;function Aee(){if(kP)return tj;kP=1;var e=C0(),t=gg(),r=qy();function a(s){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(f){return d(c[f],f,c)}}var u=s(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return tj=a,tj}var rj,SP;function Cee(){if(SP)return rj;SP=1;var e=HF();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return rj=t,rj}var nj,_P;function Eee(){if(_P)return nj;_P=1;var e=hL(),t=C0(),r=Cee(),a=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=a(c+d,0)),e(i,t(o,3),d)}return nj=s,nj}var aj,AP;function Tee(){if(AP)return aj;AP=1;var e=Aee(),t=Eee(),r=e(t);return aj=r,aj}var Oee=Tee();const Pee=Oa(Oee);var Iee=ED();const Dee=Oa(Iee);var Lee=Dee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),WS=L.createContext(void 0),VS=L.createContext(void 0),t7=L.createContext(void 0),r7=L.createContext({}),n7=L.createContext(void 0),a7=L.createContext(0),s7=L.createContext(0),CP=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Lee(i);return ut.createElement(WS.Provider,{value:a},ut.createElement(VS.Provider,{value:s},ut.createElement(r7.Provider,{value:i},ut.createElement(t7.Provider,{value:u},ut.createElement(n7.Provider,{value:o},ut.createElement(a7.Provider,{value:d},ut.createElement(s7.Provider,{value:c},l)))))))},Fee=function(){return L.useContext(n7)},i7=function(t){var r=L.useContext(WS);r==null&&jh();var a=r[t];return a==null&&jh(),a},Mee=function(){var t=L.useContext(WS);return o0(t)},Ree=function(){var t=L.useContext(VS),r=Pee(t,function(a){return KF(a.domain,Number.isFinite)});return r||o0(t)},o7=function(t){var r=L.useContext(VS);r==null&&jh();var a=r[t];return a==null&&jh(),a},Bee=function(){var t=L.useContext(t7);return t},Uee=function(){return L.useContext(r7)},GS=function(){return L.useContext(s7)},KS=function(){return L.useContext(a7)};function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c7(a.key),a)}}function zee(e,t,r){return t&&$ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hee(e,t,r){return t=Q1(t),Wee(e,l7()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function Wee(e,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vee(e)}function Vee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l7=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function Gee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K4(e,t)}function K4(e,t){return K4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},K4(e,t)}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(a){XS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XS(e,t,r){return t=c7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c7(e){var t=Kee(e,"string");return zp(t)=="symbol"?t:t+""}function Kee(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xee(e,t){return Zee(e)||Jee(e,t)||Qee(e,t)||Yee()}function Yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qee(e,t){if(e){if(typeof e=="string")return OP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OP(e,t)}}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Zee(e){if(Array.isArray(e))return e}function X4(){return X4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X4.apply(this,arguments)}var ete=function(t,r){var a;return ut.isValidElement(t)?a=ut.cloneElement(t,r):En(t)?a=t(r):a=ut.createElement("line",X4({},r,{className:"recharts-reference-line-line"})),a},tte=function(t,r,a,s,i,o,l,c,d){var u=i.x,f=i.y,m=i.width,p=i.height;if(a){var y=d.y,v=t.y.apply(y,{position:o});if(Iu(d,"discard")&&!t.y.isInRange(v))return null;var g=[{x:u+m,y:v},{x:u,y:v}];return c==="left"?g.reverse():g}if(r){var b=d.x,w=t.x.apply(b,{position:o});if(Iu(d,"discard")&&!t.x.isInRange(w))return null;var j=[{x:w,y:f+p},{x:w,y:f}];return l==="top"?j.reverse():j}if(s){var N=d.segment,S=N.map(function(E){return t.apply(E,{position:o})});return Iu(d,"discard")&&GZ(S,function(E){return!t.isInRange(E)})?null:S}return null};function rte(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Fee(),u=i7(s),f=o7(i),m=Bee();if(!d||!m)return null;yf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=HS({x:u.scale,y:f.scale}),y=Ui(t),v=Ui(r),g=a&&a.length===2,b=tte(p,y,v,g,m,e.position,u.orientation,f.orientation,e);if(!b)return null;var w=Xee(b,2),j=w[0],N=j.x,S=j.y,E=w[1],_=E.x,P=E.y,I=Iu(e,"hidden")?"url(#".concat(d,")"):void 0,U=TP(TP({clipPath:I},Un(e,!0)),{},{x1:N,y1:S,x2:_,y2:P});return ut.createElement(Ps,{className:ca("recharts-reference-line",l)},ete(o,U),rl.renderCallByParent(e,kee({x1:N,y1:S,x2:_,y2:P})))}var YS=(function(e){function t(){return qee(this,t),Hee(this,t,arguments)}return Gee(t,e),zee(t,[{key:"render",value:function(){return ut.createElement(rte,this.props)}}])})(ut.Component);XS(YS,"displayName","ReferenceLine");XS(YS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Y4(){return Y4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y4.apply(this,arguments)}function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function IP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(a){nb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ate(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u7(a.key),a)}}function ste(e,t,r){return t&&ate(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ite(e,t,r){return t=J1(t),ote(e,d7()?Reflect.construct(t,r||[],J1(e).constructor):t.apply(e,r))}function ote(e,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lte(e)}function lte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d7=function(){return!!e})()}function J1(e){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J1(e)}function cte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q4(e,t)}function Q4(e,t){return Q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Q4(e,t)}function nb(e,t,r){return t=u7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u7(e){var t=dte(e,"string");return Hp(t)=="symbol"?t:t+""}function dte(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ute=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=HS({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return Iu(t,"discard")&&!o.isInRange(l)?null:l},ab=(function(e){function t(){return nte(this,t),ite(this,t,arguments)}return cte(t,e),ste(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Ui(s),u=Ui(i);if(yf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=ute(this.props);if(!f)return null;var m=f.x,p=f.y,y=this.props,v=y.shape,g=y.className,b=Iu(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=IP(IP({clipPath:b},Un(this.props,!0)),{},{cx:m,cy:p});return ut.createElement(Ps,{className:ca("recharts-reference-dot",g)},t.renderDot(v,w),rl.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])})(ut.Component);nb(ab,"displayName","ReferenceDot");nb(ab,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});nb(ab,"renderDot",function(e,t){var r;return ut.isValidElement(e)?r=ut.cloneElement(e,t):En(e)?r=e(t):r=ut.createElement(zS,Y4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function J4(){return J4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J4.apply(this,arguments)}function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function LP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(a){sb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,h7(a.key),a)}}function pte(e,t,r){return t&&hte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mte(e,t,r){return t=Z1(t),xte(e,f7()?Reflect.construct(t,r||[],Z1(e).constructor):t.apply(e,r))}function xte(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gte(e)}function gte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f7=function(){return!!e})()}function Z1(e){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z1(e)}function vte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z4(e,t)}function Z4(e,t){return Z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Z4(e,t)}function sb(e,t,r){return t=h7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h7(e){var t=yte(e,"string");return Wp(t)=="symbol"?t:t+""}function yte(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bte=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var m=HS({x:u.scale,y:f.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Iu(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:ZF(p,y)},ib=(function(e){function t(){return fte(this,t),mte(this,t,arguments)}return vte(t,e),pte(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,u=a.clipPathId;yf(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ui(s),m=Ui(i),p=Ui(o),y=Ui(l),v=this.props.shape;if(!f&&!m&&!p&&!y&&!v)return null;var g=bte(f,m,p,y,this.props);if(!g&&!v)return null;var b=Iu(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ut.createElement(Ps,{className:ca("recharts-reference-area",c)},t.renderRect(v,LP(LP({clipPath:b},Un(this.props,!0)),g)),rl.renderCallByParent(this.props,g))}}])})(ut.Component);sb(ib,"displayName","ReferenceArea");sb(ib,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});sb(ib,"renderRect",function(e,t){var r;return ut.isValidElement(e)?r=ut.cloneElement(e,t):En(e)?r=e(t):r=ut.createElement($S,J4({},t,{className:"recharts-reference-area-rect"})),r});function p7(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function wte(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return _ee(a,r)}function Nte(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function ey(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function jte(e,t){return p7(e,t+1)}function kte(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var y=a?.[c];if(y===void 0)return{v:p7(a,d)};var v=c,g,b=function(){return g===void 0&&(g=r(y,v)),g},w=y.coordinate,j=c===0||ey(e,w,b,u,l);j||(c=0,u=o,d+=1),j&&(u=w+e*(b()/2+s),c+=d)},m;d<=i.length;)if(m=f(),m)return m.v;return[]}function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function FP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(r),!0).forEach(function(a){Ste(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ste(e,t,r){return t=_te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _te(e){var t=Ate(e,"string");return Xx(t)=="symbol"?t:t+""}function Ate(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cte(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(m){var p=i[m],y,v=function(){return y===void 0&&(y=r(p,m)),y};if(m===o-1){var g=e*(p.coordinate+e*v()/2-c);i[m]=p=Zo(Zo({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else i[m]=p=Zo(Zo({},p),{},{tickCoord:p.coordinate});var b=ey(e,p.tickCoord,v,l,c);b&&(c=p.tickCoord-e*(v()/2+s),i[m]=Zo(Zo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Ete(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=a[l-1],f=r(u,l-1),m=e*(u.coordinate+e*f/2-d);o[l-1]=u=Zo(Zo({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var p=ey(e,u.tickCoord,function(){return f},c,d);p&&(d=u.tickCoord-e*(f/2+s),o[l-1]=Zo(Zo({},u),{},{isShow:!0}))}for(var y=i?l-1:l,v=function(w){var j=o[w],N,S=function(){return N===void 0&&(N=r(j,w)),N};if(w===0){var E=e*(j.coordinate-e*S()/2-c);o[w]=j=Zo(Zo({},j),{},{tickCoord:E<0?j.coordinate-E*e:j.coordinate})}else o[w]=j=Zo(Zo({},j),{},{tickCoord:j.coordinate});var _=ey(e,j.tickCoord,S,c,d);_&&(c=j.tickCoord+e*(S()/2+s),o[w]=Zo(Zo({},j),{},{isShow:!0}))},g=0;g<y;g++)v(g);return o}function QS(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(lr(c)||om.isSsr)return jte(s,typeof c=="number"&&lr(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",y=u&&p==="width"?tx(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var S=En(d)?d(j.value,N):j.value;return p==="width"?wte(tx(S,{fontSize:t,letterSpacing:r}),y,f):tx(S,{fontSize:t,letterSpacing:r})[p]},g=s.length>=2?$d(s[1].coordinate-s[0].coordinate):1,b=Nte(i,g,p);return c==="equidistantPreserveStart"?kte(g,b,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Ete(g,b,v,s,o,c==="preserveStartEnd"):m=Cte(g,b,v,s,o),m.filter(function(w){return w.isShow}))}var Tte=["viewBox"],Ote=["viewBox"],Pte=["ticks"];function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pp.apply(this,arguments)}function MP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Li(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(r),!0).forEach(function(a){JS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sj(e,t){if(e==null)return{};var r=Ite(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ite(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,x7(a.key),a)}}function Lte(e,t,r){return t&&RP(e.prototype,t),r&&RP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fte(e,t,r){return t=ty(t),Mte(e,m7()?Reflect.construct(t,r||[],ty(e).constructor):t.apply(e,r))}function Mte(e,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rte(e)}function Rte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m7=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ty(e)}function Bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ek(e,t)}function JS(e,t,r){return t=x7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=Ute(e,"string");return Vp(t)=="symbol"?t:t+""}function Ute(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var um=(function(e){function t(r){var a;return Dte(this,t),a=Fte(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Bte(t,e),Lte(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=sj(a,Tte),l=this.props,c=l.viewBox,d=sj(l,Ote);return!vp(i,c)||!vp(o,d)||!vp(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,f=s.mirror,m=s.tickMargin,p,y,v,g,b,w,j=f?-1:1,N=a.tickSize||u,S=lr(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":p=y=a.coordinate,g=o+ +!f*c,v=g-j*N,w=v-j*m,b=S;break;case"left":v=g=a.coordinate,y=i+ +!f*l,p=y-j*N,b=p-j*m,w=S;break;case"right":v=g=a.coordinate,y=i+ +f*l,p=y+j*N,b=p+j*m,w=S;break;default:p=y=a.coordinate,g=o+ +f*c,v=g+j*N,w=v+j*m,b=S;break}return{line:{x1:p,y1:v,x2:y,y2:g},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,u=a.axisLine,f=Li(Li(Li({},Un(this.props,!1)),Un(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);f=Li(Li({},f),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);f=Li(Li({},f),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+l})}return ut.createElement("line",pp({},f,{className:ca("recharts-cartesian-axis-line",td(u,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,m=l.unit,p=QS(Li(Li({},this.props),{},{ticks:a}),s,i),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=Un(this.props,!1),b=Un(u,!1),w=Li(Li({},g),{},{fill:"none"},Un(c,!1)),j=p.map(function(N,S){var E=o.getTickLineCoord(N),_=E.line,P=E.tick,I=Li(Li(Li(Li({textAnchor:y,verticalAnchor:v},g),{},{stroke:"none",fill:d},b),P),{},{index:S,payload:N,visibleTicksCount:p.length,tickFormatter:f});return ut.createElement(Ps,pp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},d1(o.props,N,S)),c&&ut.createElement("line",pp({},w,_,{className:ca("recharts-cartesian-axis-tick-line",td(c,"className"))})),u&&t.renderTickItem(u,I,"".concat(En(f)?f(N.value,S):N.value).concat(m||"")))});return ut.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var f=this.props,m=f.ticks,p=sj(f,Pte),y=m;return En(c)&&(y=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:ut.createElement(Ps,{className:ca("recharts-cartesian-axis",d),ref:function(g){a.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),rl.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=ca(s.className,"recharts-cartesian-axis-tick-value");return ut.isValidElement(a)?o=ut.cloneElement(a,Li(Li({},s),{},{className:l})):En(a)?o=a(Li(Li({},s),{},{className:l})):o=ut.createElement(w1,pp({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(L.Component);JS(um,"displayName","CartesianAxis");JS(um,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qte=["x1","y1","x2","y2","key"],$te=["offset"];function kh(e){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(a){zte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zte(e,t,r){return t=Hte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hte(e){var t=Wte(e,"string");return kh(t)=="symbol"?t:t+""}function Wte(e,t){if(kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ih.apply(this,arguments)}function UP(e,t){if(e==null)return{};var r=Vte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Gte=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ut.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function g7(e,t){var r;if(ut.isValidElement(e))r=ut.cloneElement(e,t);else if(En(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=UP(t,qte),d=Un(c,!1);d.offset;var u=UP(d,$te);r=ut.createElement("line",ih({},u,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Kte(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=nl(nl({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return g7(s,d)});return ut.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Xte(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=nl(nl({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return g7(s,d)});return ut.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Yte(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==u[0]&&u.unshift(0);var f=u.map(function(m,p){var y=!u[p+1],v=y?s+o-m:u[p+1]-m;if(v<=0)return null;var g=p%t.length;return ut.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Qte(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!a||!a.length)return null;var u=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==u[0]&&u.unshift(0);var f=u.map(function(m,p){var y=!u[p+1],v=y?i+l-m:u[p+1]-m;if(v<=0)return null;var g=p%a.length;return ut.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:v,height:c,stroke:"none",fill:a[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Jte=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return OF(QS(nl(nl(nl({},um.defaultProps),a),{},{ticks:ff(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Zte=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return OF(QS(nl(nl(nl({},um.defaultProps),a),{},{ticks:ff(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},np={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function v7(e){var t,r,a,s,i,o,l=GS(),c=KS(),d=Uee(),u=nl(nl({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:np.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:np.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:np.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:np.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:np.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:np.verticalFill,x:lr(e.x)?e.x:d.left,y:lr(e.y)?e.y:d.top,width:lr(e.width)?e.width:d.width,height:lr(e.height)?e.height:d.height}),f=u.x,m=u.y,p=u.width,y=u.height,v=u.syncWithTicks,g=u.horizontalValues,b=u.verticalValues,w=Mee(),j=Ree();if(!lr(p)||p<=0||!lr(y)||y<=0||!lr(f)||f!==+f||!lr(m)||m!==+m)return null;var N=u.verticalCoordinatesGenerator||Jte,S=u.horizontalCoordinatesGenerator||Zte,E=u.horizontalPoints,_=u.verticalPoints;if((!E||!E.length)&&En(S)){var P=g&&g.length,I=S({yAxis:j?nl(nl({},j),{},{ticks:P?g:j.ticks}):void 0,width:l,height:c,offset:d},P?!0:v);yf(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(kh(I),"]")),Array.isArray(I)&&(E=I)}if((!_||!_.length)&&En(N)){var U=b&&b.length,C=N({xAxis:w?nl(nl({},w),{},{ticks:U?b:w.ticks}):void 0,width:l,height:c,offset:d},U?!0:v);yf(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(kh(C),"]")),Array.isArray(C)&&(_=C)}return ut.createElement("g",{className:"recharts-cartesian-grid"},ut.createElement(Gte,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ut.createElement(Kte,ih({},u,{offset:d,horizontalPoints:E,xAxis:w,yAxis:j})),ut.createElement(Xte,ih({},u,{offset:d,verticalPoints:_,xAxis:w,yAxis:j})),ut.createElement(Yte,ih({},u,{horizontalPoints:E})),ut.createElement(Qte,ih({},u,{verticalPoints:_})))}v7.displayName="CartesianGrid";var ere=["layout","type","stroke","connectNulls","isRange","ref"],tre=["key"],y7;function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function b7(e,t){if(e==null)return{};var r=rre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oh.apply(this,arguments)}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function n0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(a){_u(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $P(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,N7(a.key),a)}}function are(e,t,r){return t&&$P(e.prototype,t),r&&$P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sre(e,t,r){return t=ry(t),ire(e,w7()?Reflect.construct(t,r||[],ry(e).constructor):t.apply(e,r))}function ire(e,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ore(e)}function ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w7=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ry(e)}function lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tk(e,t)}function _u(e,t,r){return t=N7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7(e){var t=cre(e,"string");return Gp(t)=="symbol"?t:t+""}function cre(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var P0=(function(e){function t(){var r;nre(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=sre(this,t,[].concat(s)),_u(r,"state",{isAnimationFinished:!0}),_u(r,"id",xg("recharts-area-")),_u(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),En(o)&&o()}),_u(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),En(o)&&o()}),r}return lre(t,e),are(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,m=Un(this.props,!1),p=Un(d,!0),y=u.map(function(g,b){var w=n0(n0(n0({key:"dot-".concat(b),r:3},m),p),{},{index:b,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,w)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ut.createElement(Ps,oh({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=a*Math.abs(c-d),f=l0(o.map(function(m){return m.y||0}));return lr(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(l0(i.map(function(m){return m.y||0})),f)),lr(f)?ut.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=a*Math.abs(c-d),f=l0(o.map(function(m){return m.x||0}));return lr(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(l0(i.map(function(m){return m.x||0})),f)),lr(f)?ut.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,f=l.connectNulls,m=l.isRange;l.ref;var p=b7(l,ere);return ut.createElement(Ps,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ut.createElement(ax,oh({},Un(p,!0),{points:a,connectNulls:f,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ut.createElement(ax,oh({},Un(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})),u!=="none"&&m&&ut.createElement(ax,oh({},Un(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,m=o.animationEasing,p=o.animationId,y=this.state,v=y.prevPoints,g=y.prevBaseLine;return ut.createElement(Af,{begin:u,duration:f,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(v){var j=v.length/l.length,N=l.map(function(P,I){var U=Math.floor(I*j);if(v[U]){var C=v[U],O=Jc(C.x,P.x),R=Jc(C.y,P.y);return n0(n0({},P),{},{x:O(w),y:R(w)})}return P}),S;if(lr(c)&&typeof c=="number"){var E=Jc(g,c);S=E(w)}else if(Wn(c)||sm(c)){var _=Jc(g,0);S=_(w)}else S=c.map(function(P,I){var U=Math.floor(I*j);if(g[U]){var C=g[U],O=Jc(C.x,P.x),R=Jc(C.y,P.y);return n0(n0({},P),{},{x:O(w),y:R(w)})}return P});return i.renderAreaStatically(N,S,a,s)}return ut.createElement(Ps,null,ut.createElement("defs",null,ut.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(w))),ut.createElement(Ps,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,m=d.totalLength;return c&&o&&o.length&&(!u&&m>0||!Cx(u,o)||!Cx(f,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,f=s.xAxis,m=s.yAxis,p=s.width,y=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,j=ca("recharts-area",c),N=f&&f.allowDataOverflow,S=m&&m.allowDataOverflow,E=N||S,_=Wn(g)?this.id:g,P=(a=Un(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=P.r,U=I===void 0?3:I,C=P.strokeWidth,O=C===void 0?2:C,R=Aq(o)?o:{},z=R.clipDot,H=z===void 0?!0:z,Q=U*2+O;return ut.createElement(Ps,{className:j},N||S?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(_)},ut.createElement("rect",{x:N?u:u-p/2,y:S?d:d-y/2,width:N?p:p*2,height:S?y:y*2})),!H&&ut.createElement("clipPath",{id:"clipPath-dots-".concat(_)},ut.createElement("rect",{x:u-Q/2,y:d-Q/2,width:p+Q,height:y+Q}))):null,w?null:this.renderArea(E,_),(o||w)&&this.renderDots(E,H,_),(!v||b)&&g0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(L.PureComponent);y7=P0;_u(P0,"displayName","Area");_u(P0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!om.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_u(P0,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(lr(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return l==="dataMin"?f:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});_u(P0,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,m=e.offset,p=t.layout,y=d&&d.length,v=y7.getBaseValue(t,r,a,s),g=p==="horizontal",b=!1,w=f.map(function(N,S){var E;y?E=d[u+S]:(E=wc(N,c),Array.isArray(E)?b=!0:E=[v,E]);var _=E[1]==null||y&&wc(N,c)==null;return g?{x:iO({axis:a,ticks:i,bandSize:l,entry:N,index:S}),y:_?null:s.scale(E[1]),value:E,payload:N}:{x:_?null:a.scale(E[1]),y:iO({axis:s,ticks:o,bandSize:l,entry:N,index:S}),value:E,payload:N}}),j;return y||b?j=w.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:S!=null&&N.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:N.y}}):j=g?s.scale(v):a.scale(v),n0({points:w,baseLine:j,layout:p,isRange:b},m)});_u(P0,"renderDotItem",function(e,t){var r;if(ut.isValidElement(e))r=ut.cloneElement(e,t);else if(En(e))r=e(t);else{var a=ca("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=b7(t,tre);r=ut.createElement(zS,oh({},i,{key:s,className:a}))}return r});function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function dre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ure(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,S7(a.key),a)}}function fre(e,t,r){return t&&ure(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hre(e,t,r){return t=ny(t),pre(e,j7()?Reflect.construct(t,r||[],ny(e).constructor):t.apply(e,r))}function pre(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mre(e)}function mre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j7=function(){return!!e})()}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ny(e)}function xre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rk(e,t)}function k7(e,t,r){return t=S7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S7(e){var t=gre(e,"string");return Kp(t)=="symbol"?t:t+""}function gre(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nk.apply(this,arguments)}function vre(e){var t=e.xAxisId,r=GS(),a=KS(),s=i7(t);return s==null?null:L.createElement(um,nk({},s,{className:ca("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return ff(o,!0)}}))}var ob=(function(e){function t(){return dre(this,t),hre(this,t,arguments)}return xre(t,e),fre(t,[{key:"render",value:function(){return L.createElement(vre,this.props)}}])})(L.Component);k7(ob,"displayName","XAxis");k7(ob,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xp(e){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xp(e)}function yre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C7(a.key),a)}}function wre(e,t,r){return t&&bre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nre(e,t,r){return t=ay(t),jre(e,_7()?Reflect.construct(t,r||[],ay(e).constructor):t.apply(e,r))}function jre(e,t){if(t&&(Xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kre(e)}function kre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_7=function(){return!!e})()}function ay(e){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ay(e)}function Sre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ak(e,t)}function ak(e,t){return ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ak(e,t)}function A7(e,t,r){return t=C7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=_re(e,"string");return Xp(t)=="symbol"?t:t+""}function _re(e,t){if(Xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sk.apply(this,arguments)}var Are=function(t){var r=t.yAxisId,a=GS(),s=KS(),i=o7(r);return i==null?null:L.createElement(um,sk({},i,{className:ca("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return ff(l,!0)}}))},lb=(function(e){function t(){return yre(this,t),Nre(this,t,arguments)}return Sre(t,e),wre(t,[{key:"render",value:function(){return L.createElement(Are,this.props)}}])})(L.Component);A7(lb,"displayName","YAxis");A7(lb,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function zP(e){return Ore(e)||Tre(e)||Ere(e)||Cre()}function Cre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ere(e,t){if(e){if(typeof e=="string")return ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ik(e,t)}}function Tre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ore(e){if(Array.isArray(e))return ik(e)}function ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var ok=function(t,r,a,s,i){var o=Kd(t,YS),l=Kd(t,ab),c=[].concat(zP(o),zP(l)),d=Kd(t,ib),u="".concat(s,"Id"),f=s[0],m=r;if(c.length&&(m=c.reduce(function(v,g){if(g.props[u]===a&&Iu(g.props,"extendDomain")&&lr(g.props[f])){var b=g.props[f];return[Math.min(v[0],b),Math.max(v[1],b)]}return v},m)),d.length){var p="".concat(f,"1"),y="".concat(f,"2");m=d.reduce(function(v,g){if(g.props[u]===a&&Iu(g.props,"extendDomain")&&lr(g.props[p])&&lr(g.props[y])){var b=g.props[p],w=g.props[y];return[Math.min(v[0],b,w),Math.max(v[1],b,w)]}return v},m)}return i&&i.length&&(m=i.reduce(function(v,g){return lr(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},m)),m},ij={exports:{}},HP;function Pre(){return HP||(HP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,f||c,m),y=r?r+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,y=new Array(p);m<p;m++)y[m]=f[m].fn;return y},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,m,p,y){var v=r?r+d:d;if(!this._events[v])return!1;var g=this._events[v],b=arguments.length,w,j;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,m),!0;case 5:return g.fn.call(g.context,u,f,m,p),!0;case 6:return g.fn.call(g.context,u,f,m,p,y),!0}for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];g.fn.apply(g.context,w)}else{var N=g.length,S;for(j=0;j<N;j++)switch(g[j].once&&this.removeListener(d,g[j].fn,void 0,!0),b){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,u);break;case 3:g[j].fn.call(g[j].context,u,f);break;case 4:g[j].fn.call(g[j].context,u,f,m);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];g[j].fn.apply(g[j].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,m){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===u&&(!m||y.once)&&(!f||y.context===f)&&o(this,p);else{for(var v=0,g=[],b=y.length;v<b;v++)(y[v].fn!==u||m&&!y[v].once||f&&y[v].context!==f)&&g.push(y[v]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(ij)),ij.exports}var Ire=Pre();const Dre=Oa(Ire);var oj=new Dre,lj="recharts.syncMouseEvents";function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function Lre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,E7(a.key),a)}}function Mre(e,t,r){return t&&Fre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cj(e,t,r){return t=E7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7(e){var t=Rre(e,"string");return Yx(t)=="symbol"?t:t+""}function Rre(e,t){if(Yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bre=(function(){function e(){Lre(this,e),cj(this,"activeIndex",0),cj(this,"coordinateList",[]),cj(this,"layout","horizontal")}return Mre(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+d,m=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])})();function Ure(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&lr(a)&&lr(s))return!0}return!1}function qre(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function T7(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=Po(t,r,a,s),l=Po(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function $re(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,m=Po(l,c,d,f),p=Po(l,c,u,f);a=m.x,s=m.y,i=p.x,o=p.y}else return T7(t);return[{x:a,y:s},{x:i,y:o}]}function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function WP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(r),!0).forEach(function(a){zre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zre(e,t,r){return t=Hre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hre(e){var t=Wre(e,"string");return Qx(t)=="symbol"?t:t+""}function Wre(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vre(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!p||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var y,v=ax;if(m==="ScatterChart")y=o,v=GJ;else if(m==="BarChart")y=qre(f,o,c,u),v=$S;else if(f==="radial"){var g=T7(o),b=g.cx,w=g.cy,j=g.radius,N=g.startAngle,S=g.endAngle;y={cx:b,cy:w,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},v=FF}else y={points:$re(f,o,c)},v=ax;var E=vv(vv(vv(vv({stroke:"#ccc",pointerEvents:"none"},c),y),Un(p,!1)),{},{payload:l,payloadIndex:d,className:ca("recharts-tooltip-cursor",p.className)});return L.isValidElement(p)?L.cloneElement(p,E):L.createElement(v,E)}var Gre=["item"],Kre=["children","className","width","height","style","compact","title","desc"];function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mp.apply(this,arguments)}function VP(e,t){return Qre(e)||Yre(e,t)||P7(e,t)||Xre()}function Xre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Qre(e){if(Array.isArray(e))return e}function GP(e,t){if(e==null)return{};var r=Jre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Jre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Zre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ene(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,I7(a.key),a)}}function tne(e,t,r){return t&&ene(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rne(e,t,r){return t=sy(t),nne(e,O7()?Reflect.construct(t,r||[],sy(e).constructor):t.apply(e,r))}function nne(e,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ane(e)}function ane(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O7=function(){return!!e})()}function sy(e){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sy(e)}function sne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lk(e,t)}function lk(e,t){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lk(e,t)}function Qp(e){return lne(e)||one(e)||P7(e)||ine()}function ine(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P7(e,t){if(e){if(typeof e=="string")return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(e,t)}}function one(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lne(e){if(Array.isArray(e))return ck(e)}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(a){tn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tn(e,t,r){return t=I7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I7(e){var t=cne(e,"string");return Yp(t)=="symbol"?t:t+""}function cne(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dne={xAxis:["bottom","top"],yAxis:["left","right"]},une={width:"100%",height:"100%"},D7={x:0,y:0};function yv(e){return e}var fne=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hne=function(t,r,a,s){var i=r.find(function(u){return u&&u.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Bt(Bt(Bt({},s),Po(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Bt(Bt(Bt({},s),Po(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return D7},cb=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Qp(l),Qp(d)):l},[]);return o.length>0?o:t&&t.length&&lr(s)&&lr(i)?t.slice(s,i+1):[]};function L7(e){return e==="number"?[0,"auto"]:void 0}var dk=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=cb(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;m=l1(p,o.dataKey,s)}else m=f&&f[a]||l[a];return m?[].concat(Qp(c),[IF(d,m)]):c},[])},XP=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=fne(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=_X(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,m=dk(t,r,u,f),p=hne(a,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},pne=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,m=t.stackOffset,p=TF(u,i);return a.reduce(function(y,v){var g,b=v.type.defaultProps!==void 0?Bt(Bt({},v.type.defaultProps),v.props):v.props,w=b.type,j=b.dataKey,N=b.allowDataOverflow,S=b.allowDuplicatedCategory,E=b.scale,_=b.ticks,P=b.includeHidden,I=b[o];if(y[I])return y;var U=cb(t.data,{graphicalItems:s.filter(function(T){var q,V=o in T.props?T.props[o]:(q=T.type.defaultProps)===null||q===void 0?void 0:q[o];return V===I}),dataStartIndex:c,dataEndIndex:d}),C=U.length,O,R,z;Ure(b.domain,N,w)&&(O=E4(b.domain,null,N),p&&(w==="number"||E!=="auto")&&(z=nx(U,j,"category")));var H=L7(w);if(!O||O.length===0){var Q,J=(Q=b.domain)!==null&&Q!==void 0?Q:H;if(j){if(O=nx(U,j,w),w==="category"&&p){var re=gq(O);S&&re?(R=O,O=V1(0,C)):S||(O=dO(J,O,v).reduce(function(T,q){return T.indexOf(q)>=0?T:[].concat(Qp(T),[q])},[]))}else if(w==="category")S?O=O.filter(function(T){return T!==""&&!Wn(T)}):O=dO(J,O,v).reduce(function(T,q){return T.indexOf(q)>=0||q===""||Wn(q)?T:[].concat(Qp(T),[q])},[]);else if(w==="number"){var X=OX(U,s.filter(function(T){var q,V,B=o in T.props?T.props[o]:(q=T.type.defaultProps)===null||q===void 0?void 0:q[o],K="hide"in T.props?T.props.hide:(V=T.type.defaultProps)===null||V===void 0?void 0:V.hide;return B===I&&(P||!K)}),j,i,u);X&&(O=X)}p&&(w==="number"||E!=="auto")&&(z=nx(U,j,"category"))}else p?O=V1(0,C):l&&l[I]&&l[I].hasStack&&w==="number"?O=m==="expand"?[0,1]:PF(l[I].stackGroups,c,d):O=EF(U,s.filter(function(T){var q=o in T.props?T.props[o]:T.type.defaultProps[o],V="hide"in T.props?T.props.hide:T.type.defaultProps.hide;return q===I&&(P||!V)}),w,u,!0);if(w==="number")O=ok(f,O,I,i,_),J&&(O=E4(J,O,N));else if(w==="category"&&J){var ee=J,W=O.every(function(T){return ee.indexOf(T)>=0});W&&(O=ee)}}return Bt(Bt({},y),{},tn({},I,Bt(Bt({},b),{},{axisType:i,domain:O,categoricalDomain:z,duplicateDomain:R,originalDomain:(g=b.domain)!==null&&g!==void 0?g:H,isCategorical:p,layout:u})))},{})},mne=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,m=cb(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),p=m.length,y=TF(u,i),v=-1;return a.reduce(function(g,b){var w=b.type.defaultProps!==void 0?Bt(Bt({},b.type.defaultProps),b.props):b.props,j=w[o],N=L7("number");if(!g[j]){v++;var S;return y?S=V1(0,p):l&&l[j]&&l[j].hasStack?(S=PF(l[j].stackGroups,c,d),S=ok(f,S,j,i)):(S=E4(N,EF(m,a.filter(function(E){var _,P,I=o in E.props?E.props[o]:(_=E.type.defaultProps)===null||_===void 0?void 0:_[o],U="hide"in E.props?E.props.hide:(P=E.type.defaultProps)===null||P===void 0?void 0:P.hide;return I===j&&!U}),"number",u),s.defaultProps.allowDataOverflow),S=ok(f,S,j,i)),Bt(Bt({},g),{},tn({},j,Bt(Bt({axisType:i},s.defaultProps),{},{hide:!0,orientation:td(dne,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:N,isCategorical:y,layout:u})))}return g},{})},xne=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(s,"Id"),m=Kd(u,i),p={};return m&&m.length?p=pne(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=mne(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},gne=function(t){var r=o0(t),a=ff(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:mS(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:F1(r,a)}},YP=function(t){var r=t.children,a=t.defaultShowTooltip,s=pc(r,qp),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},vne=function(t){return!t||!t.length?!1:t.some(function(r){var a=vf(r&&r.type);return a&&a.indexOf("Bar")>=0})},QP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},yne=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,u=a.height,f=a.children,m=a.margin||{},p=pc(f,qp),y=pc(f,yp),v=Object.keys(c).reduce(function(S,E){var _=c[E],P=_.orientation;return!_.mirror&&!_.hide?Bt(Bt({},S),{},tn({},P,S[P]+_.width)):S},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(S,E){var _=o[E],P=_.orientation;return!_.mirror&&!_.hide?Bt(Bt({},S),{},tn({},P,td(S,"".concat(P))+_.height)):S},{top:m.top||0,bottom:m.bottom||0}),b=Bt(Bt({},g),v),w=b.bottom;p&&(b.bottom+=p.props.height||qp.defaultProps.height),y&&r&&(b=EX(b,s,a,r));var j=d-b.left-b.right,N=u-b.top-b.bottom;return Bt(Bt({brushBottom:w},b),{},{width:Math.max(j,0),height:Math.max(N,0)})},bne=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},wne=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,m=function(b,w){var j=w.graphicalItems,N=w.stackGroups,S=w.offset,E=w.updateId,_=w.dataStartIndex,P=w.dataEndIndex,I=b.barSize,U=b.layout,C=b.barGap,O=b.barCategoryGap,R=b.maxBarSize,z=QP(U),H=z.numericAxisName,Q=z.cateAxisName,J=vne(j),re=[];return j.forEach(function(X,ee){var W=cb(b.data,{graphicalItems:[X],dataStartIndex:_,dataEndIndex:P}),T=X.type.defaultProps!==void 0?Bt(Bt({},X.type.defaultProps),X.props):X.props,q=T.dataKey,V=T.maxBarSize,B=T["".concat(H,"Id")],K=T["".concat(Q,"Id")],oe={},me=c.reduce(function(ue,Ee){var Ye=w["".concat(Ee.axisType,"Map")],xe=T["".concat(Ee.axisType,"Id")];Ye&&Ye[xe]||Ee.axisType==="zAxis"||jh();var ve=Ye[xe];return Bt(Bt({},ue),{},tn(tn({},Ee.axisType,ve),"".concat(Ee.axisType,"Ticks"),ff(ve)))},oe),se=me[Q],de=me["".concat(Q,"Ticks")],Re=N&&N[B]&&N[B].hasStack&&zX(X,N[B].stackGroups),he=vf(X.type).indexOf("Bar")>=0,Ue=F1(se,de),Oe=[],le=J&&AX({barSize:I,stackGroups:N,totalSize:bne(me,Q)});if(he){var te,Se,we=Wn(V)?R:V,Pe=(te=(Se=F1(se,de,!0))!==null&&Se!==void 0?Se:we)!==null&&te!==void 0?te:0;Oe=CX({barGap:C,barCategoryGap:O,bandSize:Pe!==Ue?Pe:Ue,sizeList:le[K],maxBarSize:we}),Pe!==Ue&&(Oe=Oe.map(function(ue){return Bt(Bt({},ue),{},{position:Bt(Bt({},ue.position),{},{offset:ue.position.offset-Pe/2})})}))}var fe=X&&X.type&&X.type.getComposedData;fe&&re.push({props:Bt(Bt({},fe(Bt(Bt({},me),{},{displayedData:W,props:b,dataKey:q,item:X,bandSize:Ue,barPosition:Oe,offset:S,stackedData:Re,layout:U,dataStartIndex:_,dataEndIndex:P}))),{},tn(tn(tn({key:X.key||"item-".concat(ee)},H,me[H]),Q,me[Q]),"animationId",E)),childIndex:Tq(X,b.children),item:X})}),re},p=function(b,w){var j=b.props,N=b.dataStartIndex,S=b.dataEndIndex,E=b.updateId;if(!kA({props:j}))return null;var _=j.children,P=j.layout,I=j.stackOffset,U=j.data,C=j.reverseStackOrder,O=QP(P),R=O.numericAxisName,z=O.cateAxisName,H=Kd(_,a),Q=UX(U,H,"".concat(R,"Id"),"".concat(z,"Id"),I,C),J=c.reduce(function(T,q){var V="".concat(q.axisType,"Map");return Bt(Bt({},T),{},tn({},V,xne(j,Bt(Bt({},q),{},{graphicalItems:H,stackGroups:q.axisType===R&&Q,dataStartIndex:N,dataEndIndex:S}))))},{}),re=yne(Bt(Bt({},J),{},{props:j,graphicalItems:H}),w?.legendBBox);Object.keys(J).forEach(function(T){J[T]=u(j,J[T],re,T.replace("Map",""),r)});var X=J["".concat(z,"Map")],ee=gne(X),W=m(j,Bt(Bt({},J),{},{dataStartIndex:N,dataEndIndex:S,updateId:E,graphicalItems:H,stackGroups:Q,offset:re}));return Bt(Bt({formattedGraphicalItems:W,graphicalItems:H,offset:re,stackGroups:Q},ee),J)},y=(function(g){function b(w){var j,N,S;return Zre(this,b),S=rne(this,b,[w]),tn(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),tn(S,"accessibilityManager",new Bre),tn(S,"handleLegendBBoxUpdate",function(E){if(E){var _=S.state,P=_.dataStartIndex,I=_.dataEndIndex,U=_.updateId;S.setState(Bt({legendBBox:E},p({props:S.props,dataStartIndex:P,dataEndIndex:I,updateId:U},Bt(Bt({},S.state),{},{legendBBox:E}))))}}),tn(S,"handleReceiveSyncEvent",function(E,_,P){if(S.props.syncId===E){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(_)}}),tn(S,"handleBrushChange",function(E){var _=E.startIndex,P=E.endIndex;if(_!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var I=S.state.updateId;S.setState(function(){return Bt({dataStartIndex:_,dataEndIndex:P},p({props:S.props,dataStartIndex:_,dataEndIndex:P,updateId:I},S.state))}),S.triggerSyncEvent({dataStartIndex:_,dataEndIndex:P})}}),tn(S,"handleMouseEnter",function(E){var _=S.getMouseInfo(E);if(_){var P=Bt(Bt({},_),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseEnter;En(I)&&I(P,E)}}),tn(S,"triggeredAfterMouseMove",function(E){var _=S.getMouseInfo(E),P=_?Bt(Bt({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseMove;En(I)&&I(P,E)}),tn(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),tn(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),tn(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),tn(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};S.setState(_),S.triggerSyncEvent(_);var P=S.props.onMouseLeave;En(P)&&P(_,E)}),tn(S,"handleOuterEvent",function(E){var _=Eq(E),P=td(S.props,"".concat(_));if(_&&En(P)){var I,U;/.*touch.*/i.test(_)?U=S.getMouseInfo(E.changedTouches[0]):U=S.getMouseInfo(E),P((I=U)!==null&&I!==void 0?I:{},E)}}),tn(S,"handleClick",function(E){var _=S.getMouseInfo(E);if(_){var P=Bt(Bt({},_),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onClick;En(I)&&I(P,E)}}),tn(S,"handleMouseDown",function(E){var _=S.props.onMouseDown;if(En(_)){var P=S.getMouseInfo(E);_(P,E)}}),tn(S,"handleMouseUp",function(E){var _=S.props.onMouseUp;if(En(_)){var P=S.getMouseInfo(E);_(P,E)}}),tn(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),tn(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),tn(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),tn(S,"handleDoubleClick",function(E){var _=S.props.onDoubleClick;if(En(_)){var P=S.getMouseInfo(E);_(P,E)}}),tn(S,"handleContextMenu",function(E){var _=S.props.onContextMenu;if(En(_)){var P=S.getMouseInfo(E);_(P,E)}}),tn(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&oj.emit(lj,S.props.syncId,E,S.eventEmitterSymbol)}),tn(S,"applySyncEvent",function(E){var _=S.props,P=_.layout,I=_.syncMethod,U=S.state.updateId,C=E.dataStartIndex,O=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState(Bt({dataStartIndex:C,dataEndIndex:O},p({props:S.props,dataStartIndex:C,dataEndIndex:O,updateId:U},S.state)));else if(E.activeTooltipIndex!==void 0){var R=E.chartX,z=E.chartY,H=E.activeTooltipIndex,Q=S.state,J=Q.offset,re=Q.tooltipTicks;if(!J)return;if(typeof I=="function")H=I(re,E);else if(I==="value"){H=-1;for(var X=0;X<re.length;X++)if(re[X].value===E.activeLabel){H=X;break}}var ee=Bt(Bt({},J),{},{x:J.left,y:J.top}),W=Math.min(R,ee.x+ee.width),T=Math.min(z,ee.y+ee.height),q=re[H]&&re[H].value,V=dk(S.state,S.props.data,H),B=re[H]?{x:P==="horizontal"?re[H].coordinate:W,y:P==="horizontal"?T:re[H].coordinate}:D7;S.setState(Bt(Bt({},E),{},{activeLabel:q,activeCoordinate:B,activePayload:V,activeTooltipIndex:H}))}else S.setState(E)}),tn(S,"renderCursor",function(E){var _,P=S.state,I=P.isTooltipActive,U=P.activeCoordinate,C=P.activePayload,O=P.offset,R=P.activeTooltipIndex,z=P.tooltipAxisBandSize,H=S.getTooltipEventType(),Q=(_=E.props.active)!==null&&_!==void 0?_:I,J=S.props.layout,re=E.key||"_recharts-cursor";return ut.createElement(Vre,{key:re,activeCoordinate:U,activePayload:C,activeTooltipIndex:R,chartName:r,element:E,isActive:Q,layout:J,offset:O,tooltipAxisBandSize:z,tooltipEventType:H})}),tn(S,"renderPolarAxis",function(E,_,P){var I=td(E,"type.axisType"),U=td(S.state,"".concat(I,"Map")),C=E.type.defaultProps,O=C!==void 0?Bt(Bt({},C),E.props):E.props,R=U&&U[O["".concat(I,"Id")]];return L.cloneElement(E,Bt(Bt({},R),{},{className:ca(I,R.className),key:E.key||"".concat(_,"-").concat(P),ticks:ff(R,!0)}))}),tn(S,"renderPolarGrid",function(E){var _=E.props,P=_.radialLines,I=_.polarAngles,U=_.polarRadius,C=S.state,O=C.radiusAxisMap,R=C.angleAxisMap,z=o0(O),H=o0(R),Q=H.cx,J=H.cy,re=H.innerRadius,X=H.outerRadius;return L.cloneElement(E,{polarAngles:Array.isArray(I)?I:ff(H,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(U)?U:ff(z,!0).map(function(ee){return ee.coordinate}),cx:Q,cy:J,innerRadius:re,outerRadius:X,key:E.key||"polar-grid",radialLines:P})}),tn(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,_=S.props,P=_.children,I=_.width,U=_.height,C=S.props.margin||{},O=I-(C.left||0)-(C.right||0),R=AF({children:P,formattedGraphicalItems:E,legendWidth:O,legendContent:d});if(!R)return null;var z=R.item,H=GP(R,Gre);return L.cloneElement(z,Bt(Bt({},H),{},{chartWidth:I,chartHeight:U,margin:C,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),tn(S,"renderTooltip",function(){var E,_=S.props,P=_.children,I=_.accessibilityLayer,U=pc(P,ju);if(!U)return null;var C=S.state,O=C.isTooltipActive,R=C.activeCoordinate,z=C.activePayload,H=C.activeLabel,Q=C.offset,J=(E=U.props.active)!==null&&E!==void 0?E:O;return L.cloneElement(U,{viewBox:Bt(Bt({},Q),{},{x:Q.left,y:Q.top}),active:J,label:H,payload:J?z:[],coordinate:R,accessibilityLayer:I})}),tn(S,"renderBrush",function(E){var _=S.props,P=_.margin,I=_.data,U=S.state,C=U.offset,O=U.dataStartIndex,R=U.dataEndIndex,z=U.updateId;return L.cloneElement(E,{key:E.key||"_recharts-brush",onChange:pv(S.handleBrushChange,E.props.onChange),data:I,x:lr(E.props.x)?E.props.x:C.left,y:lr(E.props.y)?E.props.y:C.top+C.height+C.brushBottom-(P.bottom||0),width:lr(E.props.width)?E.props.width:C.width,startIndex:O,endIndex:R,updateId:"brush-".concat(z)})}),tn(S,"renderReferenceElement",function(E,_,P){if(!E)return null;var I=S,U=I.clipPathId,C=S.state,O=C.xAxisMap,R=C.yAxisMap,z=C.offset,H=E.type.defaultProps||{},Q=E.props,J=Q.xAxisId,re=J===void 0?H.xAxisId:J,X=Q.yAxisId,ee=X===void 0?H.yAxisId:X;return L.cloneElement(E,{key:E.key||"".concat(_,"-").concat(P),xAxis:O[re],yAxis:R[ee],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:U})}),tn(S,"renderActivePoints",function(E){var _=E.item,P=E.activePoint,I=E.basePoint,U=E.childIndex,C=E.isRange,O=[],R=_.props.key,z=_.item.type.defaultProps!==void 0?Bt(Bt({},_.item.type.defaultProps),_.item.props):_.item.props,H=z.activeDot,Q=z.dataKey,J=Bt(Bt({index:U,dataKey:Q,cx:P.x,cy:P.y,r:4,fill:qS(_.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Un(H,!1)),c1(H));return O.push(b.renderActiveDot(H,J,"".concat(R,"-activePoint-").concat(U))),I?O.push(b.renderActiveDot(H,Bt(Bt({},J),{},{cx:I.x,cy:I.y}),"".concat(R,"-basePoint-").concat(U))):C&&O.push(null),O}),tn(S,"renderGraphicChild",function(E,_,P){var I=S.filterFormatItem(E,_,P);if(!I)return null;var U=S.getTooltipEventType(),C=S.state,O=C.isTooltipActive,R=C.tooltipAxis,z=C.activeTooltipIndex,H=C.activeLabel,Q=S.props.children,J=pc(Q,ju),re=I.props,X=re.points,ee=re.isRange,W=re.baseLine,T=I.item.type.defaultProps!==void 0?Bt(Bt({},I.item.type.defaultProps),I.item.props):I.item.props,q=T.activeDot,V=T.hide,B=T.activeBar,K=T.activeShape,oe=!!(!V&&O&&J&&(q||B||K)),me={};U!=="axis"&&J&&J.props.trigger==="click"?me={onClick:pv(S.handleItemMouseEnter,E.props.onClick)}:U!=="axis"&&(me={onMouseLeave:pv(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:pv(S.handleItemMouseEnter,E.props.onMouseEnter)});var se=L.cloneElement(E,Bt(Bt({},I.props),me));function de(Ee){return typeof R.dataKey=="function"?R.dataKey(Ee.payload):null}if(oe)if(z>=0){var Re,he;if(R.dataKey&&!R.allowDuplicatedCategory){var Ue=typeof R.dataKey=="function"?de:"payload.".concat(R.dataKey.toString());Re=l1(X,Ue,H),he=ee&&W&&l1(W,Ue,H)}else Re=X?.[z],he=ee&&W&&W[z];if(K||B){var Oe=E.props.activeIndex!==void 0?E.props.activeIndex:z;return[L.cloneElement(E,Bt(Bt(Bt({},I.props),me),{},{activeIndex:Oe})),null,null]}if(!Wn(Re))return[se].concat(Qp(S.renderActivePoints({item:I,activePoint:Re,basePoint:he,childIndex:z,isRange:ee})))}else{var le,te=(le=S.getItemByXY(S.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:se},Se=te.graphicalItem,we=Se.item,Pe=we===void 0?E:we,fe=Se.childIndex,ue=Bt(Bt(Bt({},I.props),me),{},{activeIndex:fe});return[L.cloneElement(Pe,ue),null,null]}return ee?[se,null,null]:[se,null]}),tn(S,"renderCustomized",function(E,_,P){return L.cloneElement(E,Bt(Bt({key:"recharts-customized-".concat(P)},S.props),S.state))}),tn(S,"renderMap",{CartesianGrid:{handler:yv,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:yv},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:yv},YAxis:{handler:yv},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((j=w.id)!==null&&j!==void 0?j:xg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=_L(S.triggeredAfterMouseMove,(N=w.throttleDelay)!==null&&N!==void 0?N:1e3/60),S.state={},S}return sne(b,g),tne(b,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,S=j.data,E=j.height,_=j.layout,P=pc(N,ju);if(P){var I=P.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,C=dk(this.state,S,I,U),O=this.state.tooltipTicks[I].coordinate,R=(this.state.offset.top+E)/2,z=_==="horizontal",H=z?{x:O,y:R}:{y:O,x:R},Q=this.state.formattedGraphicalItems.find(function(re){var X=re.item;return X.type.name==="Scatter"});Q&&(H=Bt(Bt({},H),Q.props.points[I].tooltipPosition),C=Q.props.points[I].tooltipPayload);var J={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:U,activePayload:C,activeCoordinate:H};this.setState(J),this.renderCursor(P),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(j){Qj([pc(j.children,ju)],[pc(this.props.children,ju)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=pc(this.props.children,ju);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,S=N.getBoundingClientRect(),E=gW(S),_={chartX:Math.round(j.pageX-E.left),chartY:Math.round(j.pageY-E.top)},P=S.width/N.offsetWidth||1,I=this.inRange(_.chartX,_.chartY,P);if(!I)return null;var U=this.state,C=U.xAxisMap,O=U.yAxisMap,R=this.getTooltipEventType(),z=XP(this.state,this.props.data,this.props.layout,I);if(R!=="axis"&&C&&O){var H=o0(C).scale,Q=o0(O).scale,J=H&&H.invert?H.invert(_.chartX):null,re=Q&&Q.invert?Q.invert(_.chartY):null;return Bt(Bt({},_),{},{xValue:J,yValue:re},z)}return z?Bt(Bt({},_),z):null}},{key:"inRange",value:function(j,N){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,_=j/S,P=N/S;if(E==="horizontal"||E==="vertical"){var I=this.state.offset,U=_>=I.left&&_<=I.left+I.width&&P>=I.top&&P<=I.top+I.height;return U?{x:_,y:P}:null}var C=this.state,O=C.angleAxisMap,R=C.radiusAxisMap;if(O&&R){var z=o0(O);return hO({x:_,y:P},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),S=pc(j,ju),E={};S&&N==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=c1(this.props,this.handleOuterEvent);return Bt(Bt({},_),E)}},{key:"addListener",value:function(){oj.on(lj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){oj.removeListener(lj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,S){for(var E=this.state.formattedGraphicalItems,_=0,P=E.length;_<P;_++){var I=E[_];if(I.item===j||I.props.key===j.key||N===vf(I.item.type)&&S===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,S=N.left,E=N.top,_=N.height,P=N.width;return ut.createElement("defs",null,ut.createElement("clipPath",{id:j},ut.createElement("rect",{x:S,y:E,height:_,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=VP(S,2),_=E[0],P=E[1];return Bt(Bt({},N),{},tn({},_,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=VP(S,2),_=E[0],P=E[1];return Bt(Bt({},N),{},tn({},_,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,S=N.formattedGraphicalItems,E=N.activeItem;if(S&&S.length)for(var _=0,P=S.length;_<P;_++){var I=S[_],U=I.props,C=I.item,O=C.type.defaultProps!==void 0?Bt(Bt({},C.type.defaultProps),C.props):C.props,R=vf(C.type);if(R==="Bar"){var z=(U.data||[]).find(function(re){return MJ(j,re)});if(z)return{graphicalItem:I,payload:z}}else if(R==="RadialBar"){var H=(U.data||[]).find(function(re){return hO(j,re)});if(H)return{graphicalItem:I,payload:H}}else if(eb(I,E)||tb(I,E)||Wx(I,E)){var Q=AZ({graphicalItem:I,activeTooltipItem:E,itemData:O.data}),J=O.activeIndex===void 0?Q:O.activeIndex;return{graphicalItem:Bt(Bt({},I),{},{childIndex:J}),payload:Wx(I,E)?O.data[Q]:I.props.data[Q]}}}return null}},{key:"render",value:function(){var j=this;if(!kA(this))return null;var N=this.props,S=N.children,E=N.className,_=N.width,P=N.height,I=N.style,U=N.compact,C=N.title,O=N.desc,R=GP(N,Kre),z=Un(R,!1);if(U)return ut.createElement(CP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement(Zj,mp({},z,{width:_,height:P,title:C,desc:O}),this.renderClipPath(),_A(S,this.renderMap)));if(this.props.accessibilityLayer){var H,Q;z.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,z.role=(Q=this.props.role)!==null&&Q!==void 0?Q:"application",z.onKeyDown=function(re){j.accessibilityManager.keyboardEvent(re)},z.onFocus=function(){j.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return ut.createElement(CP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement("div",mp({className:ca("recharts-wrapper",E),style:Bt({position:"relative",cursor:"default",width:_,height:P},I)},J,{ref:function(X){j.container=X}}),ut.createElement(Zj,mp({},z,{width:_,height:P,title:C,desc:O,style:une}),this.renderClipPath(),_A(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(L.Component);tn(y,"displayName",r),tn(y,"defaultProps",Bt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),tn(y,"getDerivedStateFromProps",function(g,b){var w=g.dataKey,j=g.data,N=g.children,S=g.width,E=g.height,_=g.layout,P=g.stackOffset,I=g.margin,U=b.dataStartIndex,C=b.dataEndIndex;if(b.updateId===void 0){var O=YP(g);return Bt(Bt(Bt({},O),{},{updateId:0},p(Bt(Bt({props:g},O),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:j,prevWidth:S,prevHeight:E,prevLayout:_,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(w!==b.prevDataKey||j!==b.prevData||S!==b.prevWidth||E!==b.prevHeight||_!==b.prevLayout||P!==b.prevStackOffset||!vp(I,b.prevMargin)){var R=YP(g),z={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},H=Bt(Bt({},XP(b,j,_)),{},{updateId:b.updateId+1}),Q=Bt(Bt(Bt({},R),z),H);return Bt(Bt(Bt({},Q),p(Bt({props:g},Q),b)),{},{prevDataKey:w,prevData:j,prevWidth:S,prevHeight:E,prevLayout:_,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(!Qj(N,b.prevChildren)){var J,re,X,ee,W=pc(N,qp),T=W&&(J=(re=W.props)===null||re===void 0?void 0:re.startIndex)!==null&&J!==void 0?J:U,q=W&&(X=(ee=W.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&X!==void 0?X:C,V=T!==U||q!==C,B=!Wn(j),K=B&&!V?b.updateId:b.updateId+1;return Bt(Bt({updateId:K},p(Bt(Bt({props:g},b),{},{updateId:K,dataStartIndex:T,dataEndIndex:q}),b)),{},{prevChildren:N,dataStartIndex:T,dataEndIndex:q})}return null}),tn(y,"renderActiveDot",function(g,b,w){var j;return L.isValidElement(g)?j=L.cloneElement(g,b):En(g)?j=g(b):j=ut.createElement(zS,b),ut.createElement(Ps,{className:"recharts-active-dot",key:w},j)});var v=L.forwardRef(function(b,w){return ut.createElement(y,mp({},b,{ref:w}))});return v.displayName=y.displayName,v},Nne=wne({chartName:"AreaChart",GraphicalChild:P0,axisComponents:[{axisType:"xAxis",AxisComp:ob},{axisType:"yAxis",AxisComp:lb}],formatAxisMap:jee});const jne=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},Vs=({src:e,alt:t,className:r,fallbackText:a,isAvatar:s})=>{const[i,o]=L.useState(!1),[l,c]=L.useState(!1),d=L.useMemo(()=>{const g=(a||t||"").trim();if(!g)return"?";if(s){const b=g.match(/[a-zA-Z0-9]/);return b?b[0].toUpperCase():"?"}else{const b=g.split(/\s+/).filter(w=>w.length>0);if(b.length===0)return"?";if(b.length===1){const w=b[0].match(/[a-zA-Z0-9]/);return w?w[0].toUpperCase():"?"}else{const w=b[0].match(/[a-zA-Z0-9]/),j=b[1].match(/[a-zA-Z0-9]/),N=w?w[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return N&&S?`${N}${S}`:N||"?"}}},[a,t,s]),u=L.useMemo(()=>jne(d),[d]),f=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",p=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",y=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${y} ${p} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}if(!e||i){const v=`${y} ${p} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}return n.jsxs(n.Fragment,{children:[!l&&n.jsx("div",{className:`${y} ${p} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:n.jsx("span",{className:f(),children:d})}),n.jsx("img",{src:e,alt:t,className:`${y} ${p} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},JP=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},bv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},ZP=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},a=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${a} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),Xv.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:Xv.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=JP("feedback",[]);if(a==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),bv("feedback",o),{success:!0,data:l,simulated:!0}}if(a==="PATCH"||a==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),bv("feedback",o),{success:!0,simulated:!0}}if(a==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),bv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(a==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(a==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=JP(i,[]);if(a==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),bv(i,o),{success:!0,data:l,simulated:!0}}if(a==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(d=>d.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&a==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return Xv[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},F7=()=>"http://127.0.0.1:8050/api/v1/impactOS",ZS=F7();typeof window<"u"&&console.log(`[API] Initializing with Base: ${ZS}`);const pt=async(e,t={})=>{const r=localStorage.getItem("auth_token"),a=e.startsWith("/")?e:`/${e}`,s=`${ZS}${a}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const o=await fetch(s,{...t,headers:i}),l=await o.json().catch(()=>({}));if(!o.ok){const d=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(m=>a.includes(m));if(o.status===404&&d)return console.warn(`[SYSTEM] Live endpoint ${a} not found. Engaging Virtual Engine fallback.`),ZP(a,t);let u=`Server Error ${o.status}`;try{l&&typeof l=="object"&&(u=l.message||l.error?.message||u)}catch{}const f=new Error(u);throw f.status=o.status,l?.error?.code&&typeof l.error.code=="string"&&(f.code=l.error.code),f}return l}catch(o){let l="Unknown error",c="Error",d,u;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,d=typeof o.status=="number"?o.status:void 0,u=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const f=c==="TypeError"||l.includes("Failed to fetch"),m=d!==void 0&&d>=500,p=d!==void 0&&d>=400&&d<500;if(f||m&&!p)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),ZP(a,t);const y=new Error(l);throw d!==void 0&&(y.status=d),u&&(y.code=u),y}},eI=e=>pt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),kne=e=>pt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),tI=()=>pt("/auth/me"),Sne=async()=>{try{await pt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},ad=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return pt(`/users${t}`)},_ne=e=>pt("/users",{method:"POST",body:JSON.stringify(e)}),Ane=(e,t)=>pt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Cne=e=>pt(`/users/${e}/dashboard-layout`),Ene=(e,t)=>pt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Tne=e=>pt(`/users/${e}`,{method:"DELETE"}),One=(e,t)=>pt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),ld=e=>pt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),Pne=e=>pt("/companies",{method:"POST",body:JSON.stringify(e)}),M7=(e,t)=>pt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),R7=e=>pt(`/companies/${e}`,{method:"DELETE"}),Sh=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const a=r.toString();return pt(`/contacts${a?`?${a}`:""}`)},rI=e=>pt("/contacts",{method:"POST",body:JSON.stringify(e)}),B7=(e,t)=>pt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),U7=e=>pt(`/contacts/${e}`,{method:"DELETE"}),jg=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return pt(`/deals${s?`?${s}`:""}`)},Ine=e=>pt("/deals",{method:"POST",body:JSON.stringify(e)}),wv=(e,t)=>pt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),nI=e=>pt(`/deals/${e}`,{method:"DELETE"}),I0=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return pt(`/projects${s?`?${s}`:""}`)},Dne=e=>pt(`/projects/${e}`),Lne=e=>pt("/projects",{method:"POST",body:JSON.stringify(e)}),q7=(e,t)=>pt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),$7=e=>pt(`/projects/${e}`,{method:"DELETE"}),db=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return pt(`/tasks${s?`?${s}`:""}`)},iy=()=>pt("/tasks/categories"),z7=e=>pt("/tasks",{method:"POST",body:JSON.stringify(e)}),oy=(e,t)=>pt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),H7=e=>pt(`/tasks/${e}`,{method:"DELETE"}),Fne=e=>pt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),W7=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return pt(`/invoices${s?`?${s}`:""}`)},Mne=e=>pt("/invoices",{method:"POST",body:JSON.stringify(e)}),Nv=(e,t)=>pt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),aI=e=>pt(`/invoices/${e}`,{method:"DELETE"}),Rne=(e,t)=>pt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),sI=e=>pt(`/automations${e?`?userId=${e}`:""}`),Bne=e=>pt("/automations",{method:"POST",body:JSON.stringify(e)}),Une=e=>pt(`/automations/${e}/toggle`,{method:"PATCH"}),qne=e=>pt(`/automations/${e}`,{method:"DELETE"}),V7=(e,t)=>pt(`/notifications?userId=${e}&limitNum=${t}`),Jp=e=>pt("/notifications",{method:"POST",body:JSON.stringify(e)}),G7=(e,t)=>pt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),K7=e=>pt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),$ne=e=>pt(`/users/${e}/notification-preferences`),zne=(e,t)=>pt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),Hne=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return pt(`/satisfaction/records${t}`)},Wne=e=>pt(`/satisfaction/records/${e}`),Vne=e=>pt("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),uk=e=>pt(`/satisfaction/companies/${e}`),Gne=e=>pt(`/satisfaction/surveys/${e}`),Kne=e=>pt("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),Xne=()=>pt("/satisfaction/templates/default"),Yne=e=>pt("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),Qne=(e,t)=>pt(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),Jne=()=>pt("/satisfaction/stats"),Zne=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return pt(`/playbooks/templates${t}`)},eae=e=>pt(`/playbooks/templates/${e}`),tae=e=>pt("/playbooks/templates",{method:"POST",body:JSON.stringify(e)}),rae=(e,t)=>pt(`/playbooks/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),nae=e=>pt(`/playbooks/templates/${e}`,{method:"DELETE"}),aae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return pt(`/playbooks/instances${t}`)},sae=e=>pt(`/playbooks/instances/${e}`),iae=e=>pt("/playbooks/instances",{method:"POST",body:JSON.stringify(e)}),oae=(e,t)=>pt(`/playbooks/instances/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),lae=(e,t)=>pt(`/playbooks/instances/${e}/steps/${t}/complete`,{method:"POST"}),cae=e=>pt(`/playbooks/instances/${e}/completions`),dae=(e="default")=>pt(`/data-retention/policy?workspaceId=${e}`),uae=(e,t)=>pt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),fae=(e="default")=>pt(`/data-retention/stats?workspaceId=${e}`),hae=(e="default",t=50)=>pt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),pae=(e="default",t=50)=>pt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),mae=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),pt(`/data-retention/export?${r.toString()}`)},iI=()=>pt("/pipelines"),oI=e=>pt("/pipelines",{method:"POST",body:JSON.stringify(e)}),jv=(e,t)=>pt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),xae=()=>pt("/feedback"),X7=e=>pt("/feedback",{method:"POST",body:JSON.stringify(e)}),dj=(e,t)=>pt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),lI=e=>pt(`/feedback/${e}`,{method:"DELETE"}),gae=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return pt(`/expenses${r?`?${r}`:""}`)},vae=e=>pt("/expenses",{method:"POST",body:JSON.stringify(e)}),yae=(e,t)=>pt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),cI=e=>pt(`/expenses/${e}`,{method:"DELETE"}),Y7=()=>pt("/expense-categories"),Q7=e=>pt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),bae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString():"";return pt(`/budgets${t}`)},wae=e=>pt("/budgets",{method:"POST",body:JSON.stringify(e)}),Nae=(e,t)=>pt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),jae=e=>pt(`/budgets/${e}`,{method:"DELETE"}),kae=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString();return pt(`/budgets/tracking${t}`)},Sae=()=>pt("/budgets/departments"),J7=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a)).toString():"";return pt(`/contracts${t}`)},_ae=e=>pt("/contracts",{method:"POST",body:JSON.stringify(e)}),Aae=(e,t)=>pt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Cae=e=>pt(`/contracts/${e}`,{method:"DELETE"}),Eae=(e,t)=>pt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),Tae=()=>pt("/contracts/document-types"),Oae=e=>pt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),ly=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return pt(`/contracts/google-drive/access-token${t}`)},Pae=e=>pt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Iae=e=>pt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),Dae=(e,t)=>pt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Lae=(e,t)=>pt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Fae=()=>pt("/data-hygiene/duplicate-companies"),Mae=()=>pt("/data-hygiene/duplicate-contacts"),Rae=()=>pt("/data-hygiene/incomplete-records"),Bae=()=>pt("/data-hygiene/domain-mismatches"),e3=e=>pt(`/google-calendar/status?userId=${e}`),Z7=e=>pt(`/google-calendar/auth-url?userId=${e}`),Uae=(e,t,r)=>pt(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),qae=e=>pt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),$ae=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),a!=null&&s.append("scopeDays",String(a)),pt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},zae=e=>pt(`/shared-inbox/accounts?userId=${e}`),Hae=(e,t)=>pt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),Wae=e=>pt(`/shared-inbox/filtered-accounts?userId=${e}`),Vae=(e,t)=>pt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),Gae=(e,t)=>pt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),eM=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),pt(`/shared-inbox/emails?${r.toString()}`)):pt(`/shared-inbox/emails?${r.toString()}`)},Kae=(e,t)=>pt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),Xae=(e,t)=>pt(`/shared-inbox/emails/${e}?userId=${t}`),dI=(e,t,r)=>pt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),Yae=(e,t)=>pt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),Qae=e=>pt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),Jae=e=>pt(`/shared-inbox/notes/${e}`),Zae=(e,t)=>pt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),ese=(e,t,r)=>pt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),tse=e=>pt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),rse=e=>pt(`/shared-inbox/templates?userId=${e}`),nse=(e,t)=>pt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),ase=e=>pt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),sse=e=>pt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),ise=e=>pt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),tM=e=>pt(`/shared-inbox/signatures?userId=${e}`),ose=e=>pt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),lse=(e,t)=>pt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),cse=(e,t)=>pt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),uI=(e,t)=>pt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),fI=(e,t)=>pt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),dse=(e,t)=>pt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),kv=(e,t)=>pt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),hI=(e,t,r)=>{const a=F7(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${a}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},use=e=>pt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),fse=(e,t)=>pt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),hse=e=>pt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),pse=e=>pt(`/email-sync-filter?userId=${e}`),mse=(e,t)=>pt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),xse=(e,t)=>pt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),t3=(e,t)=>pt(`/shared-inbox/activity/${e}/${t}`),gse=e=>pt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),vse=e=>pt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),yse=e=>pt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),bse=e=>pt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),wse=e=>pt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),Nse=e=>pt(`/shared-inbox/suggested-links?emailId=${e}`),jse=e=>pt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),kse=e=>pt(`/shared-inbox/related-tasks/${e}`),Sse=e=>pt(`/shared-inbox/related-projects/${e}`),_se=e=>pt(`/shared-inbox/related-contracts/${e}`),Ase=e=>pt(`/shared-inbox/labels?userId=${e}`),Cse=e=>pt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Ese=(e,t)=>pt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),Tse=(e,t)=>pt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),Ose=e=>pt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),pI=e=>pt(`/shared-inbox/categorization-rules?userId=${e}`),Pse=(e,t=30)=>pt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),Ise=e=>pt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),Dse=(e,t)=>pt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),Lse=e=>pt(`/shared-inbox/folder-mapping?userId=${e}`),Fse=e=>pt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),fk=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),a&&s.append("endDate",a),pt(`/shared-inbox/calendar-events?${s.toString()}`)},Mse=e=>pt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),Rse=(e,t,r,a)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:a});return pt(`/shared-inbox/calendar-availability?${s.toString()}`)},Bse=(e,t,r,a,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),a&&o.append("query",a),s&&o.append("pageToken",s),pt(`/shared-inbox/drive-files?${o.toString()}`)},mI=e=>pt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),Use=e=>pt("/events",{method:"POST",body:JSON.stringify(e)}),qse=(e,t)=>pt(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),rM=e=>pt("/lead-sources?active=true"),$se=async(e,t)=>{const r=localStorage.getItem("auth_token"),a=new FormData;a.append("file",e),a.append("userId",t);const s=await fetch(`${ZS}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},zse=e=>pt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),Hse=e=>pt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),Wse=e=>pt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),Vse=({toast:e,onRemove:t})=>{L.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return n.jsx(gn,{className:"w-5 h-5 text-emerald-600"});case"error":return n.jsx(yD,{className:"w-5 h-5 text-red-600"});case"warning":return n.jsx(Zn,{className:"w-5 h-5 text-amber-600"});case"info":return n.jsx(y0,{className:"w-5 h-5 text-blue-600"});default:return n.jsx(y0,{className:"w-5 h-5 text-blue-600"})}},a=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return n.jsxs("div",{className:`${a()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[n.jsx("div",{className:"shrink-0",children:r()}),n.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),n.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-4 h-4 text-slate-400"})})]})},Gse=({toasts:e,onRemove:t})=>n.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>n.jsx("div",{className:"pointer-events-auto",children:n.jsx(Vse,{toast:r,onRemove:t})},r.id))}),nM=L.createContext(void 0),On=()=>{const e=L.useContext(nM);if(!e)throw new Error("useToast must be used within ToastProvider");return e},Kse=({children:e})=>{const[t,r]=L.useState([]),a=L.useCallback(d=>{r(u=>u.filter(f=>f.id!==d))},[]),s=L.useCallback((d,u="info",f=3e3)=>{const p={id:Math.random().toString(36).substring(2,9),message:d,type:u,duration:f};r(y=>[...y,p])},[]),i=L.useCallback((d,u)=>{s(d,"success",u)},[s]),o=L.useCallback((d,u)=>{s(d,"error",u||5e3)},[s]),l=L.useCallback((d,u)=>{s(d,"warning",u)},[s]),c=L.useCallback((d,u)=>{s(d,"info",u)},[s]);return n.jsxs(nM.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,n.jsx(Gse,{toasts:t,onRemove:a})]})},Zp=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],wi="USD",hk=e=>Zp.find(t=>t.code===e),cf=e=>e?hk(e)?.symbol||"$":Zp.find(r=>r.code===wi)?.symbol||"$",hf=(e,t)=>`${cf(t)}${e.toLocaleString()}`,xI=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],gI=({onNavigate:e})=>{const{showError:t,showSuccess:r}=On(),[a,s]=L.useState(null),[i,o]=L.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=L.useState([]),[d,u]=L.useState([]),[f,m]=L.useState(!0),[p,y]=L.useState("1M"),[v,g]=L.useState([]),[b,w]=L.useState(!1),[j,N]=L.useState({}),[S,E]=L.useState({}),[_,P]=L.useState(wi),[I,U]=L.useState(!1),[C,O]=L.useState(xI),[R,z]=L.useState(null),[H,Q]=L.useState(!1),[J,re]=L.useState(!1),[X,ee]=L.useState(null);L.useRef(0);const[W,T]=L.useState(null),[q,V]=L.useState(!1);L.useEffect(()=>{const fe=JSON.parse(localStorage.getItem("user_data")||"null");s(fe),fe?.id&&B(fe.id)},[]);const B=async fe=>{try{const ue=await Cne(fe);if(ue?.data&&Array.isArray(ue.data)){const Ee=ue.data.flatMap(ve=>ve.id==="stats-grid"?[{id:"stat-pipeline",order:ve.order,size:ve.size||"medium"},{id:"stat-projects",order:ve.order+.1,size:ve.size||"medium"},{id:"stat-invoices",order:ve.order+.2,size:ve.size||"medium"},{id:"stat-tasks",order:ve.order+.3,size:ve.size||"medium"}]:ve.order>0?[{...ve,order:ve.order+3,size:ve.size||"medium"}]:[{...ve,size:ve.size||"medium"}]),Ye=new Set,xe=Ee.filter(ve=>Ye.has(ve.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${ve.id}, removing duplicate`),!1):(Ye.add(ve.id),!0));O(xe)}}catch{console.log("[DASHBOARD] Using default layout")}},K=async()=>{if(a?.id){re(!0);try{await Ene(a.id,C),r("Dashboard layout saved"),Q(!1)}catch{t("Failed to save layout")}finally{re(!1)}}},oe=()=>{O(xI)},me=(fe,ue)=>{O(Ee=>Ee.map(Ye=>Ye.id===fe?{...Ye,size:ue}:Ye))},se=(fe="medium",ue)=>{if(ue.startsWith("stat-"))return"";switch(fe){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},de=(fe,ue)=>{H&&(z(ue),fe.dataTransfer.effectAllowed="move",fe.dataTransfer.setData("text/html",ue))},Re=fe=>{!H||!R||(fe.preventDefault(),fe.dataTransfer.dropEffect="move")},he=(fe,ue)=>{if(!H||!R||R===ue)return;fe.preventDefault();const Ee=[...C],Ye=Ee.findIndex(ve=>ve.id===R),xe=Ee.findIndex(ve=>ve.id===ue);if(Ye!==-1&&xe!==-1){const ve=Ee[Ye];Ee.splice(Ye,1),Ee.splice(xe,0,ve),Ee.forEach((Fe,$e)=>{Fe.order=$e}),O(Ee)}z(null)},Ue=()=>{z(null)};L.useEffect(()=>{(async()=>{m(!0);try{const ue=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ue){m(!1);return}const[Ee,Ye,xe,ve,Fe,$e]=await Promise.all([jg(ue).catch(()=>({data:[]})),I0(ue).catch(()=>({data:[]})),db(ue).catch(()=>({data:[]})),W7(ue).catch(()=>({data:[]})),eM(ue).catch(()=>({data:[]})),ad().catch(()=>({data:[]}))]),_e=Ee?.data||Ee||[],Be=Ye?.data||Ye||[],qe=xe?.data||xe||[],Ze=ve?.data||ve||[],Vt=Fe?.data||Fe||[],Dt=$e?.data||$e||[],dt=Array.isArray(_e)?_e.filter(Br=>Br.stage!=="Won"&&Br.stage!=="Lost"):[],Tt={},Ht={};dt.forEach(Br=>{const Qr=Br.currency||wi,ir=Br.value||0;Tt[Qr]=(Tt[Qr]||0)+ir,Ht[Qr]=(Ht[Qr]||0)+1});const Ve=Array.isArray(Be)?Be.filter(Br=>Br.status!=="Completed"&&Br.status!=="Cancelled").length:0,jt=Array.isArray(Ze)?Ze.filter(Br=>Br.status!=="Paid"):[],gr={};jt.forEach(Br=>{const Qr=Br.currency||wi,ir=Br.amount||0;gr[Qr]=(gr[Qr]||0)+ir,Ht[Qr]=(Ht[Qr]||0)+1});let nr=0,Ar=wi;Object.keys(Ht).forEach(Br=>{Ht[Br]>nr&&(nr=Ht[Br],Ar=Br)}),N(Tt),E(gr),P(Ar);const Ir=Tt[Ar]||0,Xt=gr[Ar]||0,Qt=0,mr=new Date;mr.setHours(0,0,0,0);const Fr=Array.isArray(qe)?qe.filter(Br=>{if(!Br.dueDate)return!1;const Qr=new Date(Br.dueDate);return Qr.setHours(0,0,0,0),Qr.getTime()===mr.getTime()&&Br.status!=="Done"}):[],fn=await Promise.all(Fr.slice(0,2).map(async Br=>{if(Br.projectId)try{const Qr=await Dne(Br.projectId);return{...Br,projectTitle:Qr?.data?.title||"Software"}}catch{return{...Br,projectTitle:"Software"}}return{...Br,projectTitle:"Software"}}));o({openPipeline:Ir,activeProjects:Ve,unpaidInvoices:Xt,actionableMail:Qt}),c(fn),u(Dt.slice(0,3))}catch(ue){console.error("[DASHBOARD] Failed to fetch data:",ue),t("Failed to load dashboard data")}finally{m(!1)}})()},[t]),L.useEffect(()=>{(async()=>{w(!0);try{const ue=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ue){w(!1);return}const Ee=await Rne(ue,p),Ye=Ee?.data||Ee||[];g(Array.isArray(Ye)?Ye:[])}catch{g([])}finally{w(!1)}})()},[p]),L.useEffect(()=>{(async()=>{V(!0);try{const Ee=(await Jne())?.data;Ee&&T({averageNps:Ee.averageNps??null,totalResponses:Ee.totalResponses??0,companiesNeedingAttention:Ee.companiesNeedingAttention??[],recentFeedback:Ee.recentFeedback??[],awaitingFeedback:Ee.awaitingFeedback??[]})}catch{T(null)}finally{V(!1)}})()},[]);const Oe=(fe,ue=_)=>{const Ee=cf(ue);return fe>=1e3?`${Ee}${(fe/1e3).toFixed(1)}k`:`${Ee}${fe.toLocaleString()}`},le=(fe,ue)=>{const Ee=R===fe,Ye=C.find($e=>$e.id===fe),xe=ue||Ye?.size||"medium",ve={draggable:H,onDragStart:$e=>de($e,fe),onDragOver:Re,onDrop:$e=>he($e,fe),onDragEnd:Ue,className:`transition-all ${Ee?"opacity-50 scale-95":""} ${H?"cursor-move":""}`},Fe=()=>{if(!H)return null;const $e=[{value:"small",icon:n.jsx(mU,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:n.jsx(NU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:n.jsx(fU,{className:"w-3 h-3"}),label:"Large"}];return n.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:$e.map(({value:_e,icon:Be,label:qe})=>n.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),me(fe,_e)},onMouseEnter:()=>ee(fe),onMouseLeave:()=>ee(null),className:`p-1.5 rounded transition-all ${xe===_e?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:qe,children:Be},_e))})};switch(fe){case"stat-pipeline":return n.jsxs("div",{...ve,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),n.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Gd,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Oe(i.openPipeline,_)})]}),n.jsx("button",{onClick:$e=>{$e.stopPropagation(),U(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(dh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},fe);case"stat-projects":return n.jsxs("div",{...ve,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),n.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:n.jsx(kl,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},fe);case"stat-invoices":return n.jsxs("div",{...ve,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),n.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Fu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Oe(i.unpaidInvoices,_)})]}),n.jsx("button",{onClick:$e=>{$e.stopPropagation(),U(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(dh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},fe);case"stat-tasks":return n.jsxs("div",{...ve,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),n.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:n.jsx(ji,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},fe);case"revenue-chart":return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),Fe()]}),n.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),n.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),n.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map($e=>n.jsx("button",{onClick:()=>y($e),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${$e===p?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:$e},$e))})]}),n.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:b?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsx(c6,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Gd,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):n.jsx(dW,{width:"100%",height:"100%",children:n.jsxs(Nne,{data:v,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),n.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),n.jsx(v7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),n.jsx(ob,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),n.jsx(lb,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:$e=>`$${$e}`}),n.jsx(ju,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),n.jsx(P0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},fe);case"inbox-card":return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),Fe()]}),n.jsxs("div",{onClick:()=>!H&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${H?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[n.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:n.jsx(gf,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!H&&n.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:n.jsx(Eo,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),n.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),n.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),n.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:n.jsxs("div",{className:"flex -space-x-2",children:[d.map(($e,_e)=>n.jsx(Vs,{src:$e.avatar,isAvatar:!0,fallbackText:$e.name||$e.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},$e.id||_e)),n.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),n.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:n.jsx(m0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},fe);case"tasks-card":return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),Fe()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),n.jsx(ji,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4 lg:space-y-6",children:f?n.jsx("div",{className:"space-y-3",children:[1,2].map($e=>n.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},$e))}):l.length>0?l.slice(0,2).map($e=>n.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[n.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:$e.title}),n.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:$e.projectTitle||"Software"})]})]},$e.id)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),n.jsx("button",{onClick:()=>!H&&e("tasks"),disabled:H,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},fe);case"nps-average":{const $e=W?.averageNps??null,_e=$e===null?"text-slate-400":$e>=9?"text-green-600":$e>=7?"text-amber-600":"text-red-600",Be=$e===null?"bg-slate-50":$e>=9?"bg-green-50":$e>=7?"bg-amber-50":"bg-red-50";return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),Fe()]}),n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${Be} ${_e}`,children:n.jsx(gf,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),q?n.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):n.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${_e}`,children:$e!==null?$e.toFixed(1):""})]})]})]},fe)}case"nps-needing-attention":{const $e=W?.companiesNeedingAttention??[];return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),Fe()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),n.jsx(gf,{className:"w-4 h-4 text-red-400"})]}),n.jsx("div",{className:"space-y-3",children:q?[1,2,3].map(_e=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},_e)):$e.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):$e.map(_e=>{const Be=_e.accountManagerId&&d?.length?d.find(qe=>qe.id===_e.accountManagerId)?.name:null;return n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:_e.companyName}),n.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:_e.npsScore})]}),Be?n.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",Be]}):null]},_e.companyId)})}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},fe)}case"nps-recent-feedback":{const $e=W?.recentFeedback??[];return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),Fe()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),n.jsx(lo,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4",children:q?[1,2,3].map(_e=>n.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},_e)):$e.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):$e.map((_e,Be)=>n.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900",children:_e.companyName}),n.jsx("span",{className:`text-xs font-bold shrink-0 ${_e.npsScore>=9?"text-green-600":_e.npsScore>=7?"text-amber-600":"text-red-600"}`,children:_e.npsScore})]}),_e.feedback?n.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:_e.feedback}):null,n.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:_e.date?new Date(_e.date).toLocaleDateString():""})]},Be))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},fe)}case"nps-awaiting-feedback":{const $e=W?.awaitingFeedback??[];return n.jsxs("div",{...ve,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(fc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),Fe()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),n.jsx(Qa,{className:"w-4 h-4 text-amber-400"})]}),n.jsx("div",{className:"space-y-3",children:q?[1,2,3].map(_e=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},_e)):$e.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):$e.map(_e=>n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:_e.companyName}),n.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[_e.daysElapsed,"d ago"]})]},_e.companyId))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},fe)}default:return null}},te=a?.name?.split(" ")[0]||"Alex",Se=a?.avatar||a?.photoURL||"",we=a?.name||a?.email||"Impact Member",Pe=[...C].sort((fe,ue)=>fe.order-ue.order);return n.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vs,{src:Se,alt:we,fallbackText:we,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",te]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:H?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:oe,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),n.jsx("button",{onClick:K,disabled:J,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:J?n.jsxs(n.Fragment,{children:[n.jsx(c6,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Layout"]})}),n.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[n.jsx(fc,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),H&&n.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:n.jsx(fc,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),n.jsx("div",{className:"space-y-6 lg:space-y-8",children:Pe.map((fe,ue)=>{const Ee=le(fe.id,fe.size);if(fe.id.startsWith("stat-")){const $e=Pe[ue-1];if($e&&$e.id.startsWith("stat-"))return null;{const Be=[];for(let qe=ue;qe<Pe.length&&Pe[qe].id.startsWith("stat-");qe++)Be.push(Pe[qe]);return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:Be.map(qe=>le(qe.id,qe.size))},`stat-cards-group-${ue}`)}}if(fe.id==="revenue-chart"){const $e=Pe[ue+1],_e=Pe[ue+2],Be=fe.size||"large";if($e&&_e&&($e.id==="inbox-card"&&_e.id==="tasks-card"||$e.id==="tasks-card"&&_e.id==="inbox-card")&&Be==="large")return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:Ee}),n.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[le($e.id,$e.size),le(_e.id,_e.size)]})]},"revenue-with-sidebar")}const xe=Pe[ue-1],ve=Pe[ue-2];if(xe?.id==="revenue-chart"&&(fe.id==="inbox-card"||fe.id==="tasks-card")){const $e=xe.size||"large",_e=Pe[ue+1];if($e==="large"&&_e&&(fe.id==="inbox-card"&&_e.id==="tasks-card"||fe.id==="tasks-card"&&_e.id==="inbox-card"))return null}if(ve?.id==="revenue-chart"&&(fe.id==="inbox-card"||fe.id==="tasks-card")&&(ve.size||"large")==="large")return null;const Fe=se(fe.size||"medium",fe.id);return Fe?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:n.jsx("div",{className:Fe,children:Ee})},fe.id):n.jsx("div",{children:Ee},fe.id)})}),I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>U(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(dh,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),n.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Gd,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((fe,ue)=>ue[1]-fe[1]).map(([fe,ue])=>{const Ee=hk(fe),Ye=fe===_;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ye?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ee?.symbol||fe}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:fe}),Ye&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:hf(ue,fe)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ee?.name||fe})]},fe)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Fu,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((fe,ue)=>ue[1]-fe[1]).map(([fe,ue])=>{const Ee=hk(fe),Ye=fe===_;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ye?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ee?.symbol||fe}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:fe}),Ye&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:hf(ue,fe)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ee?.name||fe})]},fe)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),n.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:n.jsxs("button",{onClick:()=>U(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(ji,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},aM=({extractedData:e,suggestions:t,source:r,onConfirm:a,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=L.useState(""),[d,u]=L.useState(""),[f,m]=L.useState(""),[p,y]=L.useState(""),[v,g]=L.useState(""),[b,w]=L.useState(""),[j,N]=L.useState(""),[S,E]=L.useState(null),[_,P]=L.useState({});L.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),u(e?.email?.value||""),m(e?.phone?.value||""),y(e?.title?.value||""),g(e?.linkedin?.value||""),w(e?.company?.value||""),N(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),u(e?.email||""),m(e?.phone||""),y(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),w(e?.currentCompany||""),N(e?.companyWebsite||"")),t?.existingCompany&&E(t.existingCompany.id)},[e,t,r]);const I=R=>R>=95?"text-green-600 bg-green-50":R>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",U=R=>R>=95?"High Confidence":R>=75?"Medium - Verify":"Low - Review",C=()=>{const R={};return l.trim()||(R.name="Name is required"),d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)&&(R.email="Invalid email format"),!S&&!b.trim()&&(R.company="Company is required"),P(R),Object.keys(R).length===0},O=()=>{if(!C())return;const R={name:l,email:d.toLowerCase(),phone:f,role:p,linkedin:v};a(R,{name:b,website:j},S)};return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(tr,{className:"w-6 h-6"})})]}),t?.existingContact&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[n.jsx(b0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),n.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),n.jsx("div",{className:"mt-2 flex gap-2",children:n.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ol,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:l,onChange:R=>c(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.name.confidence)}`,children:U(e.name.confidence)})]}),_.name&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.name})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:d,onChange:R=>u(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.email.confidence)}`,children:U(e.email.confidence)})]}),_.email&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.email})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx(Vj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"tel",value:f,onChange:R=>m(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.phone.confidence)}`,children:U(e.phone.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(kl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:p,onChange:R=>y(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.title.confidence)}`,children:U(e.title.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),n.jsxs("div",{className:"relative",children:[n.jsx(uh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:v,onChange:R=>g(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),n.jsxs("select",{value:S||"new",onChange:R=>{const z=R.target.value;if(z==="new")E(null);else{E(z);const H=o.find(Q=>Q.id===z);H&&(w(H.name),N(H.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.company?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(R=>n.jsx("option",{value:R.id,children:R.name},R.id))]}),_.company&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.company})]}),!S&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Wd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${_.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),n.jsxs("div",{className:"relative",children:[n.jsx(dh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:j,onChange:R=>N(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:O,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(gn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},Xse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=On(),[i,o]=L.useState("select"),[l,c]=L.useState(null),[d,u]=L.useState(null),[f,m]=L.useState(null),[p,y]=L.useState(null),[v,g]=L.useState(null),[b,w]=L.useState(!1),[j,N]=L.useState([]),[S,E]=L.useState([]),_=L.useRef(null),P=L.useRef(null),I=L.useRef(null),U=L.useRef(null);ut.useEffect(()=>{(async()=>{try{const[X,ee]=await Promise.all([ld(),rM(!0)]);N(X.data||[]),E(ee.data||[])}catch(X){console.error("Failed to load data:",X)}})()},[]);const C=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let re;try{console.log("Requesting rear camera..."),re=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),re=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",re),U.current=re,o("camera"),await new Promise(X=>setTimeout(X,100)),_.current){_.current.srcObject=re,console.log("Stream set to video element");try{await _.current.play(),console.log(" Camera started successfully")}catch(X){console.error("Video play error:",X)}}}catch(re){console.error(" Camera error:",re);let X="Camera access denied. Please grant camera permission or use file upload.";re.name==="NotAllowedError"?X="Camera permission denied. Please allow camera access in your browser settings.":re.name==="NotFoundError"?X="No camera found on this device. Please use file upload instead.":re.name==="NotReadableError"?X="Camera is already in use by another application.":re.name==="NotSupportedError"&&(X="Camera not supported on this browser. Please use file upload."),g(X),o("select"),O()}},O=()=>{U.current&&(U.current.getTracks().forEach(re=>re.stop()),U.current=null),_.current&&(_.current.srcObject=null)},R=()=>{if(!_.current||!P.current)return;const re=_.current,X=P.current,ee=X.getContext("2d");ee&&(X.width=re.videoWidth,X.height=re.videoHeight,ee.drawImage(re,0,0),X.toBlob(W=>{if(W){const T=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(T),u(X.toDataURL("image/jpeg")),O(),H(T)}},"image/jpeg",.95))},z=re=>{const X=re.target.files;if(!X||X.length===0)return;const ee=X[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(ee.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(ee.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(ee),ee.type.startsWith("image/")){const W=new FileReader;W.onload=T=>{u(T.target?.result)},W.readAsDataURL(ee)}H(ee)},H=async re=>{o("processing"),g(null),w(!0);try{const X=await $se(re,r);if(X.success)m(X.data.extractedData),y(X.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(X){console.error("Processing error:",X),g(X.message||"Failed to process business card. Please try again."),o("select")}finally{w(!1)}},Q=async(re,X,ee)=>{w(!0),g(null);try{const W=S.find(q=>q.name==="Business Card Scanner");if((await zse({contactData:re,companyData:X,linkToExistingCompany:ee,leadSourceId:W?.id||"",scanConfidenceScore:J(f),originalScanData:f,userId:r})).success)o("success"),a("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),g(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{w(!1)}},J=re=>{if(!re)return 0;const X=[re.name?.confidence||0,re.email?.confidence||0,re.phone?.confidence||0,re.title?.confidence||0,re.company?.confidence||0].filter(ee=>ee>0);return X.length===0?0:Math.round(X.reduce((ee,W)=>ee+W,0)/X.length)};return ut.useEffect(()=>()=>{O()},[]),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(tr,{className:"w-6 h-6"})})]}),v&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:re=>{re.preventDefault(),console.log("Camera button clicked"),C()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[n.jsx(u6,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),n.jsxs("button",{onClick:()=>I.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[n.jsx(Qd,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),n.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),n.jsx("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:z,className:"hidden"})]}),i==="camera-loading"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(yt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),n.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&n.jsxs("div",{className:"relative bg-black",children:[n.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),n.jsx("canvas",{ref:P,className:"hidden"}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:n.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),n.jsx("div",{className:"absolute top-4 left-4",children:n.jsx("button",{onClick:()=>{O(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:n.jsx(Vk,{className:"w-6 h-6 text-gray-700"})})}),n.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:n.jsx("button",{onClick:R,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:n.jsx(u6,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(yt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),d&&n.jsx("div",{className:"mt-6",children:n.jsx("img",{src:d,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&f&&n.jsx(aM,{extractedData:f,suggestions:p||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Q,onCancel:e,isProcessing:b,companies:j}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},Yse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=On(),[i,o]=L.useState("input"),[l,c]=L.useState(""),[d,u]=L.useState(null),[f,m]=L.useState(null),[p,y]=L.useState(null),[v,g]=L.useState(!1),[b,w]=L.useState([]),[j,N]=L.useState([]);ut.useEffect(()=>{(async()=>{try{const[C,O]=await Promise.all([ld(),rM(!0)]);w(C.data||[]),N(O.data||[])}catch(C){console.error("Failed to load data:",C)}})()},[]);const S=U=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(U),E=U=>{let C=U.trim();return!C.startsWith("http://")&&!C.startsWith("https://")&&(C=`https://${C}`),C.includes("www.")||(C=C.replace("linkedin.com","www.linkedin.com")),C.replace(/\/$/,"")},_=U=>{c(U),y(null)},P=async()=>{if(!l.trim()){y("Please enter a LinkedIn URL");return}const U=E(l);if(!S(U)){y("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),y(null),g(!0);try{const C=await Hse({linkedinUrl:U,userId:r});if(C.success)u(C.data.profile),m(C.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(C){console.error("Fetch error:",C);let O="Failed to fetch LinkedIn profile";C.message?.includes("Invalid LinkedIn URL")?O="Invalid LinkedIn URL format":C.message?.includes("private")?O="This LinkedIn profile is private and cannot be accessed":C.message?.includes("rate limit")&&(O="Rate limit exceeded. Please try again later"),y(O),o("input")}finally{g(!1)}},I=async(U,C,O)=>{g(!0),y(null);try{const R=j.find(H=>H.name==="LinkedIn Scanner");if((await Wse({contactData:U,linkedinData:d?{headline:d.headline,currentRole:d.currentRole,profileImageUrl:d.profileImageUrl}:void 0,companyData:C,linkToExistingCompany:O,leadSourceId:R?.id||"",userId:r})).success)o("success"),a("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(R){console.error("Confirm error:",R),y(R.message||"Failed to create contact. Please try again."),s(R.message||"Failed to create contact")}finally{g(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(tr,{className:"w-6 h-6"})})]}),p&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[n.jsx(Zn,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsx("div",{className:"text-red-800",children:p})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),n.jsxs("div",{className:"relative",children:[n.jsx(uh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:l,onChange:U=>_(U.target.value),onKeyPress:U=>U.key==="Enter"&&P(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Paste any public LinkedIn profile URL"}),n.jsx("li",{children:"We'll extract available contact and company information"}),n.jsx("li",{children:"Review and edit before saving to your CRM"}),n.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:P,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(uh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(yt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&d&&n.jsx(aM,{extractedData:d,suggestions:f||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:I,onCancel:e,isProcessing:v,companies:b}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var fm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qse={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Jse=class{#e=Qse;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},lh=new Jse;function Zse(e){setTimeout(e,0)}var _h=typeof window>"u"||"Deno"in globalThis;function yl(){}function eie(e,t){return typeof e=="function"?e(t):e}function pk(e){return typeof e=="number"&&e>=0&&e!==1/0}function sM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function v0(e,t){return typeof e=="function"?e(t):e}function Qc(e,t){return typeof e=="function"?e(t):e}function vI(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==r3(o,t.options))return!1}else if(!Jx(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function yI(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ah(t.options.mutationKey)!==Ah(i))return!1}else if(!Jx(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function r3(e,t){return(t?.queryKeyHashFn||Ah)(e)}function Ah(e){return JSON.stringify(e,(t,r)=>mk(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function Jx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Jx(e[r],t[r])):!1}var tie=Object.prototype.hasOwnProperty;function iM(e,t,r=0){if(e===t)return e;if(r>500)return t;const a=bI(e)&&bI(t);if(!a&&!(mk(e)&&mk(t)))return t;const i=(a?e:Object.keys(e)).length,o=a?t:Object.keys(t),l=o.length,c=a?new Array(l):{};let d=0;for(let u=0;u<l;u++){const f=a?u:o[u],m=e[f],p=t[f];if(m===p){c[f]=m,(a?u<i:tie.call(e,f))&&d++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){c[f]=p;continue}const y=iM(m,p,r+1);c[f]=y,y===m&&d++}return i===l&&d===i?e:c}function cy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function bI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mk(e){if(!wI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!wI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wI(e){return Object.prototype.toString.call(e)==="[object Object]"}function rie(e){return new Promise(t=>{lh.setTimeout(t,e)})}function xk(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?iM(e,t):t}function nie(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function aie(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var n3=Symbol();function oM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===n3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function a3(e,t){return typeof e=="function"?e(...t):!!e}function sie(e,t,r){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var iie=class extends fm{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!_h&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},s3=new iie;function gk(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var oie=Zse;function lie(){let e=[],t=0,r=l=>{l()},a=l=>{l()},s=oie;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{s=l}}}var Ri=lie(),cie=class extends fm{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!_h&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},dy=new cie;function die(e){return Math.min(1e3*2**e,3e4)}function lM(e){return(e??"online")==="online"?dy.isOnline():!0}var vk=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function cM(e){let t=!1,r=0,a;const s=gk(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new vk(v);m(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>s3.isFocused()&&(e.networkMode==="always"||dy.isOnline())&&e.canRun(),u=()=>lM(e.networkMode)&&e.canRun(),f=v=>{i()||(a?.(),s.resolve(v))},m=v=>{i()||(a?.(),s.reject(v))},p=()=>new Promise(v=>{a=g=>{(i()||d())&&v(g)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{if(i())return;const w=e.retry??(_h?0:3),j=e.retryDelay??die,N=typeof j=="function"?j(r,b):j,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,b);if(t||!S){m(b);return}r++,e.onFail?.(r,b),rie(N).then(()=>d()?void 0:p()).then(()=>{t?m(b):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(a?.(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():p().then(y),s)}}var dM=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pk(this.gcTime)&&(this.#e=lh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_h?1/0:300*1e3))}clearGcTimeout(){this.#e&&(lh.clearTimeout(this.#e),this.#e=void 0)}},uie=class extends dM{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=jI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=jI(this.options);t.data!==void 0&&(this.setState(NI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=xk(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(yl).catch(yl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Qc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>v0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!sM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=oM(this.options,t),d=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=cM({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof vk&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof vk){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uM(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,...NI(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ri.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function uM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function NI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function jI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fM=class extends fm{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=gk(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#m;#f;#h;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),kI(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return yk(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return yk(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Qc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!cy(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&SI(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||Qc(this.options.enabled,this.#t)!==Qc(t.enabled,this.#t)||v0(this.options.staleTime,this.#t)!==v0(t.staleTime,this.#t))&&this.#x();const s=this.#g();a&&(this.#t!==r||Qc(this.options.enabled,this.#t)!==Qc(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return hie(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(yl)),t}#x(){this.#b();const e=v0(this.options.staleTime,this.#t);if(_h||this.#a.isStale||!pk(e))return;const r=sM(this.#a.dataUpdatedAt,e)+1;this.#c=lh.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(_h||Qc(this.options.enabled,this.#t)===!1||!pk(this.#l)||this.#l===0)&&(this.#d=lh.setInterval(()=>{(this.options.refetchIntervalInBackground||s3.isFocused())&&this.#u()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&(lh.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(lh.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:d}=e;let u={...d},f=!1,m;if(t._optimisticResults){const P=this.hasListeners(),I=!P&&kI(e,t),U=P&&SI(e,r,t,a);(I||U)&&(u={...u,...uM(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:v}=u;m=u.data;let g=!1;if(t.placeholderData!==void 0&&m===void 0&&v==="pending"){let P;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(P=s.data,g=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(v="success",m=xk(s?.data,P,t),f=!0)}if(t.select&&m!==void 0&&!g)if(s&&m===i?.data&&t.select===this.#m)m=this.#f;else try{this.#m=t.select,m=t.select(m),m=xk(s?.data,m,t),this.#f=m,this.#s=null}catch(P){this.#s=P}this.#s&&(p=this.#s,m=this.#f,y=Date.now(),v="error");const b=u.fetchStatus==="fetching",w=v==="pending",j=v==="error",N=w&&b,S=m!==void 0,_={status:v,fetchStatus:u.fetchStatus,isPending:w,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:j&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:i3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Qc(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=_.data!==void 0,I=_.status==="error"&&!P,U=R=>{I?R.reject(_.error):P&&R.resolve(_.data)},C=()=>{const R=this.#o=_.promise=gk();U(R)},O=this.#o;switch(O.status){case"pending":e.queryHash===r.queryHash&&U(O);break;case"fulfilled":(I||_.data!==O.value)&&C();break;case"rejected":(!I||_.error!==O.reason)&&C();break}}return _}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),cy(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(e){Ri.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function fie(e,t){return Qc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function kI(e,t){return fie(e,t)||e.state.data!==void 0&&yk(e,t,t.refetchOnMount)}function yk(e,t,r){if(Qc(t.enabled,e)!==!1&&v0(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&i3(e,t)}return!1}function SI(e,t,r,a){return(e!==t||Qc(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&i3(e,r)}function i3(e,t){return Qc(t.enabled,e)!==!1&&e.isStaleByTime(v0(t.staleTime,e))}function hie(e,t){return!cy(e.getCurrentResult(),t)}function uy(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const f=y=>{sie(y,()=>t.signal,()=>u=!0)},m=oM(t.options,t.fetchOptions),p=async(y,v,g)=>{if(u)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const w=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return f(E),E})(),j=await m(w),{maxPages:N}=t.options,S=g?aie:nie;return{pages:S(y.pages,j,N),pageParams:S(y.pageParams,v,N)}};if(s&&i.length){const y=s==="backward",v=y?hM:bk,g={pages:i,pageParams:o},b=v(a,g);l=await p(g,b,y)}else{const y=e??i.length;do{const v=c===0?o[0]??a.initialPageParam:bk(a,l);if(c>0&&v==null)break;l=await p(l,v),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function bk(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function hM(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function pie(e,t){return t?bk(e,t)!=null:!1}function mie(e,t){return!t||!e.getPreviousPageParam?!1:hM(e,t)!=null}var xie=class extends fM{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:uy()})}getOptimisticResult(e){return e.behavior=uy(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,a=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=a,c=r.fetchMeta?.fetchMore?.direction,d=o&&c==="forward",u=s&&c==="forward",f=o&&c==="backward",m=s&&c==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:pie(t,r.data),hasPreviousPage:mie(t,r.data),isFetchNextPageError:d,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:m,isRefetchError:l&&!d&&!f,isRefetching:i&&!u&&!m}}},gie=class extends dM{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||pM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=cM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ri.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function pM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vie=class extends fm{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new gie({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=Sv(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Sv(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Sv(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=Sv(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ri.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>yI(t,r))}findAll(e={}){return this.getAll().filter(t=>yI(e,t))}notify(e){Ri.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ri.batch(()=>Promise.all(e.map(t=>t.continue().catch(yl))))}};function Sv(e){return e.options.scope?.id}var yie=class extends fm{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),cy(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ah(r.mutationKey)!==Ah(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??pM();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ri.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,a,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,a,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},bie=class extends fm{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??r3(a,t);let i=this.get(s);return i||(i=new uie({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ri.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>vI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>vI(e,r)):t}notify(e){Ri.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ri.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ri.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wie=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new bie,this.#t=e.mutationCache||new vie,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=s3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=dy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(v0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,o=eie(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ri.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ri.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ri.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Ri.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(yl).catch(yl)}invalidateQueries(e,t={}){return Ri.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Ri.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(yl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(yl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(v0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yl).catch(yl)}fetchInfiniteQuery(e){return e.behavior=uy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yl).catch(yl)}ensureInfiniteQueryData(e){return e.behavior=uy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return dy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Ah(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{Jx(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Ah(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{Jx(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=r3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},mM=L.createContext(void 0),Pa=e=>{const t=L.useContext(mM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Nie=({client:e,children:t})=>(L.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(mM.Provider,{value:e,children:t})),xM=L.createContext(!1),jie=()=>L.useContext(xM);xM.Provider;function kie(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Sie=L.createContext(kie()),_ie=()=>L.useContext(Sie),Aie=(e,t,r)=>{const a=r?.state.error&&typeof e.throwOnError=="function"?a3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},Cie=e=>{L.useEffect(()=>{e.clearReset()},[e])},Eie=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||a3(r,[e.error,a])),Tie=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Oie=(e,t)=>e.isLoading&&e.isFetching&&!t,Pie=(e,t)=>e?.suspense&&t.isPending,_I=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function gM(e,t,r){const a=jie(),s=_ie(),i=Pa(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",Tie(o),Aie(o,s,l),Cie(s);const c=!i.getQueryCache().get(o.queryHash),[d]=L.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),f=!a&&e.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(m=>{const p=f?d.subscribe(Ri.batchCalls(m)):yl;return d.updateResult(),p},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),L.useEffect(()=>{d.setOptions(o)},[o,d]),Pie(o,u))throw _I(o,d,s);if(Eie({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!_h&&Oie(u,a)&&(c?_I(o,d,s):l?.promise)?.catch(yl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function Gs(e,t){return gM(e,fM)}function ci(e,t){const r=Pa(),[a]=L.useState(()=>new yie(r,e));L.useEffect(()=>{a.setOptions(e)},[a,e]);const s=L.useSyncExternalStore(L.useCallback(o=>a.subscribe(Ri.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=L.useCallback((o,l)=>{a.mutate(o,l).catch(yl)},[a]);if(s.error&&a3(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Iie(e,t){return gM(e,xie)}const ub={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},Die=e=>Gs({queryKey:ub.companies(e),queryFn:async()=>(await ld(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Lie=e=>Gs({queryKey:ub.contacts(e),queryFn:async()=>(await Sh(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Fie=()=>Gs({queryKey:ub.deals(),queryFn:async()=>(await jg()).data||[],staleTime:60*1e3,gcTime:600*1e3}),Mie=()=>Gs({queryKey:ub.users(),queryFn:async()=>(await ad()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),Rie=()=>{const e=Pa();return ci({mutationFn:async({id:t,updates:r})=>(await M7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const a=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:a}},onError:(t,r,a)=>{a?.previousCompanies&&a.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},Bie=()=>{const e=Pa();return ci({mutationFn:async({id:t,updates:r})=>(await B7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const a=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:a}},onError:(t,r,a)=>{a?.previousContacts&&a.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},Uie=()=>{const e=Pa();return ci({mutationFn:async t=>(await R7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>a.id!==t))}})},qie=()=>{const e=Pa();return ci({mutationFn:async t=>(await U7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>a.id!==t))}})},$ie=()=>{const e=Pa();return ci({mutationFn:async t=>(await Promise.all(t.map(r=>R7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>!t.includes(a.id)))}})},zie=()=>{const e=Pa();return ci({mutationFn:async t=>(await Promise.all(t.map(r=>U7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>!t.includes(a.id)))}})},Hie=()=>{const e=Pa();return ci({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(a=>M7(a,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},a=>a?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},Id=["playbooks"],ks={templates:{all:()=>[...Id,"templates"],lists:()=>[...Id,"templates","list"],list:e=>[...Id,"templates","list",e],details:()=>[...Id,"templates","detail"],detail:e=>[...Id,"templates","detail",e]},instances:{all:()=>[...Id,"instances"],lists:()=>[...Id,"instances","list"],list:e=>[...Id,"instances","list",e],details:()=>[...Id,"instances","detail"],detail:e=>[...Id,"instances","detail",e],completions:e=>[...Id,"instances","detail",e,"completions"]}},vM=e=>{const t=Pa();return L.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:ks.templates.lists()})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[t]),Gs({queryKey:ks.templates.list(e),queryFn:async()=>{const r=await Zne(e);return r.data||r||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:r=>r})},Wie=e=>Gs({queryKey:ks.templates.detail(e),queryFn:async()=>{const t=await eae(e);return t.data||t},enabled:!!e}),yM=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>{const s=await tae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:ks.templates.lists()}),e.refetchQueries({queryKey:ks.templates.lists()}),t("Playbook template created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook template")}})},Vie=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({id:a,data:s})=>{const i=await rae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:ks.templates.lists()}),e.invalidateQueries({queryKey:ks.templates.detail(s.id)}),e.refetchQueries({queryKey:ks.templates.lists()}),t("Playbook template updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to update playbook template")}})},Gie=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>(await nae(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:ks.templates.lists()}),t("Playbook template deleted successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to delete playbook template")}})},fb=e=>Gs({queryKey:ks.instances.list(e),queryFn:async()=>{const t=await aae(e);return t.data||t||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:t=>t}),Kie=e=>Gs({queryKey:ks.instances.detail(e),queryFn:async()=>{const t=await sae(e);return t.data||t},enabled:!!e}),Xie=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>{const s=await iae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:ks.instances.lists()}),e.refetchQueries({queryKey:ks.instances.lists()}),t("Playbook instance created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook instance")}})},Yie=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({id:a,status:s})=>{const i=await oae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:ks.instances.lists()}),e.invalidateQueries({queryKey:ks.instances.detail(s.id)}),t("Playbook instance status updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to update playbook instance status")}})},Qie=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({instanceId:a,stepId:s})=>{const i=await lae(a,s);return i.data||i},onMutate:async({instanceId:a,stepId:s})=>{await e.cancelQueries({queryKey:ks.instances.completions(a)});const i=e.getQueryData(ks.instances.completions(a));return e.setQueryData(ks.instances.completions(a),(o=[])=>{if(o.some(c=>c.stepId===s))return o;const l=JSON.parse(localStorage.getItem("user_data")||"{}");return[...o,{id:`temp-${Date.now()}`,instanceId:a,stepId:s,completedBy:l.id,completedAt:new Date().toISOString()}]}),{previousCompletions:i}},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:ks.instances.completions(s.instanceId)}),e.invalidateQueries({queryKey:ks.instances.detail(s.instanceId)}),e.invalidateQueries({queryKey:ks.instances.lists()}),t("Step marked as complete!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:(a,s,i)=>{i?.previousCompletions&&e.setQueryData(ks.instances.completions(s.instanceId),i.previousCompletions),r(a.message||"Failed to mark step as complete")}})},kg=e=>{const t=Pa();return L.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:ks.instances.completions(e)})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[e,t]),Gs({queryKey:ks.instances.completions(e),queryFn:async()=>{const r=await cae(e);return r.data||r||[]},enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})};const{entries:bM,setPrototypeOf:AI,isFrozen:Jie,getPrototypeOf:Zie,getOwnPropertyDescriptor:eoe}=Object;let{freeze:Al,seal:sd,create:wk}=Object,{apply:Nk,construct:jk}=typeof Reflect<"u"&&Reflect;Al||(Al=function(t){return t});sd||(sd=function(t){return t});Nk||(Nk=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return t.apply(r,s)});jk||(jk=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return new t(...a)});const _v=Cl(Array.prototype.forEach),toe=Cl(Array.prototype.lastIndexOf),CI=Cl(Array.prototype.pop),Mm=Cl(Array.prototype.push),roe=Cl(Array.prototype.splice),Yv=Cl(String.prototype.toLowerCase),uj=Cl(String.prototype.toString),fj=Cl(String.prototype.match),Rm=Cl(String.prototype.replace),noe=Cl(String.prototype.indexOf),aoe=Cl(String.prototype.trim),Rd=Cl(Object.prototype.hasOwnProperty),vl=Cl(RegExp.prototype.test),Bm=soe(TypeError);function Cl(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return Nk(e,t,a)}}function soe(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return jk(e,r)}}function Ln(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yv;AI&&AI(e,null);let a=t.length;for(;a--;){let s=t[a];if(typeof s=="string"){const i=r(s);i!==s&&(Jie(t)||(t[a]=i),s=i)}e[s]=!0}return e}function ioe(e){for(let t=0;t<e.length;t++)Rd(e,t)||(e[t]=null);return e}function yu(e){const t=wk(null);for(const[r,a]of bM(e))Rd(e,r)&&(Array.isArray(a)?t[r]=ioe(a):a&&typeof a=="object"&&a.constructor===Object?t[r]=yu(a):t[r]=a);return t}function Um(e,t){for(;e!==null;){const a=eoe(e,t);if(a){if(a.get)return Cl(a.get);if(typeof a.value=="function")return Cl(a.value)}e=Zie(e)}function r(){return null}return r}const EI=Al(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hj=Al(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pj=Al(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ooe=Al(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mj=Al(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),loe=Al(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TI=Al(["#text"]),OI=Al(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xj=Al(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PI=Al(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Av=Al(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),coe=sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),doe=sd(/<%[\w\W]*|[\w\W]*%>/gm),uoe=sd(/\$\{[\w\W]*/gm),foe=sd(/^data-[\-\w.\u00B7-\uFFFF]+$/),hoe=sd(/^aria-[\-\w]+$/),wM=sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),poe=sd(/^(?:\w+script|data):/i),moe=sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NM=sd(/^html$/i),xoe=sd(/^[a-z][.\w]*(-[.\w]+)+$/i);var II=Object.freeze({__proto__:null,ARIA_ATTR:hoe,ATTR_WHITESPACE:moe,CUSTOM_ELEMENT:xoe,DATA_ATTR:foe,DOCTYPE_NAME:NM,ERB_EXPR:doe,IS_ALLOWED_URI:wM,IS_SCRIPT_OR_DATA:poe,MUSTACHE_EXPR:coe,TMPLIT_EXPR:uoe});const qm={element:1,text:3,progressingInstruction:7,comment:8,document:9},goe=function(){return typeof window>"u"?null:window},voe=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(a=r.getAttribute(s));const i="dompurify"+(a?"#"+a:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},DI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function jM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:goe();const t=Ke=>jM(Ke);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==qm.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const a=r,s=a.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:m,trustedTypes:p}=e,y=c.prototype,v=Um(y,"cloneNode"),g=Um(y,"remove"),b=Um(y,"nextSibling"),w=Um(y,"childNodes"),j=Um(y,"parentNode");if(typeof o=="function"){const Ke=r.createElement("template");Ke.content&&Ke.content.ownerDocument&&(r=Ke.content.ownerDocument)}let N,S="";const{implementation:E,createNodeIterator:_,createDocumentFragment:P,getElementsByTagName:I}=r,{importNode:U}=a;let C=DI();t.isSupported=typeof bM=="function"&&typeof j=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:R,TMPLIT_EXPR:z,DATA_ATTR:H,ARIA_ATTR:Q,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:X}=II;let{IS_ALLOWED_URI:ee}=II,W=null;const T=Ln({},[...EI,...hj,...pj,...mj,...TI]);let q=null;const V=Ln({},[...OI,...xj,...PI,...Av]);let B=Object.seal(wk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,oe=null;const me=Object.seal(wk(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let se=!0,de=!0,Re=!1,he=!0,Ue=!1,Oe=!0,le=!1,te=!1,Se=!1,we=!1,Pe=!1,fe=!1,ue=!0,Ee=!1;const Ye="user-content-";let xe=!0,ve=!1,Fe={},$e=null;const _e=Ln({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Be=null;const qe=Ln({},["audio","video","img","source","image","track"]);let Ze=null;const Vt=Ln({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",Tt="http://www.w3.org/1999/xhtml";let Ht=Tt,Ve=!1,jt=null;const gr=Ln({},[Dt,dt,Tt],uj);let nr=Ln({},["mi","mo","mn","ms","mtext"]),Ar=Ln({},["annotation-xml"]);const Ir=Ln({},["title","style","font","a","script"]);let Xt=null;const Qt=["application/xhtml+xml","text/html"],mr="text/html";let Fr=null,fn=null;const Br=r.createElement("form"),Qr=function(Le){return Le instanceof RegExp||Le instanceof Function},ir=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fn&&fn===Le)){if((!Le||typeof Le!="object")&&(Le={}),Le=yu(Le),Xt=Qt.indexOf(Le.PARSER_MEDIA_TYPE)===-1?mr:Le.PARSER_MEDIA_TYPE,Fr=Xt==="application/xhtml+xml"?uj:Yv,W=Rd(Le,"ALLOWED_TAGS")?Ln({},Le.ALLOWED_TAGS,Fr):T,q=Rd(Le,"ALLOWED_ATTR")?Ln({},Le.ALLOWED_ATTR,Fr):V,jt=Rd(Le,"ALLOWED_NAMESPACES")?Ln({},Le.ALLOWED_NAMESPACES,uj):gr,Ze=Rd(Le,"ADD_URI_SAFE_ATTR")?Ln(yu(Vt),Le.ADD_URI_SAFE_ATTR,Fr):Vt,Be=Rd(Le,"ADD_DATA_URI_TAGS")?Ln(yu(qe),Le.ADD_DATA_URI_TAGS,Fr):qe,$e=Rd(Le,"FORBID_CONTENTS")?Ln({},Le.FORBID_CONTENTS,Fr):_e,K=Rd(Le,"FORBID_TAGS")?Ln({},Le.FORBID_TAGS,Fr):yu({}),oe=Rd(Le,"FORBID_ATTR")?Ln({},Le.FORBID_ATTR,Fr):yu({}),Fe=Rd(Le,"USE_PROFILES")?Le.USE_PROFILES:!1,se=Le.ALLOW_ARIA_ATTR!==!1,de=Le.ALLOW_DATA_ATTR!==!1,Re=Le.ALLOW_UNKNOWN_PROTOCOLS||!1,he=Le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ue=Le.SAFE_FOR_TEMPLATES||!1,Oe=Le.SAFE_FOR_XML!==!1,le=Le.WHOLE_DOCUMENT||!1,we=Le.RETURN_DOM||!1,Pe=Le.RETURN_DOM_FRAGMENT||!1,fe=Le.RETURN_TRUSTED_TYPE||!1,Se=Le.FORCE_BODY||!1,ue=Le.SANITIZE_DOM!==!1,Ee=Le.SANITIZE_NAMED_PROPS||!1,xe=Le.KEEP_CONTENT!==!1,ve=Le.IN_PLACE||!1,ee=Le.ALLOWED_URI_REGEXP||wM,Ht=Le.NAMESPACE||Tt,nr=Le.MATHML_TEXT_INTEGRATION_POINTS||nr,Ar=Le.HTML_INTEGRATION_POINTS||Ar,B=Le.CUSTOM_ELEMENT_HANDLING||{},Le.CUSTOM_ELEMENT_HANDLING&&Qr(Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&Qr(Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&typeof Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(B.allowCustomizedBuiltInElements=Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(de=!1),Pe&&(we=!0),Fe&&(W=Ln({},TI),q=[],Fe.html===!0&&(Ln(W,EI),Ln(q,OI)),Fe.svg===!0&&(Ln(W,hj),Ln(q,xj),Ln(q,Av)),Fe.svgFilters===!0&&(Ln(W,pj),Ln(q,xj),Ln(q,Av)),Fe.mathMl===!0&&(Ln(W,mj),Ln(q,PI),Ln(q,Av))),Le.ADD_TAGS&&(typeof Le.ADD_TAGS=="function"?me.tagCheck=Le.ADD_TAGS:(W===T&&(W=yu(W)),Ln(W,Le.ADD_TAGS,Fr))),Le.ADD_ATTR&&(typeof Le.ADD_ATTR=="function"?me.attributeCheck=Le.ADD_ATTR:(q===V&&(q=yu(q)),Ln(q,Le.ADD_ATTR,Fr))),Le.ADD_URI_SAFE_ATTR&&Ln(Ze,Le.ADD_URI_SAFE_ATTR,Fr),Le.FORBID_CONTENTS&&($e===_e&&($e=yu($e)),Ln($e,Le.FORBID_CONTENTS,Fr)),Le.ADD_FORBID_CONTENTS&&($e===_e&&($e=yu($e)),Ln($e,Le.ADD_FORBID_CONTENTS,Fr)),xe&&(W["#text"]=!0),le&&Ln(W,["html","head","body"]),W.table&&(Ln(W,["tbody"]),delete K.tbody),Le.TRUSTED_TYPES_POLICY){if(typeof Le.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bm('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bm('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Le.TRUSTED_TYPES_POLICY,S=N.createHTML("")}else N===void 0&&(N=voe(p,s)),N!==null&&typeof S=="string"&&(S=N.createHTML(""));Al&&Al(Le),fn=Le}},qn=Ln({},[...hj,...pj,...ooe]),an=Ln({},[...mj,...loe]),wn=function(Le){let st=j(Le);(!st||!st.tagName)&&(st={namespaceURI:Ht,tagName:"template"});const mt=Yv(Le.tagName),Ot=Yv(st.tagName);return jt[Le.namespaceURI]?Le.namespaceURI===dt?st.namespaceURI===Tt?mt==="svg":st.namespaceURI===Dt?mt==="svg"&&(Ot==="annotation-xml"||nr[Ot]):!!qn[mt]:Le.namespaceURI===Dt?st.namespaceURI===Tt?mt==="math":st.namespaceURI===dt?mt==="math"&&Ar[Ot]:!!an[mt]:Le.namespaceURI===Tt?st.namespaceURI===dt&&!Ar[Ot]||st.namespaceURI===Dt&&!nr[Ot]?!1:!an[mt]&&(Ir[mt]||!qn[mt]):!!(Xt==="application/xhtml+xml"&&jt[Le.namespaceURI]):!1},Tr=function(Le){Mm(t.removed,{element:Le});try{j(Le).removeChild(Le)}catch{g(Le)}},zr=function(Le,st){try{Mm(t.removed,{attribute:st.getAttributeNode(Le),from:st})}catch{Mm(t.removed,{attribute:null,from:st})}if(st.removeAttribute(Le),Le==="is")if(we||Pe)try{Tr(st)}catch{}else try{st.setAttribute(Le,"")}catch{}},ne=function(Le){let st=null,mt=null;if(Se)Le="<remove></remove>"+Le;else{const vr=fj(Le,/^[\r\n\t ]+/);mt=vr&&vr[0]}Xt==="application/xhtml+xml"&&Ht===Tt&&(Le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Le+"</body></html>");const Ot=N?N.createHTML(Le):Le;if(Ht===Tt)try{st=new m().parseFromString(Ot,Xt)}catch{}if(!st||!st.documentElement){st=E.createDocument(Ht,"template",null);try{st.documentElement.innerHTML=Ve?S:Ot}catch{}}const Lt=st.body||st.documentElement;return Le&&mt&&Lt.insertBefore(r.createTextNode(mt),Lt.childNodes[0]||null),Ht===Tt?I.call(st,le?"html":"body")[0]:le?st.documentElement:Lt},je=function(Le){return _.call(Le.ownerDocument||Le,Le,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ke=function(Le){return Le instanceof f&&(typeof Le.nodeName!="string"||typeof Le.textContent!="string"||typeof Le.removeChild!="function"||!(Le.attributes instanceof u)||typeof Le.removeAttribute!="function"||typeof Le.setAttribute!="function"||typeof Le.namespaceURI!="string"||typeof Le.insertBefore!="function"||typeof Le.hasChildNodes!="function")},ie=function(Le){return typeof l=="function"&&Le instanceof l};function ge(Ke,Le,st){_v(Ke,mt=>{mt.call(t,Le,st,fn)})}const Ae=function(Le){let st=null;if(ge(C.beforeSanitizeElements,Le,null),ke(Le))return Tr(Le),!0;const mt=Fr(Le.nodeName);if(ge(C.uponSanitizeElement,Le,{tagName:mt,allowedTags:W}),Oe&&Le.hasChildNodes()&&!ie(Le.firstElementChild)&&vl(/<[/\w!]/g,Le.innerHTML)&&vl(/<[/\w!]/g,Le.textContent)||Le.nodeType===qm.progressingInstruction||Oe&&Le.nodeType===qm.comment&&vl(/<[/\w]/g,Le.data))return Tr(Le),!0;if(!(me.tagCheck instanceof Function&&me.tagCheck(mt))&&(!W[mt]||K[mt])){if(!K[mt]&&rt(mt)&&(B.tagNameCheck instanceof RegExp&&vl(B.tagNameCheck,mt)||B.tagNameCheck instanceof Function&&B.tagNameCheck(mt)))return!1;if(xe&&!$e[mt]){const Ot=j(Le)||Le.parentNode,Lt=w(Le)||Le.childNodes;if(Lt&&Ot){const vr=Lt.length;for(let Mr=vr-1;Mr>=0;--Mr){const Vr=v(Lt[Mr],!0);Vr.__removalCount=(Le.__removalCount||0)+1,Ot.insertBefore(Vr,b(Le))}}}return Tr(Le),!0}return Le instanceof c&&!wn(Le)||(mt==="noscript"||mt==="noembed"||mt==="noframes")&&vl(/<\/no(script|embed|frames)/i,Le.innerHTML)?(Tr(Le),!0):(Ue&&Le.nodeType===qm.text&&(st=Le.textContent,_v([O,R,z],Ot=>{st=Rm(st,Ot," ")}),Le.textContent!==st&&(Mm(t.removed,{element:Le.cloneNode()}),Le.textContent=st)),ge(C.afterSanitizeElements,Le,null),!1)},Ge=function(Le,st,mt){if(ue&&(st==="id"||st==="name")&&(mt in r||mt in Br))return!1;if(!(de&&!oe[st]&&vl(H,st))){if(!(se&&vl(Q,st))){if(!(me.attributeCheck instanceof Function&&me.attributeCheck(st,Le))){if(!q[st]||oe[st]){if(!(rt(Le)&&(B.tagNameCheck instanceof RegExp&&vl(B.tagNameCheck,Le)||B.tagNameCheck instanceof Function&&B.tagNameCheck(Le))&&(B.attributeNameCheck instanceof RegExp&&vl(B.attributeNameCheck,st)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(st,Le))||st==="is"&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&vl(B.tagNameCheck,mt)||B.tagNameCheck instanceof Function&&B.tagNameCheck(mt))))return!1}else if(!Ze[st]){if(!vl(ee,Rm(mt,re,""))){if(!((st==="src"||st==="xlink:href"||st==="href")&&Le!=="script"&&noe(mt,"data:")===0&&Be[Le])){if(!(Re&&!vl(J,Rm(mt,re,"")))){if(mt)return!1}}}}}}}return!0},rt=function(Le){return Le!=="annotation-xml"&&fj(Le,X)},Qe=function(Le){ge(C.beforeSanitizeAttributes,Le,null);const{attributes:st}=Le;if(!st||ke(Le))return;const mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let Ot=st.length;for(;Ot--;){const Lt=st[Ot],{name:vr,namespaceURI:Mr,value:Vr}=Lt,Mn=Fr(vr),Fs=Vr;let $n=vr==="value"?Fs:aoe(Fs);if(mt.attrName=Mn,mt.attrValue=$n,mt.keepAttr=!0,mt.forceKeepAttr=void 0,ge(C.uponSanitizeAttribute,Le,mt),$n=mt.attrValue,Ee&&(Mn==="id"||Mn==="name")&&(zr(vr,Le),$n=Ye+$n),Oe&&vl(/((--!?|])>)|<\/(style|title|textarea)/i,$n)){zr(vr,Le);continue}if(Mn==="attributename"&&fj($n,"href")){zr(vr,Le);continue}if(mt.forceKeepAttr)continue;if(!mt.keepAttr){zr(vr,Le);continue}if(!he&&vl(/\/>/i,$n)){zr(vr,Le);continue}Ue&&_v([O,R,z],zn=>{$n=Rm($n,zn," ")});const hs=Fr(Le.nodeName);if(!Ge(hs,Mn,$n)){zr(vr,Le);continue}if(N&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Mr)switch(p.getAttributeType(hs,Mn)){case"TrustedHTML":{$n=N.createHTML($n);break}case"TrustedScriptURL":{$n=N.createScriptURL($n);break}}if($n!==Fs)try{Mr?Le.setAttributeNS(Mr,vr,$n):Le.setAttribute(vr,$n),ke(Le)?Tr(Le):CI(t.removed)}catch{zr(vr,Le)}}ge(C.afterSanitizeAttributes,Le,null)},tt=function Ke(Le){let st=null;const mt=je(Le);for(ge(C.beforeSanitizeShadowDOM,Le,null);st=mt.nextNode();)ge(C.uponSanitizeShadowNode,st,null),Ae(st),Qe(st),st.content instanceof i&&Ke(st.content);ge(C.afterSanitizeShadowDOM,Le,null)};return t.sanitize=function(Ke){let Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st=null,mt=null,Ot=null,Lt=null;if(Ve=!Ke,Ve&&(Ke="<!-->"),typeof Ke!="string"&&!ie(Ke))if(typeof Ke.toString=="function"){if(Ke=Ke.toString(),typeof Ke!="string")throw Bm("dirty is not a string, aborting")}else throw Bm("toString is not a function");if(!t.isSupported)return Ke;if(te||ir(Le),t.removed=[],typeof Ke=="string"&&(ve=!1),ve){if(Ke.nodeName){const Vr=Fr(Ke.nodeName);if(!W[Vr]||K[Vr])throw Bm("root node is forbidden and cannot be sanitized in-place")}}else if(Ke instanceof l)st=ne("<!---->"),mt=st.ownerDocument.importNode(Ke,!0),mt.nodeType===qm.element&&mt.nodeName==="BODY"||mt.nodeName==="HTML"?st=mt:st.appendChild(mt);else{if(!we&&!Ue&&!le&&Ke.indexOf("<")===-1)return N&&fe?N.createHTML(Ke):Ke;if(st=ne(Ke),!st)return we?null:fe?S:""}st&&Se&&Tr(st.firstChild);const vr=je(ve?Ke:st);for(;Ot=vr.nextNode();)Ae(Ot),Qe(Ot),Ot.content instanceof i&&tt(Ot.content);if(ve)return Ke;if(we){if(Pe)for(Lt=P.call(st.ownerDocument);st.firstChild;)Lt.appendChild(st.firstChild);else Lt=st;return(q.shadowroot||q.shadowrootmode)&&(Lt=U.call(a,Lt,!0)),Lt}let Mr=le?st.outerHTML:st.innerHTML;return le&&W["!doctype"]&&st.ownerDocument&&st.ownerDocument.doctype&&st.ownerDocument.doctype.name&&vl(NM,st.ownerDocument.doctype.name)&&(Mr="<!DOCTYPE "+st.ownerDocument.doctype.name+`>
`+Mr),Ue&&_v([O,R,z],Vr=>{Mr=Rm(Mr,Vr," ")}),N&&fe?N.createHTML(Mr):Mr},t.setConfig=function(){let Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ir(Ke),te=!0},t.clearConfig=function(){fn=null,te=!1},t.isValidAttribute=function(Ke,Le,st){fn||ir({});const mt=Fr(Ke),Ot=Fr(Le);return Ge(mt,Ot,st)},t.addHook=function(Ke,Le){typeof Le=="function"&&Mm(C[Ke],Le)},t.removeHook=function(Ke,Le){if(Le!==void 0){const st=toe(C[Ke],Le);return st===-1?void 0:roe(C[Ke],st,1)[0]}return CI(C[Ke])},t.removeHooks=function(Ke){C[Ke]=[]},t.removeAllHooks=function(){C=DI()},t}var Zx=jM();const Km={all:["users"],lists:()=>[...Km.all,"list"],list:e=>[...Km.lists(),{search:e}],details:()=>[...Km.all,"detail"],detail:e=>[...Km.details(),e]},o3=e=>Gs({queryKey:Km.list(e),queryFn:async()=>{const t=await ad(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),hb=({instanceId:e,isOpen:t,onClose:r})=>{const{showSuccess:a,showError:s}=On(),[i,o]=L.useState(new Set),[l,c]=L.useState(new Set),[d,u]=L.useState(null),[f,m]=L.useState(new Map),p=L.useRef(!1),{data:y,isLoading:v}=Kie(e),{data:g=[],isLoading:b}=kg(e),{data:w=[]}=o3(),j=Qie(),N=Yie(),S=H=>w.find(J=>J.id===H)?.name||H;L.useEffect(()=>{if(y?.templateSnapshot?.sections){const H=y.templateSnapshot.sections.map(J=>String(J.id)).filter(Boolean),Q=new Set(H);o(Q)}},[y]);const E=L.useMemo(()=>{if(!y?.templateSnapshot?.sections)return{completed:0,total:0,percentage:0};let H=0;y.templateSnapshot.sections.forEach(re=>{re.steps&&(H+=re.steps.length)});const Q=g.length,J=H>0?Math.round(Q/H*100):0;return{completed:Q,total:H,percentage:J}},[y,g]);L.useEffect(()=>{y&&E.total>0&&E.completed>=E.total&&y.status!=="completed"&&!p.current&&!N.isPending&&(p.current=!0,N.mutate({id:e,status:"completed"})),y?.status==="completed"&&(p.current=!1)},[E.completed,E.total,y?.status,e,N.isPending]),L.useEffect(()=>{if(!N.isPending&&p.current){const H=setTimeout(()=>{y?.status==="completed"&&(p.current=!1)},500);return()=>clearTimeout(H)}},[N.isPending,y?.status]);const _=H=>g.some(Q=>Q.stepId===H),P=H=>g.find(Q=>Q.stepId===H),I=H=>{if(!H.steps)return{completed:0,total:0};const Q=H.steps.length;return{completed:H.steps.filter(re=>_(re.id)).length,total:Q}},U=H=>{o(Q=>{const J=new Set(Q);return J.has(H)?J.delete(H):J.add(H),J})},C=H=>{c(Q=>{const J=new Set(Q);return J.has(H)?J.delete(H):J.add(H),J})},O=async H=>{if(!_(H)){u(H);try{await j.mutateAsync({instanceId:e,stepId:H}),setTimeout(()=>{u(null)},300)}catch{u(null)}}},R=(H,Q)=>{const J=document.createElement("a");J.href=H,J.download=Q,J.target="_blank",document.body.appendChild(J),J.click(),document.body.removeChild(J)};if(!t)return null;const z=v||b;return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(oi,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:y?.templateSnapshot?.name||"Loading..."}),(y?.templateSnapshot?.version||y?.templateVersion)&&n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Version ",y.templateSnapshot?.version||y.templateVersion]})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]}),!z&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[E.completed," of ",E.total," steps complete"]}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[E.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all ${E.percentage===100?"bg-green-500":E.percentage>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${E.percentage}%`}})}),E.percentage===100&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(gn,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-xs font-semibold text-green-700",children:"All steps completed!"})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:z?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):y?.templateSnapshot?.sections?n.jsx("div",{className:"space-y-4",children:y.templateSnapshot.sections.sort((H,Q)=>(H.order||0)-(Q.order||0)).map(H=>{const Q=I(H),J=i.has(H.id);return n.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[n.jsxs("button",{onClick:()=>U(H.id),className:"w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform ${J?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:n.jsx(zs,{className:`w-5 h-5 transition-transform ${J?"":"-rotate-90"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:H.name}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Q.completed," of ",Q.total," steps completed"]})]})]}),Q.completed===Q.total&&Q.total>0&&n.jsx(gn,{className:"w-5 h-5 text-green-500"})]}),J&&H.steps&&n.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50",children:H.steps.sort((re,X)=>(re.order||0)-(X.order||0)).map(re=>{const X=_(re.id),ee=P(re.id),W=l.has(re.id);return n.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[n.jsxs("div",{className:"p-4 flex items-start gap-4",children:[n.jsx("div",{className:"pt-1",children:n.jsx("button",{onClick:()=>O(re.id),disabled:X||d===re.id||j.isPending,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${X?"bg-green-500 border-green-500 text-white":d===re.id?"bg-indigo-50 border-indigo-500":"bg-white border-slate-300 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d===re.id?n.jsx(yt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):X?n.jsx(ji,{className:"w-4 h-4"}):null})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-semibold ${X?"text-slate-600 line-through":"text-slate-900"}`,children:re.name}),ee&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ol,{className:"w-3 h-3 text-slate-400"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Completed by ",ee.completedBy?S(ee.completedBy):"Unknown"," on"," ",ee.completedAt?new Date(ee.completedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Unknown date"]})]})]}),(re.instructions||re.checklistItems?.length>0||re.attachments?.length>0)&&n.jsx("button",{onClick:()=>C(re.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(ya,{className:`w-4 h-4 text-slate-400 transition-transform ${W?"rotate-90":""}`})})]})})]}),W&&n.jsxs("div",{className:"px-4 pb-4 pl-14 space-y-4",children:[re.instructions&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2 flex items-center gap-2",children:[n.jsx(ea,{className:"w-3.5 h-3.5"}),"Instructions"]}),n.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:Zx.sanitize(re.instructions)}})]}),re.checklistItems&&re.checklistItems.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Ty,{className:"w-3.5 h-3.5"}),"Checklist"]}),n.jsx("div",{className:"space-y-2",children:re.checklistItems.map((T,q)=>{`${re.id}${q}`;const B=(f.get(re.id)||new Set).has(q);return n.jsxs("div",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 rounded-lg p-1 -ml-1 transition-colors",onClick:()=>{const K=f.get(re.id)||new Set,oe=new Set(K);B?oe.delete(q):oe.add(q),m(me=>{const se=new Map(me);return oe.size>0?se.set(re.id,oe):se.delete(re.id),se})},children:[n.jsx("div",{className:`w-4 h-4 rounded border-2 mt-0.5 flex-shrink-0 flex items-center justify-center transition-all ${B?"bg-green-500 border-green-500":"border-slate-300 hover:border-indigo-500"}`,children:B&&n.jsx(ji,{className:"w-3 h-3 text-white"})}),n.jsx("span",{className:`text-sm flex-1 ${B?"text-slate-500 line-through":"text-slate-700"}`,children:T})]},q)})})]}),re.attachments&&re.attachments.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(ea,{className:"w-3.5 h-3.5"}),"Attachments"]}),n.jsx("div",{className:"space-y-2",children:re.attachments.map((T,q)=>n.jsx("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:T.type==="pdf"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center",children:n.jsx(ea,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:T.name||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PDF Document"})]}),n.jsx("button",{onClick:()=>R(T.url,T.name||"document.pdf"),className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Download PDF",children:n.jsx(h0,{className:"w-4 h-4 text-indigo-600"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:n.jsx(s0,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:T.name||"Google Drive File"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Google Drive"})]}),n.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white rounded-lg transition-colors flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View in Google Drive",children:n.jsx(Ss,{className:"w-4 h-4"})})]})},q))})]})]})]},re.id)})})]},H.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(oi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Playbook Data"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Unable to load playbook instance data."})]})}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:n.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm",children:"Close"})})]})})]})},yoe=({instance:e,deals:t,projects:r,onView:a})=>{const{data:s=[]}=kg(e.id),i=e.templateSnapshot?.sections?.reduce((f,m)=>f+(m.steps?.length||0),0)||0,o=s.length,l=i>0?Math.round(o/i*100):0,c=e.dealId?t.find(f=>f.id===e.dealId):null,d=e.projectId?r.find(f=>f.id===e.projectId):null,u=c?{type:"Deal",name:c.title||c.name,id:c.id}:d?{type:"Project",name:d.title||d.name,id:d.id}:null;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(oi,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:e.templateSnapshot?.name||"Unknown Playbook"}),u&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.type==="Deal"?n.jsx(kl,{className:"w-3 h-3 text-slate-400"}):n.jsx(Vd,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-xs text-slate-500 truncate",children:u.name})]})]})]}),l===100&&n.jsx(ji,{className:"w-5 h-5 text-green-500 shrink-0"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[o," / ",i," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${l===100?"bg-green-500":l>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${l}%`}})})]}),n.jsxs("button",{onClick:()=>{u?.type==="Deal"||u?.type,a(e.id)},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View ",u?u.type:"Playbook",n.jsx(Ss,{className:"w-3 h-3"})]})]})},boe=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:a=""})=>{const{showSuccess:s,showError:i}=On(),o=Pa(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,d]=L.useState("companies"),[u,f]=L.useState(""),[m,p]=L.useState(null),[y,v]=L.useState(null),[g,b]=L.useState(null),{data:w=[],isLoading:j}=fb({companyId:m?.id}),{data:N=[],isLoading:S}=Die(u),{data:E=[],isLoading:_}=Lie(u),{data:P=[],isLoading:I}=Fie(),{data:U=[],isLoading:C}=Mie(),{data:O=[]}=Gs({queryKey:["projects"],queryFn:async()=>{const He=await I0();return He.data||He||[]},staleTime:300*1e3}),R=Rie(),z=Bie(),H=Uie(),Q=qie(),J=$ie(),re=zie(),X=Hie(),ee=S||_||I||C,[W,T]=L.useState([]),[q,V]=L.useState([]),[B,K]=L.useState([]),[oe,me]=L.useState(!1),[se,de]=L.useState(!1),[Re,he]=L.useState({}),[Ue,Oe]=L.useState(!1),[le,te]=L.useState(!1),[Se,we]=L.useState({}),[Pe,fe]=L.useState("details"),[ue,Ee]=L.useState(!1),[Ye,xe]=L.useState(null),[ve,Fe]=L.useState(null),[$e,_e]=L.useState(!1),[Be,qe]=L.useState(!1),[Ze,Vt]=L.useState([]),[Dt,dt]=L.useState([]),[Tt,Ht]=L.useState(!1),[Ve,jt]=L.useState(!1),[gr,nr]=L.useState(!1),[Ar,Ir]=L.useState(!1),[Xt,Qt]=L.useState(null),[mr,Fr]=L.useState(null),[fn,Br]=L.useState(!1),[Qr,ir]=L.useState(""),[qn,an]=L.useState(!1),[wn,Tr]=L.useState(null),[zr,ne]=L.useState(null),[je,ke]=L.useState(!1),[ie,ge]=L.useState(""),[Ae,Ge]=L.useState(0),[rt,Qe]=L.useState([]),[tt,Ke]=L.useState(""),[Le,st]=L.useState(!1),[mt,Ot]=L.useState(null),[Lt,vr]=L.useState(null),[Mr,Vr]=L.useState(!1),[Mn,Fs]=L.useState(""),[$n,hs]=L.useState(0),[zn,As]=L.useState([]),[Hn,Nn]=L.useState(!1),[ul,ua]=L.useState(!1),[We,Et]=L.useState(!1),_t=async()=>{Et(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>Et(!1),500)}};L.useEffect(()=>{a!==void 0&&f(a)},[a]),L.useEffect(()=>{Vt([]),dt([])},[c,u]),L.useEffect(()=>{const He=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",He),()=>window.removeEventListener("refresh-crm",He)},[o]);const sr=async He=>{if(m)try{await R.mutateAsync({id:m.id,updates:He}),p({...m,...He}),s("Account updated")}catch{i("Update failed")}},yr=async()=>{if(!(!y||ue)){if(!Se.name||!Se.email){i("Name and Email are required fields");return}Ee(!0);try{const He={...Se,companyId:Se.companyId===""?null:Se.companyId,phone:Se.phone===""?null:Se.phone,linkedin:Se.linkedin===""?null:Se.linkedin,role:Se.role===""?null:Se.role};await z.mutateAsync({id:y.id,updates:He});const br={...y,...He};v(br),te(!1),s("Contact profile updated successfully")}catch(He){console.error("Contact update error:",He),i(He.message||"Failed to update contact. Please try again.")}finally{Ee(!1)}}},pr=async He=>{_e(!0);try{await H.mutateAsync(He),m?.id===He&&(p(null),de(!1)),xe(null),s("Company deleted successfully")}catch(br){i(br.message||"Failed to delete company")}finally{_e(!1)}},Dr=async He=>{qe(!0);try{await Q.mutateAsync(He),y?.id===He&&(v(null),te(!1)),Fe(null),s("Contact deleted successfully")}catch(br){i(br.message||"Failed to delete contact")}finally{qe(!1)}};L.useEffect(()=>{m?.id?(async()=>{try{Br(!0);const br=await uk(m.id);br.success&&Fr(br.data)}catch{Fr(null)}finally{Br(!1)}})():Fr(null)},[m?.id]);const ta=()=>{p(null),de(!1),ir(""),ke(!1),Fr(null)},jn=()=>{v(null),te(!1),Ke(""),Vr(!1)},Jt=He=>{const br=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Cr=[];let Er;for(;(Er=br.exec(He))!==null;){const Kr=Er[1].trim(),Rn=U.find(ka=>ka.name.toLowerCase()===Kr.toLowerCase());Rn&&Cr.push(Rn.id)}return[...new Set(Cr)]},cr=He=>{const br=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Cr=[];let Er=0,Kr;for(;(Kr=br.exec(He))!==null;){Kr.index>Er&&Cr.push(He.substring(Er,Kr.index));const Rn=Kr[1].trim(),ka=U.find(Ys=>Ys.name.toLowerCase()===Rn.toLowerCase());ka?Cr.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",ka.name]},Kr.index)):Cr.push(`@${Rn}`),Er=Kr.index+Kr[0].length}return Er<He.length&&Cr.push(He.substring(Er)),Cr.length>0?Cr:He},Ft=He=>{const br=He.target.value,Cr=He.target.selectionStart;ir(br),Ge(Cr);const Er=br.substring(0,Cr),Kr=Er.lastIndexOf("@");if(Kr!==-1){const Rn=Er.substring(Kr+1),ka=Kr>0?Er[Kr-1]:" ";if((ka===" "||ka===`
`||Kr===0)&&!Rn.includes(" ")&&!Rn.includes(`
`)){ge(Rn);const Ys=U.filter(_i=>_i.name.toLowerCase().includes(Rn.toLowerCase())||_i.email.toLowerCase().includes(Rn.toLowerCase()));Qe(Ys.slice(0,5)),ke(!0);return}}ke(!1)},wr=He=>{const Cr=Qr.substring(0,Ae).lastIndexOf("@"),Er=Qr.substring(Ae),Rn=`${Qr.substring(0,Cr)}@${He.name} ${Er}`;ir(Rn),ke(!1)},zt=async()=>{if(!(!m||!Qr.trim())){an(!0);try{const He=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",br=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Cr={id:`note_${Date.now()}`,userId:He,userName:br,text:Qr.trim(),createdAt:new Date().toISOString()},Er=[...m.notes||[],Cr];await R.mutateAsync({id:m.id,updates:{notes:Er}}),p({...m,notes:Er}),o.invalidateQueries({queryKey:["companies"]});const Kr=Jt(Qr);for(const ka of Kr)try{await Jp({userId:ka,type:"mention",title:"You were mentioned in a company note",message:`${br} mentioned you in ${m.name}`,relatedId:m.id,relatedType:"company",read:!1})}catch(Ys){console.error("Failed to send notification:",Ys)}ir("");const Rn=Kr.length>0?`Note added and ${Kr.length} user(s) notified`:"Note added successfully";s(Rn)}catch(He){i(He.message||"Failed to add note")}finally{an(!1)}}},Ua=async()=>{if(!(!m||!l||!zr))try{Tr(zr);const He=m.notes?.filter(br=>br.id!==zr)||[];await R.mutateAsync({id:m.id,updates:{notes:He}}),p({...m,notes:He}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),ne(null)}catch(He){i(He.message||"Failed to delete note")}finally{Tr(null)}},Ia=He=>{const br=He.target.value,Cr=He.target.selectionStart;Ke(br),hs(Cr);const Er=br.substring(0,Cr),Kr=Er.lastIndexOf("@");if(Kr!==-1){const Rn=Er.substring(Kr+1),ka=Kr>0?Er[Kr-1]:" ";if((ka===" "||ka===`
`||Kr===0)&&!Rn.includes(" ")&&!Rn.includes(`
`)){Fs(Rn);const Ys=U.filter(_i=>_i.name.toLowerCase().includes(Rn.toLowerCase())||_i.email.toLowerCase().includes(Rn.toLowerCase()));As(Ys.slice(0,5)),Vr(!0);return}}Vr(!1)},Da=He=>{const Cr=tt.substring(0,$n).lastIndexOf("@"),Er=tt.substring($n),Rn=`${tt.substring(0,Cr)}@${He.name} ${Er}`;Ke(Rn),Vr(!1)},er=async()=>{if(!(!y||!tt.trim())){st(!0);try{const He=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",br=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Cr={id:`note_${Date.now()}`,userId:He,userName:br,text:tt.trim(),createdAt:new Date().toISOString()},Er=[...y.notes||[],Cr];await z.mutateAsync({id:y.id,updates:{notes:Er}}),v({...y,notes:Er}),o.invalidateQueries({queryKey:["contacts"]});const Kr=Jt(tt);for(const ka of Kr)try{await Jp({userId:ka,type:"mention",title:"You were mentioned in a contact note",message:`${br} mentioned you in ${y.name}`,relatedId:y.id,relatedType:"contact",read:!1})}catch(Ys){console.error("Failed to send notification:",Ys)}Ke("");const Rn=Kr.length>0?`Note added and ${Kr.length} user(s) notified`:"Note added successfully";s(Rn)}catch(He){i(He.message||"Failed to add note")}finally{st(!1)}}},Jr=async()=>{if(!(!y||!l||!Lt))try{Ot(Lt);const He=y.notes?.filter(br=>br.id!==Lt)||[];await z.mutateAsync({id:y.id,updates:{notes:He}}),v({...y,notes:He}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),vr(null)}catch(He){i(He.message||"Failed to delete note")}finally{Ot(null)}},fa=L.useCallback(He=>P.some(br=>br.companyId===He),[P]),bn=L.useMemo(()=>N.filter(He=>{if(W.length>0){const br=W.includes("target")&&He.isTargetAccount,Cr=W.includes("non-target")&&!He.isTargetAccount;if(!br&&!Cr)return!1}if(q.length>0){const br=q.includes("assigned")&&He.ownerId,Cr=q.includes("unassigned")&&!He.ownerId;if(!br&&!Cr)return!1}if(B.length>0){const br=B.includes("has-deals")&&fa(He.id),Cr=B.includes("no-deals")&&!fa(He.id);if(!br&&!Cr)return!1}return!0}),[N,W,q,B,fa]),mn=L.useMemo(()=>W.length>0||q.length>0||B.length>0,[W,q,B]),Nr=()=>{T([]),V([]),K([])},Wr=(He,br)=>{He==="target"?T(Cr=>Cr.includes(br)?Cr.filter(Er=>Er!==br):[...Cr,br]):He==="assigned"?V(Cr=>Cr.includes(br)?Cr.filter(Er=>Er!==br):[...Cr,br]):He==="deals"&&K(Cr=>Cr.includes(br)?Cr.filter(Er=>Er!==br):[...Cr,br])},or=()=>{Ze.length===bn.length&&bn.length>0?Vt([]):Vt(bn.map(He=>He.id))},Vn=()=>{Dt.length===E.length?dt([]):dt(E.map(He=>He.id))},Hr=async()=>{Ht(!0);try{const He=[...Ze];await J.mutateAsync(He),m&&He.includes(m.id)&&(p(null),de(!1)),Vt([]),Qt(null),s(`Successfully deleted ${He.length} compan${He.length>1?"ies":"y"}`)}catch(He){i(He.message||"Failed to delete companies")}finally{Ht(!1)}},Ja=async()=>{jt(!0);try{const He=[...Dt];await re.mutateAsync(He),y&&He.includes(y.id)&&(v(null),te(!1)),dt([]),Qt(null),s(`Successfully deleted ${He.length} contact${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to delete contacts")}finally{jt(!1)}},fo=async()=>{if(Ze.length!==0){nr(!0);try{const He=[...Ze];await X.mutateAsync({ids:He,updates:{isTargetAccount:!0}}),m&&He.includes(m.id)&&p({...m,isTargetAccount:!0}),Vt([]),s(`Successfully marked ${He.length} compan${He.length>1?"ies":"y"} as target account${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to mark companies as target accounts")}finally{nr(!1)}}},Si=async()=>{if(Ze.length!==0){Ir(!0);try{const He=[...Ze];await X.mutateAsync({ids:He,updates:{isTargetAccount:!1}}),m&&He.includes(m.id)&&p({...m,isTargetAccount:!1}),Vt([]),s(`Successfully unmarked ${He.length} compan${He.length>1?"ies":"y"} as target account${He.length>1?"s":""}`)}catch(He){i(He.message||"Failed to unmark companies as target accounts")}finally{Ir(!1)}}},ps=async()=>{m&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},ms=He=>P.filter(br=>br.companyId===He&&br.stage!=="Won"&&br.stage!=="Lost").length,ho=He=>He?U.find(br=>br.id===He)?.name||"Unknown":"Unassigned";return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),n.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[n.jsxs("button",{onClick:()=>{d("companies"),Vt([]),dt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?bn.length:N.length,")"]}),n.jsxs("button",{onClick:()=>{d("contacts"),Vt([]),dt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",E.length,")"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n.jsxs("button",{onClick:_t,disabled:We,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[n.jsx(Ou,{className:`w-4 h-4 ${We?"animate-spin":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[n.jsx(nn,{className:"w-4 h-4 shrink-0"})," ",n.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>Nn(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[n.jsx(bU,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),n.jsxs("button",{onClick:()=>ua(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[n.jsx(uh,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[n.jsx("div",{className:"w-full min-w-0",children:n.jsxs("div",{className:"relative group w-full min-w-0",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),n.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:u,onChange:He=>f(He.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:ee,checked:c==="companies"?bn.length>0&&Ze.length===bn.length&&bn.every(He=>Ze.includes(He.id)):E.length>0&&Dt.length===E.length,onChange:c==="companies"?or:Vn}),n.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>me(!0),disabled:ee,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${mn?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[n.jsx(p0,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"text-sm font-bold",children:"Filters"}),mn&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:W.length+q.length+B.length})]}),n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:ee?"Loading...":`Showing ${bn.length} of ${N.length} companies`})]}):n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:ee?"Loading...":`Showing ${E.length} contact${E.length!==1?"s":""}`})}),oe&&c==="companies"&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[n.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(p0,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),n.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(_m,{className:"w-4 h-4"}),"Target Account"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:W.includes("target"),onChange:()=>Wr("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(_m,{className:"w-4 h-4 text-amber-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>He.isTargetAccount).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:W.includes("non-target"),onChange:()=>Wr("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Wd,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>!He.isTargetAccount).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(sv,{className:"w-4 h-4"}),"Assignment"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:q.includes("assigned"),onChange:()=>Wr("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(sv,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>He.ownerId).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:q.includes("unassigned"),onChange:()=>Wr("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Eu,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>!He.ownerId).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(kl,{className:"w-4 h-4"}),"Deals"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:B.includes("has-deals"),onChange:()=>Wr("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(kl,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>fa(He.id)).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:B.includes("no-deals"),onChange:()=>Wr("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(kl,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[N.filter(He=>!fa(He.id)).length," companies"]})]})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:Nr,disabled:!mn,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n.jsx(tr,{className:"w-4 h-4"}),"Clear All Filters"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[bn.length," of ",N.length," companies"]}),n.jsx("button",{onClick:()=>me(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:ee?Array.from({length:8}).map((He,br)=>n.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${br}`)):c==="companies"?bn.map(He=>{const br=U.find(Er=>Er.id===He.ownerId),Cr=Ze.includes(He.id);return n.jsxs("div",{onClick:()=>p(He),className:`bg-white p-6 rounded-2xl border ${Cr?"border-indigo-400 bg-indigo-50/30":He.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[He.isTargetAccount&&n.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[n.jsx(_m,{className:"w-2.5 h-2.5"})," Target Account"]}),n.jsx("div",{className:"absolute top-4 right-4",onClick:Er=>Er.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Cr,onChange:()=>Vt(Er=>Cr?Er.filter(Kr=>Kr!==He.id):[...Er,He.id])})}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Vs,{src:He.logo,fallbackText:He.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:He.name}),n.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:He.industry})]})]}),n.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dh,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate",children:He.website||"No website"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ol,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate font-medium",children:br?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[ms(He.id)," Active Deals"]}),n.jsx(ya,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},He.id)}):E.map(He=>{const br=N.find(Er=>Er.id===He.companyId),Cr=Dt.includes(He.id);return n.jsxs("div",{onClick:()=>v(He),className:`bg-white p-5 rounded-2xl border ${Cr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[n.jsx("div",{className:"absolute top-4 right-4",onClick:Er=>Er.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Cr,onChange:()=>dt(Er=>Cr?Er.filter(Kr=>Kr!==He.id):[...Er,He.id])})}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:He.name}),n.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[He.role," @ ",br?.name||"Partner"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qa,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:He.email})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vj,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-[13px]",children:He.phone})]})]}),He.linkedin&&n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsxs("a",{href:He.linkedin,target:"_blank",rel:"noreferrer",onClick:Er=>Er.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[n.jsx(uh,{className:"w-4 h-4"}),"LinkedIn"]})})]},He.id)})})]}),(c==="companies"&&Ze.length>0||c==="contacts"&&Dt.length>0)&&n.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?Ze.length:Dt.length}),"Selected"]}),n.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:He=>{He.stopPropagation(),fo()},disabled:gr||Ar,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[gr?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(_m,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),n.jsxs("button",{onClick:He=>{He.stopPropagation(),Si()},disabled:gr||Ar,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Ar?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Eu,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),n.jsxs("button",{onClick:He=>{He.stopPropagation(),Qt(c)},disabled:c==="companies"?Tt:Ve,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?Tt:Ve)?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Lr,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),n.jsx("button",{onClick:()=>{c==="companies"?Vt([]):dt([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),m&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:ta}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Vs,{src:m.logo,fallbackText:m.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:m.name}),n.jsx("button",{onClick:()=>sr({isTargetAccount:!m.isTargetAccount}),className:`p-1 rounded-lg transition-all ${m.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:n.jsx(_m,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500",children:m.industry})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[se?n.jsx("button",{onClick:async()=>{await sr(Re),de(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:n.jsx(Ni,{className:"w-5 h-5"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{he({...m}),de(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:n.jsx(Wj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>xe(m),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:n.jsx(Lr,{className:"w-5 h-5"})})]}),n.jsx("button",{onClick:ta,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[se?n.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),n.jsx("input",{type:"text",value:Re.name,onChange:He=>he({...Re,name:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),n.jsx("input",{type:"text",value:Re.industry,onChange:He=>he({...Re,industry:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),n.jsxs("select",{value:Re.ownerId,onChange:He=>he({...Re,ownerId:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"",children:"Unassigned"}),U.map(He=>n.jsx("option",{value:He.id,children:He.name},He.id))]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),n.jsx("input",{type:"text",value:Re.website,onChange:He=>he({...Re,website:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),n.jsx("input",{type:"text",value:Re.linkedin,onChange:He=>he({...Re,linkedin:He.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),n.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[n.jsx(ol,{className:"w-4 h-4"})," ",ho(m.ownerId)]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),n.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${m.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:m.isTargetAccount?"Target Account":"Standard Account"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Gd,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),n.jsxs("button",{onClick:ps,disabled:Ue,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[Ue?n.jsx(yt,{className:"w-3 h-3 animate-spin"}):n.jsx(_U,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),n.jsxs("div",{className:"space-y-3",children:[Ue&&n.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),n.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!m.socialSignals||m.socialSignals.length===0)&&!Ue?n.jsxs("div",{className:"py-12 text-center text-slate-400",children:[n.jsx(Gd,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),n.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(m.socialSignals||[]).map(He=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${He.type==="funding"?"bg-emerald-50 text-emerald-600":He.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[He.type==="funding"&&n.jsx(yU,{className:"w-4 h-4"}),He.type==="hiring"&&n.jsx(ed,{className:"w-4 h-4"}),He.type==="acquisition"&&n.jsx(o1,{className:"w-4 h-4"}),He.type==="news"&&n.jsx(xU,{className:"w-4 h-4"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-sm text-slate-900",children:He.title}),He.isAiGenerated&&n.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[n.jsx(Mi,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:He.date})]}),n.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:He.description})]},He.id))]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(gf,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),mr&&n.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",n.jsx(ya,{className:"w-3 h-3"})]})]}),fn?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(yt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):mr?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-2xl border-2 ${mr.latestNpsScore>=9?"bg-green-50 border-green-200":mr.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":mr.latestNpsScore!==void 0&&mr.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),mr.latestNpsScore!==void 0&&mr.latestNpsScore!==null?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-2xl font-black ${mr.latestNpsScore>=9?"text-green-600":mr.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:mr.latestNpsScore}),mr.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${mr.npsCategory==="Promoter"?"bg-green-100 text-green-700":mr.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:mr.npsCategory})]}):n.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),mr.lastSurveyDate?n.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[n.jsx(oa,{className:"w-4 h-4"}),new Date(mr.lastSurveyDate).toLocaleDateString()]}):n.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):n.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:n.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4 text-indigo-500"}),"Playbooks",w.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:w.length})]}),j?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(yt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):w.length>0?n.jsx("div",{className:"space-y-3",children:w.map(He=>n.jsx(yoe,{instance:He,deals:P,projects:O,onView:br=>b(br)},He.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(oi,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to deals or projects for this company."})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",m.notes&&m.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:m.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:3,value:Qr,onChange:Ft,onBlur:()=>setTimeout(()=>ke(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),je&&rt.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(yh,{className:"w-3 h-3"}),"Mention User"]}),rt.map(He=>n.jsxs("button",{onClick:()=>wr(He),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:He.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:He.email})]})]},He.id))]})})]}),n.jsx("button",{onClick:zt,disabled:qn||!Qr.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:qn?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send"]})})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:m.notes&&m.notes.length>0?[...m.notes].reverse().map(He=>{const br=l?.role==="Admin"||He.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:He.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(He.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),br&&n.jsx("button",{onClick:()=>ne(He.id),disabled:wn===He.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:wn===He.id?n.jsx(yt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),He.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:cr(He.text)})]},He.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),n.jsx("div",{className:"space-y-3",children:E.filter(He=>He.companyId===m.id).map(He=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>v(He),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:He.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:He.role})]})]}),n.jsx(ya,{className:"w-4 h-4 text-slate-300"})]},He.id))})]})]})]})]}),y&&n.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:jn}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:jn,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:y.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:y.name}),n.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[y.role," @ ",N.find(He=>He.id===y.companyId)?.name||"Direct Contact"]}),n.jsx("div",{className:"flex gap-2 mt-4",children:le?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:yr,disabled:ue,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:ue?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-3.5 h-3.5"})," Save Changes"]})}),n.jsxs("button",{onClick:()=>{te(!1),we({...y})},disabled:ue,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(tr,{className:"w-3.5 h-3.5"})," Cancel"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{we({...y}),te(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[n.jsx(Wj,{className:"w-3.5 h-3.5"})," Edit Profile"]}),n.jsx("a",{href:`mailto:${y.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:n.jsx(Qa,{className:"w-4 h-4"})}),y.linkedin&&n.jsx("a",{href:y.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:n.jsx(uh,{className:"w-4 h-4"})})]})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:n.jsx(y0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:n.jsx(ea,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:n.jsx(xf,{className:"w-3.5 h-3.5"})}].map(He=>n.jsxs("button",{onClick:()=>{fe(He.id),te(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Pe===He.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[He.icon," ",He.label]},He.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[Pe==="details"&&n.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:le?n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"text",value:Se.name||"",onChange:He=>we({...Se,name:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),n.jsx("input",{type:"text",value:Se.role||"",onChange:He=>we({...Se,role:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),n.jsxs("select",{value:Se.companyId||"",onChange:He=>we({...Se,companyId:He.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"No Organization"}),N.map(He=>n.jsx("option",{value:He.id,children:He.name},He.id))]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[n.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"email",value:Se.email||"",onChange:He=>we({...Se,email:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),n.jsx("input",{type:"tel",value:Se.phone||"",onChange:He=>we({...Se,phone:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),n.jsx("input",{type:"url",value:Se.linkedin||"",onChange:He=>we({...Se,linkedin:He.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),n.jsx(Qa,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:y.email}),n.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),n.jsx(Vj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:y.phone||"Registry Pending"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Wd,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),n.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[n.jsx(Vs,{src:N.find(He=>He.id===y.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:N.find(He=>He.id===y.companyId)?.name||"Independent Partner"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:N.find(He=>He.id===y.companyId)?.industry||"Uncategorized"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),n.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),n.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:n.jsx(Ss,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Mi,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[n.jsx(sv,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[n.jsx(i1,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),Pe==="notes"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",y.notes&&y.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:y.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:4,value:tt,onChange:Ia,onBlur:()=>setTimeout(()=>Vr(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Mr&&zn.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(yh,{className:"w-3 h-3"}),"Mention User"]}),zn.map(He=>n.jsxs("button",{onClick:()=>Da(He),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:He.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:He.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:He.email})]})]},He.id))]})})]}),n.jsx("button",{onClick:er,disabled:Le||!tt.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Le?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send"]})})]}),y.legacyNotes&&n.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(y0,{className:"w-4 h-4 text-amber-600"}),n.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),n.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:y.legacyNotes})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:y.notes&&y.notes.length>0?[...y.notes].reverse().map(He=>{const br=l?.role==="Admin"||He.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:He.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(He.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),br&&n.jsx("button",{onClick:()=>vr(He.id),disabled:mt===He.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:mt===He.id?n.jsx(yt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),He.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:cr(He.text)})]},He.id)}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),Pe==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),n.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[n.jsx(nU,{className:"w-3 h-3"})," Audit Log"]})]}),n.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>Fe(y),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>{v(null),te(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(sv,{className:"w-5 h-5"})," Save"]})]})]})]}),Ye&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Vs,{src:Ye.logo,fallbackText:Ye.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ye.name}),n.jsx("p",{className:"text-xs text-slate-500",children:Ye.industry})]})]})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>xe(null),disabled:$e,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>pr(Ye.id),disabled:$e,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$e?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),ve&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:ve.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:ve.name}),n.jsx("p",{className:"text-xs text-slate-500",children:ve.email}),ve.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:ve.role})]})]}),N.find(He=>He.id===ve.companyId)&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(Wd,{className:"w-4 h-4 text-slate-400"}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:N.find(He=>He.id===ve.companyId)?.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Fe(null),disabled:Be,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Dr(ve.id),disabled:Be,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Be?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),Xt&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",Xt==="companies"?Ze.length:Dt.length," ",Xt==="companies"?"Compan":"Contact",Xt==="companies"?Ze.length>1?"ies":"y":Dt.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",Xt==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(Xt==="companies"?N.filter(He=>Ze.includes(He.id)):E.filter(He=>Dt.includes(He.id))).slice(0,5).map(He=>n.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:Xt==="companies"?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{src:He.logo,fallbackText:He.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:He.industry})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:He.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:He.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:He.email})]})]})},He.id)),(Xt==="companies"?Ze.length:Dt.length)>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(Xt==="companies"?Ze.length:Dt.length)-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Qt(null),disabled:Xt==="companies"?Tt:Ve,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>{Xt==="companies"?Hr():Ja()},disabled:Xt==="companies"?Tt:Ve,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(Xt==="companies"?Tt:Ve)?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${Xt==="companies"?Ze.length:Dt.length} ${Xt==="companies"?"Compan":"Contact"}${Xt==="companies"?Ze.length>1?"ies":"y":Dt.length>1?"s":""}`})]})]})}),zr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(b0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>ne(null),disabled:wn===zr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ua,disabled:wn===zr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:wn===zr?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Lt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(b0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>vr(null),disabled:mt===Lt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Jr,disabled:mt===Lt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:mt===Lt?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Hn&&n.jsx(Xse,{onClose:()=>Nn(!1),onSuccess:()=>{Nn(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),ul&&n.jsx(Yse,{onClose:()=>ua(!1),onSuccess:()=>{ua(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),g&&n.jsx(hb,{instanceId:g,isOpen:!!g,onClose:()=>b(null)})]})},l3=({isOpen:e,dealId:t,projectId:r,preSelectedTemplateId:a,onClose:s,onSuccess:i})=>{const{showError:o}=On(),[l,c]=L.useState(""),[d,u]=L.useState(null),[f,m]=L.useState(!1);L.useEffect(()=>{e&&a?u(a):e||(u(null),c(""))},[e,a]);const{data:p=[],isLoading:y}=vM(),v=Xie();if(!e)return null;const g=p.filter(N=>{if(!l)return!0;const S=l.toLowerCase();return N.name?.toLowerCase().includes(S)||N.description?.toLowerCase().includes(S)||N.category?.toLowerCase().includes(S)}),b=N=>!N.sections||!Array.isArray(N.sections)?0:N.sections.reduce((S,E)=>S+(E.steps?.length||0),0),w=N=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[N]||"bg-slate-100 text-slate-700",j=async()=>{if(!d){o("Please select a playbook template");return}if(!t&&!r){o("Either dealId or projectId must be provided");return}m(!0);try{await v.mutateAsync({templateId:d,dealId:t||void 0,projectId:r||void 0}),i?.(),s(),u(null),c("")}catch(N){o(N.message||"Failed to attach playbook")}finally{m(!1)}};return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:s}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(oi,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:a?"Activate Onboarding Playbook?":"Attach Playbook"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:a?"The Client Onboarding Playbook is ready to activate for this deal.":"Select a playbook template to attach"})]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:l,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]})}),y?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(oi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Templates Found"}),n.jsx("p",{className:"text-sm text-slate-500",children:l?"No templates match your search. Try a different query.":"No playbook templates available. Create one first."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(N=>{const S=b(N),E=N.sections?.length||0,_=d===N.id;return n.jsxs("div",{onClick:()=>u(N.id),className:`p-6 border-2 rounded-xl cursor-pointer transition-all ${_?"border-indigo-500 bg-indigo-50 shadow-lg":"border-slate-200 hover:border-slate-300 hover:shadow-md bg-white"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:N.name}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${w(N.category||"Custom")}`,children:N.category||"Custom"})]}),_&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),N.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:N.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ea,{className:"w-4 h-4"}),n.jsxs("span",{children:[E," section",E!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ty,{className:"w-4 h-4"}),n.jsxs("span",{children:[S," step",S!==1?"s":""]})]})]})]},N.id)})})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:a&&d===a?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:j,disabled:f,className:"w-full px-6 py-3 bg-green-600 text-white text-sm font-semibold rounded-xl hover:bg-green-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Activating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ji,{className:"w-4 h-4"}),"Yes, Activate Onboarding Playbook"]})}),n.jsx("button",{onClick:s,disabled:f,className:"w-full px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Maybe Later"})]}):n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:s,disabled:f,className:"px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:!d||f,className:"px-6 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Attaching..."]}):"Attach Playbook"})]})})]})})]})},LI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],woe=({instance:e,onView:t})=>{const{data:r=[]}=kg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(oi,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:["Version ",e.templateSnapshot.version]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${e.status==="completed"?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:e.status==="completed"?"Completed":"Active"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Progress"}),n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:[s," / ",a," steps"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 text-xs font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4"}),"View Playbook"]})]})},Noe=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:a,showError:s,showInfo:i}=On(),[o,l]=L.useState([]),[c,d]=L.useState([]),[u,f]=L.useState([]),[m,p]=L.useState([]),[y,v]=L.useState(!0),[g,b]=L.useState(null),[w,j]=L.useState("overview"),[N,S]=L.useState(!1),[E,_]=L.useState(null),{data:P=[],isLoading:I}=fb({dealId:g?.id}),[U,C]=L.useState(!1),[O,R]=L.useState(null),[z,H]=L.useState(null),[Q,J]=L.useState(""),[re,X]=L.useState(null),[ee,W]=L.useState(!1),[T,q]=L.useState(!1),[V,B]=L.useState(!1),[K,oe]=L.useState({title:"",companyId:"",value:"",currency:wi,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[me,se]=L.useState([]),[de,Re]=L.useState(!1),[he,Ue]=L.useState(!1),[Oe,le]=L.useState([]),[te,Se]=L.useState(!1),[we,Pe]=L.useState([]),[fe,ue]=L.useState(""),[Ee]=L.useState("sales"),[Ye,xe]=L.useState(!1),[ve,Fe]=L.useState(!1),[$e,_e]=L.useState(!0),[Be,qe]=L.useState(!1),[Ze,Vt]=L.useState(null),[Dt,dt]=L.useState(""),[Tt,Ht]=L.useState(""),Ve=we.find(ie=>ie.id===fe)||null,[jt,gr]=L.useState(null),nr=async()=>{try{_e(!0);const Ae=((await iI())?.data||[]).filter(Ge=>Ge.type==="sales");if(Ae.length===0)try{const Ge=await oI({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});Ge?.data?.id&&await jv(Ge.data.id,{isActive:!0});const tt=((await iI())?.data||[]).filter(Le=>Le.type==="sales");Pe(tt);const Ke=tt.find(Le=>Le.isActive)||tt[0];Ke&&ue(Ke.id)}catch(Ge){console.error("[PIPELINE] Failed to create default sales pipeline:",Ge);const rt=LI.filter(Qe=>Qe.type==="sales");Pe(rt),rt.length>0&&ue(rt[0].id)}else{Pe(Ae);const Ge=Ae.find(rt=>rt.isActive)||Ae[0];Ge&&ue(Ge.id)}}catch(ie){console.error("[PIPELINE] Failed to fetch pipelines:",ie);const ge=LI.filter(Ae=>Ae.type==="sales");Pe(ge),ge.length>0&&ue(ge[0].id)}finally{_e(!1)}};L.useEffect(()=>{nr()},[]);const Ar=async()=>{v(!0);try{const[ie,ge,Ae,Ge]=await Promise.all([jg(),ld(),ad(),Sh()]),Qe=(Array.isArray(ie)?ie:ie?.data||[]).filter(tt=>tt.pipelineType?tt.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(tt.stage));l(Qe),d(ge?.data||[]),f(Ae?.data||[]),p(Ge?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};L.useEffect(()=>{Ar()},[r,Ee]),L.useEffect(()=>{const ie=()=>Ar();return window.addEventListener("refresh-pipeline",ie),()=>window.removeEventListener("refresh-pipeline",ie)},[]);const Ir=(ie,ge)=>{gr(ge),ie.dataTransfer.setData("dealId",ge)},Xt=async(ie,ge)=>{ie.preventDefault();const Ae=ie.dataTransfer.getData("dealId"),Ge=o.find(rt=>rt.id===Ae);if(!(!Ge||Ge.stage===ge))try{await wv(Ae,{stage:ge,pipelineType:"sales"}),l(rt=>rt.map(Qe=>Qe.id===Ae?{...Qe,stage:ge}:Qe)),a(`Deal moved to ${ge}`),Ge.ownerId&&Ge.ownerId!==r?.id&&await Jp({userId:Ge.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${Ge.title}" was moved to ${ge}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{gr(null)}},Qt=async()=>{if(!(!Dt.trim()||!fe||Be))try{qe(!0);const ie=we.find(Ae=>Ae.id===fe);if(!ie)return;const ge=[...ie.stages,Dt.trim()];await jv(fe,{stages:ge}),Pe(Ae=>Ae.map(Ge=>Ge.id===fe?{...Ge,stages:ge}:Ge)),dt(""),a("Stage added successfully")}catch(ie){s(ie.message||"Failed to add stage")}finally{qe(!1)}},mr=async ie=>{if(fe)try{const ge=we.find(Ge=>Ge.id===fe);if(!ge)return;const Ae=ge.stages.filter((Ge,rt)=>rt!==ie);await jv(fe,{stages:Ae}),Pe(Ge=>Ge.map(rt=>rt.id===fe?{...rt,stages:Ae}:rt)),a("Stage removed successfully")}catch(ge){s(ge.message||"Failed to remove stage")}},Fr=async()=>{if(Tt.trim())try{const ie=await oI({name:Tt.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});ie?.data&&(await nr(),ue(ie.data.id),Ht(""),xe(!1),a("Sales pipeline created successfully"))}catch(ie){s(ie.message||"Failed to create pipeline")}},fn=async ie=>{try{const ge=we.find(Ae=>Ae.id===ie);if(!ge)return;await jv(ie,{isActive:!0}),ue(ie),await nr(),await Ar(),a(`Switched to ${ge.name}`)}catch(ge){s(ge.message||"Failed to switch pipeline")}},Br=async ie=>{W(!0);try{await nI(ie),l(ge=>ge.filter(Ae=>Ae.id!==ie)),g?.id===ie&&b(null),X(null),a("Opportunity removed from pipeline")}catch(ge){s(ge.message||"Failed to delete opportunity")}finally{W(!1)}},Qr=()=>{me.length===o.length?se([]):se(o.map(ie=>ie.id))},ir=async()=>{Re(!0);try{const ie=[...me];await Promise.all(ie.map(ge=>nI(ge))),l(ge=>ge.filter(Ae=>!ie.includes(Ae.id))),g&&ie.includes(g.id)&&b(null),se([]),Ue(!1),a(`Successfully deleted ${ie.length} opportunit${ie.length>1?"ies":"y"}`)}catch(ie){s(ie.message||"Failed to delete opportunities")}finally{Re(!1)}},qn=async ie=>{if(!g)return;if(g.stakeholderIds?.includes(ie)){s("Stakeholder already linked");return}R(ie);const ge=[...g.stakeholderIds||[],ie];try{await wv(g.id,{stakeholderIds:ge});const Ae={...g,stakeholderIds:ge};b(Ae),l(Ge=>Ge.map(rt=>rt.id===g.id?Ae:rt)),C(!1),J(""),a("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{R(null)}},an=c.find(ie=>ie.id===g?.companyId),wn=u.find(ie=>ie.id===g?.ownerId),Tr=m.filter(ie=>g?.stakeholderIds?.includes(ie.id)),zr=m.filter(ie=>!g?.stakeholderIds?.includes(ie.id)&&(ie.name.toLowerCase().includes(Q.toLowerCase())||ie.email.toLowerCase().includes(Q.toLowerCase())));L.useEffect(()=>{g&&!T&&oe({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||wi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const ne=async()=>{if(g){if(!K.title.trim()){s("Deal title is required");return}if(!K.ownerId){s("Opportunity lead is required");return}B(!0);try{const ie={title:K.title.trim(),companyId:K.companyId&&K.companyId.trim()!==""?K.companyId:null,value:parseFloat(K.value)||0,currency:K.currency||wi,stage:K.stage,pipelineType:"sales",ownerId:K.ownerId,expectedCloseDate:K.expectedCloseDate&&K.expectedCloseDate.trim()!==""?K.expectedCloseDate:null,description:K.description.trim()||null};await wv(g.id,ie);const ge={...g,...ie};l(Ae=>Ae.map(Ge=>Ge.id===g.id?ge:Ge)),b(ge),q(!1),a("Deal updated successfully")}catch(ie){s(ie.message||"Failed to update deal")}finally{B(!1)}}},je=async()=>{if(!(!g||w!=="activity")){Se(!0);try{const ie=await t3("deal",g.id);le(ie?.data||[])}catch(ie){console.error("[PIPELINE] Failed to fetch deal activities:",ie),le([])}finally{Se(!1)}}};L.useEffect(()=>{g&&w==="activity"?je():le([])},[g?.id,w]);const ke=()=>{if(!g)return[];const ie=[];return g.createdAt&&ie.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${wn?` by ${wn.name}`:""}`,date:g.createdAt,icon:n.jsx(nn,{className:"w-4 h-4"}),color:"indigo"}),ie.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Gd,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&ie.push({id:"value",type:"value",title:`Deal Value: ${hf(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${hf(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Fu,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&ie.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:n.jsx(oa,{className:"w-4 h-4"}),color:"amber"}),Tr.length>0&&ie.push({id:"stakeholders",type:"stakeholder",title:`${Tr.length} Stakeholder${Tr.length>1?"s":""} Linked`,description:Tr.map(ge=>ge.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(m0,{className:"w-4 h-4"}),color:"purple"}),g.description&&ie.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(lo,{className:"w-4 h-4"}),color:"slate"}),Oe.forEach(ge=>{ge.activityType==="email_linked"&&ie.push({id:ge.id||`email-${ge.emailId}`,type:"email_linked",title:ge.title||"Email Linked",description:ge.description||`Email "${ge.emailSubject||"Untitled"}" from ${ge.emailSender||"Unknown"}`,date:ge.createdAt,icon:n.jsx(Qa,{className:"w-4 h-4"}),color:"indigo",emailId:ge.emailId})}),ie.sort((ge,Ae)=>new Date(Ae.date).getTime()-new Date(ge.date).getTime())};return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[n.jsx(Hj,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-900",children:Ve?.name||"Loading..."}),n.jsx(zs,{className:"w-4 h-4 text-slate-400"})]}),n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[we.length>0?we.map(ie=>n.jsxs("button",{onClick:()=>fn(ie.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${fe===ie.id?"text-indigo-600":"text-slate-600"}`,children:[ie.name," ",fe===ie.id&&n.jsx(Lu,{className:"w-4 h-4"})]},ie.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsxs("button",{onClick:()=>xe(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"}),"Manage Pipelines"]})}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:Tt,onChange:ie=>Ht(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&Fr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),n.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsx("button",{onClick:()=>xe(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:n.jsx(p6,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(nn,{className:"w-4 h-4"})," New Deal"]})]})]}),!y&&o.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&me.length===o.length,onChange:Qr}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),n.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:y||$e||!Ve?n.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:n.jsx(yt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Ve.stages.map(ie=>{const ge=o.filter(Ae=>Ae.stage===ie);return n.jsxs("div",{onDragOver:Ae=>Ae.preventDefault(),onDrop:Ae=>Xt(Ae,ie),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:ie}),n.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:ge.length})]}),n.jsx(nn,{onClick:()=>t(ie),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),n.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:ge.map(Ae=>{const Ge=c.find(Qe=>Qe.id===Ae.companyId),rt=me.includes(Ae.id);return n.jsxs("div",{onClick:()=>b(Ae),draggable:!0,onDragStart:Qe=>Ir(Qe,Ae.id),className:`bg-white p-5 rounded-2xl border ${rt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${jt===Ae.id?"opacity-30":""}`,children:[n.jsx("div",{className:"absolute top-3 right-3",onClick:Qe=>Qe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:rt,onChange:()=>se(Qe=>rt?Qe.filter(tt=>tt!==Ae.id):[...Qe,Ae.id])})}),n.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[n.jsx(Vs,{src:Ge?.logo,fallbackText:Ge?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),n.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Ae.title})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:Ge?.name||"Independent"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-indigo-600 font-black text-xs",children:hf(Ae.value,Ae.currency)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Ae.expectedCloseDate}),n.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Ae.id)})})]},ie)})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{b(null),C(!1)}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:n.jsx(kl,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[T?n.jsx("input",{type:"text",value:K.title,onChange:ie=>oe(ge=>({...ge,title:ie.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[T?n.jsx("select",{value:K.stage,onChange:ie=>oe(ge=>({...ge,stage:ie.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:Ve?.stages?.map(ie=>n.jsx("option",{value:ie,children:ie},ie))||[]}):n.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[T?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{q(!1),oe({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||wi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:V,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ne,disabled:V||!K.title.trim()||!K.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Edit Deal"]}),n.jsx("button",{onClick:()=>{b(null),C(!1),q(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:n.jsx(tr,{className:"w-6 h-6"})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:n.jsx(y0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:n.jsx(xf,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:n.jsx(m0,{className:"w-4 h-4"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(oi,{className:"w-4 h-4"})}].map(ie=>n.jsxs("button",{onClick:()=>{j(ie.id),C(!1),q(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${w===ie.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[ie.icon," ",ie.label]},ie.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[w==="overview"&&n.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[T?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(Zm,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("select",{value:K.currency||wi,onChange:ie=>oe(ge=>({...ge,currency:ie.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:Zp.map(ie=>n.jsxs("option",{value:ie.code,children:[ie.code," (",ie.symbol,")"]},ie.code))}),n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:cf(K.currency||wi)}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:K.value||"",onChange:ie=>oe(ge=>({...ge,value:ie.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(oa,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("input",{type:"date",value:K.expectedCloseDate,onChange:ie=>oe(ge=>({...ge,expectedCloseDate:ie.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(Zm,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:hf(g.value,g.currency)}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(oa,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Wd,{className:"w-4 h-4"})," Account Association"]}),T?n.jsxs("select",{value:K.companyId,onChange:ie=>oe(ge=>({...ge,companyId:ie.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[n.jsx("option",{value:"",children:"Independent/Direct"}),c.map(ie=>n.jsx("option",{value:ie.id,children:ie.name},ie.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[n.jsx(Vs,{src:an?.logo,className:"w-14 h-14",fallbackText:an?.name||"A",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:an?.name||"Independent/Direct"}),n.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:an?.industry||"Uncategorized"})]}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:n.jsx(Ss,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Oy,{className:"w-4 h-4"})," Opportunity Lead"]}),T?n.jsxs("select",{value:K.ownerId,onChange:ie=>oe(ge=>({...ge,ownerId:ie.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[n.jsx("option",{value:"",children:"Select Owner"}),u.map(ie=>n.jsxs("option",{value:ie.id,children:[ie.name," (",ie.role,")"]},ie.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[n.jsx(Vs,{src:wn?.avatar,className:"w-14 h-14",fallbackText:wn?.name||"U",isAvatar:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:wn?.name||"Unassigned"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:wn?.role||"Teammate"})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4"})," Strategic Context"]}),T?n.jsx("textarea",{value:K.description,onChange:ie=>oe(ge=>({...ge,description:ie.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[n.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[n.jsx(Mi,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),n.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),n.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),n.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),w==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),te?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(yt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const ie=ke();return ie.length===0?n.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[n.jsx(xf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),n.jsx("div",{className:"space-y-6",children:ie.map((ge,Ae)=>{const Ge=Ke=>{const Le={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Le[Ke]||Le.slate},rt=new Date(ge.date),Qe=rt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),tt=rt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"relative flex items-start gap-4",children:[n.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${Ge(ge.color)} flex items-center justify-center flex-shrink-0`,children:ge.icon}),n.jsx("div",{className:"flex-1 pb-6",children:n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-black text-slate-900 text-sm",children:ge.title}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[Qe," ",tt]})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:ge.description}),ge.type==="email_linked"&&ge.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${ge.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ss,{className:"w-3 h-3"})," View Email"]})]})})]},ge.id)})})]})})()]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:Tr.length})]})]})]}),w==="stakeholders"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!U&&n.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(ed,{className:"w-3 h-3"})," Link Person"]})]}),U?n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),n.jsx("button",{onClick:()=>C(!1),className:"p-1 hover:bg-white rounded-lg",children:n.jsx(tr,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search global registry...",value:Q,onChange:ie=>J(ie.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:zr.length>0?zr.map(ie=>{const ge=O===ie.id;return n.jsxs("button",{onClick:()=>qn(ie.id),disabled:ge||!!O,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:ie.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:ie.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:ie.role})]}),ge?n.jsx(yt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):n.jsx(nn,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},ie.id)}):n.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):Tr.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:Tr.map(ie=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:ie.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:ie.name}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:ie.role})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(g){H(ie.id);try{const ge=(g.stakeholderIds||[]).filter(Ge=>Ge!==ie.id);await wv(g.id,{stakeholderIds:ge});const Ae={...g,stakeholderIds:ge};b(Ae),l(Ge=>Ge.map(rt=>rt.id===g.id?Ae:rt)),a("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{H(null)}}},disabled:z===ie.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:z===ie.id?n.jsx(yt,{className:"w-4 h-4 animate-spin text-red-500"}):n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:n.jsx(ya,{className:"w-5 h-5"})})]})]},ie.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(m0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]}),w==="playbooks"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(nn,{className:"w-3 h-3"})," Attach Playbook"]})]}),I?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(yt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(ie=>n.jsx(woe,{instance:ie,onView:()=>_(ie.id)},ie.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(oi,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this deal yet."})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>X(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(ji,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),re&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(kl,{className:"w-5 h-5 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:re.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:re.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",re.value.toLocaleString()]})]})]})]}),an&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(Vs,{src:an.logo,fallbackText:an.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:an.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(null),disabled:ee,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Br(re.id),disabled:ee,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),me.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:me.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:ie=>{ie.stopPropagation(),Ue(!0)},disabled:de,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[de?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>se([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),he&&me.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",me.length," Opportunit",me.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ie=>me.includes(ie.id)).slice(0,5).map(ie=>(c.find(ge=>ge.id===ie.companyId),n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(kl,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ie.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:ie.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",ie.value.toLocaleString()]})]})]})]},ie.id))),me.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",me.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ue(!1),disabled:de,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:ir,disabled:de,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:de?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${me.length} Opportunit${me.length>1?"ies":"y"}`})]})]})}),ve&&n.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[n.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Fe(!1)}),n.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(p6,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),n.jsx("button",{onClick:()=>Fe(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),n.jsx("div",{className:"space-y-2",children:we.map(ie=>n.jsx("button",{onClick:()=>fn(ie.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${fe===ie.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:ie.name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[ie.stages.length," stages"]})]}),fe===ie.id&&n.jsx(Lu,{className:"w-5 h-5 text-indigo-600"})]})},ie.id))})]}),Ve&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Ve.stages.length," stages"]})]}),n.jsx("div",{className:"space-y-2",children:Ve.stages.map((ie,ge)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:ge+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-sm text-slate-900",children:ie}),n.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Ae=>Ae.stage===ie).length," deals"]})]})]},ie))})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Zm,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),n.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),n.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((ie,ge)=>ie+(ge.value||0),0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>{Fe(!1),xe(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(Hj,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),n.jsx(ya,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>{Fe(!1),Ar(),a("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(Ou,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),n.jsx(ya,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),Ye&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),n.jsx("button",{onClick:()=>xe(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),n.jsx("div",{className:"space-y-2",children:we.map(ie=>n.jsx("button",{onClick:()=>fn(ie.id),className:`w-full p-3 rounded-xl border-2 text-left ${fe===ie.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:n.jsx("p",{className:"font-bold",children:ie.name})},ie.id))})]}),Ve&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),n.jsx("div",{className:"space-y-2",children:Ve.stages.map((ie,ge)=>n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:ie}),n.jsx("button",{onClick:()=>mr(ge),disabled:Ze!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Ze===ge?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]},ge))}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("input",{type:"text",placeholder:"New stage name...",value:Dt,onChange:ie=>dt(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&Dt.trim()&&!Be&&Qt()},disabled:Be,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("button",{onClick:Qt,disabled:Be||!Dt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Be?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Pipeline name...",value:Tt,onChange:ie=>Ht(ie.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),n.jsx("button",{onClick:Fr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:n.jsx("button",{onClick:()=>xe(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})}),n.jsx(l3,{isOpen:N,dealId:g?.id,onClose:()=>S(!1),onSuccess:()=>{S(!1)}}),E&&n.jsx(hb,{instanceId:E,isOpen:!!E,onClose:()=>_(null)})]})},Rh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},joe=e=>Gs({queryKey:Rh.projects(e||""),queryFn:async()=>(await I0()).data||[],enabled:!0,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),koe=()=>Gs({queryKey:Rh.companies,queryFn:async()=>(await ld()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Soe=()=>Gs({queryKey:Rh.users,queryFn:async()=>(await ad()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),_oe=e=>Gs({queryKey:Rh.tasks(e||""),queryFn:async()=>e?(await db(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Aoe=e=>Gs({queryKey:Rh.projectActivities(e||""),queryFn:async()=>e?(await t3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),Coe=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({id:a,data:s})=>await q7(a,s),onSuccess:async(a,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:Rh.projectActivities(s.id),type:"active"})])},onError:a=>{console.error("Failed to update project:",a),r(a?.message||"Failed to update project")}})},Eoe=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>await $7(a),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to delete project:",a),r(a?.message||"Failed to delete project")}})},Toe=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({id:a,archived:s})=>await q7(a,{archived:s}),onSuccess:async(a,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:Rh.projectActivities(s.id)})},onError:a=>{console.error("Failed to archive/restore project:",a),r(a?.message||"Failed to update project")}})},Ooe=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>{await Promise.all(a.map(s=>$7(s)))},onSuccess:async(a,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to bulk delete projects:",a),r(a?.message||"Failed to delete projects")}})},Poe=({instance:e,onView:t})=>{const{data:r=[]}=kg(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(oi,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["v",e.templateSnapshot.version]})]})]}),i===100&&n.jsx(ji,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[s," / ",a," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:()=>t(e.id),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Playbook",n.jsx(Ss,{className:"w-3 h-3"})]})]})},Ioe=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:a,showError:s}=On(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=joe(i),{data:c=[]}=koe(),{data:d=[]}=Soe(),{data:u=[]}=_oe(i),[f,m]=L.useState(null),{data:p=[],isLoading:y}=Aoe(f?.id||null),[v,g]=L.useState(null),[b,w]=L.useState(!1),{data:j=[],isLoading:N}=fb({projectId:f?.id}),[S,E]=L.useState("active"),_=l,P=Coe(),I=Eoe(),U=Toe(),C=Ooe(),O=Be=>{const qe=u.filter(Vt=>Vt.projectId===Be);if(qe.length===0)return 0;const Ze=qe.filter(Vt=>Vt.status==="Done").length;return Math.round(Ze/qe.length*100)},[R,z]=L.useState(null),[H,Q]=L.useState(null),[J,re]=L.useState(null),[X,ee]=L.useState(null),[W,T]=L.useState([]),[q,V]=L.useState(!1),[B,K]=L.useState(!1),[oe,me]=L.useState(!1),[se,de]=L.useState(!1),[Re,he]=L.useState(!1),[Ue,Oe]=L.useState(""),[le,te]=L.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Se,we]=L.useState(null),Pe=async Be=>{if(o.find(Ze=>Ze.id===Be)){Q(Be);try{await U.mutateAsync({id:Be,archived:S==="active"}),re(null),f?.id===Be&&m(null)}finally{Q(null)}}},fe=async Be=>{z(Be);try{await I.mutateAsync(Be),ee(null),f?.id===Be&&m(null)}finally{z(null)}},ue=()=>{W.length===_e.length?T([]):T(_e.map(Be=>Be.id))},Ee=async()=>{V(!0);try{const Be=[...W];await C.mutateAsync(Be),T([]),K(!1),f&&Be.includes(f.id)&&m(null),a(`Successfully deleted ${Be.length} project${Be.length>1?"s":""}`)}catch(Be){s(Be.message||"Failed to delete projects")}finally{V(!1)}},Ye=Be=>{if(!Be)return"";try{const qe=new Date(Be);if(isNaN(qe.getTime()))return"";const Ze=qe.getFullYear(),Vt=String(qe.getMonth()+1).padStart(2,"0"),Dt=String(qe.getDate()).padStart(2,"0");return`${Ze}-${Vt}-${Dt}`}catch{return""}},xe=Be=>{m(Be),te({title:Be.title,description:Be.description||"",companyId:Be.companyId||"",status:Be.status,engagement:Be.engagement||"",startDate:Ye(Be.startDate),endDate:Ye(Be.endDate)}),me(!1)},ve=async()=>{if(f){if(!le.title.trim()){s("Project title is required");return}de(!0);try{const Be={title:le.title.trim(),description:le.description.trim(),status:le.status,companyId:le.companyId&&le.companyId.trim()!==""?le.companyId:null};await P.mutateAsync({id:f.id,data:Be});const qe={...f,...Be};m(qe),me(!1)}catch{}finally{de(!1)}}},Fe=async Be=>{if(f){de(!0);try{await P.mutateAsync({id:f.id,data:{status:Be}});const qe={...f,status:Be};m(qe),te(Ze=>({...Ze,status:Be}))}catch{}finally{de(!1)}}},$e=async(Be,qe)=>{we(Be);try{const Ze=qe==="Done"?"Todo":"Done";await oy(Be,{status:Ze}),setTasks(dt=>dt.map(Tt=>Tt.id===Be?{...Tt,status:Ze}:Tt));const Vt=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=await apiGetTasks(Vt);setTasks(Dt.data||[]),a(Ze==="Done"?"Task marked as done":"Task marked as todo")}catch(Ze){s(Ze.message||"Failed to update task status")}finally{we(null)}},_e=L.useMemo(()=>o.filter(Be=>{const qe=Be.archived===!0;return S==="archived"?qe:!qe}),[o,S]);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{E("active"),T([])},className:`text-sm font-bold pb-1 transition-all ${S==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{E("archived"),T([])},className:`text-sm font-bold pb-1 transition-all ${S==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Be=>Be.archived).length,")"]})]})]}),n.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Project"]})]}),!_&&_e.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:_e.length>0&&W.length===_e.length,onChange:ue}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),_?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(yt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):_e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[n.jsx(a1,{className:"w-16 h-16 text-slate-200 mb-6"}),n.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",S," projects found"]}),n.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_e.map(Be=>{const qe=c.find(Dt=>Dt.id===Be.companyId),Ze=O(Be.id),Vt=W.includes(Be.id);return n.jsxs("div",{onClick:Dt=>{!Be.archived&&!Vt&&(Dt.stopPropagation(),xe(Be))},className:`bg-white rounded-3xl border ${Vt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Be.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[n.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[n.jsx("button",{onClick:Dt=>{Dt.stopPropagation(),re(Be)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:S==="active"?"Archive":"Restore",children:S==="active"?n.jsx(ku,{className:"w-4 h-4"}):n.jsx(s1,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Dt=>{Dt.stopPropagation(),ee(Be)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("div",{onClick:Dt=>Dt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${Vt?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Vt,onChange:()=>T(Dt=>Vt?Dt.filter(dt=>dt!==Be.id):[...Dt,Be.id])})})]}),n.jsxs("div",{className:"p-7",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:n.jsx(Vd,{className:"w-6 h-6"})}),n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Be.title}),n.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:qe?.name||"Standalone Project"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[n.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),n.jsxs("span",{className:"text-indigo-600",children:[Ze,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:n.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${Ze}%`}})})]})]}),n.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[n.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[n.jsx(Is,{className:"w-3.5 h-3.5"})," ",Be.status]}),!Be.archived&&n.jsx(ya,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Be.id)})}),J&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:J.archived?n.jsx(s1,{className:"w-6 h-6"}):n.jsx(ku,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:J.archived?"Restore Project?":"Archive Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:J.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:J.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Be=>Be.id===J.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>re(null),disabled:H===J.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Pe(J.id),disabled:H===J.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H===J.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),J.archived?"Restoring...":"Archiving..."]}):J.archived?"Restore Project":"Archive Project"})]})]})}),X&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:X.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Be=>Be.id===X.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ee(null),disabled:R===X.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>fe(X.id),disabled:R===X.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R===X.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),W.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:W.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Be=>{Be.stopPropagation(),K(!0)},disabled:q,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[q?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>T([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),B&&W.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",W.length," Project",W.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Be=>W.includes(Be.id)).slice(0,5).map(Be=>{const qe=c.find(Ze=>Ze.id===Be.companyId);return n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Vd,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:qe?.name||"Standalone Project"})]})]},Be.id)}),W.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",W.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>K(!1),disabled:q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ee,disabled:q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${W.length} Project${W.length>1?"s":""}`})]})]})}),f&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!oe&&!se&&(m(null),me(!1))}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{onClick:()=>{!oe&&!se&&(m(null),me(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:se,children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Vd,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[oe?n.jsxs("div",{children:[n.jsx("input",{type:"text",value:le.title,onChange:Be=>te(qe=>({...qe,title:Be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),n.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[n.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:f.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${f.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":f.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":f.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.status}),n.jsx("span",{className:"text-xs text-slate-400",children:c.find(Be=>Be.id===f.companyId)?.name||"Standalone Project"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:oe?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{me(!1),te({title:f.title,description:f.description||"",companyId:f.companyId||"",status:f.status,engagement:f.engagement||"",startDate:Ye(f.startDate),endDate:Ye(f.endDate)})},disabled:se,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ve,disabled:se||!le.title.trim()||!le.engagement.trim()||!le.startDate.trim()||!le.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:se?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>me(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Edit Project"]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),n.jsx("div",{className:"space-y-4",children:oe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:le.engagement,onChange:Be=>te(qe=>({...qe,engagement:Be.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:le.startDate,onChange:Be=>{if(te(qe=>({...qe,startDate:Be.target.value})),Be.target.value&&le.endDate){const qe=new Date(Be.target.value),Ze=new Date(le.endDate);!isNaN(qe.getTime())&&!isNaN(Ze.getTime())&&qe>=Ze}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:le.endDate,onChange:Be=>{if(te(qe=>({...qe,endDate:Be.target.value})),le.startDate&&Be.target.value){const qe=new Date(le.startDate),Ze=new Date(Be.target.value);!isNaN(qe.getTime())&&!isNaN(Ze.getTime())&&qe>=Ze}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{value:le.description,onChange:Be=>te(qe=>({...qe,description:Be.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),n.jsxs("select",{value:le.companyId,onChange:Be=>te(qe=>({...qe,companyId:Be.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"Standalone Project"}),c.map(Be=>n.jsx("option",{value:Be.id,children:Be.name},Be.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.title})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.engagement||""})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.startDate?new Date(f.startDate).toLocaleDateString():""})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.endDate?new Date(f.endDate).toLocaleDateString():""})]})]}),f.description&&n.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:f.description})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Be=>Be.id===f.companyId)?.name||"Standalone Project"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[O(f.id),"%"]})]})]}),f.noteImage&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),f.noteImageMimeType?.includes("pdf")?n.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:f.noteImageName||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),n.jsxs("button",{onClick:()=>{const Be=window.open();Be&&Be.document.write(`
                                        <html>
                                          <head>
                                            <title>${f.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${f.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[n.jsx(Tu,{className:"w-4 h-4"}),"View PDF"]})]})}):n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:f.noteImage,alt:f.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{Oe(f.noteImage||""),he(!0)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:n.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:n.jsx(Tu,{className:"w-5 h-5 text-indigo-600"})})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(nn,{className:"w-3 h-3"})," Attach"]})]}),N?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(yt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):j.length>0?n.jsx("div",{className:"space-y-3",children:j.map(Be=>n.jsx(Poe,{instance:Be,onView:qe=>g(qe)},Be.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(oi,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this project yet."})]})]})]})})]}),!oe&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Is,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Be=>n.jsxs("button",{onClick:()=>Fe(Be),disabled:se||f.status===Be,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${f.status===Be?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[f.status===Be?n.jsx(gn,{className:"w-4 h-4"}):n.jsx(Eu,{className:"w-4 h-4"}),Be]},Be))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ty,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),n.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",f.id),e("tasks"),m(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",n.jsx(ya,{className:"w-3 h-3"})]})]}),(()=>{const Be=u.filter(qe=>qe.projectId===f.id);return Be.length===0?n.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[n.jsx(a1,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):n.jsx("div",{className:"space-y-2",children:Be.map(qe=>{const Ze=d.find(Dt=>Dt.id===qe.assigneeId),Vt=Se===qe.id;return n.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:Dt=>{Dt.stopPropagation(),Vt||$e(qe.id,qe.status)},disabled:Vt,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:Vt?n.jsx(yt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):qe.status==="Done"?n.jsx(gn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):n.jsx(Eu,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),n.jsx("p",{className:`text-sm font-bold ${qe.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:qe.title})]}),qe.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:qe.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${qe.priority==="High"?"bg-red-50 text-red-600":qe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:qe.priority}),n.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:qe.status}),qe.dueDate&&n.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[n.jsx(oa,{className:"w-3 h-3"}),qe.dueDate]})]})]}),Ze&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:Ze.name.charAt(0)})})]})},qe.id)})})})()]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),y?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):p.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(Qa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:p.map((Be,qe)=>{const Ze=new Date(Be.createdAt),Dt=new Date().getTime()-Ze.getTime(),dt=Math.floor(Dt/(1e3*60*60*24));let Tt="";dt===0?Tt="Today":dt===1?Tt="Yesterday":dt<7?Tt=`${dt} days ago`:dt<30?Tt=`${Math.floor(dt/7)} week${Math.floor(dt/7)>1?"s":""} ago`:Tt=`${Math.floor(dt/30)} month${Math.floor(dt/30)>1?"s":""} ago`;const Ht=Be.activityType==="email_linked",Ve=Ht?"border-indigo-600":"border-slate-200",jt=Ht?"bg-indigo-600":"bg-slate-300",gr=Ht?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${Ve} shadow-xl flex items-center justify-center`,children:Ht?n.jsx(Qa,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${jt}`})}),n.jsxs("p",{className:`text-[10px] font-black ${gr} uppercase mb-1 tracking-widest`,children:[Ht?"Email Linked":Be.activityType||"Activity","  ",Tt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Be.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Be.description||Be.title}),Be.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Be.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ss,{className:"w-3 h-3"})," View Email"]})]},Be.id||qe)})})]})]}),n.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:n.jsxs("button",{onClick:()=>{!oe&&!se&&(m(null),me(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:se,children:[n.jsx(gn,{className:"w-5 h-5"})," Close"]})})]})]}),Re&&n.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>he(!1)}),n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[n.jsx("button",{onClick:()=>he(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:n.jsx("img",{src:Ue,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Be=>Be.stopPropagation()})})]})]}),n.jsx(l3,{isOpen:b,projectId:f?.id,onClose:()=>w(!1),onSuccess:()=>{w(!1)}}),v&&n.jsx(hb,{instanceId:v,isOpen:!!v,onClose:()=>g(null)})]})};var Qv={exports:{}};var Doe=Qv.exports,FI;function Loe(){return FI||(FI=1,(function(e,t){(function(a,s){e.exports=s()})(typeof self<"u"?self:Doe,function(){return(function(r){var a={};function s(i){if(a[i])return a[i].exports;var o=a[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=a,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),d=s(46),u=s(47),f=s(48),m=s(49),p=s(12),y=s(32),v=s(33),g=s(31),b=s(1),w={Scope:b.Scope,create:b.create,find:b.find,query:b.query,register:b.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:f.default,Scroll:c.default,Block:u.default,Inline:d.default,Text:m.default,Attributor:{Attribute:p.default,Class:y.default,Style:v.default,Store:g.default}};a.default=w}),(function(r,a,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var j in w)w.hasOwnProperty(j)&&(b[j]=w[j])};return function(b,w){g(b,w);function j(){this.constructor=b}b.prototype=w===null?Object.create(w):(j.prototype=w.prototype,new j)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=(function(g){i(b,g);function b(w){var j=this;return w="[Parchment] "+w,j=g.call(this,w)||this,j.message=w,j.name=j.constructor.name,j}return b})(Error);a.ParchmentError=o;var l={},c={},d={},u={};a.DATA_KEY="__blot";var f;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(f=a.Scope||(a.Scope={}));function m(g,b){var w=y(g);if(w==null)throw new o("Unable to create "+g+" blot");var j=w,N=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(b);return new j(N,b)}a.create=m;function p(g,b){return b===void 0&&(b=!1),g==null?null:g[a.DATA_KEY]!=null?g[a.DATA_KEY].blot:b?p(g.parentNode,b):null}a.find=p;function y(g,b){b===void 0&&(b=f.ANY);var w;if(typeof g=="string")w=u[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)w=u.text;else if(typeof g=="number")g&f.LEVEL&f.BLOCK?w=u.block:g&f.LEVEL&f.INLINE&&(w=u.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var N in j)if(w=c[j[N]],w)break;w=w||d[g.tagName]}return w==null?null:b&f.LEVEL&w.scope&&b&f.TYPE&w.scope?w:null}a.query=y;function v(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];if(g.length>1)return g.map(function(N){return v(N)});var w=g[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new o("Invalid definition");if(w.blotName==="abstract")throw new o("Cannot register abstract class");if(u[w.blotName||w.attrName]=w,typeof w.keyName=="string")l[w.keyName]=w;else if(w.className!=null&&(c[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(N){return N.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var j=Array.isArray(w.tagName)?w.tagName:[w.tagName];j.forEach(function(N){(d[N]==null||w.className==null)&&(d[N]=w)})}return w}a.register=v}),(function(r,a,s){var i=s(51),o=s(11),l=s(3),c=s(20),d="\0",u=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};u.prototype.insert=function(f,m){var p={};return f.length===0?this:(p.insert=f,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},u.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},u.prototype.retain=function(f,m){if(f<=0)return this;var p={retain:f};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},u.prototype.push=function(f){var m=this.ops.length,p=this.ops[m-1];if(f=l(!0,{},f),typeof p=="object"){if(typeof f.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+f.delete},this;if(typeof p.delete=="number"&&f.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(f),this;if(o(f.attributes,p.attributes)){if(typeof f.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+f.insert},typeof f.attributes=="object"&&(this.ops[m-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+f.retain},typeof f.attributes=="object"&&(this.ops[m-1].attributes=f.attributes),this}}return m===this.ops.length?this.ops.push(f):this.ops.splice(m,0,f),this},u.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},u.prototype.filter=function(f){return this.ops.filter(f)},u.prototype.forEach=function(f){this.ops.forEach(f)},u.prototype.map=function(f){return this.ops.map(f)},u.prototype.partition=function(f){var m=[],p=[];return this.forEach(function(y){var v=f(y)?m:p;v.push(y)}),[m,p]},u.prototype.reduce=function(f,m){return this.ops.reduce(f,m)},u.prototype.changeLength=function(){return this.reduce(function(f,m){return m.insert?f+c.length(m):m.delete?f-m.delete:f},0)},u.prototype.length=function(){return this.reduce(function(f,m){return f+c.length(m)},0)},u.prototype.slice=function(f,m){f=f||0,typeof m!="number"&&(m=1/0);for(var p=[],y=c.iterator(this.ops),v=0;v<m&&y.hasNext();){var g;v<f?g=y.next(f-v):(g=y.next(m-v),p.push(g)),v+=c.length(g)}return new u(p)},u.prototype.compose=function(f){var m=c.iterator(this.ops),p=c.iterator(f.ops),y=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;m.peekType()==="insert"&&m.peekLength()<=g;)g-=m.peekLength(),y.push(m.next());v.retain-g>0&&p.next(v.retain-g)}for(var b=new u(y);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")b.push(p.next());else if(m.peekType()==="delete")b.push(m.next());else{var w=Math.min(m.peekLength(),p.peekLength()),j=m.next(w),N=p.next(w);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=w:S.insert=j.insert;var E=c.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(E&&(S.attributes=E),b.push(S),!p.hasNext()&&o(b.ops[b.ops.length-1],S)){var _=new u(m.rest());return b.concat(_).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&b.push(N)}return b.chop()},u.prototype.concat=function(f){var m=new u(this.ops.slice());return f.ops.length>0&&(m.push(f.ops[0]),m.ops=m.ops.concat(f.ops.slice(1))),m},u.prototype.diff=function(f,m){if(this.ops===f.ops)return new u;var p=[this,f].map(function(w){return w.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:d;var N=w===f?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),y=new u,v=i(p[0],p[1],m),g=c.iterator(this.ops),b=c.iterator(f.ops);return v.forEach(function(w){for(var j=w[1].length;j>0;){var N=0;switch(w[0]){case i.INSERT:N=Math.min(b.peekLength(),j),y.push(b.next(N));break;case i.DELETE:N=Math.min(j,g.peekLength()),g.next(N),y.delete(N);break;case i.EQUAL:N=Math.min(g.peekLength(),b.peekLength(),j);var S=g.next(N),E=b.next(N);o(S.insert,E.insert)?y.retain(N,c.attributes.diff(S.attributes,E.attributes)):y.push(E).delete(N);break}j-=N}}),y.chop()},u.prototype.eachLine=function(f,m){m=m||`
`;for(var p=c.iterator(this.ops),y=new u,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var g=p.peek(),b=c.length(g)-p.peekLength(),w=typeof g.insert=="string"?g.insert.indexOf(m,b)-b:-1;if(w<0)y.push(p.next());else if(w>0)y.push(p.next(w));else{if(f(y,p.next(1).attributes||{},v)===!1)return;v+=1,y=new u}}y.length()>0&&f(y,{},v)},u.prototype.transform=function(f,m){if(m=!!m,typeof f=="number")return this.transformPosition(f,m);for(var p=c.iterator(this.ops),y=c.iterator(f.ops),v=new u;p.hasNext()||y.hasNext();)if(p.peekType()==="insert"&&(m||y.peekType()!=="insert"))v.retain(c.length(p.next()));else if(y.peekType()==="insert")v.push(y.next());else{var g=Math.min(p.peekLength(),y.peekLength()),b=p.next(g),w=y.next(g);if(b.delete)continue;w.delete?v.push(w):v.retain(g,c.attributes.transform(b.attributes,w.attributes,m))}return v.chop()},u.prototype.transformPosition=function(f,m){m=!!m;for(var p=c.iterator(this.ops),y=0;p.hasNext()&&y<=f;){var v=p.peekLength(),g=p.peekType();if(p.next(),g==="delete"){f-=Math.min(v,f-y);continue}else g==="insert"&&(y<f||!m)&&(f+=v);y+=v}return f},r.exports=u}),(function(r,a){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},d=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var y=s.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&s.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!y&&!v)return!1;var g;for(g in p);return typeof g>"u"||s.call(p,g)},u=function(p,y){o&&y.name==="__proto__"?o(p,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):p[y.name]=y.newValue},f=function(p,y){if(y==="__proto__")if(s.call(p,y)){if(l)return l(p,y).value}else return;return p[y]};r.exports=function m(){var p,y,v,g,b,w,j=arguments[0],N=1,S=arguments.length,E=!1;for(typeof j=="boolean"&&(E=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(p=arguments[N],p!=null)for(y in p)v=f(j,y),g=f(p,y),j!==g&&(E&&g&&(d(g)||(b=c(g)))?(b?(b=!1,w=v&&c(v)?v:[]):w=v&&d(v)?v:{},u(j,{name:y,newValue:m(E,w,g)})):typeof g<"u"&&u(j,{name:y,newValue:g}));return j}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockEmbed=a.bubbleFormats=void 0;var i=(function(){function C(O,R){for(var z=0;z<R.length;z++){var H=R[z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(O,H.key,H)}}return function(O,R,z){return R&&C(O.prototype,R),z&&C(O,z),O}})(),o=function C(O,R,z){O===null&&(O=Function.prototype);var H=Object.getOwnPropertyDescriptor(O,R);if(H===void 0){var Q=Object.getPrototypeOf(O);return Q===null?void 0:C(Q,R,z)}else{if("value"in H)return H.value;var J=H.get;return J===void 0?void 0:J.call(z)}},l=s(3),c=j(l),d=s(2),u=j(d),f=s(0),m=j(f),p=s(16),y=j(p),v=s(6),g=j(v),b=s(7),w=j(b);function j(C){return C&&C.__esModule?C:{default:C}}function N(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function S(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function E(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var _=1,P=(function(C){E(O,C);function O(){return N(this,O),S(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return i(O,[{key:"attach",value:function(){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(z,H){var Q=m.default.query(z,m.default.Scope.BLOCK_ATTRIBUTE);Q!=null&&this.attributes.attribute(Q,H)}},{key:"formatAt",value:function(z,H,Q,J){this.format(Q,J)}},{key:"insertAt",value:function(z,H,Q){if(typeof H=="string"&&H.endsWith(`
`)){var J=m.default.create(I.blotName);this.parent.insertBefore(J,z===0?this:this.next),J.insertAt(0,H.slice(0,-1))}else o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,z,H,Q)}}]),O})(m.default.Embed);P.scope=m.default.Scope.BLOCK_BLOT;var I=(function(C){E(O,C);function O(R){N(this,O);var z=S(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,R));return z.cache={},z}return i(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(z,H){return H.length()===0?z:z.insert(H.value(),U(H))},new u.default).insert(`
`,U(this))),this.cache.delta}},{key:"deleteAt",value:function(z,H){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,z,H),this.cache={}}},{key:"formatAt",value:function(z,H,Q,J){H<=0||(m.default.query(Q,m.default.Scope.BLOCK)?z+H===this.length()&&this.format(Q,J):o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,z,Math.min(H,this.length()-z-1),Q,J),this.cache={})}},{key:"insertAt",value:function(z,H,Q){if(Q!=null)return o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,z,H,Q);if(H.length!==0){var J=H.split(`
`),re=J.shift();re.length>0&&(z<this.length()-1||this.children.tail==null?o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(z,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var X=this;J.reduce(function(ee,W){return X=X.split(ee,!0),X.insertAt(0,W),W.length},z+re.length)}}},{key:"insertBefore",value:function(z,H){var Q=this.children.head;o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,z,H),Q instanceof y.default&&Q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+_),this.cache.length}},{key:"moveChildren",value:function(z,H){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,z,H),this.cache={}}},{key:"optimize",value:function(z){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,z),this.cache={}}},{key:"path",value:function(z){return o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,z,!0)}},{key:"removeChild",value:function(z){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,z),this.cache={}}},{key:"split",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(z===0||z>=this.length()-_)){var Q=this.clone();return z===0?(this.parent.insertBefore(Q,this),this):(this.parent.insertBefore(Q,this.next),Q)}else{var J=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,z,H);return this.cache={},J}}}]),O})(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[g.default,m.default.Embed,w.default];function U(C){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C==null||(typeof C.formats=="function"&&(O=(0,c.default)(O,C.formats())),C.parent==null||C.parent.blotName=="scroll"||C.parent.statics.scope!==C.statics.scope)?O:U(C.parent,O)}a.bubbleFormats=U,a.BlockEmbed=P,a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.overload=a.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var T=[],q=!0,V=!1,B=void 0;try{for(var K=ee[Symbol.iterator](),oe;!(q=(oe=K.next()).done)&&(T.push(oe.value),!(W&&T.length===W));q=!0);}catch(me){V=!0,B=me}finally{try{!q&&K.return&&K.return()}finally{if(V)throw B}}return T}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var T=0;T<W.length;T++){var q=W[T];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(ee,q.key,q)}}return function(ee,W,T){return W&&X(ee.prototype,W),T&&X(ee,T),ee}})();s(50);var c=s(2),d=U(c),u=s(14),f=U(u),m=s(8),p=U(m),y=s(9),v=U(y),g=s(0),b=U(g),w=s(15),j=U(w),N=s(3),S=U(N),E=s(10),_=U(E),P=s(34),I=U(P);function U(X){return X&&X.__esModule?X:{default:X}}function C(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function O(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var R=(0,_.default)("quill"),z=(function(){l(X,null,[{key:"debug",value:function(W){W===!0&&(W="log"),_.default.level(W)}},{key:"find",value:function(W){return W.__quill||b.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&R.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,T){var q=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var B=W.attrName||W.blotName;typeof B=="string"?this.register("formats/"+B,W,T):Object.keys(W).forEach(function(K){q.register(K,W[K],T)})}else this.imports[W]!=null&&!V&&R.warn("Overwriting "+W+" with",T),this.imports[W]=T,(W.startsWith("blots/")||W.startsWith("formats/"))&&T.blotName!=="abstract"?b.default.register(T):W.startsWith("modules")&&typeof T.register=="function"&&T.register()}}]);function X(ee){var W=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,X),this.options=H(ee,T),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",ee);this.options.debug&&X.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=b.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(B){B===p.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(B,K){var oe=W.selection.lastRange,me=oe&&oe.length===0?oe.index:void 0;Q.call(W,function(){return W.editor.update(null,K,me)},B)});var V=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(V),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(X,[{key:"addContainer",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var q=W;W=document.createElement("div"),W.classList.add(q)}return this.container.insertBefore(W,T),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,T,q){var V=this,B=J(W,T,q),K=o(B,4);return W=K[0],T=K[1],q=K[3],Q.call(this,function(){return V.editor.deleteText(W,T)},q,W,-1*T)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,T){var q=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Q.call(this,function(){var B=q.getSelection(!0),K=new d.default;if(B==null)return K;if(b.default.query(W,b.default.Scope.BLOCK))K=q.editor.formatLine(B.index,B.length,C({},W,T));else{if(B.length===0)return q.selection.format(W,T),K;K=q.editor.formatText(B.index,B.length,C({},W,T))}return q.setSelection(B,p.default.sources.SILENT),K},V)}},{key:"formatLine",value:function(W,T,q,V,B){var K=this,oe=void 0,me=J(W,T,q,V,B),se=o(me,4);return W=se[0],T=se[1],oe=se[2],B=se[3],Q.call(this,function(){return K.editor.formatLine(W,T,oe)},B,W,0)}},{key:"formatText",value:function(W,T,q,V,B){var K=this,oe=void 0,me=J(W,T,q,V,B),se=o(me,4);return W=se[0],T=se[1],oe=se[2],B=se[3],Q.call(this,function(){return K.editor.formatText(W,T,oe)},B,W,0)}},{key:"getBounds",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof W=="number"?q=this.selection.getBounds(W,T):q=this.selection.getBounds(W.index,W.length);var V=this.container.getBoundingClientRect();return{bottom:q.bottom-V.top,height:q.height,left:q.left-V.left,right:q.right-V.left,top:q.top-V.top,width:q.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,q=J(W,T),V=o(q,2);return W=V[0],T=V[1],this.editor.getContents(W,T)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,T):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,T)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,q=J(W,T),V=o(q,2);return W=V[0],T=V[1],this.editor.getText(W,T)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,T,q){var V=this,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return Q.call(this,function(){return V.editor.insertEmbed(W,T,q)},B,W)}},{key:"insertText",value:function(W,T,q,V,B){var K=this,oe=void 0,me=J(W,0,q,V,B),se=o(me,4);return W=se[0],oe=se[2],B=se[3],Q.call(this,function(){return K.editor.insertText(W,T,oe)},B,W,T.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,T,q){this.clipboard.dangerouslyPasteHTML(W,T,q)}},{key:"removeFormat",value:function(W,T,q){var V=this,B=J(W,T,q),K=o(B,4);return W=K[0],T=K[1],q=K[3],Q.call(this,function(){return V.editor.removeFormat(W,T)},q,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var T=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Q.call(this,function(){W=new d.default(W);var V=T.getLength(),B=T.editor.deleteText(0,V),K=T.editor.applyDelta(W),oe=K.ops[K.ops.length-1];oe!=null&&typeof oe.insert=="string"&&oe.insert[oe.insert.length-1]===`
`&&(T.editor.deleteText(T.getLength()-1,1),K.delete(1));var me=B.compose(K);return me},q)}},{key:"setSelection",value:function(W,T,q){if(W==null)this.selection.setRange(null,T||X.sources.API);else{var V=J(W,T,q),B=o(V,4);W=B[0],T=B[1],q=B[3],this.selection.setRange(new w.Range(W,T),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new d.default().insert(W);return this.setContents(q,T)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,T=this.scroll.update(W);return this.selection.update(W),T}},{key:"updateContents",value:function(W){var T=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Q.call(this,function(){return W=new d.default(W),T.editor.applyDelta(W,q)},q,!0)}}]),X})();z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},z.events=p.default.events,z.sources=p.default.sources,z.version="1.3.7",z.imports={delta:d.default,parchment:b.default,"core/module":v.default,"core/theme":I.default};function H(X,ee){if(ee=(0,S.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},ee),!ee.theme||ee.theme===z.DEFAULTS.theme)ee.theme=I.default;else if(ee.theme=z.import("themes/"+ee.theme),ee.theme==null)throw new Error("Invalid theme "+ee.theme+". Did you register it?");var W=(0,S.default)(!0,{},ee.theme.DEFAULTS);[W,ee].forEach(function(V){V.modules=V.modules||{},Object.keys(V.modules).forEach(function(B){V.modules[B]===!0&&(V.modules[B]={})})});var T=Object.keys(W.modules).concat(Object.keys(ee.modules)),q=T.reduce(function(V,B){var K=z.import("modules/"+B);return K==null?R.error("Cannot load "+B+" module. Are you sure you registered it?"):V[B]=K.DEFAULTS||{},V},{});return ee.modules!=null&&ee.modules.toolbar&&ee.modules.toolbar.constructor!==Object&&(ee.modules.toolbar={container:ee.modules.toolbar}),ee=(0,S.default)(!0,{},z.DEFAULTS,{modules:q},W,ee),["bounds","container","scrollingContainer"].forEach(function(V){typeof ee[V]=="string"&&(ee[V]=document.querySelector(ee[V]))}),ee.modules=Object.keys(ee.modules).reduce(function(V,B){return ee.modules[B]&&(V[B]=ee.modules[B]),V},{}),ee}function Q(X,ee,W,T){if(this.options.strict&&!this.isEnabled()&&ee===p.default.sources.USER)return new d.default;var q=W==null?null:this.getSelection(),V=this.editor.delta,B=X();if(q!=null&&(W===!0&&(W=q.index),T==null?q=re(q,B,ee):T!==0&&(q=re(q,W,T,ee)),this.setSelection(q,p.default.sources.SILENT)),B.length()>0){var K,oe=[p.default.events.TEXT_CHANGE,B,V,ee];if((K=this.emitter).emit.apply(K,[p.default.events.EDITOR_CHANGE].concat(oe)),ee!==p.default.sources.SILENT){var me;(me=this.emitter).emit.apply(me,oe)}}return B}function J(X,ee,W,T,q){var V={};return typeof X.index=="number"&&typeof X.length=="number"?typeof ee!="number"?(q=T,T=W,W=ee,ee=X.length,X=X.index):(ee=X.length,X=X.index):typeof ee!="number"&&(q=T,T=W,W=ee,ee=0),(typeof W>"u"?"undefined":i(W))==="object"?(V=W,q=T):typeof W=="string"&&(T!=null?V[W]=T:q=W),q=q||p.default.sources.API,[X,ee,V,q]}function re(X,ee,W,T){if(X==null)return null;var q=void 0,V=void 0;if(ee instanceof d.default){var B=[X.index,X.index+X.length].map(function(se){return ee.transformPosition(se,T!==p.default.sources.USER)}),K=o(B,2);q=K[0],V=K[1]}else{var oe=[X.index,X.index+X.length].map(function(se){return se<ee||se===ee&&T===p.default.sources.USER?se:W>=0?se+W:Math.max(ee,se+W)}),me=o(oe,2);q=me[0],V=me[1]}return new w.Range(q,V-q)}a.expandConfig=H,a.overload=J,a.default=z}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(7),c=f(l),d=s(0),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function p(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var v=(function(g){y(b,g);function b(){return m(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"formatAt",value:function(j,N,S,E){if(b.compare(this.statics.blotName,S)<0&&u.default.query(S,u.default.Scope.BLOT)){var _=this.isolate(j,N);E&&_.wrap(S,E)}else o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,j,N,S,E)}},{key:"optimize",value:function(j){if(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,j),this.parent instanceof b&&b.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=b.order.indexOf(j),E=b.order.indexOf(N);return S>=0||E>=0?S-E:j===N?0:j<N?-1:1}}]),b})(u.default.Inline);v.allowedChildren=[v,u.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function u(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(function(m){u(p,m);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default.Text);a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(j,N){for(var S=0;S<N.length;S++){var E=N[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,N,S){return N&&w(j.prototype,N),S&&w(j,S),j}})(),o=function w(j,N,S){j===null&&(j=Function.prototype);var E=Object.getOwnPropertyDescriptor(j,N);if(E===void 0){var _=Object.getPrototypeOf(j);return _===null?void 0:w(_,N,S)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(S)}},l=s(54),c=f(l),d=s(10),u=f(d);function f(w){return w&&w.__esModule?w:{default:w}}function m(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")}function p(w,j){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:w}function y(w,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);w.prototype=Object.create(j&&j.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(w,j):w.__proto__=j)}var v=(0,u.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(w){document.addEventListener(w,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var _;(_=E.__quill.emitter).handleDOM.apply(_,N)}})})});var b=(function(w){y(j,w);function j(){m(this,j);var N=p(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var E=arguments.length,_=Array(E>1?E-1:0),P=1;P<E;P++)_[P-1]=arguments[P];(this.listeners[S.type]||[]).forEach(function(I){var U=I.node,C=I.handler;(S.target===U||U.contains(S.target))&&C.apply(void 0,[S].concat(_))})}},{key:"listenDOM",value:function(S,E,_){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:E,handler:_})}}]),j})(c.default);b.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources={API:"api",SILENT:"silent",USER:"user"},a.default=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=d};o.DEFAULTS={},a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var u,f=arguments.length,m=Array(f>1?f-1:0),p=1;p<f;p++)m[p-1]=arguments[p];(u=console)[d].apply(u,m)}}function c(d){return i.reduce(function(u,f){return u[f]=l.bind(console,f,d),u},{})}l.level=c.level=function(d){o=d},a.default=c}),(function(r,a,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(m,p,y){return y||(y={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?y.strict?m===p:m==p:f(m,p,y)};function d(m){return m==null}function u(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function f(m,p,y){var v,g;if(d(m)||d(p)||m.prototype!==p.prototype)return!1;if(l(m))return l(p)?(m=i.call(m),p=i.call(p),c(m,p,y)):!1;if(u(m)){if(!u(p)||m.length!==p.length)return!1;for(v=0;v<m.length;v++)if(m[v]!==p[v])return!1;return!0}try{var b=o(m),w=o(p)}catch{return!1}if(b.length!=w.length)return!1;for(b.sort(),w.sort(),v=b.length-1;v>=0;v--)if(b[v]!=w[v])return!1;for(v=b.length-1;v>=0;v--)if(g=b[v],!c(m[g],p[g],y))return!1;return typeof m==typeof p}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,d,u){u===void 0&&(u={}),this.attrName=c,this.keyName=d;var f=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|f:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},l.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(c,d){var u=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Code=void 0;var i=(function(){function P(I,U){var C=[],O=!0,R=!1,z=void 0;try{for(var H=I[Symbol.iterator](),Q;!(O=(Q=H.next()).done)&&(C.push(Q.value),!(U&&C.length===U));O=!0);}catch(J){R=!0,z=J}finally{try{!O&&H.return&&H.return()}finally{if(R)throw z}}return C}return function(I,U){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,U){for(var C=0;C<U.length;C++){var O=U[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}return function(I,U,C){return U&&P(I.prototype,U),C&&P(I,C),I}})(),l=function P(I,U,C){I===null&&(I=Function.prototype);var O=Object.getOwnPropertyDescriptor(I,U);if(O===void 0){var R=Object.getPrototypeOf(I);return R===null?void 0:P(R,U,C)}else{if("value"in O)return O.value;var z=O.get;return z===void 0?void 0:z.call(C)}},c=s(2),d=w(c),u=s(0),f=w(u),m=s(4),p=w(m),y=s(6),v=w(y),g=s(7),b=w(g);function w(P){return P&&P.__esModule?P:{default:P}}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function N(P,I){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:P}function S(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}var E=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(v.default);E.blotName="code",E.tagName="CODE";var _=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var C=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(R,z){return R.insert(z).insert(`
`,C.formats())},new d.default)}},{key:"format",value:function(C,O){if(!(C===this.statics.blotName&&O)){var R=this.descendant(b.default,this.length()-1),z=i(R,1),H=z[0];H?.deleteAt(H.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,C,O)}}},{key:"formatAt",value:function(C,O,R,z){if(O!==0&&!(f.default.query(R,f.default.Scope.BLOCK)==null||R===this.statics.blotName&&z===this.statics.formats(this.domNode))){var H=this.newlineIndex(C);if(!(H<0||H>=C+O)){var Q=this.newlineIndex(C,!0)+1,J=H-Q+1,re=this.isolate(Q,J),X=re.next;re.format(R,z),X instanceof I&&X.formatAt(0,C-Q+O-J,R,z)}}}},{key:"insertAt",value:function(C,O,R){if(R==null){var z=this.descendant(b.default,C),H=i(z,2),Q=H[0],J=H[1];Q.insertAt(J,O)}}},{key:"length",value:function(){var C=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?C:C+1}},{key:"newlineIndex",value:function(C){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,C).lastIndexOf(`
`);var R=this.domNode.textContent.slice(C).indexOf(`
`);return R>-1?C+R:-1}},{key:"optimize",value:function(C){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,C);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(C),O.moveChildren(this),O.remove())}},{key:"replace",value:function(C){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,C),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var R=f.default.find(O);R==null?O.parentNode.removeChild(O):R instanceof f.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(C){var O=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,C);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),I})(p.default);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",a.Code=E,a.default=_}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(ee,W){var T=[],q=!0,V=!1,B=void 0;try{for(var K=ee[Symbol.iterator](),oe;!(q=(oe=K.next()).done)&&(T.push(oe.value),!(W&&T.length===W));q=!0);}catch(me){V=!0,B=me}finally{try{!q&&K.return&&K.return()}finally{if(V)throw B}}return T}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return X(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(ee,W){for(var T=0;T<W.length;T++){var q=W[T];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(ee,q.key,q)}}return function(ee,W,T){return W&&X(ee.prototype,W),T&&X(ee,T),ee}})(),c=s(2),d=O(c),u=s(20),f=O(u),m=s(0),p=O(m),y=s(13),v=O(y),g=s(24),b=O(g),w=s(4),j=O(w),N=s(16),S=O(N),E=s(21),_=O(E),P=s(11),I=O(P),U=s(3),C=O(U);function O(X){return X&&X.__esModule?X:{default:X}}function R(X,ee,W){return ee in X?Object.defineProperty(X,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[ee]=W,X}function z(X,ee){if(!(X instanceof ee))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,Q=(function(){function X(ee){z(this,X),this.scroll=ee,this.delta=this.getDelta()}return l(X,[{key:"applyDelta",value:function(W){var T=this,q=!1;this.scroll.update();var V=this.scroll.length();return this.scroll.batchStart(),W=re(W),W.reduce(function(B,K){var oe=K.retain||K.delete||K.insert.length||1,me=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var se=K.insert;se.endsWith(`
`)&&q&&(q=!1,se=se.slice(0,-1)),B>=V&&!se.endsWith(`
`)&&(q=!0),T.scroll.insertAt(B,se);var de=T.scroll.line(B),Re=o(de,2),he=Re[0],Ue=Re[1],Oe=(0,C.default)({},(0,w.bubbleFormats)(he));if(he instanceof j.default){var le=he.descendant(p.default.Leaf,Ue),te=o(le,1),Se=te[0];Oe=(0,C.default)(Oe,(0,w.bubbleFormats)(Se))}me=f.default.attributes.diff(Oe,me)||{}}else if(i(K.insert)==="object"){var we=Object.keys(K.insert)[0];if(we==null)return B;T.scroll.insertAt(B,we,K.insert[we])}V+=oe}return Object.keys(me).forEach(function(Pe){T.scroll.formatAt(B,oe,Pe,me[Pe])}),B+oe},0),W.reduce(function(B,K){return typeof K.delete=="number"?(T.scroll.deleteAt(B,K.delete),B):B+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,T){return this.scroll.deleteAt(W,T),this.update(new d.default().retain(W).delete(T))}},{key:"formatLine",value:function(W,T){var q=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(V).forEach(function(B){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[B])){var K=q.scroll.lines(W,Math.max(T,1)),oe=T;K.forEach(function(me){var se=me.length();if(!(me instanceof v.default))me.format(B,V[B]);else{var de=W-me.offset(q.scroll),Re=me.newlineIndex(de+oe)-de+1;me.formatAt(de,Re,B,V[B])}oe-=se})}}),this.scroll.optimize(),this.update(new d.default().retain(W).retain(T,(0,_.default)(V)))}},{key:"formatText",value:function(W,T){var q=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(V).forEach(function(B){q.scroll.formatAt(W,T,B,V[B])}),this.update(new d.default().retain(W).retain(T,(0,_.default)(V)))}},{key:"getContents",value:function(W,T){return this.delta.slice(W,W+T)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,T){return W.concat(T.delta())},new d.default)}},{key:"getFormat",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],V=[];T===0?this.scroll.path(W).forEach(function(K){var oe=o(K,1),me=oe[0];me instanceof j.default?q.push(me):me instanceof p.default.Leaf&&V.push(me)}):(q=this.scroll.lines(W,T),V=this.scroll.descendants(p.default.Leaf,W,T));var B=[q,V].map(function(K){if(K.length===0)return{};for(var oe=(0,w.bubbleFormats)(K.shift());Object.keys(oe).length>0;){var me=K.shift();if(me==null)return oe;oe=J((0,w.bubbleFormats)(me),oe)}return oe});return C.default.apply(C.default,B)}},{key:"getText",value:function(W,T){return this.getContents(W,T).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(W,T,q){return this.scroll.insertAt(W,T,q),this.update(new d.default().retain(W).insert(R({},T,q)))}},{key:"insertText",value:function(W,T){var q=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T=T.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,T),Object.keys(V).forEach(function(B){q.scroll.formatAt(W,T.length,B,V[B])}),this.update(new d.default().retain(W).insert(T,(0,_.default)(V)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==j.default.blotName||W.children.length>1?!1:W.children.head instanceof S.default}},{key:"removeFormat",value:function(W,T){var q=this.getText(W,T),V=this.scroll.line(W+T),B=o(V,2),K=B[0],oe=B[1],me=0,se=new d.default;K!=null&&(K instanceof v.default?me=K.newlineIndex(oe)-oe+1:me=K.length()-oe,se=K.delta().slice(oe,oe+me-1).insert(`
`));var de=this.getContents(W,T+me),Re=de.diff(new d.default().insert(q).concat(se)),he=new d.default().retain(W).concat(Re);return this.applyDelta(he)}},{key:"update",value:function(W){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,V=this.delta;if(T.length===1&&T[0].type==="characterData"&&T[0].target.data.match(H)&&p.default.find(T[0].target)){var B=p.default.find(T[0].target),K=(0,w.bubbleFormats)(B),oe=B.offset(this.scroll),me=T[0].oldValue.replace(b.default.CONTENTS,""),se=new d.default().insert(me),de=new d.default().insert(B.value()),Re=new d.default().retain(oe).concat(se.diff(de,q));W=Re.reduce(function(he,Ue){return Ue.insert?he.insert(Ue.insert,K):he.push(Ue)},new d.default),this.delta=V.compose(W)}else this.delta=this.getDelta(),(!W||!(0,I.default)(V.compose(W),this.delta))&&(W=V.diff(this.delta,q));return W}}]),X})();function J(X,ee){return Object.keys(ee).reduce(function(W,T){return X[T]==null||(ee[T]===X[T]?W[T]=ee[T]:Array.isArray(ee[T])?ee[T].indexOf(X[T])<0&&(W[T]=ee[T].concat([X[T]])):W[T]=[ee[T],X[T]]),W},{})}function re(X){return X.reduce(function(ee,W){if(W.insert===1){var T=(0,_.default)(W.attributes);return delete T.image,ee.insert({image:W.attributes.image},T)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,_.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var q=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ee.insert(q,W.attributes)}return ee.push(W)},new d.default)}a.default=Q}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Range=void 0;var i=(function(){function P(I,U){var C=[],O=!0,R=!1,z=void 0;try{for(var H=I[Symbol.iterator](),Q;!(O=(Q=H.next()).done)&&(C.push(Q.value),!(U&&C.length===U));O=!0);}catch(J){R=!0,z=J}finally{try{!O&&H.return&&H.return()}finally{if(R)throw z}}return C}return function(I,U){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,U){for(var C=0;C<U.length;C++){var O=U[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}return function(I,U,C){return U&&P(I.prototype,U),C&&P(I,C),I}})(),l=s(0),c=b(l),d=s(21),u=b(d),f=s(11),m=b(f),p=s(8),y=b(p),v=s(10),g=b(v);function b(P){return P&&P.__esModule?P:{default:P}}function w(P){if(Array.isArray(P)){for(var I=0,U=Array(P.length);I<P.length;I++)U[I]=P[I];return U}else return Array.from(P)}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,g.default)("quill:selection"),S=function P(I){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,P),this.index=I,this.length=U},E=(function(){function P(I,U){var C=this;j(this,P),this.emitter=U,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){C.mouseDown||setTimeout(C.update.bind(C,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(O,R){O===y.default.events.TEXT_CHANGE&&R.length()>0&&C.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(C.hasFocus()){var O=C.getNativeRange();O!=null&&O.start.node!==C.cursor.textNode&&C.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{C.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(O,R){if(R.range){var z=R.range,H=z.startNode,Q=z.startOffset,J=z.endNode,re=z.endOffset;C.setNativeRange(H,Q,J,re)}}),this.update(y.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var U=this;this.root.addEventListener("compositionstart",function(){U.composing=!0}),this.root.addEventListener("compositionend",function(){if(U.composing=!1,U.cursor.parent){var C=U.cursor.restore();if(!C)return;setTimeout(function(){U.setNativeRange(C.startNode,C.startOffset,C.endNode,C.endOffset)},1)}})}},{key:"handleDragging",value:function(){var U=this;this.emitter.listenDOM("mousedown",document.body,function(){U.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){U.mouseDown=!1,U.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(U,C){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[U])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||c.default.query(U,c.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var R=c.default.find(O.start.node,!1);if(R==null)return;if(R instanceof c.default.Leaf){var z=R.split(O.start.offset);R.parent.insertBefore(this.cursor,z)}else R.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(U,C),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(U){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();U=Math.min(U,O-1),C=Math.min(U+C,O-1)-U;var R=void 0,z=this.scroll.leaf(U),H=i(z,2),Q=H[0],J=H[1];if(Q==null)return null;var re=Q.position(J,!0),X=i(re,2);R=X[0],J=X[1];var ee=document.createRange();if(C>0){ee.setStart(R,J);var W=this.scroll.leaf(U+C),T=i(W,2);if(Q=T[0],J=T[1],Q==null)return null;var q=Q.position(J,!0),V=i(q,2);return R=V[0],J=V[1],ee.setEnd(R,J),ee.getBoundingClientRect()}else{var B="left",K=void 0;return R instanceof Text?(J<R.data.length?(ee.setStart(R,J),ee.setEnd(R,J+1)):(ee.setStart(R,J-1),ee.setEnd(R,J),B="right"),K=ee.getBoundingClientRect()):(K=Q.domNode.getBoundingClientRect(),J>0&&(B="right")),{bottom:K.top+K.height,height:K.height,left:K[B],right:K[B],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var U=document.getSelection();if(U==null||U.rangeCount<=0)return null;var C=U.getRangeAt(0);if(C==null)return null;var O=this.normalizeNative(C);return N.info("getNativeRange",O),O}},{key:"getRange",value:function(){var U=this.getNativeRange();if(U==null)return[null,null];var C=this.normalizedToRange(U);return[C,U]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(U){var C=this,O=[[U.start.node,U.start.offset]];U.native.collapsed||O.push([U.end.node,U.end.offset]);var R=O.map(function(Q){var J=i(Q,2),re=J[0],X=J[1],ee=c.default.find(re,!0),W=ee.offset(C.scroll);return X===0?W:ee instanceof c.default.Container?W+ee.length():W+ee.index(re,X)}),z=Math.min(Math.max.apply(Math,w(R)),this.scroll.length()-1),H=Math.min.apply(Math,[z].concat(w(R)));return new S(H,z-H)}},{key:"normalizeNative",value:function(U){if(!_(this.root,U.startContainer)||!U.collapsed&&!_(this.root,U.endContainer))return null;var C={start:{node:U.startContainer,offset:U.startOffset},end:{node:U.endContainer,offset:U.endOffset},native:U};return[C.start,C.end].forEach(function(O){for(var R=O.node,z=O.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>z)R=R.childNodes[z],z=0;else if(R.childNodes.length===z)R=R.lastChild,z=R instanceof Text?R.data.length:R.childNodes.length+1;else break;O.node=R,O.offset=z}),C}},{key:"rangeToNative",value:function(U){var C=this,O=U.collapsed?[U.index]:[U.index,U.index+U.length],R=[],z=this.scroll.length();return O.forEach(function(H,Q){H=Math.min(z-1,H);var J=void 0,re=C.scroll.leaf(H),X=i(re,2),ee=X[0],W=X[1],T=ee.position(W,Q!==0),q=i(T,2);J=q[0],W=q[1],R.push(J,W)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(U){var C=this.lastRange;if(C!=null){var O=this.getBounds(C.index,C.length);if(O!=null){var R=this.scroll.length()-1,z=this.scroll.line(Math.min(C.index,R)),H=i(z,1),Q=H[0],J=Q;if(C.length>0){var re=this.scroll.line(Math.min(C.index+C.length,R)),X=i(re,1);J=X[0]}if(!(Q==null||J==null)){var ee=U.getBoundingClientRect();O.top<ee.top?U.scrollTop-=ee.top-O.top:O.bottom>ee.bottom&&(U.scrollTop+=O.bottom-ee.bottom)}}}}},{key:"setNativeRange",value:function(U,C){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C,z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",U,C,O,R),!(U!=null&&(this.root.parentNode==null||U.parentNode==null||O.parentNode==null))){var H=document.getSelection();if(H!=null)if(U!=null){this.hasFocus()||this.root.focus();var Q=(this.getNativeRange()||{}).native;if(Q==null||z||U!==Q.startContainer||C!==Q.startOffset||O!==Q.endContainer||R!==Q.endOffset){U.tagName=="BR"&&(C=[].indexOf.call(U.parentNode.childNodes,U),U=U.parentNode),O.tagName=="BR"&&(R=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var J=document.createRange();J.setStart(U,C),J.setEnd(O,R),H.removeAllRanges(),H.addRange(J)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(U){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof C=="string"&&(O=C,C=!1),N.info("setRange",U),U!=null){var R=this.rangeToNative(U);this.setNativeRange.apply(this,w(R).concat([C]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,C=this.lastRange,O=this.getRange(),R=i(O,2),z=R[0],H=R[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(C,this.lastRange)){var Q;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[y.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(C),U];if((Q=this.emitter).emit.apply(Q,[y.default.events.EDITOR_CHANGE].concat(J)),U!==y.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}}}]),P})();function _(P,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),P.contains(I)}a.Range=S,a.default=E}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(0),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(b,w){b.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,b,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);p.blotName="break",p.tagName="BR",a.default=p}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){f(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),d=(function(f){i(m,f);function m(p){var y=f.call(this,p)||this;return y.build(),y}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=u(y);p.insertBefore(v,p.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},m.prototype.deleteAt=function(p,y){if(p===0&&y===this.length())return this.remove();this.children.forEachAt(p,y,function(v,g,b){v.deleteAt(g,b)})},m.prototype.descendant=function(p,y){var v=this.children.find(y),g=v[0],b=v[1];return p.blotName==null&&p(g)||p.blotName!=null&&g instanceof p?[g,b]:g instanceof m?g.descendant(p,b):[null,-1]},m.prototype.descendants=function(p,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],b=v;return this.children.forEachAt(y,v,function(w,j,N){(p.blotName==null&&p(w)||p.blotName!=null&&w instanceof p)&&g.push(w),w instanceof m&&(g=g.concat(w.descendants(p,j,b))),b-=N}),g},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),f.prototype.detach.call(this)},m.prototype.formatAt=function(p,y,v,g){this.children.forEachAt(p,y,function(b,w,j){b.formatAt(w,j,v,g)})},m.prototype.insertAt=function(p,y,v){var g=this.children.find(p),b=g[0],w=g[1];if(b)b.insertAt(w,y,v);else{var j=v==null?c.create("text",y):c.create(y,v);this.appendChild(j)}},m.prototype.insertBefore=function(p,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new c.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,y)},m.prototype.length=function(){return this.children.reduce(function(p,y){return p+y.length()},0)},m.prototype.moveChildren=function(p,y){this.children.forEach(function(v){p.insertBefore(v,y)})},m.prototype.optimize=function(p){if(f.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var y=c.create(this.statics.defaultChild);this.appendChild(y),y.optimize(p)}else this.remove()},m.prototype.path=function(p,y){y===void 0&&(y=!1);var v=this.children.find(p,y),g=v[0],b=v[1],w=[[this,p]];return g instanceof m?w.concat(g.path(b,y)):(g!=null&&w.push([g,b]),w)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),f.prototype.replace.call(this,p)},m.prototype.split=function(p,y){if(y===void 0&&(y=!1),!y){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(g,b,w){g=g.split(b,y),v.appendChild(g)}),v},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,y){var v=this,g=[],b=[];p.forEach(function(w){w.target===v.domNode&&w.type==="childList"&&(g.push.apply(g,w.addedNodes),b.push.apply(b,w.removedNodes))}),b.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(w);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(w){return w.parentNode==v.domNode}).sort(function(w,j){return w===j?0:w.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var j=null;w.nextSibling!=null&&(j=c.find(w.nextSibling));var N=u(w);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},m})(l.default);function u(f){var m=c.find(f);if(m==null)try{m=c.create(f)}catch{m=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(y){m.domNode.appendChild(y)}),f.parentNode&&f.parentNode.replaceChild(m.domNode,f),m.attach()}return m}a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){f(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),d=s(1),u=(function(f){i(m,f);function m(p){var y=f.call(this,p)||this;return y.attributes=new l.default(y.domNode),y}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,y){var v=d.query(p);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==y)&&this.replaceWith(p,y)},m.prototype.formats=function(){var p=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(p[this.statics.blotName]=y),p},m.prototype.replaceWith=function(p,y){var v=f.prototype.replaceWith.call(this,p,y);return this.attributes.copy(v),v},m.prototype.update=function(p,y){var v=this;f.prototype.update.call(this,p,y),p.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,y){var v=f.prototype.wrap.call(this,p,y);return v instanceof m&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},m})(c.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){d(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.value=function(f){return!0},u.prototype.index=function(f,m){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},u.prototype.position=function(f,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(p+=1),[this.parent.domNode,p]},u.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=s(11),o=s(3),l={attributes:{compose:function(d,u,f){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var m=o(!0,{},u);f||(m=Object.keys(m).reduce(function(y,v){return m[v]!=null&&(y[v]=m[v]),y},{}));for(var p in d)d[p]!==void 0&&u[p]===void 0&&(m[p]=d[p]);return Object.keys(m).length>0?m:void 0},diff:function(d,u){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var f=Object.keys(d).concat(Object.keys(u)).reduce(function(m,p){return i(d[p],u[p])||(m[p]=u[p]===void 0?null:u[p]),m},{});return Object.keys(f).length>0?f:void 0},transform:function(d,u,f){if(typeof d!="object")return u;if(typeof u=="object"){if(!f)return u;var m=Object.keys(u).reduce(function(p,y){return d[y]===void 0&&(p[y]=u[y]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var u=this.ops[this.index];if(u){var f=this.offset,m=l.length(u);if(d>=m-f?(d=m-f,this.index+=1,this.offset=0):this.offset+=d,typeof u.delete=="number")return{delete:d};var p={};return u.attributes&&(p.attributes=u.attributes),typeof u.retain=="number"?p.retain=d:typeof u.insert=="string"?p.insert=u.insert.substr(f,d):p.insert=u.insert,p}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,u=this.index,f=this.next(),m=this.ops.slice(this.index);return this.offset=d,this.index=u,[f].concat(m)}else return[]},r.exports=l}),(function(r,a){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(v,g,b,w,j){typeof g=="object"&&(b=g.depth,w=g.prototype,j=g.includeNonEnumerable,g=g.circular);var N=[],S=[],E=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof b>"u"&&(b=1/0);function _(P,I){if(P===null)return null;if(I===0)return P;var U,C;if(typeof P!="object")return P;if(i(P,o))U=new o;else if(i(P,l))U=new l;else if(i(P,c))U=new c(function(ee,W){P.then(function(T){ee(_(T,I-1))},function(T){W(_(T,I-1))})});else if(d.__isArray(P))U=[];else if(d.__isRegExp(P))U=new RegExp(P.source,y(P)),P.lastIndex&&(U.lastIndex=P.lastIndex);else if(d.__isDate(P))U=new Date(P.getTime());else{if(E&&Buffer.isBuffer(P))return Buffer.allocUnsafe?U=Buffer.allocUnsafe(P.length):U=new Buffer(P.length),P.copy(U),U;i(P,Error)?U=Object.create(P):typeof w>"u"?(C=Object.getPrototypeOf(P),U=Object.create(C)):(U=Object.create(w),C=w)}if(g){var O=N.indexOf(P);if(O!=-1)return S[O];N.push(P),S.push(U)}i(P,o)&&P.forEach(function(ee,W){var T=_(W,I-1),q=_(ee,I-1);U.set(T,q)}),i(P,l)&&P.forEach(function(ee){var W=_(ee,I-1);U.add(W)});for(var R in P){var z;C&&(z=Object.getOwnPropertyDescriptor(C,R)),!(z&&z.set==null)&&(U[R]=_(P[R],I-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(P),R=0;R<H.length;R++){var Q=H[R],J=Object.getOwnPropertyDescriptor(P,Q);J&&!J.enumerable&&!j||(U[Q]=_(P[Q],I-1),J.enumerable||Object.defineProperty(U,Q,{enumerable:!1}))}if(j)for(var re=Object.getOwnPropertyNames(P),R=0;R<re.length;R++){var X=re[R],J=Object.getOwnPropertyDescriptor(P,X);J&&J.enumerable||(U[X]=_(P[X],I-1),Object.defineProperty(U,X,{enumerable:!1}))}return U}return _(v,b)}d.clonePrototype=function(g){if(g===null)return null;var b=function(){};return b.prototype=g,new b};function u(v){return Object.prototype.toString.call(v)}d.__objToStr=u;function f(v){return typeof v=="object"&&u(v)==="[object Date]"}d.__isDate=f;function m(v){return typeof v=="object"&&u(v)==="[object Array]"}d.__isArray=m;function p(v){return typeof v=="object"&&u(v)==="[object RegExp]"}d.__isRegExp=p;function y(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return d.__getRegExpFlags=y,d})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function U(C,O){var R=[],z=!0,H=!1,Q=void 0;try{for(var J=C[Symbol.iterator](),re;!(z=(re=J.next()).done)&&(R.push(re.value),!(O&&R.length===O));z=!0);}catch(X){H=!0,Q=X}finally{try{!z&&J.return&&J.return()}finally{if(H)throw Q}}return R}return function(C,O){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return U(C,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function U(C,O){for(var R=0;R<O.length;R++){var z=O[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(C,z.key,z)}}return function(C,O,R){return O&&U(C.prototype,O),R&&U(C,R),C}})(),l=function U(C,O,R){C===null&&(C=Function.prototype);var z=Object.getOwnPropertyDescriptor(C,O);if(z===void 0){var H=Object.getPrototypeOf(C);return H===null?void 0:U(H,O,R)}else{if("value"in z)return z.value;var Q=z.get;return Q===void 0?void 0:Q.call(R)}},c=s(0),d=N(c),u=s(8),f=N(u),m=s(4),p=N(m),y=s(16),v=N(y),g=s(13),b=N(g),w=s(25),j=N(w);function N(U){return U&&U.__esModule?U:{default:U}}function S(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")}function E(U,C){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:U}function _(U,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);U.prototype=Object.create(C&&C.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(U,C):U.__proto__=C)}function P(U){return U instanceof p.default||U instanceof m.BlockEmbed}var I=(function(U){_(C,U);function C(O,R){S(this,C);var z=E(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O));return z.emitter=R.emitter,Array.isArray(R.whitelist)&&(z.whitelist=R.whitelist.reduce(function(H,Q){return H[Q]=!0,H},{})),z.domNode.addEventListener("DOMNodeInserted",function(){}),z.optimize(),z.enable(),z}return o(C,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,z){var H=this.line(R),Q=i(H,2),J=Q[0],re=Q[1],X=this.line(R+z),ee=i(X,1),W=ee[0];if(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,R,z),W!=null&&J!==W&&re>0){if(J instanceof m.BlockEmbed||W instanceof m.BlockEmbed){this.optimize();return}if(J instanceof b.default){var T=J.newlineIndex(J.length(),!0);if(T>-1&&(J=J.split(T+1),J===W)){this.optimize();return}}else if(W instanceof b.default){var q=W.newlineIndex(0);q>-1&&W.split(q+1)}var V=W.children.head instanceof v.default?null:W.children.head;J.moveChildren(W,V),J.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,z,H,Q){this.whitelist!=null&&!this.whitelist[H]||(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,R,z,H,Q),this.optimize())}},{key:"insertAt",value:function(R,z,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[z])){if(R>=this.length())if(H==null||d.default.query(z,d.default.Scope.BLOCK)==null){var Q=d.default.create(this.statics.defaultChild);this.appendChild(Q),H==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),Q.insertAt(0,z,H)}else{var J=d.default.create(z,H);this.appendChild(J)}else l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,R,z,H);this.optimize()}}},{key:"insertBefore",value:function(R,z){if(R.statics.scope===d.default.Scope.INLINE_BLOT){var H=d.default.create(this.statics.defaultChild);H.appendChild(R),R=H}l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,R,z)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(P,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function Q(J,re,X){var ee=[],W=X;return J.children.forEachAt(re,X,function(T,q,V){P(T)?ee.push(T):T instanceof d.default.Container&&(ee=ee.concat(Q(T,q,W))),W-=V}),ee};return H(this,R,z)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,R,z),R.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,R,z))}},{key:"path",value:function(R){return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var z=f.default.sources.USER;typeof R=="string"&&(z=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,z,R),l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,z,R)}}}]),C})(d.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,m.BlockEmbed,j.default],a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SHORTKEY=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(oe,me){var se=[],de=!0,Re=!1,he=void 0;try{for(var Ue=oe[Symbol.iterator](),Oe;!(de=(Oe=Ue.next()).done)&&(se.push(Oe.value),!(me&&se.length===me));de=!0);}catch(le){Re=!0,he=le}finally{try{!de&&Ue.return&&Ue.return()}finally{if(Re)throw he}}return se}return function(oe,me){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return K(oe,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(oe,me){for(var se=0;se<me.length;se++){var de=me[se];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(oe,de.key,de)}}return function(oe,me,se){return me&&K(oe.prototype,me),se&&K(oe,se),oe}})(),c=s(21),d=U(c),u=s(11),f=U(u),m=s(3),p=U(m),y=s(2),v=U(y),g=s(20),b=U(g),w=s(0),j=U(w),N=s(5),S=U(N),E=s(10),_=U(E),P=s(9),I=U(P);function U(K){return K&&K.__esModule?K:{default:K}}function C(K,oe,me){return oe in K?Object.defineProperty(K,oe,{value:me,enumerable:!0,configurable:!0,writable:!0}):K[oe]=me,K}function O(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function R(K,oe){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:K}function z(K,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);K.prototype=Object.create(oe&&oe.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(K,oe):K.__proto__=oe)}var H=(0,_.default)("quill:keyboard"),Q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=(function(K){z(oe,K),l(oe,null,[{key:"match",value:function(se,de){return de=B(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Re){return!!de[Re]!==se[Re]&&de[Re]!==null})?!1:de.key===(se.which||se.keyCode)}}]);function oe(me,se){O(this,oe);var de=R(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,me,se));return de.bindings={},Object.keys(de.options.bindings).forEach(function(Re){Re==="list autofill"&&me.scroll.whitelist!=null&&!me.scroll.whitelist.list||de.options.bindings[Re]&&de.addBinding(de.options.bindings[Re])}),de.addBinding({key:oe.keys.ENTER,shiftKey:null},T),de.addBinding({key:oe.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:oe.keys.BACKSPACE},{collapsed:!0},X),de.addBinding({key:oe.keys.DELETE},{collapsed:!0},ee)):(de.addBinding({key:oe.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),de.addBinding({key:oe.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ee)),de.addBinding({key:oe.keys.BACKSPACE},{collapsed:!1},W),de.addBinding({key:oe.keys.DELETE},{collapsed:!1},W),de.addBinding({key:oe.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),de.listen(),de}return l(oe,[{key:"addBinding",value:function(se){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},he=B(se);if(he==null||he.key==null)return H.warn("Attempted to add invalid keyboard binding",he);typeof de=="function"&&(de={handler:de}),typeof Re=="function"&&(Re={handler:Re}),he=(0,p.default)(he,de,Re),this.bindings[he.key]=this.bindings[he.key]||[],this.bindings[he.key].push(he)}},{key:"listen",value:function(){var se=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var Re=de.which||de.keyCode,he=(se.bindings[Re]||[]).filter(function(qe){return oe.match(de,qe)});if(he.length!==0){var Ue=se.quill.getSelection();if(!(Ue==null||!se.quill.hasFocus())){var Oe=se.quill.getLine(Ue.index),le=o(Oe,2),te=le[0],Se=le[1],we=se.quill.getLeaf(Ue.index),Pe=o(we,2),fe=Pe[0],ue=Pe[1],Ee=Ue.length===0?[fe,ue]:se.quill.getLeaf(Ue.index+Ue.length),Ye=o(Ee,2),xe=Ye[0],ve=Ye[1],Fe=fe instanceof j.default.Text?fe.value().slice(0,ue):"",$e=xe instanceof j.default.Text?xe.value().slice(ve):"",_e={collapsed:Ue.length===0,empty:Ue.length===0&&te.length()<=1,format:se.quill.getFormat(Ue),offset:Se,prefix:Fe,suffix:$e},Be=he.some(function(qe){if(qe.collapsed!=null&&qe.collapsed!==_e.collapsed||qe.empty!=null&&qe.empty!==_e.empty||qe.offset!=null&&qe.offset!==_e.offset)return!1;if(Array.isArray(qe.format)){if(qe.format.every(function(Ze){return _e.format[Ze]==null}))return!1}else if(i(qe.format)==="object"&&!Object.keys(qe.format).every(function(Ze){return qe.format[Ze]===!0?_e.format[Ze]!=null:qe.format[Ze]===!1?_e.format[Ze]==null:(0,f.default)(qe.format[Ze],_e.format[Ze])}))return!1;return qe.prefix!=null&&!qe.prefix.test(_e.prefix)||qe.suffix!=null&&!qe.suffix.test(_e.suffix)?!1:qe.handler.call(se,Ue,_e)!==!0});Be&&de.preventDefault()}}}})}}]),oe})(I.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:V("bold"),italic:V("italic"),underline:V("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(oe,me){if(me.collapsed&&me.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(oe,me){if(me.collapsed&&me.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(oe,me){me.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):me.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(oe){this.quill.deleteText(oe.index-1,1,S.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(oe){this.quill.history.cutoff();var me=new v.default().retain(oe.index).delete(oe.length).insert("	");this.quill.updateContents(me,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(oe.index+1,S.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(oe,me){this.quill.format("list",!1,S.default.sources.USER),me.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(oe){var me=this.quill.getLine(oe.index),se=o(me,2),de=se[0],Re=se[1],he=(0,p.default)({},de.formats(),{list:"checked"}),Ue=new v.default().retain(oe.index).insert(`
`,he).retain(de.length()-Re-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(oe.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(oe,me){var se=this.quill.getLine(oe.index),de=o(se,2),Re=de[0],he=de[1],Ue=new v.default().retain(oe.index).insert(`
`,me.format).retain(Re.length()-he-1).retain(1,{header:null});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(oe.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(oe,me){var se=me.prefix.length,de=this.quill.getLine(oe.index),Re=o(de,2),he=Re[0],Ue=Re[1];if(Ue>se)return!0;var Oe=void 0;switch(me.prefix.trim()){case"[]":case"[ ]":Oe="unchecked";break;case"[x]":Oe="checked";break;case"-":case"*":Oe="bullet";break;default:Oe="ordered"}this.quill.insertText(oe.index," ",S.default.sources.USER),this.quill.history.cutoff();var le=new v.default().retain(oe.index-Ue).delete(se+1).retain(he.length()-2-Ue).retain(1,{list:Oe});this.quill.updateContents(le,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(oe.index-se,S.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(oe){var me=this.quill.getLine(oe.index),se=o(me,2),de=se[0],Re=se[1],he=new v.default().retain(oe.index+de.length()-Re-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(he,S.default.sources.USER)}},"embed left":re(J.keys.LEFT,!1),"embed left shift":re(J.keys.LEFT,!0),"embed right":re(J.keys.RIGHT,!1),"embed right shift":re(J.keys.RIGHT,!0)}};function re(K,oe){var me,se=K===J.keys.LEFT?"prefix":"suffix";return me={key:K,shiftKey:oe,altKey:null},C(me,se,/^$/),C(me,"handler",function(Re){var he=Re.index;K===J.keys.RIGHT&&(he+=Re.length+1);var Ue=this.quill.getLeaf(he),Oe=o(Ue,1),le=Oe[0];return le instanceof j.default.Embed?(K===J.keys.LEFT?oe?this.quill.setSelection(Re.index-1,Re.length+1,S.default.sources.USER):this.quill.setSelection(Re.index-1,S.default.sources.USER):oe?this.quill.setSelection(Re.index,Re.length+1,S.default.sources.USER):this.quill.setSelection(Re.index+Re.length+1,S.default.sources.USER),!1):!0}),me}function X(K,oe){if(!(K.index===0||this.quill.getLength()<=1)){var me=this.quill.getLine(K.index),se=o(me,1),de=se[0],Re={};if(oe.offset===0){var he=this.quill.getLine(K.index-1),Ue=o(he,1),Oe=Ue[0];if(Oe!=null&&Oe.length()>1){var le=de.formats(),te=this.quill.getFormat(K.index-1,1);Re=b.default.attributes.diff(le,te)||{}}}var Se=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(oe.prefix)?2:1;this.quill.deleteText(K.index-Se,Se,S.default.sources.USER),Object.keys(Re).length>0&&this.quill.formatLine(K.index-Se,Se,Re,S.default.sources.USER),this.quill.focus()}}function ee(K,oe){var me=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(oe.suffix)?2:1;if(!(K.index>=this.quill.getLength()-me)){var se={},de=0,Re=this.quill.getLine(K.index),he=o(Re,1),Ue=he[0];if(oe.offset>=Ue.length()-1){var Oe=this.quill.getLine(K.index+1),le=o(Oe,1),te=le[0];if(te){var Se=Ue.formats(),we=this.quill.getFormat(K.index,1);se=b.default.attributes.diff(Se,we)||{},de=te.length()}}this.quill.deleteText(K.index,me,S.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(K.index+de-1,me,se,S.default.sources.USER)}}function W(K){var oe=this.quill.getLines(K),me={};if(oe.length>1){var se=oe[0].formats(),de=oe[oe.length-1].formats();me=b.default.attributes.diff(de,se)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(me).length>0&&this.quill.formatLine(K.index,1,me,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function T(K,oe){var me=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var se=Object.keys(oe.format).reduce(function(de,Re){return j.default.query(Re,j.default.Scope.BLOCK)&&!Array.isArray(oe.format[Re])&&(de[Re]=oe.format[Re]),de},{});this.quill.insertText(K.index,`
`,se,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(oe.format).forEach(function(de){se[de]==null&&(Array.isArray(oe.format[de])||de!=="link"&&me.quill.format(de,oe.format[de],S.default.sources.USER))})}function q(K){return{key:J.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(me){var se=j.default.query("code-block"),de=me.index,Re=me.length,he=this.quill.scroll.descendant(se,de),Ue=o(he,2),Oe=Ue[0],le=Ue[1];if(Oe!=null){var te=this.quill.getIndex(Oe),Se=Oe.newlineIndex(le,!0)+1,we=Oe.newlineIndex(te+le+Re),Pe=Oe.domNode.textContent.slice(Se,we).split(`
`);le=0,Pe.forEach(function(fe,ue){K?(Oe.insertAt(Se+le,se.TAB),le+=se.TAB.length,ue===0?de+=se.TAB.length:Re+=se.TAB.length):fe.startsWith(se.TAB)&&(Oe.deleteAt(Se+le,se.TAB.length),le-=se.TAB.length,ue===0?de-=se.TAB.length:Re-=se.TAB.length),le+=fe.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(de,Re,S.default.sources.SILENT)}}}}function V(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(me,se){this.quill.format(K,!se.format[K],S.default.sources.USER)}}}function B(K){if(typeof K=="string"||typeof K=="number")return B({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,d.default)(K,!1)),typeof K.key=="string")if(J.keys[K.key.toUpperCase()]!=null)K.key=J.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Q]=K.shortKey,delete K.shortKey),K}a.default=J,a.SHORTKEY=Q}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(w,j){var N=[],S=!0,E=!1,_=void 0;try{for(var P=w[Symbol.iterator](),I;!(S=(I=P.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(U){E=!0,_=U}finally{try{!S&&P.return&&P.return()}finally{if(E)throw _}}return N}return function(w,j){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return b(w,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:b(E,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),c=s(0),d=m(c),u=s(7),f=m(u);function m(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function y(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function v(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var g=(function(b){v(w,b),l(w,null,[{key:"value",value:function(){}}]);function w(j,N){p(this,w);var S=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(w.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,S);for(var E=this,_=0;E!=null&&E.statics.scope!==d.default.Scope.BLOCK_BLOT;)_+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=w.CONTENTS.length,E.optimize(),E.formatAt(_,w.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),E=void 0,_=void 0,P=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];E=I[0],_=I[1],P=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var U=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof f.default?(E=this.next.domNode,this.next.insertAt(0,U),this.textNode.data=w.CONTENTS):(this.textNode.data=U,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),_!=null){var C=[_,P].map(function(R){return Math.max(0,Math.min(E.data.length,R-1))}),O=i(C,2);return _=O[0],P=O[1],{startNode:E,startOffset:_,endNode:E,endOffset:P}}}}},{key:"update",value:function(N,S){var E=this;if(N.some(function(P){return P.type==="characterData"&&P.target===E.textNode})){var _=this.restore();_&&(S.range=_)}}},{key:"value",value:function(){return""}}]),w})(d.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=d(i),l=s(4),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);p.allowedChildren=[c.default,l.BlockEmbed,p],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ColorStyle=a.ColorClass=a.ColorAttributor=void 0;var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function f(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function m(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=(function(g){m(b,g);function b(){return u(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(j){var N=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),b})(c.default.Attributor.Style),y=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new p("color","color",{scope:c.default.Scope.INLINE});a.ColorAttributor=p,a.ColorClass=y,a.ColorStyle=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.sanitize=a.default=void 0;var i=(function(){function v(g,b){for(var w=0;w<b.length;w++){var j=b[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,w){return b&&v(g.prototype,b),w&&v(g,w),g}})(),o=function v(g,b,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,b,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(6),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(w,j){if(w!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(w){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return w=this.sanitize(w),j.setAttribute("href",w),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return y(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),g})(c.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,g){var b=document.createElement("a");b.href=v;var w=b.href.slice(0,b.href.indexOf(":"));return g.indexOf(w)>-1}a.default=p,a.sanitize=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),l=s(23),c=f(l),d=s(107),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}var p=0;function y(g,b){g.setAttribute(b,g.getAttribute(b)!=="true")}var v=(function(){function g(b){var w=this;m(this,g),this.select=b,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:w.togglePicker();break;case c.default.keys.ESCAPE:w.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),w.hasAttribute("value")&&N.setAttribute("data-value",w.getAttribute("value")),w.textContent&&N.setAttribute("data-label",w.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=u.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=w.buildItem(N);j.appendChild(S),N.selected===!0&&w.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(j){w.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(w!==N&&(N?.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),g})();a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=H(i),l=s(5),c=H(l),d=s(4),u=H(d),f=s(16),m=H(f),p=s(25),y=H(p),v=s(24),g=H(v),b=s(35),w=H(b),j=s(6),N=H(j),S=s(22),E=H(S),_=s(7),P=H(_),I=s(55),U=H(I),C=s(42),O=H(C),R=s(23),z=H(R);function H(Q){return Q&&Q.__esModule?Q:{default:Q}}c.default.register({"blots/block":u.default,"blots/block/embed":d.BlockEmbed,"blots/break":m.default,"blots/container":y.default,"blots/cursor":g.default,"blots/embed":w.default,"blots/inline":N.default,"blots/scroll":E.default,"blots/text":P.default,"modules/clipboard":U.default,"modules/history":O.default,"modules/keyboard":z.default}),o.default.register(u.default,m.default,g.default,N.default,E.default,P.default),a.default=c.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,d){var u=this.isolate(c,d);u.remove()},l.prototype.formatAt=function(c,d,u,f){var m=this.isolate(c,d);if(i.query(u,i.Scope.BLOT)!=null&&f)m.wrap(u,f);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);m.wrap(p),p.format(u,f)}},l.prototype.insertAt=function(c,d,u){var f=u==null?i.create("text",d):i.create(d,u),m=this.split(c);this.parent.insertBefore(f,m)},l.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var u=null;c.children.insertBefore(this,d),d!=null&&(u=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=u)&&c.domNode.insertBefore(this.domNode,u),this.parent=c,this.attach()},l.prototype.isolate=function(c,d){var u=this.split(c);return u.split(d),u},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return u.replace(this),u},l.prototype.split=function(c,d){return c===0?this:this.next},l.prototype.update=function(c,d){},l.prototype.wrap=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},l.blotName="abstract",l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),d=(function(){function u(f){this.attributes={},this.domNode=f,this.build()}return u.prototype.attribute=function(f,m){m?f.add(this.domNode,m)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},u.prototype.build=function(){var f=this;this.attributes={};var m=i.default.keys(this.domNode),p=o.default.keys(this.domNode),y=l.default.keys(this.domNode);m.concat(p).concat(y).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(f.attributes[g.attrName]=g)})},u.prototype.copy=function(f){var m=this;Object.keys(this.attributes).forEach(function(p){var y=m.attributes[p].value(m.domNode);f.format(p,y)})},u.prototype.move=function(f){var m=this;this.copy(f),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},u.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=f.attributes[p].value(f.domNode),m},{})},u})();a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){d(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d,u){var f=d.getAttribute("class")||"";return f.split(/\s+/).filter(function(m){return m.indexOf(u+"-")===0})}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},u.prototype.add=function(f,m){return this.canAdd(f,m)?(this.remove(f),f.classList.add(this.keyName+"-"+m),!0):!1},u.prototype.remove=function(f){var m=l(f,this.keyName);m.forEach(function(p){f.classList.remove(p)}),f.classList.length===0&&f.removeAttribute("class")},u.prototype.value=function(f){var m=l(f,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(f,p)?p:""},u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){d(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d){var u=d.split("-"),f=u.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return u[0]+f}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},u.prototype.add=function(f,m){return this.canAdd(f,m)?(f.style[l(this.keyName)]=m,!0):!1},u.prototype.remove=function(f){f.style[l(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},u.prototype.value=function(f){var m=f.style[l(this.keyName)];return this.canAdd(f,m)?m:""},u})(o.default);a.default=c}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var m=u[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){o(this,c),this.quill=d,this.options=u,this.modules={}}return i(c,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(f){u.modules[f]==null&&u.addModule(f)})}},{key:"addModule",value:function(u){var f=this.quill.constructor.import("modules/"+u);return this.modules[u]=new f(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:b(E,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(0),c=f(l),d=s(7),u=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function p(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function y(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var v="\uFEFF",g=(function(b){y(w,b);function w(j){m(this,w);var N=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(w,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,E=void 0,_=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof u.default){var P=this.prev.length();this.prev.insertAt(P,_),S={startNode:this.prev.domNode,startOffset:P+_.length}}else E=document.createTextNode(_),this.parent.insertBefore(c.default.create(E),this),S={startNode:E,startOffset:_.length};else N===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,_),S={startNode:this.next.domNode,startOffset:_.length}):(E=document.createTextNode(_),this.parent.insertBefore(c.default.create(E),this.next),S={startNode:E,startOffset:_.length}));return N.data=v,S}},{key:"update",value:function(N,S){var E=this;N.forEach(function(_){if(_.type==="characterData"&&(_.target===E.leftGuard||_.target===E.rightGuard)){var P=E.restore(_.target);P&&(S.range=P)}})}}]),w})(c.default.Embed);a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AlignStyle=a.AlignClass=a.AlignAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",c),u=new o.default.Attributor.Class("align","ql-align",c),f=new o.default.Attributor.Style("align","text-align",c);a.AlignAttribute=d,a.AlignClass=u,a.AlignStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundStyle=a.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),u=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});a.BackgroundClass=d,a.BackgroundStyle=u}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.DirectionStyle=a.DirectionClass=a.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",c),u=new o.default.Attributor.Class("direction","ql-direction",c),f=new o.default.Attributor.Style("direction","direction",c);a.DirectionAttribute=d,a.DirectionClass=u,a.DirectionStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.FontClass=a.FontStyle=void 0;var i=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:b(E,j,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(0),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function f(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function m(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var p={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new c.default.Attributor.Class("font","ql-font",p),v=(function(b){m(w,b);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(N){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),w})(c.default.Attributor.Style),g=new v("font","font-family",p);a.FontStyle=g,a.FontClass=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SizeStyle=a.SizeClass=void 0;var i=s(0),o=l(i);function l(u){return u&&u.__esModule?u:{default:u}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});a.SizeClass=c,a.SizeStyle=d}),(function(r,a,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.getLastChangeIndex=a.default=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var _=S[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=s(0),l=m(o),c=s(5),d=m(c),u=s(9),f=m(u);function m(j){return j&&j.__esModule?j:{default:j}}function p(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function y(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=(function(j){v(N,j);function N(S,E){p(this,N);var _=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,E));return _.lastRecorded=0,_.ignoreChange=!1,_.clear(),_.quill.on(d.default.events.EDITOR_CHANGE,function(P,I,U,C){P!==d.default.events.TEXT_CHANGE||_.ignoreChange||(!_.options.userOnly||C===d.default.sources.USER?_.record(I,U):_.transform(I))}),_.quill.keyboard.addBinding({key:"Z",shortKey:!0},_.undo.bind(_)),_.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},_.redo.bind(_)),/Win/i.test(navigator.platform)&&_.quill.keyboard.addBinding({key:"Y",shortKey:!0},_.redo.bind(_)),_}return i(N,[{key:"change",value:function(E,_){if(this.stack[E].length!==0){var P=this.stack[E].pop();this.stack[_].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[E],d.default.sources.USER),this.ignoreChange=!1;var I=w(P[E]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,_){if(E.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(_),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var U=this.stack.undo.pop();P=P.compose(U.undo),E=U.redo.compose(E)}else this.lastRecorded=I;this.stack.undo.push({redo:E,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(_){_.undo=E.transform(_.undo,!0),_.redo=E.transform(_.redo,!0)}),this.stack.redo.forEach(function(_){_.undo=E.transform(_.undo,!0),_.redo=E.transform(_.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N})(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function b(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function w(j){var N=j.reduce(function(E,_){return E+=_.delete||0,E},0),S=j.length()-N;return b(j)&&(S-=1),S}a.default=g,a.getLastChangeIndex=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BaseTooltip=void 0;var i=(function(){function T(q,V){for(var B=0;B<V.length;B++){var K=V[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}return function(q,V,B){return V&&T(q.prototype,V),B&&T(q,B),q}})(),o=function T(q,V,B){q===null&&(q=Function.prototype);var K=Object.getOwnPropertyDescriptor(q,V);if(K===void 0){var oe=Object.getPrototypeOf(q);return oe===null?void 0:T(oe,V,B)}else{if("value"in K)return K.value;var me=K.get;return me===void 0?void 0:me.call(B)}},l=s(3),c=I(l),d=s(2),u=I(d),f=s(8),m=I(f),p=s(23),y=I(p),v=s(34),g=I(v),b=s(59),w=I(b),j=s(60),N=I(j),S=s(28),E=I(S),_=s(61),P=I(_);function I(T){return T&&T.__esModule?T:{default:T}}function U(T,q){if(!(T instanceof q))throw new TypeError("Cannot call a class as a function")}function C(T,q){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:T}function O(T,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);T.prototype=Object.create(q&&q.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(T,q):T.__proto__=q)}var R=[!1,"center","right","justify"],z=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],Q=["1","2","3",!1],J=["small",!1,"large","huge"],re=(function(T){O(q,T);function q(V,B){U(this,q);var K=C(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,V,B)),oe=function me(se){if(!document.body.contains(V.root))return document.body.removeEventListener("click",me);K.tooltip!=null&&!K.tooltip.root.contains(se.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(de){de.container.contains(se.target)||de.close()})};return V.emitter.listenDOM("click",document.body,oe),K}return i(q,[{key:"addModule",value:function(B){var K=o(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,B);return B==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(B,K){B.forEach(function(oe){var me=oe.getAttribute("class")||"";me.split(/\s+/).forEach(function(se){if(se.startsWith("ql-")&&(se=se.slice(3),K[se]!=null))if(se==="direction")oe.innerHTML=K[se][""]+K[se].rtl;else if(typeof K[se]=="string")oe.innerHTML=K[se];else{var de=oe.value||"";de!=null&&K[se][de]&&(oe.innerHTML=K[se][de])}})})}},{key:"buildPickers",value:function(B,K){var oe=this;this.pickers=B.map(function(se){if(se.classList.contains("ql-align"))return se.querySelector("option")==null&&W(se,R),new N.default(se,K.align);if(se.classList.contains("ql-background")||se.classList.contains("ql-color")){var de=se.classList.contains("ql-background")?"background":"color";return se.querySelector("option")==null&&W(se,z,de==="background"?"#ffffff":"#000000"),new w.default(se,K[de])}else return se.querySelector("option")==null&&(se.classList.contains("ql-font")?W(se,H):se.classList.contains("ql-header")?W(se,Q):se.classList.contains("ql-size")&&W(se,J)),new E.default(se)});var me=function(){oe.pickers.forEach(function(de){de.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,me)}}]),q})(g.default);re.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,V=this.container.querySelector("input.ql-image[type=file]");V==null&&(V=document.createElement("input"),V.setAttribute("type","file"),V.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),V.classList.add("ql-image"),V.addEventListener("change",function(){if(V.files!=null&&V.files[0]!=null){var B=new FileReader;B.onload=function(K){var oe=q.quill.getSelection(!0);q.quill.updateContents(new u.default().retain(oe.index).delete(oe.length).insert({image:K.target.result}),m.default.sources.USER),q.quill.setSelection(oe.index+1,m.default.sources.SILENT),V.value=""},B.readAsDataURL(V.files[0])}}),this.container.appendChild(V)),V.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=(function(T){O(q,T);function q(V,B){U(this,q);var K=C(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,V,B));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(q,[{key:"listen",value:function(){var B=this;this.textbox.addEventListener("keydown",function(K){y.default.match(K,"enter")?(B.save(),K.preventDefault()):y.default.match(K,"escape")&&(B.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:B!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+B)||""),this.root.setAttribute("data-mode",B)}},{key:"restoreFocus",value:function(){var B=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=B}},{key:"save",value:function(){var B=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",B,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",B,m.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":B=ee(B);case"formula":{if(!B)break;var oe=this.quill.getSelection(!0);if(oe!=null){var me=oe.index+oe.length;this.quill.insertEmbed(me,this.root.getAttribute("data-mode"),B,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(me+1," ",m.default.sources.USER),this.quill.setSelection(me+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q})(P.default);function ee(T){var q=T.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||T.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=T.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":T}function W(T,q){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(B){var K=document.createElement("option");B===V?K.setAttribute("selected","selected"):K.setAttribute("value",B),T.appendChild(K)})}a.BaseTooltip=X,a.default=re}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,d=this.iterator();c=d();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,d=this.head;d!=null;){if(d===l)return c;c+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var d,u=this.iterator();d=u();){var f=d.length();if(l<f||c&&l===f&&(d.next==null||d.next.length()!==0))return[d,l];l-=f}return[null,0]},o.prototype.forEach=function(l){for(var c,d=this.iterator();c=d();)l(c)},o.prototype.forEachAt=function(l,c,d){if(!(c<=0))for(var u=this.find(l),f=u[0],m=u[1],p,y=l-m,v=this.iterator(f);(p=v())&&y<l+c;){var g=p.length();l>y?d(p,l-y,Math.min(c,y+g-l)):d(p,0,Math.min(g,l+c-y)),y+=g}},o.prototype.map=function(l){return this.reduce(function(c,d){return c.push(l(d)),c},[])},o.prototype.reduce=function(l,c){for(var d,u=this.iterator();d=u();)c=l(c,d);return c},o})();a.default=i}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){f(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,u=(function(f){i(m,f);function m(p){var y=f.call(this,p)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,c),y.attach(),y}return m.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,y){this.update(),p===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):f.prototype.deleteAt.call(this,p,y)},m.prototype.formatAt=function(p,y,v,g){this.update(),f.prototype.formatAt.call(this,p,y,v,g)},m.prototype.insertAt=function(p,y,v){this.update(),f.prototype.insertAt.call(this,p,y,v)},m.prototype.optimize=function(p,y){var v=this;p===void 0&&(p=[]),y===void 0&&(y={}),f.prototype.optimize.call(this,y);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)p.push(g.pop());for(var b=function(S,E){E===void 0&&(E=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),E&&b(S.parent))},w=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(w),S.optimize(y))},j=p,N=0;j.length>0;N+=1){if(N>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var E=l.find(S.target,!0);E!=null&&(E.domNode===S.target&&(S.type==="childList"?(b(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(_){var P=l.find(_,!1);b(P,!1),P instanceof o.default&&P.children.forEach(function(I){b(I,!1)})})):S.type==="attributes"&&b(E.prev)),b(E))}),this.children.forEach(w),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)p.push(g.pop())}},m.prototype.update=function(p,y){var v=this;y===void 0&&(y={}),p=p||this.observer.takeRecords(),p.map(function(g){var b=l.find(g.target,!0);return b==null?null:b.domNode[l.DATA_KEY].mutations==null?(b.domNode[l.DATA_KEY].mutations=[g],b):(b.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],y)}),this.domNode[l.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,y),this.optimize(p,y)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var p in m)m.hasOwnProperty(p)&&(f[p]=m[p])};return function(f,m){u(f,m);function p(){this.constructor=f}f.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1);function c(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(var m in u)if(u[m]!==f[m])return!1;return!0}var d=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(m){if(m.tagName!==f.tagName)return u.formats.call(this,m)},f.prototype.format=function(m,p){var y=this;m===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(f.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,m,p)},f.prototype.formatAt=function(m,p,y,v){if(this.formats()[y]!=null||l.query(y,l.Scope.ATTRIBUTE)){var g=this.isolate(m,p);g.format(y,v)}else u.prototype.formatAt.call(this,m,p,y,v)},f.prototype.optimize=function(m){u.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var y=this.next;y instanceof f&&y.prev===this&&c(p,y.formats())&&(y.moveChildren(this),y.remove())},f.blotName="inline",f.scope=l.Scope.INLINE_BLOT,f.tagName="SPAN",f})(o.default);a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){d(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(f){var m=l.query(u.blotName).tagName;if(f.tagName!==m)return d.formats.call(this,f)},u.prototype.format=function(f,m){l.query(f,l.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!m?this.replaceWith(u.blotName):d.prototype.format.call(this,f,m))},u.prototype.formatAt=function(f,m,p,y){l.query(p,l.Scope.BLOCK)!=null?this.format(p,y):d.prototype.formatAt.call(this,f,m,p,y)},u.prototype.insertAt=function(f,m,p){if(p==null||l.query(m,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,f,m,p);else{var y=this.split(f),v=l.create(m,p);y.parent.insertBefore(v,y)}},u.prototype.update=function(f,m){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,f,m)},u.blotName="block",u.scope=l.Scope.BLOCK_BLOT,u.tagName="P",u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)u.hasOwnProperty(f)&&(d[f]=u[f])};return function(d,u){c(d,u);function f(){this.constructor=d}d.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=(function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){},d.prototype.format=function(u,f){c.prototype.formatAt.call(this,0,this.length(),u,f)},d.prototype.formatAt=function(u,f,m,p){u===0&&f===this.length()?this.format(m,p):c.prototype.formatAt.call(this,u,f,m,p)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d})(o.default);a.default=l}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){d(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(d){i(u,d);function u(f){var m=d.call(this,f)||this;return m.text=m.statics.value(m.domNode),m}return u.create=function(f){return document.createTextNode(f)},u.value=function(f){var m=f.data;return m.normalize&&(m=m.normalize()),m},u.prototype.deleteAt=function(f,m){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+m)},u.prototype.index=function(f,m){return this.domNode===f?m:-1},u.prototype.insertAt=function(f,m,p){p==null?(this.text=this.text.slice(0,f)+m+this.text.slice(f),this.domNode.data=this.text):d.prototype.insertAt.call(this,f,m,p)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(f){d.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(f,m){return[this.domNode,f]},u.prototype.split=function(f,m){if(m===void 0&&(m=!1),!m){if(f===0)return this;if(f===this.length())return this.next}var p=l.create(this.domNode.splitText(f));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},u.prototype.update=function(f,m){var p=this;f.some(function(y){return y.type==="characterData"&&y.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=l.length;var u=d.indexOf(l,c);return u!==-1&&u===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),u=d.length>>>0,f=arguments[1],m,p=0;p<u;p++)if(m=d[p],c.call(f,m,p,d))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,a){var s=-1,i=1,o=0;function l(N,S,E){if(N==S)return N?[[o,N]]:[];(E<0||N.length<E)&&(E=null);var _=f(N,S),P=N.substring(0,_);N=N.substring(_),S=S.substring(_),_=m(N,S);var I=N.substring(N.length-_);N=N.substring(0,N.length-_),S=S.substring(0,S.length-_);var U=c(N,S);return P&&U.unshift([o,P]),I&&U.push([o,I]),y(U),E!=null&&(U=b(U,E)),U=w(U),U}function c(N,S){var E;if(!N)return[[i,S]];if(!S)return[[s,N]];var _=N.length>S.length?N:S,P=N.length>S.length?S:N,I=_.indexOf(P);if(I!=-1)return E=[[i,_.substring(0,I)],[o,P],[i,_.substring(I+P.length)]],N.length>S.length&&(E[0][0]=E[2][0]=s),E;if(P.length==1)return[[s,N],[i,S]];var U=p(N,S);if(U){var C=U[0],O=U[1],R=U[2],z=U[3],H=U[4],Q=l(C,R),J=l(O,z);return Q.concat([[o,H]],J)}return d(N,S)}function d(N,S){for(var E=N.length,_=S.length,P=Math.ceil((E+_)/2),I=P,U=2*P,C=new Array(U),O=new Array(U),R=0;R<U;R++)C[R]=-1,O[R]=-1;C[I+1]=0,O[I+1]=0;for(var z=E-_,H=z%2!=0,Q=0,J=0,re=0,X=0,ee=0;ee<P;ee++){for(var W=-ee+Q;W<=ee-J;W+=2){var T=I+W,q;W==-ee||W!=ee&&C[T-1]<C[T+1]?q=C[T+1]:q=C[T-1]+1;for(var V=q-W;q<E&&V<_&&N.charAt(q)==S.charAt(V);)q++,V++;if(C[T]=q,q>E)J+=2;else if(V>_)Q+=2;else if(H){var B=I+z-W;if(B>=0&&B<U&&O[B]!=-1){var K=E-O[B];if(q>=K)return u(N,S,q,V)}}}for(var oe=-ee+re;oe<=ee-X;oe+=2){var B=I+oe,K;oe==-ee||oe!=ee&&O[B-1]<O[B+1]?K=O[B+1]:K=O[B-1]+1;for(var me=K-oe;K<E&&me<_&&N.charAt(E-K-1)==S.charAt(_-me-1);)K++,me++;if(O[B]=K,K>E)X+=2;else if(me>_)re+=2;else if(!H){var T=I+z-oe;if(T>=0&&T<U&&C[T]!=-1){var q=C[T],V=I+q-T;if(K=E-K,q>=K)return u(N,S,q,V)}}}}return[[s,N],[i,S]]}function u(N,S,E,_){var P=N.substring(0,E),I=S.substring(0,_),U=N.substring(E),C=S.substring(_),O=l(P,I),R=l(U,C);return O.concat(R)}function f(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var E=0,_=Math.min(N.length,S.length),P=_,I=0;E<P;)N.substring(I,P)==S.substring(I,P)?(E=P,I=E):_=P,P=Math.floor((_-E)/2+E);return P}function m(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var E=0,_=Math.min(N.length,S.length),P=_,I=0;E<P;)N.substring(N.length-P,N.length-I)==S.substring(S.length-P,S.length-I)?(E=P,I=E):_=P,P=Math.floor((_-E)/2+E);return P}function p(N,S){var E=N.length>S.length?N:S,_=N.length>S.length?S:N;if(E.length<4||_.length*2<E.length)return null;function P(J,re,X){for(var ee=J.substring(X,X+Math.floor(J.length/4)),W=-1,T="",q,V,B,K;(W=re.indexOf(ee,W+1))!=-1;){var oe=f(J.substring(X),re.substring(W)),me=m(J.substring(0,X),re.substring(0,W));T.length<me+oe&&(T=re.substring(W-me,W)+re.substring(W,W+oe),q=J.substring(0,X-me),V=J.substring(X+oe),B=re.substring(0,W-me),K=re.substring(W+oe))}return T.length*2>=J.length?[q,V,B,K,T]:null}var I=P(E,_,Math.ceil(E.length/4)),U=P(E,_,Math.ceil(E.length/2)),C;if(!I&&!U)return null;U?I?C=I[4].length>U[4].length?I:U:C=U:C=I;var O,R,z,H;N.length>S.length?(O=C[0],R=C[1],z=C[2],H=C[3]):(z=C[0],H=C[1],O=C[2],R=C[3]);var Q=C[4];return[O,R,z,H,Q]}function y(N){N.push([o,""]);for(var S=0,E=0,_=0,P="",I="",U;S<N.length;)switch(N[S][0]){case i:_++,I+=N[S][1],S++;break;case s:E++,P+=N[S][1],S++;break;case o:E+_>1?(E!==0&&_!==0&&(U=f(I,P),U!==0&&(S-E-_>0&&N[S-E-_-1][0]==o?N[S-E-_-1][1]+=I.substring(0,U):(N.splice(0,0,[o,I.substring(0,U)]),S++),I=I.substring(U),P=P.substring(U)),U=m(I,P),U!==0&&(N[S][1]=I.substring(I.length-U)+N[S][1],I=I.substring(0,I.length-U),P=P.substring(0,P.length-U))),E===0?N.splice(S-_,E+_,[i,I]):_===0?N.splice(S-E,E+_,[s,P]):N.splice(S-E-_,E+_,[s,P],[i,I]),S=S-E-_+(E?1:0)+(_?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,_=0,E=0,P="",I="";break}N[N.length-1][1]===""&&N.pop();var C=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),C=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),C=!0)),S++;C&&y(N)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(N,S){if(S===0)return[o,N];for(var E=0,_=0;_<N.length;_++){var P=N[_];if(P[0]===s||P[0]===o){var I=E+P[1].length;if(S===I)return[_+1,N];if(S<I){N=N.slice();var U=S-E,C=[P[0],P[1].slice(0,U)],O=[P[0],P[1].slice(U)];return N.splice(_,1,C,O),[_+1,N]}else E=I}}throw new Error("cursor_pos is out of bounds!")}function b(N,S){var E=g(N,S),_=E[1],P=E[0],I=_[P],U=_[P+1];if(I==null)return N;if(I[0]!==o)return N;if(U!=null&&I[1]+U[1]===U[1]+I[1])return _.splice(P,2,U,I),j(_,P,2);if(U!=null&&U[1].indexOf(I[1])===0){_.splice(P,2,[U[0],I[1]],[0,I[1]]);var C=U[1].slice(I[1].length);return C.length>0&&_.splice(P+2,0,[U[0],C]),j(_,P,3)}else return N}function w(N){for(var S=!1,E=function(U){return U.charCodeAt(0)>=56320&&U.charCodeAt(0)<=57343},_=function(U){return U.charCodeAt(U.length-1)>=55296&&U.charCodeAt(U.length-1)<=56319},P=2;P<N.length;P+=1)N[P-2][0]===o&&_(N[P-2][1])&&N[P-1][0]===s&&E(N[P-1][1])&&N[P][0]===i&&E(N[P][1])&&(S=!0,N[P-1][1]=N[P-2][1].slice(-1)+N[P-1][1],N[P][1]=N[P-2][1].slice(-1)+N[P][1],N[P-2][1]=N[P-2][1].slice(0,-1));if(!S)return N;for(var I=[],P=0;P<N.length;P+=1)N[P][1].length>0&&I.push(N[P]);return I}function j(N,S,E){for(var _=S+E-1;_>=0&&_>=S-1;_--)if(_+1<N.length){var P=N[_],I=N[_+1];P[0]===I[1]&&N.splice(_,2,[P[0],P[1]+I[1]])}return N}}),(function(r,a){a=r.exports=typeof Object.keys=="function"?Object.keys:s,a.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,a){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";a=r.exports=s?i:o,a.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}a.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,a){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)s.call(f,m)&&u.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u,f){var m=i?i+u:u,p=this._events[m];if(f)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,g=new Array(v);y<v;y++)g[y]=p[y].fn;return g},c.prototype.emit=function(u,f,m,p,y,v){var g=i?i+u:u;if(!this._events[g])return!1;var b=this._events[g],w=arguments.length,j,N;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,m),!0;case 4:return b.fn.call(b.context,f,m,p),!0;case 5:return b.fn.call(b.context,f,m,p,y),!0;case 6:return b.fn.call(b.context,f,m,p,y,v),!0}for(N=1,j=new Array(w-1);N<w;N++)j[N-1]=arguments[N];b.fn.apply(b.context,j)}else{var S=b.length,E;for(N=0;N<S;N++)switch(b[N].once&&this.removeListener(u,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,f);break;case 3:b[N].fn.call(b[N].context,f,m);break;case 4:b[N].fn.call(b[N].context,f,m,p);break;default:if(!j)for(E=1,j=new Array(w-1);E<w;E++)j[E-1]=arguments[E];b[N].fn.apply(b[N].context,j)}}return!0},c.prototype.on=function(u,f,m){var p=new l(f,m||this),y=i?i+u:u;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.once=function(u,f,m){var p=new l(f,m||this,!0),y=i?i+u:u;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.removeListener=function(u,f,m,p){var y=i?i+u:u;if(!this._events[y])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===f&&(!p||v.once)&&(!m||v.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var g=0,b=[],w=v.length;g<w;g++)(v[g].fn!==f||p&&!v[g].once||m&&v[g].context!==m)&&b.push(v[g]);b.length?this._events[y]=b.length===1?b[0]:b:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=i?i+u:u,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.matchText=a.matchSpacing=a.matchNewline=a.matchBlot=a.matchAttributor=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},o=(function(){function we(Pe,fe){var ue=[],Ee=!0,Ye=!1,xe=void 0;try{for(var ve=Pe[Symbol.iterator](),Fe;!(Ee=(Fe=ve.next()).done)&&(ue.push(Fe.value),!(fe&&ue.length===fe));Ee=!0);}catch($e){Ye=!0,xe=$e}finally{try{!Ee&&ve.return&&ve.return()}finally{if(Ye)throw xe}}return ue}return function(Pe,fe){if(Array.isArray(Pe))return Pe;if(Symbol.iterator in Object(Pe))return we(Pe,fe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function we(Pe,fe){for(var ue=0;ue<fe.length;ue++){var Ee=fe[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(Pe,Ee.key,Ee)}}return function(Pe,fe,ue){return fe&&we(Pe.prototype,fe),ue&&we(Pe,ue),Pe}})(),c=s(3),d=O(c),u=s(2),f=O(u),m=s(0),p=O(m),y=s(5),v=O(y),g=s(10),b=O(g),w=s(9),j=O(w),N=s(36),S=s(37),E=s(13),_=O(E),P=s(26),I=s(38),U=s(39),C=s(40);function O(we){return we&&we.__esModule?we:{default:we}}function R(we,Pe,fe){return Pe in we?Object.defineProperty(we,Pe,{value:fe,enumerable:!0,configurable:!0,writable:!0}):we[Pe]=fe,we}function z(we,Pe){if(!(we instanceof Pe))throw new TypeError("Cannot call a class as a function")}function H(we,Pe){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe&&(typeof Pe=="object"||typeof Pe=="function")?Pe:we}function Q(we,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Pe);we.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Pe&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Pe):we.__proto__=Pe)}var J=(0,b.default)("quill:clipboard"),re="__ql-matcher",X=[[Node.TEXT_NODE,Se],[Node.TEXT_NODE,Oe],["br",Re],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,se],[Node.ELEMENT_NODE,te],["li",Ue],["b",me.bind(me,"bold")],["i",me.bind(me,"italic")],["style",he]],ee=[N.AlignAttribute,I.DirectionAttribute].reduce(function(we,Pe){return we[Pe.keyName]=Pe,we},{}),W=[N.AlignStyle,S.BackgroundStyle,P.ColorStyle,I.DirectionStyle,U.FontStyle,C.SizeStyle].reduce(function(we,Pe){return we[Pe.keyName]=Pe,we},{}),T=(function(we){Q(Pe,we);function Pe(fe,ue){z(this,Pe);var Ee=H(this,(Pe.__proto__||Object.getPrototypeOf(Pe)).call(this,fe,ue));return Ee.quill.root.addEventListener("paste",Ee.onPaste.bind(Ee)),Ee.container=Ee.quill.addContainer("ql-clipboard"),Ee.container.setAttribute("contenteditable",!0),Ee.container.setAttribute("tabindex",-1),Ee.matchers=[],X.concat(Ee.options.matchers).forEach(function(Ye){var xe=o(Ye,2),ve=xe[0],Fe=xe[1];!ue.matchVisual&&Fe===le||Ee.addMatcher(ve,Fe)}),Ee}return l(Pe,[{key:"addMatcher",value:function(ue,Ee){this.matchers.push([ue,Ee])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var Ee=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ee[_.default.blotName]){var Ye=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Ye,R({},_.default.blotName,Ee[_.default.blotName]))}var xe=this.prepareMatching(),ve=o(xe,2),Fe=ve[0],$e=ve[1],_e=oe(this.container,Fe,$e);return B(_e,`
`)&&_e.ops[_e.ops.length-1].attributes==null&&(_e=_e.compose(new f.default().retain(_e.length()-1).delete(1))),J.log("convert",this.container.innerHTML,_e),this.container.innerHTML="",_e}},{key:"dangerouslyPasteHTML",value:function(ue,Ee){var Ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),Ee),this.quill.setSelection(0,v.default.sources.SILENT);else{var xe=this.convert(Ee);this.quill.updateContents(new f.default().retain(ue).concat(xe),Ye),this.quill.setSelection(ue+xe.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var Ee=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var Ye=this.quill.getSelection(),xe=new f.default().retain(Ye.index),ve=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){xe=xe.concat(Ee.convert()).delete(Ye.length),Ee.quill.updateContents(xe,v.default.sources.USER),Ee.quill.setSelection(xe.length()-Ye.length,v.default.sources.SILENT),Ee.quill.scrollingContainer.scrollTop=ve,Ee.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,Ee=[],Ye=[];return this.matchers.forEach(function(xe){var ve=o(xe,2),Fe=ve[0],$e=ve[1];switch(Fe){case Node.TEXT_NODE:Ye.push($e);break;case Node.ELEMENT_NODE:Ee.push($e);break;default:[].forEach.call(ue.container.querySelectorAll(Fe),function(_e){_e[re]=_e[re]||[],_e[re].push($e)});break}}),[Ee,Ye]}}]),Pe})(j.default);T.DEFAULTS={matchers:[],matchVisual:!0};function q(we,Pe,fe){return(typeof Pe>"u"?"undefined":i(Pe))==="object"?Object.keys(Pe).reduce(function(ue,Ee){return q(ue,Ee,Pe[Ee])},we):we.reduce(function(ue,Ee){return Ee.attributes&&Ee.attributes[Pe]?ue.push(Ee):ue.insert(Ee.insert,(0,d.default)({},R({},Pe,fe),Ee.attributes))},new f.default)}function V(we){if(we.nodeType!==Node.ELEMENT_NODE)return{};var Pe="__ql-computed-style";return we[Pe]||(we[Pe]=window.getComputedStyle(we))}function B(we,Pe){for(var fe="",ue=we.ops.length-1;ue>=0&&fe.length<Pe.length;--ue){var Ee=we.ops[ue];if(typeof Ee.insert!="string")break;fe=Ee.insert+fe}return fe.slice(-1*Pe.length)===Pe}function K(we){if(we.childNodes.length===0)return!1;var Pe=V(we);return["block","list-item"].indexOf(Pe.display)>-1}function oe(we,Pe,fe){return we.nodeType===we.TEXT_NODE?fe.reduce(function(ue,Ee){return Ee(we,ue)},new f.default):we.nodeType===we.ELEMENT_NODE?[].reduce.call(we.childNodes||[],function(ue,Ee){var Ye=oe(Ee,Pe,fe);return Ee.nodeType===we.ELEMENT_NODE&&(Ye=Pe.reduce(function(xe,ve){return ve(Ee,xe)},Ye),Ye=(Ee[re]||[]).reduce(function(xe,ve){return ve(Ee,xe)},Ye)),ue.concat(Ye)},new f.default):new f.default}function me(we,Pe,fe){return q(fe,we,!0)}function se(we,Pe){var fe=p.default.Attributor.Attribute.keys(we),ue=p.default.Attributor.Class.keys(we),Ee=p.default.Attributor.Style.keys(we),Ye={};return fe.concat(ue).concat(Ee).forEach(function(xe){var ve=p.default.query(xe,p.default.Scope.ATTRIBUTE);ve!=null&&(Ye[ve.attrName]=ve.value(we),Ye[ve.attrName])||(ve=ee[xe],ve!=null&&(ve.attrName===xe||ve.keyName===xe)&&(Ye[ve.attrName]=ve.value(we)||void 0),ve=W[xe],ve!=null&&(ve.attrName===xe||ve.keyName===xe)&&(ve=W[xe],Ye[ve.attrName]=ve.value(we)||void 0))}),Object.keys(Ye).length>0&&(Pe=q(Pe,Ye)),Pe}function de(we,Pe){var fe=p.default.query(we);if(fe==null)return Pe;if(fe.prototype instanceof p.default.Embed){var ue={},Ee=fe.value(we);Ee!=null&&(ue[fe.blotName]=Ee,Pe=new f.default().insert(ue,fe.formats(we)))}else typeof fe.formats=="function"&&(Pe=q(Pe,fe.blotName,fe.formats(we)));return Pe}function Re(we,Pe){return B(Pe,`
`)||Pe.insert(`
`),Pe}function he(){return new f.default}function Ue(we,Pe){var fe=p.default.query(we);if(fe==null||fe.blotName!=="list-item"||!B(Pe,`
`))return Pe;for(var ue=-1,Ee=we.parentNode;!Ee.classList.contains("ql-clipboard");)(p.default.query(Ee)||{}).blotName==="list"&&(ue+=1),Ee=Ee.parentNode;return ue<=0?Pe:Pe.compose(new f.default().retain(Pe.length()-1).retain(1,{indent:ue}))}function Oe(we,Pe){return B(Pe,`
`)||(K(we)||Pe.length()>0&&we.nextSibling&&K(we.nextSibling))&&Pe.insert(`
`),Pe}function le(we,Pe){if(K(we)&&we.nextElementSibling!=null&&!B(Pe,`

`)){var fe=we.offsetHeight+parseFloat(V(we).marginTop)+parseFloat(V(we).marginBottom);we.nextElementSibling.offsetTop>we.offsetTop+fe*1.5&&Pe.insert(`
`)}return Pe}function te(we,Pe){var fe={},ue=we.style||{};return ue.fontStyle&&V(we).fontStyle==="italic"&&(fe.italic=!0),ue.fontWeight&&(V(we).fontWeight.startsWith("bold")||parseInt(V(we).fontWeight)>=700)&&(fe.bold=!0),Object.keys(fe).length>0&&(Pe=q(Pe,fe)),parseFloat(ue.textIndent||0)>0&&(Pe=new f.default().insert("	").concat(Pe)),Pe}function Se(we,Pe){var fe=we.data;if(we.parentNode.tagName==="O:P")return Pe.insert(fe.trim());if(fe.trim().length===0&&we.parentNode.classList.contains("ql-clipboard"))return Pe;if(!V(we.parentNode).whiteSpace.startsWith("pre")){var ue=function(Ye,xe){return xe=xe.replace(/[^\u00a0]/g,""),xe.length<1&&Ye?" ":xe};fe=fe.replace(/\r\n/g," ").replace(/\n/g," "),fe=fe.replace(/\s\s+/g,ue.bind(ue,!0)),(we.previousSibling==null&&K(we.parentNode)||we.previousSibling!=null&&K(we.previousSibling))&&(fe=fe.replace(/^\s+/,ue.bind(ue,!1))),(we.nextSibling==null&&K(we.parentNode)||we.nextSibling!=null&&K(we.nextSibling))&&(fe=fe.replace(/\s+$/,ue.bind(ue,!1)))}return Pe.insert(fe)}a.default=T,a.matchAttributor=se,a.matchBlot=de,a.matchNewline=Oe,a.matchSpacing=le,a.matchText=Se}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(6),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,b),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);p.blotName="bold",p.tagName=["STRONG","B"],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.addControls=a.default=void 0;var i=(function(){function C(O,R){var z=[],H=!0,Q=!1,J=void 0;try{for(var re=O[Symbol.iterator](),X;!(H=(X=re.next()).done)&&(z.push(X.value),!(R&&z.length===R));H=!0);}catch(ee){Q=!0,J=ee}finally{try{!H&&re.return&&re.return()}finally{if(Q)throw J}}return z}return function(O,R){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return C(O,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function C(O,R){for(var z=0;z<R.length;z++){var H=R[z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(O,H.key,H)}}return function(O,R,z){return R&&C(O.prototype,R),z&&C(O,z),O}})(),l=s(2),c=b(l),d=s(0),u=b(d),f=s(5),m=b(f),p=s(10),y=b(p),v=s(9),g=b(v);function b(C){return C&&C.__esModule?C:{default:C}}function w(C,O,R){return O in C?Object.defineProperty(C,O,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[O]=R,C}function j(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function N(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function S(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var E=(0,y.default)("quill:toolbar"),_=(function(C){S(O,C);function O(R,z){j(this,O);var H=N(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,R,z));if(Array.isArray(H.options.container)){var Q=document.createElement("div");I(Q,H.options.container),R.container.parentNode.insertBefore(Q,R.container),H.container=Q}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var J;return J=E.error("Container required for toolbar",H.options),N(H,J)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(re){H.addHandler(re,H.options.handlers[re])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(re){H.attach(re)}),H.quill.on(m.default.events.EDITOR_CHANGE,function(re,X){re===m.default.events.SELECTION_CHANGE&&H.update(X)}),H.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var re=H.quill.selection.getRange(),X=i(re,1),ee=X[0];H.update(ee)}),H}return o(O,[{key:"addHandler",value:function(z,H){this.handlers[z]=H}},{key:"attach",value:function(z){var H=this,Q=[].find.call(z.classList,function(re){return re.indexOf("ql-")===0});if(Q){if(Q=Q.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[Q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Q]==null){E.warn("ignoring attaching to disabled format",Q,z);return}if(u.default.query(Q)==null){E.warn("ignoring attaching to nonexistent format",Q,z);return}}var J=z.tagName==="SELECT"?"change":"click";z.addEventListener(J,function(re){var X=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var ee=z.options[z.selectedIndex];ee.hasAttribute("selected")?X=!1:X=ee.value||!1}else z.classList.contains("ql-active")?X=!1:X=z.value||!z.hasAttribute("value"),re.preventDefault();H.quill.focus();var W=H.quill.selection.getRange(),T=i(W,1),q=T[0];if(H.handlers[Q]!=null)H.handlers[Q].call(H,X);else if(u.default.query(Q).prototype instanceof u.default.Embed){if(X=prompt("Enter "+Q),!X)return;H.quill.updateContents(new c.default().retain(q.index).delete(q.length).insert(w({},Q,X)),m.default.sources.USER)}else H.quill.format(Q,X,m.default.sources.USER);H.update(q)}),this.controls.push([Q,z])}}},{key:"update",value:function(z){var H=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(Q){var J=i(Q,2),re=J[0],X=J[1];if(X.tagName==="SELECT"){var ee=void 0;if(z==null)ee=null;else if(H[re]==null)ee=X.querySelector("option[selected]");else if(!Array.isArray(H[re])){var W=H[re];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),ee=X.querySelector('option[value="'+W+'"]')}ee==null?(X.value="",X.selectedIndex=-1):ee.selected=!0}else if(z==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var T=H[re]===X.getAttribute("value")||H[re]!=null&&H[re].toString()===X.getAttribute("value")||H[re]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",T)}else X.classList.toggle("ql-active",H[re]!=null)})}}]),O})(g.default);_.DEFAULTS={};function P(C,O,R){var z=document.createElement("button");z.setAttribute("type","button"),z.classList.add("ql-"+O),R!=null&&(z.value=R),C.appendChild(z)}function I(C,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(R){var z=document.createElement("span");z.classList.add("ql-formats"),R.forEach(function(H){if(typeof H=="string")P(z,H);else{var Q=Object.keys(H)[0],J=H[Q];Array.isArray(J)?U(z,Q,J):P(z,Q,J)}}),C.appendChild(z)})}function U(C,O,R){var z=document.createElement("select");z.classList.add("ql-"+O),R.forEach(function(H){var Q=document.createElement("option");H!==!1?Q.setAttribute("value",H):Q.setAttribute("selected","selected"),z.appendChild(Q)}),C.appendChild(z)}_.DEFAULTS={container:null,handlers:{clean:function(){var O=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function(H){u.default.query(H,u.default.Scope.INLINE)!=null&&O.quill.format(H,!1)})}else this.quill.removeFormat(R,m.default.sources.USER)},direction:function(O){var R=this.quill.getFormat().align;O==="rtl"&&R==null?this.quill.format("align","right",m.default.sources.USER):!O&&R==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",O,m.default.sources.USER)},indent:function(O){var R=this.quill.getSelection(),z=this.quill.getFormat(R),H=parseInt(z.indent||0);if(O==="+1"||O==="-1"){var Q=O==="+1"?1:-1;z.direction==="rtl"&&(Q*=-1),this.quill.format("indent",H+Q,m.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,m.default.sources.USER)},list:function(O){var R=this.quill.getSelection(),z=this.quill.getFormat(R);O==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",O,m.default.sources.USER)}}},a.default=_,a.addControls=I}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(28),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){u(this,v);var w=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.label.innerHTML=b,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),w}return i(v,[{key:"buildItem",value:function(b){var w=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,b);return w.style.backgroundColor=b.getAttribute("value")||"",w}},{key:"selectItem",value:function(b,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,w);var j=this.label.querySelector(".ql-color-label"),N=b&&b.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v})(c.default);a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(28),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){u(this,v);var w=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=b[j.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return i(v,[{key:"selectItem",value:function(b,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,w),b=b||this.defaultItem,this.label.innerHTML=b.innerHTML}}]),v})(c.default);a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var m=u[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){var f=this;o(this,c),this.quill=d,this.boundsContainer=u||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var f=u.left+u.width/2-this.root.offsetWidth/2,m=u.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>p.right&&(v=p.right-y.right,this.root.style.left=f+v+"px"),y.left<p.left&&(v=p.left-y.left,this.root.style.left=f+v+"px"),y.bottom>p.bottom){var g=y.bottom-y.top,b=u.bottom-u.top+g;this.root.style.top=m-b+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function U(C,O){var R=[],z=!0,H=!1,Q=void 0;try{for(var J=C[Symbol.iterator](),re;!(z=(re=J.next()).done)&&(R.push(re.value),!(O&&R.length===O));z=!0);}catch(X){H=!0,Q=X}finally{try{!z&&J.return&&J.return()}finally{if(H)throw Q}}return R}return function(C,O){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return U(C,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function U(C,O,R){C===null&&(C=Function.prototype);var z=Object.getOwnPropertyDescriptor(C,O);if(z===void 0){var H=Object.getPrototypeOf(C);return H===null?void 0:U(H,O,R)}else{if("value"in z)return z.value;var Q=z.get;return Q===void 0?void 0:Q.call(R)}},l=(function(){function U(C,O){for(var R=0;R<O.length;R++){var z=O[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(C,z.key,z)}}return function(C,O,R){return O&&U(C.prototype,O),R&&U(C,R),C}})(),c=s(3),d=j(c),u=s(8),f=j(u),m=s(43),p=j(m),y=s(27),v=j(y),g=s(15),b=s(41),w=j(b);function j(U){return U&&U.__esModule?U:{default:U}}function N(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")}function S(U,C){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:U}function E(U,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);U.prototype=Object.create(C&&C.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(U,C):U.__proto__=C)}var _=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=(function(U){E(C,U);function C(O,R){N(this,C),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=_);var z=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,R));return z.quill.container.classList.add("ql-snow"),z}return l(C,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),w.default),this.tooltip=new I(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,H){R.handlers.link.call(R,!H.format.link)})}}]),C})(p.default);P.DEFAULTS=(0,d.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){if(C){var O=this.quill.getSelection();if(O==null||O.length==0)return;var R=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var z=this.quill.theme.tooltip;z.edit("link",R)}else this.quill.format("link",!1)}}}}});var I=(function(U){E(C,U);function C(O,R){N(this,C);var z=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,R));return z.preview=z.root.querySelector("a.ql-preview"),z}return l(C,[{key:"listen",value:function(){var R=this;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(R.linkRange!=null){var H=R.linkRange;R.restoreFocus(),R.quill.formatText(H,"link",!1,f.default.sources.USER),delete R.linkRange}z.preventDefault(),R.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(z,H,Q){if(z!=null){if(z.length===0&&Q===f.default.sources.USER){var J=R.quill.scroll.descendant(v.default,z.index),re=i(J,2),X=re[0],ee=re[1];if(X!=null){R.linkRange=new g.Range(z.index-ee,X.length());var W=v.default.formats(X.domNode);R.preview.textContent=W,R.preview.setAttribute("href",W),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),C})(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),a.default=P}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(29),o=Ee(i),l=s(36),c=s(38),d=s(64),u=s(65),f=Ee(u),m=s(66),p=Ee(m),y=s(67),v=Ee(y),g=s(37),b=s(26),w=s(39),j=s(40),N=s(56),S=Ee(N),E=s(68),_=Ee(E),P=s(27),I=Ee(P),U=s(69),C=Ee(U),O=s(70),R=Ee(O),z=s(71),H=Ee(z),Q=s(72),J=Ee(Q),re=s(73),X=Ee(re),ee=s(13),W=Ee(ee),T=s(74),q=Ee(T),V=s(75),B=Ee(V),K=s(57),oe=Ee(K),me=s(41),se=Ee(me),de=s(28),Re=Ee(de),he=s(59),Ue=Ee(he),Oe=s(60),le=Ee(Oe),te=s(61),Se=Ee(te),we=s(108),Pe=Ee(we),fe=s(62),ue=Ee(fe);function Ee(Ye){return Ye&&Ye.__esModule?Ye:{default:Ye}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":b.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":b.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":b.ColorStyle,"formats/font":w.FontClass,"formats/size":j.SizeClass,"formats/blockquote":f.default,"formats/code-block":W.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":ee.Code,"formats/italic":_.default,"formats/link":I.default,"formats/script":C.default,"formats/strike":R.default,"formats/underline":H.default,"formats/image":J.default,"formats/video":X.default,"formats/list/item":y.ListItem,"modules/formula":q.default,"modules/syntax":B.default,"modules/toolbar":oe.default,"themes/bubble":Pe.default,"themes/snow":ue.default,"ui/icons":se.default,"ui/picker":Re.default,"ui/icon-picker":le.default,"ui/color-picker":Ue.default,"ui/tooltip":Se.default},!0),a.default=o.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IndentClass=void 0;var i=(function(){function v(g,b){for(var w=0;w<b.length;w++){var j=b[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,w){return b&&v(g.prototype,b),w&&v(g,w),g}})(),o=function v(g,b,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,b,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(w,j){if(j==="+1"||j==="-1"){var N=this.value(w)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(w),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,w,j)}},{key:"canAdd",value:function(w,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,parseInt(j))}},{key:"value",value:function(w){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w))||void 0}}]),g})(c.default.Attributor.Class),y=new p("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});a.IndentClass=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(4),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function u(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(function(m){u(p,m);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);f.blotName="blockquote",f.tagName="blockquote",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function p(y,v){for(var g=0;g<v.length;g++){var b=v[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,g){return v&&p(y.prototype,v),g&&p(y,g),y}})(),o=s(4),l=c(o);function c(p){return p&&p.__esModule?p:{default:p}}function d(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function u(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function f(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=(function(p){f(y,p);function y(){return d(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),y})(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ListItem=void 0;var i=(function(){function N(S,E){for(var _=0;_<E.length;_++){var P=E[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,_){return E&&N(S.prototype,E),_&&N(S,_),S}})(),o=function N(S,E,_){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,E);if(P===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,E,_)}else{if("value"in P)return P.value;var U=P.get;return U===void 0?void 0:U.call(_)}},l=s(0),c=p(l),d=s(4),u=p(d),f=s(25),m=p(f);function p(N){return N&&N.__esModule?N:{default:N}}function y(N,S,E){return S in N?Object.defineProperty(N,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):N[S]=E,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function b(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var w=(function(N){b(S,N);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(_,P){_===j.blotName&&!P?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,_,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(_,P){return this.parent.isolate(this.offset(this.parent),this.length()),_===this.parent.statics.blotName?(this.parent.replaceWith(_,P),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,_,P))}}],[{key:"formats",value:function(_){return _.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,_)}}]),S})(u.default);w.blotName="list-item",w.tagName="LI";var j=(function(N){b(S,N),i(S,null,[{key:"create",value:function(_){var P=_==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,P);return(_==="checked"||_==="unchecked")&&I.setAttribute("data-checked",_==="checked"),I}},{key:"formats",value:function(_){if(_.tagName==="OL")return"ordered";if(_.tagName==="UL")return _.hasAttribute("data-checked")?_.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(E){v(this,S);var _=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E)),P=function(U){if(U.target.parentNode===E){var C=_.statics.formats(E),O=c.default.find(U.target);C==="checked"?O.format("list","unchecked"):C==="unchecked"&&O.format("list","checked")}};return E.addEventListener("touchstart",P),E.addEventListener("mousedown",P),_}return i(S,[{key:"format",value:function(_,P){this.children.length>0&&this.children.tail.format(_,P)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(_,P){if(_ instanceof w)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,_,P);else{var I=P==null?this.length():P.offset(this),U=this.split(I);U.parent.insertBefore(_,U)}}},{key:"optimize",value:function(_){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,_);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(_){if(_.statics.blotName!==this.statics.blotName){var P=c.default.create(this.statics.defaultChild);_.moveChildren(P),this.appendChild(P)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,_)}}]),S})(m.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[w],a.ListItem=w,a.default=j}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(56),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function u(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(function(m){u(p,m);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);f.blotName="italic",f.tagName=["EM","I"],a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(6),c=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function u(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function f(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(b){return b==="super"?document.createElement("sup"):b==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b)}},{key:"formats",value:function(b){if(b.tagName==="SUB")return"sub";if(b.tagName==="SUP")return"super"}}]),v})(c.default);p.blotName="script",p.tagName=["SUB","SUP"],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function u(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(function(m){u(p,m);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);f.blotName="strike",f.tagName="S",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function u(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var f=(function(m){u(p,m);function p(){return c(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);f.blotName="underline",f.tagName="U",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=u(l),d=s(27);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["alt","height","width"],v=(function(g){p(b,g);function b(){return f(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,N){y.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return y.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,d.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(c.default.Embed);v.blotName="image",v.tagName="IMG",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(4),c=s(27),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["height","width"],v=(function(g){p(b,g);function b(){return f(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,N){y.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return y.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return d.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.FormulaBlot=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var _=S[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=function j(N,S,E){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,S);if(_===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:j(P,S,E)}else{if("value"in _)return _.value;var I=_.get;return I===void 0?void 0:I.call(E)}},l=s(35),c=p(l),d=s(5),u=p(d),f=s(9),m=p(f);function p(j){return j&&j.__esModule?j:{default:j}}function y(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function g(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var b=(function(j){g(N,j);function N(){return y(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(E){var _=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,_,{throwOnError:!1,errorColor:"#f00"}),_.setAttribute("data-value",E)),_}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),N})(c.default);b.blotName="formula",b.className="ql-formula",b.tagName="SPAN";var w=(function(j){g(N,j),i(N,null,[{key:"register",value:function(){u.default.register(b,!0)}}]);function N(){y(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N})(m.default);a.FormulaBlot=b,a.default=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.CodeToken=a.CodeBlock=void 0;var i=(function(){function E(_,P){for(var I=0;I<P.length;I++){var U=P[I];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(_,U.key,U)}}return function(_,P,I){return P&&E(_.prototype,P),I&&E(_,I),_}})(),o=function E(_,P,I){_===null&&(_=Function.prototype);var U=Object.getOwnPropertyDescriptor(_,P);if(U===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:E(C,P,I)}else{if("value"in U)return U.value;var O=U.get;return O===void 0?void 0:O.call(I)}},l=s(0),c=v(l),d=s(5),u=v(d),f=s(9),m=v(f),p=s(13),y=v(p);function v(E){return E&&E.__esModule?E:{default:E}}function g(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function b(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function w(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var j=(function(E){w(_,E);function _(){return g(this,_),b(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var U=this.domNode.textContent;this.cachedText!==U&&((U.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(U),this.domNode.normalize(),this.attach()),this.cachedText=U)}}]),_})(y.default);j.className="ql-syntax";var N=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(E){w(_,E),i(_,null,[{key:"register",value:function(){u.default.register(N,!0),u.default.register(j,!0)}}]);function _(P,I){g(this,_);var U=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,P,I));if(typeof U.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var C=null;return U.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(C),C=setTimeout(function(){U.highlight(),C=null},U.options.interval)}),U.highlight(),U}return i(_,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var U=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(C){C.highlight(I.options.highlight)}),this.quill.update(u.default.sources.SILENT),U!=null&&this.quill.setSelection(U,u.default.sources.SILENT)}}}]),_})(m.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(E){var _=window.hljs.highlightAuto(E);return _.value}})(),interval:1e3},a.CodeBlock=j,a.CodeToken=N,a.default=S}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BubbleTooltip=void 0;var i=function _(P,I,U){P===null&&(P=Function.prototype);var C=Object.getOwnPropertyDescriptor(P,I);if(C===void 0){var O=Object.getPrototypeOf(P);return O===null?void 0:_(O,I,U)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(U)}},o=(function(){function _(P,I){for(var U=0;U<I.length;U++){var C=I[U];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(P,C.key,C)}}return function(P,I,U){return I&&_(P.prototype,I),U&&_(P,U),P}})(),l=s(3),c=g(l),d=s(8),u=g(d),f=s(43),m=g(f),p=s(15),y=s(41),v=g(y);function g(_){return _&&_.__esModule?_:{default:_}}function b(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function w(_,P){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:_}function j(_,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);_.prototype=Object.create(P&&P.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(_,P):_.__proto__=P)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(_){j(P,_);function P(I,U){b(this,P),U.modules.toolbar!=null&&U.modules.toolbar.container==null&&(U.modules.toolbar.container=N);var C=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,U));return C.quill.container.classList.add("ql-bubble"),C}return o(P,[{key:"extendToolbar",value:function(U){this.tooltip=new E(this.quill,this.options.bounds),this.tooltip.root.appendChild(U.container),this.buildButtons([].slice.call(U.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(U.container.querySelectorAll("select")),v.default)}}]),P})(m.default);S.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var E=(function(_){j(P,_);function P(I,U){b(this,P);var C=w(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,U));return C.quill.on(u.default.events.EDITOR_CHANGE,function(O,R,z,H){if(O===u.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&H===u.default.sources.USER){C.show(),C.root.style.left="0px",C.root.style.width="",C.root.style.width=C.root.offsetWidth+"px";var Q=C.quill.getLines(R.index,R.length);if(Q.length===1)C.position(C.quill.getBounds(R));else{var J=Q[Q.length-1],re=C.quill.getIndex(J),X=Math.min(J.length()-1,R.index+R.length-re),ee=C.quill.getBounds(new p.Range(re,X));C.position(ee)}}else document.activeElement!==C.textbox&&C.quill.hasFocus()&&C.hide()}),C}return o(P,[{key:"listen",value:function(){var U=this;i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){U.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!U.root.classList.contains("ql-hidden")){var C=U.quill.getSelection();C!=null&&U.position(U.quill.getBounds(C))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(U){var C=i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,U),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",C===0)return C;O.style.marginLeft=-1*C-O.offsetWidth/2+"px"}}]),P})(f.BaseTooltip);E.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),a.BubbleTooltip=E,a.default=S}),(function(r,a,s){r.exports=s(63)})]).default})})(Qv)),Qv.exports}var Dd,MI;function Foe(){if(MI)return Dd;MI=1;var e=Dd&&Dd.__extends||(function(){var u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var v in y)y.hasOwnProperty(v)&&(p[v]=y[v])},u(f,m)};return function(f,m){u(f,m);function p(){this.constructor=f}f.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})(),t=Dd&&Dd.__assign||function(){return t=Object.assign||function(u){for(var f,m=1,p=arguments.length;m<p;m++){f=arguments[m];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(u[y]=f[y])}return u},t.apply(this,arguments)},r=Dd&&Dd.__spreadArrays||function(){for(var u=0,f=0,m=arguments.length;f<m;f++)u+=arguments[f].length;for(var p=Array(u),y=0,f=0;f<m;f++)for(var v=arguments[f],g=0,b=v.length;g<b;g++,y++)p[y]=v[g];return p},a=Dd&&Dd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},s=a(Cy()),i=a(xD()),o=a(uF()),l=a(Loe()),c=(function(u){e(f,u);function f(m){var p=u.call(this,m)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(v,g,b,w){var j,N,S,E;v==="text-change"?(N=(j=p).onEditorChangeText)===null||N===void 0||N.call(j,p.editor.root.innerHTML,g,w,p.unprivilegedEditor):v==="selection-change"&&((E=(S=p).onEditorChangeSelection)===null||E===void 0||E.call(S,g,w,p.unprivilegedEditor))};var y=p.isControlled()?m.value:m.defaultValue;return p.value=y??"",p}return f.prototype.validateProps=function(m){var p;if(s.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(m.children)){var y=s.default.Children.only(m.children);if(((p=y)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(m,p){var y=this,v;if(this.validateProps(m),!this.editor||this.state.generation!==p.generation)return!0;if("value"in m){var g=this.getEditorContents(),b=(v=m.value,v??"");this.isEqualValue(b,g)||this.setEditorContents(this.editor,b)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),r(this.cleanProps,this.dirtyProps).some(function(w){return!o.default(m[w],y.props[w])})},f.prototype.shouldComponentRegenerate=function(m){var p=this;return this.dirtyProps.some(function(y){return!o.default(m[y],p.props[y])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(m,p){var y=this;if(this.editor&&this.shouldComponentRegenerate(m)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var b=this.regenerationSnapshot,v=b.delta,w=b.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),d(function(){return y.setEditorSelection(j,w)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(m,p){var y=new l.default(m,p);return p.tabIndex!=null&&this.setEditorTabIndex(y,p.tabIndex),this.hookEditor(y),y},f.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(m){return m&&m.ops},f.prototype.isEqualValue=function(m,p){return this.isDelta(m)&&this.isDelta(p)?o.default(m.ops,p.ops):o.default(m,p)},f.prototype.setEditorContents=function(m,p){var y=this;this.value=p;var v=this.getEditorSelection();typeof p=="string"?m.setContents(m.clipboard.convert(p)):m.setContents(p),d(function(){return y.setEditorSelection(m,v)})},f.prototype.setEditorSelection=function(m,p){if(this.selection=p,p){var y=m.getLength();p.index=Math.max(0,Math.min(p.index,y-1)),p.length=Math.max(0,Math.min(p.length,y-1-p.index)),m.setSelection(p)}},f.prototype.setEditorTabIndex=function(m,p){var y,v;!((v=(y=m)===null||y===void 0?void 0:y.scroll)===null||v===void 0)&&v.domNode&&(m.scroll.domNode.tabIndex=p)},f.prototype.setEditorReadOnly=function(m,p){p?m.disable():m.enable()},f.prototype.makeUnprivilegedEditor=function(m){var p=m;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=i.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},f.prototype.renderEditingArea=function(){var m=this,p=this.props,y=p.children,v=p.preserveWhitespace,g=this.state.generation,b={key:g,ref:function(w){m.editingArea=w}};return s.default.Children.count(y)?s.default.cloneElement(s.default.Children.only(y),b):v?s.default.createElement("pre",t({},b)):s.default.createElement("div",t({},b))},f.prototype.render=function(){var m;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(m,p,y,v){var g,b;if(this.editor){var w=this.isDelta(this.value)?v.getContents():v.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=w,(b=(g=this.props).onChange)===null||b===void 0||b.call(g,m,p,y,v))}},f.prototype.onEditorChangeSelection=function(m,p,y){var v,g,b,w,j,N;if(this.editor){var S=this.getEditorSelection(),E=!S&&m,_=S&&!m;o.default(m,S)||(this.selection=m,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,m,p,y),E?(w=(b=this.props).onFocus)===null||w===void 0||w.call(b,m,p,y):_&&((N=(j=this.props).onBlur)===null||N===void 0||N.call(j,S,p,y)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=l.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f})(s.default.Component);function d(u){Promise.resolve().then(u)}return Dd=c,Dd}var Moe=Foe();const c3=Oa(Moe),Roe=({isOpen:e,templateId:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=On();Pa();const o=JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:l,isLoading:c}=Wie(t||""),d=yM(),u=Vie(),[f,m]=L.useState(""),[p,y]=L.useState("Custom"),[v,g]=L.useState(""),[b,w]=L.useState(!1),[j,N]=L.useState(""),[S,E]=L.useState([]),[_,P]=L.useState(!1),[I,U]=L.useState(new Set),[C,O]=L.useState(new Set),[R,z]=L.useState(null),[H,Q]=L.useState(""),[J,re]=L.useState(!1),[X,ee]=L.useState(!1),W=L.useRef({});L.useEffect(()=>{t&&l&&e?(m(l.name||""),y(l.category||"Custom"),N(l.description||""),l.sections&&Array.isArray(l.sections)?E(l.sections.map((xe,ve)=>({id:xe.id||`section_${Date.now()}_${ve}`,name:xe.name||`Section ${ve+1}`,order:xe.order!==void 0?xe.order:ve,steps:(xe.steps||[]).map((Fe,$e)=>({id:Fe.id||`step_${Date.now()}_${ve}_${$e}`,name:Fe.name||"",instructions:Fe.instructions||"",checklistItems:Array.isArray(Fe.checklistItems)?Fe.checklistItems:[],attachments:Array.isArray(Fe.attachments)?Fe.attachments:[],order:Fe.order!==void 0?Fe.order:$e}))}))):E([])):!t&&e&&(m(""),y("Custom"),g(""),w(!1),N(""),E([]),U(new Set),O(new Set))},[t,l,e]),L.useEffect(()=>{e&&(async()=>{if(o)try{await ly({userId:o}),ee(!0)}catch{ee(!1)}})()},[o,e]);const T={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},q=["header","bold","italic","underline","strike","list","bullet","link"],V=()=>{const xe={id:`section_${Date.now()}`,name:`Section ${S.length+1}`,order:S.length,steps:[]};E([...S,xe]),U(ve=>new Set([...ve,xe.id]))},B=xe=>{E(S.filter(ve=>ve.id!==xe)),U(ve=>{const Fe=new Set(ve);return Fe.delete(xe),Fe})},K=(xe,ve)=>{E(S.map(Fe=>Fe.id===xe?{...Fe,name:ve}:Fe))},oe=(xe,ve)=>{const Fe=S.findIndex(Be=>Be.id===xe);if(Fe===-1)return;const $e=ve==="up"?Fe-1:Fe+1;if($e<0||$e>=S.length)return;const _e=[...S];[_e[Fe],_e[$e]]=[_e[$e],_e[Fe]],_e.forEach((Be,qe)=>{Be.order=qe}),E(_e)},me=xe=>{U(ve=>{const Fe=new Set(ve);return Fe.has(xe)?Fe.delete(xe):Fe.add(xe),Fe})},se=xe=>{const ve=S.find($e=>$e.id===xe);if(!ve)return;const Fe={id:`step_${Date.now()}`,name:`Step ${ve.steps.length+1}`,instructions:"",checklistItems:[],attachments:[],order:ve.steps.length};E(S.map($e=>$e.id===xe?{...$e,steps:[...$e.steps,Fe]}:$e)),O($e=>new Set([...$e,Fe.id]))},de=(xe,ve)=>{E(S.map(Fe=>Fe.id===xe?{...Fe,steps:Fe.steps.filter($e=>$e.id!==ve)}:Fe)),O(Fe=>{const $e=new Set(Fe);return $e.delete(ve),$e}),z(null)},Re=(xe,ve,Fe)=>{E(S.map($e=>$e.id===xe?{...$e,steps:$e.steps.map(_e=>_e.id===ve?{..._e,name:Fe}:_e)}:$e))},he=(xe,ve,Fe)=>{const $e=S.find(Ze=>Ze.id===xe);if(!$e)return;const _e=$e.steps.findIndex(Ze=>Ze.id===ve);if(_e===-1)return;const Be=Fe==="up"?_e-1:_e+1;if(Be<0||Be>=$e.steps.length)return;const qe=[...$e.steps];[qe[_e],qe[Be]]=[qe[Be],qe[_e]],qe.forEach((Ze,Vt)=>{Ze.order=Vt}),E(S.map(Ze=>Ze.id===xe?{...Ze,steps:qe}:Ze))},Ue=xe=>{O(ve=>{const Fe=new Set(ve);return Fe.has(xe)?(Fe.delete(xe),z(null)):Fe.add(xe),Fe})},Oe=(xe,ve)=>{const $e=S.find(_e=>_e.id===xe)?.steps.find(_e=>_e.id===ve);$e&&(z(ve),Q($e.instructions))},le=(xe,ve)=>{E(S.map(Fe=>Fe.id===xe?{...Fe,steps:Fe.steps.map($e=>$e.id===ve?{...$e,instructions:H}:$e)}:Fe)),z(null),Q("")},te=(xe,ve)=>{E(S.map(Fe=>Fe.id===xe?{...Fe,steps:Fe.steps.map($e=>$e.id===ve?{...$e,checklistItems:[...$e.checklistItems,""]}:$e)}:Fe))},Se=(xe,ve,Fe,$e)=>{E(S.map(_e=>_e.id===xe?{..._e,steps:_e.steps.map(Be=>Be.id===ve?{...Be,checklistItems:Be.checklistItems.map((qe,Ze)=>Ze===Fe?$e:qe)}:Be)}:_e))},we=(xe,ve,Fe)=>{E(S.map($e=>$e.id===xe?{...$e,steps:$e.steps.map(_e=>_e.id===ve?{..._e,checklistItems:_e.checklistItems.filter((Be,qe)=>qe!==Fe)}:_e)}:$e))},Pe=(xe,ve,Fe)=>{const $e=Fe.target.files?.[0];if(!$e)return;if($e.type!=="application/pdf"){i("Please select a PDF file");return}if($e.size>10*1024*1024){i("File size must be less than 10MB");return}const _e=new FileReader;_e.onload=()=>{const qe={type:"pdf",url:_e.result,name:$e.name};E(S.map(Ze=>Ze.id===xe?{...Ze,steps:Ze.steps.map(Vt=>Vt.id===ve?{...Vt,attachments:[...Vt.attachments,qe]}:Vt)}:Ze)),s("PDF attached successfully")},_e.readAsDataURL($e)},fe=async(xe,ve)=>{if(!o){i("User not authenticated");return}re(!0);try{const Fe=await ly({userId:o}),{accessToken:$e}=Fe?.data||{};if(!$e)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");await new Promise((qe,Ze)=>{let Vt=0;const Dt=50,dt=setInterval(()=>{Vt++,window.google&&window.google.picker?(clearInterval(dt),qe()):Vt>=Dt&&(clearInterval(dt),Ze(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const _e=window.google.picker;new _e.PickerBuilder().setOAuthToken($e).setCallback(qe=>{if(re(!1),qe[_e.Response.ACTION]===_e.Action.PICKED){const Ze=qe[_e.Response.DOCUMENTS];if(Ze&&Ze.length>0){const Vt=Ze[0],Dt={type:"gdrive",url:Vt.url||Vt.embedUrl||"",name:Vt.name||"Untitled",fileId:Vt.id};E(S.map(dt=>dt.id===xe?{...dt,steps:dt.steps.map(Tt=>Tt.id===ve?{...Tt,attachments:[...Tt.attachments,Dt]}:Tt)}:dt)),s("File attached from Google Drive")}}else qe[_e.Response.ACTION]===_e.Action.CANCEL&&re(!1)}).addView(_e.ViewId.DOCS).enableFeature(_e.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Fe){re(!1),i(Fe.message||"Failed to open Google Drive picker")}},ue=(xe,ve,Fe)=>{E(S.map($e=>$e.id===xe?{...$e,steps:$e.steps.map(_e=>_e.id===ve?{..._e,attachments:_e.attachments.filter((Be,qe)=>qe!==Fe)}:_e)}:$e))},Ee=()=>{if(!f.trim())return"Template name is required";if(S.length===0)return"At least one section is required";for(const xe of S){if(!xe.name.trim())return`Section "${xe.name||"Unnamed"}" must have a name`;if(xe.steps.length===0)return`Section "${xe.name}" must have at least one step`;for(const ve of xe.steps)if(!ve.name.trim())return"All steps must have a name"}return null},Ye=async()=>{const xe=Ee();if(xe){i(xe);return}P(!0);try{const ve=b&&v.trim()?v.trim():p,Fe={name:f.trim(),category:ve,description:j,sections:S.map($e=>({id:$e.id,name:$e.name.trim(),order:$e.order,steps:$e.steps.map(_e=>({id:_e.id,name:_e.name.trim(),instructions:_e.instructions,checklistItems:_e.checklistItems.filter(Be=>Be.trim()!==""),attachments:_e.attachments,order:_e.order}))}))};t?await u.mutateAsync({id:t,data:Fe}):await d.mutateAsync(Fe),a?.(),r()}catch(ve){i(ve.message||"Failed to save template")}finally{P(!1)}};return e?n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Playbook Template":"Create New Playbook Template"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Update your playbook template":"Build a reusable workflow template"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c&&t?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:f,onChange:xe=>m(xe.target.value),placeholder:"e.g., Sales Playbook",className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),n.jsx("div",{className:"flex items-center gap-2",children:b?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:v,onChange:xe=>g(xe.target.value),placeholder:"Enter category name",className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>{w(!1),g("")},className:"px-3 py-2.5 text-slate-500 hover:text-slate-700",children:n.jsx(tr,{className:"w-4 h-4"})})]}):n.jsx(n.Fragment,{children:n.jsxs("select",{value:p,onChange:xe=>{xe.target.value==="custom"?w(!0):y(xe.target.value)},className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"Onboarding",children:"Onboarding"}),n.jsx("option",{value:"Custom",children:"Custom"}),n.jsx("option",{value:"custom",children:"+ Create New Category"})]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:j,onChange:xe=>N(xe.target.value),placeholder:"Brief description of this playbook...",rows:3,className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Sections & Steps"}),n.jsxs("button",{onClick:V,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Section"]})]}),S.length===0?n.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl",children:[n.jsx(oi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No sections yet. Add your first section to get started."})]}):n.jsx("div",{className:"space-y-3",children:S.map((xe,ve)=>n.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-slate-50 p-4 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>me(xe.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(zs,{className:`w-4 h-4 text-slate-400 transition-transform ${I.has(xe.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:xe.name,onChange:Fe=>K(xe.id,Fe.target.value),placeholder:"Section name",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-semibold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>oe(xe.id,"up"),disabled:ve===0,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(qj,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>oe(xe.id,"down"),disabled:ve===S.length-1,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(zs,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>B(xe.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]}),I.has(xe.id)&&n.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:[xe.steps.length," Step",xe.steps.length!==1?"s":""]}),n.jsxs("button",{onClick:()=>se(xe.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),"Add Step"]})]}),xe.steps.length===0?n.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[n.jsx(ea,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-500",children:"No steps yet. Add your first step."})]}):n.jsx("div",{className:"space-y-3",children:xe.steps.map((Fe,$e)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-white p-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ue(Fe.id),className:"p-1 hover:bg-slate-50 rounded transition-colors",children:n.jsx(zs,{className:`w-3.5 h-3.5 text-slate-400 transition-transform ${C.has(Fe.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:Fe.name,onChange:_e=>Re(xe.id,Fe.id,_e.target.value),placeholder:"Step name",className:"flex-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>he(xe.id,Fe.id,"up"),disabled:$e===0,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(qj,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>he(xe.id,Fe.id,"down"),disabled:$e===xe.steps.length-1,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(zs,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>de(xe.id,Fe.id),className:"p-1 hover:bg-red-50 rounded transition-colors text-red-600",children:n.jsx(Lr,{className:"w-3 h-3"})})]})]}),C.has(Fe.id)&&n.jsxs("div",{className:"p-4 bg-slate-50 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Instructions"}),R===Fe.id?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg",children:n.jsx(c3,{theme:"snow",value:H,onChange:Q,modules:T,formats:q,placeholder:"Add instructions, best practices, talking points...",className:"text-sm"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>le(xe.id,Fe.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold rounded-lg transition-colors",children:"Save Instructions"}),n.jsx("button",{onClick:()=>{z(null),Q("")},className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-2",children:[Fe.instructions?n.jsx("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Zx.sanitize(Fe.instructions)}}):n.jsx("div",{className:"p-3 bg-white border-2 border-dashed border-slate-200 rounded-lg text-sm text-slate-400 text-center",children:"No instructions added"}),n.jsxs("button",{onClick:()=>Oe(xe.id,Fe.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(Sl,{className:"w-3 h-3"}),Fe.instructions?"Edit Instructions":"Add Instructions"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Checklist Items"}),n.jsxs("div",{className:"space-y-2",children:[Fe.checklistItems.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No checklist items"}):Fe.checklistItems.map((_e,Be)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:_e,onChange:qe=>Se(xe.id,Fe.id,Be,qe.target.value),placeholder:"Checklist item",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>we(xe.id,Fe.id,Be),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",children:n.jsx(tr,{className:"w-3.5 h-3.5"})})]},Be)),n.jsxs("button",{onClick:()=>te(xe.id,Fe.id),className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),"Add Checklist Item"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"space-y-2",children:[Fe.attachments.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No attachments"}):Fe.attachments.map((_e,Be)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[_e.type==="pdf"?n.jsx(ea,{className:"w-4 h-4 text-red-600 shrink-0"}):n.jsx(s0,{className:"w-4 h-4 text-blue-600 shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:_e.name}),_e.type==="gdrive"&&n.jsx("span",{className:"text-xs text-blue-600 font-semibold shrink-0",children:"Google Drive"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[_e.type==="gdrive"&&n.jsx("a",{href:_e.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:n.jsx(Ss,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>ue(xe.id,Fe.id,Be),className:"p-1 hover:bg-red-50 rounded text-red-600",children:n.jsx(tr,{className:"w-3.5 h-3.5"})})]})]},Be)),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:_e=>{W.current[`${xe.id}_${Fe.id}_pdf`]=_e},type:"file",accept:".pdf",onChange:_e=>Pe(xe.id,Fe.id,_e),className:"hidden"}),n.jsxs("button",{onClick:()=>W.current[`${xe.id}_${Fe.id}_pdf`]?.click(),className:"flex-1 px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Q0,{className:"w-3 h-3"}),"Upload PDF"]}),n.jsx("button",{onClick:()=>fe(xe.id,Fe.id),disabled:J||!X,className:"flex-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(s0,{className:"w-3 h-3"}),"Google Drive"]})})]})]})]})]})]},Fe.id))})]})]},xe.id))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex items-center justify-end gap-3 shrink-0",children:[n.jsx("button",{onClick:r,className:"px-4 py-2.5 text-slate-600 hover:bg-slate-50 text-sm font-semibold rounded-xl transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ye,disabled:_||c,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),t?"Update Template":"Create Template"]})})]})]})})]}):null},Boe=({instance:e,getCompanyName:t,getDealName:r,getProjectName:a,getUserName:s,onView:i})=>{const{data:o=[]}=kg(e.id),l=e.templateSnapshot?.sections?.reduce((m,p)=>m+(p.steps?.length||0),0)||0,c=o.length,d=l>0?Math.round(c/l*100):0,u=e.dealId?{type:"Deal",name:r(e.dealId),id:e.dealId}:e.projectId?{type:"Project",name:a(e.projectId),id:e.projectId}:null,f=m=>{if(!m)return"";const p=new Date(m),y=new Date,v=new Date(y);return v.setDate(v.getDate()-1),p.toDateString()===y.toDateString()?"Today":p.toDateString()===v.toDateString()?"Yesterday":p.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})};return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.templateSnapshot.version]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="Deal"?n.jsx(kl,{className:"w-4 h-4 text-slate-400"}):n.jsx(Vd,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:u.name})]}):n.jsx("span",{className:"text-sm text-slate-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wd,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:e.companyId?t(e.companyId):""})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-[120px]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[c," / ",l]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[d,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${d===100?"bg-green-500":d>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${d}%`}})})]}),d===100&&n.jsx(gn,{className:"w-4 h-4 text-green-500"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-slate-600",children:e.activatedBy?s(e.activatedBy):""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oa,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:f(e.activatedAt)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("button",{onClick:()=>i(e.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-semibold flex items-center gap-1.5 transition-colors",children:["View",n.jsx(Ss,{className:"w-3.5 h-3.5"})]})})]})},Uoe=({onNavigate:e,currentUser:t,playbookPrompt:r,onClearPlaybookPrompt:a})=>{const{showSuccess:s,showError:i}=On(),[o,l]=L.useState("templates"),[c,d]=L.useState(""),[u,f]=L.useState("all"),[m,p]=L.useState(null),[y,v]=L.useState(!1),[g,b]=L.useState([]),[w,j]=L.useState(!1),[N,S]=L.useState(null),[E,_]=L.useState(!1),[P,I]=L.useState(null),[U,C]=L.useState(!1),[O,R]=L.useState(void 0),[z,H]=L.useState(void 0),[Q,J]=L.useState(""),[re,X]=L.useState("all"),[ee,W]=L.useState("all"),{data:T=[],isLoading:q,error:V}=vM({category:u!=="all"?u:void 0,search:c||void 0}),B=Gie(),K=yM(),{data:oe=[],isLoading:me}=fb({companyId:re!=="all"?re:void 0,status:ee!=="all"?ee:void 0}),{data:se=[]}=Gs({queryKey:["companies"],queryFn:async()=>{const ve=await ld();return ve.data||ve||[]},staleTime:300*1e3}),{data:de=[]}=Gs({queryKey:["deals"],queryFn:async()=>{const ve=await jg();return ve.data||ve||[]},staleTime:300*1e3}),{data:Re=[]}=Gs({queryKey:["projects"],queryFn:async()=>{const ve=await I0();return ve.data||ve||[]},staleTime:300*1e3}),{data:he=[]}=o3(),Ue=L.useRef("");L.useEffect(()=>{const ve=new Set;T.forEach(_e=>{_e.category&&ve.add(_e.category)});const Fe=Array.from(ve).sort(),$e=Fe.join(",");$e!==Ue.current&&(Ue.current=$e,b(Fe))},[T.length]),L.useEffect(()=>{const ve=()=>{window.dispatchEvent(new Event("refresh-playbooks-queries"))};return window.addEventListener("refresh-playbooks",ve),()=>window.removeEventListener("refresh-playbooks",ve)},[]),L.useEffect(()=>{r&&r.dealId&&(l("templates"),R(r.dealId),H(r.templateId),C(!0),a&&a())},[r,a]),L.useEffect(()=>{E||q||_(!0)},[T.length,q]);const Oe=async ve=>{v(!0);try{await B.mutateAsync(ve.id),p(null)}catch(Fe){i(Fe.message||"Failed to delete template")}finally{v(!1)}},le=async ve=>{try{await K.mutateAsync({name:`${ve.name} (Copy)`,category:ve.category||"Custom",description:ve.description||"",sections:ve.sections||[]}),s("Template duplicated successfully!")}catch(Fe){i(Fe.message||"Failed to duplicate template")}},te=ve=>!ve.sections||!Array.isArray(ve.sections)?0:ve.sections.reduce((Fe,$e)=>Fe+($e.steps?.length||0),0),Se=ve=>{if(!ve)return"Never";const Fe=new Date(ve),_e=new Date().getTime()-Fe.getTime(),Be=Math.floor(_e/(1e3*60*60*24));return Be===0?"Today":Be===1?"Yesterday":Be<7?`${Be} days ago`:Be<30?`${Math.floor(Be/7)} weeks ago`:Fe.toLocaleDateString()},we=ve=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[ve]||"bg-slate-100 text-slate-700",Pe=L.useMemo(()=>{if(!c)return T;const ve=c.toLowerCase();return T.filter(Fe=>Fe.name?.toLowerCase().includes(ve)||Fe.description?.toLowerCase().includes(ve))},[T,c]),fe=ve=>se.find($e=>$e.id===ve)?.name||"Unknown Company",ue=ve=>{const Fe=de.find($e=>$e.id===ve);return Fe?.title||Fe?.name||"Unknown Deal"},Ee=ve=>{const Fe=Re.find($e=>$e.id===ve);return Fe?.title||Fe?.name||"Unknown Project"},Ye=ve=>he.find($e=>$e.id===ve)?.name||ve,xe=L.useMemo(()=>{let ve=oe;if(Q){const Fe=Q.toLowerCase();ve=ve.filter($e=>{const _e=$e.templateSnapshot?.name||"",Be=$e.companyId?fe($e.companyId).toLowerCase():"",qe=$e.dealId?ue($e.dealId).toLowerCase():"",Ze=$e.projectId?Ee($e.projectId).toLowerCase():"";return _e.toLowerCase().includes(Fe)||Be.includes(Fe)||qe.includes(Fe)||Ze.includes(Fe)})}return ve},[oe,Q,se,de,Re]);return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shrink-0",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Playbooks"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Create and manage standardized workflows for your team"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="templates"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Template Library"}),n.jsx("button",{onClick:()=>l("active"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="active"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Active Playbooks"})]})]}),o==="templates"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[V&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["Error loading playbooks: ",V instanceof Error?V.message:"Unknown error"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:c,onChange:ve=>d(ve.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(p0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:u,onChange:ve=>f(ve.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Categories"}),g.map(ve=>n.jsx("option",{value:ve,children:ve},ve))]}),n.jsx(ya,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create New Playbook"]})]}),q?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(yt,{className:"w-8 h-8 text-indigo-600 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading playbooks..."})]})}):Pe.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(oi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No playbooks found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:c||u!=="all"?"Try adjusting your search or filters":"Get started by creating your first playbook template"}),!c&&u==="all"&&n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Playbook"]})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:Pe.map(ve=>{const Fe=te(ve),$e=ve.sections?.length||0;return n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:border-indigo-300 hover:shadow-lg transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(oi,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:ve.name})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${we(ve.category||"Custom")}`,children:ve.category||"Custom"})]}),n.jsx("div",{className:"relative",children:n.jsx("button",{onClick:_e=>{_e.stopPropagation()},className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Gk,{className:"w-4 h-4 text-slate-400"})})})]}),ve.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ve.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ea,{className:"w-4 h-4"}),n.jsxs("span",{children:[$e," section",$e!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ty,{className:"w-4 h-4"}),n.jsxs("span",{children:[Fe," step",Fe!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(oa,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:["Updated ",Se(ve.updatedAt||ve.createdAt)]})]}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["v",ve.version||1]})})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:_e=>{_e.stopPropagation(),S(ve.id),j(!0)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Sl,{className:"w-3.5 h-3.5"}),"Edit"]}),n.jsxs("button",{onClick:_e=>{_e.stopPropagation(),le(ve)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(eU,{className:"w-3.5 h-3.5"}),"Duplicate"]}),n.jsx("button",{onClick:_e=>{_e.stopPropagation(),p(ve)},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]})]},ve.id)})})})]}),o==="active"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by playbook name, company, deal, or project...",value:Q,onChange:ve=>J(ve.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(p0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:re,onChange:ve=>X(ve.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Companies"}),se.map(ve=>n.jsx("option",{value:ve.id,children:ve.name},ve.id))]}),n.jsx(ya,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(p0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:ee,onChange:ve=>W(ve.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsx(ya,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]})]}),me?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):xe.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Vd,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Playbooks"}),n.jsx("p",{className:"text-sm text-slate-500",children:Q||re!=="all"||ee!=="all"?"No playbooks match your filters. Try adjusting your search criteria.":"No active playbook instances found. Attach a playbook to a Deal or Project to get started."})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Playbook Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Attached To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Progress"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:xe.map(ve=>n.jsx(Boe,{instance:ve,getCompanyName:fe,getDealName:ue,getProjectName:Ee,getUserName:Ye,onView:Fe=>I(Fe)},ve.id))})]})})})})]}),m&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Playbook Template"}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:['Are you sure you want to delete "',m.name,'"? This action cannot be undone.']})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>p(null),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-xl transition-colors border border-slate-200",disabled:y,children:"Cancel"}),n.jsx("button",{onClick:()=>Oe(m),disabled:y,className:"flex-1 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:y?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}),n.jsx(Roe,{isOpen:w,templateId:N,onClose:()=>{j(!1),S(null)},onSuccess:()=>{}}),n.jsx(l3,{isOpen:U,dealId:O,preSelectedTemplateId:z,onClose:()=>{C(!1),R(void 0),H(void 0)},onSuccess:()=>{C(!1),R(void 0),H(void 0)}}),P&&n.jsx(hb,{instanceId:P,isOpen:!!P,onClose:()=>I(null)})]})},qoe=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:a,showError:s}=On(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=L.useState([]),[c,d]=L.useState(!0),[u,f]=L.useState(""),[m,p]=L.useState(null),[y,v]=L.useState("date"),[g,b]=L.useState("desc"),[w,j]=L.useState([]),[N,S]=L.useState(!1),[E,_]=L.useState(!1),[P,I]=L.useState(null),[U,C]=L.useState([]),[O,R]=L.useState([]),[z,H]=L.useState("email"),[Q,J]=L.useState(!1),[re,X]=L.useState(!1),[ee,W]=L.useState(null),[T,q]=L.useState(!1),[V,B]=L.useState({}),[K,oe]=L.useState([]),[me,se]=L.useState({}),de=L.useRef(!1),Re=async()=>{try{q(!0);const xe=await Xne();console.log("[SATISFACTION] Template response:",xe),xe&&xe.success&&xe.data?W(xe.data):(console.error("[SATISFACTION] Invalid response format:",xe),s(xe?.error?.message||xe?.message||"Failed to load survey template"))}catch(xe){console.error("[SATISFACTION] Error loading template:",xe),s(xe.message||"Failed to load survey template")}finally{q(!1)}};L.useEffect(()=>{re&&!ee&&Re()},[re]),L.useEffect(()=>{(async()=>{try{const ve=await ad(),Fe=ve?.data||ve||[];Array.isArray(Fe)&&oe(Fe)}catch(ve){console.error("[SATISFACTION] Failed to load users",ve)}})()},[]),L.useEffect(()=>{(async()=>{try{const ve=await ld(),Fe=ve?.data||ve||[];if(Array.isArray(Fe)){const $e={};Fe.forEach(_e=>{_e.id&&($e[_e.id]=_e)}),se($e)}}catch(ve){console.error("[SATISFACTION] Failed to load companies",ve)}})()},[]),L.useEffect(()=>{he()},[]),L.useEffect(()=>{m&&te(m.id)},[m]),L.useEffect(()=>{(async()=>{if(m?.companyId)try{const ve=await Sh("",m.companyId);if(ve.success&&ve.data){const Fe={};ve.data.forEach($e=>{$e.id&&(Fe[$e.id]=$e)}),B(Fe)}}catch(ve){console.error("[SATISFACTION] Failed to load contacts for timeline",ve)}})()},[m?.companyId]),L.useEffect(()=>{if(!t||de.current||!r)return;de.current=!0;const xe=t;(async()=>{try{const Fe=(await uk(xe))?.data?.satisfactionRecordId;Fe&&p({id:Fe,companyId:xe,createdAt:"",createdBy:"",source:"manual"}),await Ee(xe)}catch{await Ee(xe)}finally{r()}})()},[t,r]);const he=async()=>{try{d(!0);const xe=await Hne(u);if(xe.success&&xe.data){const ve=xe.data.map(Fe=>({companyId:Fe.companyId,companyName:Fe.company?.name||"Unknown Company",latestNpsScore:Fe.latestNpsScore,npsCategory:Fe.npsCategory,accountManagerId:Fe.company?.ownerId,accountManagerName:null,lastSurveyDate:Fe.lastSurveyDate,status:Fe.status||"not_yet_sent",satisfactionRecordId:Fe.id}));l(ve)}}catch(xe){s(xe.message||"Failed to load satisfaction records")}finally{d(!1)}},Ue=xe=>xe==null?null:xe>=9?"Promoter":xe>=7?"Passive":"Detractor",Oe=L.useMemo(()=>{const xe=[];return w.forEach(ve=>{(ve.responses||[]).forEach(Fe=>{const $e=Fe.contactId?V[Fe.contactId]:null;let _e="";if(Fe.answers&&Array.isArray(Fe.answers)){const Be=Fe.answers.find(qe=>typeof qe.answer=="string"&&qe.questionText&&(qe.questionText.toLowerCase().includes("improve")||qe.questionText.toLowerCase().includes("additional")))||Fe.answers.find(qe=>typeof qe.answer=="string");Be&&typeof Be.answer=="string"&&(_e=Be.answer)}xe.push({id:Fe.id,submittedAt:Fe.submittedAt,npsScore:Fe.npsScore,contactId:Fe.contactId,contactName:$e?.name,feedback:_e})})}),xe.sort((ve,Fe)=>{const $e=ve.submittedAt?new Date(ve.submittedAt).getTime():0;return(Fe.submittedAt?new Date(Fe.submittedAt).getTime():0)-$e}),xe},[w,V]),le=xe=>!xe.accountManagerId||!K||K.length===0?null:K.find(Fe=>Fe.id===xe.accountManagerId)?.name||null,te=async xe=>{try{S(!0);const ve=await Wne(xe);ve.success&&ve.data&&j(ve.data.surveys||[])}catch(ve){s(ve.message||"Failed to load record details")}finally{S(!1)}},Se=xe=>xe==null?"text-slate-400":xe>=9?"text-green-600":xe>=7?"text-yellow-600":"text-red-600",we=xe=>xe==null?"bg-slate-100":xe>=9?"bg-green-50":xe>=7?"bg-yellow-50":"bg-red-50",Pe=xe=>{const Fe={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[xe];return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Fe.color}`,children:Fe.label})},fe=L.useMemo(()=>[...o.filter(ve=>ve.companyName.toLowerCase().includes(u.toLowerCase()))].sort((ve,Fe)=>{let $e=0;if(y==="score"){const _e=ve.latestNpsScore??-1,Be=Fe.latestNpsScore??-1;$e=_e-Be}else if(y==="date"){const _e=ve.lastSurveyDate?new Date(ve.lastSurveyDate).getTime():0,Be=Fe.lastSurveyDate?new Date(Fe.lastSurveyDate).getTime():0;$e=_e-Be}else y==="status"&&($e=ve.status.localeCompare(Fe.status));return g==="asc"?$e:-$e}),[o,u,y,g]),ue=async()=>{if(!P||O.length===0){s("Please select a company and at least one contact");return}try{J(!0);let ve=(await uk(P)).data?.satisfactionRecordId;ve||(ve=(await Vne({companyId:P,source:"manual"})).data.id);const Fe=await Kne({satisfactionRecordId:ve,contactIds:O,deliveryMethod:z});if(z==="link"&&Fe.data?.surveyUrl){const $e=Fe.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText($e).then(()=>{a(`Survey link copied to clipboard! Share: ${$e}`)}).catch(()=>{a(`Survey created! Copy this link: ${$e}`)}):a(`Survey created! Copy this link: ${$e}`)}else a("Survey sent successfully");_(!1),R([]),he()}catch(xe){s(xe.message||"Failed to send survey")}finally{J(!1)}},Ee=async xe=>{I(xe),_(!0);try{const ve=await Sh("",xe);if(ve.success&&ve.data){const Fe=ve.data.filter($e=>$e.email);C(Fe)}}catch(ve){s(ve.message||"Failed to load contacts")}},Ye=xe=>{if(!i)return!1;const ve=i.role==="Admin",Fe=i.id===xe.accountManagerId;return ve||Fe};return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(ve=>ve.accountManagerId===i.id))?n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[n.jsx(Wj,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search companies...",value:u,onChange:xe=>f(xe.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:y,onChange:xe=>v(xe.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Sort by Date"}),n.jsx("option",{value:"score",children:"Sort by Score"}),n.jsx("option",{value:"status",children:"Sort by Status"})]}),n.jsx("button",{onClick:()=>b(g==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:n.jsx(QB,{className:"w-4 h-4"})})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):fe.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(gf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):n.jsx("div",{className:"space-y-4",children:fe.map(xe=>n.jsx("div",{onClick:()=>{const ve={id:xe.satisfactionRecordId,companyId:xe.companyId,createdAt:"",createdBy:"",source:"manual"};p(ve)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(Vs,{src:me[xe.companyId]?.logo,fallbackText:me[xe.companyId]?.name||xe.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:me[xe.companyId]?.name||xe.companyName}),xe.latestNpsScore!==void 0&&xe.latestNpsScore!==null&&n.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${xe.latestNpsScore>=9?"bg-green-100 text-green-700":xe.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",xe.latestNpsScore]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[xe.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${xe.npsCategory==="Promoter"?"bg-green-100 text-green-700":xe.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:xe.npsCategory}),Pe(xe.status),xe.lastSurveyDate&&n.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(oa,{className:"w-3 h-3"}),new Date(xe.lastSurveyDate).toLocaleDateString()]})]}),le(xe)&&n.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",le(xe)]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Ye(xe)&&n.jsxs("button",{onClick:ve=>{ve.stopPropagation(),Ee(xe.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send Survey"]}),n.jsx(ya,{className:"w-5 h-5 text-slate-400"})]})]})},xe.satisfactionRecordId))})}),m&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),n.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),Oe.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${we(Oe[0].npsScore)}`,children:n.jsx("span",{className:`text-3xl font-black ${Se(Oe[0].npsScore)}`,children:Oe[0].npsScore})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[Ue(Oe[0].npsScore)&&n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${Ue(Oe[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":Ue(Oe[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Ue(Oe[0].npsScore)}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",Oe[0].submittedAt?new Date(Oe[0].submittedAt).toLocaleDateString():""]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),Oe.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):n.jsx("div",{className:"space-y-3",children:Oe.map(xe=>n.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",xe.npsScore]}),xe.contactName&&n.jsx("span",{className:"text-[11px] text-slate-500",children:xe.contactName})]}),n.jsx("span",{className:"text-[10px] text-slate-400",children:xe.submittedAt?new Date(xe.submittedAt).toLocaleDateString():""})]}),xe.feedback&&n.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:xe.feedback})]})]},xe.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),w.length===0?n.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):n.jsx("div",{className:"space-y-4",children:w.map(xe=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",xe.sentAt?new Date(xe.sentAt).toLocaleDateString():""]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${xe.status==="completed"?"bg-green-100 text-green-700":xe.status==="sent"?"bg-yellow-100 text-yellow-700":xe.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:xe.status==="sent"?"Sent":xe.status==="completed"?"Completed":xe.status==="expired"?"Expired":xe.status})]}),n.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[xe.recipients?.length||0," recipient(s)  ",xe.responses?.length||0," response(s)"]}),xe.recipients&&xe.recipients.length>0&&n.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",xe.recipients.slice(0,3).map(ve=>ve.email||ve.contactId).join(", "),xe.recipients.length>3&&n.jsxs("span",{className:"text-slate-400",children:[" ","+",xe.recipients.length-3," more"]})]}),xe.responses&&xe.responses.length>0&&n.jsx("div",{className:"mt-3 space-y-3",children:xe.responses.map(ve=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",ve.npsScore]}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(ve.submittedAt).toLocaleDateString()})]}),ve.answers.map((Fe,$e)=>Fe.questionText&&Fe.answer&&n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"font-medium text-slate-700",children:Fe.questionText}),n.jsx("p",{className:"text-slate-600 mt-1",children:String(Fe.answer)})]},$e))]},ve.id))})]},xe.id))})]})]})})]})]}),E&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>_(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:xe=>xe.stopPropagation(),children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),n.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:U.map(xe=>n.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:O.includes(xe.id),onChange:ve=>{ve.target.checked?R([...O,xe.id]):R(O.filter(Fe=>Fe!==xe.id))},className:"w-4 h-4 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:xe.name}),n.jsx("div",{className:"text-xs text-slate-500",children:xe.email})]})]},xe.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:z==="email",onChange:()=>H("email"),className:"w-4 h-4 text-indigo-600"}),n.jsx(Qa,{className:"w-4 h-4"}),n.jsx("span",{children:"Email"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:z==="link",onChange:()=>H("link"),className:"w-4 h-4 text-indigo-600"}),n.jsx(zj,{className:"w-4 h-4"}),n.jsx("span",{children:"Copy Link"})]})]}),z==="link"&&n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:ue,disabled:Q||O.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Q&&n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),re&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>X(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:xe=>xe.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),n.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:T?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ee?n.jsx($oe,{template:ee,setTemplate:W,onClose:()=>X(!1),showSuccess:a,showError:s}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Zn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),n.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),n.jsx("button",{onClick:()=>{Re()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},$oe=({template:e,setTemplate:t,onClose:r,showSuccess:a,showError:s})=>{const[i,o]=L.useState(e),[l,c]=L.useState(!1),d=async()=>{try{c(!0),(await Yne({questions:i.questions,name:i.name})).success&&(a("Survey template updated successfully"),t(i),r())}catch(y){s(y.message||"Failed to update survey template")}finally{c(!1)}},u=()=>{const y={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,y]})},f=y=>{const v=i.questions.find(g=>g.order===1);if(v&&v.id===y){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(g=>g.id!==y).map((g,b)=>({...g,order:b+1}))})},m=(y,v)=>{o({...i,questions:i.questions.map(g=>g.id===y?{...g,...v}:g)})},p=(y,v)=>{const g=[...i.questions],b=g.findIndex(S=>S.id===y);if(b===-1)return;const w=g.find(S=>S.order===1);if(w&&w.id===y){s("Q1 must remain first");return}if(v==="up"&&b<=0){s("Cannot move question before Q1");return}const j=v==="up"?b-1:b+1;if(j<0||j>=g.length)return;[g[b],g[j]]=[g[j],g[b]];const N=g.map((S,E)=>({...S,order:E+1}));o({...i,questions:N})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:i.name||"",onChange:y=>o({...i,name:y.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),n.jsxs("button",{onClick:u,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Question"]})]}),n.jsx("div",{className:"space-y-4",children:i.questions.map((y,v)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",y.order]}),n.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&y.type!=="nps"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>p(y.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:n.jsx(Gd,{className:"w-4 h-4 text-slate-500"})}),n.jsx("button",{onClick:()=>p(y.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:n.jsx(SU,{className:"w-4 h-4 text-slate-500"})})]}),!(y.order===1&&y.type==="nps")&&n.jsx("button",{onClick:()=>f(y.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),n.jsxs("select",{value:y.type,onChange:g=>m(y.id,{type:g.target.value}),disabled:y.order===1&&y.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[n.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),n.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),n.jsx("option",{value:"free_text",children:"Free Text"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),n.jsx("input",{type:"text",value:y.text,onChange:g=>m(y.id,{text:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),y.type==="multiple_choice"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[(y.options||[]).map((g,b)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:g,onChange:w=>{const j=[...y.options||[]];j[b]=w.target.value,m(y.id,{options:j})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${b+1}`}),n.jsx("button",{onClick:()=>{const w=[...y.options||[]];w.splice(b,1),m(y.id,{options:w})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:n.jsx(tr,{className:"w-4 h-4"})})]},b)),n.jsxs("button",{onClick:()=>{const g=y.options||[];m(y.id,{options:[...g,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Option"]}),(!y.options||y.options.length===0)&&n.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:y.required,onChange:g=>m(y.id,{required:g.target.checked}),disabled:y.order===1&&y.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),n.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},y.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},zoe=({surveyId:e})=>{const[t,r]=L.useState(null),[a,s]=L.useState(!0),[i,o]=L.useState(!1),[l,c]=L.useState(!1),[d,u]=L.useState(null),[f,m]=L.useState({}),[p,y]=L.useState(null);L.useEffect(()=>{v()},[e]);const v=async()=>{try{s(!0);const w=await Gne(e);if(w.success&&w.data){r(w.data);const j={};w.data.templateSnapshot.forEach(E=>{E.type==="nps"?j[E.id]=null:(E.type,j[E.id]="")}),m(j);const S=new URLSearchParams(window.location.search).get("contact");S?y(S):w.data.recipients&&w.data.recipients.length>0&&y(w.data.recipients[0].contactId)}else u("Survey not found")}catch(w){u(w.message||"Failed to load survey")}finally{s(!1)}},g=(w,j)=>{m(N=>({...N,[w]:j}))},b=async()=>{if(!p){u("Contact information is missing");return}const w=t.templateSnapshot.find(j=>j.type==="nps");if(w&&(f[w.id]===null||f[w.id]===void 0)){u("Please answer the NPS question (required)");return}for(const j of t.templateSnapshot)if(j.required&&(!f[j.id]||f[j.id]==="")){u(`Please answer: ${j.text}`);return}try{o(!0),u(null);const j=Object.entries(f).filter(([N,S])=>S!==null&&S!=="").map(([N,S])=>({questionId:N,answer:S}));await Qne(e,{contactId:p,answers:j}),c(!0)}catch(j){u(j.message||"Failed to submit survey")}finally{o(!1)}};return a?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(yt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):d&&!t?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Zn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),n.jsx("p",{className:"text-slate-600",children:d})]})}):l?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[n.jsx(gn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),n.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(w=>w.type==="nps"),n.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),n.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),d&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:d})}),n.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((w,j)=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[w.text,w.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),w.type==="nps"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>n.jsx("button",{type:"button",onClick:()=>g(w.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${f[w.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[n.jsx("span",{children:"Not at all likely"}),n.jsx("span",{children:"Extremely likely"})]})]}),w.type==="multiple_choice"&&n.jsx("div",{className:"space-y-2",children:w.options?.map(N=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:w.id,value:N,checked:f[w.id]===N,onChange:S=>g(w.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-700",children:N})]},N))}),w.type==="free_text"&&n.jsx("textarea",{value:f[w.id]||"",onChange:N=>g(w.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},w.id))}),n.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:n.jsx("button",{onClick:b,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};var fy={};fy.version="0.18.5";var kM=1252,Hoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],d3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},u3=function(e){Hoe.indexOf(e)!=-1&&(kM=d3[0]=e)};function Woe(){u3(1252)}var zd=function(e){u3(e)};function f3(){zd(1200),Woe()}function RI(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Voe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function SM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Xm=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Voe(e.slice(2)):t==254&&r==255?SM(e.slice(2)):t==65279?e.slice(1):e},Cv=function(t){return String.fromCharCode(t)},BI=function(t){return String.fromCharCode(t)},eg,d0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function tg(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=d0.charAt(i)+d0.charAt(o)+d0.charAt(l)+d0.charAt(c);return t}function Nc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=d0.indexOf(e.charAt(d++)),o=d0.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=d0.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=d0.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Pn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Pf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function w0(e){return Pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function UI(e){return Pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var vc=function(t){return Pn?Pf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function pb(e){if(typeof ArrayBuffer>"u")return vc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function D0(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Goe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function h3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return h3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var oo=Pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Pf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Koe(e){for(var t=[],r=0,a=e.length+250,s=w0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=w0(65535),a=65530)}return t.push(s.slice(0,r)),oo(t)}var _l=/\u0000/g,Ym=/[\u0001-\u0006]/g;function Np(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Hd(e,t){var r=""+e;return r.length>=t?r:Ws("0",t-r.length)+r}function p3(e,t){var r=""+e;return r.length>=t?r:Ws(" ",t-r.length)+r}function hy(e,t){var r=""+e;return r.length>=t?r:r+Ws(" ",t-r.length)}function Xoe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ws("0",t-r.length)+r}function Yoe(e,t){var r=""+e;return r.length>=t?r:Ws("0",t-r.length)+r}var qI=Math.pow(2,32);function ap(e,t){if(e>qI||e<-qI)return Xoe(e,t);var r=Math.round(e);return Yoe(r,t)}function py(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var $I=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],gj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Qoe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var rn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},zI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Joe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function my(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,f=Math.floor(s);d<t&&(f=Math.floor(s),l=f*o+i,u=f*d+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var m=Math.floor(a*l/u);return[m,a*l-m*u,u]}function ch(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=ale(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var _M=new Date(1899,11,31,0,0,0),Zoe=_M.getTime(),ele=new Date(1900,2,1,0,0,0);function AM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=ele&&(r+=1440*60*1e3),(r-(Zoe+(e.getTimezoneOffset()-_M.getTimezoneOffset())*6e4))/(1440*60*1e3)}function m3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tle(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function rle(e){var t=e<0?12:11,r=m3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function nle(e){var t=m3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function rg(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=rle(e):t===10?r=e.toFixed(10).substr(0,12):r=nle(e),m3(tle(r.toUpperCase()))}function Ch(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):rg(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return id(14,AM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function ale(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function sle(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return gj[r.m-1][1];case 5:return gj[r.m-1][0];default:return gj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return $I[r.q][0];default:return $I[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Hd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Hd(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Hd(c,d):"";return u}function u0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var CM=/%/g;function ile(e,t,r){var a=t.replace(CM,""),s=t.length-a.length;return wf(e,a,r*Math.pow(10,2*s))+Ws("%",s)}function ole(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return wf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function EM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+EM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var TM=/# (\?+)( ?)\/( ?)(\d+)/;function lle(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Ws(" ",e[1].length+1+e[4].length):p3(o,e[1].length)+e[2]+"/"+e[3]+Hd(l,e[4].length))}function cle(e,t,r){return r+(t===0?"":""+t)+Ws(" ",e[1].length+2+e[4].length)}var OM=/^#*0*\.([0#]+)/,PM=/\).*[0#]/,IM=/\(###\) ###\\?-####/;function bl(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function HI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function WI(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function dle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function ule(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Vc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(PM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vc("n",a,r):"("+Vc("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ole(e,t,r);if(t.indexOf("%")!==-1)return ile(e,t,r);if(t.indexOf("E")!==-1)return EM(t,r);if(t.charCodeAt(0)===36)return"$"+Vc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+ap(c,t.length);if(t.match(/^[#?]+$/))return s=ap(r,0),s==="0"&&(s=""),s.length>t.length?s:bl(t.substr(0,t.length-s.length))+s;if(i=t.match(TM))return lle(i,c,d);if(t.match(/^#+0+$/))return d+ap(c,t.length-t.indexOf("0"));if(i=t.match(OM))return s=HI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+bl(i[1])).replace(/\.$/,"."+bl(i[1])).replace(/\.(\d*)$/,function(y,v){return"."+v+Ws("0",bl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+HI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+u0(ap(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vc(e,t,-r):u0(""+(Math.floor(r)+dle(r,i[1].length)))+"."+Hd(WI(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Vc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Np(Vc(e,t.replace(/[\\-]/g,""),r)),o=0,Np(Np(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(IM))return s=Vc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=my(c,Math.pow(10,o)-1,!1),s=""+d,u=wf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=hy(l[2],o),u.length<i[4].length&&(u=bl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=my(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?p3(l[1],o)+i[2]+"/"+i[3]+hy(l[2],o):Ws(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=ap(r,0),t.length<=s.length?s:bl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return bl(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=WI(r,i[1].length),r<0?"-"+Vc(e,t,-r):u0(ule(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Hd(0,3-y.length):"")+y})+"."+Hd(o,i[1].length);switch(t){case"###,##0.00":return Vc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=u0(ap(c,0));return p!=="0"?d+p:"";case"###,###.00":return Vc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Vc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function fle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return wf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function hle(e,t,r){var a=t.replace(CM,""),s=t.length-a.length;return wf(e,a,r*Math.pow(10,2*s))+Ws("%",s)}function DM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+DM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(PM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bu("n",a,r):"("+bu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return fle(e,t,r);if(t.indexOf("%")!==-1)return hle(e,t,r);if(t.indexOf("E")!==-1)return DM(t,r);if(t.charCodeAt(0)===36)return"$"+bu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Hd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:bl(t.substr(0,t.length-s.length))+s;if(i=t.match(TM))return cle(i,c,d);if(t.match(/^#+0+$/))return d+Hd(c,t.length-t.indexOf("0"));if(i=t.match(OM))return s=(""+r).replace(/^([^\.]+)$/,"$1."+bl(i[1])).replace(/\.$/,"."+bl(i[1])),s=s.replace(/\.(\d*)$/,function(y,v){return"."+v+Ws("0",bl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+u0(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):u0(""+r)+"."+Ws("0",i[1].length);if(i=t.match(/^#,#*,#0/))return bu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Np(bu(e,t.replace(/[\\-]/g,""),r)),o=0,Np(Np(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(IM))return s=bu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=my(c,Math.pow(10,o)-1,!1),s=""+d,u=wf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=hy(l[2],o),u.length<i[4].length&&(u=bl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=my(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?p3(l[1],o)+i[2]+"/"+i[3]+hy(l[2],o):Ws(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:bl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return bl(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):u0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Hd(0,3-y.length):"")+y})+"."+Hd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=u0(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return bu(e,t.slice(0,t.lastIndexOf(".")),r)+bl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function wf(e,t,r){return(r|0)===r?bu(e,t,r):Vc(e,t,r)}function ple(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var LM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function hm(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":py(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(LM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function mle(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,f,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!py(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=ch(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=ch(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(d==null&&(d=ch(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(v.v=d.H>=12?"P":"A"),v.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(v.v=d.H>=12?"PM":"AM"),v.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(v.v=d.H>=12?"":""),v.t="T",o+=5,m="h"):(v.t="t",++o),d==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(LM)){if(d==null&&(d=ch(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",hm(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,b=0,w;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",g<1&&(g=1);break;case"s":(w=s[o].v.match(/\.0+$/))&&(b=Math.max(b,w[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=sle(s[o].t.charCodeAt(0),s[o].v,d,b),s[o].t="t";break;case"n":case"?":for(N=o+1;s[N]!=null&&((l=s[N].t)==="?"||l==="D"||(l===" "||l==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[o].v+=s[N].v,s[N]={v:"",t:";"},++N;j+=s[o].v,o=N-1;break;case"G":s[o].t="t",s[o].v=Ch(t,r);break}var S="",E,_;if(j.length>0){j.charCodeAt(0)==40?(E=t<0&&j.charCodeAt(0)===45?-t:t,_=wf("n",j,E)):(E=t<0&&a>1?-t:t,_=wf("n",j,E),E<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),N=_.length-1;var P=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){P=o;break}var I=s.length;if(P===s.length&&_.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(N>=s[o].v.length-1?(N-=s[o].v.length,s[o].v=_.substr(N+1,s[o].v.length)):N<0?s[o].v="":(s[o].v=_.substr(0,N+1),N=-1),s[o].t="t",I=o);N>=0&&I<s.length&&(s[I].v=_.substr(0,N+1)+s[I].v)}else if(P!==s.length&&_.indexOf("E")===-1){for(N=_.indexOf(".")-1,o=P;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)N>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=_.charAt(N--)+S);s[o].v=S,s[o].t="t",I=o}for(N>=0&&I<s.length&&(s[I].v=_.substr(0,N+1)+s[I].v),N=_.indexOf(".")+1,o=P;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==P)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)N<_.length&&(S+=_.charAt(N++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(E=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=wf(s[o].t,s[o].v,E),s[o].t="t");var U="";for(o=0;o!==s.length;++o)s[o]!=null&&(U+=s[o].v);return U}var VI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function GI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function xle(e,t){var r=ple(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(VI),l=r[1].match(VI);return GI(t,o)?[a,r[0]]:GI(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function id(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:rn)[e],a==null&&(a=r.table&&r.table[zI[e]]||rn[zI[e]]),a==null&&(a=Joe[e]||"General");break}if(py(a,0))return Ch(t,r);t instanceof Date&&(t=AM(t,r.date1904));var s=xle(a,t);if(py(s[1]))return Ch(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return mle(s[1],t,r,s[0])}function Nf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(rn[r]==null){t<0&&(t=r);continue}if(rn[r]==e){t=r;break}}t<0&&(t=391)}return rn[t]=e,t}function mb(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Nf(e[t],t)}function pm(){rn=Qoe()}var gle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},FM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function vle(e){var t=typeof e=="number"?rn[e]:e;return t=t.replace(FM,"(\\d+)"),new RegExp("^"+t+"$")}function yle(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(FM)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var ble=(function(){var e={};e.version="1.2.0";function t(){for(var _=0,P=new Array(256),I=0;I!=256;++I)_=I,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,P[I]=_;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function a(_){var P=0,I=0,U=0,C=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)C[U]=_[U];for(U=0;U!=256;++U)for(I=_[U],P=256+U;P<4096;P+=256)I=C[P]=I>>>8^_[I&255];var O=[];for(U=1;U!=16;++U)O[U-1]=typeof Int32Array<"u"?C.subarray(U*256,U*256+256):C.slice(U*256,U*256+256);return O}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],f=s[6],m=s[7],p=s[8],y=s[9],v=s[10],g=s[11],b=s[12],w=s[13],j=s[14];function N(_,P){for(var I=P^-1,U=0,C=_.length;U<C;)I=I>>>8^r[(I^_.charCodeAt(U++))&255];return~I}function S(_,P){for(var I=P^-1,U=_.length-15,C=0;C<U;)I=j[_[C++]^I&255]^w[_[C++]^I>>8&255]^b[_[C++]^I>>16&255]^g[_[C++]^I>>>24]^v[_[C++]]^y[_[C++]]^p[_[C++]]^m[_[C++]]^f[_[C++]]^u[_[C++]]^d[_[C++]]^c[_[C++]]^l[_[C++]]^o[_[C++]]^i[_[C++]]^r[_[C++]];for(U+=15;C<U;)I=I>>>8^r[(I^_[C++])&255];return~I}function E(_,P){for(var I=P^-1,U=0,C=_.length,O=0,R=0;U<C;)O=_.charCodeAt(U++),O<128?I=I>>>8^r[(I^O)&255]:O<2048?(I=I>>>8^r[(I^(192|O>>6&31))&255],I=I>>>8^r[(I^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,R=_.charCodeAt(U++)&1023,I=I>>>8^r[(I^(240|O>>8&7))&255],I=I>>>8^r[(I^(128|O>>2&63))&255],I=I>>>8^r[(I^(128|R>>6&15|(O&3)<<4))&255],I=I>>>8^r[(I^(128|R&63))&255]):(I=I>>>8^r[(I^(224|O>>12&15))&255],I=I>>>8^r[(I^(128|O>>6&63))&255],I=I>>>8^r[(I^(128|O&63))&255]);return~I}return e.table=r,e.bstr=N,e.buf=S,e.str=E,e})(),Gr=(function(){var t={};t.version="1.2.1";function r(ne,je){for(var ke=ne.split("/"),ie=je.split("/"),ge=0,Ae=0,Ge=Math.min(ke.length,ie.length);ge<Ge;++ge){if(Ae=ke[ge].length-ie[ge].length)return Ae;if(ke[ge]!=ie[ge])return ke[ge]<ie[ge]?-1:1}return ke.length-ie.length}function a(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:a(ne.slice(0,-1));var je=ne.lastIndexOf("/");return je===-1?ne:ne.slice(0,je+1)}function s(ne){if(ne.charAt(ne.length-1)=="/")return s(ne.slice(0,-1));var je=ne.lastIndexOf("/");return je===-1?ne:ne.slice(je+1)}function i(ne,je){typeof je=="string"&&(je=new Date(je));var ke=je.getHours();ke=ke<<6|je.getMinutes(),ke=ke<<5|je.getSeconds()>>>1,ne.write_shift(2,ke);var ie=je.getFullYear()-1980;ie=ie<<4|je.getMonth()+1,ie=ie<<5|je.getDate(),ne.write_shift(2,ie)}function o(ne){var je=ne.read_shift(2)&65535,ke=ne.read_shift(2)&65535,ie=new Date,ge=ke&31;ke>>>=5;var Ae=ke&15;ke>>>=4,ie.setMilliseconds(0),ie.setFullYear(ke+1980),ie.setMonth(Ae-1),ie.setDate(ge);var Ge=je&31;je>>>=5;var rt=je&63;return je>>>=6,ie.setHours(je),ie.setMinutes(rt),ie.setSeconds(Ge<<1),ie}function l(ne){To(ne,0);for(var je={},ke=0;ne.l<=ne.length-4;){var ie=ne.read_shift(2),ge=ne.read_shift(2),Ae=ne.l+ge,Ge={};ie===21589&&(ke=ne.read_shift(1),ke&1&&(Ge.mtime=ne.read_shift(4)),ge>5&&(ke&2&&(Ge.atime=ne.read_shift(4)),ke&4&&(Ge.ctime=ne.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3))),ne.l=Ae,je[ie]=Ge}return je}var c;function d(){return c||(c={})}function u(ne,je){if(ne[0]==80&&ne[1]==75)return nr(ne,je);if((ne[0]|32)==109&&(ne[1]|32)==105)return Qr(ne,je);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var ke=3,ie=512,ge=0,Ae=0,Ge=0,rt=0,Qe=0,tt=[],Ke=ne.slice(0,512);To(Ke,0);var Le=f(Ke);switch(ke=Le[0],ke){case 3:ie=512;break;case 4:ie=4096;break;case 0:if(Le[1]==0)return nr(ne,je);default:throw new Error("Major Version: Expected 3 or 4 saw "+ke)}ie!==512&&(Ke=ne.slice(0,ie),To(Ke,28));var st=ne.slice(0,ie);m(Ke,ke);var mt=Ke.read_shift(4,"i");if(ke===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);Ke.l+=4,Ge=Ke.read_shift(4,"i"),Ke.l+=4,Ke.chk("00100000","Mini Stream Cutoff Size: "),rt=Ke.read_shift(4,"i"),ge=Ke.read_shift(4,"i"),Qe=Ke.read_shift(4,"i"),Ae=Ke.read_shift(4,"i");for(var Ot=-1,Lt=0;Lt<109&&(Ot=Ke.read_shift(4,"i"),!(Ot<0));++Lt)tt[Lt]=Ot;var vr=p(ne,ie);g(Qe,Ae,vr,ie,tt);var Mr=w(vr,Ge,tt,ie);Mr[Ge].name="!Directory",ge>0&&rt!==R&&(Mr[rt].name="!MiniFAT"),Mr[tt[0]].name="!FAT",Mr.fat_addrs=tt,Mr.ssz=ie;var Vr={},Mn=[],Fs=[],$n=[];j(Ge,Mr,vr,Mn,ge,Vr,Fs,rt),y(Fs,$n,Mn),Mn.shift();var hs={FileIndex:Fs,FullPaths:$n};return je&&je.raw&&(hs.raw={header:st,sectors:vr}),hs}function f(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(z,"Header Signature: "),ne.l+=16;var je=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),je]}function m(ne,je){var ke=9;switch(ne.l+=2,ke=ne.read_shift(2)){case 9:if(je!=3)throw new Error("Sector Shift: Expected 9 saw "+ke);break;case 12:if(je!=4)throw new Error("Sector Shift: Expected 12 saw "+ke);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ke)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function p(ne,je){for(var ke=Math.ceil(ne.length/je)-1,ie=[],ge=1;ge<ke;++ge)ie[ge-1]=ne.slice(ge*je,(ge+1)*je);return ie[ke-1]=ne.slice(ke*je),ie}function y(ne,je,ke){for(var ie=0,ge=0,Ae=0,Ge=0,rt=0,Qe=ke.length,tt=[],Ke=[];ie<Qe;++ie)tt[ie]=Ke[ie]=ie,je[ie]=ke[ie];for(;rt<Ke.length;++rt)ie=Ke[rt],ge=ne[ie].L,Ae=ne[ie].R,Ge=ne[ie].C,tt[ie]===ie&&(ge!==-1&&tt[ge]!==ge&&(tt[ie]=tt[ge]),Ae!==-1&&tt[Ae]!==Ae&&(tt[ie]=tt[Ae])),Ge!==-1&&(tt[Ge]=ie),ge!==-1&&ie!=tt[ie]&&(tt[ge]=tt[ie],Ke.lastIndexOf(ge)<rt&&Ke.push(ge)),Ae!==-1&&ie!=tt[ie]&&(tt[Ae]=tt[ie],Ke.lastIndexOf(Ae)<rt&&Ke.push(Ae));for(ie=1;ie<Qe;++ie)tt[ie]===ie&&(Ae!==-1&&tt[Ae]!==Ae?tt[ie]=tt[Ae]:ge!==-1&&tt[ge]!==ge&&(tt[ie]=tt[ge]));for(ie=1;ie<Qe;++ie)if(ne[ie].type!==0){if(rt=ie,rt!=tt[rt])do rt=tt[rt],je[ie]=je[rt]+"/"+je[ie];while(rt!==0&&tt[rt]!==-1&&rt!=tt[rt]);tt[ie]=-1}for(je[0]+="/",ie=1;ie<Qe;++ie)ne[ie].type!==2&&(je[ie]+="/")}function v(ne,je,ke){for(var ie=ne.start,ge=ne.size,Ae=[],Ge=ie;ke&&ge>0&&Ge>=0;)Ae.push(je.slice(Ge*O,Ge*O+O)),ge-=O,Ge=th(ke,Ge*4);return Ae.length===0?Rt(0):oo(Ae).slice(0,ne.size)}function g(ne,je,ke,ie,ge){var Ae=R;if(ne===R){if(je!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Ge=ke[ne],rt=(ie>>>2)-1;if(!Ge)return;for(var Qe=0;Qe<rt&&(Ae=th(Ge,Qe*4))!==R;++Qe)ge.push(Ae);g(th(Ge,ie-4),je-1,ke,ie,ge)}}function b(ne,je,ke,ie,ge){var Ae=[],Ge=[];ge||(ge=[]);var rt=ie-1,Qe=0,tt=0;for(Qe=je;Qe>=0;){ge[Qe]=!0,Ae[Ae.length]=Qe,Ge.push(ne[Qe]);var Ke=ke[Math.floor(Qe*4/ie)];if(tt=Qe*4&rt,ie<4+tt)throw new Error("FAT boundary crossed: "+Qe+" 4 "+ie);if(!ne[Ke])break;Qe=th(ne[Ke],tt)}return{nodes:Ae,data:s8([Ge])}}function w(ne,je,ke,ie){var ge=ne.length,Ae=[],Ge=[],rt=[],Qe=[],tt=ie-1,Ke=0,Le=0,st=0,mt=0;for(Ke=0;Ke<ge;++Ke)if(rt=[],st=Ke+je,st>=ge&&(st-=ge),!Ge[st]){Qe=[];var Ot=[];for(Le=st;Le>=0;){Ot[Le]=!0,Ge[Le]=!0,rt[rt.length]=Le,Qe.push(ne[Le]);var Lt=ke[Math.floor(Le*4/ie)];if(mt=Le*4&tt,ie<4+mt)throw new Error("FAT boundary crossed: "+Le+" 4 "+ie);if(!ne[Lt]||(Le=th(ne[Lt],mt),Ot[Le]))break}Ae[st]={nodes:rt,data:s8([Qe])}}return Ae}function j(ne,je,ke,ie,ge,Ae,Ge,rt){for(var Qe=0,tt=ie.length?2:0,Ke=je[ne].data,Le=0,st=0,mt;Le<Ke.length;Le+=128){var Ot=Ke.slice(Le,Le+128);To(Ot,64),st=Ot.read_shift(2),mt=N3(Ot,0,st-tt),ie.push(mt);var Lt={name:mt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},vr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);vr!==0&&(Lt.ct=N(Ot,Ot.l-8));var Mr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Mr!==0&&(Lt.mt=N(Ot,Ot.l-8)),Lt.start=Ot.read_shift(4,"i"),Lt.size=Ot.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=R,Lt.name=""),Lt.type===5?(Qe=Lt.start,ge>0&&Qe!==R&&(je[Qe].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",je[Lt.start]===void 0&&(je[Lt.start]=b(ke,Lt.start,je.fat_addrs,je.ssz)),je[Lt.start].name=Lt.name,Lt.content=je[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:Qe!==R&&Lt.start!==R&&je[Qe]&&(Lt.content=v(Lt,je[Qe].data,(je[rt]||{}).data))),Lt.content&&To(Lt.content,0),Ae[mt]=Lt,Ge.push(Lt)}}function N(ne,je){return new Date((xc(ne,je+4)/1e7*Math.pow(2,32)+xc(ne,je)/1e7-11644473600)*1e3)}function S(ne,je){return d(),u(c.readFileSync(ne),je)}function E(ne,je){var ke=je&&je.type;switch(ke||Pn&&Buffer.isBuffer(ne)&&(ke="buffer"),ke||"base64"){case"file":return S(ne,je);case"base64":return u(vc(Nc(ne)),je);case"binary":return u(vc(ne),je)}return u(ne,je)}function _(ne,je){var ke=je||{},ie=ke.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=ie+"/",ne.FileIndex[0]={name:ie,type:5}),ke.CLSID&&(ne.FileIndex[0].clsid=ke.CLSID),P(ne)}function P(ne){var je="Sh33tJ5";if(!Gr.find(ne,"/"+je)){var ke=Rt(4);ke[0]=55,ke[1]=ke[3]=50,ke[2]=54,ne.FileIndex.push({name:je,type:2,content:ke,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+je),I(ne)}}function I(ne,je){_(ne);for(var ke=!1,ie=!1,ge=ne.FullPaths.length-1;ge>=0;--ge){var Ae=ne.FileIndex[ge];switch(Ae.type){case 0:ie?ke=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:ie=!0,isNaN(Ae.R*Ae.L*Ae.C)&&(ke=!0),Ae.R>-1&&Ae.L>-1&&Ae.R==Ae.L&&(ke=!0);break;default:ke=!0;break}}if(!(!ke&&!je)){var Ge=new Date(1987,1,19),rt=0,Qe=Object.create?Object.create(null):{},tt=[];for(ge=0;ge<ne.FullPaths.length;++ge)Qe[ne.FullPaths[ge]]=!0,ne.FileIndex[ge].type!==0&&tt.push([ne.FullPaths[ge],ne.FileIndex[ge]]);for(ge=0;ge<tt.length;++ge){var Ke=a(tt[ge][0]);ie=Qe[Ke],ie||(tt.push([Ke,{name:s(Ke).replace("/",""),type:1,clsid:Q,ct:Ge,mt:Ge,content:null}]),Qe[Ke]=!0)}for(tt.sort(function(mt,Ot){return r(mt[0],Ot[0])}),ne.FullPaths=[],ne.FileIndex=[],ge=0;ge<tt.length;++ge)ne.FullPaths[ge]=tt[ge][0],ne.FileIndex[ge]=tt[ge][1];for(ge=0;ge<tt.length;++ge){var Le=ne.FileIndex[ge],st=ne.FullPaths[ge];if(Le.name=s(st).replace("/",""),Le.L=Le.R=Le.C=-(Le.color=1),Le.size=Le.content?Le.content.length:0,Le.start=0,Le.clsid=Le.clsid||Q,ge===0)Le.C=tt.length>1?1:-1,Le.size=0,Le.type=5;else if(st.slice(-1)=="/"){for(rt=ge+1;rt<tt.length&&a(ne.FullPaths[rt])!=st;++rt);for(Le.C=rt>=tt.length?-1:rt,rt=ge+1;rt<tt.length&&a(ne.FullPaths[rt])!=a(st);++rt);Le.R=rt>=tt.length?-1:rt,Le.type=1}else a(ne.FullPaths[ge+1]||"")==a(st)&&(Le.R=ge+1),Le.type=2}}}function U(ne,je){var ke=je||{};if(ke.fileType=="mad")return ir(ne,ke);if(I(ne),ke.fileType==="zip")return Ir(ne,ke);var ie=(function(mt){for(var Ot=0,Lt=0,vr=0;vr<mt.FileIndex.length;++vr){var Mr=mt.FileIndex[vr];if(Mr.content){var Vr=Mr.content.length;Vr>0&&(Vr<4096?Ot+=Vr+63>>6:Lt+=Vr+511>>9)}}for(var Mn=mt.FullPaths.length+3>>2,Fs=Ot+7>>3,$n=Ot+127>>7,hs=Fs+Lt+Mn+$n,zn=hs+127>>7,As=zn<=109?0:Math.ceil((zn-109)/127);hs+zn+As+127>>7>zn;)As=++zn<=109?0:Math.ceil((zn-109)/127);var Hn=[1,As,zn,$n,Mn,Lt,Ot,0];return mt.FileIndex[0].size=Ot<<6,Hn[7]=(mt.FileIndex[0].start=Hn[0]+Hn[1]+Hn[2]+Hn[3]+Hn[4]+Hn[5])+(Hn[6]+7>>3),Hn})(ne),ge=Rt(ie[7]<<9),Ae=0,Ge=0;{for(Ae=0;Ae<8;++Ae)ge.write_shift(1,H[Ae]);for(Ae=0;Ae<8;++Ae)ge.write_shift(2,0);for(ge.write_shift(2,62),ge.write_shift(2,3),ge.write_shift(2,65534),ge.write_shift(2,9),ge.write_shift(2,6),Ae=0;Ae<3;++Ae)ge.write_shift(2,0);for(ge.write_shift(4,0),ge.write_shift(4,ie[2]),ge.write_shift(4,ie[0]+ie[1]+ie[2]+ie[3]-1),ge.write_shift(4,0),ge.write_shift(4,4096),ge.write_shift(4,ie[3]?ie[0]+ie[1]+ie[2]-1:R),ge.write_shift(4,ie[3]),ge.write_shift(-4,ie[1]?ie[0]-1:R),ge.write_shift(4,ie[1]),Ae=0;Ae<109;++Ae)ge.write_shift(-4,Ae<ie[2]?ie[1]+Ae:-1)}if(ie[1])for(Ge=0;Ge<ie[1];++Ge){for(;Ae<236+Ge*127;++Ae)ge.write_shift(-4,Ae<ie[2]?ie[1]+Ae:-1);ge.write_shift(-4,Ge===ie[1]-1?R:Ge+1)}var rt=function(mt){for(Ge+=mt;Ae<Ge-1;++Ae)ge.write_shift(-4,Ae+1);mt&&(++Ae,ge.write_shift(-4,R))};for(Ge=Ae=0,Ge+=ie[1];Ae<Ge;++Ae)ge.write_shift(-4,J.DIFSECT);for(Ge+=ie[2];Ae<Ge;++Ae)ge.write_shift(-4,J.FATSECT);rt(ie[3]),rt(ie[4]);for(var Qe=0,tt=0,Ke=ne.FileIndex[0];Qe<ne.FileIndex.length;++Qe)Ke=ne.FileIndex[Qe],Ke.content&&(tt=Ke.content.length,!(tt<4096)&&(Ke.start=Ge,rt(tt+511>>9)));for(rt(ie[6]+7>>3);ge.l&511;)ge.write_shift(-4,J.ENDOFCHAIN);for(Ge=Ae=0,Qe=0;Qe<ne.FileIndex.length;++Qe)Ke=ne.FileIndex[Qe],Ke.content&&(tt=Ke.content.length,!(!tt||tt>=4096)&&(Ke.start=Ge,rt(tt+63>>6)));for(;ge.l&511;)ge.write_shift(-4,J.ENDOFCHAIN);for(Ae=0;Ae<ie[4]<<2;++Ae){var Le=ne.FullPaths[Ae];if(!Le||Le.length===0){for(Qe=0;Qe<17;++Qe)ge.write_shift(4,0);for(Qe=0;Qe<3;++Qe)ge.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)ge.write_shift(4,0);continue}Ke=ne.FileIndex[Ae],Ae===0&&(Ke.start=Ke.size?Ke.start-1:R);var st=Ae===0&&ke.root||Ke.name;if(tt=2*(st.length+1),ge.write_shift(64,st,"utf16le"),ge.write_shift(2,tt),ge.write_shift(1,Ke.type),ge.write_shift(1,Ke.color),ge.write_shift(-4,Ke.L),ge.write_shift(-4,Ke.R),ge.write_shift(-4,Ke.C),Ke.clsid)ge.write_shift(16,Ke.clsid,"hex");else for(Qe=0;Qe<4;++Qe)ge.write_shift(4,0);ge.write_shift(4,Ke.state||0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,Ke.start),ge.write_shift(4,Ke.size),ge.write_shift(4,0)}for(Ae=1;Ae<ne.FileIndex.length;++Ae)if(Ke=ne.FileIndex[Ae],Ke.size>=4096)if(ge.l=Ke.start+1<<9,Pn&&Buffer.isBuffer(Ke.content))Ke.content.copy(ge,ge.l,0,Ke.size),ge.l+=Ke.size+511&-512;else{for(Qe=0;Qe<Ke.size;++Qe)ge.write_shift(1,Ke.content[Qe]);for(;Qe&511;++Qe)ge.write_shift(1,0)}for(Ae=1;Ae<ne.FileIndex.length;++Ae)if(Ke=ne.FileIndex[Ae],Ke.size>0&&Ke.size<4096)if(Pn&&Buffer.isBuffer(Ke.content))Ke.content.copy(ge,ge.l,0,Ke.size),ge.l+=Ke.size+63&-64;else{for(Qe=0;Qe<Ke.size;++Qe)ge.write_shift(1,Ke.content[Qe]);for(;Qe&63;++Qe)ge.write_shift(1,0)}if(Pn)ge.l=ge.length;else for(;ge.l<ge.length;)ge.write_shift(1,0);return ge}function C(ne,je){var ke=ne.FullPaths.map(function(Qe){return Qe.toUpperCase()}),ie=ke.map(function(Qe){var tt=Qe.split("/");return tt[tt.length-(Qe.slice(-1)=="/"?2:1)]}),ge=!1;je.charCodeAt(0)===47?(ge=!0,je=ke[0].slice(0,-1)+je):ge=je.indexOf("/")!==-1;var Ae=je.toUpperCase(),Ge=ge===!0?ke.indexOf(Ae):ie.indexOf(Ae);if(Ge!==-1)return ne.FileIndex[Ge];var rt=!Ae.match(Ym);for(Ae=Ae.replace(_l,""),rt&&(Ae=Ae.replace(Ym,"!")),Ge=0;Ge<ke.length;++Ge)if((rt?ke[Ge].replace(Ym,"!"):ke[Ge]).replace(_l,"")==Ae||(rt?ie[Ge].replace(Ym,"!"):ie[Ge]).replace(_l,"")==Ae)return ne.FileIndex[Ge];return null}var O=64,R=-2,z="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(ne,je,ke){d();var ie=U(ne,ke);c.writeFileSync(je,ie)}function X(ne){for(var je=new Array(ne.length),ke=0;ke<ne.length;++ke)je[ke]=String.fromCharCode(ne[ke]);return je.join("")}function ee(ne,je){var ke=U(ne,je);switch(je&&je.type||"buffer"){case"file":return d(),c.writeFileSync(je.filename,ke),ke;case"binary":return typeof ke=="string"?ke:X(ke);case"base64":return tg(typeof ke=="string"?ke:X(ke));case"buffer":if(Pn)return Buffer.isBuffer(ke)?ke:Pf(ke);case"array":return typeof ke=="string"?vc(ke):ke}return ke}var W;function T(ne){try{var je=ne.InflateRaw,ke=new je;if(ke._processChunk(new Uint8Array([3,0]),ke._finishFlushFlag),ke.bytesRead)W=ne;else throw new Error("zlib does not expose bytesRead")}catch(ie){console.error("cannot use native zlib: "+(ie.message||ie))}}function q(ne,je){if(!W)return jt(ne,je);var ke=W.InflateRaw,ie=new ke,ge=ie._processChunk(ne.slice(ne.l),ie._finishFlushFlag);return ne.l+=ie.bytesRead,ge}function V(ne){return W?W.deflateRawSync(ne):qe(ne)}var B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(ne){var je=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(je>>16|je>>8|je)&255}for(var se=typeof Uint8Array<"u",de=se?new Uint8Array(256):[],Re=0;Re<256;++Re)de[Re]=me(Re);function he(ne,je){var ke=de[ne&255];return je<=8?ke>>>8-je:(ke=ke<<8|de[ne>>8&255],je<=16?ke>>>16-je:(ke=ke<<8|de[ne>>16&255],ke>>>24-je))}function Ue(ne,je){var ke=je&7,ie=je>>>3;return(ne[ie]|(ke<=6?0:ne[ie+1]<<8))>>>ke&3}function Oe(ne,je){var ke=je&7,ie=je>>>3;return(ne[ie]|(ke<=5?0:ne[ie+1]<<8))>>>ke&7}function le(ne,je){var ke=je&7,ie=je>>>3;return(ne[ie]|(ke<=4?0:ne[ie+1]<<8))>>>ke&15}function te(ne,je){var ke=je&7,ie=je>>>3;return(ne[ie]|(ke<=3?0:ne[ie+1]<<8))>>>ke&31}function Se(ne,je){var ke=je&7,ie=je>>>3;return(ne[ie]|(ke<=1?0:ne[ie+1]<<8))>>>ke&127}function we(ne,je,ke){var ie=je&7,ge=je>>>3,Ae=(1<<ke)-1,Ge=ne[ge]>>>ie;return ke<8-ie||(Ge|=ne[ge+1]<<8-ie,ke<16-ie)||(Ge|=ne[ge+2]<<16-ie,ke<24-ie)||(Ge|=ne[ge+3]<<24-ie),Ge&Ae}function Pe(ne,je,ke){var ie=je&7,ge=je>>>3;return ie<=5?ne[ge]|=(ke&7)<<ie:(ne[ge]|=ke<<ie&255,ne[ge+1]=(ke&7)>>8-ie),je+3}function fe(ne,je,ke){var ie=je&7,ge=je>>>3;return ke=(ke&1)<<ie,ne[ge]|=ke,je+1}function ue(ne,je,ke){var ie=je&7,ge=je>>>3;return ke<<=ie,ne[ge]|=ke&255,ke>>>=8,ne[ge+1]=ke,je+8}function Ee(ne,je,ke){var ie=je&7,ge=je>>>3;return ke<<=ie,ne[ge]|=ke&255,ke>>>=8,ne[ge+1]=ke&255,ne[ge+2]=ke>>>8,je+16}function Ye(ne,je){var ke=ne.length,ie=2*ke>je?2*ke:je+5,ge=0;if(ke>=je)return ne;if(Pn){var Ae=UI(ie);if(ne.copy)ne.copy(Ae);else for(;ge<ne.length;++ge)Ae[ge]=ne[ge];return Ae}else if(se){var Ge=new Uint8Array(ie);if(Ge.set)Ge.set(ne);else for(;ge<ke;++ge)Ge[ge]=ne[ge];return Ge}return ne.length=ie,ne}function xe(ne){for(var je=new Array(ne),ke=0;ke<ne;++ke)je[ke]=0;return je}function ve(ne,je,ke){var ie=1,ge=0,Ae=0,Ge=0,rt=0,Qe=ne.length,tt=se?new Uint16Array(32):xe(32);for(Ae=0;Ae<32;++Ae)tt[Ae]=0;for(Ae=Qe;Ae<ke;++Ae)ne[Ae]=0;Qe=ne.length;var Ke=se?new Uint16Array(Qe):xe(Qe);for(Ae=0;Ae<Qe;++Ae)tt[ge=ne[Ae]]++,ie<ge&&(ie=ge),Ke[Ae]=0;for(tt[0]=0,Ae=1;Ae<=ie;++Ae)tt[Ae+16]=rt=rt+tt[Ae-1]<<1;for(Ae=0;Ae<Qe;++Ae)rt=ne[Ae],rt!=0&&(Ke[Ae]=tt[rt+16]++);var Le=0;for(Ae=0;Ae<Qe;++Ae)if(Le=ne[Ae],Le!=0)for(rt=he(Ke[Ae],ie)>>ie-Le,Ge=(1<<ie+4-Le)-1;Ge>=0;--Ge)je[rt|Ge<<Le]=Le&15|Ae<<4;return ie}var Fe=se?new Uint16Array(512):xe(512),$e=se?new Uint16Array(32):xe(32);if(!se){for(var _e=0;_e<512;++_e)Fe[_e]=0;for(_e=0;_e<32;++_e)$e[_e]=0}(function(){for(var ne=[],je=0;je<32;je++)ne.push(5);ve(ne,$e,32);var ke=[];for(je=0;je<=143;je++)ke.push(8);for(;je<=255;je++)ke.push(9);for(;je<=279;je++)ke.push(7);for(;je<=287;je++)ke.push(8);ve(ke,Fe,288)})();var Be=(function(){for(var je=se?new Uint8Array(32768):[],ke=0,ie=0;ke<oe.length-1;++ke)for(;ie<oe[ke+1];++ie)je[ie]=ke;for(;ie<32768;++ie)je[ie]=29;var ge=se?new Uint8Array(259):[];for(ke=0,ie=0;ke<K.length-1;++ke)for(;ie<K[ke+1];++ie)ge[ie]=ke;function Ae(rt,Qe){for(var tt=0;tt<rt.length;){var Ke=Math.min(65535,rt.length-tt),Le=tt+Ke==rt.length;for(Qe.write_shift(1,+Le),Qe.write_shift(2,Ke),Qe.write_shift(2,~Ke&65535);Ke-- >0;)Qe[Qe.l++]=rt[tt++]}return Qe.l}function Ge(rt,Qe){for(var tt=0,Ke=0,Le=se?new Uint16Array(32768):[];Ke<rt.length;){var st=Math.min(65535,rt.length-Ke);if(st<10){for(tt=Pe(Qe,tt,+(Ke+st==rt.length)),tt&7&&(tt+=8-(tt&7)),Qe.l=tt/8|0,Qe.write_shift(2,st),Qe.write_shift(2,~st&65535);st-- >0;)Qe[Qe.l++]=rt[Ke++];tt=Qe.l*8;continue}tt=Pe(Qe,tt,+(Ke+st==rt.length)+2);for(var mt=0;st-- >0;){var Ot=rt[Ke];mt=(mt<<5^Ot)&32767;var Lt=-1,vr=0;if((Lt=Le[mt])&&(Lt|=Ke&-32768,Lt>Ke&&(Lt-=32768),Lt<Ke))for(;rt[Lt+vr]==rt[Ke+vr]&&vr<250;)++vr;if(vr>2){Ot=ge[vr],Ot<=22?tt=ue(Qe,tt,de[Ot+1]>>1)-1:(ue(Qe,tt,3),tt+=5,ue(Qe,tt,de[Ot-23]>>5),tt+=3);var Mr=Ot<8?0:Ot-4>>2;Mr>0&&(Ee(Qe,tt,vr-K[Ot]),tt+=Mr),Ot=je[Ke-Lt],tt=ue(Qe,tt,de[Ot]>>3),tt-=3;var Vr=Ot<4?0:Ot-2>>1;Vr>0&&(Ee(Qe,tt,Ke-Lt-oe[Ot]),tt+=Vr);for(var Mn=0;Mn<vr;++Mn)Le[mt]=Ke&32767,mt=(mt<<5^rt[Ke])&32767,++Ke;st-=vr-1}else Ot<=143?Ot=Ot+48:tt=fe(Qe,tt,1),tt=ue(Qe,tt,de[Ot]),Le[mt]=Ke&32767,++Ke}tt=ue(Qe,tt,0)-1}return Qe.l=(tt+7)/8|0,Qe.l}return function(Qe,tt){return Qe.length<8?Ae(Qe,tt):Ge(Qe,tt)}})();function qe(ne){var je=Rt(50+Math.floor(ne.length*1.1)),ke=Be(ne,je);return je.slice(0,ke)}var Ze=se?new Uint16Array(32768):xe(32768),Vt=se?new Uint16Array(32768):xe(32768),Dt=se?new Uint16Array(128):xe(128),dt=1,Tt=1;function Ht(ne,je){var ke=te(ne,je)+257;je+=5;var ie=te(ne,je)+1;je+=5;var ge=le(ne,je)+4;je+=4;for(var Ae=0,Ge=se?new Uint8Array(19):xe(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,tt=se?new Uint8Array(8):xe(8),Ke=se?new Uint8Array(8):xe(8),Le=Ge.length,st=0;st<ge;++st)Ge[B[st]]=Ae=Oe(ne,je),Qe<Ae&&(Qe=Ae),tt[Ae]++,je+=3;var mt=0;for(tt[0]=0,st=1;st<=Qe;++st)Ke[st]=mt=mt+tt[st-1]<<1;for(st=0;st<Le;++st)(mt=Ge[st])!=0&&(rt[st]=Ke[mt]++);var Ot=0;for(st=0;st<Le;++st)if(Ot=Ge[st],Ot!=0){mt=de[rt[st]]>>8-Ot;for(var Lt=(1<<7-Ot)-1;Lt>=0;--Lt)Dt[mt|Lt<<Ot]=Ot&7|st<<3}var vr=[];for(Qe=1;vr.length<ke+ie;)switch(mt=Dt[Se(ne,je)],je+=mt&7,mt>>>=3){case 16:for(Ae=3+Ue(ne,je),je+=2,mt=vr[vr.length-1];Ae-- >0;)vr.push(mt);break;case 17:for(Ae=3+Oe(ne,je),je+=3;Ae-- >0;)vr.push(0);break;case 18:for(Ae=11+Se(ne,je),je+=7;Ae-- >0;)vr.push(0);break;default:vr.push(mt),Qe<mt&&(Qe=mt);break}var Mr=vr.slice(0,ke),Vr=vr.slice(ke);for(st=ke;st<286;++st)Mr[st]=0;for(st=ie;st<30;++st)Vr[st]=0;return dt=ve(Mr,Ze,286),Tt=ve(Vr,Vt,30),je}function Ve(ne,je){if(ne[0]==3&&!(ne[1]&3))return[w0(je),2];for(var ke=0,ie=0,ge=UI(je||1<<18),Ae=0,Ge=ge.length>>>0,rt=0,Qe=0;(ie&1)==0;){if(ie=Oe(ne,ke),ke+=3,ie>>>1)ie>>1==1?(rt=9,Qe=5):(ke=Ht(ne,ke),rt=dt,Qe=Tt);else{ke&7&&(ke+=8-(ke&7));var tt=ne[ke>>>3]|ne[(ke>>>3)+1]<<8;if(ke+=32,tt>0)for(!je&&Ge<Ae+tt&&(ge=Ye(ge,Ae+tt),Ge=ge.length);tt-- >0;)ge[Ae++]=ne[ke>>>3],ke+=8;continue}for(;;){!je&&Ge<Ae+32767&&(ge=Ye(ge,Ae+32767),Ge=ge.length);var Ke=we(ne,ke,rt),Le=ie>>>1==1?Fe[Ke]:Ze[Ke];if(ke+=Le&15,Le>>>=4,(Le>>>8&255)===0)ge[Ae++]=Le;else{if(Le==256)break;Le-=257;var st=Le<8?0:Le-4>>2;st>5&&(st=0);var mt=Ae+K[Le];st>0&&(mt+=we(ne,ke,st),ke+=st),Ke=we(ne,ke,Qe),Le=ie>>>1==1?$e[Ke]:Vt[Ke],ke+=Le&15,Le>>>=4;var Ot=Le<4?0:Le-2>>1,Lt=oe[Le];for(Ot>0&&(Lt+=we(ne,ke,Ot),ke+=Ot),!je&&Ge<mt&&(ge=Ye(ge,mt+100),Ge=ge.length);Ae<mt;)ge[Ae]=ge[Ae-Lt],++Ae}}}return je?[ge,ke+7>>>3]:[ge.slice(0,Ae),ke+7>>>3]}function jt(ne,je){var ke=ne.slice(ne.l||0),ie=Ve(ke,je);return ne.l+=ie[1],ie[0]}function gr(ne,je){if(ne)typeof console<"u"&&console.error(je);else throw new Error(je)}function nr(ne,je){var ke=ne;To(ke,0);var ie=[],ge=[],Ae={FileIndex:ie,FullPaths:ge};_(Ae,{root:je.root});for(var Ge=ke.length-4;(ke[Ge]!=80||ke[Ge+1]!=75||ke[Ge+2]!=5||ke[Ge+3]!=6)&&Ge>=0;)--Ge;ke.l=Ge+4,ke.l+=4;var rt=ke.read_shift(2);ke.l+=6;var Qe=ke.read_shift(4);for(ke.l=Qe,Ge=0;Ge<rt;++Ge){ke.l+=20;var tt=ke.read_shift(4),Ke=ke.read_shift(4),Le=ke.read_shift(2),st=ke.read_shift(2),mt=ke.read_shift(2);ke.l+=8;var Ot=ke.read_shift(4),Lt=l(ke.slice(ke.l+Le,ke.l+Le+st));ke.l+=Le+st+mt;var vr=ke.l;ke.l=Ot+4,Ar(ke,tt,Ke,Ae,Lt),ke.l=vr}return Ae}function Ar(ne,je,ke,ie,ge){ne.l+=2;var Ae=ne.read_shift(2),Ge=ne.read_shift(2),rt=o(ne);if(Ae&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=ne.read_shift(4),tt=ne.read_shift(4),Ke=ne.read_shift(4),Le=ne.read_shift(2),st=ne.read_shift(2),mt="",Ot=0;Ot<Le;++Ot)mt+=String.fromCharCode(ne[ne.l++]);if(st){var Lt=l(ne.slice(ne.l,ne.l+st));(Lt[21589]||{}).mt&&(rt=Lt[21589].mt),((ge||{})[21589]||{}).mt&&(rt=ge[21589].mt)}ne.l+=st;var vr=ne.slice(ne.l,ne.l+tt);switch(Ge){case 8:vr=q(ne,Ke);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var Mr=!1;Ae&8&&(Qe=ne.read_shift(4),Qe==134695760&&(Qe=ne.read_shift(4),Mr=!0),tt=ne.read_shift(4),Ke=ne.read_shift(4)),tt!=je&&gr(Mr,"Bad compressed size: "+je+" != "+tt),Ke!=ke&&gr(Mr,"Bad uncompressed size: "+ke+" != "+Ke),an(ie,mt,vr,{unsafe:!0,mt:rt})}function Ir(ne,je){var ke=je||{},ie=[],ge=[],Ae=Rt(1),Ge=ke.compression?8:0,rt=0,Qe=0,tt=0,Ke=0,Le=0,st=ne.FullPaths[0],mt=st,Ot=ne.FileIndex[0],Lt=[],vr=0;for(Qe=1;Qe<ne.FullPaths.length;++Qe)if(mt=ne.FullPaths[Qe].slice(st.length),Ot=ne.FileIndex[Qe],!(!Ot.size||!Ot.content||mt=="Sh33tJ5")){var Mr=Ke,Vr=Rt(mt.length);for(tt=0;tt<mt.length;++tt)Vr.write_shift(1,mt.charCodeAt(tt)&127);Vr=Vr.slice(0,Vr.l),Lt[Le]=ble.buf(Ot.content,0);var Mn=Ot.content;Ge==8&&(Mn=V(Mn)),Ae=Rt(30),Ae.write_shift(4,67324752),Ae.write_shift(2,20),Ae.write_shift(2,rt),Ae.write_shift(2,Ge),Ot.mt?i(Ae,Ot.mt):Ae.write_shift(4,0),Ae.write_shift(-4,Lt[Le]),Ae.write_shift(4,Mn.length),Ae.write_shift(4,Ot.content.length),Ae.write_shift(2,Vr.length),Ae.write_shift(2,0),Ke+=Ae.length,ie.push(Ae),Ke+=Vr.length,ie.push(Vr),Ke+=Mn.length,ie.push(Mn),Ae=Rt(46),Ae.write_shift(4,33639248),Ae.write_shift(2,0),Ae.write_shift(2,20),Ae.write_shift(2,rt),Ae.write_shift(2,Ge),Ae.write_shift(4,0),Ae.write_shift(-4,Lt[Le]),Ae.write_shift(4,Mn.length),Ae.write_shift(4,Ot.content.length),Ae.write_shift(2,Vr.length),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(4,0),Ae.write_shift(4,Mr),vr+=Ae.l,ge.push(Ae),vr+=Vr.length,ge.push(Vr),++Le}return Ae=Rt(22),Ae.write_shift(4,101010256),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,Le),Ae.write_shift(2,Le),Ae.write_shift(4,vr),Ae.write_shift(4,Ke),Ae.write_shift(2,0),oo([oo(ie),oo(ge),Ae])}var Xt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qt(ne,je){if(ne.ctype)return ne.ctype;var ke=ne.name||"",ie=ke.match(/\.([^\.]+)$/);return ie&&Xt[ie[1]]||je&&(ie=(ke=je).match(/[\.\\]([^\.\\])+$/),ie&&Xt[ie[1]])?Xt[ie[1]]:"application/octet-stream"}function mr(ne){for(var je=tg(ne),ke=[],ie=0;ie<je.length;ie+=76)ke.push(je.slice(ie,ie+76));return ke.join(`\r
`)+`\r
`}function Fr(ne){var je=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var Ke=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(Ke.length==1?"0"+Ke:Ke)});je=je.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),je.charAt(0)==`
`&&(je="=0D"+je.slice(1)),je=je.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ke=[],ie=je.split(`\r
`),ge=0;ge<ie.length;++ge){var Ae=ie[ge];if(Ae.length==0){ke.push("");continue}for(var Ge=0;Ge<Ae.length;){var rt=76,Qe=Ae.slice(Ge,Ge+rt);Qe.charAt(rt-1)=="="?rt--:Qe.charAt(rt-2)=="="?rt-=2:Qe.charAt(rt-3)=="="&&(rt-=3),Qe=Ae.slice(Ge,Ge+rt),Ge+=rt,Ge<Ae.length&&(Qe+="="),ke.push(Qe)}}return ke.join(`\r
`)}function fn(ne){for(var je=[],ke=0;ke<ne.length;++ke){for(var ie=ne[ke];ke<=ne.length&&ie.charAt(ie.length-1)=="=";)ie=ie.slice(0,ie.length-1)+ne[++ke];je.push(ie)}for(var ge=0;ge<je.length;++ge)je[ge]=je[ge].replace(/[=][0-9A-Fa-f]{2}/g,function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))});return vc(je.join(`\r
`))}function Br(ne,je,ke){for(var ie="",ge="",Ae="",Ge,rt=0;rt<10;++rt){var Qe=je[rt];if(!Qe||Qe.match(/^\s*$/))break;var tt=Qe.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":ie=tt[2].trim();break;case"content-type":Ae=tt[2].trim();break;case"content-transfer-encoding":ge=tt[2].trim();break}}switch(++rt,ge.toLowerCase()){case"base64":Ge=vc(Nc(je.slice(rt).join("")));break;case"quoted-printable":Ge=fn(je.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ge)}var Ke=an(ne,ie.slice(ke.length),Ge,{unsafe:!0});Ae&&(Ke.ctype=Ae)}function Qr(ne,je){if(X(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ke=je&&je.root||"",ie=(Pn&&Buffer.isBuffer(ne)?ne.toString("binary"):X(ne)).split(`\r
`),ge=0,Ae="";for(ge=0;ge<ie.length;++ge)if(Ae=ie[ge],!!/^Content-Location:/i.test(Ae)&&(Ae=Ae.slice(Ae.indexOf("file")),ke||(ke=Ae.slice(0,Ae.lastIndexOf("/")+1)),Ae.slice(0,ke.length)!=ke))for(;ke.length>0&&(ke=ke.slice(0,ke.length-1),ke=ke.slice(0,ke.lastIndexOf("/")+1),Ae.slice(0,ke.length)!=ke););var Ge=(ie[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var rt="--"+(Ge[1]||""),Qe=[],tt=[],Ke={FileIndex:Qe,FullPaths:tt};_(Ke);var Le,st=0;for(ge=0;ge<ie.length;++ge){var mt=ie[ge];mt!==rt&&mt!==rt+"--"||(st++&&Br(Ke,ie.slice(Le,ge),ke),Le=ge)}return Ke}function ir(ne,je){var ke=je||{},ie=ke.boundary||"SheetJS";ie="------="+ie;for(var ge=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ie.slice(2)+'"',"","",""],Ae=ne.FullPaths[0],Ge=Ae,rt=ne.FileIndex[0],Qe=1;Qe<ne.FullPaths.length;++Qe)if(Ge=ne.FullPaths[Qe].slice(Ae.length),rt=ne.FileIndex[Qe],!(!rt.size||!rt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vr){return"_x"+vr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vr){return"_u"+vr.charCodeAt(0).toString(16)+"_"});for(var tt=rt.content,Ke=Pn&&Buffer.isBuffer(tt)?tt.toString("binary"):X(tt),Le=0,st=Math.min(1024,Ke.length),mt=0,Ot=0;Ot<=st;++Ot)(mt=Ke.charCodeAt(Ot))>=32&&mt<128&&++Le;var Lt=Le>=st*4/5;ge.push(ie),ge.push("Content-Location: "+(ke.root||"file:///C:/SheetJS/")+Ge),ge.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),ge.push("Content-Type: "+Qt(rt,Ge)),ge.push(""),ge.push(Lt?Fr(Ke):mr(Ke))}return ge.push(ie+`--\r
`),ge.join(`\r
`)}function qn(ne){var je={};return _(je,ne),je}function an(ne,je,ke,ie){var ge=ie&&ie.unsafe;ge||_(ne);var Ae=!ge&&Gr.find(ne,je);if(!Ae){var Ge=ne.FullPaths[0];je.slice(0,Ge.length)==Ge?Ge=je:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+je).replace("//","/")),Ae={name:s(je),type:2},ne.FileIndex.push(Ae),ne.FullPaths.push(Ge),ge||Gr.utils.cfb_gc(ne)}return Ae.content=ke,Ae.size=ke?ke.length:0,ie&&(ie.CLSID&&(Ae.clsid=ie.CLSID),ie.mt&&(Ae.mt=ie.mt),ie.ct&&(Ae.ct=ie.ct)),Ae}function wn(ne,je){_(ne);var ke=Gr.find(ne,je);if(ke){for(var ie=0;ie<ne.FileIndex.length;++ie)if(ne.FileIndex[ie]==ke)return ne.FileIndex.splice(ie,1),ne.FullPaths.splice(ie,1),!0}return!1}function Tr(ne,je,ke){_(ne);var ie=Gr.find(ne,je);if(ie){for(var ge=0;ge<ne.FileIndex.length;++ge)if(ne.FileIndex[ge]==ie)return ne.FileIndex[ge].name=s(ke),ne.FullPaths[ge]=ke,!0}return!1}function zr(ne){I(ne,!0)}return t.find=C,t.read=E,t.parse=u,t.write=ee,t.writeFile=re,t.utils={cfb_new:qn,cfb_add:an,cfb_del:wn,cfb_mov:Tr,cfb_gc:zr,ReadShift:ix,CheckField:aR,prep_blob:To,bconcat:oo,use_zlib:T,_deflateRaw:qe,_inflateRaw:jt,consts:J},t})();function wle(e){return typeof e=="string"?pb(e):Array.isArray(e)?Goe(e):e}function Sg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=pb(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Au(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([wle(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=D0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Nle(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Xs(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function KI(e,t){for(var r=[],a=Xs(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function xb(e){for(var t=[],r=Xs(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function gb(e){for(var t=[],r=Xs(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function jle(e){for(var t=[],r=Xs(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var xy=new Date(1899,11,30,0,0,0);function qi(e,t){var r=e.getTime(),a=xy.getTime()+(e.getTimezoneOffset()-xy.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var MM=new Date,kle=xy.getTime()+(MM.getTimezoneOffset()-xy.getTimezoneOffset())*6e4,XI=MM.getTimezoneOffset();function vb(e){var t=new Date;return t.setTime(e*24*60*60*1e3+kle),t.getTimezoneOffset()!==XI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-XI)*6e4),t}function Sle(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var YI=new Date("2017-02-19T19:06:09.000Z"),RM=isNaN(YI.getFullYear())?new Date("2/19/17"):YI,_le=RM.getFullYear()==2017;function us(e,t){var r=new Date(e);if(_le)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(RM.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Eh(e,t){if(Pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Au(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Au(SM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Au(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Au(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function fs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=fs(e[r]));return t}function Ws(e,t){for(var r="";r.length<t;)r+=e;return r}function Xd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var Ale=["january","february","march","april","may","june","july","august","september","october","november","december"];function em(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Ale.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Cle=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function BM(e){return e?e.content&&e.type?Eh(e.content,!0):e.data?Xm(e.data):e.asNodeBuffer&&Pn?Xm(e.asNodeBuffer().toString("binary")):e.asBinary?Xm(e.asBinary()):e._data&&e._data.getContent?Xm(Eh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function UM(e){if(!e)return null;if(e.data)return RI(e.data);if(e.asNodeBuffer&&Pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?RI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Ele(e){return e&&e.name.slice(-4)===".bin"?UM(e):BM(e)}function Xc(e,t){for(var r=e.FullPaths||Xs(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function x3(e,t){var r=Xc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function yi(e,t,r){if(!r)return Ele(x3(e,t));if(!t)return null;try{return yi(e,t)}catch{return null}}function yc(e,t,r){if(!r)return BM(x3(e,t));if(!t)return null;try{return yc(e,t)}catch{return null}}function Tle(e,t,r){return UM(x3(e,t))}function QI(e){for(var t=e.FullPaths||Xs(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function Cn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Pn?a=Pf(r):a=Koe(r),Gr.utils.cfb_add(e,t,a)}Gr.utils.cfb_add(e,t,r)}else e.file(t,r)}function g3(){return Gr.utils.cfb_new()}function qM(e,t){switch(t.type){case"base64":return Gr.read(e,{type:"base64"});case"binary":return Gr.read(e,{type:"binary"});case"buffer":case"array":return Gr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Qm(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var di=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ole=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,JI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Ple=/<[^>]*>/g,dl=di.match(JI)?JI:Ple,Ile=/<\w*:/,Dle=/<(\/?)\w+:/;function hn(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(Ole),l=0,c="",d=0,u="",f="",m=1;if(o)for(d=0;d!=o.length;++d){for(f=o[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(m=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+m,f.length-m),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[p]&&u.slice(l-3,l)=="ext")continue;a[p]=c,a[p.toLowerCase()]=c}}return a}function Bu(e){return e.replace(Dle,"<$1")}var $M={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},v3=xb($M),la=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return $M[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),y3=/[&<>'"]/g,Lle=/[\u0000-\u0008\u000b-\u001f]/g;function Ea(e){var t=e+"";return t.replace(y3,function(r){return v3[r]}).replace(Lle,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ZI(e){return Ea(e).replace(/ /g,"_x0020_")}var zM=/[\u0000-\u001f]/g;function b3(e){var t=e+"";return t.replace(y3,function(r){return v3[r]}).replace(/\n/g,"<br/>").replace(zM,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Fle(e){var t=e+"";return t.replace(y3,function(r){return v3[r]}).replace(zM,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var e8=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function Mle(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function cs(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function vj(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function t8(e){var t=w0(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function r8(e){return Pf(e,"binary").toString("utf8")}var Ev="foo bar baz",Ba=Pn&&(r8(Ev)==vj(Ev)&&r8||t8(Ev)==vj(Ev)&&t8)||vj,Au=Pn?function(e){return Pf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},ng=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),HM=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),Rle=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Ble=/<\/?(?:vt:)?variant>/g,Ule=/<(?:vt:)([^>]*)>([\s\S]*)</;function n8(e,t){var r=hn(e),a=e.match(Rle(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(Ble,"").match(Ule);o&&s.push({v:Ba(o[2]),t:o[1]})}),s}var WM=/(^\s|\s$|\n)/;function Oo(e,t){return"<"+e+(t.match(WM)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ag(e){return Xs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ur(e,t,r){return"<"+e+(r!=null?ag(r):"")+(t!=null?(t.match(WM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function kk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function qle(e,t){switch(typeof e){case"string":var r=ur("vt:lpwstr",Ea(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ur((e|0)==e?"vt:i4":"vt:r8",Ea(String(e)));case"boolean":return ur("vt:bool",e?"true":"false")}if(e instanceof Date)return ur("vt:filetime",kk(e));throw new Error("Unable to serialize "+e)}function w3(e){if(Pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ba(D0(h3(e)));throw new Error("Bad input format: expected Buffer or string")}var sg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Bh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],mc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function $le(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function zle(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var a8=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},s8=Pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Pf(t)})):a8(e)}:a8,i8=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(pf(e,s)));return a.join("").replace(_l,"")},N3=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(_l,""):i8(e,t,r)}:i8,o8=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},VM=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):o8(e,t,r)}:o8,l8=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(cp(e,s)));return a.join("")},_g=Pn?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):l8(t,r,a)}:l8,GM=function(e,t){var r=xc(e,t);return r>0?_g(e,t+4,t+4+r-1):""},KM=GM,XM=function(e,t){var r=xc(e,t);return r>0?_g(e,t+4,t+4+r-1):""},YM=XM,QM=function(e,t){var r=2*xc(e,t);return r>0?_g(e,t+4,t+4+r-1):""},JM=QM,ZM=function(t,r){var a=xc(t,r);return a>0?N3(t,r+4,r+4+a):""},eR=ZM,tR=function(e,t){var r=xc(e,t);return r>0?_g(e,t+4,t+4+r):""},rR=tR,nR=function(e,t){return $le(e,t)},gy=nR,j3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Pn&&(KM=function(t,r){if(!Buffer.isBuffer(t))return GM(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},YM=function(t,r){if(!Buffer.isBuffer(t))return XM(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},JM=function(t,r){if(!Buffer.isBuffer(t))return QM(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},eR=function(t,r){if(!Buffer.isBuffer(t))return ZM(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},rR=function(t,r){if(!Buffer.isBuffer(t))return tR(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},gy=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):nR(t,r)},j3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var cp=function(e,t){return e[t]},pf=function(e,t){return e[t+1]*256+e[t]},Hle=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},xc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},th=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Wle=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ix(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,Pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(pf(this,d)),d+=2;e*=2;break;case"utf8":r=_g(this,this.l,this.l+e);break;case"utf16le":e*=2,r=N3(this,this.l,this.l+e);break;case"wstr":return ix.call(this,e,"dbcs");case"lpstr-ansi":r=KM(this,this.l),e=4+xc(this,this.l);break;case"lpstr-cp":r=YM(this,this.l),e=4+xc(this,this.l);break;case"lpwstr":r=JM(this,this.l),e=4+2*xc(this,this.l);break;case"lpp4":e=4+xc(this,this.l),r=eR(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+xc(this,this.l),r=rR(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=cp(this,this.l+e++))!==0;)i.push(Cv(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=pf(this,this.l+e))!==0;)i.push(Cv(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=cp(this,d),this.l=d+1,l=ix.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Cv(pf(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=cp(this,d),this.l=d+1,l=ix.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Cv(cp(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=cp(this,this.l),this.l++,a;case 2:return a=(t==="i"?Hle:pf)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?th:Wle)(this,this.l),this.l+=4,a):(s=xc(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=gy(this,this.l):s=gy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=VM(this,this.l,e);break}}return this.l+=e,r}var Vle=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Gle=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Kle=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Xle(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Kle(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Vle(this,t,this.l);break;case 8:if(a=8,r==="f"){zle(this,t,this.l);break}case 16:break;case-4:a=4,Gle(this,t,this.l);break}return this.l+=a,this}function aR(e,t){var r=VM(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function To(e,t){e.l=t,e.read_shift=ix,e.chk=aR,e.write_shift=Xle}function cl(e,t){e.l+=t}function Rt(e){var t=w0(e);return To(t,0),t}function If(e,t,r){if(e){var a,s,i;To(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=ug[l]||ug[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function Xl(){var e=[],t=Pn?256:2048,r=function(d){var u=Rt(d);return To(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),oo(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Wt(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=ug[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&j3(r)&&e.push(r)}}function ox(e,t,r){var a=fs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function c8(e,t,r){var a=fs(e);return a.s=ox(a.s,t.s,r),a.e=ox(a.e,t.s,r),a}function lx(e,t){if(e.cRel&&e.c<0)for(e=fs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=fs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=un(e);return!e.cRel&&e.cRel!=null&&(r=Jle(r)),!e.rRel&&e.rRel!=null&&(r=Yle(r)),r}function yj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ds(e.s.c)+":"+(e.e.cRel?"":"$")+Ds(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+li(e.s.r)+":"+(e.e.rRel?"":"$")+li(e.e.r):lx(e.s,t.biff)+":"+lx(e.e,t.biff)}function k3(e){return parseInt(Qle(e),10)-1}function li(e){return""+(e+1)}function Yle(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Qle(e){return e.replace(/\$(\d+)$/,"$1")}function S3(e){for(var t=Zle(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Ds(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Jle(e){return e.replace(/^([A-Z])/,"$$$1")}function Zle(e){return e.replace(/^\$([A-Z])/,"$1")}function ece(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ls(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function un(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ql(e){var t=e.indexOf(":");return t==-1?{s:Ls(e),e:Ls(e)}:{s:Ls(e.slice(0,t)),e:Ls(e.slice(t+1))}}function kn(e,t){return typeof t>"u"||typeof t=="number"?kn(e.s,e.e):(typeof e!="string"&&(e=un(e)),typeof t!="string"&&(t=un(t)),e==t?e:e+":"+t)}function da(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function d8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=id(e.z,r?qi(t):t)}catch{}try{return e.w=id((e.XF||{}).numFmtId||(r?14:0),r?qi(t):t)}catch{return""+t}}function Cf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Df[e.v]||e.v:t==null?d8(e,e.v):d8(e,t))}function L0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function sR(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ls(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=da(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},y=o+f,v=l+m;if(d.s.r>y&&(d.s.r=y),d.s.c>v&&(d.s.c=v),d.e.r<y&&(d.e.r=y),d.e.c<v&&(d.e.c=v),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||rn[14],a.cellDates?(p.t="d",p.w=id(p.z,qi(p.v))):(p.t="n",p.v=qi(p.v),p.w=id(p.z,p.v))):p.t="s";if(s)i[y]||(i[y]=[]),i[y][v]&&i[y][v].z&&(p.z=i[y][v].z),i[y][v]=p;else{var g=un({c:v,r:y});i[g]&&i[g].z&&(p.z=i[g].z),i[g]=p}}}return d.s.c<1e7&&(i["!ref"]=kn(d)),i}function mm(e,t){return sR(null,e,t)}function tce(e){return e.read_shift(4,"i")}function Yd(e,t){return t||(t=Rt(4)),t.write_shift(4,e),t}function ll(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function co(e,t){var r=!1;return t==null&&(r=!0,t=Rt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function rce(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function nce(e,t){return t||(t=Rt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function _3(e,t){var r=e.l,a=e.read_shift(1),s=ll(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(rce(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function ace(e,t){var r=!1;return t==null&&(r=!0,t=Rt(15+4*e.t.length)),t.write_shift(1,0),co(e.t,t),r?t.slice(0,t.l):t}var sce=_3;function ice(e,t){var r=!1;return t==null&&(r=!0,t=Rt(23+4*e.t.length)),t.write_shift(1,1),co(e.t,t),t.write_shift(4,1),nce({},t),r?t.slice(0,t.l):t}function cd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Uh(e,t){return t==null&&(t=Rt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function qh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $h(e,t){return t==null&&(t=Rt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var oce=ll,iR=co;function A3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function vy(e,t){var r=!1;return t==null&&(r=!0,t=Rt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var lce=ll,Sk=A3,C3=vy;function E3(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?gy([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):th(t,0)>>2;return r?s/100:s}function oR(e,t){t==null&&(t=Rt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function lR(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function cce(e,t){return t||(t=Rt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var zh=lR,xm=cce;function sl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Th(e,t){return(t||Rt(8)).write_shift(8,e,"f")}function dce(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=ph[s];d&&(t.rgb=og(d));break;case 2:t.rgb=og([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function yy(e,t){if(t||(t=Rt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function uce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function fce(e,t){t||(t=Rt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function cR(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function hce(e){return cR(e,1)}function pce(e){return cR(e,2)}var T3=2,Vl=3,Tv=11,u8=12,by=19,Ov=64,mce=65,xce=71,gce=4108,vce=4126,so=80,dR=81,yce=[so,dR],_k={1:{n:"CodePage",t:T3},2:{n:"Category",t:so},3:{n:"PresentationFormat",t:so},4:{n:"ByteCount",t:Vl},5:{n:"LineCount",t:Vl},6:{n:"ParagraphCount",t:Vl},7:{n:"SlideCount",t:Vl},8:{n:"NoteCount",t:Vl},9:{n:"HiddenCount",t:Vl},10:{n:"MultimediaClipCount",t:Vl},11:{n:"ScaleCrop",t:Tv},12:{n:"HeadingPairs",t:gce},13:{n:"TitlesOfParts",t:vce},14:{n:"Manager",t:so},15:{n:"Company",t:so},16:{n:"LinksUpToDate",t:Tv},17:{n:"CharacterCount",t:Vl},19:{n:"SharedDoc",t:Tv},22:{n:"HyperlinksChanged",t:Tv},23:{n:"AppVersion",t:Vl,p:"version"},24:{n:"DigSig",t:mce},26:{n:"ContentType",t:so},27:{n:"ContentStatus",t:so},28:{n:"Language",t:so},29:{n:"Version",t:so},255:{},2147483648:{n:"Locale",t:by},2147483651:{n:"Behavior",t:by},1919054434:{}},Ak={1:{n:"CodePage",t:T3},2:{n:"Title",t:so},3:{n:"Subject",t:so},4:{n:"Author",t:so},5:{n:"Keywords",t:so},6:{n:"Comments",t:so},7:{n:"Template",t:so},8:{n:"LastAuthor",t:so},9:{n:"RevNumber",t:so},10:{n:"EditTime",t:Ov},11:{n:"LastPrinted",t:Ov},12:{n:"CreatedDate",t:Ov},13:{n:"ModifiedDate",t:Ov},14:{n:"PageCount",t:Vl},15:{n:"WordCount",t:Vl},16:{n:"CharCount",t:Vl},17:{n:"Thumbnail",t:xce},18:{n:"Application",t:so},19:{n:"DocSecurity",t:Vl},255:{},2147483648:{n:"Locale",t:by},2147483651:{n:"Behavior",t:by},1919054434:{}},f8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},bce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function wce(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Nce=wce([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ph=fs(Nce),Df={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},uR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ck={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Pv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function O3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function jce(e){var t=O3();if(!e||!e.match)return t;var r={};if((e.match(dl)||[]).forEach(function(a){var s=hn(a);switch(s[0].replace(Ile,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Ck[s.ContentType]]!==void 0&&t[Ck[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function fR(e,t){var r=jle(Ck),a=[],s;a[a.length]=di,a[a.length]=ur("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return ur("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=ur("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Pv[c][t.bookType]||Pv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=ur("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Pv[c][t.bookType]||Pv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=ur("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Fn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ig(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function cx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(dl)||[]).forEach(function(s){var i=hn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Qm(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function jp(e){var t=[di,ur("Relationships",null,{xmlns:Bi.RELS})];return Xs(e["!id"]).forEach(function(r){t[t.length]=ur("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ca(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[Fn.HLINK,Fn.XPATH,Fn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var kce="application/vnd.oasis.opendocument.spreadsheet";function Sce(e,t){for(var r=w3(e),a,s;a=sg.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=hn(a[0],!1),s.path=="/"&&s.type!==kce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function _ce(e){var t=[di];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function h8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ace(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Cce(e){var t=[di];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(h8(e[r][0],e[r][1])),t.push(Ace("",e[r][0]));return t.push(h8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function hR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+fy.version+"</meta:generator></office:meta></office:document-meta>"}var rd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Ece=(function(){for(var e=new Array(rd.length),t=0;t<rd.length;++t){var r=rd[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function pR(e){var t={};e=Ba(e);for(var r=0;r<rd.length;++r){var a=rd[r],s=e.match(Ece[r]);s!=null&&s.length>0&&(t[a[1]]=la(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=us(t[a[1]]))}return t}function bj(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Ea(t),a[a.length]=r?ur(e,t,r):Oo(e,t))}function mR(e,t){var r=t||{},a=[di,ur("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&bj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:kk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&bj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:kk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=rd.length;++i){var o=rd[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&bj(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var mh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],xR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function gR(e,t,r,a){var s=[];if(typeof e=="string")s=n8(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?n8(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function Tce(e,t,r){var a={};return t||(t={}),e=Ba(e),mh.forEach(function(s){var i=(e.match(ng(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=la(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&gR(a.HeadingPairs,a.TitlesOfParts,t,r),t}function vR(e){var t=[],r=ur;return e||(e={}),e.Application="SheetJS",t[t.length]=di,t[t.length]=ur("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),mh.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Ea(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Ea(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Oce=/<[^>]+>[^<]*/g;function Pce(e,t){var r={},a="",s=e.match(Oce);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=hn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=la(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=la(u);break;case"bool":r[a]=cs(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=us(u);break;case"cy":case"error":r[a]=la(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function yR(e){var t=[di,ur("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!e)return t.join("");var r=1;return Xs(e).forEach(function(s){++r,t[t.length]=ur("property",qle(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ea(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Ek={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},wj;function Ice(e,t,r){wj||(wj=xb(Ek)),t=wj[t]||t,e[t]=r}function Dce(e,t){var r=[];return Xs(Ek).map(function(a){for(var s=0;s<rd.length;++s)if(rd[s][1]==a)return rd[s];for(s=0;s<mh.length;++s)if(mh[s][1]==a)return mh[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];a[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Oo(Ek[a[1]]||a[1],s))}}),ur("DocumentProperties",r.join(""),{xmlns:mc.o})}function Lce(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Xs(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<rd.length;++o)if(i==rd[o][1])return;for(o=0;o<mh.length;++o)if(i==mh[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(ur(ZI(i),l,{"dt:dt":c}))}}),t&&Xs(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(ur(ZI(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+mc.o+'">'+s.join("")+"</"+a+">"}function P3(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Fce(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=Rt(8);return o.write_shift(4,a),o.write_shift(4,s),o}function bR(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function wR(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function NR(e,t,r){return t===31?wR(e):bR(e,t,r)}function Tk(e,t,r){return NR(e,t,r===!1?0:4)}function Mce(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return NR(e,t,0)}function Rce(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(_l,""),e.l-s&2&&(e.l+=2)}return r}function Bce(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(_l,"");return r}function Uce(e){var t=e.l,r=wy(e,dR);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=wy(e,Vl);return[r,a]}function qce(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(Uce(e));return r}function p8(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(_l,"").replace(Ym,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function jR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function $ce(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function wy(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==u8&&a!==t&&yce.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===u8?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return bR(e,a,4).replace(_l,"");case 31:return wR(e);case 64:return P3(e);case 65:return jR(e);case 71:return $ce(e);case 80:return Tk(e,a,!i.raw).replace(_l,"");case 81:return Mce(e,a).replace(_l,"");case 4108:return qce(e);case 4126:case 4127:return a==4127?Rce(e):Bce(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function m8(e,t){var r=Rt(4),a=Rt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Rt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=Fce(t);break;case 31:case 80:for(a=Rt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return oo([r,a])}function x8(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),f=e.read_shift(4);i[o]=[u,f+r]}i.sort(function(w,j){return w[1]-j[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var y=t[i[o][0]];if(m[y.n]=wy(e,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:zd(l=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(i[o][0]===1){if(l=m.CodePage=wy(e,T3),zd(l),c!==-1){var v=e.l;e.l=i[c][1],d=p8(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=p8(e,l)}else{var g=d[i[o][0]],b;switch(e[e.l]){case 65:e.l+=4,b=jR(e);break;case 30:e.l+=4,b=Tk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,b=Tk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,b=e.read_shift(4,"i");break;case 19:e.l+=4,b=e.read_shift(4);break;case 5:e.l+=4,b=e.read_shift(8,"f");break;case 11:e.l+=4,b=ni(e,4);break;case 64:e.l+=4,b=us(P3(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=b}}return e.l=r+a,m}var kR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function zce(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function g8(e,t,r){var a=Rt(8),s=[],i=[],o=8,l=0,c=Rt(8),d=Rt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=Rt(8),d.write_shift(4,0),s.unshift(d);var u=[Rt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Rt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=oo(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(kR.indexOf(e[l][0])>-1||xR.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var y=r[p];if(y.p=="version"&&typeof m=="string"){var v=m.split(".");m=(+v[0]<<16)+(+v[1]||0)}c=m8(y.t,m)}else{var g=zce(m);g==-1&&(g=31,m=String(m)),c=m8(g,m)}i.push(c),d=Rt(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,b),b+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),oo([a].concat(s).concat(i))}function v8(e,t,r){var a=e.content;if(!a)return{};To(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Gr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=x8(a,t),m={SystemIdentifier:d};for(var p in f)m[p]=f[p];if(m.FMTID=i,s===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var y;try{y=x8(a,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[i,o],m}function y8(e,t,r,a,s,i){var o=Rt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Gr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=g8(e,r,a);if(l.push(c),s){var d=g8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return oo(l)}function Zf(e,t){return e.read_shift(t),null}function Hce(e,t){t||(t=Rt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Wce(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function ni(e,t){return e.read_shift(t)===1}function wl(e,t){return t||(t=Rt(2)),t.write_shift(2,+!!e),t}function bi(e){return e.read_shift(2,"u")}function Yc(e,t){return t||(t=Rt(2)),t.write_shift(2,e),t}function SR(e,t){return Wce(e,t,bi)}function Vce(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function _R(e,t,r){return r||(r=Rt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Ag(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function Gce(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Kce(e){var t=e.t||"",r=Rt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Rt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return oo(s)}function Oh(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Cg(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Oh(e,a,r)}function Hh(e,t,r){if(r.biff>5)return Cg(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function AR(e,t,r){return r||(r=Rt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Xce(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Yce(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(_l,"");return a&&(e.l+=24),s}function Qce(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(_l,"");return r+o}function Jce(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Yce(e);case"0303000000000000c000000000000046":return Qce(e);default:throw new Error("Unsupported Moniker "+r)}}function Iv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(_l,""):"";return r}function b8(e,t){t||(t=Rt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Zce(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,f;s&16&&(i=Iv(e,r-e.l)),s&128&&(o=Iv(e,r-e.l)),(s&257)===257&&(l=Iv(e,r-e.l)),(s&257)===1&&(c=Jce(e,r-e.l)),s&8&&(d=Iv(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(f=P3(e)),e.l=r;var m=o||l||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return u&&(p.guid=u),f&&(p.time=f),i&&(p.Tooltip=i),p}function ede(e){var t=Rt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),b8(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&b8(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function CR(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function ER(e,t){var r=CR(e);return r[3]=0,r}function Uu(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Ph(e,t,r,a){return a||(a=Rt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function tde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function rde(e,t,r){return t===0?"":Hh(e,t,r)}function nde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function TR(e){var t=e.read_shift(2),r=E3(e);return[t,r]}function ade(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Ag(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function yb(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function OR(e,t){return t||(t=Rt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function PR(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var sde=PR;function IR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function ide(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function ode(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ko(e){e.l+=2,e.l+=e.read_shift(2)}var lde={0:Ko,4:Ko,5:Ko,6:Ko,7:ode,8:Ko,9:Ko,10:Ko,11:Ko,12:Ko,13:ide,14:Ko,15:Ko,16:Ko,17:Ko,18:Ko,19:Ko,20:Ko,21:IR};function cde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(lde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function Dv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function I3(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Rt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function dde(e,t){return t===0||e.read_shift(2),1200}function ude(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Hh(e,0,r);return e.read_shift(t+a-e.l),s}function fde(e,t){var r=!t||t.biff==8,a=Rt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function hde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function pde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Ag(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function mde(e,t){var r=!t||t.biff>=8?2:1,a=Rt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function xde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Gce(e));return i.Count=a,i.Unique=s,i}function gde(e,t){var r=Rt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=Kce(e[s]);var i=oo([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function vde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function yde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function bde(e){var t=tde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function wde(e){return e.read_shift(2),e.read_shift(4)}function w8(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function Nde(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function jde(){var e=Rt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function kde(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function Sde(e){var t=Rt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function _de(){}function Ade(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Ag(e,0,r),a}function Cde(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=Rt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function Ede(e){var t=Uu(e);return t.isst=e.read_shift(4),t}function Tde(e,t,r,a){var s=Rt(10);return Ph(e,t,a,s),s.write_shift(4,r),s}function Ode(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=Uu(e);r.biff==2&&e.l++;var i=Cg(e,a-e.l,r);return s.val=i,s}function Pde(e,t,r,a,s){var i=!s||s.biff==8,o=Rt(8+ +i+(1+i)*r.length);return Ph(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Ide(e,t,r){var a=e.read_shift(2),s=Hh(e,0,r);return[a,s]}function Dde(e,t,r,a){var s=r&&r.biff==5;a||(a=Rt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var Lde=Hh;function N8(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function Fde(e,t){var r=t.biff==8||!t.biff?4:2,a=Rt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function Mde(e){var t=e.read_shift(2),r=e.read_shift(2),a=TR(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function Rde(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(TR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function Bde(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function Ude(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=bce[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function qde(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=Ude(e,t,a.fStyle,r),a}function j8(e,t,r,a){var s=r&&r.biff==5;a||(a=Rt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function $de(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function zde(e){var t=Rt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function k8(e,t,r){var a=Uu(e);(r.biff==2||t==9)&&++e.l;var s=Vce(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function Hde(e,t,r,a,s,i){var o=Rt(8);return Ph(e,t,a,o),_R(r,i,o),o}function Wde(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=Uu(e),s=sl(e);return a.val=s,a}function Vde(e,t,r,a){var s=Rt(14);return Ph(e,t,a,s),Th(r,s),s}var S8=rde;function Gde(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Oh(e,i),l=[];a>e.l;)l.push(Cg(e));return[i,s,o,l]}function _8(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=ade(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Kde=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function A8(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Oh(e,o,r);s&32&&(d=Kde[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var f=a==e.l||l===0||!(u>0)?[]:cpe(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:f}}function DR(e,t,r){if(r.biff<8)return Xde(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(nde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Xde(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Ag(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Yde(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Oh(e,a,r),o=Oh(e,s,r);return[i,o]}function Qde(e,t,r){var a=PR(e);e.l++;var s=e.read_shift(1);return t-=8,[dpe(e,t,r),s,a]}function C8(e,t,r){var a=sde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,ope(e,t,r)]}function Jde(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Zde(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Hh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function eue(e,t,r){return Zde(e,t,r)}function tue(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(yb(e));return r}function rue(e){var t=Rt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)OR(e[r],t);return t}function nue(e,t,r){if(r&&r.biff<8)return sue(e,t,r);var a=IR(e),s=cde(e,t-22,a[1]);return{cmo:a,ft:s}}var aue={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function sue(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((aue[a]||cl)(e,t,r)),{cmo:[s,a,i],ft:o}}function iue(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Xce(e,6,r);var l=e.read_shift(2);e.read_shift(2),bi(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=Oh(e,e.lens[d+1]-e.lens[d]-1);if(s+=f,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function oue(e,t){var r=yb(e);e.l+=16;var a=Zce(e,t-24);return[r,a]}function lue(e){var t=Rt(24),r=Ls(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return oo([t,ede(e[1])])}function cue(e,t){e.read_shift(2);var r=yb(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(_l,""),[r,a]}function due(e){var t=e[1].Tooltip,r=Rt(10+2*(t.length+1));r.write_shift(2,2048);var a=Ls(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function uue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=f8[r]||r,r=e.read_shift(2),t[1]=f8[r]||r,t}function fue(e){return e||(e=Rt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function hue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ER(e));return r}function pue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(ER(e));return r}function mue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function LR(e,t,r){if(!r.cellStyles)return cl(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function xue(e,t){var r=Rt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function gue(e,t){var r={};return t<32||(e.l+=16,r.header=sl(e),r.footer=sl(e),e.l+=2),r}function vue(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function yue(e){for(var t=Rt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var bue=Uu,wue=SR,Nue=Cg;function jue(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function kue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=Uu(e);++e.l;var s=Hh(e,t-7,r);return a.t="str",a.val=s,a}function Sue(e){var t=Uu(e);++e.l;var r=sl(e);return t.t="n",t.val=r,t}function _ue(e,t,r){var a=Rt(15);return Pg(a,e,t),a.write_shift(8,r,"f"),a}function Aue(e){var t=Uu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Cue(e,t,r){var a=Rt(9);return Pg(a,e,t),a.write_shift(2,r),a}function Eue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Tue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Oue(e,t,r){var a=e.l+t,s=Uu(e),i=e.read_shift(2),o=Oh(e,i,r);return e.l=a,s.t="str",s.val=o,s}var Pue=[2,3,48,49,131,139,140,245],Ok=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=xb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=w0(1);switch(c.type){case"base64":u=vc(Nc(l));break;case"binary":u=vc(l);break;case"buffer":case"array":u=l;break}To(u,0);var f=u.read_shift(1),m=!!(f&136),p=!1,y=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,g=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(g=u.read_shift(2));var b=u.read_shift(2),w=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(w=e[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var j=[],N={},S=Math.min(u.length,f==2?521:g-10-(p?264:0)),E=y?32:11;u.l<S&&u[u.l]!=13;)switch(N={},N.name=eg.utils.decode(w,u.slice(u.l,u.l+E)).replace(/[\u0000\r\n].*$/g,""),u.l+=E,N.type=String.fromCharCode(u.read_shift(1)),f!=2&&!y&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),f==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),f!=2&&(u.l+=y?13:14),N.type){case"B":(!p||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var _=0,P=0;for(d[0]=[],P=0;P!=j.length;++P)d[0][P]=j[P].name;for(;v-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,d[++_]=[],P=0,P=0;P!=j.length;++P){var I=u.slice(u.l,u.l+j[P].len);u.l+=j[P].len,To(I,0);var U=eg.utils.decode(w,I);switch(j[P].type){case"C":U.trim().length&&(d[_][P]=U.replace(/\s+$/,""));break;case"D":U.length===8?d[_][P]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):d[_][P]=U;break;case"F":d[_][P]=parseFloat(U.trim());break;case"+":case"I":d[_][P]=y?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":d[_][P]=!0;break;case"N":case"F":d[_][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[_][P]="##MEMO##"+(y?parseInt(U.trim(),10):I.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(d[_][P]=+U||0);break;case"@":d[_][P]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":d[_][P]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":d[_][P]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[_][P]=-I.read_shift(-8,"f");break;case"B":if(p&&j[P].len==8){d[_][P]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[P].len;break;case"0":if(j[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[P].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=mm(r(l,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function s(l,c){try{return L0(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&zd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Xl(),f=Sy(l,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),y=l["!cols"]||[],v=0,g=0,b=0,w=1;for(v=0;v<m.length;++v){if(((y[v]||{}).DBF||{}).name){m[v]=y[v].DBF.name,++b;continue}if(m[v]!=null){if(++b,typeof m[v]=="number"&&(m[v]=m[v].toString(10)),typeof m[v]!="string")throw new Error("DBF Invalid column name "+m[v]+" |"+typeof m[v]+"|");if(m.indexOf(m[v])!==v){for(g=0;g<1024;++g)if(m.indexOf(m[v]+"_"+g)==-1){m[v]+="_"+g;break}}}}var j=da(l["!ref"]),N=[],S=[],E=[];for(v=0;v<=j.e.c-j.s.c;++v){var _="",P="",I=0,U=[];for(g=0;g<p.length;++g)p[g][v]!=null&&U.push(p[g][v]);if(U.length==0||m[v]==null){N[v]="?";continue}for(g=0;g<U.length;++g){switch(typeof U[g]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=U[g]instanceof Date?"D":"C";break;default:P="C"}I=Math.max(I,String(U[g]).length),_=_&&_!=P?"C":P}I>250&&(I=250),P=((y[v]||{}).DBF||{}).type,P=="C"&&y[v].DBF.len>I&&(I=y[v].DBF.len),_=="B"&&P=="N"&&(_="N",E[v]=y[v].DBF.dec,I=y[v].DBF.len),S[v]=_=="C"||P=="N"?I:i[_]||0,w+=S[v],N[v]=_}var C=u.next(32);for(C.write_shift(4,318902576),C.write_shift(4,p.length),C.write_shift(2,296+32*b),C.write_shift(2,w),v=0;v<4;++v)C.write_shift(4,0);for(C.write_shift(4,0|(+t[kM]||3)<<8),v=0,g=0;v<m.length;++v)if(m[v]!=null){var O=u.next(32),R=(m[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,R,"sbcs"),O.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),O.write_shift(4,g),O.write_shift(1,S[v]||i[N[v]]||0),O.write_shift(1,E[v]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),g+=S[v]||i[N[v]]||0}var z=u.next(264);for(z.write_shift(4,13),v=0;v<65;++v)z.write_shift(4,0);for(v=0;v<p.length;++v){var H=u.next(w);for(H.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(N[g]){case"L":H.write_shift(1,p[v][g]==null?63:p[v][g]?84:70);break;case"B":H.write_shift(8,p[v][g]||0,"f");break;case"N":var Q="0";for(typeof p[v][g]=="number"&&(Q=p[v][g].toFixed(E[g]||0)),b=0;b<S[g]-Q.length;++b)H.write_shift(1,32);H.write_shift(1,Q,"sbcs");break;case"D":p[v][g]?(H.write_shift(4,("0000"+p[v][g].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(p[v][g].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+p[v][g].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var J=String(p[v][g]!=null?p[v][g]:"").slice(0,S[g]);for(H.write_shift(1,J,"sbcs"),b=0;b<S[g]-J.length;++b)H.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),FR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Xs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var y=e[p];return typeof y=="number"?BI(y):y},a=function(m,p,y){var v=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return v==59?m:BI(v)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(Nc(m),p);case"binary":return i(m,p);case"buffer":return i(Pn&&Buffer.isBuffer(m)?m.toString("binary"):D0(m),p);case"array":return i(Eh(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var y=m.split(/[\n\r]+/),v=-1,g=-1,b=0,w=0,j=[],N=[],S=null,E={},_=[],P=[],I=[],U=0,C;for(+p.codepage>=0&&zd(+p.codepage);b!==y.length;++b){U=0;var O=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),R=O.replace(/;;/g,"\0").split(";").map(function(B){return B.replace(/\u0000/g,";")}),z=R[0],H;if(O.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&N.push(O.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,J=!1,re=!1,X=!1,ee=-1,W=-1;for(w=1;w<R.length;++w)switch(R[w].charAt(0)){case"A":break;case"X":g=parseInt(R[w].slice(1))-1,J=!0;break;case"Y":for(v=parseInt(R[w].slice(1))-1,J||(g=0),C=j.length;C<=v;++C)j[C]=[];break;case"K":H=R[w].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(Xd(H))?isNaN(em(H).getDate())||(H=us(H)):(H=Xd(H),S!==null&&hm(S)&&(H=vb(H))),Q=!0;break;case"E":X=!0;var T=kp(R[w].slice(1),{r:v,c:g});j[v][g]=[j[v][g],T];break;case"S":re=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":ee=parseInt(R[w].slice(1))-1;break;case"C":W=parseInt(R[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(Q&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=H:j[v][g]=H,S=null),re){if(X)throw new Error("SYLK shared formula cannot have own formula");var q=ee>-1&&j[ee][W];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=e9(q[1],{r:v-ee,c:g-W})}break;case"F":var V=0;for(w=1;w<R.length;++w)switch(R[w].charAt(0)){case"X":g=parseInt(R[w].slice(1))-1,++V;break;case"Y":for(v=parseInt(R[w].slice(1))-1,C=j.length;C<=v;++C)j[C]=[];break;case"M":U=parseInt(R[w].slice(1))/20;break;case"F":break;case"G":break;case"P":S=N[parseInt(R[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=R[w].slice(1).split(" "),C=parseInt(I[0],10);C<=parseInt(I[1],10);++C)U=parseInt(I[2],10),P[C-1]=U===0?{hidden:!0}:{wch:U},N0(P[C-1]);break;case"C":g=parseInt(R[w].slice(1))-1,P[g]||(P[g]={});break;case"R":v=parseInt(R[w].slice(1))-1,_[v]||(_[v]={}),U>0?(_[v].hpt=U,_[v].hpx=rm(U)):U===0&&(_[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}V<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return _.length>0&&(E["!rows"]=_),P.length>0&&(E["!cols"]=P),p&&p.sheetRows&&(j=j.slice(0,p.sheetRows)),[j,E]}function o(m,p){var y=s(m,p),v=y[0],g=y[1],b=mm(v,p);return Xs(g).forEach(function(w){b[w]=g[w]}),b}function l(m,p){return L0(o(m,p),p)}function c(m,p,y,v){var g="C;Y"+(y+1)+";X"+(v+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+B3(m.f,{r:y,c:v}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(m,p){p.forEach(function(y,v){var g="F;W"+(v+1)+" "+(v+1)+" ";y.hidden?g+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=lg(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=cg(y.wpx)),typeof y.wch=="number"&&(g+=Math.round(y.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function u(m,p){p.forEach(function(y,v){var g="F;";y.hidden?g+="M0;":y.hpt?g+="M"+20*y.hpt+";":y.hpx&&(g+="M"+20*dg(y.hpx)+";"),g.length>2&&m.push(g+"R"+(v+1))})}function f(m,p){var y=["ID;PWXL;N;E"],v=[],g=da(m["!ref"]),b,w=Array.isArray(m),j=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&d(y,m["!cols"]),m["!rows"]&&u(y,m["!rows"]),y.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var S=g.s.c;S<=g.e.c;++S){var E=un({r:N,c:S});b=w?(m[N]||[])[S]:m[E],!(!b||b.v==null&&(!b.f||b.F))&&v.push(c(b,m,N,S))}return y.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:f}})(),MR=(function(){function e(i,o){switch(o.type){case"base64":return t(Nc(i),o);case"binary":return t(i,o);case"buffer":return t(Pn&&Buffer.isBuffer(i)?i.toString("binary"):D0(i),o);case"array":return t(Eh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==l.length;++u){if(l[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var m=l[u].trim().split(","),p=m[0],y=m[1];++u;for(var v=l[u]||"";(v.match(/["]/g)||[]).length&1&&u<l.length-1;)v+=`
`+l[++u];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++c]=[],d=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[c][d]=!0:v==="FALSE"?f[c][d]=!1:isNaN(Xd(y))?isNaN(em(y).getDate())?f[c][d]=y:f[c][d]=us(y):f[c][d]=Xd(y),++d;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[c][d++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return mm(e(i,o),o)}function a(i,o){return L0(r(i,o),o)}var s=(function(){var i=function(c,d,u,f,m){c.push(d),c.push(u+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=da(c["!ref"]),f,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var v=un({r:p,c:y});if(f=m?(c[p]||[])[y]:c[v],!f){o(d,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(d,1,0,"="+f.f):o(d,1,0,""):o(d,0,g,"V");break;case"b":o(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=id(f.z||rn[14],qi(us(f.v)))),o(d,0,f.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var b=`\r
`,w=d.join(b);return w}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),RR=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),y=-1,v=-1,g=0,b=[];g!==p.length;++g){var w=p[g].trim().split(":");if(w[0]==="cell"){var j=Ls(w[1]);if(b.length<=j.r)for(y=b.length;y<=j.r;++y)b[y]||(b[y]=[]);switch(y=j.r,v=j.c,w[2]){case"t":b[y][v]=e(w[3]);break;case"v":b[y][v]=+w[3];break;case"vtf":var N=w[w.length-1];case"vtc":w[3]==="nl"?b[y][v]=!!+w[4]:b[y][v]=+w[4],w[2]=="vtf"&&(b[y][v]=[b[y][v],N])}}}return m&&m.sheetRows&&(b=b.slice(0,m.sheetRows)),b}function a(f,m){return mm(r(f,m),m)}function s(f,m){return L0(a(f,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],y,v="",g=Ql(f["!ref"]),b=Array.isArray(f),w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j)if(v=un({r:w,c:j}),y=b?(f[w]||[])[j]:f[v],!(!y||y.v==null||y.t==="z")){switch(p=["cell",v,"t"],y.t){case"s":case"str":p.push(t(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=t(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var N=qi(us(y.v));p[2]="vtc",p[3]="nd",p[4]=""+N,p[5]=y.w||id(y.z||rn[14],N);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(f){return[i,o,l,o,d(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}})(),tm=(function(){function e(u,f,m,p,y){y.raw?f[m][p]=u:u===""||(u==="TRUE"?f[m][p]=!0:u==="FALSE"?f[m][p]=!1:isNaN(Xd(u))?isNaN(em(u).getDate())?f[m][p]=u:f[m][p]=us(u):f[m][p]=Xd(u))}function t(u,f){var m=f||{},p=[];if(!u||u.length===0)return p;for(var y=u.split(/[\r\n]/),v=y.length-1;v>=0&&y[v].length===0;)--v;for(var g=10,b=0,w=0;w<=v;++w)b=y[w].indexOf(" "),b==-1?b=y[w].length:b++,g=Math.max(g,b);for(w=0;w<=v;++w){p[w]=[];var j=0;for(e(y[w].slice(0,g).trim(),p,w,j,m),j=1;j<=(y[w].length-g)/10+1;++j)e(y[w].slice(g+(j-1)*10,g+j*10).trim(),p,w,j,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var f={},m=!1,p=0,y=0;p<u.length;++p)(y=u.charCodeAt(p))==34?m=!m:!m&&y in r&&(f[y]=(f[y]||0)+1);y=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p]);if(!y.length){f=a;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p])}return y.sort(function(v,g){return v[0]-g[0]||a[v[1]]-a[g[1]]}),r[y.pop()[1]]||44}function i(u,f){var m=f||{},p="",y=m.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):m&&m.FS?p=m.FS:p=s(u.slice(0,1024));var g=0,b=0,w=0,j=0,N=0,S=p.charCodeAt(0),E=!1,_=0,P=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var I=m.dateNF!=null?vle(m.dateNF):null;function U(){var C=u.slice(j,N),O={};if(C.charAt(0)=='"'&&C.charAt(C.length-1)=='"'&&(C=C.slice(1,-1).replace(/""/g,'"')),C.length===0)O.t="z";else if(m.raw)O.t="s",O.v=C;else if(C.trim().length===0)O.t="s",O.v=C;else if(C.charCodeAt(0)==61)C.charCodeAt(1)==34&&C.charCodeAt(C.length-1)==34?(O.t="s",O.v=C.slice(2,-1).replace(/""/g,'"')):G0e(C)?(O.t="n",O.f=C.slice(1)):(O.t="s",O.v=C);else if(C=="TRUE")O.t="b",O.v=!0;else if(C=="FALSE")O.t="b",O.v=!1;else if(!isNaN(w=Xd(C)))O.t="n",m.cellText!==!1&&(O.w=C),O.v=w;else if(!isNaN(em(C).getDate())||I&&C.match(I)){O.z=m.dateNF||rn[14];var R=0;I&&C.match(I)&&(C=yle(C,m.dateNF,C.match(I)||[]),R=1),m.cellDates?(O.t="d",O.v=us(C,R)):(O.t="n",O.v=qi(us(C,R))),m.cellText!==!1&&(O.w=id(O.z,O.v instanceof Date?qi(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=C;if(O.t=="z"||(m.dense?(y[g]||(y[g]=[]),y[g][b]=O):y[un({c:b,r:g})]=O),j=N+1,P=u.charCodeAt(j),v.e.c<b&&(v.e.c=b),v.e.r<g&&(v.e.r=g),_==S)++b;else if(b=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;N<u.length;++N)switch(_=u.charCodeAt(N)){case 34:P===34&&(E=!E);break;case S:case 10:case 13:if(!E&&U())break e;break}return N-j>0&&U(),y["!ref"]=kn(v),y}function o(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):mm(t(u,f),f)}function l(u,f){var m="",p=f.type=="string"?[0,0,0,0]:G3(u,f);switch(f.type){case"base64":m=Nc(u);break;case"binary":m=u;break;case"buffer":f.codepage==65001?m=u.toString("utf8"):f.codepage&&typeof eg<"u"||(m=Pn&&Buffer.isBuffer(u)?u.toString("binary"):D0(u));break;case"array":m=Eh(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ba(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=Ba(m):f.type=="binary"&&typeof eg<"u",m.slice(0,19)=="socialcalc:version:"?RR.to_sheet(f.type=="string"?m:Ba(m),f):o(m,f)}function c(u,f){return L0(l(u,f),f)}function d(u){for(var f=[],m=da(u["!ref"]),p,y=Array.isArray(u),v=m.s.r;v<=m.e.r;++v){for(var g=[],b=m.s.c;b<=m.e.c;++b){var w=un({r:v,c:b});if(p=y?(u[v]||[])[b]:u[w],!p||p.v==null){g.push("          ");continue}for(var j=(p.w||(Cf(p),p.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(b===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}})();function Iue(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=FR.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return tm.to_workbook(e,t)}}var xh=(function(){function e(T,q,V){if(T){To(T,T.l||0);for(var B=V.Enum||ee;T.l<T.length;){var K=T.read_shift(2),oe=B[K]||B[65535],me=T.read_shift(2),se=T.l+me,de=oe.f&&oe.f(T,me,V);if(T.l=se,q(de,oe,K))return}}}function t(T,q){switch(q.type){case"base64":return r(vc(Nc(T)),q);case"binary":return r(vc(T),q);case"buffer":case"array":return r(T,q)}throw"Unsupported type "+q.type}function r(T,q){if(!T)return T;var V=q||{},B=V.dense?[]:{},K="Sheet1",oe="",me=0,se={},de=[],Re=[],he={s:{r:0,c:0},e:{r:0,c:0}},Ue=V.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)V.Enum=ee,e(T,function(Se,we,Pe){switch(Pe){case 0:V.vers=Se,Se>=4096&&(V.qpro=!0);break;case 6:he=Se;break;case 204:Se&&(oe=Se);break;case 222:oe=Se;break;case 15:case 51:V.qpro||(Se[1].v=Se[1].v.slice(1));case 13:case 14:case 16:Pe==14&&(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=V.dateNF||rn[14],V.cellDates&&(Se[1].t="d",Se[1].v=vb(Se[1].v))),V.qpro&&Se[3]>me&&(B["!ref"]=kn(he),se[K]=B,de.push(K),B=V.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},me=Se[3],K=oe||"Sheet"+(me+1),oe="");var fe=V.dense?(B[Se[0].r]||[])[Se[0].c]:B[un(Se[0])];if(fe){fe.t=Se[1].t,fe.v=Se[1].v,Se[1].z!=null&&(fe.z=Se[1].z),Se[1].f!=null&&(fe.f=Se[1].f);break}V.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[un(Se[0])]=Se[1];break}},V);else if(T[2]==26||T[2]==14)V.Enum=W,T[2]==14&&(V.qpro=!0,T.l=0),e(T,function(Se,we,Pe){switch(Pe){case 204:K=Se;break;case 22:Se[1].v=Se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>me&&(B["!ref"]=kn(he),se[K]=B,de.push(K),B=V.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},me=Se[3],K="Sheet"+(me+1)),Ue>0&&Se[0].r>=Ue)break;V.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[un(Se[0])]=Se[1],he.e.c<Se[0].c&&(he.e.c=Se[0].c),he.e.r<Se[0].r&&(he.e.r=Se[0].r);break;case 27:Se[14e3]&&(Re[Se[14e3][0]]=Se[14e3][1]);break;case 1537:Re[Se[0]]=Se[1],Se[0]==me&&(K=Se[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(B["!ref"]=kn(he),se[oe||K]=B,de.push(oe||K),!Re.length)return{SheetNames:de,Sheets:se};for(var Oe={},le=[],te=0;te<Re.length;++te)se[de[te]]?(le.push(Re[te]||de[te]),Oe[Re[te]]=se[Re[te]]||se[de[te]]):(le.push(Re[te]),Oe[Re[te]]={"!ref":"A1"});return{SheetNames:le,Sheets:Oe}}function a(T,q){var V=q||{};if(+V.codepage>=0&&zd(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var B=Xl(),K=da(T["!ref"]),oe=Array.isArray(T),me=[];hr(B,0,i(1030)),hr(B,6,c(K));for(var se=Math.min(K.e.r,8191),de=K.s.r;de<=se;++de)for(var Re=li(de),he=K.s.c;he<=K.e.c;++he){de===K.s.r&&(me[he]=Ds(he));var Ue=me[he]+Re,Oe=oe?(T[de]||[])[he]:T[Ue];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?hr(B,13,p(de,he,Oe.v)):hr(B,14,v(de,he,Oe.v));else{var le=Cf(Oe);hr(B,15,f(de,he,le.slice(0,239)))}}return hr(B,1),B.end()}function s(T,q){var V=q||{};if(+V.codepage>=0&&zd(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var B=Xl();hr(B,0,o(T));for(var K=0,oe=0;K<T.SheetNames.length;++K)(T.Sheets[T.SheetNames[K]]||{})["!ref"]&&hr(B,27,X(T.SheetNames[K],oe++));var me=0;for(K=0;K<T.SheetNames.length;++K){var se=T.Sheets[T.SheetNames[K]];if(!(!se||!se["!ref"])){for(var de=da(se["!ref"]),Re=Array.isArray(se),he=[],Ue=Math.min(de.e.r,8191),Oe=de.s.r;Oe<=Ue;++Oe)for(var le=li(Oe),te=de.s.c;te<=de.e.c;++te){Oe===de.s.r&&(he[te]=Ds(te));var Se=he[te]+le,we=Re?(se[Oe]||[])[te]:se[Se];if(!(!we||we.t=="z"))if(we.t=="n")hr(B,23,U(Oe,te,me,we.v));else{var Pe=Cf(we);hr(B,22,_(Oe,te,me,Pe.slice(0,239)))}}++me}}return hr(B,1),B.end()}function i(T){var q=Rt(2);return q.write_shift(2,T),q}function o(T){var q=Rt(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var V=0,B=0,K=0,oe=0;oe<T.SheetNames.length;++oe){var me=T.SheetNames[oe],se=T.Sheets[me];if(!(!se||!se["!ref"])){++K;var de=Ql(se["!ref"]);V<de.e.r&&(V=de.e.r),B<de.e.c&&(B=de.e.c)}}return V>8191&&(V=8191),q.write_shift(2,V),q.write_shift(1,K),q.write_shift(1,B),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(T,q,V){var B={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&V.qpro?(B.s.c=T.read_shift(1),T.l++,B.s.r=T.read_shift(2),B.e.c=T.read_shift(1),T.l++,B.e.r=T.read_shift(2),B):(B.s.c=T.read_shift(2),B.s.r=T.read_shift(2),q==12&&V.qpro&&(T.l+=2),B.e.c=T.read_shift(2),B.e.r=T.read_shift(2),q==12&&V.qpro&&(T.l+=2),B.s.c==65535&&(B.s.c=B.e.c=B.s.r=B.e.r=0),B)}function c(T){var q=Rt(8);return q.write_shift(2,T.s.c),q.write_shift(2,T.s.r),q.write_shift(2,T.e.c),q.write_shift(2,T.e.r),q}function d(T,q,V){var B=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(B[0].c=T.read_shift(1),B[3]=T.read_shift(1),B[0].r=T.read_shift(2),T.l+=2):(B[2]=T.read_shift(1),B[0].c=T.read_shift(2),B[0].r=T.read_shift(2)),B}function u(T,q,V){var B=T.l+q,K=d(T,q,V);if(K[1].t="s",V.vers==20768){T.l++;var oe=T.read_shift(1);return K[1].v=T.read_shift(oe,"utf8"),K}return V.qpro&&T.l++,K[1].v=T.read_shift(B-T.l,"cstr"),K}function f(T,q,V){var B=Rt(7+V.length);B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,T),B.write_shift(1,39);for(var K=0;K<B.length;++K){var oe=V.charCodeAt(K);B.write_shift(1,oe>=128?95:oe)}return B.write_shift(1,0),B}function m(T,q,V){var B=d(T,q,V);return B[1].v=T.read_shift(2,"i"),B}function p(T,q,V){var B=Rt(7);return B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,T),B.write_shift(2,V,"i"),B}function y(T,q,V){var B=d(T,q,V);return B[1].v=T.read_shift(8,"f"),B}function v(T,q,V){var B=Rt(13);return B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,T),B.write_shift(8,V,"f"),B}function g(T,q,V){var B=T.l+q,K=d(T,q,V);if(K[1].v=T.read_shift(8,"f"),V.qpro)T.l=B;else{var oe=T.read_shift(2);N(T.slice(T.l,T.l+oe),K),T.l+=oe}return K}function b(T,q,V){var B=q&32768;return q&=-32769,q=(B?T:0)+(q>=8192?q-16384:q),(B?"":"$")+(V?Ds(q):li(q))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(T,q){To(T,0);for(var V=[],B=0,K="",oe="",me="",se="";T.l<T.length;){var de=T[T.l++];switch(de){case 0:V.push(T.read_shift(8,"f"));break;case 1:oe=b(q[0].c,T.read_shift(2),!0),K=b(q[0].r,T.read_shift(2),!1),V.push(oe+K);break;case 2:{var Re=b(q[0].c,T.read_shift(2),!0),he=b(q[0].r,T.read_shift(2),!1);oe=b(q[0].c,T.read_shift(2),!0),K=b(q[0].r,T.read_shift(2),!1),V.push(Re+he+":"+oe+K)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(T.read_shift(2));break;case 6:{for(var Ue="";de=T[T.l++];)Ue+=String.fromCharCode(de);V.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:se=V.pop(),me=V.pop(),V.push(["AND","OR"][de-20]+"("+me+","+se+")");break;default:if(de<32&&j[de])se=V.pop(),me=V.pop(),V.push(me+j[de]+se);else if(w[de]){if(B=w[de][1],B==69&&(B=T[T.l++]),B>V.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+V.join("|")+"|");return}var Oe=V.slice(-B);V.length-=B,V.push(w[de][0]+"("+Oe.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}V.length==1?q[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function S(T){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=T.read_shift(2),q[3]=T[T.l++],q[0].c=T[T.l++],q}function E(T,q){var V=S(T);return V[1].t="s",V[1].v=T.read_shift(q-4,"cstr"),V}function _(T,q,V,B){var K=Rt(6+B.length);K.write_shift(2,T),K.write_shift(1,V),K.write_shift(1,q),K.write_shift(1,39);for(var oe=0;oe<B.length;++oe){var me=B.charCodeAt(oe);K.write_shift(1,me>=128?95:me)}return K.write_shift(1,0),K}function P(T,q){var V=S(T);V[1].v=T.read_shift(2);var B=V[1].v>>1;if(V[1].v&1)switch(B&7){case 0:B=(B>>3)*5e3;break;case 1:B=(B>>3)*500;break;case 2:B=(B>>3)/20;break;case 3:B=(B>>3)/200;break;case 4:B=(B>>3)/2e3;break;case 5:B=(B>>3)/2e4;break;case 6:B=(B>>3)/16;break;case 7:B=(B>>3)/64;break}return V[1].v=B,V}function I(T,q){var V=S(T),B=T.read_shift(4),K=T.read_shift(4),oe=T.read_shift(2);if(oe==65535)return B===0&&K===3221225472?(V[1].t="e",V[1].v=15):B===0&&K===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var me=oe&32768;return oe=(oe&32767)-16446,V[1].v=(1-me*2)*(K*Math.pow(2,oe+32)+B*Math.pow(2,oe)),V}function U(T,q,V,B){var K=Rt(14);if(K.write_shift(2,T),K.write_shift(1,V),K.write_shift(1,q),B==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var oe=0,me=0,se=0,de=0;return B<0&&(oe=1,B=-B),me=Math.log2(B)|0,B/=Math.pow(2,me-31),de=B>>>0,(de&2147483648)==0&&(B/=2,++me,de=B>>>0),B-=de,de|=2147483648,de>>>=0,B*=Math.pow(2,32),se=B>>>0,K.write_shift(4,se),K.write_shift(4,de),me+=16383+(oe?32768:0),K.write_shift(2,me),K}function C(T,q){var V=I(T);return T.l+=q-14,V}function O(T,q){var V=S(T),B=T.read_shift(4);return V[1].v=B>>6,V}function R(T,q){var V=S(T),B=T.read_shift(8,"f");return V[1].v=B,V}function z(T,q){var V=R(T);return T.l+=q-10,V}function H(T,q){return T[T.l+q-1]==0?T.read_shift(q,"cstr"):""}function Q(T,q){var V=T[T.l++];V>q-1&&(V=q-1);for(var B="";B.length<V;)B+=String.fromCharCode(T[T.l++]);return B}function J(T,q,V){if(!(!V.qpro||q<21)){var B=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var K=T.read_shift(q-21,"cstr");return[B,K]}}function re(T,q){for(var V={},B=T.l+q;T.l<B;){var K=T.read_shift(2);if(K==14e3){for(V[K]=[0,""],V[K][0]=T.read_shift(2);T[T.l];)V[K][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return V}function X(T,q){var V=Rt(5+T.length);V.write_shift(2,14e3),V.write_shift(2,q);for(var B=0;B<T.length;++B){var K=T.charCodeAt(B);V[V.l++]=K>127?95:K}return V[V.l++]=0,V}var ee={0:{n:"BOF",f:bi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:C},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function Due(e){var t={},r=e.match(dl),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=hn(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=d3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Lue=(function(){var e=ng("t"),t=ng("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:la(o[1])},c=i.match(t);return c&&(l.s=Due(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),Fue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),Mue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Rue=/<(?:\w+:)?r>/,Bue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function D3(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=la(Ba(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Ba(e),r&&(a.h=b3(a.t))):e.match(Rue)&&(a.r=Ba(e),a.t=la(Ba((e.replace(Bue,"").match(Mue)||[]).join("").replace(dl,""))),r&&(a.h=Fue(Lue(a.r)))),a):{t:""}}var Uue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,que=/<(?:\w+:)?(?:si|sstItem)>/g,$ue=/<\/(?:\w+:)?(?:si|sstItem)>/;function zue(e,t){var r=[],a="";if(!e)return r;var s=e.match(Uue);if(s){a=s[2].replace(que,"").split($ue);for(var i=0;i!=a.length;++i){var o=D3(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=hn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Hue=/^\s|\s$|[\t\n\r]/;function BR(e,t){if(!t.bookSST)return"";var r=[di];r[r.length]=ur("sst",null,{xmlns:Bh[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Hue)&&(i+=' xml:space="preserve"'),i+=">"+Ea(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Wue(e){return[e.read_shift(4),e.read_shift(4)]}function Vue(e,t){var r=[],a=!1;return If(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Gue(e,t){return t||(t=Rt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Kue=ace;function Xue(e){var t=Xl();Wt(t,159,Gue(e));for(var r=0;r<e.length;++r)Wt(t,19,Kue(e[r]));return Wt(t,160),t.end()}function UR(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function jf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Yue(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=jf(e,4),t.U=jf(e,4),t.W=jf(e,4),t}function Que(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function Jue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Que(e));return t}function Zue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function efe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=jf(e,4),t.U=jf(e,4),t.W=jf(e,4),t}function tfe(e){var t=efe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function qR(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function $R(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function rfe(e){var t=jf(e);switch(t.Minor){case 2:return[t.Minor,nfe(e)];case 3:return[t.Minor,afe()];case 4:return[t.Minor,sfe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function nfe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=qR(e,r),s=$R(e,e.length-e.l);return{t:"Std",h:a,v:s}}function afe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function sfe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(dl,function(i){var o=hn(i);switch(Bu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function ife(e,t){var r={},a=r.EncryptionVersionInfo=jf(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=qR(e,s),t-=s,r.EncryptionVerifier=$R(e,t),r}function ofe(e){var t={},r=t.EncryptionVersionInfo=jf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function L3(e){var t=0,r,a=UR(e),s=a.length+1,i,o,l,c,d;for(r=w0(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var zR=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],f=0;f!=7;++f)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=UR(o),c=i(l),d=l.length,u=w0(16),f=0;f!=16;++f)u[f]=0;var m,p,y;for((d&1)===1&&(m=c>>8,u[d]=s(e[0],m),--d,m=c&255,p=l[l.length-1],u[d]=s(p,m));d>0;)--d,m=c>>8,u[d]=s(l[d],m),--d,m=c&255,u[d]=s(l[d],m);for(d=15,y=15-l.length;y>0;)m=c>>8,u[d]=s(e[y],m),--d,--y,m=c&255,u[d]=s(l[d],m),--d,--y;return u}})(),lfe=function(e,t,r,a,s){s||(s=t),a||(a=zR(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},cfe=function(e){var t=0,r=zR(e);return function(a){var s=lfe("",a,t,r);return t=s[1],s[0]}};function dfe(e,t,r,a){var s={key:bi(e),verificationBytes:bi(e)};return r.password&&(s.verifier=L3(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=cfe(r.password)),s}function ufe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=ofe(e):a.Data=ife(e,t),a}function ffe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?ufe(e,t-2,a):dfe(e,r.biff>=8?t:t-2,r,a),a}var HR=(function(){function e(s,i){switch(i.type){case"base64":return t(Nc(s),i);case"binary":return t(s,i);case"buffer":return t(Pn&&Buffer.isBuffer(s)?s.toString("binary"):D0(s),i);case"array":return t(Eh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(l)&&(l[f]=[]);for(var m=/\\\w+\b/g,p=0,y,v=-1;y=m.exec(u);){switch(y[0]){case"\\cell":var g=u.slice(p,m.lastIndex-y[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var b={v:g,t:"s"};Array.isArray(l)?l[f][v]=b:l[un({r:f,c:v})]=b}break}p=m.lastIndex}v>d.e.c&&(d.e.c=v)}),l["!ref"]=kn(d),l}function r(s,i){return L0(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=da(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var f=un({r:d,c:u});l=c?(s[d]||[])[u]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Cf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function hfe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function og(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function pfe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function mfe(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Ny(e,t){if(t===0)return e;var r=pfe(hfe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),og(mfe(r))}var WR=6,xfe=15,gfe=1,al=WR;function lg(e){return Math.floor((e+Math.round(128/al)/256)*al)}function cg(e){return Math.floor((e-5)/al*100+.5)/100}function jy(e){return Math.round((e*al+5)/al*256)/256}function Nj(e){return jy(cg(lg(e)))}function F3(e){var t=Math.abs(e-Nj(e)),r=al;if(t>.005)for(al=gfe;al<xfe;++al)Math.abs(e-Nj(e))<=t&&(t=Math.abs(e-Nj(e)),r=al);al=r}function N0(e){e.width?(e.wpx=lg(e.width),e.wch=cg(e.wpx),e.MDW=al):e.wpx?(e.wch=cg(e.wpx),e.width=jy(e.wch),e.MDW=al):typeof e.wch=="number"&&(e.width=jy(e.wch),e.wpx=lg(e.width),e.MDW=al),e.customWidth&&delete e.customWidth}var vfe=96,VR=vfe;function dg(e){return e*96/VR}function rm(e){return e*VR/96}var yfe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function bfe(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(dl)||[]).forEach(function(o){var l=hn(o);switch(Bu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=cs(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=cs(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function wfe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(dl)||[]).forEach(function(o){var l=hn(o);switch(Bu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Nfe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(dl)||[]).forEach(function(o){var l=hn(o);switch(Bu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ba(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?cs(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?cs(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?cs(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?cs(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?cs(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?cs(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?cs(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=d3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=cs(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=ph[s.color.index];s.color.index==81&&(c=ph[1]),c||(c=ph[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Ny(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function jfe(e,t,r){t.NumberFmt=[];for(var a=Xs(rn),s=0;s<a.length;++s)t.NumberFmt[a[s]]=rn[a[s]];var i=e[0].match(dl);if(i)for(s=0;s<i.length;++s){var o=hn(i[s]);switch(Bu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=la(Ba(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Nf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function kfe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=ur("numFmt",null,{numFmtId:a,formatCode:Ea(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=ur("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Lv=["numFmtId","fillId","fontId","borderId","xfId"],Fv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Sfe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(dl)||[]).forEach(function(i){var o=hn(i),l=0;switch(Bu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Lv.length;++l)a[Lv[l]]&&(a[Lv[l]]=parseInt(a[Lv[l]],10));for(l=0;l<Fv.length;++l)a[Fv[l]]&&(a[Fv[l]]=cs(a[Fv[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=cs(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function _fe(e){var t=[];return t[t.length]=ur("cellXfs",null),e.forEach(function(r){t[t.length]=ur("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=ur("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Afe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&jfe(f,u,d),(f=l.match(s))&&Nfe(f,u,c,d),(f=l.match(a))&&wfe(f,u,c,d),(f=l.match(i))&&bfe(f,u,c,d),(f=l.match(r))&&Sfe(f,u,d),u}})();function GR(e,t){var r=[di,ur("styleSheet",null,{xmlns:Bh[0],"xmlns:vt":Bi.vt})],a;return e.SSF&&(a=kfe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=_fe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Cfe(e,t){var r=e.read_shift(2),a=ll(e);return[r,a]}function Efe(e,t,r){r||(r=Rt(6+4*t.length)),r.write_shift(2,e),co(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function Tfe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=uce(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=dce(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ll(e),a}function Ofe(e,t){t||(t=Rt(153)),t.write_shift(2,e.sz*20),fce(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),yy(e.color,t);var a=0;return a=2,t.write_shift(1,a),co(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Pfe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],jj,Ife=cl;function E8(e,t){t||(t=Rt(84)),jj||(jj=xb(Pfe));var r=jj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(yy({auto:1},t),yy({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Dfe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function KR(e,t,r){r||(r=Rt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function $m(e,t){return t||(t=Rt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Lfe=cl;function Ffe(e,t){return t||(t=Rt(51)),t.write_shift(1,0),$m(null,t),$m(null,t),$m(null,t),$m(null,t),$m(null,t),t.length>t.l?t.slice(0,t.l):t}function Mfe(e,t){return t||(t=Rt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),vy(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Rfe(e,t,r){var a=Rt(2052);return a.write_shift(4,e),vy(t,a),vy(r,a),a.length>a.l?a.slice(0,a.l):a}function Bfe(e,t,r){var a={};a.NumberFmt=[];for(var s in rn)a.NumberFmt[s]=rn[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return If(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Nf(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Ny(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function Ufe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Wt(e,615,Yd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Wt(e,44,Efe(s,t[s]))}),Wt(e,616))}}function qfe(e){var t=1;Wt(e,611,Yd(t)),Wt(e,43,Ofe({sz:12,color:{theme:1},name:"Calibri",family:2})),Wt(e,612)}function $fe(e){var t=2;Wt(e,603,Yd(t)),Wt(e,45,E8({patternType:"none"})),Wt(e,45,E8({patternType:"gray125"})),Wt(e,604)}function zfe(e){var t=1;Wt(e,613,Yd(t)),Wt(e,46,Ffe()),Wt(e,614)}function Hfe(e){var t=1;Wt(e,626,Yd(t)),Wt(e,47,KR({numFmtId:0},65535)),Wt(e,627)}function Wfe(e,t){Wt(e,617,Yd(t.length)),t.forEach(function(r){Wt(e,47,KR(r,0))}),Wt(e,618)}function Vfe(e){var t=1;Wt(e,619,Yd(t)),Wt(e,48,Mfe({xfId:0,name:"Normal"})),Wt(e,620)}function Gfe(e){var t=0;Wt(e,505,Yd(t)),Wt(e,506)}function Kfe(e){var t=0;Wt(e,508,Rfe(t,"TableStyleMedium9","PivotStyleMedium4")),Wt(e,509)}function Xfe(e,t){var r=Xl();return Wt(r,278),Ufe(r,e.SSF),qfe(r),$fe(r),zfe(r),Hfe(r),Wfe(r,t.cellXfs),Vfe(r),Gfe(r),Kfe(r),Wt(r,279),r.end()}var Yfe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Qfe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(dl)||[]).forEach(function(s){var i=hn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Yfe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Jfe(){}function Zfe(){}var e0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,t0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,r0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function n0e(e,t,r){t.themeElements={};var a;[["clrScheme",e0e,Qfe],["fontScheme",t0e,Jfe],["fmtScheme",r0e,Zfe]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var a0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function XR(e,t){(!e||e.length===0)&&(e=M3());var r,a={};if(!(r=e.match(a0e)))throw new Error("themeElements not found in theme");return n0e(r[0],a,t),a.raw=e,a}function M3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[di];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function s0e(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=qM(i,{type:"array"})}catch{return}var l=yc(o,"theme/theme/theme1.xml",!0);if(l)return XR(l,r)}}function i0e(e){return e.read_shift(4)}function o0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=l0e(e,4);break;case 2:t.xclrValue=CR(e);break;case 3:t.xclrValue=i0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function l0e(e,t){return cl(e,t)}function c0e(e,t){return cl(e,t)}function d0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=o0e(e);break;case 6:a[1]=c0e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function u0e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(d0e(e,r-e.l));return{ixfe:a,ext:i}}function f0e(e,t){t.forEach(function(r){r[0]})}function h0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ll(e)}}function p0e(e){var t=Rt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),co(e.name,t),t.slice(0,t.l)}function m0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function x0e(e){var t=Rt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function g0e(e,t){var r=Rt(8+2*t.length);return r.write_shift(4,e),co(t,r),r.slice(0,r.l)}function v0e(e){return e.l+=4,e.read_shift(4)!=0}function y0e(e,t){var r=Rt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function b0e(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return If(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function w0e(){var e=Xl();return Wt(e,332),Wt(e,334,Yd(1)),Wt(e,335,p0e({name:"XLDAPR",version:12e4,flags:3496657072})),Wt(e,336),Wt(e,339,g0e(1,"XLDAPR")),Wt(e,52),Wt(e,35,Yd(514)),Wt(e,4096,Yd(0)),Wt(e,4097,Yc(1)),Wt(e,36),Wt(e,53),Wt(e,340),Wt(e,337,y0e(1)),Wt(e,51,x0e([[1,0]])),Wt(e,338),Wt(e,333),e.end()}function N0e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(dl,function(l){var c=hn(l);switch(Bu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function YR(){var e=[di];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function j0e(e){var t=[];if(!e)return t;var r=1;return(e.match(dl)||[]).forEach(function(a){var s=hn(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function k0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=un(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function S0e(e,t,r){var a=[];return If(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function _0e(e,t,r,a){if(!e)return e;var s=a||{},i=!1;If(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function A0e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var xp=1024;function QR(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ur("xml",null,{"xmlns:v":mc.v,"xmlns:o":mc.o,"xmlns:x":mc.x,"xmlns:mv":mc.mv}).replace(/\/>/,">"),ur("o:shapelayout",ur("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ur("v:shapetype",[ur("v:stroke",null,{joinstyle:"miter"}),ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];xp<e*1e3;)xp+=1e3;return t.forEach(function(i){var o=Ls(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=ur("v:fill",c,l),u={on:"t",obscured:"t"};++xp,s=s.concat(["<v:shape"+ag({id:"_x0000_s"+xp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,ur("v:shadow",null,u),ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Oo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Oo("x:AutoFill","False"),Oo("x:Row",String(o.r)),Oo("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function T8(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=Ls(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=da(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=kn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(u.a==a[f].id){u.a=a[f].name||u.a;break}}i.c.push(u)})}function C0e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=hn(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Ls(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&D3(f[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),a.push(d)}}}}),a}function JR(e){var t=[di,ur("comments",null,{xmlns:Bh[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Ea(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(Ea(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Oo("t",Ea(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Oo("t",Ea(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function E0e(e,t){var r=[],a=!1,s={},i=0;return e.replace(dl,function(l,c){var d=hn(l);switch(Bu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function T0e(e,t,r){var a=[di,ur("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(ur("threadedComment",Oo("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function O0e(e,t){var r=[],a=!1;return e.replace(dl,function(i){var o=hn(i);switch(Bu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function P0e(e){var t=[di,ur("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":Bh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function I0e(e){var t={};t.iauthor=e.read_shift(4);var r=zh(e);return t.rfx=r.s,t.ref=un(r.s),e.l+=16,t}function D0e(e,t){return t==null&&(t=Rt(36)),t.write_shift(4,e[1].iauthor),xm(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var L0e=ll;function F0e(e){return co(e.slice(0,54))}function M0e(e,t){var r=[],a=[],s={},i=!1;return If(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function R0e(e){var t=Xl(),r=[];return Wt(t,628),Wt(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Wt(t,632,F0e(s.a)))})}),Wt(t,631),Wt(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Ls(a[0]),e:Ls(a[0])};Wt(t,635,D0e([i,s])),s.t&&s.t.length>0&&Wt(t,637,ice(s)),Wt(t,636),delete s.iauthor})}),Wt(t,634),Wt(t,629),t.end()}var B0e="application/vnd.ms-office.vbaProject";function U0e(e){var t=Gr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Gr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Gr.write(t)}function q0e(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Gr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var ZR=["xlsb","xlsm","xlam","biff8","xla"];function $0e(){return{"!type":"dialog"}}function z0e(){return{"!type":"dialog"}}function H0e(){return{"!type":"macro"}}function W0e(){return{"!type":"macro"}}var kp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+Ds(u)+(c?"":"$")+li(d)}return function(s,i){return t=i,s.replace(e,r)}})(),R3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,B3=(function(){return function(t,r){return t.replace(R3,function(a,s,i,o,l,c){var d=S3(o)-(i?0:r.c),u=k3(c)-(l?0:r.r),f=u==0?"":l?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+f+"C"+m})}})();function e9(e,t){return e.replace(R3,function(r,a,s,i,o,l){return a+(s=="$"?s+i:Ds(S3(i)+t.c))+(o=="$"?o+l:li(k3(l)+t.r))})}function V0e(e,t,r){var a=Ql(t),s=a.s,i=Ls(r),o={r:i.r-s.r,c:i.c-s.c};return e9(e,o)}function G0e(e){return e.length!=1}function O8(e){return e.replace(/_xlfn\./g,"")}function gi(e){e.l+=1}function j0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function t9(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return r9(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=j0(e),l=j0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function r9(e){var t=j0(e),r=j0(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function K0e(e,t,r){if(r.biff<8)return r9(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=j0(e),o=j0(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function n9(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return X0e(e);var a=e.read_shift(r&&r.biff==12?4:2),s=j0(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function X0e(e){var t=j0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Y0e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Q0e(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return J0e(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function J0e(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Z0e(e,t,r){var a=(e[e.l++]&96)>>5,s=t9(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function ehe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=t9(e,i,r);return[a,s,o]}function the(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function rhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function nhe(e,t,r){var a=(e[e.l++]&96)>>5,s=K0e(e,t-1,r);return[a,s]}function ahe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function P8(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function she(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function ihe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function ohe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function lhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function che(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function a9(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function dhe(e){return e.read_shift(2),a9(e)}function uhe(e){return e.read_shift(2),a9(e)}function fhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=n9(e,0,r);return[a,s]}function hhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=Q0e(e,0,r);return[a,s]}function phe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=n9(e,0,r);return[a,s,i]}function mhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[vpe[s],o9[s],a]}function xhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:ghe(e);return[s,(i[0]===0?o9:gpe)[i[1]]]}function ghe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function vhe(e,t,r){e.l+=r&&r.biff==2?3:4}function yhe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function bhe(e){return e.l++,Df[e.read_shift(1)]}function whe(e){return e.l++,e.read_shift(2)}function Nhe(e){return e.l++,e.read_shift(1)!==0}function jhe(e){return e.l++,sl(e)}function khe(e,t,r){return e.l++,Ag(e,t-1,r)}function She(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ni(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Df[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=sl(e);break;case 2:r[1]=Hh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function _he(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?zh:yb)(e));return s}function Ahe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=She(e,r.biff);return o}function Che(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Ehe(e,t,r){if(r.biff==5)return The(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function The(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Ohe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Phe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Ihe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Dhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var Lhe=cl,Fhe=cl,Mhe=cl;function Eg(e,t,r){return e.l+=2,[Y0e(e)]}function U3(e){return e.l+=6,[]}var Rhe=Eg,Bhe=U3,Uhe=U3,qhe=Eg;function s9(e){return e.l+=2,[bi(e),e.read_shift(2)&1]}var $he=Eg,zhe=s9,Hhe=U3,Whe=Eg,Vhe=Eg,Ghe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Khe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Ghe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function Xhe(e){return e.l+=2,[e.read_shift(4)]}function Yhe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Qhe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Jhe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Zhe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function epe(e){return e.l+=4,[0,0]}var I8={1:{n:"PtgExp",f:yhe},2:{n:"PtgTbl",f:Mhe},3:{n:"PtgAdd",f:gi},4:{n:"PtgSub",f:gi},5:{n:"PtgMul",f:gi},6:{n:"PtgDiv",f:gi},7:{n:"PtgPower",f:gi},8:{n:"PtgConcat",f:gi},9:{n:"PtgLt",f:gi},10:{n:"PtgLe",f:gi},11:{n:"PtgEq",f:gi},12:{n:"PtgGe",f:gi},13:{n:"PtgGt",f:gi},14:{n:"PtgNe",f:gi},15:{n:"PtgIsect",f:gi},16:{n:"PtgUnion",f:gi},17:{n:"PtgRange",f:gi},18:{n:"PtgUplus",f:gi},19:{n:"PtgUminus",f:gi},20:{n:"PtgPercent",f:gi},21:{n:"PtgParen",f:gi},22:{n:"PtgMissArg",f:gi},23:{n:"PtgStr",f:khe},26:{n:"PtgSheet",f:Yhe},27:{n:"PtgEndSheet",f:Qhe},28:{n:"PtgErr",f:bhe},29:{n:"PtgBool",f:Nhe},30:{n:"PtgInt",f:whe},31:{n:"PtgNum",f:jhe},32:{n:"PtgArray",f:ahe},33:{n:"PtgFunc",f:mhe},34:{n:"PtgFuncVar",f:xhe},35:{n:"PtgName",f:Che},36:{n:"PtgRef",f:fhe},37:{n:"PtgArea",f:Z0e},38:{n:"PtgMemArea",f:Ohe},39:{n:"PtgMemErr",f:Lhe},40:{n:"PtgMemNoMem",f:Fhe},41:{n:"PtgMemFunc",f:Phe},42:{n:"PtgRefErr",f:Ihe},43:{n:"PtgAreaErr",f:the},44:{n:"PtgRefN",f:hhe},45:{n:"PtgAreaN",f:nhe},46:{n:"PtgMemAreaN",f:Jhe},47:{n:"PtgMemNoMemN",f:Zhe},57:{n:"PtgNameX",f:Ehe},58:{n:"PtgRef3d",f:phe},59:{n:"PtgArea3d",f:ehe},60:{n:"PtgRefErr3d",f:Dhe},61:{n:"PtgAreaErr3d",f:rhe},255:{}},tpe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},rpe={1:{n:"PtgElfLel",f:s9},2:{n:"PtgElfRw",f:Whe},3:{n:"PtgElfCol",f:Rhe},6:{n:"PtgElfRwV",f:Vhe},7:{n:"PtgElfColV",f:qhe},10:{n:"PtgElfRadical",f:$he},11:{n:"PtgElfRadicalS",f:Hhe},13:{n:"PtgElfColS",f:Bhe},15:{n:"PtgElfColSV",f:Uhe},16:{n:"PtgElfRadicalLel",f:zhe},25:{n:"PtgList",f:Khe},29:{n:"PtgSxName",f:Xhe},255:{}},npe={0:{n:"PtgAttrNoop",f:epe},1:{n:"PtgAttrSemi",f:che},2:{n:"PtgAttrIf",f:ohe},4:{n:"PtgAttrChoose",f:she},8:{n:"PtgAttrGoto",f:ihe},16:{n:"PtgAttrSum",f:vhe},32:{n:"PtgAttrBaxcel",f:P8},33:{n:"PtgAttrBaxcel",f:P8},64:{n:"PtgAttrSpace",f:dhe},65:{n:"PtgAttrSpaceSemi",f:uhe},128:{n:"PtgAttrIfError",f:lhe},255:{}};function Tg(e,t,r,a){if(a.biff<8)return cl(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Ahe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=_he(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(cl(e,t)),i}function Og(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=I8[i]||I8[tpe[i]],(i===24||i===25)&&(s=(i===24?rpe:npe)[e[e.l+1]]),!s||!s.f?cl(e,t):o.push([s.n,s.f(e,t,r)]);return o}function ape(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var spe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ipe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function i9(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function D8(e,t,r){var a=i9(e,t,r);return a=="#REF"?a:ipe(a,r)}function tl(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,f=0,m=0,p,y="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",b=0,w=e[0].length;b<w;++b){var j=e[0][b];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=Ws(" ",e[0][v][1][1]);break;case 1:g=Ws("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}d=d+g,v=-1}l.push(d+spe[j[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ox(j[1][1],o,s),l.push(lx(u,i));break;case"PtgRefN":u=r?ox(j[1][1],r,s):j[1][1],l.push(lx(u,i));break;case"PtgRef3d":f=j[1][1],u=ox(j[1][2],o,s),y=D8(a,f,s),l.push(y+"!"+lx(u,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],S=j[1][1];N||(N=0),N&=127;var E=N==0?[]:l.slice(-N);l.length-=N,S==="User"&&(S=E.shift()),l.push(S+"("+E.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":p=c8(j[1][1],r?{s:r}:o,s),l.push(yj(p,s));break;case"PtgArea":p=c8(j[1][1],o,s),l.push(yj(p,s));break;case"PtgArea3d":f=j[1][1],p=j[1][2],y=D8(a,f,s),l.push(y+"!"+yj(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=j[1][2];var _=(a.names||[])[m-1]||(a[0]||[])[m],P=_?_.Name:"SH33TJSNAME"+String(m);P&&P.slice(0,6)=="_xlfn."&&!s.xlfn&&(P=P.slice(6)),l.push(P);break;case"PtgNameX":var I=j[1][1];m=j[1][2];var U;if(s.biff<=5)I<0&&(I=-I),a[I]&&(U=a[I][m]);else{var C="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][m]&&a[I][m].itab>0&&(C=a.SheetNames[a[I][m].itab-1]+"!"):C=a.SheetNames[m-1]+"!"),a[I]&&a[I][m])C+=a[I][m].Name;else if(a[0]&&a[0][m])C+=a[0][m].Name;else{var O=(i9(a,I,s)||"").split(";;");O[m-1]?C=O[m-1]:C+="SH33TJSERRX"}l.push(C);break}U||(U={Name:"SH33TJSERRY"}),l.push(U.Name);break;case"PtgParen":var R="(",z=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:R=Ws(" ",e[0][v][1][1])+R;break;case 3:R=Ws("\r",e[0][v][1][1])+R;break;case 4:z=Ws(" ",e[0][v][1][1])+z;break;case 5:z=Ws("\r",e[0][v][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(R+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var H={c:r.c,r:r.r};if(a.sharedf[un(u)]){var Q=a.sharedf[un(u)];l.push(tl(Q,o,H,a,s))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(tl(d[1],o,H,a,s)),J=!0;break}J||l.push(j[1])}break;case"PtgArray":l.push("{"+ape(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&re.indexOf(e[0][b][0])==-1){j=e[0][v];var X=!0;switch(j[1][0]){case 4:X=!1;case 0:g=Ws(" ",j[1][1]);break;case 5:X=!1;case 1:g=Ws("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((X?g:"")+l.pop()+(X?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function ope(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],cl(e,t-2)];var l=Og(e,o,r);return t!==o+s&&(i=Tg(e,t-o-s,l,r)),e.l=a,[l,i]}function lpe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],cl(e,t-2)];var l=Og(e,o,r);return t!==o+s&&(i=Tg(e,t-o-s,l,r)),e.l=a,[l,i]}function cpe(e,t,r,a){var s=e.l+t,i=Og(e,a,r),o;return s!==e.l&&(o=Tg(e,s-e.l,i,r)),[i,o]}function dpe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Og(e,i,r);return i==65535?[[],cl(e,t-2)]:(t!==i+2&&(s=Tg(e,a-i-2,o,r)),[o,s])}function upe(e){var t;if(pf(e,e.l+6)!==65535)return[sl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function fpe(e){if(e==null){var t=Rt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Th(e);return Th(0)}function kj(e,t,r){var a=e.l+t,s=Uu(e);r.biff==2&&++e.l;var i=upe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=lpe(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function hpe(e,t,r,a,s){var i=Ph(t,r,s),o=fpe(e.v),l=Rt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Rt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=oo([i,o,l,d]);return f}function bb(e,t,r){var a=e.read_shift(4),s=Og(e,a,r),i=e.read_shift(4),o=i>0?Tg(e,i,s,r):null;return[s,o]}var ppe=bb,wb=bb,mpe=bb,xpe=bb,gpe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},o9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},vpe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function L8(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function ype(e){var t="of:="+e.replace(R3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Sj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function bpe(e){return e.replace(/\./,"!")}var dx={},Sp={},ux=typeof Map<"u";function q3(e,t,r){var a=0,s=e.length;if(r){if(ux?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ux?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(ux?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function Nb(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(al=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=cg(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=jy(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function gh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function F0(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Nf(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function l9(e,t,r,a,s,i){try{a.cellNF&&(e.z=rn[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=us(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(rn[t]==null&&Nf(gle[t]||"General",t),e.t==="e")e.w=e.w||Df[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=rg(e.v);else if(e.t==="d"){var o=qi(e.v);(o|0)===o?e.w=o.toString(10):e.w=rg(o)}else{if(e.v===void 0)return"";e.w=Ch(e.v,Sp)}else e.t==="d"?e.w=id(t,qi(e.v),Sp):e.w=id(t,e.v,Sp)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Ny(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Ny(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function wpe(e,t,r){if(e&&e["!ref"]){var a=da(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Npe(e,t){var r=da(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=kn(r))}var jpe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,kpe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Spe=/<(?:\w:)?hyperlink [^>]*>/mg,_pe=/"(\w*:\w*)"/,Ape=/<(?:\w:)?col\b[^>]*[\/]?>/g,Cpe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Epe=/<(?:\w:)?pageMargins[^>]*\/>/g,c9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Tpe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ope=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Ppe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match(kpe);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var m=d.match(c9);m?$3(m[0],l,s,r):(m=d.match(Tpe))&&Dpe(m[0],m[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=d.slice(p,p+50).match(_pe);y&&Npe(l,y[1])}var v=d.match(Ope);v&&v[1]&&Gpe(v[1],s);var g=[];if(t.cellStyles){var b=d.match(Ape);b&&$pe(g,b)}f&&Ype(f[1],l,t,c,i,o);var w=u.match(Cpe);w&&(l["!autofilter"]=Hpe(w[0]));var j=[],N=u.match(jpe);if(N)for(p=0;p!=N.length;++p)j[p]=da(N[p].slice(N[p].indexOf('"')+1));var S=u.match(Spe);S&&Bpe(l,S,a);var E=u.match(Epe);if(E&&(l["!margins"]=Upe(hn(E[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=kn(c)),t.sheetRows>0&&l["!ref"]){var _=da(l["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=kn(_))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function Ipe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+kn(e[r])+'"/>';return t+"</mergeCells>"}function $3(e,t,r,a){var s=hn(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=la(Ba(s.codeName)))}function Dpe(e,t,r,a,s){$3(e.slice(0,e.indexOf(">")),r,a,s)}function Lpe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Au(Ea(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+ur("outlinePr",null,d)}!i&&!l||(s[s.length]=ur("sheetPr",l,o))}var Fpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Mpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Rpe(e){var t={sheet:1};return Fpe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Mpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=L3(e.password).toString(16).toUpperCase()),ur("sheetProtection",null,t)}function Bpe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=hn(Ba(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+la(i.location))):(i.Target="#"+la(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=da(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=un({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function Upe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function qpe(e){return gh(e),ur("pageMargins",null,e)}function $pe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=hn(t[a],!0);s.hidden&&(s.hidden=cs(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,F3(s.width)),N0(s);i<=o;)e[i++]=fs(s)}}function zpe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=ur("col",null,Nb(s,a)));return r[r.length]="</cols>",r.join("")}function Hpe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Wpe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:kn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Ql(s);o.s.r==o.e.r&&(o.e.r=Ql(t["!ref"]).e.r,s=kn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),ur("autoFilter",null,{ref:s})}var Vpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Gpe(e,t){t.Views||(t.Views=[{}]),(e.match(Vpe)||[]).forEach(function(r,a){var s=hn(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),cs(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function Kpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),ur("sheetViews",ur("sheetView",null,s),{})}function Xpe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Df[e.v];break;case"d":a&&a.cellDates?s=us(e.v,-1).toISOString():(e=fs(e),e.t="n",s=""+(e.v=qi(us(e.v)))),typeof e.z>"u"&&(e.z=rn[14]);break;default:s=e.v;break}var l=Oo("v",Ea(s)),c={r:t},d=F0(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=Oo("v",""+q3(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=ur("f",Ea(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),ur("c",l,c)}var Ype=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=ng("v"),o=ng("f");return function(c,d,u,f,m,p){for(var y=0,v="",g=[],b=[],w=0,j=0,N=0,S="",E,_,P=0,I=0,U,C,O=0,R=0,z=Array.isArray(p.CellXf),H,Q=[],J=[],re=Array.isArray(d),X=[],ee={},W=!1,T=!!u.sheetStubs,q=c.split(t),V=0,B=q.length;V!=B;++V){v=q[V].trim();var K=v.length;if(K!==0){var oe=0;e:for(y=0;y<K;++y)switch(v[y]){case">":if(v[y-1]!="/"){++y;break e}if(u&&u.cellStyles){if(_=hn(v.slice(oe,y),!0),P=_.r!=null?parseInt(_.r,10):P+1,I=-1,u.sheetRows&&u.sheetRows<P)continue;ee={},W=!1,_.ht&&(W=!0,ee.hpt=parseFloat(_.ht),ee.hpx=rm(ee.hpt)),_.hidden=="1"&&(W=!0,ee.hidden=!0),_.outlineLevel!=null&&(W=!0,ee.level=+_.outlineLevel),W&&(X[P-1]=ee)}break;case"<":oe=y;break}if(oe>=y)break;if(_=hn(v.slice(oe,y),!0),P=_.r!=null?parseInt(_.r,10):P+1,I=-1,!(u.sheetRows&&u.sheetRows<P)){f.s.r>P-1&&(f.s.r=P-1),f.e.r<P-1&&(f.e.r=P-1),u&&u.cellStyles&&(ee={},W=!1,_.ht&&(W=!0,ee.hpt=parseFloat(_.ht),ee.hpx=rm(ee.hpt)),_.hidden=="1"&&(W=!0,ee.hidden=!0),_.outlineLevel!=null&&(W=!0,ee.level=+_.outlineLevel),W&&(X[P-1]=ee)),g=v.slice(y).split(e);for(var me=0;me!=g.length&&g[me].trim().charAt(0)=="<";++me);for(g=g.slice(me),y=0;y!=g.length;++y)if(v=g[y].trim(),v.length!==0){if(b=v.match(r),w=y,j=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,b!=null&&b.length===2){for(w=0,S=b[1],j=0;j!=S.length&&!((N=S.charCodeAt(j)-64)<1||N>26);++j)w=26*w+N;--w,I=w}else++I;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,_=hn(v.slice(0,j),!0),_.r||(_.r=un({r:P-1,c:I})),S=v.slice(j),E={t:""},(b=S.match(i))!=null&&b[1]!==""&&(E.v=la(b[1])),u.cellFormula){if((b=S.match(o))!=null&&b[1]!==""){if(E.f=la(Ba(b[1])).replace(/\r\n/g,`
`),u.xlfn||(E.f=O8(E.f)),b[0].indexOf('t="array"')>-1)E.F=(S.match(s)||[])[1],E.F.indexOf(":")>-1&&Q.push([da(E.F),E.F]);else if(b[0].indexOf('t="shared"')>-1){C=hn(b[0]);var se=la(Ba(b[1]));u.xlfn||(se=O8(se)),J[parseInt(C.si,10)]=[C,se,_.r]}}else(b=S.match(/<f[^>]*\/>/))&&(C=hn(b[0]),J[C.si]&&(E.f=V0e(J[C.si][1],J[C.si][2],_.r)));var de=Ls(_.r);for(j=0;j<Q.length;++j)de.r>=Q[j][0].s.r&&de.r<=Q[j][0].e.r&&de.c>=Q[j][0].s.c&&de.c<=Q[j][0].e.c&&(E.F=Q[j][1])}if(_.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(T)E.t="z";else continue;else E.t=_.t||"n";switch(f.s.c>I&&(f.s.c=I),f.e.c<I&&(f.e.c=I),E.t){case"n":if(E.v==""||E.v==null){if(!T)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!T)continue;E.t="z"}else U=dx[parseInt(E.v,10)],E.v=U.t,E.r=U.r,u.cellHTML&&(E.h=U.h);break;case"str":E.t="s",E.v=E.v!=null?Ba(E.v):"",u.cellHTML&&(E.h=b3(E.v));break;case"inlineStr":b=S.match(a),E.t="s",b!=null&&(U=D3(b[1]))?(E.v=U.t,u.cellHTML&&(E.h=U.h)):E.v="";break;case"b":E.v=cs(E.v);break;case"d":u.cellDates?E.v=us(E.v,1):(E.v=qi(us(E.v,1)),E.t="n");break;case"e":(!u||u.cellText!==!1)&&(E.w=E.v),E.v=uR[E.v];break}if(O=R=0,H=null,z&&_.s!==void 0&&(H=p.CellXf[_.s],H!=null&&(H.numFmtId!=null&&(O=H.numFmtId),u.cellStyles&&H.fillId!=null&&(R=H.fillId))),l9(E,O,R,u,m,p),u.cellDates&&z&&E.t=="n"&&hm(rn[O])&&(E.t="d",E.v=vb(E.v)),_.cm&&u.xlmeta){var Re=(u.xlmeta.Cell||[])[+_.cm-1];Re&&Re.type=="XLDAPR"&&(E.D=!0)}if(re){var he=Ls(_.r);d[he.r]||(d[he.r]=[]),d[he.r][he.c]=E}else d[_.r]=E}}}}X.length>0&&(d["!rows"]=X)}})();function Qpe(e,t,r,a){var s=[],i=[],o=da(e["!ref"]),l="",c,d="",u=[],f=0,m=0,p=e["!rows"],y=Array.isArray(e),v={r:d},g,b=-1;for(m=o.s.c;m<=o.e.c;++m)u[m]=Ds(m);for(f=o.s.r;f<=o.e.r;++f){for(i=[],d=li(f),m=o.s.c;m<=o.e.c;++m){c=u[m]+d;var w=y?(e[f]||[])[m]:e[c];w!==void 0&&(l=Xpe(w,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[f])&&(v={r:d},p&&p[f]&&(g=p[f],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=dg(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=ur("row",i.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},g=p[f],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=dg(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=ur("row","",v));return s.join("")}function d9(e,t,r,a){var s=[di,ur("worksheet",null,{xmlns:Bh[0],"xmlns:r":Bi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=da(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=kn(u)}a||(a={}),c["!comments"]=[];var f=[];Lpe(c,r,e,t,s),s[s.length]=ur("dimension",null,{ref:d}),s[s.length]=Kpe(c,t,e,r),t.sheetFormat&&(s[s.length]=ur("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=zpe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Qpe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=Rpe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Wpe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Ipe(c["!merges"]));var m=-1,p,y=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(y=Ca(a,-1,Ea(v[1].Target).replace(/#.*$/,""),Fn.HLINK),p["r:id"]="rId"+y),(m=v[1].Target.indexOf("#"))>-1&&(p.location=Ea(v[1].Target.slice(m+1))),v[1].Tooltip&&(p.tooltip=Ea(v[1].Tooltip)),s[s.length]=ur("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=qpe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Oo("ignoredErrors",ur("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(y=Ca(a,-1,"../drawings/drawing"+(e+1)+".xml",Fn.DRAW),s[s.length]=ur("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=f),c["!comments"].length>0&&(y=Ca(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Fn.VML),s[s.length]=ur("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Jpe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Zpe(e,t,r){var a=Rt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=dg(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,m=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var y=Array.isArray(r)?(r[d.r]||[])[d.c]:r[un(d)];y&&(f<0&&(f=p),m=p)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,m))}var v=a.l;return a.l=c,a.write_shift(4,l),a.l=v,a.length>a.l?a.slice(0,a.l):a}function eme(e,t,r,a){var s=Zpe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Wt(e,0,s)}var tme=zh,rme=xm;function nme(){}function ame(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=oce(e),r}function sme(e,t,r){r==null&&(r=Rt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return yy({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),iR(e,r),r.slice(0,r.l)}function ime(e){var t=cd(e);return[t]}function ome(e,t,r){return r==null&&(r=Rt(8)),Uh(t,r)}function lme(e){var t=qh(e);return[t]}function cme(e,t,r){return r==null&&(r=Rt(4)),$h(t,r)}function dme(e){var t=cd(e),r=e.read_shift(1);return[t,r,"b"]}function ume(e,t,r){return r==null&&(r=Rt(9)),Uh(t,r),r.write_shift(1,e.v?1:0),r}function fme(e){var t=qh(e),r=e.read_shift(1);return[t,r,"b"]}function hme(e,t,r){return r==null&&(r=Rt(5)),$h(t,r),r.write_shift(1,e.v?1:0),r}function pme(e){var t=cd(e),r=e.read_shift(1);return[t,r,"e"]}function mme(e,t,r){return r==null&&(r=Rt(9)),Uh(t,r),r.write_shift(1,e.v),r}function xme(e){var t=qh(e),r=e.read_shift(1);return[t,r,"e"]}function gme(e,t,r){return r==null&&(r=Rt(8)),$h(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function vme(e){var t=cd(e),r=e.read_shift(4);return[t,r,"s"]}function yme(e,t,r){return r==null&&(r=Rt(12)),Uh(t,r),r.write_shift(4,t.v),r}function bme(e){var t=qh(e),r=e.read_shift(4);return[t,r,"s"]}function wme(e,t,r){return r==null&&(r=Rt(8)),$h(t,r),r.write_shift(4,t.v),r}function Nme(e){var t=cd(e),r=sl(e);return[t,r,"n"]}function jme(e,t,r){return r==null&&(r=Rt(16)),Uh(t,r),Th(e.v,r),r}function u9(e){var t=qh(e),r=sl(e);return[t,r,"n"]}function kme(e,t,r){return r==null&&(r=Rt(12)),$h(t,r),Th(e.v,r),r}function Sme(e){var t=cd(e),r=E3(e);return[t,r,"n"]}function _me(e,t,r){return r==null&&(r=Rt(12)),Uh(t,r),oR(e.v,r),r}function Ame(e){var t=qh(e),r=E3(e);return[t,r,"n"]}function Cme(e,t,r){return r==null&&(r=Rt(8)),$h(t,r),oR(e.v,r),r}function Eme(e){var t=cd(e),r=_3(e);return[t,r,"is"]}function Tme(e){var t=cd(e),r=ll(e);return[t,r,"str"]}function Ome(e,t,r){return r==null&&(r=Rt(12+4*e.v.length)),Uh(t,r),co(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Pme(e){var t=qh(e),r=ll(e);return[t,r,"str"]}function Ime(e,t,r){return r==null&&(r=Rt(8+4*e.v.length)),$h(t,r),co(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Dme(e,t,r){var a=e.l+t,s=cd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=wb(e,a-e.l,r);o[3]=tl(l,null,s,r.supbooks,r)}else e.l=a;return o}function Lme(e,t,r){var a=e.l+t,s=cd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=wb(e,a-e.l,r);o[3]=tl(l,null,s,r.supbooks,r)}else e.l=a;return o}function Fme(e,t,r){var a=e.l+t,s=cd(e);s.r=r["!row"];var i=sl(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=wb(e,a-e.l,r);o[3]=tl(l,null,s,r.supbooks,r)}else e.l=a;return o}function Mme(e,t,r){var a=e.l+t,s=cd(e);s.r=r["!row"];var i=ll(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=wb(e,a-e.l,r);o[3]=tl(l,null,s,r.supbooks,r)}else e.l=a;return o}var Rme=zh,Bme=xm;function Ume(e,t){return t==null&&(t=Rt(4)),t.write_shift(4,e),t}function qme(e,t){var r=e.l+t,a=zh(e),s=A3(e),i=ll(e),o=ll(e),l=ll(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function $me(e,t){var r=Rt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));xm({s:Ls(e[0]),e:Ls(e[0])},r),C3("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return co(s||"",r),co(e[1].Tooltip||"",r),co("",r),r.slice(0,r.l)}function zme(){}function Hme(e,t,r){var a=e.l+t,s=lR(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=ppe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Wme(e,t,r){var a=e.l+t,s=zh(e),i=[s];if(r.cellFormula){var o=xpe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function Vme(e,t,r){r==null&&(r=Rt(18));var a=Nb(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var f9=["left","right","top","bottom","header","footer"];function Gme(e){var t={};return f9.forEach(function(r){t[r]=sl(e)}),t}function Kme(e,t){return t==null&&(t=Rt(48)),gh(e),f9.forEach(function(r){Th(e[r],t)}),t}function Xme(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Yme(e,t,r){r==null&&(r=Rt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Qme(e){var t=Rt(24);return t.write_shift(4,4),t.write_shift(4,1),xm(e,t),t}function Jme(e,t){return t==null&&(t=Rt(66)),t.write_shift(2,e.password?L3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Zme(){}function exe(){}function txe(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,y,v,g,b,w,j,N,S,E=[];l.biff=12,l["!row"]=0;var _=0,P=!1,I=[],U={},C=l.supbooks||s.supbooks||[[]];if(C.sharedf=U,C.arrayf=I,C.SheetNames=s.SheetNames||s.Sheets.map(function(re){return re.name}),!l.supbooks&&(l.supbooks=C,s.Names))for(var O=0;O<s.Names.length;++O)C[0][O+1]=s.Names[O];var R=[],z=[],H=!1;ug[16]={n:"BrtShortReal",f:u9};var Q;if(If(e,function(X,ee,W){if(!m)switch(W){case 148:d=X;break;case 0:p=X,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),N=li(g=p.r),l["!row"]=p.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=rm(X.hpt)),z[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:X[2]},X[2]){case"n":y.v=X[1];break;case"s":j=dx[X[1]],y.v=j.t,y.r=j.r;break;case"b":y.v=!!X[1];break;case"e":y.v=X[1],l.cellText!==!1&&(y.w=Df[y.v]);break;case"str":y.t="s",y.v=X[1];break;case"is":y.t="s",y.v=X[1].t;break}if((v=o.CellXf[X[0].iStyleRef])&&l9(y,v.numFmtId,null,l,i,o),b=X[0].c==-1?b+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Ds(b)+N]=y,l.cellFormula){for(P=!1,_=0;_<I.length;++_){var T=I[_];p.r>=T[0].s.r&&p.r<=T[0].e.r&&b>=T[0].s.c&&b<=T[0].e.c&&(y.F=kn(T[0]),P=!0)}!P&&X.length>3&&(y.f=X[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),l.cellDates&&v&&y.t=="n"&&hm(rn[v.numFmtId])){var q=ch(y.v);q&&(y.t="d",y.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}Q&&(Q.type=="XLDAPR"&&(y.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;y={t:"z",v:void 0},b=X[0].c==-1?b+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Ds(b)+N]=y,u.s.r>p.r&&(u.s.r=p.r),u.s.c>b&&(u.s.c=b),u.e.r<p.r&&(u.e.r=p.r),u.e.c<b&&(u.e.c=b),Q&&(Q.type=="XLDAPR"&&(y.D=!0),Q=void 0);break;case 176:E.push(X);break;case 49:Q=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var V=a["!id"][X.relId];for(V?(X.Target=V.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=V):X.relId==""&&(X.Target="#"+X.loc),g=X.rfx.s.r;g<=X.rfx.e.r;++g)for(b=X.rfx.s.c;b<=X.rfx.e.c;++b)l.dense?(c[g]||(c[g]=[]),c[g][b]||(c[g][b]={t:"z",v:void 0}),c[g][b].l=X):(w=un({c:b,r:g}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=X);break;case 426:if(!l.cellFormula)break;I.push(X),S=l.dense?c[g][b]:c[Ds(b)+N],S.f=tl(X[1],u,{r:p.r,c:b},C,l),S.F=kn(X[0]);break;case 427:if(!l.cellFormula)break;U[un(X[0].s)]=X[1],S=l.dense?c[g][b]:c[Ds(b)+N],S.f=tl(X[1],u,{r:p.r,c:b},C,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)R[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},H||(H=!0,F3(X.w/256)),N0(R[X.e+1]);break;case 161:c["!autofilter"]={ref:kn(X)};break;case 476:c["!margins"]=X;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),X.name&&(s.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),X.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=kn(d||u)),l.sheetRows&&c["!ref"]){var J=da(c["!ref"]);l.sheetRows<=+J.e.r&&(J.e.r=l.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=kn(J))}return E.length>0&&(c["!merges"]=E),R.length>0&&(c["!cols"]=R),z.length>0&&(c["!rows"]=z),c}function rxe(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=fs(t),t.z=t.z||rn[14],t.v=qi(us(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=F0(s.cellXfs,t,s),t.l&&i["!links"].push([un(c),t.l]),t.c&&i["!comments"].push([un(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=q3(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Wt(e,18,wme(t,c)):Wt(e,7,yme(t,c))):(c.t="str",o?Wt(e,17,Ime(t,c)):Wt(e,6,Ome(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Wt(e,13,Cme(t,c)):Wt(e,2,_me(t,c)):o?Wt(e,16,kme(t,c)):Wt(e,5,jme(t,c)),!0;case"b":return c.t="b",o?Wt(e,15,hme(t,c)):Wt(e,4,ume(t,c)),!0;case"e":return c.t="e",o?Wt(e,14,gme(t,c)):Wt(e,3,mme(t,c)),!0}return o?Wt(e,12,cme(t,c)):Wt(e,1,ome(t,c)),!0}function nxe(e,t,r,a){var s=da(t["!ref"]||"A1"),i,o="",l=[];Wt(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=li(u),eme(e,t,s,u);var f=!1;if(u<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){u===s.s.r&&(l[m]=Ds(m)),i=l[m]+o;var p=c?(t[u]||[])[m]:t[i];if(!p){f=!1;continue}f=rxe(e,p,u,m,a,t,f)}}Wt(e,146)}function axe(e,t){!t||!t["!merges"]||(Wt(e,177,Ume(t["!merges"].length)),t["!merges"].forEach(function(r){Wt(e,176,Bme(r))}),Wt(e,178))}function sxe(e,t){!t||!t["!cols"]||(Wt(e,390),t["!cols"].forEach(function(r,a){r&&Wt(e,60,Vme(a,r))}),Wt(e,391))}function ixe(e,t){!t||!t["!ref"]||(Wt(e,648),Wt(e,649,Qme(da(t["!ref"]))),Wt(e,650))}function oxe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ca(r,-1,a[1].Target.replace(/#.*$/,""),Fn.HLINK);Wt(e,494,$me(a,s))}}),delete t["!links"]}function lxe(e,t,r,a){if(t["!comments"].length>0){var s=Ca(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Fn.VML);Wt(e,551,C3("rId"+s)),t["!legacy"]=s}}function cxe(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:kn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Ql(i);l.s.r==l.e.r&&(l.e.r=Ql(t["!ref"]).e.r,i=kn(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Wt(e,161,xm(da(i))),Wt(e,162)}}function dxe(e,t,r){Wt(e,133),Wt(e,137,Yme(t,r)),Wt(e,138),Wt(e,134)}function uxe(e,t){t["!protect"]&&Wt(e,535,Jme(t["!protect"]))}function fxe(e,t,r,a){var s=Xl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=da(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Wt(s,129),(r.vbaraw||o["!outline"])&&Wt(s,147,sme(l,o["!outline"])),Wt(s,148,rme(c)),dxe(s,o,r.Workbook),sxe(s,o),nxe(s,o,e,t),uxe(s,o),cxe(s,o,r,e),axe(s,o),oxe(s,o,a),o["!margins"]&&Wt(s,476,Kme(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&ixe(s,o),lxe(s,o,e,a),Wt(s,130),s.end()}function hxe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=la((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function pxe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=hxe(f);u.s.r=u.s.c=0,u.e.c=l,d=Ds(l),m[0].forEach(function(p,y){o[d+li(y)]={t:"n",v:p,z:m[1]},c=y}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=kn(u)),o}function mxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(c9);return l&&$3(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function xxe(e,t){e.l+=10;var r=ll(e);return{name:r}}function gxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return If(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var z3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],vxe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],yxe=[],bxe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function F8(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=cs(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function M8(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=cs(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function h9(e){M8(e.WBProps,z3),M8(e.CalcPr,bxe),F8(e.WBView,vxe),F8(e.Sheets,yxe),Sp.date1904=cs(e.WBProps.date1904)}function wxe(e){return!e.Workbook||!e.Workbook.WBProps?"false":cs(e.Workbook.WBProps.date1904)?"true":"false"}var Nxe="][*?/\\".split("");function p9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Nxe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function jxe(e,t,r){e.forEach(function(a,s){p9(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function kxe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];jxe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)wpe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Sxe=/<\w+:workbook/;function _xe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(dl,function(c,d){var u=hn(c);switch(Bu(u[0])){case"<?xml":break;case"<workbook":c.match(Sxe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":z3.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=cs(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Ba(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=la(Ba(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Ba(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),cs(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=la(Ba(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Bh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return h9(r),r}function m9(e){var t=[di];t[t.length]=ur("workbook",null,{xmlns:Bh[0],"xmlns:r":Bi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(z3.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=ur("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Ea(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=ur("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=ur("definedName",Ea(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Axe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Sk(e),r.name=ll(e),r}function Cxe(e,t){return t||(t=Rt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),C3(e.strRelID,t),co(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Exe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?ll(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function Txe(e,t){t||(t=Rt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),iR(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Oxe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Pxe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=lce(e),o=mpe(e,0,r),l=A3(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Ixe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],ug[16]={n:"BrtFRTArchID$",f:Oxe},If(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=tl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),h9(r),r.Names=i,r.supbooks=o,r}function Dxe(e,t){Wt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Wt(e,156,Cxe(s))}Wt(e,144)}function Lxe(e,t){t||(t=Rt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return co("SheetJS",t),co(fy.version,t),co(fy.version,t),co("7262",t),t.length>t.l?t.slice(0,t.l):t}function Fxe(e,t){t||(t=Rt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Mxe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Wt(e,135),Wt(e,158,Fxe(s)),Wt(e,136))}}function Rxe(e,t){var r=Xl();return Wt(r,131),Wt(r,128,Lxe()),Wt(r,153,Txe(e.Workbook&&e.Workbook.WBProps||null)),Mxe(r,e),Dxe(r,e),Wt(r,132),r.end()}function Bxe(e,t,r){return t.slice(-4)===".bin"?Ixe(e,r):_xe(e,r)}function Uxe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?txe(e,a,r,s,i,o,l):Ppe(e,a,r,s,i,o,l)}function qxe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?gxe(e,a,r,s,i):mxe(e,a,r,s,i)}function $xe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?H0e():W0e()}function zxe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?$0e():z0e()}function Hxe(e,t,r,a){return t.slice(-4)===".bin"?Bfe(e,r,a):Afe(e,r,a)}function Wxe(e,t,r){return XR(e,r)}function Vxe(e,t,r){return t.slice(-4)===".bin"?Vue(e,r):zue(e,r)}function Gxe(e,t,r){return t.slice(-4)===".bin"?M0e(e,r):C0e(e,r)}function Kxe(e,t,r){return t.slice(-4)===".bin"?S0e(e):j0e(e)}function Xxe(e,t,r,a){return r.slice(-4)===".bin"?_0e(e,t,r,a):void 0}function Yxe(e,t,r){return t.slice(-4)===".bin"?b0e(e,t,r):N0e(e,t,r)}function Qxe(e,t,r){return(t.slice(-4)===".bin"?Rxe:m9)(e)}function Jxe(e,t,r,a,s){return(t.slice(-4)===".bin"?fxe:d9)(e,r,a,s)}function Zxe(e,t,r){return(t.slice(-4)===".bin"?Xfe:GR)(e,r)}function ege(e,t,r){return(t.slice(-4)===".bin"?Xue:BR)(e,r)}function tge(e,t,r){return(t.slice(-4)===".bin"?R0e:JR)(e)}function rge(e){return(e.slice(-4)===".bin"?w0e:YR)()}var x9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,g9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ld(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(x9),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(g9),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function nge(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(x9),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(g9),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var fx;function age(e,t){var r=fx[e]||la(e);return r==="General"?Ch(t):id(r,t)}function sge(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=cs(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=us(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[la(t)]=s}function ige(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Df[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=rg(e.v):e.w=Ch(e.v):e.w=age(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=fx[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&hm(a)){var s=ch(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function oge(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=yfe[a.Pattern]||a.Pattern)}e[t.ID]=t}function lge(e,t,r,a,s,i,o,l,c,d){var u="General",f=a.StyleID,m={};d=d||{};var p=[],y=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=cs(e);break;case"String":a.t="s",a.r=e8(la(e)),a.v=e.indexOf("<")>-1?la(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(us(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=la(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=uR[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=e8(t||e));break}if(ige(a,u,d),d.cellFormula!==!1)if(a.Formula){var v=la(a.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),a.f=kp(v,s),delete a.Formula,a.ArrayRange=="RC"?a.F=kp("RC:RC",s):a.ArrayRange&&(a.F=kp(a.ArrayRange,s),c.push([da(a.F),a.F]))}else for(y=0;y<c.length;++y)s.r>=c[y][0].s.r&&s.r<=c[y][0].e.r&&s.c>=c[y][0].s.c&&s.c<=c[y][0].e.c&&(a.F=c[y][1]);d.cellStyles&&(p.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function cge(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function _j(e,t){var r=t||{};pm();var a=Xm(w3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Ba(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=fs(r);return o.type="string",tm.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(we){s.indexOf("<"+we)>=0&&(i=!0)}),i)return Kge(a,r);fx={"General Number":"General","General Date":rn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":rn[15],"Short Date":rn[14],"Long Time":rn[19],"Medium Time":rn[18],"Short Time":rn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:rn[2],Standard:rn[4],Percent:rn[10],Scientific:rn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},f=[],m=r.dense?[]:{},p="",y={},v={},g=Ld('<Data ss:Type="String">'),b=0,w=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},E={},_="",P=0,I=[],U={},C={},O=0,R=[],z=[],H={},Q=[],J,re=!1,X=[],ee=[],W={},T=0,q=0,V={Sheets:[],WBProps:{date1904:!1}},B={};sg.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=sg.exec(a);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?lge(a.slice(b,l.index),_,g,c[c.length-1][0]=="comment"?H:y,{c:w,r:j},S,Q[w],v,X,r):(_="",g=Ld(l[0]),b=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(z.length>0&&(y.c=z),(!r.sheetRows||r.sheetRows>j)&&y.v!==void 0&&(r.dense?(m[j]||(m[j]=[]),m[j][w]=y):m[Ds(w)+li(j)]=y),y.HRef&&(y.l={Target:la(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(T=w+(parseInt(y.MergeAcross,10)|0),q=j+(parseInt(y.MergeDown,10)|0),I.push({s:{c:w,r:j},e:{c:T,r:q}})),!r.sheetStubs)y.MergeAcross?w=T+1:++w;else if(y.MergeAcross||y.MergeDown){for(var oe=w;oe<=T;++oe)for(var me=j;me<=q;++me)(oe>w||me>j)&&(r.dense?(m[me]||(m[me]=[]),m[me][oe]={t:"z"}):m[Ds(oe)+li(me)]={t:"z"});w=T+1}else++w;else y=nge(l[0]),y.Index&&(w=+y.Index-1),w<N.s.c&&(N.s.c=w),w>N.e.c&&(N.e.c=w),l[0].slice(-2)==="/>"&&++w,z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),l[0].slice(-2)==="/>"&&(v=Ld(l[0]),v.Index&&(j=+v.Index-1)),w=0,++j):(v=Ld(l[0]),v.Index&&(j=+v.Index-1),W={},(v.AutoFitHeight=="0"||v.Height)&&(W.hpx=parseInt(v.Height,10),W.hpt=dg(W.hpx),ee[j]=W),v.Hidden=="1"&&(W.hidden=!0,ee[j]=W));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));f.push(p),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(m["!ref"]=kn(N),r.sheetRows&&r.sheetRows<=N.e.r&&(m["!fullref"]=m["!ref"],N.e.r=r.sheetRows-1,m["!ref"]=kn(N))),I.length&&(m["!merges"]=I),Q.length>0&&(m["!cols"]=Q),ee.length>0&&(m["!rows"]=ee),u[p]=m}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=w=0,c.push([l[3],!1]),d=Ld(l[0]),p=la(d.Name),m=r.dense?[]:{},I=[],X=[],ee=[],B={name:p,Hidden:0},V.Sheets.push(B);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],re=!1}break;case"style":l[1]==="/"?oge(S,E,r):E=Ld(l[0]);break;case"numberformat":E.nf=la(Ld(l[0]).Format||"General"),fx[E.nf]&&(E.nf=fx[E.nf]);for(var se=0;se!=392&&rn[se]!=E.nf;++se);if(se==392){for(se=57;se!=392;++se)if(rn[se]==null){Nf(E.nf,se);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=Ld(l[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!re&&J.wpx>10){re=!0,al=WR;for(var de=0;de<Q.length;++de)Q[de]&&N0(Q[de])}re&&N0(J),Q[J.Index-1||Q.length]=J;for(var Re=0;Re<+J.Span;++Re)Q[Q.length]=fs(J);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var he=hn(l[0]),Ue={Name:he.Name,Ref:kp(he.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(Ue.Sheet=V.Sheets.length-1),V.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=a.slice(P,l.index):P=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=Ld(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Ice(U,K,a.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));cge(H),z.push(H)}else c.push([l[3],!1]),d=Ld(l[0]),H={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Oe=Ld(l[0]);m["!autofilter"]={ref:kp(Oe.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return $8(a,r);var le=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:le=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:le=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:le=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:le=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(O,l.index)){case"SheetHidden":B.Hidden=1;break;case"SheetVeryHidden":B.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+hn(l[0]).Margin)||(m["!margins"].header=+hn(l[0]).Margin);break;case"footer":m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+hn(l[0]).Margin)||(m["!margins"].footer=+hn(l[0]).Margin);break;case"pagemargins":var te=hn(l[0]);m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+te.Top)||(m["!margins"].top=+te.Top),isNaN(+te.Left)||(m["!margins"].left=+te.Left),isNaN(+te.Right)||(m["!margins"].right=+te.Right),isNaN(+te.Bottom)||(m["!margins"].bottom=+te.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:le=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:le=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:le=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:le=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:le=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:le=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:le=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:le=!1}break;case"smarttags":break;default:le=!1;break}if(le||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?sge(C,K,R,a.slice(O,l.index)):(R=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Se={};return!r.bookSheets&&!r.bookProps&&(Se.Sheets=u),Se.SheetNames=f,Se.Workbook=V,Se.SSF=fs(rn),Se.Props=U,Se.Custprops=C,Se}function Pk(e,t){switch(W3(t=t||{}),t.type||"base64"){case"base64":return _j(Nc(e),t);case"binary":case"buffer":case"file":return _j(e,t);case"array":return _j(D0(e),t)}}function dge(e,t){var r=[];return e.Props&&r.push(Dce(e.Props,t)),e.Custprops&&r.push(Lce(e.Props,e.Custprops)),r.join("")}function uge(){return""}function fge(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(ur("NumberFormat",null,{"ss:Format":Ea(rn[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(ur("Style",i.join(""),o))}),ur("Styles",r.join(""))}function v9(e){return ur("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+B3(e.Ref,{r:0,c:0})})}function hge(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(v9(s)))}return ur("Names",r.join(""))}function pge(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(v9(l)))}return i.join("")}function mge(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(ur("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(ur("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(ur("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(ur("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Oo("ProtectContents","True")),e["!protect"].objects&&s.push(Oo("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Oo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Oo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Oo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":ur("WorksheetOptions",s.join(""),{xmlns:mc.x})}function xge(e){return e.map(function(t){var r=Mle(t.t||""),a=ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ur("Comment",a,{"ss:Author":t.a})}).join("")}function gge(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Ea(B3(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Ls(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Ea(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Ea(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",m="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=Df[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||rn[14]);break;case"s":f="String",m=Fle(e.v||"");break}var p=F0(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var y=e.v!=null?m:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+y+"</Data>";return(e.c||[]).length>0&&(v+=xge(e.c)),ur("Cell",v,l)}function vge(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=rm(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function yge(e,t,r,a){if(!e["!ref"])return"";var s=da(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,b){N0(g);var w=!!g.width,j=Nb(b,g),N={"ss:Index":b+1};w&&(N["ss:Width"]=lg(j.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(ur("Column",null,N))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[vge(d,(e["!rows"]||[])[d])],f=s.s.c;f<=s.e.c;++f){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>d)&&!(i[o].e.c<f)&&!(i[o].e.r<d)){(i[o].s.c!=f||i[o].s.r!=d)&&(m=!0);break}if(!m){var p={r:d,c:f},y=un(p),v=c?(e[d]||[])[f]:e[y];u.push(gge(v,y,e,t,r,a,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function bge(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?pge(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?yge(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(mge(i,t,e,r)),a.join("")}function wge(e,t){t||(t={}),e.SSF||(e.SSF=fs(rn)),e.SSF&&(pm(),mb(e.SSF),t.revssf=gb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(dge(e,t)),r.push(uge()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(ur("Worksheet",bge(a,t,e),{"ss:Name":Ea(e.SheetNames[a])}));return r[2]=fge(e,t),r[3]=hge(e),di+ur("Workbook",r.join(""),{xmlns:mc.ss,"xmlns:o":mc.o,"xmlns:x":mc.x,"xmlns:ss":mc.ss,"xmlns:dt":mc.dt,"xmlns:html":mc.html})}function Nge(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=hce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=pce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var jge=[60,1084,2066,2165,2175];function kge(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=pf(r,r.l),d=Ik[c],u=0;d!=null&&jge.indexOf(c)>-1;)i=pf(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=Ik[c=pf(r,r.l)];var f=oo(o);To(f,0);var m=0;f.lens=[];for(var p=0;p<o.length;++p)f.lens.push(m),m+=o[p].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function vu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=rn[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Df[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=rg(e.v):e.w=Ch(e.v):e.w=id(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&hm(rn[a]||String(a))){var s=ch(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Mv(e,t,r){return{v:e,ixfe:t,t:r}}function Sge(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},f,m="",p,y,v,g,b={},w=[],j,N,S=[],E=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},I=function(qe){return qe<8?ph[qe]:qe<64&&E[qe-8]||ph[qe]},U=function(qe,Ze,Vt){var Dt=Ze.XF.data;if(!(!Dt||!Dt.patternType||!Vt||!Vt.cellStyles)){Ze.s={},Ze.s.patternType=Dt.patternType;var dt;(dt=og(I(Dt.icvFore)))&&(Ze.s.fgColor={rgb:dt}),(dt=og(I(Dt.icvBack)))&&(Ze.s.bgColor={rgb:dt})}},C=function(qe,Ze,Vt){if(!(W>1)&&!(Vt.sheetRows&&qe.r>=Vt.sheetRows)){if(Vt.cellStyles&&Ze.XF&&Ze.XF.data&&U(qe,Ze,Vt),delete Ze.ixfe,delete Ze.XF,f=qe,m=un(qe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),qe.r<o.s.r&&(o.s.r=qe.r),qe.c<o.s.c&&(o.s.c=qe.c),qe.r+1>o.e.r&&(o.e.r=qe.r+1),qe.c+1>o.e.c&&(o.e.c=qe.c+1),Vt.cellFormula&&Ze.f){for(var Dt=0;Dt<w.length;++Dt)if(!(w[Dt][0].s.c>qe.c||w[Dt][0].s.r>qe.r)&&!(w[Dt][0].e.c<qe.c||w[Dt][0].e.r<qe.r)){Ze.F=kn(w[Dt][0]),(w[Dt][0].s.c!=qe.c||w[Dt][0].s.r!=qe.r)&&delete Ze.f,Ze.f&&(Ze.f=""+tl(w[Dt][1],o,qe,X,O));break}}Vt.dense?(s[qe.r]||(s[qe.r]=[]),s[qe.r][qe.c]=Ze):s[m]=Ze}},O={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var R,z=[],H=[],Q=[],J=[],re=!1,X=[];X.SheetNames=O.snames,X.sharedf=O.sharedf,X.arrayf=O.arrayf,X.names=[],X.XTI=[];var ee=0,W=0,T=0,q=[],V=[],B;O.codepage=1200,zd(1200);for(var K=!1;e.l<e.length-1;){var oe=e.l,me=e.read_shift(2);if(me===0&&ee===10)break;var se=e.l===e.length?0:e.read_shift(2),de=Ik[me];if(de&&de.f){if(t.bookSheets&&ee===133&&me!==133)break;if(ee=me,de.r===2||de.r==12){var Re=e.read_shift(2);if(se-=2,!O.enc&&Re!==me&&((Re&255)<<8|Re>>8)!==me)throw new Error("rt mismatch: "+Re+"!="+me);de.r==12&&(e.l+=10,se-=10)}var he={};if(me===10?he=de.f(e,se,O):he=kge(me,de,e,se,O),W==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(me){case 34:r.opts.Date1904=_.WBProps.date1904=he;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=he,!t.password)throw new Error("File is password-protected");if(he.valid==null)throw new Error("Encryption scheme unsupported");if(!he.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=he;break;case 66:var Ue=Number(he);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}zd(O.codepage=Ue),K=!0;break;case 317:O.rrtabid=he;break;case 25:O.winlocked=he;break;case 439:r.opts.RefreshAll=he;break;case 12:r.opts.CalcCount=he;break;case 16:r.opts.CalcDelta=he;break;case 17:r.opts.CalcIter=he;break;case 13:r.opts.CalcMode=he;break;case 14:r.opts.CalcPrecision=he;break;case 95:r.opts.CalcSaveRecalc=he;break;case 15:O.CalcRefMode=he;break;case 2211:r.opts.FullCalc=he;break;case 129:he.fDialog&&(s["!type"]="dialog"),he.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),he.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(he);break;case 430:X.push([he]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(he);break;case 24:case 536:B={Name:he.Name,Ref:tl(he.rgce,o,null,X,O)},he.itab>0&&(B.Sheet=he.itab-1),X.names.push(B),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(he),he.Name=="_xlnm._FilterDatabase"&&he.itab>0&&he.rgce&&he.rgce[0]&&he.rgce[0][0]&&he.rgce[0][0][0]=="PtgArea3d"&&(V[he.itab-1]={ref:kn(he.rgce[0][0][1][2])});break;case 22:O.ExternCount=he;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(he),X.XTI=X.XTI.concat(he);break;case 2196:if(O.biff<8)break;B!=null&&(B.Comment=he[1]);break;case 18:s["!protect"]=he;break;case 19:he!==0&&O.WTF&&console.error("Password verifier: "+he);break;case 133:i[he.pos]=he,O.snames.push(he.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=kn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Oe=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=kn(o),o.e.r=Oe}o.e.r++,o.e.c++}z.length>0&&(s["!merges"]=z),H.length>0&&(s["!objects"]=H),Q.length>0&&(s["!cols"]=Q),J.length>0&&(s["!rows"]=J),_.Sheets.push(P)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[he.BIFFVer]||8),O.biffguess=he.BIFFVer==0,he.BIFFVer==0&&he.dt==4096&&(O.biff=5,K=!0,zd(O.codepage=28591)),O.biff==8&&he.BIFFVer==0&&he.dt==16&&(O.biff=2),W++)break;if(s=t.dense?[]:{},O.biff<8&&!K&&(K=!0,zd(O.codepage=t.codepage||1252)),O.biff<5||he.BIFFVer==0&&he.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var le={pos:e.l-se,name:d};i[le.pos]=le,O.snames.push(d)}else d=(i[oe]||{name:""}).name;he.dt==32&&(s["!type"]="chart"),he.dt==64&&(s["!type"]="macro"),z=[],H=[],O.arrayf=w=[],Q=[],J=[],re=!1,P={Hidden:(i[oe]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[he.r]||[])[he.c]:s[un({c:he.c,r:he.r})])&&++he.c,j={ixfe:he.ixfe,XF:S[he.ixfe]||{},v:he.val,t:"n"},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t);break;case 5:case 517:j={ixfe:he.ixfe,XF:S[he.ixfe],v:he.val,t:he.t},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t);break;case 638:j={ixfe:he.ixfe,XF:S[he.ixfe],v:he.rknum,t:"n"},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t);break;case 189:for(var te=he.c;te<=he.C;++te){var Se=he.rkrec[te-he.c][0];j={ixfe:Se,XF:S[Se],v:he.rkrec[te-he.c][1],t:"n"},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:te,r:he.r},j,t)}break;case 6:case 518:case 1030:{if(he.val=="String"){l=he;break}if(j=Mv(he.val,he.cell.ixfe,he.tt),j.XF=S[j.ixfe],t.cellFormula){var we=he.formula;if(we&&we[0]&&we[0][0]&&we[0][0][0]=="PtgExp"){var Pe=we[0][0][1][0],fe=we[0][0][1][1],ue=un({r:Pe,c:fe});b[ue]?j.f=""+tl(he.formula,o,he.cell,X,O):j.F=((t.dense?(s[Pe]||[])[fe]:s[ue])||{}).F}else j.f=""+tl(he.formula,o,he.cell,X,O)}T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C(he.cell,j,t),l=he}break;case 7:case 519:if(l)l.val=he,j=Mv(he,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+tl(l.formula,o,l.cell,X,O)),T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(he);var Ee=un(he[0].s);if(p=t.dense?(s[he[0].s.r]||[])[he[0].s.c]:s[Ee],t.cellFormula&&p){if(!l||!Ee||!p)break;p.f=""+tl(he[1],o,he[0],X,O),p.F=kn(he[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;b[un(l.cell)]=he[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[un(l.cell)],(p||{}).f=""+tl(he[0],o,f,X,O)}}break;case 253:j=Mv(c[he.isst].t,he.ixfe,"s"),c[he.isst].h&&(j.h=c[he.isst].h),j.XF=S[j.ixfe],T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:he.ixfe,XF:S[he.ixfe],t:"z"},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t));break;case 190:if(t.sheetStubs)for(var Ye=he.c;Ye<=he.C;++Ye){var xe=he.ixfe[Ye-he.c];j={ixfe:xe,XF:S[xe],t:"z"},T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:Ye,r:he.r},j,t)}break;case 214:case 516:case 4:j=Mv(he.val,he.ixfe,"s"),j.XF=S[j.ixfe],T>0&&(j.z=q[j.ixfe>>8&63]),vu(j,t,r.opts.Date1904),C({c:he.c,r:he.r},j,t);break;case 0:case 512:W===1&&(o=he);break;case 252:c=he;break;case 1054:if(O.biff==4){q[T++]=he[1];for(var ve=0;ve<T+163&&rn[ve]!=he[1];++ve);ve>=163&&Nf(he[1],T+163)}else Nf(he[1],he[0]);break;case 30:{q[T++]=he;for(var Fe=0;Fe<T+163&&rn[Fe]!=he;++Fe);Fe>=163&&Nf(he,T+163)}break;case 229:z=z.concat(he);break;case 93:H[he.cmo[0]]=O.lastobj=he;break;case 438:O.lastobj.TxO=he;break;case 127:O.lastobj.ImData=he;break;case 440:for(g=he[0].s.r;g<=he[0].e.r;++g)for(v=he[0].s.c;v<=he[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[un({c:v,r:g})],p&&(p.l=he[1]);break;case 2048:for(g=he[0].s.r;g<=he[0].e.r;++g)for(v=he[0].s.c;v<=he[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[un({c:v,r:g})],p&&p.l&&(p.l.Tooltip=he[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(s[he[0].r]||[])[he[0].c]:s[un(he[0])];var $e=H[he[2]];p||(t.dense?(s[he[0].r]||(s[he[0].r]=[]),p=s[he[0].r][he[0].c]={t:"z"}):p=s[un(he[0])]={t:"z"},o.e.r=Math.max(o.e.r,he[0].r),o.s.r=Math.min(o.s.r,he[0].r),o.e.c=Math.max(o.e.c,he[0].c),o.s.c=Math.min(o.s.c,he[0].c)),p.c||(p.c=[]),y={a:he[1],t:$e.TxO.t},p.c.push(y)}break;case 2173:f0e(S[he.ixfe],he.ext);break;case 125:{if(!O.cellStyles)break;for(;he.e>=he.s;)Q[he.e--]={width:he.w/256,level:he.level||0,hidden:!!(he.flags&1)},re||(re=!0,F3(he.w/256)),N0(Q[he.e+1])}break;case 520:{var _e={};he.level!=null&&(J[he.r]=_e,_e.level=he.level),he.hidden&&(J[he.r]=_e,_e.hidden=!0),he.hpt&&(J[he.r]=_e,_e.hpt=he.hpt,_e.hpx=rm(he.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||gh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=he;break;case 161:s["!margins"]||gh(s["!margins"]={}),s["!margins"].header=he.header,s["!margins"].footer=he.footer;break;case 574:he.RTL&&(_.Views[0].RTL=!0);break;case 146:E=he;break;case 2198:R=he;break;case 140:N=he;break;case 442:d?P.CodeName=he||P.name:_.WBProps.CodeName=he||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+me.toString(16)),e.l+=se}return r.SheetNames=Xs(i).sort(function(Be,qe){return Number(Be)-Number(qe)}).map(function(Be){return i[Be].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&V.forEach(function(Be,qe){r.Sheets[r.SheetNames[qe]]["!autofilter"]=Be}),r.Strings=c,r.SSF=fs(rn),O.enc&&(r.Encryption=O.enc),R&&(r.Themes=R),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),X.names.length>0&&(_.Names=X.names),r.Workbook=_,r}var hx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _ge(e,t,r){var a=Gr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=v8(a,_k,hx.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Gr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=v8(o,Ak,hx.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(gR(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Age(e,t){var r=[],a=[],s=[],i=0,o,l=KI(_k,"n"),c=KI(Ak,"n");if(e.Props)for(o=Xs(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Xs(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)kR.indexOf(s[i][0])>-1||xR.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Gr.utils.cfb_add(t,"/SummaryInformation",y8(a,hx.SI,c,Ak)),(r.length||d.length)&&Gr.utils.cfb_add(t,"/DocumentSummaryInformation",y8(r,hx.DSI,l,_k,d.length?d:null,hx.UDI))}function y9(e,t){t||(t={}),W3(t),f3(),t.codepage&&u3(t.codepage);var r,a;if(e.FullPaths){if(Gr.find(e,"/encryption"))throw new Error("File is password-protected");r=Gr.find(e,"!CompObj"),a=Gr.find(e,"/Workbook")||Gr.find(e,"/Book")}else{switch(t.type){case"base64":e=vc(Nc(e));break;case"binary":e=vc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}To(e,0),a={content:e}}var s,i;if(r&&Nge(r),t.bookProps&&!t.bookSheets)s={};else{var o=Pn?"buffer":"array";if(a&&a.content)s=Sge(a.content,t);else if((i=Gr.find(e,"PerfectOffice_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else if((i=Gr.find(e,"NativeContent_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else throw(i=Gr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Gr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=U0e(e))}var l={};return e.FullPaths&&_ge(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function Cge(e,t){var r=t||{},a=Gr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Gr.utils.cfb_add(a,s,b9(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Age(e,a),r.biff==8&&e.vbaraw&&q0e(a,Gr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var ug={0:{f:Jpe},1:{f:ime},2:{f:Sme},3:{f:pme},4:{f:dme},5:{f:Nme},6:{f:Tme},7:{f:vme},8:{f:Mme},9:{f:Fme},10:{f:Dme},11:{f:Lme},12:{f:lme},13:{f:Ame},14:{f:xme},15:{f:fme},16:{f:u9},17:{f:Pme},18:{f:bme},19:{f:_3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Pxe},40:{},42:{},43:{f:Tfe},44:{f:Cfe},45:{f:Ife},46:{f:Lfe},47:{f:Dfe},48:{},49:{f:tce},50:{},51:{f:m0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:LR},62:{f:Eme},63:{f:k0e},64:{f:Zme},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:cl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Xme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ame},148:{f:tme,p:16},151:{f:zme},152:{},153:{f:Exe},154:{},155:{},156:{f:Axe},157:{},158:{},159:{T:1,f:Wue},160:{T:-1},161:{T:1,f:zh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Rme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:h0e},336:{T:-1},337:{f:v0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Sk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:DR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Hme},427:{f:Wme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Gme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:qme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Sk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:L0e},633:{T:1},634:{T:-1},635:{T:1,f:I0e},636:{T:-1},637:{f:sce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:xxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:exe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Ik={6:{f:kj},10:{f:Zf},12:{f:bi},13:{f:bi},14:{f:ni},15:{f:ni},16:{f:sl},17:{f:ni},18:{f:ni},19:{f:bi},20:{f:S8},21:{f:S8},23:{f:DR},24:{f:A8},25:{f:ni},26:{},27:{},28:{f:eue},29:{},34:{f:ni},35:{f:_8},38:{f:sl},39:{f:sl},40:{f:sl},41:{f:sl},42:{f:ni},43:{f:ni},47:{f:ffe},49:{f:Ade},51:{f:bi},60:{},61:{f:Nde},64:{f:ni},65:{f:_de},66:{f:bi},77:{},80:{},81:{},82:{},85:{f:bi},89:{},90:{},91:{},92:{f:ude},93:{f:nue},94:{},95:{f:ni},96:{},97:{},99:{f:ni},125:{f:LR},128:{f:$de},129:{f:hde},130:{f:bi},131:{f:ni},132:{f:ni},133:{f:pde},134:{},140:{f:uue},141:{f:bi},144:{},146:{f:pue},151:{},152:{},153:{},154:{},155:{},156:{f:bi},157:{},158:{},160:{f:wue},161:{f:gue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Rde},190:{f:Bde},193:{f:Zf},197:{},198:{},199:{},200:{},201:{},202:{f:ni},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:bi},220:{},221:{f:ni},222:{},224:{f:qde},225:{f:dde},226:{f:Zf},227:{},229:{f:tue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:xde},253:{f:Ede},255:{f:vde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:SR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ni},353:{f:Zf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Gde},431:{f:ni},432:{},433:{},434:{},437:{},438:{f:iue},439:{f:ni},440:{f:oue},441:{},442:{f:Cg},443:{},444:{f:bi},445:{},446:{},448:{f:Zf},449:{f:wde,r:2},450:{f:Zf},512:{f:N8},513:{f:bue},515:{f:Wde},516:{f:Ode},517:{f:k8},519:{f:Nue},520:{f:yde},523:{},545:{f:C8},549:{f:w8},566:{},574:{f:kde},638:{f:Mde},659:{},1048:{},1054:{f:Ide},1084:{},1212:{f:Qde},2048:{f:cue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Dv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Zf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:mue,r:12},2173:{f:u0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ni,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Yde,r:12},2197:{},2198:{f:s0e,r:12},2199:{},2200:{},2201:{},2202:{f:Jde,r:12},2203:{f:Zf},2204:{},2205:{},2206:{},2207:{},2211:{f:bde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:bi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:vue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:hue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:N8},1:{},2:{f:Aue},3:{f:Sue},4:{f:kue},5:{f:k8},7:{f:Eue},8:{},9:{f:Dv},11:{},22:{f:bi},30:{f:Lde},31:{},32:{},33:{f:C8},36:{},37:{f:w8},50:{f:Tue},62:{},52:{},67:{},68:{f:bi},69:{},86:{},126:{},127:{f:jue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Oue},223:{},234:{},354:{},421:{},518:{f:kj},521:{f:Dv},536:{f:A8},547:{f:_8},561:{},579:{},1030:{f:kj},1033:{f:Dv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function hr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&j3(r)&&e.push(r)}}function Ege(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return hr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function Pg(e,t,r){return e||(e=Rt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Tge(e,t,r,a){var s=Rt(9);return Pg(s,e,t),_R(r,a||"b",s),s}function Oge(e,t,r){var a=Rt(8+2*r.length);return Pg(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function Pge(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?qi(us(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?hr(e,2,Cue(r,a,s)):hr(e,3,_ue(r,a,s));return;case"b":case"e":hr(e,5,Tge(r,a,t.v,t.t));return;case"s":case"str":hr(e,4,Oge(r,a,(t.v||"").slice(0,255)));return}hr(e,1,Pg(null,r,a))}function Ige(e,t,r,a){var s=Array.isArray(t),i=da(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=kn(i)}for(var d=i.s.r;d<=i.e.r;++d){l=li(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=Ds(u)),o=c[u]+l;var f=s?(t[d]||[])[u]:t[o];f&&Pge(e,f,d,u)}}}function Dge(e,t){for(var r=t||{},a=Xl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return hr(a,r.biff==4?1033:r.biff==3?521:9,I3(e,16,r)),Ige(a,e.Sheets[e.SheetNames[s]],s,r),hr(a,10),a.end()}function Lge(e,t,r){hr(e,49,Cde({sz:12,name:"Arial"},r))}function Fge(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&hr(e,1054,Dde(s,t[s],r))})}function Mge(e,t){var r=Rt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),hr(e,2151,r),r=Rt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),OR(da(t["!ref"]||"A1"),r),r.write_shift(4,4),hr(e,2152,r)}function Rge(e,t){for(var r=0;r<16;++r)hr(e,224,j8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){hr(e,224,j8(a,0,t))})}function Bge(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];hr(e,440,lue(a)),a[1].Tooltip&&hr(e,2048,due(a))}delete t["!links"]}function Uge(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&hr(e,125,xue(Nb(s,a),s))})}}function qge(e,t,r,a,s){var i=16+F0(s.cellXfs,t,s);if(t.v==null&&!t.bf){hr(e,513,Ph(r,a,i));return}if(t.bf)hr(e,6,hpe(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?qi(us(t.v)):t.v;hr(e,515,Vde(r,a,o,i));break;case"b":case"e":hr(e,517,Hde(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=q3(s.Strings,t.v,s.revStrings);hr(e,253,Tde(r,a,l,i))}else hr(e,516,Pde(r,a,(t.v||"").slice(0,255),i,s));break;default:hr(e,513,Ph(r,a,i))}}function $ge(e,t,r){var a=Xl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",m=[],p=da(i["!ref"]||"A1"),y=d?65536:16384;if(p.e.c>255||p.e.r>=y){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}hr(a,2057,I3(r,16,t)),hr(a,13,Yc(1)),hr(a,12,Yc(100)),hr(a,15,wl(!0)),hr(a,17,wl(!1)),hr(a,16,Th(.001)),hr(a,95,wl(!0)),hr(a,42,wl(!1)),hr(a,43,wl(!1)),hr(a,130,Yc(1)),hr(a,128,zde()),hr(a,131,wl(!1)),hr(a,132,wl(!1)),d&&Uge(a,i["!cols"]),hr(a,512,Fde(p,t)),d&&(i["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=li(v);for(var g=p.s.c;g<=p.e.c;++g){v===p.s.r&&(m[g]=Ds(g)),u=m[g]+f;var b=c?(i[v]||[])[g]:i[u];b&&(qge(a,b,v,g,t),d&&b.l&&i["!links"].push([u,b.l]))}}var w=l.CodeName||l.name||s;return d&&hr(a,574,Sde((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&hr(a,229,rue(i["!merges"])),d&&Bge(a,i),hr(a,442,AR(w)),d&&Mge(a,i),hr(a,10),a.end()}function zge(e,t,r){var a=Xl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(hr(a,2057,I3(e,5,r)),r.bookType=="xla"&&hr(a,135),hr(a,225,l?Yc(1200):null),hr(a,193,Hce(2)),c&&hr(a,191),c&&hr(a,192),hr(a,226),hr(a,92,fde("SheetJS",r)),hr(a,66,Yc(l?1200:1252)),l&&hr(a,353,Yc(0)),l&&hr(a,448),hr(a,317,yue(e.SheetNames.length)),l&&e.vbaraw&&hr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";hr(a,442,AR(d))}hr(a,156,Yc(17)),hr(a,25,wl(!1)),hr(a,18,wl(!1)),hr(a,19,Yc(0)),l&&hr(a,431,wl(!1)),l&&hr(a,444,Yc(0)),hr(a,61,jde()),hr(a,64,wl(!1)),hr(a,141,Yc(0)),hr(a,34,wl(wxe(e)=="true")),hr(a,14,wl(!0)),l&&hr(a,439,wl(!1)),hr(a,218,Yc(0)),Lge(a,e,r),Fge(a,e.SSF,r),Rge(a,r),l&&hr(a,352,wl(!1));var u=a.end(),f=Xl();l&&hr(f,140,fue()),l&&r.Strings&&Ege(f,252,gde(r.Strings)),hr(f,10);var m=f.end(),p=Xl(),y=0,v=0;for(v=0;v<e.SheetNames.length;++v)y+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=u.length+y+m.length;for(v=0;v<e.SheetNames.length;++v){var b=i[v]||{};hr(p,133,mde({pos:g,hs:b.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var w=p.end();if(y!=w.length)throw new Error("BS8 "+y+" != "+w.length);var j=[];return u.length&&j.push(u),w.length&&j.push(w),m.length&&j.push(m),oo(j)}function Hge(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=fs(rn)),e&&e.SSF&&(pm(),mb(e.SSF),r.revssf=gb(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,V3(r),r.cellXfs=[],F0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=$ge(s,r,e);return a.unshift(zge(e,a,r)),oo(a)}function b9(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Ql(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Hge(e,t);case 4:case 3:case 2:return Dge(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function R8(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=Cle(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var b=v.split(/<\/t[dh]>/i);for(l=0;l<b.length;++l){var w=b[l].trim();if(w.match(/<t[dh]/i)){for(var j=w,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var S=0;S<y.length;++S){var E=y[S];E.s.c==u&&E.s.r<d&&d<=E.e.r&&(u=E.e.c+1,S=-1)}var _=hn(w.slice(0,w.indexOf(">")));m=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||m>1)&&y.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+m-1}});var P=_.t||_["data-t"]||"";if(!j.length){u+=m;continue}if(j=HM(j),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!j.length){u+=m;continue}var I={t:"s",v:j};r.raw||!j.trim().length||P=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN(Xd(j))?isNaN(em(j).getDate())||(I={t:"d",v:us(j)},r.cellDates||(I={t:"n",v:qi(I.v)}),I.z=r.dateNF||rn[14]):I={t:"n",v:Xd(j)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=I):a[un({r:d,c:u})]=I,u+=m}}}}return a["!ref"]=kn(p),y.length&&(a["!merges"]=y),a}function Wge(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=un({r,c:o}),f=a.dense?(e[r]||[])[o]:e[u],m=f&&f.v!=null&&(f.h||b3(f.w||(Cf(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(a.id||"sjs")+"-"+u,i.push(ur("td",m,p))}}var y="<tr>";return y+i.join("")+"</tr>"}var Vge='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Gge="</body></html>";function Kge(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return L0(R8(r[0],t),t);var a=X3();return r.forEach(function(s,i){Y3(a,R8(s,t),"Sheet"+(i+1))}),a}function Xge(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function w9(e,t){var r=t||{},a=r.header!=null?r.header:Vge,s=r.footer!=null?r.footer:Gge,i=[a],o=Ql(e["!ref"]);r.dense=Array.isArray(e),i.push(Xge(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Wge(e,o,l,r));return i.push("</table>"+s),i.join("")}function N9(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?Ls(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=Ql(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),y=0,v=0,g=0,b=0,w=0,j=0;for(e["!cols"]||(e["!cols"]=[]);y<l.length&&v<c;++y){var N=l[y];if(B8(N)){if(a.display)continue;p[v]={hidden:!0}}var S=N.children;for(g=b=0;g<S.length;++g){var E=S[g];if(!(a.display&&B8(E))){var _=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):HM(E.innerHTML),P=E.getAttribute("data-z")||E.getAttribute("z");for(m=0;m<f.length;++m){var I=f[m];I.s.c==b+i&&I.s.r<v+s&&v+s<=I.e.r&&(b=I.e.c+1-i,m=-1)}j=+E.getAttribute("colspan")||1,((w=+E.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:v+s,c:b+i},e:{r:v+s+(w||1)-1,c:b+i+(j||1)-1}});var U={t:"s",v:_},C=E.getAttribute("data-t")||E.getAttribute("t")||"";_!=null&&(_.length==0?U.t=C||"z":a.raw||_.trim().length==0||C=="s"||(_==="TRUE"?U={t:"b",v:!0}:_==="FALSE"?U={t:"b",v:!1}:isNaN(Xd(_))?isNaN(em(_).getDate())||(U={t:"d",v:us(_)},a.cellDates||(U={t:"n",v:qi(U.v)}),U.z=a.dateNF||rn[14]):U={t:"n",v:Xd(_)})),U.z===void 0&&P!=null&&(U.z=P);var O="",R=E.getElementsByTagName("A");if(R&&R.length)for(var z=0;z<R.length&&!(R[z].hasAttribute("href")&&(O=R[z].getAttribute("href"),O.charAt(0)!="#"));++z);O&&O.charAt(0)!="#"&&(U.l={Target:O}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][b+i]=U):e[un({c:b+i,r:v+s})]=U,d.e.c<b+i&&(d.e.c=b+i),b+=j}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,v-1+s),e["!ref"]=kn(d),v>=c&&(e["!fullref"]=kn((d.e.r=l.length-y+v-1+s,d))),e}function j9(e,t){var r=t||{},a=r.dense?[]:{};return N9(a,e,t)}function Yge(e,t){return L0(j9(e,t),t)}function B8(e){var t="",r=Qge(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Qge(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Jge(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=la(t.replace(/<[^>]*>/g,""));return[r]}var U8={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function k9(e,t){var r=t||{},a=w3(e),s=[],i,o,l={name:""},c="",d=0,u,f,m={},p=[],y=r.dense?[]:{},v,g,b={value:""},w="",j=0,N=[],S=-1,E=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,I={},U=[],C={},O=0,R=0,z=[],H=1,Q=1,J=[],re={Names:[]},X={},ee=["",""],W=[],T={},q="",V=0,B=!1,K=!1,oe=0;for(sg.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=sg.exec(a);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?y["!ref"]=kn(_):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(y["!fullref"]=y["!ref"],_.e.r=r.sheetRows-1,y["!ref"]=kn(_)),U.length&&(y["!merges"]=U),z.length&&(y["!rows"]=z),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),m[u.name]=y,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=hn(v[0],!1),S=E=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,y=r.dense?[]:{},U=[],z=[],K=!0);break;case"table-row-group":v[1]==="/"?--P:++P;break;case"table-row":case"":if(v[1]==="/"){S+=H,H=1;break}if(f=hn(v[0],!1),f.?S=f.-1:S==-1&&(S=0),H=+f["number-rows-repeated"]||1,H<10)for(oe=0;oe<H;++oe)P>0&&(z[S+oe]={level:P});E=-1;break;case"covered-table-cell":v[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(y[S]||(y[S]=[]),y[S][E]={t:"z"}):y[un({r:S,c:E})]={t:"z"}),w="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++E,b=hn(v[0],!1),Q=parseInt(b["number-columns-repeated"]||"1",10),g={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(g.f=L8(la(b.formula))),(b.||b["value-type"])=="string"&&(g.t="s",g.v=la(b["string-value"]||""),r.dense?(y[S]||(y[S]=[]),y[S][E]=g):y[un({r:S,c:E})]=g),E+=Q-1;else if(v[1]!=="/"){++E,w="",j=0,N=[],Q=1;var me=H?S+H-1:S;if(E>_.e.c&&(_.e.c=E),E<_.s.c&&(_.s.c=E),S<_.s.r&&(_.s.r=S),me>_.e.r&&(_.e.r=me),b=hn(v[0],!1),W=[],T={},g={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=la(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(O=parseInt(b["number-matrix-rows-spanned"],10)||0,R=parseInt(b["number-matrix-columns-spanned"],10)||0,C={s:{r:S,c:E},e:{r:S+O-1,c:E+R-1}},g.F=kn(C),J.push([C,g.F])),b.formula)g.f=L8(b.formula);else for(oe=0;oe<J.length;++oe)S>=J[oe][0].s.r&&S<=J[oe][0].e.r&&E>=J[oe][0].s.c&&E<=J[oe][0].e.c&&(g.F=J[oe][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(O=parseInt(b["number-rows-spanned"],10)||0,R=parseInt(b["number-columns-spanned"],10)||0,C={s:{r:S,c:E},e:{r:S+O-1,c:E+R-1}},U.push(C)),b["number-columns-repeated"]&&(Q=parseInt(b["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=cs(b["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(b.value);break;case"percentage":g.t="n",g.v=parseFloat(b.value);break;case"currency":g.t="n",g.v=parseFloat(b.value);break;case"date":g.t="d",g.v=us(b["date-value"]),r.cellDates||(g.t="n",g.v=qi(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=Sle(b["time-value"])/86400,r.cellDates&&(g.t="d",g.v=vb(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(b.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",b["string-value"]!=null&&(w=la(b["string-value"]),N=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(B=!1,g.t==="s"&&(g.v=w||"",N.length&&(g.R=N),B=j==0),X.Target&&(g.l=X),W.length>0&&(g.c=W,W=[]),w&&r.cellText!==!1&&(g.w=w),B&&(g.t="z",delete g.v),(!B||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var se=0;se<H;++se){if(Q=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(y[S+se]||(y[S+se]=[]),y[S+se][E]=se==0?g:fs(g);--Q>0;)y[S+se][E+Q]=fs(g);else for(y[un({r:S+se,c:E})]=g;--Q>0;)y[un({r:S+se,c:E+Q})]=fs(g);_.e.c<=E&&(_.e.c=E)}Q=parseInt(b["number-columns-repeated"]||"1",10),E+=Q-1,Q=0,g={},w="",N=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;T.t=w,N.length&&(T.R=N),T.a=q,W.push(T)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);q="",V=0,w="",j=0,N=[];break;case"creator":v[1]==="/"?q=a.slice(V,v.index):V=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);w="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=hn(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=hn(v[0],!1),c+=U8[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=hn(v[0],!1),c+=U8[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,v.index);break}else d=v.index+v[0].length;break;case"named-range":o=hn(v[0],!1),ee=Sj(o["cell-range-address"]);var de={Name:o.name,Ref:ee[0]+"!"+ee[1]};K&&(de.Sheet=p.length),re.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!b||!b["string-value"])){var Re=Jge(a.slice(j,v.index));w=(w.length>0?w+`
`:"")+Re[0]}else hn(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ee=Sj(hn(v[0])["target-range-address"]),m[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(X=hn(v[0],!1),!X.href)break;X.Target=la(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(ee=Sj(X.Target.slice(1)),X.Target="#"+ee[0]+"!"+ee[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var he={Sheets:m,SheetNames:p,Workbook:re};return r.bookSheets&&delete he.Sheets,he}function q8(e,t){t=t||{},Xc(e,"META-INF/manifest.xml")&&Sce(yi(e,"META-INF/manifest.xml"),t);var r=yc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=k9(Ba(r),t);return Xc(e,"meta.xml")&&(a.Props=pR(yi(e,"meta.xml"))),a}function $8(e,t){return k9(e,t)}var Zge=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ag({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return di+t}})(),z8=(function(){var e=function(i){return Ea(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Ea(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,f=Ql(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,y=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(d=0;d<f.s.r;++d)v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;d<=f.e.r;++d){for(v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var b=!1,w={},j="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>u)&&!(m[p].s.r>d)&&!(m[p].e.c<u)&&!(m[p].e.r<d)){(m[p].s.c!=u||m[p].s.r!=d)&&(b=!0),w["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,w["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(b){c.push(r);continue}var N=un({r:d,c:u}),S=y?(i[d]||[])[u]:i[N];if(S&&S.f&&(w["table:formula"]=Ea(ype(S.f)),S.F&&S.F.slice(0,N.length)==N)){var E=Ql(S.F);w["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,w["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),w["office:value-type"]="float",w["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,w["office:value-type"]="string";break;case"d":j=S.w||us(S.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=us(S.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var _=e(j);if(S.l&&S.l.Target){var P=S.l.Target;P=P.charAt(0)=="#"?"#"+bpe(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),_=ur("text:a",_,{"xlink:href":P.replace(/&/g,"&amp;")})}c.push("          "+ur("table:table-cell",ur("text:p",_,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;N0(f),f.ods=l;var m=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[di],d=ag({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=ag({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(hR().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function S9(e,t){if(t.bookType=="fods")return z8(e,t);var r=g3(),a="",s=[],i=[];return a="mimetype",Cn(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Cn(r,a,z8(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",Cn(r,a,Zge(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",Cn(r,a,di+hR()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",Cn(r,a,Cce(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Cn(r,a,_ce(s)),r}function Ih(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ba(D0(e))}function eve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):vc(Au(e))}function tve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function k0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function H8(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function rve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function nve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function fg(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ks(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ma(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=fg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=fg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ao(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Aa(a*8+s.type)),s.type==2&&t.push(Aa(s.data.length)),t.push(s.data))})}),k0(t)}function H3(e,t){return e?.map(function(r){return t(r.data)})||[]}function Gc(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=fg(e,a),i=ma(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:Ks(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ma(l.data),d=Ks(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Ks(i[3][0].data)>>>0>0),r.push(o)}return r}function sp(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Aa(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Aa(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Aa(o.data.length)}],a[2].push({data:Ao(o.meta),type:2})});var i=Ao(a);t.push(Aa(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),k0(t)}function ave(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=fg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[k0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=k0(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function Kc(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(ave(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return k0(t)}function ip(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Aa(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return k0(t)}function sve(e,t,r,a){var s=Ih(e),i=s.getUint32(4,!0),o=(a>1?12:8)+H8(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=H8(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function ive(e,t,r){var a=Ih(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=rve(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Aj(e,t){var r=new Uint8Array(32),a=Ih(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,nve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Cj(e,t){var r=new Uint8Array(32),a=Ih(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function ove(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return sve(e,t,r,e[0]);case 5:return ive(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function el(e){var t=ma(e);return fg(t[1][0].data)}function W8(e,t){var r=ma(t.data),a=Ks(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ma(o.data),c=Ks(l[1][0].data)>>>0;switch(a){case 1:i[c]=Dk(l[3][0].data);break;case 8:{var d=e[el(l[9][0].data)][0],u=ma(d.data),f=e[el(u[1][0].data)][0],m=Ks(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=ma(f.data);i[c]=p[3].map(function(y){return Dk(y.data)}).join("")}break}}),i}function lve(e,t){var r,a,s,i,o,l,c,d,u,f,m,p,y,v,g=ma(e),b=Ks(g[1][0].data)>>>0,w=Ks(g[2][0].data)>>>0,j=((a=(r=g[8])==null?void 0:r[0])==null?void 0:a.data)&&Ks(g[8][0].data)>0||!1,N,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)N=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=g[4])==null?void 0:u[0])!=null&&f.data&&t!=1)N=(p=(m=g[4])==null?void 0:m[0])==null?void 0:p.data,S=(v=(y=g[3])==null?void 0:y[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var E=j?4:1,_=Ih(N),P=[],I=0;I<N.length/2;++I){var U=_.getUint16(I*2,!0);U<65535&&P.push([I,U])}if(P.length!=w)throw"Expected ".concat(w," cells, found ").concat(P.length);var C=[];for(I=0;I<P.length-1;++I)C[P[I][0]]=S.subarray(P[I][1]*E,P[I+1][1]*E);return P.length>=1&&(C[P[P.length-1][0]]=S.subarray(P[P.length-1][1]*E)),{R:b,cells:C}}function cve(e,t){var r,a=ma(t.data),s=(r=a?.[7])!=null&&r[0]?Ks(a[7][0].data)>>>0>0?1:0:-1,i=H3(a[5],function(o){return lve(o,s)});return{nrows:Ks(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function dve(e,t,r){var a,s=ma(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ks(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Ks(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=kn(i);var o=ma(s[4][0].data),l=W8(e,e[el(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?W8(e,e[el(o[17][0].data)][0]):[],d=ma(o[3][0].data),u=0;d[1].forEach(function(f){var m=ma(f.data),p=e[el(m[2][0].data)][0],y=Ks(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var v=cve(e,p);v.data.forEach(function(g,b){g.forEach(function(w,j){var N=un({r:u+b,c:j}),S=ove(w,l,c);S&&(r[N]=S)})}),u+=v.nrows})}function uve(e,t){var r=ma(t.data),a={"!ref":"A1"},s=e[el(r[2][0].data)],i=Ks(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return dve(e,s[0],a),a}function fve(e,t){var r,a=ma(t.data),s={name:(r=a[1])!=null&&r[0]?Dk(a[1][0].data):"",sheets:[]},i=H3(a[2],el);return i.forEach(function(o){e[o].forEach(function(l){var c=Ks(l.meta[1][0].data);c==6e3&&s.sheets.push(uve(e,l))})}),s}function hve(e,t){var r=X3(),a=ma(t.data),s=H3(a[1],el);if(s.forEach(function(i){e[i].forEach(function(o){var l=Ks(o.meta[1][0].data);if(l==2){var c=fve(e,o);c.sheets.forEach(function(d,u){Y3(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Ej(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Kc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=Gc(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&Ks(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Ks(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return hve(i,l)}function pve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ks(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Ih(e[7][0].data),u=0,f=[],m=Ih(e[4][0].data),p=0,y=[],v=0;v<t.length;++v){if(t[v]==null){d.setUint16(v*2,65535,!0),m.setUint16(v*2,65535);continue}d.setUint16(v*2,u,!0),m.setUint16(v*2,p,!0);var g,b;switch(typeof t[v]){case"string":g=Aj({t:"s",v:t[v]},r),b=Cj({t:"s",v:t[v]},r);break;case"number":g=Aj({t:"n",v:t[v]},r),b=Cj({t:"n",v:t[v]},r);break;case"boolean":g=Aj({t:"b",v:t[v]},r),b=Cj({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(g),u+=g.length,y.push(b),p+=b.length,++c}for(e[2][0].data=Aa(c);v<e[7][0].data.length/2;++v)d.setUint16(v*2,65535,!0),m.setUint16(v*2,65535,!0);return e[6][0].data=k0(f),e[3][0].data=k0(y),c}function mve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Ql(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(kn(a)));var i=Sy(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},c=[],d=Gr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(q,V){return[q,d.FullPaths[V]]}).forEach(function(q){var V=q[0],B=q[1];if(V.type==2&&V.name.match(/\.iwa/)){var K=V.content,oe=Kc(K),me=Gc(oe);me.forEach(function(se){c.push(se.id),l[se.id]={deps:[],location:B,type:Ks(se.messages[0].meta[1][0].data)}})}}),c.sort(function(q,V){return q-V});var u=c.filter(function(q){return q>1}).map(function(q){return[q,Aa(q)]});d.FileIndex.map(function(q,V){return[q,d.FullPaths[V]]}).forEach(function(q){var V=q[0];if(q[1],!!V.name.match(/\.iwa/)){var B=Gc(Kc(V.content));B.forEach(function(K){K.messages.forEach(function(oe){u.forEach(function(me){K.messages.some(function(se){return Ks(se.meta[1][0].data)!=11006&&tve(se.data,me[1])})&&l[me[0]].deps.push(K.id)})})})}});for(var f=Gr.find(d,l[1].location),m=Gc(Kc(f.content)),p,y=0;y<m.length;++y){var v=m[y];v.id==1&&(p=v)}var g=el(ma(p.messages[0].data)[1][0].data);for(f=Gr.find(d,l[g].location),m=Gc(Kc(f.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=el(ma(p.messages[0].data)[2][0].data),f=Gr.find(d,l[g].location),m=Gc(Kc(f.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=el(ma(p.messages[0].data)[2][0].data),f=Gr.find(d,l[g].location),m=Gc(Kc(f.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);var b=ma(p.messages[0].data);{b[6][0].data=Aa(a.e.r+1),b[7][0].data=Aa(a.e.c+1);var w=el(b[46][0].data),j=Gr.find(d,l[w].location),N=Gc(Kc(j.content));{for(var S=0;S<N.length&&N[S].id!=w;++S);if(N[S].id!=w)throw"Bad ColumnRowUIDMapArchive";var E=ma(N[S].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var _=0;_<=a.e.c;++_){var P=[];P[1]=P[2]=[{type:0,data:Aa(_+420690)}],E[1].push({type:2,data:Ao(P)}),E[2].push({type:0,data:Aa(_)}),E[3].push({type:0,data:Aa(_)})}E[4]=[],E[5]=[],E[6]=[];for(var I=0;I<=a.e.r;++I)P=[],P[1]=P[2]=[{type:0,data:Aa(I+726270)}],E[4].push({type:2,data:Ao(P)}),E[5].push({type:0,data:Aa(I)}),E[6].push({type:0,data:Aa(I)});N[S].messages[0].data=Ao(E)}j.content=ip(sp(N)),j.size=j.content.length,delete b[46];var U=ma(b[4][0].data);{U[7][0].data=Aa(a.e.r+1);var C=ma(U[1][0].data),O=el(C[2][0].data);j=Gr.find(d,l[O].location),N=Gc(Kc(j.content));{if(N[0].id!=O)throw"Bad HeaderStorageBucket";var R=ma(N[0].messages[0].data);for(I=0;I<i.length;++I){var z=ma(R[2][0].data);z[1][0].data=Aa(I),z[4][0].data=Aa(i[I].length),R[2][I]={type:R[2][0].type,data:Ao(z)}}N[0].messages[0].data=Ao(R)}j.content=ip(sp(N)),j.size=j.content.length;var H=el(U[2][0].data);j=Gr.find(d,l[H].location),N=Gc(Kc(j.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";for(R=ma(N[0].messages[0].data),_=0;_<=a.e.c;++_)z=ma(R[2][0].data),z[1][0].data=Aa(_),z[4][0].data=Aa(a.e.r+1),R[2][_]={type:R[2][0].type,data:Ao(z)};N[0].messages[0].data=Ao(R)}j.content=ip(sp(N)),j.size=j.content.length;var Q=el(U[4][0].data);(function(){for(var q=Gr.find(d,l[Q].location),V=Gc(Kc(q.content)),B,K=0;K<V.length;++K){var oe=V[K];oe.id==Q&&(B=oe)}var me=ma(B.messages[0].data);{me[3]=[];var se=[];o.forEach(function(he,Ue){se[1]=[{type:0,data:Aa(Ue)}],se[2]=[{type:0,data:Aa(1)}],se[3]=[{type:2,data:eve(he)}],me[3].push({type:2,data:Ao(se)})})}B.messages[0].data=Ao(me);var de=sp(V),Re=ip(de);q.content=Re,q.size=q.content.length})();var J=ma(U[3][0].data);{var re=J[1][0];delete J[2];var X=ma(re.data);{var ee=el(X[2][0].data);(function(){for(var q=Gr.find(d,l[ee].location),V=Gc(Kc(q.content)),B,K=0;K<V.length;++K){var oe=V[K];oe.id==ee&&(B=oe)}var me=ma(B.messages[0].data);{delete me[6],delete J[7];var se=new Uint8Array(me[5][0].data);me[5]=[];for(var de=0,Re=0;Re<=a.e.r;++Re){var he=ma(se);de+=pve(he,i[Re],o),he[1][0].data=Aa(Re),me[5].push({data:Ao(he),type:2})}me[1]=[{type:0,data:Aa(a.e.c+1)}],me[2]=[{type:0,data:Aa(a.e.r+1)}],me[3]=[{type:0,data:Aa(de)}],me[4]=[{type:0,data:Aa(a.e.r+1)}]}B.messages[0].data=Ao(me);var Ue=sp(V),Oe=ip(Ue);q.content=Oe,q.size=q.content.length})()}re.data=Ao(X)}U[3][0].data=Ao(J)}b[4][0].data=Ao(U)}p.messages[0].data=Ao(b);var W=sp(m),T=ip(W);return f.content=T,f.size=f.content.length,d}function _9(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function W3(e){_9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function V3(e){_9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function xve(e){return Fn.WS.indexOf(e)>-1?"sheet":e==Fn.CS?"chart":e==Fn.DS?"dialog":e==Fn.MS?"macro":e&&e.length?e:"sheet"}function gve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,xve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function vve(e,t,r,a,s,i,o,l,c,d,u,f){try{i[a]=cx(yc(e,r,!0),t);var m=yi(e,t),p;switch(l){case"sheet":p=Uxe(m,t,s,c,i[a],d,u,f);break;case"chart":if(p=qxe(m,t,s,c,i[a],d,u,f),!p||!p["!drawel"])break;var y=Qm(p["!drawel"].Target,t),v=ig(y),g=A0e(yc(e,y,!0),cx(yc(e,v,!0),y)),b=Qm(g,y),w=ig(b);p=pxe(yc(e,b,!0),b,c,cx(yc(e,w,!0),b),d,p);break;case"macro":p=$xe(m,t,s,c,i[a],d,u,f);break;case"dialog":p=zxe(m,t,s,c,i[a],d,u,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var j=[];i&&i[a]&&Xs(i[a]).forEach(function(N){var S="";if(i[a][N].Type==Fn.CMNT){S=Qm(i[a][N].Target,t);var E=Gxe(yi(e,S,!0),S,c);if(!E||!E.length)return;T8(p,E,!1)}i[a][N].Type==Fn.TCMNT&&(S=Qm(i[a][N].Target,t),j=j.concat(E0e(yi(e,S,!0),c)))}),j&&j.length&&T8(p,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function Hc(e){return e.charAt(0)=="/"?e.slice(1):e}function yve(e,t){if(pm(),t=t||{},W3(t),Xc(e,"META-INF/manifest.xml")||Xc(e,"objectdata.xml"))return q8(e,t);if(Xc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Ej<"u"){if(e.FileIndex)return Ej(e);var r=Gr.utils.cfb_new();return QI(e).forEach(function(z){Cn(r,z,Tle(e,z))}),Ej(r)}throw new Error("Unsupported NUMBERS file")}if(!Xc(e,"[Content_Types].xml"))throw Xc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Xc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=QI(e),s=jce(yc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",yi(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!yi(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(dx=[],s.sst)try{dx=Vxe(yi(e,Hc(s.sst)),s.sst,t)}catch(z){if(t.WTF)throw z}t.cellStyles&&s.themes.length&&(c=Wxe(yc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=Hxe(yi(e,Hc(s.style)),s.style,c,t))}s.links.map(function(z){try{var H=cx(yc(e,ig(Hc(z))),z);return Xxe(yi(e,Hc(z)),H,z,t)}catch{}});var u=Bxe(yi(e,Hc(s.workbooks[0])),s.workbooks[0],t),f={},m="";s.coreprops.length&&(m=yi(e,Hc(s.coreprops[0]),!0),m&&(f=pR(m)),s.extprops.length!==0&&(m=yi(e,Hc(s.extprops[0]),!0),m&&Tce(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=yc(e,Hc(s.custprops[0]),!0),m&&(p=Pce(m,t)));var y={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(H){return H.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(y.Props=f,y.Custprops=p),t.bookSheets&&typeof o<"u"&&(y.SheetNames=o),t.bookSheets?y.SheetNames:t.bookProps))return y;o={};var v={};t.bookDeps&&s.calcchain&&(v=Kxe(yi(e,Hc(s.calcchain)),s.calcchain));var g=0,b={},w,j;{var N=u.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var S=0;S!=N.length;++S)f.SheetNames[S]=N[S].name}var E=i?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),P=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Xc(e,P)||(P="xl/_rels/workbook."+E+".rels");var I=cx(yc(e,P,!0),P.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Yxe(yi(e,Hc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=O0e(yi(e,Hc(s.people[0])),t)),I&&(I=gve(I,u.Sheets));var U=yi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var C="sheet";if(I&&I[g]?(w="xl/"+I[g][1].replace(/[\/]?xl\//,""),Xc(e,w)||(w=I[g][1]),Xc(e,w)||(w=P.replace(/_rels\/.*$/,"")+I[g][1]),C=I[g][2]):(w="xl/worksheets/sheet"+(g+1-U)+"."+E,w=w.replace(/sheet0\./,"sheet.")),j=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==g&&(O=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==f.SheetNames[g].toLowerCase()&&(O=1);if(!O)continue e}}vve(e,w,j,f.SheetNames[g],g,b,o,C,t,u,c,d)}return y={Directory:s,Workbook:u,Props:f,Custprops:p,Deps:v,Sheets:o,SheetNames:f.SheetNames,Strings:dx,Styles:d,Themes:c,SSF:fs(rn)},t&&t.bookFiles&&(e.files?(y.keys=a,y.files=e.files):(y.keys=[],y.files={},e.FullPaths.forEach(function(z,H){z=z.replace(/^Root Entry[\/]/,""),y.keys.push(z),y.files[z]=e.FileIndex[H]}))),t&&t.bookVBA&&(s.vba.length>0?y.vbaraw=yi(e,Hc(s.vba[0]),!0):s.defaults&&s.defaults.bin===B0e&&(y.vbaraw=yi(e,"xl/vbaProject.bin",!0))),y}function bve(e,t){var r=t||{},a="Workbook",s=Gr.find(e,a);try{if(a="/!DataSpaces/Version",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(Yue(s.content),a="/!DataSpaces/DataSpaceMap",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Jue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Zue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);tfe(s.content)}catch{}if(a="/EncryptionInfo",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=rfe(s.content);if(a="/EncryptedPackage",s=Gr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function wve(e,t){return t.bookType=="ods"?S9(e,t):t.bookType=="numbers"?mve(e,t):t.bookType=="xlsb"?Nve(e,t):jve(e,t)}function Nve(e,t){xp=1024,e&&!e.SSF&&(e.SSF=fs(rn)),e&&e.SSF&&(pm(),mb(e.SSF),t.revssf=gb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ux?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=ZR.indexOf(t.bookType)>-1,s=O3();V3(t=t||{});var i=g3(),o="",l=0;if(t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Cn(i,o,mR(e.Props,t)),s.coreprops.push(o),Ca(t.rels,2,o,Fn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Cn(i,o,vR(e.Props)),s.extprops.push(o),Ca(t.rels,3,o,Fn.EXT_PROPS),e.Custprops!==e.Props&&Xs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Cn(i,o,yR(e.Custprops)),s.custprops.push(o),Ca(t.rels,4,o,Fn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],m=(f||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,Cn(i,o,Jxe(l-1,o,t,e,u)),s.sheets.push(o),Ca(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Fn.WS[0]),f){var p=f["!comments"],y=!1,v="";p&&p.length>0&&(v="xl/comments"+l+"."+r,Cn(i,v,tge(p,v)),s.comments.push(v),Ca(u,-1,"../comments"+l+"."+r,Fn.CMNT),y=!0),f["!legacy"]&&y&&Cn(i,"xl/drawings/vmlDrawing"+l+".vml",QR(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&Cn(i,ig(o),jp(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Cn(i,o,ege(t.Strings,o,t)),s.strs.push(o),Ca(t.wbrels,-1,"sharedStrings."+r,Fn.SST)),o="xl/workbook."+r,Cn(i,o,Qxe(e,o)),s.workbooks.push(o),Ca(t.rels,1,o,Fn.WB),o="xl/theme/theme1.xml",Cn(i,o,M3(e.Themes,t)),s.themes.push(o),Ca(t.wbrels,-1,"theme/theme1.xml",Fn.THEME),o="xl/styles."+r,Cn(i,o,Zxe(e,o,t)),s.styles.push(o),Ca(t.wbrels,-1,"styles."+r,Fn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",Cn(i,o,e.vbaraw),s.vba.push(o),Ca(t.wbrels,-1,"vbaProject.bin",Fn.VBA)),o="xl/metadata."+r,Cn(i,o,rge(o)),s.metadata.push(o),Ca(t.wbrels,-1,"metadata."+r,Fn.XLMETA),Cn(i,"[Content_Types].xml",fR(s,t)),Cn(i,"_rels/.rels",jp(t.rels)),Cn(i,"xl/_rels/workbook."+r+".rels",jp(t.wbrels)),delete t.revssf,delete t.ssf,i}function jve(e,t){xp=1024,e&&!e.SSF&&(e.SSF=fs(rn)),e&&e.SSF&&(pm(),mb(e.SSF),t.revssf=gb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ux?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=ZR.indexOf(t.bookType)>-1,s=O3();V3(t=t||{});var i=g3(),o="",l=0;if(t.cellXfs=[],F0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Cn(i,o,mR(e.Props,t)),s.coreprops.push(o),Ca(t.rels,2,o,Fn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Cn(i,o,vR(e.Props)),s.extprops.push(o),Ca(t.rels,3,o,Fn.EXT_PROPS),e.Custprops!==e.Props&&Xs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Cn(i,o,yR(e.Custprops)),s.custprops.push(o),Ca(t.rels,4,o,Fn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,Cn(i,o,d9(l-1,t,e,f)),s.sheets.push(o),Ca(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Fn.WS[0]),m){var y=m["!comments"],v=!1,g="";if(y&&y.length>0){var b=!1;y.forEach(function(w){w[1].forEach(function(j){j.T==!0&&(b=!0)})}),b&&(g="xl/threadedComments/threadedComment"+l+"."+r,Cn(i,g,T0e(y,u,t)),s.threadedcomments.push(g),Ca(f,-1,"../threadedComments/threadedComment"+l+"."+r,Fn.TCMNT)),g="xl/comments"+l+"."+r,Cn(i,g,JR(y)),s.comments.push(g),Ca(f,-1,"../comments"+l+"."+r,Fn.CMNT),v=!0}m["!legacy"]&&v&&Cn(i,"xl/drawings/vmlDrawing"+l+".vml",QR(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&Cn(i,ig(o),jp(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Cn(i,o,BR(t.Strings,t)),s.strs.push(o),Ca(t.wbrels,-1,"sharedStrings."+r,Fn.SST)),o="xl/workbook."+r,Cn(i,o,m9(e)),s.workbooks.push(o),Ca(t.rels,1,o,Fn.WB),o="xl/theme/theme1.xml",Cn(i,o,M3(e.Themes,t)),s.themes.push(o),Ca(t.wbrels,-1,"theme/theme1.xml",Fn.THEME),o="xl/styles."+r,Cn(i,o,GR(e,t)),s.styles.push(o),Ca(t.wbrels,-1,"styles."+r,Fn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",Cn(i,o,e.vbaraw),s.vba.push(o),Ca(t.wbrels,-1,"vbaProject.bin",Fn.VBA)),o="xl/metadata."+r,Cn(i,o,YR()),s.metadata.push(o),Ca(t.wbrels,-1,"metadata."+r,Fn.XLMETA),u.length>1&&(o="xl/persons/person.xml",Cn(i,o,P0e(u)),s.people.push(o),Ca(t.wbrels,-1,"persons/person.xml",Fn.PEOPLE)),Cn(i,"[Content_Types].xml",fR(s,t)),Cn(i,"_rels/.rels",jp(t.rels)),Cn(i,"xl/_rels/workbook."+r+".rels",jp(t.wbrels)),delete t.revssf,delete t.ssf,i}function G3(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Nc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function kve(e,t){return Gr.find(e,"EncryptedPackage")?bve(e,t):y9(e,t)}function Sve(e,t){var r,a=e,s=t||{};return s.type||(s.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=qM(a,s),yve(r,s)}function A9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Pk(e.slice(r),t);default:break e}return tm.to_workbook(e,t)}function _ve(e,t){var r="",a=G3(e,t);switch(t.type){case"base64":r=Nc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Eh(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Ba(r)),t.type="binary",A9(r,t)}function Ave(e,t){var r=e;return t.type=="base64"&&(r=Nc(r)),r=eg.utils.decode(1200,r.slice(2),"str"),t.type="binary",A9(r,t)}function Cve(e){return e.match(/[^\x00-\x7F]/)?Au(e):e}function Tj(e,t,r,a){return a?(r.type="string",tm.to_workbook(e,r)):tm.to_workbook(t,r)}function ky(e,t){f3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return ky(new Uint8Array(e),(r=fs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Sp={},r.dateNF&&(Sp.dateNF=r.dateNF),r.type||(r.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Pn?"buffer":"binary",a=Nle(e),typeof Uint8Array<"u"&&!Pn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=Cve(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=fs(r),r.type="array",ky(h3(a),r)}switch((s=G3(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return kve(Gr.read(a,r),r);break;case 9:if(s[1]<=8)return y9(a,r);break;case 60:return Pk(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Iue(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return MR.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Sve(a,r):Tj(e,a,r,i);case 239:return s[3]===60?Pk(a,r):Tj(e,a,r,i);case 255:if(s[1]===254)return Ave(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return xh.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return xh.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Ok.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return HR.to_workbook(a,r);break;case 10:case 13:case 32:return _ve(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Pue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Ok.to_workbook(a,r):Tj(e,a,r,i)}function C9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Sg(t.file,Gr.write(e,{type:Pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Gr.write(e,t)}function Eve(e,t){var r=fs(t||{}),a=wve(e,r);return Tve(a,r)}function Tve(e,t){var r={},a=Pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Gr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(pb(s))}return t.password&&typeof encrypt_agile<"u"?C9(encrypt_agile(s,t.password),t):t.type==="file"?Sg(t.file,s):t.type=="string"?Ba(s):s}function Ove(e,t){var r=t||{},a=Cge(e,r);return C9(a,r)}function wu(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return tg(Au(a));case"binary":return Au(a);case"string":return e;case"file":return Sg(t.file,a,"utf8");case"buffer":return Pn?Pf(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):wu(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Pve(e,t){switch(t.type){case"base64":return tg(e);case"binary":return e;case"string":return e;case"file":return Sg(t.file,e,"binary");case"buffer":return Pn?Pf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Rv(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?tg(r):t.type=="string"?Ba(r):r;case"file":return Sg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function E9(e,t){f3(),kxe(e);var r=fs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=E9(e,r);return r.type="array",pb(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return wu(wge(e,r),r);case"slk":case"sylk":return wu(FR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return wu(w9(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Pve(T9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return wu(K3(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return wu(MR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Rv(Ok.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return wu(tm.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return wu(HR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return wu(RR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return wu(S9(e,r),r);case"wk1":return Rv(xh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Rv(xh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Rv(b9(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ove(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Eve(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Ive(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Dve(e,t,r){var a={};return a.type="file",a.file=t,Ive(a),E9(e,a)}function Lve(e,t,r,a,s,i,o,l){var c=li(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var y=o?e[r][p]:e[a[p]+c];if(y===void 0||y.t===void 0){if(d===void 0)continue;i[p]!=null&&(m[i[p]]=d);continue}var v=y.v;switch(y.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[p]!=null){if(v==null)if(y.t=="e"&&v===null)m[i[p]]=null;else if(d!==void 0)m[i[p]]=d;else if(u&&v===null)m[i[p]]=null;else continue;else m[i[p]]=u&&(y.t!=="n"||y.t==="n"&&l.rawNumbers!==!1)?v:Cf(y,v,l);v!=null&&(f=!1)}}return{row:m,isempty:f}}function Sy(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=da(u);break;case"number":c=da(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var f=li(c.s.r),m=[],p=[],y=0,v=0,g=Array.isArray(e),b=c.s.r,w=0,j={};g&&!e[b]&&(e[b]=[]);var N=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(N[w]||{}).hidden)switch(m[w]=Ds(w),r=g?e[b][w]:e[m[w]+f],a){case 1:i[w]=w-c.s.c;break;case 2:i[w]=m[w];break;case 3:i[w]=d.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Cf(r,null,d),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[w]=l}for(b=c.s.r+s;b<=c.e.r;++b)if(!(S[b]||{}).hidden){var E=Lve(e,c,b,m,a,i,g,d);(E.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(p[y++]=E.row)}return p.length=y,p}var V8=/"/g;function Fve(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",f=li(r),m=t.s.c;m<=t.e.c;++m)if(a[m]){var p=l.dense?(e[r]||[])[m]:e[a[m]+f];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:Cf(p,null,l));for(var y=0,v=0;y!==u.length;++y)if((v=u.charCodeAt(y))===s||v===i||v===34||l.forceQuotes){u='"'+u.replace(V8,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(V8,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function K3(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=da(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(f[y]=Ds(y));for(var v=0,g=s.s.r;g<=s.e.r;++g)(p[g]||{}).hidden||(u=Fve(e,s,g,f,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((v++?l:"")+u)));return delete a.dense,r.join("")}function T9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=K3(e,t);return r}function Mve(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=da(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Ds(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=li(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function O9(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ls(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=da(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var m=a.header||[],p=0;t.forEach(function(v,g){Xs(v).forEach(function(b){(p=m.indexOf(b))==-1&&(m[p=m.length]=b);var w=v[b],j="z",N="",S=un({c:l+p,r:o+g+s});d=hg(i,S),w&&typeof w=="object"&&!(w instanceof Date)?i[S]=w:(typeof w=="number"?j="n":typeof w=="boolean"?j="b":typeof w=="string"?j="s":w instanceof Date?(j="d",a.cellDates||(j="n",w=qi(w)),N=a.dateNF||rn[14]):w===null&&a.nullError&&(j="e",w=0),d?(d.t=j,d.v=w,delete d.w,delete d.R,N&&(d.z=N)):i[S]=d={t:j,v:w},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+m.length-1);var y=li(o);if(s)for(p=0;p<m.length;++p)i[Ds(p+l)+y]={t:"s",v:m[p]};return i["!ref"]=kn(u),i}function Rve(e,t){return O9(null,e,t)}function hg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Ls(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?hg(e,un(t)):hg(e,un({r:t,c:r||0}))}function Bve(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function X3(){return{SheetNames:[],Sheets:{}}}function Y3(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(p9(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Uve(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=Bve(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function qve(e,t){return e.z=t,e}function P9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function $ve(e,t,r){return P9(e,"#"+t,r)}function zve(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Hve(e,t,r,a){for(var s=typeof t!="string"?t:da(t),i=typeof t=="string"?t:kn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=hg(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Y0={encode_col:Ds,encode_row:li,encode_cell:un,encode_range:kn,decode_col:S3,decode_row:k3,split_cell:ece,decode_cell:Ls,decode_range:Ql,format_cell:Cf,sheet_add_aoa:sR,sheet_add_json:O9,sheet_add_dom:N9,aoa_to_sheet:mm,json_to_sheet:Rve,table_to_sheet:j9,table_to_book:Yge,sheet_to_csv:K3,sheet_to_txt:T9,sheet_to_json:Sy,sheet_to_html:w9,sheet_to_formulae:Mve,sheet_to_row_object_array:Sy,sheet_get_cell:hg,book_new:X3,book_append_sheet:Y3,book_set_sheet_visibility:Uve,cell_set_number_format:qve,cell_set_hyperlink:P9,cell_set_internal_link:$ve,cell_add_comment:zve,sheet_set_array_formula:Hve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Wve={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},Vve=["header","bold","italic","underline","list","bullet","link","image"],Q3=({value:e,onChange:t,placeholder:r="Enter text...",readOnly:a=!1,className:s=""})=>n.jsx("div",{className:s,children:n.jsx(c3,{theme:"snow",value:e||"",onChange:t,modules:a?{toolbar:!1}:Wve,formats:Vve,readOnly:a,placeholder:r})}),I9=({content:e,className:t=""})=>{if(!e||e.trim()==="")return null;const r=Zx.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","a","img","h1","h2","h3"],ALLOWED_ATTR:["href","src","alt","class","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return n.jsx("div",{className:t+" [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1",dangerouslySetInnerHTML:{__html:r}})},mf={all:["tasks"],lists:()=>[...mf.all,"list"],list:e=>[...mf.lists(),e],details:()=>[...mf.all,"detail"],detail:e=>[...mf.details(),e]},Gve=(e,t,r)=>Gs({queryKey:mf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const a=await db(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:a=>a}),Kve=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>{const s=await z7(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:mf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to create task")}})},Xve=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async({id:a,data:s})=>{const i=await oy(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:mf.lists()}),e.invalidateQueries({queryKey:mf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to update task")}})},Yve=()=>{const e=Pa(),{showSuccess:t,showError:r}=On();return ci({mutationFn:async a=>(await H7(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:mf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to delete task")}})},Jm={all:["projects"],lists:()=>[...Jm.all,"list"],list:e=>[...Jm.lists(),e],details:()=>[...Jm.all,"detail"],detail:e=>[...Jm.details(),e]},Qve=(e,t,r)=>Gs({queryKey:Jm.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const a=await I0(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:a=>a}),Jve=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=On(),i=Pa(),{data:o=[],isLoading:l,error:c}=Gve(),{data:d=[],isLoading:u}=Qve(),{data:f=[],isLoading:m}=o3(),p=Xve(),y=Yve();Kve();const v=l||u||m,[g,b]=L.useState(""),[w,j]=L.useState("active"),[N,S]=L.useState("list"),[E,_]=L.useState("none"),[P,I]=L.useState(!1),[U,C]=L.useState("upload"),[O,R]=L.useState([]),[z,H]=L.useState([]),[Q,J]=L.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[re,X]=L.useState(!1),[ee,W]=L.useState(null),[T,q]=L.useState(null),[V,B]=L.useState(null),[K,oe]=L.useState(null),[me,se]=L.useState(null),[de,Re]=L.useState(null),[he,Ue]=L.useState(!1),[Oe,le]=L.useState(!1),[te,Se]=L.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[we,Pe]=L.useState([]),[fe,ue]=L.useState(!1),[Ee,Ye]=L.useState(!1),[xe,ve]=L.useState(!1),[Fe,$e]=L.useState(!1),[_e,Be]=L.useState(""),[qe,Ze]=L.useState(""),[Vt,Dt]=L.useState(""),[dt,Tt]=L.useState(null),[Ht,Ve]=L.useState(!1),[jt,gr]=L.useState(null),[nr,Ar]=L.useState(null),[Ir,Xt]=L.useState(!1),[Qt,mr]=L.useState(""),[Fr,fn]=L.useState(0),[Br,Qr]=L.useState([]),[ir,qn]=L.useState(!1),[an,wn]=L.useState([]),[Tr,zr]=L.useState(!1),ne=L.useRef(null),je=L.useRef(null),ke=L.useRef(null),ie=We=>{const Et=We.getFullYear(),_t=We.getMonth(),sr=We.getDate();return`${Et}-${String(_t+1).padStart(2,"0")}-${String(sr).padStart(2,"0")}`},ge=We=>{if(!We||!/^\d{4}-\d{2}-\d{2}$/.test(We))return We;const[Et,_t,sr]=We.split("-").map(Number);return new Date(Et,_t-1,sr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Ae=We=>{const Et=new Date(We),_t=Et.getDay(),sr=Et.getDate()-_t+(_t===0?-6:1);return new Date(Et.setDate(sr))},Ge=We=>{const Et=new Date(We);Et.setHours(0,0,0,0);const _t=new Date(Et);return _t.setDate(Et.getDate()+6),_t.setHours(23,59,59,999),{start:Et,end:_t}},rt=We=>{if(!We||!/^\d{4}-\d{2}-\d{2}$/.test(We))return null;const[Et,_t,sr]=We.split("-").map(Number),yr=new Date(Et,_t-1,sr),pr=Ae(yr);return`${pr.getFullYear()}-${String(pr.getMonth()+1).padStart(2,"0")}-${String(pr.getDate()).padStart(2,"0")}`};L.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),a("Failed to load tasks"))},[c,a]),L.useEffect(()=>{de&&!he&&Se({title:de.title,category:de.category||"",description:de.description||"",dueDate:de.dueDate||"",priority:de.priority||"Medium",status:de.status||"Todo",assigneeId:de.assigneeId,projectId:de.projectId||""})},[de,he]),L.useEffect(()=>{if(!de)return;let We=!1;return(async()=>{try{const Et=await iy(),_t=Array.isArray(Et?.data)?Et.data:[];We||wn(_t)}catch{We||wn([])}})(),()=>{We=!0}},[de?.id]),L.useEffect(()=>{if(!he){zr(!1);return}te.category&&an.includes(te.category)?zr(!1):te.category&&!an.includes(te.category)&&zr(!0)},[he,te.category,an]);const Qe=async We=>{if(o.find(_t=>_t.id===We)){q(We);try{await p.mutateAsync({id:We,data:{archived:w==="active"}}),oe(null)}catch{}finally{q(null)}}},tt=async We=>{W(We);try{await y.mutateAsync(We),se(null)}catch{}finally{W(null)}},Ke=()=>{we.length===ua.length?Pe([]):Pe(ua.map(We=>We.id))},Le=async()=>{ue(!0);try{const We=[...we];await Promise.all(We.map(Et=>y.mutateAsync(Et))),Pe([]),Ye(!1),r(`Successfully deleted ${We.length} task${We.length>1?"s":""}`)}catch(We){a(We.message||"Failed to delete tasks")}finally{ue(!1)}},st=async()=>{if(!_e){a("Please select a project");return}$e(!0);try{const We=[...we];await Promise.all(We.map(Et=>p.mutateAsync({id:Et,data:{projectId:_e==="__none__"?null:_e}}))),Pe([]),ve(!1),Be(""),r(`Assigned ${We.length} task${We.length>1?"s":""} to ${_e==="__none__"?"No project":d.find(Et=>Et.id===_e)?.title||"project"}`)}catch(We){a(We.message||"Failed to assign project")}finally{$e(!1)}},mt=()=>{const We=new Date;We.setDate(We.getDate()+30);const Et=We.getDate(),_t=We.getMonth()+1,sr=We.getFullYear(),yr=`${Et}-${_t}-${sr}`,pr=Y0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",yr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Dr=Y0.book_new();Y0.book_append_sheet(Dr,pr,"Tasks"),Dve(Dr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},Ot=async()=>{if(!Q.title){a("Please map the required field: Title");return}if(z.length===0){a("No data to import");return}X(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Q),console.log("[IMPORT] Parsed data rows:",z.length),console.log("[IMPORT] Sample parsed row:",z[0]);const We=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!We){a("Please log in to import tasks"),X(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:z.length,columnMapping:Q,usersCount:f.length,currentUserId:We});const Et=z.map((Jt,cr)=>{console.log(`[IMPORT] Processing row ${cr}:`,Jt),console.log("[IMPORT] Column mapping:",Q);const Ft=String(Jt[Q.title]||"").trim(),wr=Q.category?String(Jt[Q.category]||"").trim():"",zt=String(Jt[Q.dueDate]||"").trim(),Ua=Q.description?String(Jt[Q.description]||"").trim():"",Ia=Q.priority?String(Jt[Q.priority]||"").trim():"Medium",Da=Q.owner?String(Jt[Q.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${cr}:`,{title:Ft,category:wr,dueDateRaw:zt,description:Ua,priorityRaw:Ia,ownerRaw:Da,rowKeys:Object.keys(Jt),mappedTitleKey:Q.title,mappedDueDateKey:Q.dueDate});let er="";if(zt&&zt.toLowerCase().trim()==="ongoing")er="";else if(zt)if(/^\d+$/.test(zt)&&parseFloat(zt)>25569){const Nr=new Date(1900,0,1),Wr=parseFloat(zt)-2,or=new Date(Nr.getTime()+Wr*24*60*60*1e3);isNaN(or.getTime())||(er=ie(or))}else{let Nr=null;if(/^\d{4}-\d{2}-\d{2}$/.test(zt))er=zt,Nr=new Date(0);else if(zt.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(zt)){const Wr=zt.split("-").map(or=>or.trim());if(Wr.length===3){const or=parseInt(Wr[0],10),Vn=parseInt(Wr[1],10)-1,Hr=parseInt(Wr[2],10);!isNaN(or)&&!isNaN(Vn)&&!isNaN(Hr)&&or>=1&&or<=31&&Vn>=0&&Vn<=11&&(Nr=new Date(Hr,Vn,or),console.log(`[IMPORT] Parsed hyphen-separated date "${zt}" as day-month-year -> ${ie(Nr)}`))}}else if(zt.includes("/")){const Wr=zt.split("/").map(or=>or.trim());if(Wr.length===3){const or=parseInt(Wr[0],10),Vn=parseInt(Wr[1],10)-1;let Hr=parseInt(Wr[2],10);Hr<100&&(Hr+=2e3),!isNaN(or)&&!isNaN(Vn)&&!isNaN(Hr)&&(Nr=new Date(Hr,Vn,or))}}else if(zt.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const Wr=zt.split("/"),or=parseInt(Wr[0],10)-1,Vn=parseInt(Wr[1],10),Hr=parseInt(Wr[2],10);!isNaN(Vn)&&!isNaN(or)&&!isNaN(Hr)&&(Nr=new Date(Hr,or,Vn))}else if(!Nr||isNaN(Nr.getTime())){const Wr=zt.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(Wr){const[,or,Vn,Hr]=Wr,Ja=["january","february","march","april","may","june","july","august","september","october","november","december"],fo=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Si=or.toLowerCase().trim();let ps=-1;for(let ms=0;ms<Ja.length;ms++)if(Si.startsWith(Ja[ms])||Si.startsWith(fo[ms])){ps=ms;break}if(ps>=0){const ms=parseInt(Vn,10),ho=parseInt(Hr,10);Nr=new Date(ho,ps,ms),Nr.getFullYear()!==ho||Nr.getMonth()!==ps||Nr.getDate()!==ms?(console.warn(`[IMPORT] Invalid date parsed from "${zt}": year=${ho}, month=${ps}, day=${ms}`),Nr=null):console.log(`[IMPORT] Successfully parsed date "${zt}" -> ${ie(Nr)}`)}else console.warn(`[IMPORT] Could not match month name in "${zt}"`)}}if(!Nr||isNaN(Nr.getTime())){const Wr=new Date(zt);if(!isNaN(Wr.getTime())){const or=Wr.getFullYear(),Vn=Wr.getMonth(),Hr=Wr.getDate();Nr=new Date(or,Vn,Hr),console.log(`[IMPORT] Used fallback date parsing for "${zt}" -> ${ie(Nr)}`)}}Nr&&!isNaN(Nr.getTime())&&!er?(er=ie(Nr),console.log(`[IMPORT] Final dueDate for row ${cr}: "${zt}" -> "${er}"`)):zt&&!er&&console.error(`[IMPORT] Failed to parse date "${zt}" for row ${cr}`)}const fa={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[Ia.toLowerCase()]||"Medium";let bn=We;if(Da&&f.length>0){const Nr=Da.toLowerCase().trim(),Wr=f.find(or=>or.name.toLowerCase().trim()===Nr||or.email.toLowerCase().trim()===Nr||or.name.toLowerCase().trim().includes(Nr)||or.email.toLowerCase().trim().includes(Nr));Wr?(bn=Wr.id,console.log(`[IMPORT] Matched owner "${Da}" to user:`,Wr.name,Wr.id)):console.warn(`[IMPORT] Could not match owner "${Da}", using current user`)}bn||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),bn=We);const mn={title:Ft.trim(),category:wr||void 0,dueDate:er||null,description:Ua.trim()||"",priority:fa,status:"Todo",assigneeId:bn,_rowIndex:cr,_rawDate:zt};return(!mn.title||!mn.assigneeId)&&console.error(`[IMPORT] Row ${cr} missing required fields:`,{hasTitle:!!mn.title,hasAssigneeId:!!mn.assigneeId,taskData:mn}),bn||console.warn(`[IMPORT] Row ${cr}: No assigneeId found, using current user:`,{title:Ft,ownerRaw:Da,userId:We}),console.log(`[IMPORT] Task data for row ${cr}:`,mn),mn}).filter(Jt=>{const cr=Jt.title&&Jt.assigneeId;return cr?console.log("[IMPORT] Valid task:",{title:Jt.title,dueDate:Jt.dueDate||"Not set",assigneeId:Jt.assigneeId,priority:Jt.priority,status:Jt.status}):console.error("[IMPORT] Filtered out invalid task:",{title:Jt.title,dueDate:Jt.dueDate,assigneeId:Jt.assigneeId,rawDate:Jt._rawDate,rowIndex:Jt._rowIndex,fullTask:Jt,missingFields:{title:!Jt.title,assigneeId:!Jt.assigneeId}}),cr}).map(({_rowIndex:Jt,_rawDate:cr,...Ft})=>(Ft.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Ft),Ft.assigneeId=We),Ft));if(console.log("[IMPORT] Final tasks to import:",Et),console.log("[IMPORT] Tasks count:",Et.length),Et.length===0){const Jt=z[0],cr=Jt?String(Jt[Q.title]||"").trim():"N/A",Ft=Jt?String(Jt[Q.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:z.length,columnMapping:Q,mappedTitle:Q.title,mappedDueDate:Q.dueDate,sampleRow:Jt,sampleTitle:cr,sampleDate:Ft,sampleRowKeys:Jt?Object.keys(Jt):[],parsedData:z.slice(0,3)}),a(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Q.title}")
2. Due Date column is mapped correctly (current: "${Q.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${cr}", Date: "${Ft}"

Available columns: ${O.join(", ")}`),X(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const _t=Et.map(({_rowIndex:Jt,_rawDate:cr,...Ft})=>Ft);console.log("[IMPORT] Tasks to import count:",_t.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(_t,null,2)),console.log("[IMPORT] Sample task structure:",{title:_t[0]?.title,dueDate:_t[0]?.dueDate,assigneeId:_t[0]?.assigneeId,priority:_t[0]?.priority,status:_t[0]?.status,description:_t[0]?.description,hasProjectId:!!_t[0]?.projectId});const sr=_t.filter(Jt=>!Jt.title||!Jt.assigneeId);if(sr.length>0){console.error("[IMPORT] Invalid tasks found:",sr),a(`Cannot import: ${sr.length} task(s) missing required fields (title or assigneeId)`),X(!1);return}let yr;try{yr=await Fne(_t),console.log("[IMPORT] API call successful")}catch(Jt){console.error("[IMPORT] API call failed:",Jt),console.error("[IMPORT] Error details:",{message:Jt.message,status:Jt.status,code:Jt.code,stack:Jt.stack}),a(`Failed to import tasks: ${Jt.message||"Unknown error"}`),X(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(yr,null,2)),console.log("[IMPORT] Response type:",typeof yr),console.log("[IMPORT] Response keys:",yr?Object.keys(yr):"null");let pr={},Dr=[];if(yr)yr.success&&yr.data?(pr=yr.data,Dr=pr.created||[]):yr.data&&Array.isArray(yr.data.created)?(pr=yr.data,Dr=pr.created||[]):yr.created&&Array.isArray(yr.created)?(pr=yr,Dr=pr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),pr=yr.data||yr,Dr=pr.created||pr.data?.created||[]),console.log("[IMPORT] Extracted importData:",pr),console.log("[IMPORT] Created tasks:",Dr),console.log("[IMPORT] Created tasks count:",Dr.length),console.log("[IMPORT] Created task IDs:",Dr.map(Jt=>Jt?.id)),console.log("[IMPORT] Created task details:",Dr.map(Jt=>({id:Jt.id,title:Jt.title,assigneeId:Jt.assigneeId})));else{console.error("[IMPORT] No response received from API"),a("No response received from server. Please check your connection."),X(!1);return}const ta=pr.successful??Dr.length??0,jn=pr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:ta,failedCount:jn,total:Et.length,createdTasks:Dr.length,createdTaskIds:Dr.map(Jt=>Jt.id),errors:pr.errors}),Dr&&Dr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Dr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Dr),console.error("[IMPORT] Response structure:",yr),console.error("[IMPORT] Import data:",pr)),jn>0){const Jt=pr.errors?.map(cr=>`Row ${cr.index+1}: ${cr.error}`).join(`
`)||"";a(`Imported ${ta} task(s), but ${jn} failed.
${Jt}`)}else r(`Successfully imported ${ta} task(s)`);H([]),R([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ne.current&&(ne.current.value=""),I(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(We){console.error("Import error:",We),a(We.message||"Failed to import tasks. Please check your data format.")}finally{X(!1)}},Lt=We=>{if(!We||We.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",We),console.log("[IMPORT] Header detection - firstRow length:",We.length),console.log("[IMPORT] Header detection - firstRow values:",We.map((pr,Dr)=>`[${Dr}]: "${pr}"`));const Et=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let _t=0;const sr=We.filter(pr=>pr&&String(pr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",sr);for(const pr of sr){const Dr=String(pr).toLowerCase().trim();Et.some(ta=>Dr.includes(ta))&&(_t++,console.log(`[IMPORT] Header detection - matched keyword in: "${pr}"`)),Dr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(_t++,console.log(`[IMPORT] Header detection - matched pattern in: "${pr}"`))}const yr=sr.length>0?_t/sr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:We,totalCells:We.length,cellsToCheck:sr.length,matchCount:_t,matchRatio:yr,isHeader:yr>=.4}),yr>=.4},vr=async We=>{const Et=We.target.files?.[0];if(Et)try{const _t=Et.name.split(".").pop()?.toLowerCase();if(_t==="csv"){const sr=new FileReader;sr.onload=yr=>{try{const pr=new Uint8Array(yr.target?.result),Dr=ky(pr,{type:"array",sheetStubs:!0}),ta=Dr.SheetNames[0],jn=Dr.Sheets[ta],Jt=Y0.decode_range(jn["!ref"]||"A1"),cr=Jt.e.c-Jt.s.c+1;console.log("[IMPORT] CSV worksheet range:",jn["!ref"]),console.log("[IMPORT] CSV number of columns from range:",cr);const Ft=Y0.sheet_to_json(jn,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Ft.length),console.log("[IMPORT] CSV first row length:",Ft[0]?.length),console.log("[IMPORT] CSV first row:",Ft[0]),Ft.length===0){a("File is empty");return}if(Ft[0]&&Ft[0].length<cr)for(console.log(`[IMPORT] CSV: Padding first row from ${Ft[0].length} to ${cr} columns`);Ft[0].length<cr;)Ft[0].push("");const wr=Lt(Ft[0]);console.log("[IMPORT] CSV Header detection result:",wr);let zt,Ua;if(wr?(zt=Ft[0].map((er,Jr)=>String(er||"").trim()||`Column ${Jr+1}`),Ua=1,console.log("[IMPORT] CSV raw first row:",Ft[0]),console.log("[IMPORT] CSV processed headers:",zt)):(zt=Ft[0].map((er,Jr)=>`Column ${Jr+1}`),Ua=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),zt.length===0){a("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",zt),console.log("[IMPORT] CSV detected headers count:",zt.length),console.log("[IMPORT] CSV detected headers array:",zt),R(zt),console.log("[IMPORT] CSV setDetectedColumns called with:",zt);const Ia=[];for(let er=Ua;er<Ft.length;er++){const Jr={},fa=Ft[er]||[];for(;fa.length<zt.length;)fa.push("");zt.forEach((bn,mn)=>{const Nr=fa[mn];if(typeof Nr=="number"&&Nr>25569&&bn.toLowerCase().includes("date")){const Wr=new Date(1900,0,1),or=Nr-2,Vn=new Date(Wr.getTime()+or*24*60*60*1e3);Jr[bn]=Vn.toISOString().split("T")[0]}else Jr[bn]=Nr!=null?String(Nr).trim():""}),Object.values(Jr).some(bn=>bn)&&Ia.push(Jr)}console.log("[IMPORT] CSV parsed rows:",Ia),console.log("[IMPORT] CSV parsed rows count:",Ia.length),H(Ia);const Da={title:zt.find(er=>er.toLowerCase().includes("title")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("name")||!er.toLowerCase().includes("category")&&er.toLowerCase().includes("name"))||"",category:zt.find(er=>er.toLowerCase().includes("category")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("cat"))||"",dueDate:zt.find(er=>er.toLowerCase().includes("due")||er.toLowerCase().includes("date")&&!er.toLowerCase().includes("created")&&!er.toLowerCase().includes("updated"))||"",description:zt.find(er=>er.toLowerCase().includes("description")||er.toLowerCase().includes("desc"))||"",priority:zt.find(er=>er.toLowerCase().includes("priority")||er.toLowerCase().includes("prio"))||"",owner:zt.find(er=>er.toLowerCase().includes("owner")||er.toLowerCase().includes("assignee")||er.toLowerCase().includes("assigned")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("owner"))||""};J(Da),C("mapping")}catch(pr){console.error("CSV parse error:",pr),a("Failed to parse CSV file: "+(pr.message||"Unknown error"))}},sr.readAsArrayBuffer(Et)}else if(_t==="xlsx"||_t==="xls"){const sr=new FileReader;sr.onload=yr=>{const pr=new Uint8Array(yr.target?.result),Dr=ky(pr,{type:"array"}),ta=Dr.SheetNames[0],jn=Dr.Sheets[ta],Jt=Y0.decode_range(jn["!ref"]||"A1"),cr=Jt.e.c-Jt.s.c+1;console.log("[IMPORT] Excel worksheet range:",jn["!ref"]),console.log("[IMPORT] Excel number of columns from range:",cr);const Ft=Y0.sheet_to_json(jn,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Ft.length),console.log("[IMPORT] Excel first row length:",Ft[0]?.length),console.log("[IMPORT] Excel first row:",Ft[0]),Ft.length===0){a("File is empty");return}if(Ft[0]&&Ft[0].length<cr)for(console.log(`[IMPORT] Padding first row from ${Ft[0].length} to ${cr} columns`);Ft[0].length<cr;)Ft[0].push("");const wr=Lt(Ft[0]);console.log("[IMPORT] Excel Header detection result:",wr);let zt,Ua;wr?(zt=Ft[0].map((er,Jr)=>String(er||"").trim()||`Column ${Jr+1}`),Ua=1,console.log("[IMPORT] Excel raw first row:",Ft[0]),console.log("[IMPORT] Excel processed headers:",zt)):(zt=Ft[0].map((er,Jr)=>`Column ${Jr+1}`),Ua=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",zt),console.log("[IMPORT] Detected headers count:",zt.length),console.log("[IMPORT] Detected headers array:",zt),console.log("[IMPORT] Raw JSON data:",Ft),R(zt),console.log("[IMPORT] setDetectedColumns called with:",zt);const Ia=[];for(let er=Ua;er<Ft.length;er++){const Jr={},fa=Ft[er]||[];for(;fa.length<zt.length;)fa.push("");zt.forEach((bn,mn)=>{const Nr=fa[mn];if(typeof Nr=="number"&&Nr>25569&&bn.toLowerCase().includes("date")){const Wr=new Date(1900,0,1),or=Nr-2,Vn=new Date(Wr.getTime()+or*24*60*60*1e3),Hr=Vn.getFullYear(),Ja=Vn.getMonth(),fo=Vn.getDate();Jr[bn]=`${Hr}-${String(Ja+1).padStart(2,"0")}-${String(fo).padStart(2,"0")}`}else Jr[bn]=Nr!=null?String(Nr).trim():""}),Object.values(Jr).some(bn=>bn)&&Ia.push(Jr)}console.log("[IMPORT] Parsed rows:",Ia),console.log("[IMPORT] Parsed rows count:",Ia.length),H(Ia);const Da={title:zt.find(er=>er.toLowerCase().includes("title")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("name")||!er.toLowerCase().includes("category")&&er.toLowerCase().includes("name"))||"",category:zt.find(er=>er.toLowerCase().includes("category")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("cat"))||"",dueDate:zt.find(er=>er.toLowerCase().includes("due")||er.toLowerCase().includes("date")&&!er.toLowerCase().includes("created")&&!er.toLowerCase().includes("updated"))||"",description:zt.find(er=>er.toLowerCase().includes("description")||er.toLowerCase().includes("desc"))||"",priority:zt.find(er=>er.toLowerCase().includes("priority")||er.toLowerCase().includes("prio"))||"",owner:zt.find(er=>er.toLowerCase().includes("owner")||er.toLowerCase().includes("assignee")||er.toLowerCase().includes("assigned")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",Da),J(Da),C("mapping")},sr.readAsArrayBuffer(Et)}else a("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(_t){console.error("Error parsing file:",_t),a("Failed to parse file: "+(_t.message||"Unknown error"))}},Mr=async(We,Et,_t)=>{_t.stopPropagation();const sr=Et==="Done"?"Todo":"Done";B(We);try{await p.mutateAsync({id:We,data:{status:sr}}),de?.id===We&&Re({...de,status:sr})}catch{}finally{B(null)}},Vr=async()=>{if(de){if(!te.title.trim()){a("Task title is required");return}if(!te.assigneeId){a("Assignee is required");return}le(!0);try{await p.mutateAsync({id:de.id,data:{title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||null,priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||null}}),Re({...de,title:te.title.trim(),category:te.category.trim()||void 0,description:te.description.trim()||"",dueDate:te.dueDate||"",priority:te.priority,status:te.status,assigneeId:te.assigneeId,projectId:te.projectId||void 0}),Ue(!1)}catch{}finally{le(!1)}}},Mn=(We,Et=1200,_t=1200,sr=.8)=>new Promise((yr,pr)=>{const Dr=new FileReader;Dr.onload=ta=>{const jn=new Image;jn.onload=()=>{let Jt=jn.width,cr=jn.height;Jt>cr?Jt>Et&&(cr=cr*Et/Jt,Jt=Et):cr>_t&&(Jt=Jt*_t/cr,cr=_t);const Ft=document.createElement("canvas");Ft.width=Jt,Ft.height=cr;const wr=Ft.getContext("2d");wr?(wr.drawImage(jn,0,0,Jt,cr),yr(Ft.toDataURL("image/jpeg",sr))):pr(new Error("Canvas context not available"))},jn.onerror=()=>pr(new Error("Failed to load image")),jn.src=ta.target?.result},Dr.onerror=()=>pr(new Error("Failed to read file")),Dr.readAsDataURL(We)}),Fs=async We=>{const Et=We.target.files?.[0];if(Et){if(!Et.type.startsWith("image/")){a("Please select an image file");return}if(Et.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const _t=await Mn(Et,1200,1200,.8);Dt(_t),Tt(Et)}catch(_t){a(_t.message||"Failed to process image")}}},$n=We=>{const Et=We.target.value,_t=We.target.selectionStart;Ze(Et),fn(_t);const sr=Et.substring(0,_t),yr=sr.lastIndexOf("@");if(yr!==-1){const pr=sr.substring(yr+1),Dr=yr>0?sr[yr-1]:" ";if((Dr===" "||Dr===`
`||yr===0)&&!pr.includes(" ")&&!pr.includes(`
`)){mr(pr);const ta=f.filter(jn=>jn.name.toLowerCase().includes(pr.toLowerCase())||jn.email.toLowerCase().includes(pr.toLowerCase()));Qr(ta.slice(0,5)),Xt(!0);return}}Xt(!1)},hs=We=>{const _t=qe.substring(0,Fr).lastIndexOf("@"),sr=qe.substring(Fr),pr=`${qe.substring(0,_t)}@${We.name} ${sr}`;if(Ze(pr),Xt(!1),ke.current){ke.current.focus();const Dr=_t+We.name.length+2;ke.current.setSelectionRange(Dr,Dr)}},zn=We=>{const Et=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,_t=[];let sr;for(;(sr=Et.exec(We))!==null;){const yr=sr[1].trim(),pr=f.find(Dr=>Dr.name.toLowerCase()===yr.toLowerCase());pr&&pr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&_t.push(pr.id)}return[...new Set(_t)]};L.useEffect(()=>{if(ke.current){const We=ke.current;We.style.height="auto";const Et=24,_t=5*Et,sr=15*Et,yr=Math.min(Math.max(We.scrollHeight,_t),sr);We.style.height=`${yr}px`}},[qe]);const As=We=>{const Et=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,_t=[];let sr=0,yr;for(;(yr=Et.exec(We))!==null;){yr.index>sr&&_t.push(We.substring(sr,yr.index));const pr=yr[1].trim(),Dr=f.find(ta=>ta.name.toLowerCase()===pr.toLowerCase());Dr?_t.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Dr.name]},yr.index)):_t.push(`@${pr}`),sr=yr.index+yr[0].length}return sr<We.length&&_t.push(We.substring(sr)),_t.length>0?_t:We},Hn=async()=>{if(de){if(!qe.trim()&&!dt){a("Please enter a note or upload an image");return}Ve(!0);try{const We=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Et=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",_t={id:`note_${Date.now()}`,userId:We,userName:Et,text:qe.trim(),imageUrl:Vt||void 0,imageName:dt?.name||void 0,imageMimeType:dt?.type||void 0,createdAt:new Date().toISOString()},sr=[...de.notes||[],_t];await p.mutateAsync({id:de.id,data:{notes:sr}}),Re({...de,notes:sr});const yr=zn(qe);for(const Dr of yr)try{await Jp({userId:Dr,type:"task-mention",title:"You were mentioned in a task",message:`${Et} mentioned you in task "${de.title}"`,relatedId:de.id,relatedType:"task",read:!1})}catch(ta){console.error("Failed to send notification:",ta)}Ze(""),Dt(""),Tt(null),je.current&&(je.current.value="");const pr=yr.length>0?`Note added and ${yr.length} user(s) notified`:"Note added successfully";r(pr)}catch(We){a(We.message||"Failed to add note")}finally{Ve(!1)}}},Nn=async()=>{if(!(!de||!t||!nr))try{gr(nr);const We=de.notes?.filter(Et=>Et.id!==nr)||[];await p.mutateAsync({id:de.id,data:{notes:We}}),Re({...de,notes:We}),r("Note deleted successfully"),Ar(null)}catch(We){a(We.message||"Failed to delete note")}finally{gr(null)}},ul=()=>{Re(null),Ue(!1),Ze(""),Dt(""),Tt(null),Xt(!1),qn(!1),je.current&&(je.current.value="")};let ua=o.filter(We=>{if(w==="archived"){if(!We.archived)return!1}else if(w==="week"){if(We.archived)return!1}else if(We.archived)return!1;return g.trim()?We.title.toLowerCase().includes(g.toLowerCase()):!0});if(E==="dueDate")ua=[...ua].sort((We,Et)=>!We.dueDate&&!Et.dueDate?0:We.dueDate?Et.dueDate?(We.dueDate||"").localeCompare(Et.dueDate||""):-1:1);else if(E==="priority"){const We={High:1,Medium:2,Low:3};ua=[...ua].sort((Et,_t)=>{const sr=We[Et.priority]||4,yr=We[_t.priority]||4;return sr-yr})}else E==="category"?ua=[...ua].sort((We,Et)=>{const _t=(We.category||"Uncategorized").toLowerCase(),sr=(Et.category||"Uncategorized").toLowerCase();return _t.localeCompare(sr)}):E==="owner"&&(ua=[...ua].sort((We,Et)=>{const _t=f.find(yr=>yr.id===We.assigneeId)?.name||"Unassigned",sr=f.find(yr=>yr.id===Et.assigneeId)?.name||"Unassigned";return _t.localeCompare(sr)}));return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{j("active"),Pe([])},className:`text-sm font-bold pb-1 transition-all ${w==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{j("archived"),Pe([])},className:`text-sm font-bold pb-1 transition-all ${w==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(We=>We.archived).length,")"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{I(!0),C("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[n.jsx(h6,{className:"w-4 h-4"})," Bulk Import"]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[n.jsx(nn,{className:"w-4 h-4"})," New Task"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:We=>{b(We.target.value),Pe([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:E,onChange:We=>_(We.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[n.jsx("option",{value:"none",children:"No Sort"}),n.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),n.jsx("option",{value:"priority",children:"Sort by Priority"}),n.jsx("option",{value:"category",children:"Sort by Category"}),n.jsx("option",{value:"owner",children:"Sort by Owner"})]}),n.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:n.jsx(zs,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[n.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${N==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(dU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${N==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(oU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{j(w==="week"?"active":"week"),Pe([])},className:`p-2 rounded-lg ${w==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:n.jsx(oa,{className:"w-4 h-4"})})]})]}),!v&&ua.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ua.length>0&&we.length===ua.length,onChange:Ke}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):ua.length===0?n.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[n.jsx(a1,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",w==="week"?"tasks":w," tasks found"]})]}):w==="week"?n.jsx("div",{className:"space-y-8",children:(()=>{const We=ua.filter(cr=>!rt(cr.dueDate)),Et=ua.filter(cr=>rt(cr.dueDate)),_t={};Et.forEach(cr=>{const Ft=rt(cr.dueDate);_t[Ft]||(_t[Ft]=[]),_t[Ft].push(cr)});const sr=Object.keys(_t).sort(),yr=(()=>{const cr=Ae(new Date);return`${cr.getFullYear()}-${String(cr.getMonth()+1).padStart(2,"0")}-${String(cr.getDate()).padStart(2,"0")}`})(),pr=(()=>{const cr=Ae(new Date),Ft=new Date(cr);return Ft.setDate(cr.getDate()+7),`${Ft.getFullYear()}-${String(Ft.getMonth()+1).padStart(2,"0")}-${String(Ft.getDate()).padStart(2,"0")}`})(),Dr=(cr,Ft)=>{const wr=cr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),zt=Ft.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${wr} - ${zt}`},ta=cr=>{if(cr===yr)return"This Week";if(cr===pr)return"Next Week";const[Ft,wr,zt]=cr.split("-").map(Number),Ua=new Date(Ft,wr-1,zt),{start:Ia,end:Da}=Ge(Ua);return`Week of ${Dr(Ia,Da)}`},jn=cr=>{const[Ft,wr,zt]=cr.split("-").map(Number);return Ge(new Date(Ft,wr-1,zt))};sr.forEach(cr=>{_t[cr].sort((Ft,wr)=>(Ft.dueDate||"").localeCompare(wr.dueDate||""))});const Jt=cr=>cr.length===0?null:N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:cr.map(Ft=>{const wr=we.includes(Ft.id);return n.jsxs("div",{onClick:()=>Re(Ft),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${wr?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:zt=>zt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:wr,onChange:()=>Pe(zt=>wr?zt.filter(Ua=>Ua!==Ft.id):[...zt,Ft.id])})}),n.jsx("button",{onClick:zt=>Mr(Ft.id,Ft.status,zt),disabled:V===Ft.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===Ft.id?n.jsx(yt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Ft.status==="Done"?n.jsx(gn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Eu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Ft.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ft.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Ft.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ft.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(zt=>zt.id===Ft.projectId)?.title||"General"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(oa,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Ft.dueDate?ge(Ft.dueDate):"Ongoing"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Ft.priority==="High"?"bg-red-50 text-red-600":Ft.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ft.priority}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[n.jsx(ol,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:f.find(zt=>zt.id===Ft.assigneeId)?.name||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:zt=>{zt.stopPropagation(),Re(Ft)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(Tu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:zt=>{zt.stopPropagation(),oe(Ft)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(ku,{className:"w-4 h-4"})}),n.jsx("button",{onClick:zt=>{zt.stopPropagation(),se(Ft)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})]},Ft.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:cr.map(Ft=>{const wr=we.includes(Ft.id);return n.jsxs("div",{onClick:()=>Re(Ft),className:`bg-white p-6 rounded-3xl border ${wr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsx("div",{className:"absolute top-4 left-4",onClick:zt=>zt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:`${wr?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:wr,onChange:()=>Pe(zt=>wr?zt.filter(Ua=>Ua!==Ft.id):[...zt,Ft.id])})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:`font-bold text-sm mb-3 ${Ft.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ft.title}),n.jsxs("div",{className:"space-y-2 mb-4",children:[Ft.category&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ft.category})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(zt=>zt.id===Ft.projectId)?.title||"General"})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Ft.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(oa,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ge(Ft.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Ft.priority==="High"?"bg-red-50 text-red-600":Ft.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ft.priority})]})]},Ft.id)})});return n.jsxs(n.Fragment,{children:[sr.map(cr=>{const Ft=_t[cr];if(!Ft||Ft.length===0)return null;const wr=jn(cr),zt=ta(cr);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:zt}),n.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Dr(wr.start,wr.end)}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Ft.length,")"]})]}),Jt(Ft)]},cr)}),We.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",We.length," tasks)"]})]}),Jt(We)]})]})})()}):N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:ua.map(We=>{const Et=we.includes(We.id);return n.jsxs("div",{onClick:()=>Re(We),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${We.archived?"bg-slate-50/50":""} ${Et?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:_t=>_t.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Et,onChange:()=>Pe(_t=>Et?_t.filter(sr=>sr!==We.id):[..._t,We.id])})}),n.jsx("button",{onClick:_t=>Mr(We.id,We.status,_t),disabled:V===We.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:V===We.id?n.jsx(yt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):We.status==="Done"?n.jsx(gn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Eu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${We.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:We.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[We.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:We.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(_t=>_t.id===We.projectId)?.title||"General"}),n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(oa,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:We.dueDate?ge(We.dueDate):"Ongoing"})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${We.priority==="High"?"bg-red-50 text-red-600":We.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:We.priority}),We.assigneeId&&(()=>{const _t=f.find(sr=>sr.id===We.assigneeId);return _t?n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:_t.name,children:[n.jsx(ol,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:_t.name})]}):null})()]}),n.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[n.jsx("button",{onClick:_t=>{_t.stopPropagation(),Re(We)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:n.jsx(Tu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),oe(We)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:We.archived?n.jsx(s1,{className:"w-4 h-4"}):n.jsx(ku,{className:"w-4 h-4"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),se(We)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},We.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ua.map(We=>{const Et=we.includes(We.id);return n.jsxs("div",{onClick:()=>Re(We),className:`bg-white p-6 rounded-3xl border ${Et?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:n.jsx(ji,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[n.jsx("button",{onClick:_t=>{_t.stopPropagation(),Re(We)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:n.jsx(Tu,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),oe(We)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:n.jsx(ku,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:_t=>{_t.stopPropagation(),se(We)},className:"p-1.5 text-slate-400 hover:text-red-500",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]}),n.jsx("div",{onClick:_t=>_t.stopPropagation(),className:`${Et?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Et,onChange:()=>Pe(_t=>Et?_t.filter(sr=>sr!==We.id):[..._t,We.id])})})]})]}),n.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${We.status==="Done"?"line-through opacity-40":""}`,children:We.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:We.description}),We.category&&n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[n.jsx(Os,{className:"w-3.5 h-3.5 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:We.category})]})}),We.assigneeId&&(()=>{const _t=f.find(sr=>sr.id===We.assigneeId);return _t?n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[n.jsx(ol,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:_t.name})]})}):null})(),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[We.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(oa,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:ge(We.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${We.priority==="High"?"bg-red-50 text-red-600":We.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:We.priority})]})]},We.id)})}),P&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(h6,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),n.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:U==="upload"?n.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(y0,{className:"w-4 h-4"})," Registry Data Requirements"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-5",children:[n.jsxs("button",{onClick:()=>ne.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:n.jsx(aU,{className:"w-8 h-8"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),n.jsxs("button",{onClick:mt,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[n.jsx(h0,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),n.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),n.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",O.length," columns and ",z.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),n.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:n.jsx(ea,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:n.jsx(Os,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:n.jsx(oa,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:n.jsx(y0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:n.jsx(Os,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:n.jsx(ol,{className:"w-4 h-4"})}].map(We=>n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:We.icon}),n.jsx("div",{children:n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[We.label," ",We.required&&n.jsx("span",{className:"text-red-500",children:"*"})]})})]}),n.jsx(Eo,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),n.jsxs("select",{value:Q[We.key]||"",onChange:Et=>J({...Q,[We.key]:Et.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"-- Select Source Column --"}),O.map(Et=>n.jsx("option",{value:Et,children:Et},Et))]})]},We.key))}),n.jsxs("div",{className:"flex gap-4 pt-6",children:[n.jsx("button",{onClick:()=>{C("upload"),H([]),R([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ne.current&&(ne.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),n.jsx("button",{onClick:Ot,disabled:re||!Q.title||!Q.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:re?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),n.jsx("input",{ref:ne,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:vr})]})}),K&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?n.jsx(s1,{className:"w-6 h-6"}):n.jsx(ku,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>oe(null),disabled:T===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Qe(K.id),disabled:T===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T===K.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),me&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:me.title}),me.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:me.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>se(null),disabled:ee===me.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>tt(me.id),disabled:ee===me.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===me.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),we.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:we.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:We=>{We.stopPropagation(),ve(!0),Be("")},disabled:Fe,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[n.jsx(Vd,{className:"w-3.5 h-3.5"}),"Assign to project"]}),n.jsxs("button",{onClick:We=>{We.stopPropagation(),Ye(!0)},disabled:fe,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[fe?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>Pe([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),xe&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:n.jsx(Vd,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",we.length," selected task",we.length>1?"s":"","."]})]})]}),n.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),n.jsxs("select",{value:_e,onChange:We=>Be(We.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"Select project..."}),n.jsx("option",{value:"__none__",children:"None (General)"}),d.filter(We=>!We.archived).map(We=>n.jsx("option",{value:We.id,children:We.title},We.id))]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{ve(!1),Be("")},disabled:Fe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:st,disabled:Fe||!_e,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Fe?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${we.length} task${we.length>1?"s":""}`})]})]})}),Ee&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",we.length," Task",we.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(We=>we.includes(We.id)).slice(0,5).map(We=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(ji,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:We.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:d.find(Et=>Et.id===We.projectId)?.title||"General"})]})]},We.id)),we.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",we.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ye(!1),disabled:fe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Le,disabled:fe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:fe?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${we.length} Task${we.length>1?"s":""}`})]})]})}),de&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:ul}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:ul,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(ji,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[he?n.jsx("input",{type:"text",value:te.title,onChange:We=>Se(Et=>({...Et,title:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:de.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${de.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":de.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":de.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:de.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",de.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:he?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{Ue(!1),Se({title:de.title,description:de.description||"",dueDate:de.dueDate||"",priority:de.priority||"Medium",status:de.status||"Todo",assigneeId:de.assigneeId,projectId:de.projectId||""})},disabled:Oe,className:"px-4 py-2 border border-slate-200 text-slate-500 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"CANCEL"}),n.jsx("button",{onClick:Vr,disabled:Oe||!te.title.trim()||!te.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Oe?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"SAVE CHANGES"]})})]}):n.jsxs("button",{onClick:()=>Ue(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"ASSIGNEE"}),he?n.jsxs("select",{value:te.assigneeId,onChange:We=>Se(Et=>({...Et,assigneeId:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),f.map(We=>n.jsx("option",{value:We.id,children:We.name},We.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:f.find(We=>We.id===de.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.find(We=>We.id===de.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"LINKED PROJECT"}),he?n.jsxs("select",{value:te.projectId,onChange:We=>Se(Et=>({...Et,projectId:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),d.filter(We=>!We.archived).map(We=>n.jsx("option",{value:We.id,children:We.title},We.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:de.projectId?d.find(We=>We.id===de.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] flex items-center gap-2 px-1",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," DESCRIPTION"]}),he?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(Q3,{value:te.description||"",onChange:We=>Se(Et=>({...Et,description:We})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[de.description?n.jsx(I9,{content:de.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert max-w-none prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," TASK CATEGORY"]}),he?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:Tr?"__new__":te.category||"",onChange:We=>{const Et=We.target.value;Et==="__new__"?(zr(!0),Se(_t=>({..._t,category:""}))):(zr(!1),Se(_t=>({..._t,category:Et})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),an.map(We=>n.jsx("option",{value:We,children:We},We)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),Tr&&n.jsx("input",{type:"text",value:te.category,onChange:We=>Se(Et=>({...Et,category:We.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:de.category?n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:de.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"DUE DATE"}),he?n.jsx("input",{type:"date",value:te.dueDate,onChange:We=>Se(Et=>({...Et,dueDate:We.target.value})),placeholder:"dd/mm/yyyy",className:"w-full px-4 py-2 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 mt-2 [color-scheme:light]"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:de.dueDate?ge(de.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"PRIORITY"}),he?n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200 mt-2",children:["Low","Medium","High"].map(We=>n.jsx("button",{onClick:()=>Se(Et=>({...Et,priority:We})),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${te.priority===We?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:We.toUpperCase()},We))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${de.priority==="High"?"bg-red-50 text-red-600":de.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:de.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),he?n.jsxs("select",{value:te.status,onChange:We=>Se(Et=>({...Et,status:We.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[de.status==="Done"?n.jsx(gn,{className:"w-5 h-5 text-emerald-500"}):de.status==="In Progress"?n.jsx(Is,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Eu,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:de.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",de.notes&&de.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:de.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:ke,rows:5,value:qe,onChange:$n,onBlur:()=>{setTimeout(()=>Xt(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),Ir&&Br.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(yh,{className:"w-3 h-3"}),"Mention User"]}),Br.map(We=>n.jsxs("button",{onClick:()=>hs(We),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:We.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:We.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:We.email})]})]},We.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:Vt?n.jsx(Nl,{className:"w-4 h-4"}):n.jsx(Qd,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Vt?dt?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:je,type:"file",accept:"image/*",onChange:Fs,className:"hidden"})]}),n.jsx("button",{onClick:Hn,disabled:Ht||!qe.trim()&&!dt,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Ht?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send"]})})]}),Vt&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Vt,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{Dt(""),Tt(null),je.current&&(je.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:de.notes&&de.notes.length>0?[...de.notes].reverse().map(We=>{const Et=t?.role==="Admin"||We.userId===t?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:We.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:We.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(We.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Et&&n.jsx("button",{onClick:()=>Ar(We.id),disabled:jt===We.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:jt===We.id?n.jsx(yt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),We.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:As(We.text)}),We.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:We.imageUrl,alt:We.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const _t=window.open();_t&&_t.document.write(`<img src="${We.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},We.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>qn(!ir),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(ya,{className:`w-4 h-4 text-slate-400 transition-transform ${ir?"rotate-90":""}`})]}),ir&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:de.createdAt?new Date(de.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),de.updatedAt&&de.updatedAt!==de.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(de.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),de.notes&&de.notes.map((We,Et)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[We.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(We.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},We.id)),(!de.notes||de.notes.length===0)&&(!de.updatedAt||de.updatedAt===de.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>{se(de),ul()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:ul,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," CLOSE"]})]})]})]}),nr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(Zn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Ar(null),disabled:jt===nr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Nn,disabled:jt===nr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:jt===nr?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Ta(e){"@babel/helpers - typeof";return Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ta(e)}var il=Uint8Array,bc=Uint16Array,J3=Int32Array,jb=new il([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kb=new il([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lk=new il([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D9=function(e,t){for(var r=new bc(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new J3(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},L9=D9(jb,2),F9=L9.b,Fk=L9.r;F9[28]=258,Fk[258]=28;var M9=D9(kb,0),Zve=M9.b,G8=M9.r,Mk=new bc(32768);for(var ds=0;ds<32768;++ds){var e0=(ds&43690)>>1|(ds&21845)<<1;e0=(e0&52428)>>2|(e0&13107)<<2,e0=(e0&61680)>>4|(e0&3855)<<4,Mk[ds]=((e0&65280)>>8|(e0&255)<<8)>>1}var Du=(function(e,t,r){for(var a=e.length,s=0,i=new bc(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new bc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new bc(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,m=f|(1<<u)-1;f<=m;++f)l[Mk[f]>>c]=d}else for(l=new bc(a),s=0;s<a;++s)e[s]&&(l[s]=Mk[o[e[s]-1]++]>>15-e[s]);return l}),S0=new il(288);for(var ds=0;ds<144;++ds)S0[ds]=8;for(var ds=144;ds<256;++ds)S0[ds]=9;for(var ds=256;ds<280;++ds)S0[ds]=7;for(var ds=280;ds<288;++ds)S0[ds]=8;var pg=new il(32);for(var ds=0;ds<32;++ds)pg[ds]=5;var e1e=Du(S0,9,0),t1e=Du(S0,9,1),r1e=Du(pg,5,0),n1e=Du(pg,5,1),Oj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Fd=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},Pj=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Z3=function(e){return(e+7)/8|0},R9=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new il(e.subarray(t,r))},a1e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bd=function(e,t,r){var a=new Error(t||a1e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Bd),!r)throw a;return a},s1e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new il(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new il(s*3));var d=function(Re){var he=r.length;if(Re>he){var Ue=new il(Math.max(he*2,Re));Ue.set(r),r=Ue}},u=t.f||0,f=t.p||0,m=t.b||0,p=t.l,y=t.d,v=t.m,g=t.n,b=s*8;do{if(!p){u=Fd(e,f,1);var w=Fd(e,f+1,3);if(f+=3,w)if(w==1)p=t1e,y=n1e,v=9,g=5;else if(w==2){var E=Fd(e,f,31)+257,_=Fd(e,f+10,15)+4,P=E+Fd(e,f+5,31)+1;f+=14;for(var I=new il(P),U=new il(19),C=0;C<_;++C)U[Lk[C]]=Fd(e,f+C*3,7);f+=_*3;for(var O=Oj(U),R=(1<<O)-1,z=Du(U,O,1),C=0;C<P;){var H=z[Fd(e,f,R)];f+=H&15;var j=H>>4;if(j<16)I[C++]=j;else{var Q=0,J=0;for(j==16?(J=3+Fd(e,f,3),f+=2,Q=I[C-1]):j==17?(J=3+Fd(e,f,7),f+=3):j==18&&(J=11+Fd(e,f,127),f+=7);J--;)I[C++]=Q}}var re=I.subarray(0,E),X=I.subarray(E);v=Oj(re),g=Oj(X),p=Du(re,v,1),y=Du(X,g,1)}else Bd(1);else{var j=Z3(f)+4,N=e[j-4]|e[j-3]<<8,S=j+N;if(S>s){c&&Bd(0);break}l&&d(m+N),r.set(e.subarray(j,S),m),t.b=m+=N,t.p=f=S*8,t.f=u;continue}if(f>b){c&&Bd(0);break}}l&&d(m+131072);for(var ee=(1<<v)-1,W=(1<<g)-1,T=f;;T=f){var Q=p[Pj(e,f)&ee],q=Q>>4;if(f+=Q&15,f>b){c&&Bd(0);break}if(Q||Bd(2),q<256)r[m++]=q;else if(q==256){T=f,p=null;break}else{var V=q-254;if(q>264){var C=q-257,B=jb[C];V=Fd(e,f,(1<<B)-1)+F9[C],f+=B}var K=y[Pj(e,f)&W],oe=K>>4;K||Bd(3),f+=K&15;var X=Zve[oe];if(oe>3){var B=kb[oe];X+=Pj(e,f)&(1<<B)-1,f+=B}if(f>b){c&&Bd(0);break}l&&d(m+131072);var me=m+V;if(m<X){var se=i-X,de=Math.min(X,me);for(se+m<0&&Bd(3);m<de;++m)r[m]=a[se+m]}for(;m<me;++m)r[m]=r[m-X]}}t.l=p,t.p=T,t.b=m,t.f=u,p&&(u=1,t.m=v,t.d=y,t.n=g)}while(!u);return m!=r.length&&o?R9(r,0,m):r.subarray(0,m)},lf=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},zm=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},Ij=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:U9,l:0};if(s==1){var o=new il(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,E){return S.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,a=1;a<s;++a)i[a].s>m&&(m=i[a].s);var p=new bc(m+1),y=Rk(r[u-1],p,0);if(y>t){var a=0,v=0,g=y-t,b=1<<g;for(i.sort(function(E,_){return p[_.s]-p[E.s]||E.f-_.f});a<s;++a){var w=i[a].s;if(p[w]>t)v+=b-(1<<y-p[w]),p[w]=t;else break}for(v>>=g;v>0;){var j=i[a].s;p[j]<t?v-=1<<t-p[j]++-1:++a}for(;a>=0&&v;--a){var N=i[a].s;p[N]==t&&(--p[N],++v)}y=t}return{t:new il(p),l:y}},Rk=function(e,t,r){return e.s==-1?Math.max(Rk(e.l,t,r+1),Rk(e.r,t,r+1)):t[e.s]=r},K8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new bc(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Hm=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},B9=function(e,t,r){var a=r.length,s=Z3(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},X8=function(e,t,r,a,s,i,o,l,c,d,u){lf(t,u++,r),++s[256];for(var f=Ij(s,15),m=f.t,p=f.l,y=Ij(i,15),v=y.t,g=y.l,b=K8(m),w=b.c,j=b.n,N=K8(v),S=N.c,E=N.n,_=new bc(19),P=0;P<w.length;++P)++_[w[P]&31];for(var P=0;P<S.length;++P)++_[S[P]&31];for(var I=Ij(_,7),U=I.t,C=I.l,O=19;O>4&&!U[Lk[O-1]];--O);var R=d+5<<3,z=Hm(s,S0)+Hm(i,pg)+o,H=Hm(s,m)+Hm(i,v)+o+14+3*O+Hm(_,U)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&R<=z&&R<=H)return B9(t,u,e.subarray(c,c+d));var Q,J,re,X;if(lf(t,u,1+(H<z)),u+=2,H<z){Q=Du(m,p,0),J=m,re=Du(v,g,0),X=v;var ee=Du(U,C,0);lf(t,u,j-257),lf(t,u+5,E-1),lf(t,u+10,O-4),u+=14;for(var P=0;P<O;++P)lf(t,u+3*P,U[Lk[P]]);u+=3*O;for(var W=[w,S],T=0;T<2;++T)for(var q=W[T],P=0;P<q.length;++P){var V=q[P]&31;lf(t,u,ee[V]),u+=U[V],V>15&&(lf(t,u,q[P]>>5&127),u+=q[P]>>12)}}else Q=e1e,J=S0,re=r1e,X=pg;for(var P=0;P<l;++P){var B=a[P];if(B>255){var V=B>>18&31;zm(t,u,Q[V+257]),u+=J[V+257],V>7&&(lf(t,u,B>>23&31),u+=jb[V]);var K=B&31;zm(t,u,re[K]),u+=X[K],K>3&&(zm(t,u,B>>5&8191),u+=kb[K])}else zm(t,u,Q[B]),u+=J[B]}return zm(t,u,Q[256]),u+J[256]},i1e=new J3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),U9=new il(0),o1e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new il(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var f=i1e[t-1],m=f>>13,p=f&8191,y=(1<<r)-1,v=i.p||new bc(32768),g=i.h||new bc(y+1),b=Math.ceil(r/3),w=2*b,j=function(Oe){return(e[Oe]^e[Oe+1]<<b^e[Oe+2]<<w)&y},N=new J3(25e3),S=new bc(288),E=new bc(32),_=0,P=0,I=i.i||0,U=0,C=i.w||0,O=0;I+2<o;++I){var R=j(I),z=I&32767,H=g[R];if(v[z]=H,g[R]=z,C<=I){var Q=o-I;if((_>7e3||U>24576)&&(Q>423||!d)){u=X8(e,c,0,N,S,E,P,U,O,I-O,u),U=_=P=0,O=I;for(var J=0;J<286;++J)S[J]=0;for(var J=0;J<30;++J)E[J]=0}var re=2,X=0,ee=p,W=z-H&32767;if(Q>2&&R==j(I-W))for(var T=Math.min(m,Q)-1,q=Math.min(32767,I),V=Math.min(258,Q);W<=q&&--ee&&z!=H;){if(e[I+re]==e[I+re-W]){for(var B=0;B<V&&e[I+B]==e[I+B-W];++B);if(B>re){if(re=B,X=W,B>T)break;for(var K=Math.min(W,B-2),oe=0,J=0;J<K;++J){var me=I-W+J&32767,se=v[me],de=me-se&32767;de>oe&&(oe=de,H=me)}}}z=H,H=v[z],W+=z-H&32767}if(X){N[U++]=268435456|Fk[re]<<18|G8[X];var Re=Fk[re]&31,he=G8[X]&31;P+=jb[Re]+kb[he],++S[257+Re],++E[he],C=I+re,++_}else N[U++]=e[I],++S[e[I]]}}for(I=Math.max(I,C);I<o;++I)N[U++]=e[I],++S[e[I]];u=X8(e,c,d,N,S,E,P,U,O,I-O,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=v,i.i=I,i.w=C)}else{for(var I=i.w||0;I<o+d;I+=65535){var Ue=I+65535;Ue>=o&&(c[u/8|0]=d,Ue=o),u=B9(c,u+1,e.subarray(I,Ue))}i.i=o}return R9(l,0,a+Z3(u)+s)},q9=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},l1e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new il(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return o1e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},$9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},c1e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=q9();s.p(t.dictionary),$9(e,2,s.d())}},d1e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Bd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Bd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Bk(e,t){t||(t={});var r=q9();r.p(e);var a=l1e(e,t,t.dictionary?6:2,4);return c1e(a,t),$9(a,a.length-4,r.d()),a}function u1e(e,t){return s1e(e.subarray(d1e(e),-4),{i:2},t,t)}var f1e=typeof TextDecoder<"u"&&new TextDecoder,h1e=0;try{f1e.decode(U9,{stream:!0}),h1e=1}catch{}var dn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Dj(){dn.console&&typeof dn.console.log=="function"&&dn.console.log.apply(dn.console,arguments)}var Xa={log:Dj,warn:function(e){dn.console&&(typeof dn.console.warn=="function"?dn.console.warn.apply(dn.console,arguments):Dj.call(null,arguments))},error:function(e){dn.console&&(typeof dn.console.error=="function"?dn.console.error.apply(dn.console,arguments):Dj(e))}};function Lj(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){eh(a.response,t,r)},a.onerror=function(){Xa.error("could not download file")},a.send()}function Y8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var px,Uk,eh=dn.saveAs||((typeof window>"u"?"undefined":Ta(window))!=="object"||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=dn.URL||dn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?Y8(s.href)?Lj(e,t,r):Bv(s,s.target="_blank"):Bv(s)):(s.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){Bv(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Y8(e))Lj(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){Bv(a)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Ta(i)!=="object"&&(Xa.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return Lj(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(dn.HTMLElement)||dn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Ta(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=dn.URL||dn.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function z9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}function Fj(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Xo(r,a,s,i,t[0],7,-680876936),i=Xo(i,r,a,s,t[1],12,-389564586),s=Xo(s,i,r,a,t[2],17,606105819),a=Xo(a,s,i,r,t[3],22,-1044525330),r=Xo(r,a,s,i,t[4],7,-176418897),i=Xo(i,r,a,s,t[5],12,1200080426),s=Xo(s,i,r,a,t[6],17,-1473231341),a=Xo(a,s,i,r,t[7],22,-45705983),r=Xo(r,a,s,i,t[8],7,1770035416),i=Xo(i,r,a,s,t[9],12,-1958414417),s=Xo(s,i,r,a,t[10],17,-42063),a=Xo(a,s,i,r,t[11],22,-1990404162),r=Xo(r,a,s,i,t[12],7,1804603682),i=Xo(i,r,a,s,t[13],12,-40341101),s=Xo(s,i,r,a,t[14],17,-1502002290),r=Yo(r,a=Xo(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Yo(i,r,a,s,t[6],9,-1069501632),s=Yo(s,i,r,a,t[11],14,643717713),a=Yo(a,s,i,r,t[0],20,-373897302),r=Yo(r,a,s,i,t[5],5,-701558691),i=Yo(i,r,a,s,t[10],9,38016083),s=Yo(s,i,r,a,t[15],14,-660478335),a=Yo(a,s,i,r,t[4],20,-405537848),r=Yo(r,a,s,i,t[9],5,568446438),i=Yo(i,r,a,s,t[14],9,-1019803690),s=Yo(s,i,r,a,t[3],14,-187363961),a=Yo(a,s,i,r,t[8],20,1163531501),r=Yo(r,a,s,i,t[13],5,-1444681467),i=Yo(i,r,a,s,t[2],9,-51403784),s=Yo(s,i,r,a,t[7],14,1735328473),r=Qo(r,a=Yo(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Qo(i,r,a,s,t[8],11,-2022574463),s=Qo(s,i,r,a,t[11],16,1839030562),a=Qo(a,s,i,r,t[14],23,-35309556),r=Qo(r,a,s,i,t[1],4,-1530992060),i=Qo(i,r,a,s,t[4],11,1272893353),s=Qo(s,i,r,a,t[7],16,-155497632),a=Qo(a,s,i,r,t[10],23,-1094730640),r=Qo(r,a,s,i,t[13],4,681279174),i=Qo(i,r,a,s,t[0],11,-358537222),s=Qo(s,i,r,a,t[3],16,-722521979),a=Qo(a,s,i,r,t[6],23,76029189),r=Qo(r,a,s,i,t[9],4,-640364487),i=Qo(i,r,a,s,t[12],11,-421815835),s=Qo(s,i,r,a,t[15],16,530742520),r=Jo(r,a=Qo(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Jo(i,r,a,s,t[7],10,1126891415),s=Jo(s,i,r,a,t[14],15,-1416354905),a=Jo(a,s,i,r,t[5],21,-57434055),r=Jo(r,a,s,i,t[12],6,1700485571),i=Jo(i,r,a,s,t[3],10,-1894986606),s=Jo(s,i,r,a,t[10],15,-1051523),a=Jo(a,s,i,r,t[1],21,-2054922799),r=Jo(r,a,s,i,t[8],6,1873313359),i=Jo(i,r,a,s,t[15],10,-30611744),s=Jo(s,i,r,a,t[6],15,-1560198380),a=Jo(a,s,i,r,t[13],21,1309151649),r=Jo(r,a,s,i,t[4],6,-145523070),i=Jo(i,r,a,s,t[11],10,-1120210379),s=Jo(s,i,r,a,t[2],15,718787259),a=Jo(a,s,i,r,t[9],21,-343485551),e[0]=f0(r,e[0]),e[1]=f0(a,e[1]),e[2]=f0(s,e[2]),e[3]=f0(i,e[3])}function Sb(e,t,r,a,s,i){return t=f0(f0(t,e),f0(a,i)),f0(t<<s|t>>>32-s,r)}function Xo(e,t,r,a,s,i,o){return Sb(t&r|~t&a,e,t,s,i,o)}function Yo(e,t,r,a,s,i,o){return Sb(t&a|r&~a,e,t,s,i,o)}function Qo(e,t,r,a,s,i,o){return Sb(t^r^a,e,t,s,i,o)}function Jo(e,t,r,a,s,i,o){return Sb(r^(t|~a),e,t,s,i,o)}function H9(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Fj(a,p1e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Fj(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,Fj(a,s),a}function p1e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}px=dn.atob.bind(dn),Uk=dn.btoa.bind(dn);var Q8="0123456789abcdef".split("");function m1e(e){for(var t="",r=0;r<4;r++)t+=Q8[e>>8*r+4&15]+Q8[e>>8*r&15];return t}function x1e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function qk(e){return H9(e).map(x1e).join("")}var g1e=(function(e){for(var t=0;t<e.length;t++)e[t]=m1e(e[t]);return e.join("")})(H9("hello"))!="5d41402abc4b2a76b9719d911017c592";function f0(e,t){if(g1e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function $k(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var f=t.length,m=0,p=0,y="";for(c=0;c<f;c++)p=(p+(u=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=u,o=l[(l[m]+l[p])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}var J8={print:4,modify:8,copy:16,"annot-forms":32};function dp(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(J8.perm!==void 0)throw new Error("Invalid permission: "+l);s+=J8[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=qk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=$k(this.encryptionKey,this.padding)}function up(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function Z8(e){if(Ta(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){dn.console&&Xa.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _y(e){if(!(this instanceof _y))return new _y(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function W9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function rh(e,t,r,a,s){if(!(this instanceof rh))return new rh(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,W9.call(this,a,s)}function gp(e,t,r,a,s){if(!(this instanceof gp))return new gp(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,W9.call(this,a,s)}function cn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Ta(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Z8;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(G){y=G};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var b=p.__private__.getPageFormat=function(G){return g[G]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},j=w.COMPAT;function N(){this.saveGraphicsState(),te(new ir(Ze,0,0,-Ze,0,ec()*Ze).toString()+" cm"),this.setFontSize(this.getFontSize()/Ze),d="n",j=w.ADVANCED}function S(){this.restoreGraphicsState(),d="S",j=w.COMPAT}var E=p.__private__.combineFontStyleAndFontWeight=function(G,Ne){if(G=="bold"&&Ne=="normal"||G=="bold"&&Ne==400||G=="normal"&&Ne=="italic"||G=="bold"&&Ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ne&&(G=Ne==400||Ne==="normal"?G==="italic"?"italic":"normal":Ne!=700&&Ne!=="bold"||G!=="normal"?(Ne==700?"bold":Ne)+""+G:"bold"),G};p.advancedAPI=function(G){var Ne=j===w.COMPAT;return Ne&&N.call(this),typeof G!="function"||(G(this),Ne&&S.call(this)),this},p.compatAPI=function(G){var Ne=j===w.ADVANCED;return Ne&&S.call(this),typeof G!="function"||(G(this),Ne&&N.call(this)),this},p.isAdvancedAPI=function(){return j===w.ADVANCED};var _,P=function(G){if(j!==w.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(G,Ne){var Xe=t||Ne;if(isNaN(G)||isNaN(Xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Xe).replace(/0+$/,"")};_=p.hpf=p.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return I(G,16)};var U=p.f2=p.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return I(G,2)},C=p.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return I(G,3)},O=p.scale=p.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return j===w.COMPAT?G*Ze:j===w.ADVANCED?G:void 0},R=function(G){return j===w.COMPAT?ec()-G:j===w.ADVANCED?G:void 0},z=function(G){return O(R(G))};p.__private__.setPrecision=p.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var H,Q="00000000000000000000000000000000",J=p.__private__.getFileId=function(){return Q},re=p.__private__.setFileId=function(G){return Q=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():Q.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(mn=new dp(u.userPermissions,u.userPassword,u.ownerPassword,Q)),Q};p.setFileId=function(G){return re(G),this},p.getFileId=function(){return J()};var X=p.__private__.convertDateToPDFDate=function(G){var Ne=G.getTimezoneOffset(),Xe=Ne<0?"+":"-",nt=Math.floor(Math.abs(Ne/60)),xt=Math.abs(Ne%60),Pt=[Xe,V(nt),"'",V(xt),"'"].join("");return["D:",G.getFullYear(),V(G.getMonth()+1),V(G.getDate()),V(G.getHours()),V(G.getMinutes()),V(G.getSeconds()),Pt].join("")},ee=p.__private__.convertPDFDateToDate=function(G){var Ne=parseInt(G.substr(2,4),10),Xe=parseInt(G.substr(6,2),10)-1,nt=parseInt(G.substr(8,2),10),xt=parseInt(G.substr(10,2),10),Pt=parseInt(G.substr(12,2),10),Gt=parseInt(G.substr(14,2),10);return new Date(Ne,Xe,nt,xt,Pt,Gt,0)},W=p.__private__.setCreationDate=function(G){var Ne;if(G===void 0&&(G=new Date),G instanceof Date)Ne=X(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ne=G}return H=Ne},T=p.__private__.getCreationDate=function(G){var Ne=H;return G==="jsDate"&&(Ne=ee(H)),Ne};p.setCreationDate=function(G){return W(G),this},p.getCreationDate=function(G){return T(G)};var q,V=p.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},B=p.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},K=0,oe=[],me=[],se=0,de=[],Re=[],he=!1,Ue=me,Oe=function(){K=0,se=0,me=[],oe=[],de=[],ke=zr(),ie=zr()};p.__private__.setCustomOutputDestination=function(G){he=!0,Ue=G};var le=function(G){he||(Ue=G)};p.__private__.resetCustomOutputDestination=function(){he=!1,Ue=me};var te=p.__private__.out=function(G){return G=G.toString(),se+=G.length+1,Ue.push(G),Ue},Se=p.__private__.write=function(G){return te(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},we=p.__private__.getArrayBuffer=function(G){for(var Ne=G.length,Xe=new ArrayBuffer(Ne),nt=new Uint8Array(Xe);Ne--;)nt[Ne]=G.charCodeAt(Ne);return Xe},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Pe};var fe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(G){return fe=j===w.ADVANCED?G/Ze:G,this};var ue,Ee=p.__private__.getFontSize=p.getFontSize=function(){return j===w.COMPAT?fe:fe*Ze},Ye=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(G){return Ye=G,this},p.__private__.getR2L=p.getR2L=function(){return Ye};var xe,ve=p.__private__.setZoomMode=function(G){var Ne=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))ue=G;else if(isNaN(G)){if(Ne.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');ue=G}else ue=parseInt(G,10)};p.__private__.getZoomMode=function(){return ue};var Fe,$e=p.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');xe=G};p.__private__.getPageMode=function(){return xe};var _e=p.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');Fe=G};p.__private__.getLayoutMode=function(){return Fe},p.__private__.setDisplayMode=p.setDisplayMode=function(G,Ne,Xe){return ve(G),_e(Ne),$e(Xe),this};var Be={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(G){if(Object.keys(Be).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Be[G]},p.__private__.getDocumentProperties=function(){return Be},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(G){for(var Ne in Be)Be.hasOwnProperty(Ne)&&G[Ne]&&(Be[Ne]=G[Ne]);return this},p.__private__.setDocumentProperty=function(G,Ne){if(Object.keys(Be).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Be[G]=Ne};var qe,Ze,Vt,Dt,dt,Tt={},Ht={},Ve=[],jt={},gr={},nr={},Ar={},Ir=null,Xt=0,Qt=[],mr=new Z8(p),Fr=e.hotfixes||[],fn={},Br={},Qr=[],ir=function G(Ne,Xe,nt,xt,Pt,Gt){if(!(this instanceof G))return new G(Ne,Xe,nt,xt,Pt,Gt);isNaN(Ne)&&(Ne=1),isNaN(Xe)&&(Xe=0),isNaN(nt)&&(nt=0),isNaN(xt)&&(xt=1),isNaN(Pt)&&(Pt=0),isNaN(Gt)&&(Gt=0),this._matrix=[Ne,Xe,nt,xt,Pt,Gt]};Object.defineProperty(ir.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(ir.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(ir.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(ir.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(ir.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(ir.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(ir.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(ir.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(ir.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(ir.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(ir.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(ir.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(ir.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ir.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ir.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ir.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ir.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(G)},ir.prototype.multiply=function(G){var Ne=G.sx*this.sx+G.shy*this.shx,Xe=G.sx*this.shy+G.shy*this.sy,nt=G.shx*this.sx+G.sy*this.shx,xt=G.shx*this.shy+G.sy*this.sy,Pt=G.tx*this.sx+G.ty*this.shx+this.tx,Gt=G.tx*this.shy+G.ty*this.sy+this.ty;return new ir(Ne,Xe,nt,xt,Pt,Gt)},ir.prototype.decompose=function(){var G=this.sx,Ne=this.shy,Xe=this.shx,nt=this.sy,xt=this.tx,Pt=this.ty,Gt=Math.sqrt(G*G+Ne*Ne),xr=(G/=Gt)*Xe+(Ne/=Gt)*nt;Xe-=G*xr,nt-=Ne*xr;var qr=Math.sqrt(Xe*Xe+nt*nt);return xr/=qr,G*(nt/=qr)<Ne*(Xe/=qr)&&(G=-G,Ne=-Ne,xr=-xr,Gt=-Gt),{scale:new ir(Gt,0,0,qr,0,0),translate:new ir(1,0,0,1,xt,Pt),rotate:new ir(G,Ne,-Ne,G,0,0),skew:new ir(1,0,xr,1,0,0)}},ir.prototype.toString=function(G){return this.join(" ")},ir.prototype.inversed=function(){var G=this.sx,Ne=this.shy,Xe=this.shx,nt=this.sy,xt=this.tx,Pt=this.ty,Gt=1/(G*nt-Ne*Xe),xr=nt*Gt,qr=-Ne*Gt,sn=-Xe*Gt,Zr=G*Gt;return new ir(xr,qr,sn,Zr,-xr*xt-sn*Pt,-qr*xt-Zr*Pt)},ir.prototype.applyToPoint=function(G){var Ne=G.x*this.sx+G.y*this.shx+this.tx,Xe=G.x*this.shy+G.y*this.sy+this.ty;return new Ci(Ne,Xe)},ir.prototype.applyToRectangle=function(G){var Ne=this.applyToPoint(G),Xe=this.applyToPoint(new Ci(G.x+G.w,G.y+G.h));return new Do(Ne.x,Ne.y,Xe.x-Ne.x,Xe.y-Ne.y)},ir.prototype.clone=function(){var G=this.sx,Ne=this.shy,Xe=this.shx,nt=this.sy,xt=this.tx,Pt=this.ty;return new ir(G,Ne,Xe,nt,xt,Pt)},p.Matrix=ir;var qn=p.matrixMult=function(G,Ne){return Ne.multiply(G)},an=new ir(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=an;var wn=function(G,Ne){if(!gr[G]){var Xe=(Ne instanceof rh?"Sh":"P")+(Object.keys(jt).length+1).toString(10);Ne.id=Xe,gr[G]=Xe,jt[Xe]=Ne,mr.publish("addPattern",Ne)}};p.ShadingPattern=rh,p.TilingPattern=gp,p.addShadingPattern=function(G,Ne){return P("addShadingPattern()"),wn(G,Ne),this},p.beginTilingPattern=function(G){P("beginTilingPattern()"),$u(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},p.endTilingPattern=function(G,Ne){P("endTilingPattern()"),Ne.stream=Re[q].join(`
`),wn(G,Ne),mr.publish("endTilingPattern",Ne),Qr.pop().restore()};var Tr=p.__private__.newObject=function(){var G=zr();return ne(G,!0),G},zr=p.__private__.newObjectDeferred=function(){return K++,oe[K]=function(){return se},K},ne=function(G,Ne){return Ne=typeof Ne=="boolean"&&Ne,oe[G]=se,Ne&&te(G+" 0 obj"),G},je=p.__private__.newAdditionalObject=function(){var G={objId:zr(),content:""};return de.push(G),G},ke=zr(),ie=zr(),ge=p.__private__.decodeColorString=function(G){var Ne=G.split(" ");if(Ne.length!==2||Ne[1]!=="g"&&Ne[1]!=="G")Ne.length===5&&(Ne[4]==="k"||Ne[4]==="K")&&(Ne=[(1-Ne[0])*(1-Ne[3]),(1-Ne[1])*(1-Ne[3]),(1-Ne[2])*(1-Ne[3]),"r"]);else{var Xe=parseFloat(Ne[0]);Ne=[Xe,Xe,Xe,"r"]}for(var nt="#",xt=0;xt<3;xt++)nt+=("0"+Math.floor(255*parseFloat(Ne[xt])).toString(16)).slice(-2);return nt},Ae=p.__private__.encodeColorString=function(G){var Ne;typeof G=="string"&&(G={ch1:G});var Xe=G.ch1,nt=G.ch2,xt=G.ch3,Pt=G.ch4,Gt=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xe=="string"&&Xe.charAt(0)!=="#"){var xr=new z9(Xe);if(xr.ok)Xe=xr.toHex();else if(!/^\d*\.?\d*$/.test(Xe))throw new Error('Invalid color "'+Xe+'" passed to jsPDF.encodeColorString.')}if(typeof Xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xe)&&(Xe="#"+Xe[1]+Xe[1]+Xe[2]+Xe[2]+Xe[3]+Xe[3]),typeof Xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xe)){var qr=parseInt(Xe.substr(1),16);Xe=qr>>16&255,nt=qr>>8&255,xt=255&qr}if(nt===void 0||Pt===void 0&&Xe===nt&&nt===xt)typeof Xe=="string"?Ne=Xe+" "+Gt[0]:G.precision===2?Ne=U(Xe/255)+" "+Gt[0]:Ne=C(Xe/255)+" "+Gt[0];else if(Pt===void 0||Ta(Pt)==="object"){if(Pt&&!isNaN(Pt.a)&&Pt.a===0)return Ne=["1.","1.","1.",Gt[1]].join(" ");if(typeof Xe=="string")Ne=[Xe,nt,xt,Gt[1]].join(" ");else switch(G.precision){case 2:Ne=[U(Xe/255),U(nt/255),U(xt/255),Gt[1]].join(" ");break;default:case 3:Ne=[C(Xe/255),C(nt/255),C(xt/255),Gt[1]].join(" ")}}else typeof Xe=="string"?Ne=[Xe,nt,xt,Pt,Gt[2]].join(" "):G.precision===2?Ne=[U(Xe),U(nt),U(xt),U(Pt),Gt[2]].join(" "):Ne=[C(Xe),C(nt),C(xt),C(Pt),Gt[2]].join(" ");return Ne},Ge=p.__private__.getFilters=function(){return o},rt=p.__private__.putStream=function(G){var Ne=(G=G||{}).data||"",Xe=G.filters||Ge(),nt=G.alreadyAppliedFilters||[],xt=G.addLength1||!1,Pt=Ne.length,Gt=G.objectId,xr=function(Qs){return Qs};if(u!==null&&Gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(xr=mn.encryptor(Gt,0));var qr={};Xe===!0&&(Xe=["FlateEncode"]);var sn=G.additionalKeyValues||[],Zr=(qr=cn.API.processDataByFilters!==void 0?cn.API.processDataByFilters(Ne,Xe):{data:Ne,reverseChain:[]}).reverseChain+(Array.isArray(nt)?nt.join(" "):nt.toString());if(qr.data.length!==0&&(sn.push({key:"Length",value:qr.data.length}),xt===!0&&sn.push({key:"Length1",value:Pt})),Zr.length!=0)if(Zr.split("/").length-1==1)sn.push({key:"Filter",value:Zr});else{sn.push({key:"Filter",value:"["+Zr+"]"});for(var Sn=0;Sn<sn.length;Sn+=1)if(sn[Sn].key==="DecodeParms"){for(var qa=[],$a=0;$a<qr.reverseChain.split("/").length-1;$a+=1)qa.push("null");qa.push(sn[Sn].value),sn[Sn].value="["+qa.join(" ")+"]"}}te("<<");for(var gs=0;gs<sn.length;gs++)te("/"+sn[gs].key+" "+sn[gs].value);te(">>"),qr.data.length!==0&&(te("stream"),te(xr(qr.data)),te("endstream"))},Qe=p.__private__.putPage=function(G){var Ne=G.number,Xe=G.data,nt=G.objId,xt=G.contentsObjId;ne(nt,!0),te("<</Type /Page"),te("/Parent "+G.rootDictionaryObjId+" 0 R"),te("/Resources "+G.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(_(G.mediaBox.bottomLeftX))+" "+parseFloat(_(G.mediaBox.bottomLeftY))+" "+_(G.mediaBox.topRightX)+" "+_(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&te("/CropBox ["+_(G.cropBox.bottomLeftX)+" "+_(G.cropBox.bottomLeftY)+" "+_(G.cropBox.topRightX)+" "+_(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&te("/BleedBox ["+_(G.bleedBox.bottomLeftX)+" "+_(G.bleedBox.bottomLeftY)+" "+_(G.bleedBox.topRightX)+" "+_(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&te("/TrimBox ["+_(G.trimBox.bottomLeftX)+" "+_(G.trimBox.bottomLeftY)+" "+_(G.trimBox.topRightX)+" "+_(G.trimBox.topRightY)+"]"),G.artBox!==null&&te("/ArtBox ["+_(G.artBox.bottomLeftX)+" "+_(G.artBox.bottomLeftY)+" "+_(G.artBox.topRightX)+" "+_(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&te("/UserUnit "+G.userUnit),mr.publish("putPage",{objId:nt,pageContext:Qt[Ne],pageNumber:Ne,page:Xe}),te("/Contents "+xt+" 0 R"),te(">>"),te("endobj");var Pt=Xe.join(`
`);return j===w.ADVANCED&&(Pt+=`
Q`),ne(xt,!0),rt({data:Pt,filters:Ge(),objectId:xt}),te("endobj"),nt},tt=p.__private__.putPages=function(){var G,Ne,Xe=[];for(G=1;G<=Xt;G++)Qt[G].objId=zr(),Qt[G].contentsObjId=zr();for(G=1;G<=Xt;G++)Xe.push(Qe({number:G,data:Re[G],objId:Qt[G].objId,contentsObjId:Qt[G].contentsObjId,mediaBox:Qt[G].mediaBox,cropBox:Qt[G].cropBox,bleedBox:Qt[G].bleedBox,trimBox:Qt[G].trimBox,artBox:Qt[G].artBox,userUnit:Qt[G].userUnit,rootDictionaryObjId:ke,resourceDictionaryObjId:ie}));ne(ke,!0),te("<</Type /Pages");var nt="/Kids [";for(Ne=0;Ne<Xt;Ne++)nt+=Xe[Ne]+" 0 R ";te(nt+"]"),te("/Count "+Xt),te(">>"),te("endobj"),mr.publish("postPutPages")},Ke=function(G){mr.publish("putFont",{font:G,out:te,newObject:Tr,putStream:rt}),G.isAlreadyPutted!==!0&&(G.objectNumber=Tr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+up(G.postScriptName)),te("/Subtype /Type1"),typeof G.encoding=="string"&&te("/Encoding /"+G.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Le=function(){for(var G in Tt)Tt.hasOwnProperty(G)&&(f===!1||f===!0&&m.hasOwnProperty(G))&&Ke(Tt[G])},st=function(G){G.objectNumber=Tr();var Ne=[];Ne.push({key:"Type",value:"/XObject"}),Ne.push({key:"Subtype",value:"/Form"}),Ne.push({key:"BBox",value:"["+[_(G.x),_(G.y),_(G.x+G.width),_(G.y+G.height)].join(" ")+"]"}),Ne.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Xe=G.pages[1].join(`
`);rt({data:Xe,additionalKeyValues:Ne,objectId:G.objectNumber}),te("endobj")},mt=function(){for(var G in fn)fn.hasOwnProperty(G)&&st(fn[G])},Ot=function(G,Ne){var Xe,nt=[],xt=1/(Ne-1);for(Xe=0;Xe<1;Xe+=xt)nt.push(Xe);if(nt.push(1),G[0].offset!=0){var Pt={offset:0,color:G[0].color};G.unshift(Pt)}if(G[G.length-1].offset!=1){var Gt={offset:1,color:G[G.length-1].color};G.push(Gt)}for(var xr="",qr=0,sn=0;sn<nt.length;sn++){for(Xe=nt[sn];Xe>G[qr+1].offset;)qr++;var Zr=G[qr].offset,Sn=(Xe-Zr)/(G[qr+1].offset-Zr),qa=G[qr].color,$a=G[qr+1].color;xr+=B(Math.round((1-Sn)*qa[0]+Sn*$a[0]).toString(16))+B(Math.round((1-Sn)*qa[1]+Sn*$a[1]).toString(16))+B(Math.round((1-Sn)*qa[2]+Sn*$a[2]).toString(16))}return xr.trim()},Lt=function(G,Ne){Ne||(Ne=21);var Xe=Tr(),nt=Ot(G.colors,Ne),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+Ne+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:nt,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xe}),te("endobj"),G.objectNumber=Tr(),te("<< /ShadingType "+G.type),te("/ColorSpace /DeviceRGB");var Pt="/Coords ["+_(parseFloat(G.coords[0]))+" "+_(parseFloat(G.coords[1]))+" ";G.type===2?Pt+=_(parseFloat(G.coords[2]))+" "+_(parseFloat(G.coords[3])):Pt+=_(parseFloat(G.coords[2]))+" "+_(parseFloat(G.coords[3]))+" "+_(parseFloat(G.coords[4]))+" "+_(parseFloat(G.coords[5])),te(Pt+="]"),G.matrix&&te("/Matrix ["+G.matrix.toString()+"]"),te("/Function "+Xe+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},vr=function(G,Ne){var Xe=zr(),nt=Tr();Ne.push({resourcesOid:Xe,objectOid:nt}),G.objectNumber=nt;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+G.boundingBox.map(_).join(" ")+"]"}),xt.push({key:"XStep",value:_(G.xStep)}),xt.push({key:"YStep",value:_(G.yStep)}),xt.push({key:"Resources",value:Xe+" 0 R"}),G.matrix&&xt.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),rt({data:G.stream,additionalKeyValues:xt,objectId:G.objectNumber}),te("endobj")},Mr=function(G){var Ne;for(Ne in jt)jt.hasOwnProperty(Ne)&&(jt[Ne]instanceof rh?Lt(jt[Ne]):jt[Ne]instanceof gp&&vr(jt[Ne],G))},Vr=function(G){for(var Ne in G.objectNumber=Tr(),te("<<"),G)switch(Ne){case"opacity":te("/ca "+U(G[Ne]));break;case"stroke-opacity":te("/CA "+U(G[Ne]))}te(">>"),te("endobj")},Mn=function(){var G;for(G in nr)nr.hasOwnProperty(G)&&Vr(nr[G])},Fs=function(){for(var G in te("/XObject <<"),fn)fn.hasOwnProperty(G)&&fn[G].objectNumber>=0&&te("/"+G+" "+fn[G].objectNumber+" 0 R");mr.publish("putXobjectDict"),te(">>")},$n=function(){mn.oid=Tr(),te("<<"),te("/Filter /Standard"),te("/V "+mn.v),te("/R "+mn.r),te("/U <"+mn.toHexString(mn.U)+">"),te("/O <"+mn.toHexString(mn.O)+">"),te("/P "+mn.P),te(">>"),te("endobj")},hs=function(){for(var G in te("/Font <<"),Tt)Tt.hasOwnProperty(G)&&(f===!1||f===!0&&m.hasOwnProperty(G))&&te("/"+G+" "+Tt[G].objectNumber+" 0 R");te(">>")},zn=function(){if(Object.keys(jt).length>0){for(var G in te("/Shading <<"),jt)jt.hasOwnProperty(G)&&jt[G]instanceof rh&&jt[G].objectNumber>=0&&te("/"+G+" "+jt[G].objectNumber+" 0 R");mr.publish("putShadingPatternDict"),te(">>")}},As=function(G){if(Object.keys(jt).length>0){for(var Ne in te("/Pattern <<"),jt)jt.hasOwnProperty(Ne)&&jt[Ne]instanceof p.TilingPattern&&jt[Ne].objectNumber>=0&&jt[Ne].objectNumber<G&&te("/"+Ne+" "+jt[Ne].objectNumber+" 0 R");mr.publish("putTilingPatternDict"),te(">>")}},Hn=function(){if(Object.keys(nr).length>0){var G;for(G in te("/ExtGState <<"),nr)nr.hasOwnProperty(G)&&nr[G].objectNumber>=0&&te("/"+G+" "+nr[G].objectNumber+" 0 R");mr.publish("putGStateDict"),te(">>")}},Nn=function(G){ne(G.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),hs(),zn(),As(G.objectOid),Hn(),Fs(),te(">>"),te("endobj")},ul=function(){var G=[];Le(),Mn(),mt(),Mr(G),mr.publish("putResources"),G.forEach(Nn),Nn({resourcesOid:ie,objectOid:Number.MAX_SAFE_INTEGER}),mr.publish("postPutResources")},ua=function(){mr.publish("putAdditionalObjects");for(var G=0;G<de.length;G++){var Ne=de[G];ne(Ne.objId,!0),te(Ne.content),te("endobj")}mr.publish("postPutAdditionalObjects")},We=function(G){Ht[G.fontName]=Ht[G.fontName]||{},Ht[G.fontName][G.fontStyle]=G.id},Et=function(G,Ne,Xe,nt,xt){var Pt={id:"F"+(Object.keys(Tt).length+1).toString(10),postScriptName:G,fontName:Ne,fontStyle:Xe,encoding:nt,isStandardFont:xt||!1,metadata:{}};return mr.publish("addFont",{font:Pt,instance:this}),Tt[Pt.id]=Pt,We(Pt),Pt.id},_t=function(G){for(var Ne=0,Xe=Pe.length;Ne<Xe;Ne++){var nt=Et.call(this,G[Ne][0],G[Ne][1],G[Ne][2],Pe[Ne][3],!0);f===!1&&(m[nt]=!0);var xt=G[Ne][0].split("-");We({id:nt,fontName:xt[0],fontStyle:xt[1]||""})}mr.publish("addFonts",{fonts:Tt,dictionary:Ht})},sr=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(nt){var Ne=nt.stack||"";~Ne.indexOf(" at ")&&(Ne=Ne.split(" at ")[1]);var Xe="Error in function "+Ne.split(`
`)[0].split("<")[0]+": "+nt.message;if(!dn.console)throw new Error(Xe);dn.console.error(Xe,nt),dn.alert&&alert(Xe)}},G.foo.bar=G,G.foo},yr=function(G,Ne){var Xe,nt,xt,Pt,Gt,xr,qr,sn,Zr;if(xt=(Ne=Ne||{}).sourceEncoding||"Unicode",Gt=Ne.outputEncoding,(Ne.autoencode||Gt)&&Tt[qe].metadata&&Tt[qe].metadata[xt]&&Tt[qe].metadata[xt].encoding&&(Pt=Tt[qe].metadata[xt].encoding,!Gt&&Tt[qe].encoding&&(Gt=Tt[qe].encoding),!Gt&&Pt.codePages&&(Gt=Pt.codePages[0]),typeof Gt=="string"&&(Gt=Pt[Gt]),Gt)){for(qr=!1,xr=[],Xe=0,nt=G.length;Xe<nt;Xe++)(sn=Gt[G.charCodeAt(Xe)])?xr.push(String.fromCharCode(sn)):xr.push(G[Xe]),xr[Xe].charCodeAt(0)>>8&&(qr=!0);G=xr.join("")}for(Xe=G.length;qr===void 0&&Xe!==0;)G.charCodeAt(Xe-1)>>8&&(qr=!0),Xe--;if(!qr)return G;for(xr=Ne.noBOM?[]:[254,255],Xe=0,nt=G.length;Xe<nt;Xe++){if((Zr=(sn=G.charCodeAt(Xe))>>8)>>8)throw new Error("Character at position "+Xe+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(Zr),xr.push(sn-(Zr<<8))}return String.fromCharCode.apply(void 0,xr)},pr=p.__private__.pdfEscape=p.pdfEscape=function(G,Ne){return yr(G,Ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dr=p.__private__.beginPage=function(G){Re[++Xt]=[],Qt[Xt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},Jt(Xt),le(Re[q])},ta=function(G,Ne){var Xe,nt,xt;switch(r=Ne||r,typeof G=="string"&&(Xe=b(G.toLowerCase()),Array.isArray(Xe)&&(nt=Xe[0],xt=Xe[1])),Array.isArray(G)&&(nt=G[0]*Ze,xt=G[1]*Ze),isNaN(nt)&&(nt=s[0],xt=s[1]),(nt>14400||xt>14400)&&(Xa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),nt=Math.min(14400,nt),xt=Math.min(14400,xt)),s=[nt,xt],r.substr(0,1)){case"l":xt>nt&&(s=[xt,nt]);break;case"p":nt>xt&&(s=[xt,nt])}Dr(s),dd(Ys),te(Ai),kc!==0&&te(kc+" J"),hd!==0&&te(hd+" j"),mr.publish("addPage",{pageNumber:Xt})},jn=function(G){G>0&&G<=Xt&&(Re.splice(G,1),Qt.splice(G,1),Xt--,q>Xt&&(q=Xt),this.setPage(q))},Jt=function(G){G>0&&G<=Xt&&(q=G)},cr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Re.length-1},Ft=function(G,Ne,Xe){var nt,xt=void 0;return Xe=Xe||{},G=G!==void 0?G:Tt[qe].fontName,Ne=Ne!==void 0?Ne:Tt[qe].fontStyle,nt=G.toLowerCase(),Ht[nt]!==void 0&&Ht[nt][Ne]!==void 0?xt=Ht[nt][Ne]:Ht[G]!==void 0&&Ht[G][Ne]!==void 0?xt=Ht[G][Ne]:Xe.disableWarning===!1&&Xa.warn("Unable to look up font label for font '"+G+"', '"+Ne+"'. Refer to getFontList() for available fonts."),xt||Xe.noFallback||(xt=Ht.times[Ne])==null&&(xt=Ht.times.normal),xt},wr=p.__private__.putInfo=function(){var G=Tr(),Ne=function(nt){return nt};for(var Xe in u!==null&&(Ne=mn.encryptor(G,0)),te("<<"),te("/Producer ("+pr(Ne("jsPDF "+cn.version))+")"),Be)Be.hasOwnProperty(Xe)&&Be[Xe]&&te("/"+Xe.substr(0,1).toUpperCase()+Xe.substr(1)+" ("+pr(Ne(Be[Xe]))+")");te("/CreationDate ("+pr(Ne(H))+")"),te(">>"),te("endobj")},zt=p.__private__.putCatalog=function(G){var Ne=(G=G||{}).rootDictionaryObjId||ke;switch(Tr(),te("<<"),te("/Type /Catalog"),te("/Pages "+Ne+" 0 R"),ue||(ue="fullwidth"),ue){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xe=""+ue;Xe.substr(Xe.length-1)==="%"&&(ue=parseInt(ue)/100),typeof ue=="number"&&te("/OpenAction [3 0 R /XYZ null null "+U(ue)+"]")}switch(Fe||(Fe="continuous"),Fe){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}xe&&te("/PageMode /"+xe),mr.publish("putCatalog"),te(">>"),te("endobj")},Ua=p.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(K+1)),te("/Root "+K+" 0 R"),te("/Info "+(K-1)+" 0 R"),u!==null&&te("/Encrypt "+mn.oid+" 0 R"),te("/ID [ <"+Q+"> <"+Q+"> ]"),te(">>")},Ia=p.__private__.putHeader=function(){te("%PDF-"+y),te("%")},Da=p.__private__.putXRef=function(){var G="0000000000";te("xref"),te("0 "+(K+1)),te("0000000000 65535 f ");for(var Ne=1;Ne<=K;Ne++)typeof oe[Ne]=="function"?te((G+oe[Ne]()).slice(-10)+" 00000 n "):oe[Ne]!==void 0?te((G+oe[Ne]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},er=p.__private__.buildDocument=function(){Oe(),le(me),mr.publish("buildDocument"),Ia(),tt(),ua(),ul(),u!==null&&$n(),wr(),zt();var G=se;return Da(),Ua(),te("startxref"),te(""+G),te("%%EOF"),le(Re[q]),me.join(`
`)},Jr=p.__private__.getBlob=function(G){return new Blob([we(G)],{type:"application/pdf"})},fa=p.output=p.__private__.output=sr((function(G,Ne){switch(typeof(Ne=Ne||{})=="string"?Ne={filename:Ne}:Ne.filename=Ne.filename||"generated.pdf",G){case void 0:return er();case"save":p.save(Ne.filename);break;case"arraybuffer":return we(er());case"blob":return Jr(er());case"bloburi":case"bloburl":if(dn.URL!==void 0&&typeof dn.URL.createObjectURL=="function")return dn.URL&&dn.URL.createObjectURL(Jr(er()))||void 0;Xa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xe="",nt=er();try{Xe=Uk(nt)}catch{Xe=Uk(unescape(encodeURIComponent(nt)))}return"data:application/pdf;filename="+Ne.filename+";base64,"+Xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ne.pdfObjectUrl&&(xt=Ne.pdfObjectUrl,Pt="");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Pt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ne)+");<\/script></body></html>",xr=dn.open();return xr!==null&&xr.document.write(Gt),xr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ne.filename+'" width="500px" height="400px" /></body></html>',sn=dn.open();if(sn!==null){sn.document.write(qr);var Zr=this;sn.document.documentElement.querySelector("#pdfViewer").onload=function(){sn.document.title=Ne.filename,sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zr.output("bloburl"))}}return sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ne)+'"></iframe></body></html>',qa=dn.open();if(qa!==null&&(qa.document.write(Sn),qa.document.title=Ne.filename),qa||typeof safari>"u")return qa;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",Ne);default:return null}})),bn=function(G){return Array.isArray(Fr)===!0&&Fr.indexOf(G)>-1};switch(a){case"pt":Ze=1;break;case"mm":Ze=72/25.4;break;case"cm":Ze=72/2.54;break;case"in":Ze=72;break;case"px":Ze=bn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ze=a}var mn=null;W(),re();var Nr=function(G){return u!==null?mn.encryptor(G,0):function(Ne){return Ne}},Wr=p.__private__.getPageInfo=p.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Qt[G].objId,pageNumber:G,pageContext:Qt[G]}},or=p.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ne in Qt)if(Qt[Ne].objId===G)break;return Wr(Ne)},Vn=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Qt[q].objId,pageNumber:q,pageContext:Qt[q]}};p.addPage=function(){return ta.apply(this,arguments),this},p.setPage=function(){return Jt.apply(this,arguments),le.call(this,Re[q]),this},p.insertPage=function(G){return this.addPage(),this.movePage(q,G),this},p.movePage=function(G,Ne){var Xe,nt;if(G>Ne){Xe=Re[G],nt=Qt[G];for(var xt=G;xt>Ne;xt--)Re[xt]=Re[xt-1],Qt[xt]=Qt[xt-1];Re[Ne]=Xe,Qt[Ne]=nt,this.setPage(Ne)}else if(G<Ne){Xe=Re[G],nt=Qt[G];for(var Pt=G;Pt<Ne;Pt++)Re[Pt]=Re[Pt+1],Qt[Pt]=Qt[Pt+1];Re[Ne]=Xe,Qt[Ne]=nt,this.setPage(Ne)}return this},p.deletePage=function(){return jn.apply(this,arguments),this},p.__private__.text=p.text=function(G,Ne,Xe,nt,xt){var Pt,Gt,xr,qr,sn,Zr,Sn,qa,$a,gs=(nt=nt||{}).scope||this;if(typeof G=="number"&&typeof Ne=="number"&&(typeof Xe=="string"||Array.isArray(Xe))){var Qs=Xe;Xe=Ne,Ne=G,G=Qs}if(arguments[3]instanceof ir?(P("The transform parameter of text() with a Matrix value"),$a=xt):(xr=arguments[4],qr=arguments[5],Ta(Sn=arguments[3])==="object"&&Sn!==null||(typeof xr=="string"&&(qr=xr,xr=null),typeof Sn=="string"&&(qr=Sn,Sn=null),typeof Sn=="number"&&(xr=Sn,Sn=null),nt={flags:Sn,angle:xr,align:qr})),isNaN(Ne)||isNaN(Xe)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return gs;var Ms="",Lo=!1,Js=typeof nt.lineHeightFactor=="number"?nt.lineHeightFactor:ka,xo=gs.internal.scaleFactor;function go(ra){return ra=ra.split("	").join(Array(nt.TabLen||9).join(" ")),pr(ra,Sn)}function nu(ra){for(var Xn,_n=ra.concat(),_a=[],Ro=_n.length;Ro--;)typeof(Xn=_n.shift())=="string"?_a.push(Xn):Array.isArray(ra)&&(Xn.length===1||Xn[1]===void 0&&Xn[2]===void 0)?_a.push(Xn[0]):_a.push([Xn[0],Xn[1],Xn[2]]);return _a}function au(ra,Xn){var _n;if(typeof ra=="string")_n=Xn(ra)[0];else if(Array.isArray(ra)){for(var _a,Ro,iu=ra.concat(),Bo=[],yd=iu.length;yd--;)typeof(_a=iu.shift())=="string"?Bo.push(Xn(_a)[0]):Array.isArray(_a)&&typeof _a[0]=="string"&&(Ro=Xn(_a[0],_a[1],_a[2]),Bo.push([Ro[0],Ro[1],Ro[2]]));_n=Bo}return _n}var _c=!1,md=!0;if(typeof G=="string")_c=!0;else if(Array.isArray(G)){var xd=G.concat();Gt=[];for(var gd,Sa=xd.length;Sa--;)(typeof(gd=xd.shift())!="string"||Array.isArray(gd)&&typeof gd[0]!="string")&&(md=!1);_c=md}if(_c===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var vo=fe/gs.internal.scaleFactor,hl=vo*(Js-1);switch(nt.baseline){case"bottom":Xe-=hl;break;case"top":Xe+=vo-hl;break;case"hanging":Xe+=vo-2*hl;break;case"middle":Xe+=vo/2-hl}if((Zr=nt.maxWidth||0)>0&&(typeof G=="string"?G=gs.splitTextToSize(G,Zr):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce((function(ra,Xn){return ra.concat(gs.splitTextToSize(Xn,Zr))}),[]))),Pt={text:G,x:Ne,y:Xe,options:nt,mutex:{pdfEscape:pr,activeFontKey:qe,fonts:Tt,activeFontSize:fe}},mr.publish("preProcessText",Pt),G=Pt.text,xr=(nt=Pt.options).angle,!($a instanceof ir)&&xr&&typeof xr=="number"){xr*=Math.PI/180,nt.rotationDirection===0&&(xr=-xr),j===w.ADVANCED&&(xr=-xr);var Za=Math.cos(xr),Ac=Math.sin(xr);$a=new ir(Za,Ac,-Ac,Za,0,0)}else xr&&xr instanceof ir&&($a=xr);j!==w.ADVANCED||$a||($a=an),(sn=nt.charSpace||Io)!==void 0&&(Ms+=_(O(sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qa=nt.horizontalScale)!==void 0&&(Ms+=_(100*qa)+` Tz
`),nt.lang;var on=-1,rs=nt.renderingMode!==void 0?nt.renderingMode:nt.stroke,ga=gs.internal.getCurrentPageInfo().pageContext;switch(rs){case 0:case!1:case"fill":on=0;break;case 1:case!0:case"stroke":on=1;break;case 2:case"fillThenStroke":on=2;break;case 3:case"invisible":on=3;break;case 4:case"fillAndAddForClipping":on=4;break;case 5:case"strokeAndAddPathForClipping":on=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":on=6;break;case 7:case"addToPathForClipping":on=7}var ui=ga.usedRenderingMode!==void 0?ga.usedRenderingMode:-1;on!==-1?Ms+=on+` Tr
`:ui!==-1&&(Ms+=`0 Tr
`),on!==-1&&(ga.usedRenderingMode=on),qr=nt.align||"left";var Bn,Rs=fe*Js,za=gs.internal.pageSize.getWidth(),Vi=Tt[qe];sn=nt.charSpace||Io,Zr=nt.maxWidth||0,Sn=Object.assign({autoencode:!0,noBOM:!0},nt.flags);var Ha=[],vs=function(ra){return gs.getStringUnitWidth(ra,{font:Vi,charSpace:sn,fontSize:fe,doKerning:!1})*fe/xo};if(Object.prototype.toString.call(G)==="[object Array]"){var wa;Gt=nu(G),qr!=="left"&&(Bn=Gt.map(vs));var ns,Gi=0;if(qr==="right"){Ne-=Bn[0],G=[],Sa=Gt.length;for(var Tl=0;Tl<Sa;Tl++)Tl===0?(ns=zi(Ne),wa=Hi(Xe)):(ns=O(Gi-Bn[Tl]),wa=-Rs),G.push([Gt[Tl],ns,wa]),Gi=Bn[Tl]}else if(qr==="center"){Ne-=Bn[0]/2,G=[],Sa=Gt.length;for(var Fo=0;Fo<Sa;Fo++)Fo===0?(ns=zi(Ne),wa=Hi(Xe)):(ns=O((Gi-Bn[Fo])/2),wa=-Rs),G.push([Gt[Fo],ns,wa]),Gi=Bn[Fo]}else if(qr==="left"){G=[],Sa=Gt.length;for(var su=0;su<Sa;su++)G.push(Gt[su])}else if(qr==="justify"&&Vi.encoding==="Identity-H"){G=[],Sa=Gt.length,Zr=Zr!==0?Zr:za;for(var pl=0,Gn=0;Gn<Sa;Gn++)if(wa=Gn===0?Hi(Xe):-Rs,ns=Gn===0?zi(Ne):pl,Gn<Sa-1){var Ol=O((Zr-Bn[Gn])/(Gt[Gn].split(" ").length-1)),Zs=Gt[Gn].split(" ");G.push([Zs[0]+" ",ns,wa]),pl=0;for(var Ei=1;Ei<Zs.length;Ei++){var Pl=(vs(Zs[Ei-1]+" "+Zs[Ei])-vs(Zs[Ei]))*xo+Ol;Ei==Zs.length-1?G.push([Zs[Ei],Pl,0]):G.push([Zs[Ei]+" ",Pl,0]),pl-=Pl}}else G.push([Gt[Gn],ns,wa]);G.push(["",pl,0])}else{if(qr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],Sa=Gt.length,Zr=Zr!==0?Zr:za,Gn=0;Gn<Sa;Gn++)wa=Gn===0?Hi(Xe):-Rs,ns=Gn===0?zi(Ne):0,Gn<Sa-1?Ha.push(_(O((Zr-Bn[Gn])/(Gt[Gn].split(" ").length-1)))):Ha.push(0),G.push([Gt[Gn],ns,wa])}}var vd=typeof nt.R2L=="boolean"?nt.R2L:Ye;vd===!0&&(G=au(G,(function(ra,Xn,_n){return[ra.split("").reverse().join(""),Xn,_n]}))),Pt={text:G,x:Ne,y:Xe,options:nt,mutex:{pdfEscape:pr,activeFontKey:qe,fonts:Tt,activeFontSize:fe}},mr.publish("postProcessText",Pt),G=Pt.text,Lo=Pt.mutex.isHex||!1;var Il=Tt[qe].encoding;Il!=="WinAnsiEncoding"&&Il!=="StandardEncoding"||(G=au(G,(function(ra,Xn,_n){return[go(ra),Xn,_n]}))),Gt=nu(G),G=[];for(var Mo,Ki,Bs,Xi=0,Ti=1,Yi=Array.isArray(Gt[0])?Ti:Xi,yo="",Cc=function(ra,Xn,_n){var _a="";return _n instanceof ir?(_n=typeof nt.angle=="number"?qn(_n,new ir(1,0,0,1,ra,Xn)):qn(new ir(1,0,0,1,ra,Xn),_n),j===w.ADVANCED&&(_n=qn(new ir(1,0,0,-1,0,0),_n)),_a=_n.join(" ")+` Tm
`):_a=_(ra)+" "+_(Xn)+` Td
`,_a},ys=0;ys<Gt.length;ys++){switch(yo="",Yi){case Ti:Bs=(Lo?"<":"(")+Gt[ys][0]+(Lo?">":")"),Mo=parseFloat(Gt[ys][1]),Ki=parseFloat(Gt[ys][2]);break;case Xi:Bs=(Lo?"<":"(")+Gt[ys]+(Lo?">":")"),Mo=zi(Ne),Ki=Hi(Xe)}Ha!==void 0&&Ha[ys]!==void 0&&(yo=Ha[ys]+` Tw
`),ys===0?G.push(yo+Cc(Mo,Ki,$a)+Bs):Yi===Xi?G.push(yo+Bs):Yi===Ti&&G.push(yo+Cc(Mo,Ki,$a)+Bs)}G=Yi===Xi?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var bs=`BT
/`;return bs+=qe+" "+fe+` Tf
`,bs+=_(fe*Js)+` TL
`,bs+=xs+`
`,bs+=Ms,bs+=G,te(bs+="ET"),m[qe]=!0,gs};var Hr=p.__private__.clip=p.clip=function(G){return te(G==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Hr("evenodd")},p.__private__.discardPath=p.discardPath=function(){return te("n"),this};var Ja=p.__private__.isValidStyle=function(G){var Ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(Ne=!0),Ne};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(G){return Ja(G)&&(d=G),this};var fo=p.__private__.getStyle=p.getStyle=function(G){var Ne=d;switch(G){case"D":case"S":Ne="S";break;case"F":Ne="f";break;case"FD":case"DF":Ne="B";break;case"f":case"f*":case"B":case"B*":Ne=G}return Ne},Si=p.close=function(){return te("h"),this};p.stroke=function(){return te("S"),this},p.fill=function(G){return ps("f",G),this},p.fillEvenOdd=function(G){return ps("f*",G),this},p.fillStroke=function(G){return ps("B",G),this},p.fillStrokeEvenOdd=function(G){return ps("B*",G),this};var ps=function(G,Ne){Ta(Ne)==="object"?He(Ne,G):te(G)},ms=function(G){G===null||j===w.ADVANCED&&G===void 0||(G=fo(G),te(G))};function ho(G,Ne,Xe,nt,xt){var Pt=new gp(Ne||this.boundingBox,Xe||this.xStep,nt||this.yStep,this.gState,xt||this.matrix);Pt.stream=this.stream;var Gt=G+"$$"+this.cloneIndex+++"$$";return wn(Gt,Pt),Pt}var He=function(G,Ne){var Xe=gr[G.key],nt=jt[Xe];if(nt instanceof rh)te("q"),te(br(Ne)),nt.gState&&p.setGState(nt.gState),te(G.matrix.toString()+" cm"),te("/"+Xe+" sh"),te("Q");else if(nt instanceof gp){var xt=new ir(1,0,0,-1,0,ec());G.matrix&&(xt=xt.multiply(G.matrix||an),Xe=ho.call(nt,G.key,G.boundingBox,G.xStep,G.yStep,xt).id),te("q"),te("/Pattern cs"),te("/"+Xe+" scn"),nt.gState&&p.setGState(nt.gState),te(Ne),te("Q")}},br=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cr=p.moveTo=function(G,Ne){return te(_(O(G))+" "+_(z(Ne))+" m"),this},Er=p.lineTo=function(G,Ne){return te(_(O(G))+" "+_(z(Ne))+" l"),this},Kr=p.curveTo=function(G,Ne,Xe,nt,xt,Pt){return te([_(O(G)),_(z(Ne)),_(O(Xe)),_(z(nt)),_(O(xt)),_(z(Pt)),"c"].join(" ")),this};p.__private__.line=p.line=function(G,Ne,Xe,nt,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||isNaN(nt)||!Ja(xt))throw new Error("Invalid arguments passed to jsPDF.line");return j===w.COMPAT?this.lines([[Xe-G,nt-Ne]],G,Ne,[1,1],xt||"S"):this.lines([[Xe-G,nt-Ne]],G,Ne,[1,1]).stroke()},p.__private__.lines=p.lines=function(G,Ne,Xe,nt,xt,Pt){var Gt,xr,qr,sn,Zr,Sn,qa,$a,gs,Qs,Ms,Lo;if(typeof G=="number"&&(Lo=Xe,Xe=Ne,Ne=G,G=Lo),nt=nt||[1,1],Pt=Pt||!1,isNaN(Ne)||isNaN(Xe)||!Array.isArray(G)||!Array.isArray(nt)||!Ja(xt)||typeof Pt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cr(Ne,Xe),Gt=nt[0],xr=nt[1],sn=G.length,Qs=Ne,Ms=Xe,qr=0;qr<sn;qr++)(Zr=G[qr]).length===2?(Qs=Zr[0]*Gt+Qs,Ms=Zr[1]*xr+Ms,Er(Qs,Ms)):(Sn=Zr[0]*Gt+Qs,qa=Zr[1]*xr+Ms,$a=Zr[2]*Gt+Qs,gs=Zr[3]*xr+Ms,Qs=Zr[4]*Gt+Qs,Ms=Zr[5]*xr+Ms,Kr(Sn,qa,$a,gs,Qs,Ms));return Pt&&Si(),ms(xt),this},p.path=function(G){for(var Ne=0;Ne<G.length;Ne++){var Xe=G[Ne],nt=Xe.c;switch(Xe.op){case"m":Cr(nt[0],nt[1]);break;case"l":Er(nt[0],nt[1]);break;case"c":Kr.apply(this,nt);break;case"h":Si()}}return this},p.__private__.rect=p.rect=function(G,Ne,Xe,nt,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||isNaN(nt)||!Ja(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===w.COMPAT&&(nt=-nt),te([_(O(G)),_(z(Ne)),_(O(Xe)),_(O(nt)),"re"].join(" ")),ms(xt),this},p.__private__.triangle=p.triangle=function(G,Ne,Xe,nt,xt,Pt,Gt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||isNaN(nt)||isNaN(xt)||isNaN(Pt)||!Ja(Gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xe-G,nt-Ne],[xt-Xe,Pt-nt],[G-xt,Ne-Pt]],G,Ne,[1,1],Gt,!0),this},p.__private__.roundedRect=p.roundedRect=function(G,Ne,Xe,nt,xt,Pt,Gt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||isNaN(nt)||isNaN(xt)||isNaN(Pt)||!Ja(Gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xr=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Xe),Pt=Math.min(Pt,.5*nt),this.lines([[Xe-2*xt,0],[xt*xr,0,xt,Pt-Pt*xr,xt,Pt],[0,nt-2*Pt],[0,Pt*xr,-xt*xr,Pt,-xt,Pt],[2*xt-Xe,0],[-xt*xr,0,-xt,-Pt*xr,-xt,-Pt],[0,2*Pt-nt],[0,-Pt*xr,xt*xr,-Pt,xt,-Pt]],G+xt,Ne,[1,1],Gt,!0),this},p.__private__.ellipse=p.ellipse=function(G,Ne,Xe,nt,xt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||isNaN(nt)||!Ja(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pt=4/3*(Math.SQRT2-1)*Xe,Gt=4/3*(Math.SQRT2-1)*nt;return Cr(G+Xe,Ne),Kr(G+Xe,Ne-Gt,G+Pt,Ne-nt,G,Ne-nt),Kr(G-Pt,Ne-nt,G-Xe,Ne-Gt,G-Xe,Ne),Kr(G-Xe,Ne+Gt,G-Pt,Ne+nt,G,Ne+nt),Kr(G+Pt,Ne+nt,G+Xe,Ne+Gt,G+Xe,Ne),ms(xt),this},p.__private__.circle=p.circle=function(G,Ne,Xe,nt){if(isNaN(G)||isNaN(Ne)||isNaN(Xe)||!Ja(nt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,Ne,Xe,Xe,nt)},p.setFont=function(G,Ne,Xe){return Xe&&(Ne=E(Ne,Xe)),qe=Ft(G,Ne,{disableWarning:!1}),this};var Rn=p.__private__.getFont=p.getFont=function(){return Tt[Ft.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var G,Ne,Xe={};for(G in Ht)if(Ht.hasOwnProperty(G))for(Ne in Xe[G]=[],Ht[G])Ht[G].hasOwnProperty(Ne)&&Xe[G].push(Ne);return Xe},p.addFont=function(G,Ne,Xe,nt,xt){var Pt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Pt.indexOf(arguments[3])==-1&&(Xe=E(Xe,nt)),xt=xt||"Identity-H",Et.call(this,G,Ne,Xe,xt)};var ka,Ys=e.lineWidth||.200025,_i=p.__private__.getLineWidth=p.getLineWidth=function(){return Ys},dd=p.__private__.setLineWidth=p.setLineWidth=function(G){return Ys=G,te(_(O(G))+" w"),this};p.__private__.setLineDash=cn.API.setLineDash=cn.API.setLineDashPattern=function(G,Ne){if(G=G||[],Ne=Ne||0,isNaN(Ne)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map((function(Xe){return _(O(Xe))})).join(" "),Ne=_(O(Ne)),te("["+G+"] "+Ne+" d"),this};var jc=p.__private__.getLineHeight=p.getLineHeight=function(){return fe*ka};p.__private__.getLineHeight=p.getLineHeight=function(){return fe*ka};var ud=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(ka=G),this},po=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ka};ud(e.lineHeight);var zi=p.__private__.getHorizontalCoordinate=function(G){return O(G)},Hi=p.__private__.getVerticalCoordinate=function(G){return j===w.ADVANCED?G:Qt[q].mediaBox.topRightY-Qt[q].mediaBox.bottomLeftY-O(G)},Lf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(G){return _(zi(G))},Wi=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(G){return _(Hi(G))},Ai=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ge(Ai)},p.__private__.setStrokeColor=p.setDrawColor=function(G,Ne,Xe,nt){return Ai=Ae({ch1:G,ch2:Ne,ch3:Xe,ch4:nt,pdfColorType:"draw",precision:2}),te(Ai),this};var El=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ge(El)},p.__private__.setFillColor=p.setFillColor=function(G,Ne,Xe,nt){return El=Ae({ch1:G,ch2:Ne,ch3:Xe,ch4:nt,pdfColorType:"fill",precision:2}),te(El),this};var xs=e.textColor||"0 g",mo=p.__private__.getTextColor=p.getTextColor=function(){return ge(xs)};p.__private__.setTextColor=p.setTextColor=function(G,Ne,Xe,nt){return xs=Ae({ch1:G,ch2:Ne,ch3:Xe,ch4:nt,pdfColorType:"text",precision:3}),this};var Io=e.charSpace,fd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Io||0)};p.__private__.setCharSpace=p.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Io=G,this};var kc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(G){var Ne=p.CapJoinStyles[G];if(Ne===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kc=Ne,te(Ne+" J"),this};var hd=0;p.__private__.setLineJoin=p.setLineJoin=function(G){var Ne=p.CapJoinStyles[G];if(Ne===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hd=Ne,te(Ne+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(_(O(G))+" M"),this},p.GState=_y,p.setGState=function(G){(G=typeof G=="string"?nr[Ar[G]]:fl(null,G)).equals(Ir)||(te("/"+G.id+" gs"),Ir=G)};var fl=function(G,Ne){if(!G||!Ar[G]){var Xe=!1;for(var nt in nr)if(nr.hasOwnProperty(nt)&&nr[nt].equals(Ne)){Xe=!0;break}if(Xe)Ne=nr[nt];else{var xt="GS"+(Object.keys(nr).length+1).toString(10);nr[xt]=Ne,Ne.id=xt}return G&&(Ar[G]=Ne.id),mr.publish("addGState",Ne),Ne}};p.addGState=function(G,Ne){return fl(G,Ne),this},p.saveGraphicsState=function(){return te("q"),Ve.push({key:qe,size:fe,color:xs}),this},p.restoreGraphicsState=function(){te("Q");var G=Ve.pop();return qe=G.key,fe=G.size,xs=G.color,Ir=null,this},p.setCurrentTransformationMatrix=function(G){return te(G.toString()+" cm"),this},p.comment=function(G){return te("#"+G),this};var Ci=function(G,Ne){var Xe=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xe},set:function(Pt){isNaN(Pt)||(Xe=parseFloat(Pt))}});var nt=Ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return nt},set:function(Pt){isNaN(Pt)||(nt=parseFloat(Pt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Pt){xt=Pt.toString()}}),this},Do=function(G,Ne,Xe,nt){Ci.call(this,G,Ne),this.type="rect";var xt=Xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(Gt){isNaN(Gt)||(xt=parseFloat(Gt))}});var Pt=nt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pt},set:function(Gt){isNaN(Gt)||(Pt=parseFloat(Gt))}}),this},pd=function(){this.page=Xt,this.currentPage=q,this.pages=Re.slice(0),this.pagesContext=Qt.slice(0),this.x=Vt,this.y=Dt,this.matrix=dt,this.width=ba(q),this.height=ec(q),this.outputDestination=Ue,this.id="",this.objectNumber=-1};pd.prototype.restore=function(){Xt=this.page,q=this.currentPage,Qt=this.pagesContext,Re=this.pages,Vt=this.x,Dt=this.y,dt=this.matrix,zu(q,this.width),ru(q,this.height),Ue=this.outputDestination};var $u=function(G,Ne,Xe,nt,xt){Qr.push(new pd),Xt=q=0,Re=[],Vt=G,Dt=Ne,dt=xt,Dr([Xe,nt])},tu=function(G){if(Br[G])Qr.pop().restore();else{var Ne=new pd,Xe="Xo"+(Object.keys(fn).length+1).toString(10);Ne.id=Xe,Br[G]=Xe,fn[Xe]=Ne,mr.publish("addFormObject",Ne),Qr.pop().restore()}};for(var Sc in p.beginFormObject=function(G,Ne,Xe,nt,xt){return $u(G,Ne,Xe,nt,xt),this},p.endFormObject=function(G){return tu(G),this},p.doFormObject=function(G,Ne){var Xe=fn[Br[G]];return te("q"),te(Ne.toString()+" cm"),te("/"+Xe.id+" Do"),te("Q"),this},p.getFormObject=function(G){var Ne=fn[Br[G]];return{x:Ne.x,y:Ne.y,width:Ne.width,height:Ne.height,matrix:Ne.matrix}},p.save=function(G,Ne){return G=G||"generated.pdf",(Ne=Ne||{}).returnPromise=Ne.returnPromise||!1,Ne.returnPromise===!1?(eh(Jr(er()),G),typeof eh.unload=="function"&&dn.setTimeout&&setTimeout(eh.unload,911),this):new Promise((function(Xe,nt){try{var xt=eh(Jr(er()),G);typeof eh.unload=="function"&&dn.setTimeout&&setTimeout(eh.unload,911),Xe(xt)}catch(Pt){nt(Pt.message)}}))},cn.API)cn.API.hasOwnProperty(Sc)&&(Sc==="events"&&cn.API.events.length?(function(G,Ne){var Xe,nt,xt;for(xt=Ne.length-1;xt!==-1;xt--)Xe=Ne[xt][0],nt=Ne[xt][1],G.subscribe.apply(G,[Xe].concat(typeof nt=="function"?[nt]:nt))})(mr,cn.API.events):p[Sc]=cn.API[Sc]);var ba=p.getPageWidth=function(G){return(Qt[G=G||q].mediaBox.topRightX-Qt[G].mediaBox.bottomLeftX)/Ze},zu=p.setPageWidth=function(G,Ne){Qt[G].mediaBox.topRightX=Ne*Ze+Qt[G].mediaBox.bottomLeftX},ec=p.getPageHeight=function(G){return(Qt[G=G||q].mediaBox.topRightY-Qt[G].mediaBox.bottomLeftY)/Ze},ru=p.setPageHeight=function(G,Ne){Qt[G].mediaBox.topRightY=Ne*Ze+Qt[G].mediaBox.bottomLeftY};return p.internal={pdfEscape:pr,getStyle:fo,getFont:Rn,getFontSize:Ee,getCharSpace:fd,getTextColor:mo,getLineHeight:jc,getLineHeightFactor:po,getLineWidth:_i,write:Se,getHorizontalCoordinate:zi,getVerticalCoordinate:Hi,getCoordinateString:Lf,getVerticalCoordinateString:Wi,collections:{},newObject:Tr,newAdditionalObject:je,newObjectDeferred:zr,newObjectDeferredBegin:ne,getFilters:Ge,putStream:rt,events:mr,scaleFactor:Ze,pageSize:{getWidth:function(){return ba(q)},setWidth:function(G){zu(q,G)},getHeight:function(){return ec(q)},setHeight:function(G){ru(q,G)}},encryptionOptions:u,encryption:mn,getEncryptor:Nr,output:fa,getNumberOfPages:cr,pages:Re,out:te,f2:U,f3:C,getPageInfo:Wr,getPageInfoByObjId:or,getCurrentPageInfo:Vn,getPDFVersion:v,Point:Ci,Rectangle:Do,Matrix:ir,hasHotfix:bn},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ba(q)},set:function(G){zu(q,G)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ec(q)},set:function(G){ru(q,G)},enumerable:!0,configurable:!0}),_t.call(p,Pe),qe="F1",ta(s,r),mr.publish("initialized"),p}dp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},dp.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},dp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},dp.prototype.processOwnerPassword=function(e,t){return $k(qk(t).substr(0,5),e)},dp.prototype.encryptor=function(e,t){var r=qk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return $k(r,a)}},_y.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ta(e)!==Ta(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},cn.API={events:[]},cn.version="2.5.2";var $s=cn.API,e_=1,Wh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},op=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},yn=function(e){return e.toFixed(2)},t0=function(e){return e.toFixed(5)};$s.__acroform__={};var Zl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},eD=function(e){return e*e_},Nu=function(e){var t=new G9,r=Pr.internal.getHeight(e)||0,a=Pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(yn(a)),Number(yn(r))],t},v1e=$s.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},y1e=$s.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},b1e=$s.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ai=$s.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return b1e(e,t-1)},si=$s.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return v1e(e,t-1)},ii=$s.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return y1e(e,t-1)},w1e=$s.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(yn(c.lowerLeft_X)),Number(yn(c.lowerLeft_Y)),Number(yn(c.upperRight_X)),Number(yn(c.upperRight_Y))]},N1e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=zk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+yn(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Nu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},zk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(C){return C.split(`
`)})):s.map((function(C){return[C]}));var i=r,o=Pr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Pr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(C,O,R){if(C+1<s.length){var z=O+" "+s[C+1][0];return Uv(z,e,R).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,f=Uv("3",e,i).height,m=e.multiline?o-i:(o-f)/2,p=m+=2,y=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Uv(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var b="",w=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var N=!1;if(s[j].length!==1&&g!==s[j].length-1){if((f+2)*(w+2)+2>o)continue e;b+=s[j][g],N=!0,v=j,j--}else{b=(b+=s[j][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var S=parseInt(j),E=c(S,b,i),_=j>=s.length-1;if(E&&!_){b+=" ",g=0;continue}if(E||_){if(_)v=S;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;v=S}}for(var P="",I=y;I<=v;I++){var U=s[I];if(e.multiline){if(I===v){P+=U[g]+" ",g=(g+1)%U.length;continue}if(I===y){P+=U[U.length-1]+" ";continue}}P+=U[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=Uv(P,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=yn(d)+" "+yn(p)+` Td
`,t+="("+Wh(P)+`) Tj
`,t+=-yn(d)+` 0 Td
`,p=-(i+2),u=0,y=N?v:v+1,w++,b=""}break}return a.text=t,a.fontSize=i,a},Uv=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},j1e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},k1e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(a){return a.type===r.type&&a.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},S1e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Ta(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},_1e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Zd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(j1e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");e_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new K9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&k1e(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=w1e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Pr.createDefaultAppearanceStream(l),Ta(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=N1e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(s,l)),f+="/"+o+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,l)),f+="/"+o+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&S1e(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},V9=$s.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Ta(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Wh(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Mj=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Wh(a(e))+")"},Cu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Cu.prototype.toString=function(){return this.objId+" 0 R"},Cu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Cu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:V9(s,this.objId,this.scope)}):s instanceof Cu?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var G9=function(){Cu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Zl(G9,Cu);var K9=function(){Cu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wh(r(e))+")"}},set:function(r){e=r}})};Zl(K9,Cu);var Zd=function e(){Cu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(t,3)},set:function(b){b?this.F=si(t,3):this.F=ii(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(b){a=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(b){a[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(b){a[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(b){a[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(b){a[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ay)return;i="FieldObject"+e.FieldNum++}var b=function(w){return w};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Wh(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/e_:d},set:function(b){d=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Ay||this instanceof vh))return Mj(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof io?m:Mj(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof io?b:b.substr(0,1)==="("?op(b.substr(1,b.length-2)):op(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof io?op(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof io?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof io?p:Mj(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof io?b:b.substr(0,1)==="("?op(b.substr(1,b.length-2)):op(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof io?op(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof io?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(b){b?this.Ff=si(this.Ff,1):this.Ff=ii(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(b){b?this.Ff=si(this.Ff,2):this.Ff=ii(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(b){b?this.Ff=si(this.Ff,3):this.Ff=ii(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Zl(Zd,Cu);var _p=function(){Zd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return V9(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(r){r?this.Ff=si(this.Ff,18):this.Ff=ii(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=si(this.Ff,19):this.Ff=ii(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(r){r?(this.Ff=si(this.Ff,20),t.sort()):this.Ff=ii(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(r){r?this.Ff=si(this.Ff,22):this.Ff=ii(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(r){r?this.Ff=si(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(r){r?this.Ff=si(this.Ff,27):this.Ff=ii(this.Ff,27)}}),this.hasAppearanceStream=!1};Zl(_p,Zd);var Ap=function(){_p.call(this),this.fontName="helvetica",this.combo=!1};Zl(Ap,_p);var Cp=function(){Ap.call(this),this.combo=!0};Zl(Cp,Ap);var Jv=function(){Cp.call(this),this.edit=!0};Zl(Jv,Cp);var io=function(){Zd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(r){r?this.Ff=si(this.Ff,15):this.Ff=ii(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(r){r?this.Ff=si(this.Ff,16):this.Ff=ii(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(r){r?this.Ff=si(this.Ff,17):this.Ff=ii(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(r){r?this.Ff=si(this.Ff,26):this.Ff=ii(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Wh(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ta(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Zl(io,Zd);var Zv=function(){io.call(this),this.pushButton=!0};Zl(Zv,io);var Ep=function(){io.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Zl(Ep,io);var Ay=function(){var e,t;Zd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Wh(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Ta(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zl(Ay,Zd),Ep.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ep.prototype.createOption=function(e){var t=new Ay;return t.Parent=this,t.optionName=e,this.Kids.push(t),A1e.call(this.scope,t),t};var e1=function(){io.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pr.CheckBox.createAppearanceStream()};Zl(e1,io);var vh=function(){Zd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(t){t?this.Ff=si(this.Ff,13):this.Ff=ii(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(t){t?this.Ff=si(this.Ff,21):this.Ff=ii(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=si(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(t){t?this.Ff=si(this.Ff,24):this.Ff=ii(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(t){t?this.Ff=si(this.Ff,25):this.Ff=ii(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=si(this.Ff,26):this.Ff=ii(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zl(vh,Zd);var t1=function(){vh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(e){e?this.Ff=si(this.Ff,14):this.Ff=ii(this.Ff,14)}}),this.password=!0};Zl(t1,vh);var Pr={CheckBox:{createAppearanceStream:function(){return{N:{On:Pr.CheckBox.YesNormal},D:{On:Pr.CheckBox.YesPushDown,Off:Pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=zk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+yn(Pr.internal.getWidth(e))+" "+yn(Pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+yn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Pr.internal.getHeight(e),o=Pr.internal.getWidth(e),l=zk(e,e.caption);return s.push("1 g"),s.push("0 0 "+yn(o)+" "+yn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+yn(o-1)+" "+yn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+yn(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+yn(Pr.internal.getWidth(e))+" "+yn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Circle.YesNormal,t.D[e]=Pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=[],a=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Pr.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+t0(Pr.internal.getWidth(e)/2)+" "+t0(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],a=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Pr.internal.Bezier_C).toFixed(5)),o=Number((a*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+t0(Pr.internal.getWidth(e)/2)+" "+t0(Pr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+t0(Pr.internal.getWidth(e)/2)+" "+t0(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],a=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+t0(Pr.internal.getWidth(e)/2)+" "+t0(Pr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Cross.YesNormal,t.D[e]=Pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=[],a=Pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+yn(Pr.internal.getWidth(e)-2)+" "+yn(Pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(yn(a.x1.x)+" "+yn(a.x1.y)+" m"),r.push(yn(a.x2.x)+" "+yn(a.x2.y)+" l"),r.push(yn(a.x4.x)+" "+yn(a.x4.y)+" m"),r.push(yn(a.x3.x)+" "+yn(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=Pr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+yn(Pr.internal.getWidth(e))+" "+yn(Pr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+yn(Pr.internal.getWidth(e)-2)+" "+yn(Pr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(yn(r.x1.x)+" "+yn(r.x1.y)+" m"),a.push(yn(r.x2.x)+" "+yn(r.x2.y)+" l"),a.push(yn(r.x4.x)+" "+yn(r.x4.y)+" m"),a.push(yn(r.x3.x)+" "+yn(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+yn(Pr.internal.getWidth(e))+" "+yn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Pr.internal.getWidth(e),r=Pr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Pr.internal.getWidth=function(e){var t=0;return Ta(e)==="object"&&(t=eD(e.Rect[2])),t},Pr.internal.getHeight=function(e){var t=0;return Ta(e)==="object"&&(t=eD(e.Rect[3])),t};var A1e=$s.addField=function(e){if(_1e(this,e),!(e instanceof Zd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};$s.AcroFormChoiceField=_p,$s.AcroFormListBox=Ap,$s.AcroFormComboBox=Cp,$s.AcroFormEditBox=Jv,$s.AcroFormButton=io,$s.AcroFormPushButton=Zv,$s.AcroFormRadioButton=Ep,$s.AcroFormCheckBox=e1,$s.AcroFormTextField=vh,$s.AcroFormPasswordField=t1,$s.AcroFormAppearance=Pr,$s.AcroForm={ChoiceField:_p,ListBox:Ap,ComboBox:Cp,EditBox:Jv,Button:io,PushButton:Zv,RadioButton:Ep,CheckBox:e1,TextField:vh,PasswordField:t1,Appearance:Pr},cn.AcroForm={ChoiceField:_p,ListBox:Ap,ComboBox:Cp,EditBox:Jv,Button:io,PushButton:Zv,RadioButton:Ep,CheckBox:e1,TextField:vh,PasswordField:t1,Appearance:Pr};cn.AcroForm;function X9(e){return e.reduce((function(t,r,a){return t[r]=a,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(C,O){var R,z,H,Q,J,re=t;if((O=O||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(E(C))for(J in r)for(H=r[J],R=0;R<H.length;R+=1){for(Q=!0,z=0;z<H[R].length;z+=1)if(H[R][z]!==void 0&&H[R][z]!==C[z]){Q=!1;break}if(Q===!0){re=J;break}}else for(J in r)for(H=r[J],R=0;R<H.length;R+=1){for(Q=!0,z=0;z<H[R].length;z+=1)if(H[R][z]!==void 0&&H[R][z]!==C.charCodeAt(z)){Q=!1;break}if(Q===!0){re=J;break}}return re===t&&O!==t&&(re=O),re},s=function C(O){for(var R=this.internal.write,z=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:O.width}),Q.push({key:"Height",value:O.height}),O.colorSpace===g.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===g.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var J="",re=0,X=O.transparency.length;re<X;re++)J+=O.transparency[re]+" "+O.transparency[re]+" ";Q.push({key:"Mask",value:"["+J+"]"})}O.sMask!==void 0&&Q.push({key:"SMask",value:O.objectId+1+" 0 R"});var ee=O.filter!==void 0?["/"+O.filter]:void 0;if(z({data:O.data,additionalKeyValues:Q,alreadyAppliedFilters:ee,objectId:O.objectId}),R("endobj"),"sMask"in O&&O.sMask!==void 0){var W="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,T={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:W,data:O.sMask};"filter"in O&&(T.filter=O.filter),C.call(this,T)}if(O.colorSpace===g.INDEXED){var q=this.internal.newObject();z({data:P(new Uint8Array(O.palette)),objectId:q}),R("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var O in C)s.call(this,C[O])},o=function(){var C,O=this.internal.collections.addImage_images,R=this.internal.write;for(var z in O)R("/I"+(C=O[z]).index,C.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var C=this.internal.collections.addImage_images;return l.call(this),C},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(C){return typeof e["process"+C.toUpperCase()]=="function"},f=function(C){return Ta(C)==="object"&&C.nodeType===1},m=function(C,O){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var R=""+C.getAttribute("src");if(R.indexOf("data:image/")===0)return px(unescape(R).split("base64,").pop());var z=e.loadFile(R,!0);if(z!==void 0)return z}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var H;switch(O){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return px(C.toDataURL(H,1).split("base64,").pop())}},p=function(C){var O=this.internal.collections.addImage_images;if(O){for(var R in O)if(C===O[R].alias)return O[R]}},y=function(C,O,R){return C||O||(C=-96,O=-96),C<0&&(C=-1*R.width*72/C/this.internal.scaleFactor),O<0&&(O=-1*R.height*72/O/this.internal.scaleFactor),C===0&&(C=O*R.width/R.height),O===0&&(O=C*R.height/R.width),[C,O]},v=function(C,O,R,z,H,Q){var J=y.call(this,R,z,H),re=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,ee=c.call(this);if(R=J[0],z=J[1],ee[H.index]=H,Q){Q*=Math.PI/180;var W=Math.cos(Q),T=Math.sin(Q),q=function(B){return B.toFixed(4)},V=[q(W),q(T),q(-1*T),q(W),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,re(C),X(O+z),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([re(R),"0","0",re(z),"0","0","cm"].join(" "))):this.internal.write([re(R),"0","0",re(z),re(C),X(O+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(C){var O,R,z=0;if(typeof C=="string")for(R=C.length,O=0;O<R;O++)z=(z<<5)-z+C.charCodeAt(O),z|=0;else if(E(C))for(R=C.byteLength/2,O=0;O<R;O++)z=(z<<5)-z+C[O],z|=0;return z},j=e.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var O=!0;return C.length===0&&(O=!1),C.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(O=!1),O},N=e.__addimage__.extractImageFromDataUrl=function(C){var O=(C=C||"").split("base64,"),R=null;if(O.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(z)&&(R={mimeType:z[1],charset:z[2],data:O[1]})}return R},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(C){return S()&&C instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(C){return S()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(C){for(var O=C.length,R=new Uint8Array(O),z=0;z<O;z++)R[z]=C.charCodeAt(z);return R},P=e.__addimage__.arrayBufferToBinaryString=function(C){for(var O="",R=E(C)?C:new Uint8Array(C),z=0;z<R.length;z+=8192)O+=String.fromCharCode.apply(null,R.subarray(z,z+8192));return O};e.addImage=function(){var C,O,R,z,H,Q,J,re,X;if(typeof arguments[1]=="number"?(O=t,R=arguments[1],z=arguments[2],H=arguments[3],Q=arguments[4],J=arguments[5],re=arguments[6],X=arguments[7]):(O=arguments[1],R=arguments[2],z=arguments[3],H=arguments[4],Q=arguments[5],J=arguments[6],re=arguments[7],X=arguments[8]),Ta(C=arguments[0])==="object"&&!f(C)&&"imageData"in C){var ee=C;C=ee.imageData,O=ee.format||O||t,R=ee.x||R||0,z=ee.y||z||0,H=ee.w||ee.width||H,Q=ee.h||ee.height||Q,J=ee.alias||J,re=ee.compression||re,X=ee.rotation||ee.angle||X}var W=this.internal.getFilters();if(re===void 0&&W.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(R)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=I.call(this,C,O,J,re);return v.call(this,R,z,H,Q,T,X),this};var I=function(C,O,R,z){var H,Q,J;if(typeof C=="string"&&a(C)===t){C=unescape(C);var re=U(C,!1);(re!==""||(re=e.loadFile(C,!0))!==void 0)&&(C=re)}if(f(C)&&(C=m(C,O)),O=a(C,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((J=R)==null||J.length===0)&&(R=(function(X){return typeof X=="string"||E(X)?w(X):E(X.data)?w(X.data):null})(C)),(H=p.call(this,R))||(S()&&(C instanceof Uint8Array||O==="RGBA"||(Q=C,C=_(C))),H=this["process"+O.toUpperCase()](C,d.call(this),R,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:b.NONE})(z),Q)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},U=e.__addimage__.convertBase64ToBinaryString=function(C,O){var R;O=typeof O!="boolean"||O;var z,H="";if(typeof C=="string"){z=(R=N(C))!==null?R.data:C;try{H=px(z)}catch(Q){if(O)throw j(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(C){var O,R,z="";if(f(C)&&(C=m(C)),typeof C=="string"&&a(C)===t&&((z=U(C,!1))===""&&(z=e.loadFile(C)||""),C=z),R=a(C),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!S()||C instanceof Uint8Array||(C=_(C)),!(O=this["process"+R.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=R,O}})(cn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};cn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){a=d[m];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),w=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+p(b(a.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(b(w))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var N=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var S=this.annotations._nameMap[a.options.name];a.options.pageNumber=S.page,a.options.top=S.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var E=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+E+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(cn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var g=0,b=r,w="",j=0;for(g=0;g<v.length;g+=1)b[v.charCodeAt(g)]!==void 0?(j++,typeof(b=b[v.charCodeAt(g)])=="number"&&(w+=String.fromCharCode(b),b=r,j=0),g===v.length-1&&(b=r,w+=v.charAt(g-(j-1)),g-=j-1,j=0)):(b=r,w+=v.charAt(g-j),g-=j,j=0);return w};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(v,g,b){return o(v)?i(v)===!1?-1:!d(v)||!o(g)&&!o(b)||!o(b)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(b)&&d(b)?3:l(v)||!o(b)?1:2:-1},p=function(v){var g=0,b=0,w=0,j="",N="",S="",E=(v=v||"").split("\\s+"),_=[];for(g=0;g<E.length;g+=1){for(_.push(""),b=0;b<E[g].length;b+=1)j=E[g][b],N=E[g][b-1],S=E[g][b+1],o(j)?(w=m(j,N,S),_[g]+=w!==-1?String.fromCharCode(t[j.charCodeAt(0)][w]):j):_[g]+=j;_[g]=f(_[g])}return _.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var w=0;for(b=[],w=0;w<g.length;w+=1)Array.isArray(g[w])?b.push([p(g[w][0]),g[w][1],g[w][2]]):b.push([p(g[w])]);v=b}else v=p(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",y])})(cn.API),cn.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(cn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=d.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,N){return j.concat(g.splitTextToSize(N,b))}),[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(v=this.getStringUnitWidth(c[w],{font:f})*u)&&(p=v);return p!==0&&(y=c.length),{w:p/=m,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,m){if(a.call(this),!u)throw new Error("No data for PDF table.");var p,y,v,g,b=[],w=[],j=[],N={},S={},E=[],_=[],P=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,U=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,C=m.margins||Object.assign({width:this.getPageWidth()},t),O=typeof m.padding=="number"?m.padding:3,R=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=z,this.setFontSize(U),f==null)w=b=Object.keys(u[0]),j=b.map((function(){return"left"}));else if(Array.isArray(f)&&Ta(f[0])==="object")for(b=f.map((function(ee){return ee.name})),w=f.map((function(ee){return ee.prompt||ee.name||""})),j=f.map((function(ee){return ee.align||"left"})),p=0;p<f.length;p+=1)S[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=b=f,j=b.map((function(){return"left"})));if(P||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<b.length;p+=1){for(N[g=b[p]]=u.map((function(ee){return ee[g]})),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=N[g],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)E.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,E)+O+O,E=[]}if(I){var H={};for(p=0;p<b.length;p+=1)H[b[p]]={},H[b[p]].text=w[p],H[b[p]].align=j[p];var Q=l.call(this,H,S);_=b.map((function(ee){return new i(c,d,S[ee],Q,H[ee].text,void 0,H[ee].align)})),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var J=f.reduce((function(ee,W){return ee[W.name]=W.align,ee}),{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var re=l.call(this,u[p],S);for(v=0;v<b.length;v+=1){var X=u[p][b[v]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:v,data:X},this),o.call(this,new i(c,d,S[b[v]],re,X,p+2,J[b[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map((function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[p]-u-u)}),this).map((function(p){return this.getLineHeightFactor()*p.length*f/m+u+u}),this).reduce((function(p,y){return Math.max(p,y)}),0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}})(cn.API);var Y9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Q9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hk=X9(Q9),J9=[100,200,300,400,500,600,700,800,900],C1e=X9(J9);function Wk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return Y9[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Hk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function tD(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var E1e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function nD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function T1e(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},E1e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=Wk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+nD(i)+"' and default family '"+a+"'.");if(o=(function(c,d){if(d[c])return d[c];var u=Hk[c],f=u<=Hk.normal?-1:1,m=tD(d,Q9,u,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m})(i.stretch,o),o=(function(c,d){if(d[c])return d[c];for(var u=Y9[c],f=0;f<u.length;++f)if(d[u[f]])return d[u[f]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=C1e[c],f=tD(d,J9,u,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+nD(i)+"'.");return o}function aD(e){return e.trimLeft()}function O1e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function P1e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var qv,sD,iD,Rj=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=T;Object.defineProperty(this,"pdf",{get:function(){return q}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(le){V=!!le}});var B=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return B},set:function(le){B=!!le}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(le){isNaN(le)||(K=le)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(le){isNaN(le)||(oe=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var te;typeof le=="number"?te=[le,le,le,le]:((te=new Array(4))[0]=le[0],te[1]=le.length>=2?le[1]:te[0],te[2]=le.length>=3?le[2]:te[0],te[3]=le.length>=4?le[3]:te[1]),d.margin=te}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(le){me=le}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(le){se=le}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(le){de=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof u&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(le){Re=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var te;te=m(le),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var te=m(le);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var he=null;function Ue(le,te){if(he===null){var Se=(function(we){var Pe=[];return Object.keys(we).forEach((function(fe){we[fe].forEach((function(ue){var Ee=null;switch(ue){case"bold":Ee={family:fe,weight:"bold"};break;case"italic":Ee={family:fe,style:"italic"};break;case"bolditalic":Ee={family:fe,weight:"bold",style:"italic"};break;case"":case"normal":Ee={family:fe}}Ee!==null&&(Ee.ref={name:fe,style:ue},Pe.push(Ee))}))})),Pe})(le.getFontList());he=(function(we){for(var Pe={},fe=0;fe<we.length;++fe){var ue=Wk(we[fe]),Ee=ue.family,Ye=ue.stretch,xe=ue.style,ve=ue.weight;Pe[Ee]=Pe[Ee]||{},Pe[Ee][Ye]=Pe[Ee][Ye]||{},Pe[Ee][Ye][xe]=Pe[Ee][Ye][xe]||{},Pe[Ee][Ye][xe][ve]=ue}return Pe})(Se.concat(te))}return he}var Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(le){he=null,Oe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var te;if(this.ctx.font=le,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Se=te[1],we=(te[2],te[3]),Pe=te[4],fe=(te[5],te[6]),ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(ue==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:ue==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var Ee=(function(Be){var qe,Ze,Vt=[],Dt=Be.trim();if(Dt==="")return Rj;if(Dt in rD)return[rD[Dt]];for(;Dt!=="";){switch(Ze=null,qe=(Dt=aD(Dt)).charAt(0)){case'"':case"'":Ze=O1e(Dt.substring(1),qe);break;default:Ze=P1e(Dt)}if(Ze===null||(Vt.push(Ze[0]),(Dt=aD(Ze[1]))!==""&&Dt.charAt(0)!==","))return Rj;Dt=Dt.replace(/^,/,"")}return Vt})(fe);if(this.fontFaces){var Ye=T1e(Ue(this.pdf,this.fontFaces),Ee.map((function(Be){return{family:Be,stretch:"normal",weight:we,style:Se}})));this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var xe="";(we==="bold"||parseInt(we,10)>=700||Se==="bold")&&(xe="bold"),Se==="italic"&&(xe+="italic"),xe.length===0&&(xe="normal");for(var ve="",Fe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$e=0;$e<Ee.length;$e++){if(this.pdf.internal.getFont(Ee[$e],xe,{noFallback:!0,disableWarning:!0})!==void 0){ve=Ee[$e];break}if(xe==="bolditalic"&&this.pdf.internal.getFont(Ee[$e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ve=Ee[$e],xe="bold";else if(this.pdf.internal.getFont(Ee[$e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ve=Ee[$e],xe="normal";break}}if(ve===""){for(var _e=0;_e<Ee.length;_e++)if(Fe[Ee[_e]]){ve=Fe[Ee[_e]];break}}ve=ve===""?"Times":ve,this.pdf.setFont(ve,xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};f.prototype.setLineDash=function(T){this.lineDash=T},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(T,q){if(isNaN(T)||isNaN(q))throw Xa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(T,q));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(T,q)},f.prototype.closePath=function(){var T=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ta(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){T=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},f.prototype.lineTo=function(T,q){if(isNaN(T)||isNaN(q))throw Xa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(T,q));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(T,q,V,B){if(isNaN(V)||isNaN(B)||isNaN(T)||isNaN(q))throw Xa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(V,B)),oe=this.ctx.transform.applyToPoint(new o(T,q));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.bezierCurveTo=function(T,q,V,B,K,oe){if(isNaN(K)||isNaN(oe)||isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B))throw Xa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(K,oe)),se=this.ctx.transform.applyToPoint(new o(T,q)),de=this.ctx.transform.applyToPoint(new o(V,B));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:de.x,y2:de.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},f.prototype.arc=function(T,q,V,B,K,oe){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B)||isNaN(K))throw Xa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(T,q));T=me.x,q=me.y;var se=this.ctx.transform.applyToPoint(new o(0,V)),de=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(se.x-de.x,2)+Math.pow(se.y-de.y,2))}Math.abs(K-B)>=2*Math.PI&&(B=0,K=2*Math.PI),this.path.push({type:"arc",x:T,y:q,radius:V,startAngle:B,endAngle:K,counterclockwise:oe})},f.prototype.arcTo=function(T,q,V,B,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(T,q,V,B){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B))throw Xa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,q),this.lineTo(T+V,q),this.lineTo(T+V,q+B),this.lineTo(T,q+B),this.lineTo(T,q),this.lineTo(T+V,q),this.lineTo(T,q)},f.prototype.fillRect=function(T,q,V,B){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B))throw Xa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,q,V,B),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(T,q,V,B){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B))throw Xa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(T,q,V,B),this.stroke())},f.prototype.clearRect=function(T,q,V,B){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B))throw Xa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,q,V,B))},f.prototype.save=function(T){T=typeof T!="boolean"||T;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var B=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=B}},f.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(q),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(T){var q,V,B,K;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))q=0,V=0,B=0,K=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(oe!==null)q=parseInt(oe[1]),V=parseInt(oe[2]),B=parseInt(oe[3]),K=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)q=parseInt(oe[1]),V=parseInt(oe[2]),B=parseInt(oe[3]),K=parseFloat(oe[4]);else{if(K=1,typeof T=="string"&&T.charAt(0)!=="#"){var me=new z9(T);T=me.ok?me.toHex():"#000000"}T.length===4?(q=T.substring(1,2),q+=q,V=T.substring(2,3),V+=V,B=T.substring(3,4),B+=B):(q=T.substring(1,3),V=T.substring(3,5),B=T.substring(5,7)),q=parseInt(q,16),V=parseInt(V,16),B=parseInt(B,16)}}return{r:q,g:V,b:B,a:K,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(T,q,V,B){if(isNaN(q)||isNaN(V)||typeof T!="string")throw Xa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(B=isNaN(B)?void 0:B,!p.call(this)){var K=re(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;O.call(this,{text:T,x:q,y:V,scale:oe,angle:K,align:this.textAlign,maxWidth:B})}},f.prototype.strokeText=function(T,q,V,B){if(isNaN(q)||isNaN(V)||typeof T!="string")throw Xa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){B=isNaN(B)?void 0:B;var K=re(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;O.call(this,{text:T,x:q,y:V,scale:oe,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:B})}},f.prototype.measureText=function(T){if(typeof T!="string")throw Xa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,V=this.pdf.internal.scaleFactor,B=q.internal.getFontSize(),K=q.getStringUnitWidth(T)*B/q.internal.scaleFactor,oe=function(me){var se=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new oe({width:K*=Math.round(96*V/72*1e4)/1e4})},f.prototype.scale=function(T,q){if(isNaN(T)||isNaN(q))throw Xa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(T,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.rotate=function(T){if(isNaN(T))throw Xa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(T,q){if(isNaN(T)||isNaN(q))throw Xa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,T,q);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.transform=function(T,q,V,B,K,oe){if(isNaN(T)||isNaN(q)||isNaN(V)||isNaN(B)||isNaN(K)||isNaN(oe))throw Xa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(T,q,V,B,K,oe);this.ctx.transform=this.ctx.transform.multiply(me)},f.prototype.setTransform=function(T,q,V,B,K,oe){T=isNaN(T)?1:T,q=isNaN(q)?0:q,V=isNaN(V)?0:V,B=isNaN(B)?1:B,K=isNaN(K)?0:K,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(T,q,V,B,K,oe)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(T,q,V,B,K,oe,me,se,de){var Re=this.pdf.getImageProperties(T),he=1,Ue=1,Oe=1,le=1;B!==void 0&&se!==void 0&&(Oe=se/B,le=de/K,he=Re.width/B*se/B,Ue=Re.height/K*de/K),oe===void 0&&(oe=q,me=V,q=0,V=0),B!==void 0&&se===void 0&&(se=B,de=K),B===void 0&&se===void 0&&(se=Re.width,de=Re.height);for(var te,Se=this.ctx.transform.decompose(),we=re(Se.rotate.shx),Pe=new c,fe=(Pe=(Pe=(Pe=Pe.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale)).applyToRectangle(new l(oe-q*Oe,me-V*le,B*he,K*Ue)),ue=g.call(this,fe),Ee=[],Ye=0;Ye<ue.length;Ye+=1)Ee.indexOf(ue[Ye])===-1&&Ee.push(ue[Ye]);if(j(Ee),this.autoPaging)for(var xe=Ee[0],ve=Ee[Ee.length-1],Fe=xe;Fe<ve+1;Fe++){this.pdf.setPage(Fe);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_e=Fe===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Fe===1?0:Be+(Fe-2)*qe;if(this.ctx.clip_path.length!==0){var Vt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(te,this.posX+this.margin[3],-Ze+_e+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Vt}var Dt=JSON.parse(JSON.stringify(fe));Dt=w([Dt],this.posX+this.margin[3],-Ze+_e+this.ctx.prevPageLastElemOffset)[0];var dt=(Fe>xe||Fe<ve)&&v.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,qe,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Dt.x,Dt.y,Dt.w,Dt.h,null,null,we),dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,we)};var g=function(T,q,V){var B=[];q=q||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":B.push(Math.floor((T.y+K)/V)+1);break;case"arc":B.push(Math.floor((T.y+K-T.radius)/V)+1),B.push(Math.floor((T.y+K+T.radius)/V)+1);break;case"qct":var oe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);B.push(Math.floor((oe.y+K)/V)+1),B.push(Math.floor((oe.y+oe.h+K)/V)+1);break;case"bct":var me=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);B.push(Math.floor((me.y+K)/V)+1),B.push(Math.floor((me.y+me.h+K)/V)+1);break;case"rect":B.push(Math.floor((T.y+K)/V)+1),B.push(Math.floor((T.y+T.h+K)/V)+1)}for(var se=0;se<B.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<B[se];)b.call(this);return B},b=function(){var T=this.fillStyle,q=this.strokeStyle,V=this.font,B=this.lineCap,K=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=q,this.font=V,this.lineCap=B,this.lineWidth=K,this.lineJoin=oe},w=function(T,q,V){for(var B=0;B<T.length;B++)switch(T[B].type){case"bct":T[B].x2+=q,T[B].y2+=V;case"qct":T[B].x1+=q,T[B].y1+=V;default:T[B].x+=q,T[B].y+=V}return T},j=function(T){return T.sort((function(q,V){return q-V}))},N=function(T,q){for(var V,B,K=this.fillStyle,oe=this.strokeStyle,me=this.lineCap,se=this.lineWidth,de=Math.abs(se*this.ctx.transform.scaleX),Re=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Oe=[],le=0;le<Ue.length;le++)if(Ue[le].x!==void 0)for(var te=g.call(this,Ue[le]),Se=0;Se<te.length;Se+=1)Oe.indexOf(te[Se])===-1&&Oe.push(te[Se]);for(var we=0;we<Oe.length;we++)for(;this.pdf.internal.getNumberOfPages()<Oe[we];)b.call(this);if(j(Oe),this.autoPaging)for(var Pe=Oe[0],fe=Oe[Oe.length-1],ue=Pe;ue<fe+1;ue++){this.pdf.setPage(ue),this.fillStyle=K,this.strokeStyle=oe,this.lineCap=me,this.lineWidth=de,this.lineJoin=Re;var Ee=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=ue===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Fe=ue===1?0:xe+(ue-2)*ve;if(this.ctx.clip_path.length!==0){var $e=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(V,this.posX+this.margin[3],-Fe+Ye+this.ctx.prevPageLastElemOffset),S.call(this,T,!0),this.path=$e}if(B=JSON.parse(JSON.stringify(he)),this.path=w(B,this.posX+this.margin[3],-Fe+Ye+this.ctx.prevPageLastElemOffset),q===!1||ue===0){var _e=(ue>Pe||ue<fe)&&v.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ee,ve,null).clip().discardPath()),S.call(this,T,q),_e&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=de,S.call(this,T,q),this.lineWidth=se;this.path=he},S=function(T,q){if((T!=="stroke"||q||!y.call(this))&&(T==="stroke"||q||!p.call(this))){for(var V,B,K=[],oe=this.path,me=0;me<oe.length;me++){var se=oe[me];switch(se.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:se,deltas:[],abs:[]});break;case"lt":var de=K.length;if(oe[me-1]&&!isNaN(oe[me-1].x)&&(V=[se.x-oe[me-1].x,se.y-oe[me-1].y],de>0)){for(;de>=0;de--)if(K[de-1].close!==!0&&K[de-1].begin!==!0){K[de-1].deltas.push(V),K[de-1].abs.push(se);break}}break;case"bct":V=[se.x1-oe[me-1].x,se.y1-oe[me-1].y,se.x2-oe[me-1].x,se.y2-oe[me-1].y,se.x-oe[me-1].x,se.y-oe[me-1].y],K[K.length-1].deltas.push(V);break;case"qct":var Re=oe[me-1].x+2/3*(se.x1-oe[me-1].x),he=oe[me-1].y+2/3*(se.y1-oe[me-1].y),Ue=se.x+2/3*(se.x1-se.x),Oe=se.y+2/3*(se.y1-se.y),le=se.x,te=se.y;V=[Re-oe[me-1].x,he-oe[me-1].y,Ue-oe[me-1].x,Oe-oe[me-1].y,le-oe[me-1].x,te-oe[me-1].y],K[K.length-1].deltas.push(V);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(se)}}B=q?null:T==="stroke"?"stroke":"fill";for(var Se=!1,we=0;we<K.length;we++)if(K[we].arc)for(var Pe=K[we].abs,fe=0;fe<Pe.length;fe++){var ue=Pe[fe];ue.type==="arc"?P.call(this,ue.x,ue.y,ue.radius,ue.startAngle,ue.endAngle,ue.counterclockwise,void 0,q,!Se):R.call(this,ue.x,ue.y),Se=!0}else if(K[we].close===!0)this.pdf.internal.out("h"),Se=!1;else if(K[we].begin!==!0){var Ee=K[we].start.x,Ye=K[we].start.y;z.call(this,K[we].deltas,Ee,Ye),Se=!0}B&&I.call(this,B),q&&U.call(this)}},E=function(T){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-V;case"top":return T+q-V;case"hanging":return T+q-2*V;case"middle":return T+q/2-V;case"ideographic":return T;default:return T}},_=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(q,V){this.colorStops.push([q,V])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(T,q,V,B,K,oe,me,se,de){for(var Re=Q.call(this,V,B,K,oe),he=0;he<Re.length;he++){var Ue=Re[he];he===0&&(de?C.call(this,Ue.x1+T,Ue.y1+q):R.call(this,Ue.x1+T,Ue.y1+q)),H.call(this,T,q,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}se?U.call(this):I.call(this,me)},I=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(T,q){this.pdf.internal.out(r(T)+" "+a(q)+" m")},O=function(T){var q;switch(T.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var V=this.pdf.getTextDimensions(T.text),B=E.call(this,T.y),K=_.call(this,B)-V.h,oe=this.ctx.transform.applyToPoint(new o(T.x,B)),me=this.ctx.transform.decompose(),se=new c;se=(se=(se=se.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var de,Re,he,Ue=this.ctx.transform.applyToRectangle(new l(T.x,B,V.w,V.h)),Oe=se.applyToRectangle(new l(T.x,K,V.w,V.h)),le=g.call(this,Oe),te=[],Se=0;Se<le.length;Se+=1)te.indexOf(le[Se])===-1&&te.push(le[Se]);if(j(te),this.autoPaging)for(var we=te[0],Pe=te[te.length-1],fe=we;fe<Pe+1;fe++){this.pdf.setPage(fe);var ue=fe===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[2],xe=Ye-this.margin[0],ve=this.pdf.internal.pageSize.width-this.margin[1],Fe=ve-this.margin[3],$e=fe===1?0:Ee+(fe-2)*xe;if(this.ctx.clip_path.length!==0){var _e=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(de,this.posX+this.margin[3],-1*$e+ue),S.call(this,"fill",!0),this.path=_e}var Be=w([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-$e+ue+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*T.scale),he=this.lineWidth,this.lineWidth=he*T.scale);var qe=this.autoPaging!=="text";if(qe||Be.y+Be.h<=Ye){if(qe||Be.y>=ue&&Be.x<=ve){var Ze=qe?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||ve-Be.x)[0],Vt=w([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-$e+ue+this.ctx.prevPageLastElemOffset)[0],Dt=qe&&(fe>we||fe<Pe)&&v.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,xe,null).clip().discardPath()),this.pdf.text(Ze,Vt.x,Vt.y,{angle:T.angle,align:q,renderingMode:T.renderingMode}),Dt&&this.pdf.restoreGraphicsState()}}else Be.y<Ye&&(this.ctx.prevPageLastElemOffset+=Ye-Be.y);T.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=he)}else T.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*T.scale),he=this.lineWidth,this.lineWidth=he*T.scale),this.pdf.text(T.text,oe.x+this.posX,oe.y+this.posY,{angle:T.angle,align:q,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=he)},R=function(T,q,V,B){V=V||0,B=B||0,this.pdf.internal.out(r(T+V)+" "+a(q+B)+" l")},z=function(T,q,V){return this.pdf.lines(T,q,V,null,null)},H=function(T,q,V,B,K,oe,me,se){this.pdf.internal.out([t(s(V+T)),t(i(B+q)),t(s(K+T)),t(i(oe+q)),t(s(me+T)),t(i(se+q)),"c"].join(" "))},Q=function(T,q,V,B){for(var K=2*Math.PI,oe=Math.PI/2;q>V;)q-=K;var me=Math.abs(V-q);me<K&&B&&(me=K-me);for(var se=[],de=B?-1:1,Re=q;me>1e-5;){var he=Re+de*Math.min(me,oe);se.push(J.call(this,T,Re,he)),me-=Math.abs(he-Re),Re=he}return se},J=function(T,q,V){var B=(V-q)/2,K=T*Math.cos(B),oe=T*Math.sin(B),me=K,se=-oe,de=me*me+se*se,Re=de+me*K+se*oe,he=4/3*(Math.sqrt(2*de*Re)-Re)/(me*oe-se*K),Ue=me-he*se,Oe=se+he*me,le=Ue,te=-Oe,Se=B+q,we=Math.cos(Se),Pe=Math.sin(Se);return{x1:T*Math.cos(q),y1:T*Math.sin(q),x2:Ue*we-Oe*Pe,y2:Ue*Pe+Oe*we,x3:le*we-te*Pe,y3:le*Pe+te*we,x4:T*Math.cos(V),y4:T*Math.sin(V)}},re=function(T){return 180*T/Math.PI},X=function(T,q,V,B,K,oe){var me=T+.5*(V-T),se=q+.5*(B-q),de=K+.5*(V-K),Re=oe+.5*(B-oe),he=Math.min(T,K,me,de),Ue=Math.max(T,K,me,de),Oe=Math.min(q,oe,se,Re),le=Math.max(q,oe,se,Re);return new l(he,Oe,Ue-he,le-Oe)},ee=function(T,q,V,B,K,oe,me,se){var de,Re,he,Ue,Oe,le,te,Se,we,Pe,fe,ue,Ee,Ye,xe=V-T,ve=B-q,Fe=K-V,$e=oe-B,_e=me-K,Be=se-oe;for(Re=0;Re<41;Re++)we=(te=(he=T+(de=Re/40)*xe)+de*((Oe=V+de*Fe)-he))+de*(Oe+de*(K+de*_e-Oe)-te),Pe=(Se=(Ue=q+de*ve)+de*((le=B+de*$e)-Ue))+de*(le+de*(oe+de*Be-le)-Se),Re==0?(fe=we,ue=Pe,Ee=we,Ye=Pe):(fe=Math.min(fe,we),ue=Math.min(ue,Pe),Ee=Math.max(Ee,we),Ye=Math.max(Ye,Pe));return new l(Math.round(fe),Math.round(ue),Math.round(Ee-fe),Math.round(Ye-ue))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,q,V=(T=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:q}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(cn.API),(function(e){var t=function(i){var o,l,c,d,u,f,m,p,y,v;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(u=((u=((u=((u=(u-(v=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,l.push(f+33,m+33,p+33,y+33,v+33)):l.push(122);return(function(g,b){for(var w=b;w>0;w--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,f=String,m="length",p=255,y="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[v](i[m]%5||5))[m];u>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return(function(b,w){for(var j=w;j>0;j--)b.pop()})(c,o[m]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Bk(o)).reduce((function(c,d){return c+String.fromCharCode(d)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(cn.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var f=new XMLHttpRequest,m=0,p=function(y){var v=y.length,g=[],b=String.fromCharCode;for(m=0;m<v;m+=1)g.push(b(255&y.charCodeAt(m)));return g.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(p(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return p(f.responseText)})(s,i,o)}catch{}return l})(t,r,a)},e.loadImageFile=e.loadFile})(cn.API),(function(e){function t(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):n1(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):n1(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var a=function(o){var l=Ta(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(c(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",(function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var p=d[m],y=p.src.find((function(v){return v.format==="truetype"}));y&&c.addFont(y.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then((function(){(o=o||cn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(f){return c.updateProgress(null,d),f})).then(d,u).then((function(f){return c.updateProgress(1),f}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,cn.getPageSize=function(o,l,c){if(Ta(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,f=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,y=0,v=0;if(m.hasOwnProperty(f))y=m[f][1]/u,v=m[f][0]/u;else try{y=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>y&&(p=v,v=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Wk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(cn.API),cn.API.addJS=function(e){return iD=e,this.internal.events.subscribe("postPutResources",(function(){qv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),sD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+iD+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){qv!==void 0&&sD!==void 0&&this.internal.out("/Names <</JavaScript "+qv+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(cn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(f){for(var m,p=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,v={width:0,height:0,numcomponents:1},g=4;g<y;g+=2){if(g+=p,t.indexOf(f.charCodeAt(g+1))!==-1){m=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),v={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:m,numcomponents:f.charCodeAt(g+9)};break}p=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}})(cn.API);var lp,$v,oD,lD,cD,I1e=(function(){var e,t,r;function a(i){var o,l,c,d,u,f,m,p,y,v,g,b,w,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),y=(function(){var N,S;for(S=[],N=0;N<4;++N)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*u/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=f?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(w=0;0<=v?w<v:w>v;0<=v?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(g=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,g.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,g.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,m,p,y){var v,g,b,w,j,N,S,E,_,P,I,U,C,O,R,z,H,Q,J,re,X,ee=Math.ceil((d.width-f)/p),W=Math.ceil((d.height-m)/y),T=d.width==ee&&d.height==W;for(O=o*ee,U=T?l:new Uint8Array(O*W),N=i.length,C=0,g=0;C<W&&c<N;){switch(i[c++]){case 0:for(w=H=0;H<O;w=H+=1)U[g++]=i[c++];break;case 1:for(w=Q=0;Q<O;w=Q+=1)v=i[c++],j=w<o?0:U[g-o],U[g++]=(v+j)%256;break;case 2:for(w=J=0;J<O;w=J+=1)v=i[c++],b=(w-w%o)/o,R=C&&U[(C-1)*O+b*o+w%o],U[g++]=(R+v)%256;break;case 3:for(w=re=0;re<O;w=re+=1)v=i[c++],b=(w-w%o)/o,j=w<o?0:U[g-o],R=C&&U[(C-1)*O+b*o+w%o],U[g++]=(v+Math.floor((j+R)/2))%256;break;case 4:for(w=X=0;X<O;w=X+=1)v=i[c++],b=(w-w%o)/o,j=w<o?0:U[g-o],C===0?R=z=0:(R=U[(C-1)*O+b*o+w%o],z=b&&U[(C-1)*O+(b-1)*o+w%o]),S=j+R-z,E=Math.abs(S-j),P=Math.abs(S-R),I=Math.abs(S-z),_=E<=P&&E<=I?j:P<=I?R:z,U[g++]=(v+_)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!T){var q=((m+C*y)*d.width+f)*o,V=C*O;for(w=0;w<ee;w+=1){for(var B=0;B<o;B+=1)l[q++]=U[V++];q+=(p-1)*o}}C++}}return i=u1e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,f,m,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=f=0,m=l.length;f<m;o=f+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,f,m,p,y,v,g,b;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,f=v||o,u=m=0,c===1)for(;u<y;)p=v?4*o[u/4]:m,g=f[p++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?f[p++]:255,m=p;else for(;u<y;)p=v?4*o[u/4]:m,d[u++]=f[p++],d[u++]=f[p++],d[u++]=f[p++],d[u++]=l?f[p++]:255,m=p},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(dn)==="[object Window]"){try{t=dn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,f,m,p;if(this.animation){for(p=[],l=u=0,f=(m=this.animation.frames).length;u<f;l=++u)o=m[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,f,m=this;return l=0,f=this.animation,d=f.numFrames,c=f.frames,u=f.numPlays,(o=function(){var p,y;if(p=l++%d,y=c[p],m.renderFrame(i,p),d>1&&l/d<u)return m.animation._timeout=setTimeout(o,y.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a})();function D1e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,m=null,p=0,y=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,m=e[t++],(1&v)==0&&(m=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,N=e[t++],S=N>>6&1,E=1<<(7&N)+1,_=l,P=c,I=!1;N>>7&&(I=!0,_=t,P=E,t+=3*E);var U=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}u.push({x:g,y:b,width:w,height:j,has_local_palette:I,palette_offset:_,palette_size:P,data_offset:U,data_length:t-U,transparent_index:m,interlaced:!!S,delay:f,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,R){var z=this.frameInfo(O),H=z.width*z.height,Q=new Uint8Array(H);dD(e,z.data_offset,Q,H);var J=z.palette_offset,re=z.transparent_index;re===null&&(re=256);var X=z.width,ee=r-X,W=X,T=4*(z.y*r+z.x),q=4*((z.y+z.height)*r+z.x),V=T,B=4*ee;z.interlaced===!0&&(B+=4*r*7);for(var K=8,oe=0,me=Q.length;oe<me;++oe){var se=Q[oe];if(W===0&&(W=X,(V+=B)>=q&&(B=4*ee+4*r*(K-1),V=T+(X+ee)*(K<<1),K>>=1)),se===re)V+=4;else{var de=e[J+3*se],Re=e[J+3*se+1],he=e[J+3*se+2];R[V++]=he,R[V++]=Re,R[V++]=de,R[V++]=255}--W}},this.decodeAndBlitFrameRGBA=function(O,R){var z=this.frameInfo(O),H=z.width*z.height,Q=new Uint8Array(H);dD(e,z.data_offset,Q,H);var J=z.palette_offset,re=z.transparent_index;re===null&&(re=256);var X=z.width,ee=r-X,W=X,T=4*(z.y*r+z.x),q=4*((z.y+z.height)*r+z.x),V=T,B=4*ee;z.interlaced===!0&&(B+=4*r*7);for(var K=8,oe=0,me=Q.length;oe<me;++oe){var se=Q[oe];if(W===0&&(W=X,(V+=B)>=q&&(B=4*ee+4*r*(K-1),V=T+(X+ee)*(K<<1),K>>=1)),se===re)V+=4;else{var de=e[J+3*se],Re=e[J+3*se+1],he=e[J+3*se+2];R[V++]=de,R[V++]=Re,R[V++]=he,R[V++]=255}--W}}}function dD(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,f=0,m=0,p=e[t++],y=new Int32Array(4096),v=null;;){for(;u<16&&p!==0;)f|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var g=f&d;if(f>>=c,u-=c,g!==i){if(g===o)break;for(var b=g<l?g:v,w=0,j=b;j>i;)j=y[j]>>8,++w;var N=j;if(m+w+(b!==g?1:0)>a)return void Xa.log("Warning, gif stream longer than expected.");r[m++]=N;var S=m+=w;for(b!==g&&(r[m++]=N),j=b;w--;)j=y[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(y[l++]=v<<8|N,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=s+1))-1,v=null}return m!==a&&Xa.log("Warning, gif stream shorter than expected."),r}function Bj(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),m=new Array(65535),p=new Array(64),y=new Array(64),v=[],g=0,b=7,w=new Array(64),j=new Array(64),N=new Array(64),S=new Array(256),E=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(T,q){for(var V=0,B=0,K=new Array,oe=1;oe<=16;oe++){for(var me=1;me<=T[oe];me++)K[q[B]]=[],K[q[B]][0]=V,K[q[B]][1]=oe,B++,V++;V*=2}return K}function J(T){for(var q=T[0],V=T[1]-1;V>=0;)q&1<<V&&(g|=1<<b),V--,--b<0&&(g==255?(re(255),re(0)):re(g),b=7,g=0)}function re(T){v.push(T)}function X(T){re(T>>8&255),re(255&T)}function ee(T,q,V,B,K){for(var oe,me=K[0],se=K[240],de=(function(Pe,fe){var ue,Ee,Ye,xe,ve,Fe,$e,_e,Be,qe,Ze=0;for(Be=0;Be<8;++Be){ue=Pe[Ze],Ee=Pe[Ze+1],Ye=Pe[Ze+2],xe=Pe[Ze+3],ve=Pe[Ze+4],Fe=Pe[Ze+5],$e=Pe[Ze+6];var Vt=ue+(_e=Pe[Ze+7]),Dt=ue-_e,dt=Ee+$e,Tt=Ee-$e,Ht=Ye+Fe,Ve=Ye-Fe,jt=xe+ve,gr=xe-ve,nr=Vt+jt,Ar=Vt-jt,Ir=dt+Ht,Xt=dt-Ht;Pe[Ze]=nr+Ir,Pe[Ze+4]=nr-Ir;var Qt=.707106781*(Xt+Ar);Pe[Ze+2]=Ar+Qt,Pe[Ze+6]=Ar-Qt;var mr=.382683433*((nr=gr+Ve)-(Xt=Tt+Dt)),Fr=.5411961*nr+mr,fn=1.306562965*Xt+mr,Br=.707106781*(Ir=Ve+Tt),Qr=Dt+Br,ir=Dt-Br;Pe[Ze+5]=ir+Fr,Pe[Ze+3]=ir-Fr,Pe[Ze+1]=Qr+fn,Pe[Ze+7]=Qr-fn,Ze+=8}for(Ze=0,Be=0;Be<8;++Be){ue=Pe[Ze],Ee=Pe[Ze+8],Ye=Pe[Ze+16],xe=Pe[Ze+24],ve=Pe[Ze+32],Fe=Pe[Ze+40],$e=Pe[Ze+48];var qn=ue+(_e=Pe[Ze+56]),an=ue-_e,wn=Ee+$e,Tr=Ee-$e,zr=Ye+Fe,ne=Ye-Fe,je=xe+ve,ke=xe-ve,ie=qn+je,ge=qn-je,Ae=wn+zr,Ge=wn-zr;Pe[Ze]=ie+Ae,Pe[Ze+32]=ie-Ae;var rt=.707106781*(Ge+ge);Pe[Ze+16]=ge+rt,Pe[Ze+48]=ge-rt;var Qe=.382683433*((ie=ke+ne)-(Ge=Tr+an)),tt=.5411961*ie+Qe,Ke=1.306562965*Ge+Qe,Le=.707106781*(Ae=ne+Tr),st=an+Le,mt=an-Le;Pe[Ze+40]=mt+tt,Pe[Ze+24]=mt-tt,Pe[Ze+8]=st+Ke,Pe[Ze+56]=st-Ke,Ze++}for(Be=0;Be<64;++Be)qe=Pe[Be]*fe[Be],p[Be]=qe>0?qe+.5|0:qe-.5|0;return p})(T,q),Re=0;Re<64;++Re)y[_[Re]]=de[Re];var he=y[0]-V;V=y[0],he==0?J(B[0]):(J(B[m[oe=32767+he]]),J(f[oe]));for(var Ue=63;Ue>0&&y[Ue]==0;)Ue--;if(Ue==0)return J(me),V;for(var Oe,le=1;le<=Ue;){for(var te=le;y[le]==0&&le<=Ue;)++le;var Se=le-te;if(Se>=16){Oe=Se>>4;for(var we=1;we<=Oe;++we)J(se);Se&=15}oe=32767+y[le],J(K[(Se<<4)+m[oe]]),J(f[oe]),le++}return Ue!=63&&J(me),V}function W(T){T=Math.min(Math.max(T,1),100),i!=T&&((function(q){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],B=0;B<64;B++){var K=o((V[B]*q+50)/100);K=Math.min(Math.max(K,1),255),l[_[B]]=K}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var se=o((oe[me]*q+50)/100);se=Math.min(Math.max(se,1),255),c[_[me]]=se}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,he=0;he<8;he++)for(var Ue=0;Ue<8;Ue++)d[Re]=1/(l[_[Re]]*de[he]*de[Ue]*8),u[Re]=1/(c[_[Re]]*de[he]*de[Ue]*8),Re++})(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),i=T)}this.encode=function(T,q){q&&W(q),v=new Array,g=0,b=7,X(65496),X(65504),X(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),X(1),X(1),re(0),re(0),(function(){X(65499),X(132),re(0);for(var Ee=0;Ee<64;Ee++)re(l[Ee]);re(1);for(var Ye=0;Ye<64;Ye++)re(c[Ye])})(),(function(Ee,Ye){X(65472),X(17),re(8),X(Ye),X(Ee),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(T.width,T.height),(function(){X(65476),X(418),re(0);for(var Ee=0;Ee<16;Ee++)re(P[Ee+1]);for(var Ye=0;Ye<=11;Ye++)re(I[Ye]);re(16);for(var xe=0;xe<16;xe++)re(U[xe+1]);for(var ve=0;ve<=161;ve++)re(C[ve]);re(1);for(var Fe=0;Fe<16;Fe++)re(O[Fe+1]);for(var $e=0;$e<=11;$e++)re(R[$e]);re(17);for(var _e=0;_e<16;_e++)re(z[_e+1]);for(var Be=0;Be<=161;Be++)re(H[Be])})(),X(65498),X(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var V=0,B=0,K=0;g=0,b=7,this.encode.displayName="_encode_";for(var oe,me,se,de,Re,he,Ue,Oe,le,te=T.data,Se=T.width,we=T.height,Pe=4*Se,fe=0;fe<we;){for(oe=0;oe<Pe;){for(Re=Pe*fe+oe,Ue=-1,Oe=0,le=0;le<64;le++)he=Re+(Oe=le>>3)*Pe+(Ue=4*(7&le)),fe+Oe>=we&&(he-=Pe*(fe+1+Oe-we)),oe+Ue>=Pe&&(he-=oe+Ue-Pe+4),me=te[he++],se=te[he++],de=te[he++],w[le]=(E[me]+E[se+256>>0]+E[de+512>>0]>>16)-128,j[le]=(E[me+768>>0]+E[se+1024>>0]+E[de+1280>>0]>>16)-128,N[le]=(E[me+1280>>0]+E[se+1536>>0]+E[de+1792>>0]>>16)-128;V=ee(w,d,V,t,a),B=ee(j,u,B,r,s),K=ee(N,u,K,r,s),oe+=32}fe+=8}if(b>=0){var ue=[];ue[1]=b+1,ue[0]=(1<<b+1)-1,J(ue)}return X(65497),new Uint8Array(v)},e=e||50,(function(){for(var T=String.fromCharCode,q=0;q<256;q++)S[q]=T(q)})(),t=Q(P,I),r=Q(O,R),a=Q(U,C),s=Q(z,H),(function(){for(var T=1,q=2,V=1;V<=15;V++){for(var B=T;B<q;B++)m[32767+B]=V,f[32767+B]=[],f[32767+B][1]=V,f[32767+B][0]=B;for(var K=-(q-1);K<=-T;K++)m[32767+K]=V,f[32767+K]=[],f[32767+K][1]=V,f[32767+K][0]=q-1+K;T<<=1,q<<=1}})(),(function(){for(var T=0;T<256;T++)E[T]=19595*T,E[T+256>>0]=38470*T,E[T+512>>0]=7471*T+32768,E[T+768>>0]=-11059*T,E[T+1024>>0]=-21709*T,E[T+1280>>0]=32768*T+8421375,E[T+1536>>0]=-27439*T,E[T+1792>>0]=-5329*T})(),W(e)}function Md(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uD(e){function t(P){if(!P)throw Error("assert :P")}function r(P,I,U){for(var C=0;4>C;C++)if(P[I+C]!=U.charCodeAt(C))return!0;return!1}function a(P,I,U,C,O){for(var R=0;R<O;R++)P[I+R]=U[C+R]}function s(P,I,U,C){for(var O=0;O<C;O++)P[I+O]=U}function i(P){return new Int32Array(P)}function o(P,I){for(var U=[],C=0;C<P;C++)U.push(new I);return U}function l(P,I){var U=[];return(function C(O,R,z){for(var H=z[R],Q=0;Q<H&&(O.push(z.length>R+1?[]:new I),!(z.length<R+1));Q++)C(O[Q],R+1,z)})(U,0,P),U}var c=function(){var P=this;function I(A,M){for(var Z=1<<M-1>>>0;A&Z;)Z>>>=1;return Z?(A&Z-1)+Z:A}function U(A,M,Z,ce,ye){t(!(ce%Z));do A[M+(ce-=Z)]=ye;while(0<ce)}function C(A,M,Z,ce,ye){if(t(2328>=ye),512>=ye)var Ce=i(512);else if((Ce=i(ye))==null)return 0;return(function(Ie,De,Me,ze,at,gt){var vt,ht,qt=De,St=1<<Me,ct=i(16),it=i(16);for(t(at!=0),t(ze!=null),t(Ie!=null),t(0<Me),ht=0;ht<at;++ht){if(15<ze[ht])return 0;++ct[ze[ht]]}if(ct[0]==at)return 0;for(it[1]=0,vt=1;15>vt;++vt){if(ct[vt]>1<<vt)return 0;it[vt+1]=it[vt]+ct[vt]}for(ht=0;ht<at;++ht)vt=ze[ht],0<ze[ht]&&(gt[it[vt]++]=ht);if(it[15]==1)return(ze=new O).g=0,ze.value=gt[0],U(Ie,qt,1,St,ze),St;var Ct,At=-1,Mt=St-1,dr=0,rr=1,$r=1,fr=1<<Me;for(ht=0,vt=1,at=2;vt<=Me;++vt,at<<=1){if(rr+=$r<<=1,0>($r-=ct[vt]))return 0;for(;0<ct[vt];--ct[vt])(ze=new O).g=vt,ze.value=gt[ht++],U(Ie,qt+dr,at,fr,ze),dr=I(dr,vt)}for(vt=Me+1,at=2;15>=vt;++vt,at<<=1){if(rr+=$r<<=1,0>($r-=ct[vt]))return 0;for(;0<ct[vt];--ct[vt]){if(ze=new O,(dr&Mt)!=At){for(qt+=fr,Ct=1<<(At=vt)-Me;15>At&&!(0>=(Ct-=ct[At]));)++At,Ct<<=1;St+=fr=1<<(Ct=At-Me),Ie[De+(At=dr&Mt)].g=Ct+Me,Ie[De+At].value=qt-De-At}ze.g=vt-Me,ze.value=gt[ht++],U(Ie,qt+(dr>>Me),at,fr,ze),dr=I(dr,vt)}}return rr!=2*it[15]-1?0:St})(A,M,Z,ce,ye,Ce)}function O(){this.value=this.g=0}function R(){this.value=this.g=0}function z(){this.G=o(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Sa,R)}function H(A,M,Z,ce){t(A!=null),t(M!=null),t(2147483648>ce),A.Ca=254,A.I=0,A.b=-8,A.Ka=0,A.oa=M,A.pa=Z,A.Jd=M,A.Yc=Z+ce,A.Zc=4<=ce?Z+ce-4+1:Z,oe(A)}function Q(A,M){for(var Z=0;0<M--;)Z|=se(A,128)<<M;return Z}function J(A,M){var Z=Q(A,M);return me(A)?-Z:Z}function re(A,M,Z,ce){var ye,Ce=0;for(t(A!=null),t(M!=null),t(4294967288>ce),A.Sb=ce,A.Ra=0,A.u=0,A.h=0,4<ce&&(ce=4),ye=0;ye<ce;++ye)Ce+=M[Z+ye]<<8*ye;A.Ra=Ce,A.bb=ce,A.oa=M,A.pa=Z}function X(A){for(;8<=A.u&&A.bb<A.Sb;)A.Ra>>>=8,A.Ra+=A.oa[A.pa+A.bb]<<Za-8>>>0,++A.bb,A.u-=8;V(A)&&(A.h=1,A.u=0)}function ee(A,M){if(t(0<=M),!A.h&&M<=hl){var Z=q(A)&vo[M];return A.u+=M,X(A),Z}return A.h=1,A.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(A){return A.Ra>>>(A.u&Za-1)>>>0}function V(A){return t(A.bb<=A.Sb),A.h||A.bb==A.Sb&&A.u>Za}function B(A,M){A.u=M,A.h=V(A)}function K(A){A.u>=Ac&&(t(A.u>=Ac),X(A))}function oe(A){t(A!=null&&A.oa!=null),A.pa<A.Zc?(A.I=(A.oa[A.pa++]|A.I<<8)>>>0,A.b+=8):(t(A!=null&&A.oa!=null),A.pa<A.Yc?(A.b+=8,A.I=A.oa[A.pa++]|A.I<<8):A.Ka?A.b=0:(A.I<<=8,A.b+=8,A.Ka=1))}function me(A){return Q(A,1)}function se(A,M){var Z=A.Ca;0>A.b&&oe(A);var ce=A.b,ye=Z*M>>>8,Ce=(A.I>>>ce>ye)+0;for(Ce?(Z-=ye,A.I-=ye+1<<ce>>>0):Z=ye+1,ce=Z,ye=0;256<=ce;)ye+=8,ce>>=8;return ce=7^ye+on[ce],A.b-=ce,A.Ca=(Z<<ce)-1,Ce}function de(A,M,Z){A[M+0]=Z>>24&255,A[M+1]=Z>>16&255,A[M+2]=Z>>8&255,A[M+3]=Z>>0&255}function Re(A,M){return A[M+0]<<0|A[M+1]<<8}function he(A,M){return Re(A,M)|A[M+2]<<16}function Ue(A,M){return Re(A,M)|Re(A,M+2)<<16}function Oe(A,M){var Z=1<<M;return t(A!=null),t(0<M),A.X=i(Z),A.X==null?0:(A.Mb=32-M,A.Xa=M,1)}function le(A,M){t(A!=null),t(M!=null),t(A.Xa==M.Xa),a(M.X,0,A.X,0,1<<M.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Se(A,M,Z,ce){t(Z!=null),t(ce!=null);var ye=Z[0],Ce=ce[0];return ye==0&&(ye=(A*Ce+M/2)/M),Ce==0&&(Ce=(M*ye+A/2)/A),0>=ye||0>=Ce?0:(Z[0]=ye,ce[0]=Ce,1)}function we(A,M){return A+(1<<M)-1>>>M}function Pe(A,M){return((4278255360&A)+(4278255360&M)>>>0&4278255360)+((16711935&A)+(16711935&M)>>>0&16711935)>>>0}function fe(A,M){P[M]=function(Z,ce,ye,Ce,Ie,De,Me){var ze;for(ze=0;ze<Ie;++ze){var at=P[A](De[Me+ze-1],ye,Ce+ze);De[Me+ze]=Pe(Z[ce+ze],at)}}}function ue(){this.ud=this.hd=this.jd=0}function Ee(A,M){return((4278124286&(A^M))>>>1)+(A&M)>>>0}function Ye(A){return 0<=A&&256>A?A:0>A?0:255<A?255:void 0}function xe(A,M){return Ye(A+(A-M+.5>>1))}function ve(A,M,Z){return Math.abs(M-Z)-Math.abs(A-Z)}function Fe(A,M,Z,ce,ye,Ce,Ie){for(ce=Ce[Ie-1],Z=0;Z<ye;++Z)Ce[Ie+Z]=ce=Pe(A[M+Z],ce)}function $e(A,M,Z,ce,ye){var Ce;for(Ce=0;Ce<Z;++Ce){var Ie=A[M+Ce],De=Ie>>8&255,Me=16711935&(Me=(Me=16711935&Ie)+((De<<16)+De));ce[ye+Ce]=(4278255360&Ie)+Me>>>0}}function _e(A,M){M.jd=A>>0&255,M.hd=A>>8&255,M.ud=A>>16&255}function Be(A,M,Z,ce,ye,Ce){var Ie;for(Ie=0;Ie<ce;++Ie){var De=M[Z+Ie],Me=De>>>8,ze=De,at=255&(at=(at=De>>>16)+((A.jd<<24>>24)*(Me<<24>>24)>>>5));ze=255&(ze=(ze=ze+((A.hd<<24>>24)*(Me<<24>>24)>>>5))+((A.ud<<24>>24)*(at<<24>>24)>>>5)),ye[Ce+Ie]=(4278255360&De)+(at<<16)+ze}}function qe(A,M,Z,ce,ye){P[M]=function(Ce,Ie,De,Me,ze,at,gt,vt,ht){for(Me=gt;Me<vt;++Me)for(gt=0;gt<ht;++gt)ze[at++]=ye(De[ce(Ce[Ie++])])},P[A]=function(Ce,Ie,De,Me,ze,at,gt){var vt=8>>Ce.b,ht=Ce.Ea,qt=Ce.K[0],St=Ce.w;if(8>vt)for(Ce=(1<<Ce.b)-1,St=(1<<vt)-1;Ie<De;++Ie){var ct,it=0;for(ct=0;ct<ht;++ct)ct&Ce||(it=ce(Me[ze++])),at[gt++]=ye(qt[it&St]),it>>=vt}else P["VP8LMapColor"+Z](Me,ze,qt,St,at,gt,Ie,De,ht)}}function Ze(A,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ce=A[M++];ce[ye++]=Ce>>16&255,ce[ye++]=Ce>>8&255,ce[ye++]=Ce>>0&255}}function Vt(A,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ce=A[M++];ce[ye++]=Ce>>16&255,ce[ye++]=Ce>>8&255,ce[ye++]=Ce>>0&255,ce[ye++]=Ce>>24&255}}function Dt(A,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ce=(Ie=A[M++])>>16&240|Ie>>12&15,Ie=Ie>>0&240|Ie>>28&15;ce[ye++]=Ce,ce[ye++]=Ie}}function dt(A,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ce=(Ie=A[M++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;ce[ye++]=Ce,ce[ye++]=Ie}}function Tt(A,M,Z,ce,ye){for(Z=M+Z;M<Z;){var Ce=A[M++];ce[ye++]=Ce>>0&255,ce[ye++]=Ce>>8&255,ce[ye++]=Ce>>16&255}}function Ht(A,M,Z,ce,ye,Ce){if(Ce==0)for(Z=M+Z;M<Z;)de(ce,((Ce=A[M++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),ye+=32;else a(ce,ye,A,M,Z)}function Ve(A,M){P[M][0]=P[A+"0"],P[M][1]=P[A+"1"],P[M][2]=P[A+"2"],P[M][3]=P[A+"3"],P[M][4]=P[A+"4"],P[M][5]=P[A+"5"],P[M][6]=P[A+"6"],P[M][7]=P[A+"7"],P[M][8]=P[A+"8"],P[M][9]=P[A+"9"],P[M][10]=P[A+"10"],P[M][11]=P[A+"11"],P[M][12]=P[A+"12"],P[M][13]=P[A+"13"],P[M][14]=P[A+"0"],P[M][15]=P[A+"0"]}function jt(A){return A==Ec||A==bd||A==lu||A==Vu}function gr(){this.eb=[],this.size=this.A=this.fb=0}function nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ar(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gr,this.f.kb=new nr,this.sd=null}function Ir(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qt(A){return alert("todo:WebPSamplerProcessPlane"),A.T}function mr(A,M){var Z=A.T,ce=M.ba.f.RGBA,ye=ce.eb,Ce=ce.fb+A.ka*ce.A,Ie=Qi[M.ba.S],De=A.y,Me=A.O,ze=A.f,at=A.N,gt=A.ea,vt=A.W,ht=M.cc,qt=M.dc,St=M.Mc,ct=M.Nc,it=A.ka,Ct=A.ka+A.T,At=A.U,Mt=At+1>>1;for(it==0?Ie(De,Me,null,null,ze,at,gt,vt,ze,at,gt,vt,ye,Ce,null,null,At):(Ie(M.ec,M.fc,De,Me,ht,qt,St,ct,ze,at,gt,vt,ye,Ce-ce.A,ye,Ce,At),++Z);it+2<Ct;it+=2)ht=ze,qt=at,St=gt,ct=vt,at+=A.Rc,vt+=A.Rc,Ce+=2*ce.A,Ie(De,(Me+=2*A.fa)-A.fa,De,Me,ht,qt,St,ct,ze,at,gt,vt,ye,Ce-ce.A,ye,Ce,At);return Me+=A.fa,A.j+Ct<A.o?(a(M.ec,M.fc,De,Me,At),a(M.cc,M.dc,ze,at,Mt),a(M.Mc,M.Nc,gt,vt,Mt),Z--):1&Ct||Ie(De,Me,null,null,ze,at,gt,vt,ze,at,gt,vt,ye,Ce+ce.A,null,null,At),Z}function Fr(A,M,Z){var ce=A.F,ye=[A.J];if(ce!=null){var Ce=A.U,Ie=M.ba.S,De=Ie==Wu||Ie==lu;M=M.ba.f.RGBA;var Me=[0],ze=A.ka;Me[0]=A.T,A.Kb&&(ze==0?--Me[0]:(--ze,ye[0]-=A.width),A.j+A.ka+A.T==A.o&&(Me[0]=A.o-A.j-ze));var at=M.eb;ze=M.fb+ze*M.A,A=Xn(ce,ye[0],A.width,Ce,Me,at,ze+(De?0:3),M.A),t(Z==Me),A&&jt(Ie)&&bs(at,ze,De,Ce,Me,M.A)}return 0}function fn(A){var M=A.ma,Z=M.ba.S,ce=11>Z,ye=Z==tc||Z==ou||Z==Wu||Z==ha||Z==12||jt(Z);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!md(M.Oa,A,ye?11:12))return 0;if(ye&&jt(Z)&&Gt(),A.da)alert("todo:use_scaling");else{if(ce){if(M.Ib=Qt,A.Kb){if(Z=A.U+1>>1,M.memory=i(A.U+2*Z),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+A.U,M.Mc=M.cc,M.Nc=M.dc+Z,M.Ib=mr,Gt()}}else alert("todo:EmitYUV");ye&&(M.Jb=Fr,ce&&xt())}if(ce&&!ws){for(A=0;256>A;++A)pi[A]=89858*(A-128)+ml>>qo,Ji[A]=-22014*(A-128)+ml,jd[A]=-45773*(A-128),Fl[A]=113618*(A-128)+ml>>qo;for(A=Yn;A<na;++A)M=76283*(A-16)+ml>>qo,Ju[A-Yn]=Js(M,255),qf[A-Yn]=Js(M+8>>4,15);ws=1}return 1}function Br(A){var M=A.ma,Z=A.U,ce=A.T;return t(!(1&A.ka)),0>=Z||0>=ce?0:(Z=M.Ib(A,M),M.Jb!=null&&M.Jb(A,M,Z),M.Dc+=Z,1)}function Qr(A){A.ma.memory=null}function ir(A,M,Z,ce){return ee(A,8)!=47?0:(M[0]=ee(A,14)+1,Z[0]=ee(A,14)+1,ce[0]=ee(A,1),ee(A,3)!=0?0:!A.h)}function qn(A,M){if(4>A)return A+1;var Z=A-2>>1;return(2+(1&A)<<Z)+ee(M,Z)+1}function an(A,M){return 120<M?M-120:1<=(Z=((Z=Gh[M-1])>>4)*A+(8-(15&Z)))?Z:1;var Z}function wn(A,M,Z){var ce=q(Z),ye=A[M+=255&ce].g-8;return 0<ye&&(B(Z,Z.u+8),ce=q(Z),M+=A[M].value,M+=ce&(1<<ye)-1),B(Z,Z.u+A[M].g),A[M].value}function Tr(A,M,Z){return Z.g+=A.g,Z.value+=A.value<<M>>>0,t(8>=Z.g),A.g}function zr(A,M,Z){var ce=A.xc;return t((M=ce==0?0:A.vc[A.md*(Z>>ce)+(M>>ce)])<A.Wb),A.Ya[M]}function ne(A,M,Z,ce){var ye=A.ab,Ce=A.c*M,Ie=A.C;M=Ie+M;var De=Z,Me=ce;for(ce=A.Ta,Z=A.Ua;0<ye--;){var ze=A.gc[ye],at=Ie,gt=M,vt=De,ht=Me,qt=(Me=ce,De=Z,ze.Ea);switch(t(at<gt),t(gt<=ze.nc),ze.hc){case 2:ui(vt,ht,(gt-at)*qt,Me,De);break;case 0:var St=at,ct=gt,it=Me,Ct=De,At=(fr=ze).Ea;St==0&&(rs(vt,ht,null,null,1,it,Ct),Fe(vt,ht+1,0,0,At-1,it,Ct+1),ht+=At,Ct+=At,++St);for(var Mt=1<<fr.b,dr=Mt-1,rr=we(At,fr.b),$r=fr.K,fr=fr.w+(St>>fr.b)*rr;St<ct;){var vn=$r,Tn=fr,An=1;for(ga(vt,ht,it,Ct-At,1,it,Ct);An<At;){var ln=(An&~dr)+Mt;ln>At&&(ln=At),(0,Ha[vn[Tn++]>>8&15])(vt,ht+ +An,it,Ct+An-At,ln-An,it,Ct+An),An=ln}ht+=At,Ct+=At,++St&dr||(fr+=rr)}gt!=ze.nc&&a(Me,De-qt,Me,De+(gt-at-1)*qt,qt);break;case 1:for(qt=vt,ct=ht,At=(vt=ze.Ea)-(Ct=vt&~(it=(ht=1<<ze.b)-1)),St=we(vt,ze.b),Mt=ze.K,ze=ze.w+(at>>ze.b)*St;at<gt;){for(dr=Mt,rr=ze,$r=new ue,fr=ct+Ct,vn=ct+vt;ct<fr;)_e(dr[rr++],$r),vs($r,qt,ct,ht,Me,De),ct+=ht,De+=ht;ct<vn&&(_e(dr[rr++],$r),vs($r,qt,ct,At,Me,De),ct+=At,De+=At),++at&it||(ze+=St)}break;case 3:if(vt==Me&&ht==De&&0<ze.b){for(ct=Me,vt=qt=De+(gt-at)*qt-(Ct=(gt-at)*we(ze.Ea,ze.b)),ht=Me,it=De,St=[],Ct=(At=Ct)-1;0<=Ct;--Ct)St[Ct]=ht[it+Ct];for(Ct=At-1;0<=Ct;--Ct)ct[vt+Ct]=St[Ct];Bn(ze,at,gt,Me,qt,Me,De)}else Bn(ze,at,gt,vt,ht,Me,De)}De=ce,Me=Z}Me!=Z&&a(ce,Z,De,Me,Ce)}function je(A,M){var Z=A.V,ce=A.Ba+A.c*A.C,ye=M-A.C;if(t(M<=A.l.o),t(16>=ye),0<ye){var Ce=A.l,Ie=A.Ta,De=A.Ua,Me=Ce.width;if(ne(A,ye,Z,ce),ye=De=[De],t((Z=A.C)<(ce=M)),t(Ce.v<Ce.va),ce>Ce.o&&(ce=Ce.o),Z<Ce.j){var ze=Ce.j-Z;Z=Ce.j,ye[0]+=ze*Me}if(Z>=ce?Z=0:(ye[0]+=4*Ce.v,Ce.ka=Z-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ce-Z,Z=1),Z){if(De=De[0],11>(Z=A.ca).S){var at=Z.f.RGBA,gt=(ce=Z.S,ye=Ce.U,Ce=Ce.T,ze=at.eb,at.A),vt=Ce;for(at=at.fb+A.Ma*at.A;0<vt--;){var ht=Ie,qt=De,St=ye,ct=ze,it=at;switch(ce){case Hu:wa(ht,qt,St,ct,it);break;case tc:ns(ht,qt,St,ct,it);break;case Ec:ns(ht,qt,St,ct,it),bs(ct,it,0,St,1,0);break;case Vh:Fo(ht,qt,St,ct,it);break;case ou:Ht(ht,qt,St,ct,it,1);break;case bd:Ht(ht,qt,St,ct,it,1),bs(ct,it,0,St,1,0);break;case Wu:Ht(ht,qt,St,ct,it,0);break;case lu:Ht(ht,qt,St,ct,it,0),bs(ct,it,1,St,1,0);break;case ha:Gi(ht,qt,St,ct,it);break;case Vu:Gi(ht,qt,St,ct,it),ra(ct,it,St,1,0);break;case Ff:Tl(ht,qt,St,ct,it);break;default:t(0)}De+=Me,at+=gt}A.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");t(A.Ma<=Z.height)}}A.C=M,t(A.C<=A.i)}function ke(A){var M;if(0<A.ua)return 0;for(M=0;M<A.Wb;++M){var Z=A.Ya[M].G,ce=A.Ya[M].H;if(0<Z[1][ce[1]+0].g||0<Z[2][ce[2]+0].g||0<Z[3][ce[3]+0].g)return 0}return 1}function ie(A,M,Z,ce,ye,Ce){if(A.Z!=0){var Ie=A.qd,De=A.rd;for(t(ss[A.Z]!=null);M<Z;++M)ss[A.Z](Ie,De,ce,ye,ce,ye,Ce),Ie=ce,De=ye,ye+=Ce;A.qd=Ie,A.rd=De}}function ge(A,M){var Z=A.l.ma,ce=Z.Z==0||Z.Z==1?A.l.j:A.C;if(ce=A.C<ce?ce:A.C,t(M<=A.l.o),M>ce){var ye=A.l.width,Ce=Z.ca,Ie=Z.tb+ye*ce,De=A.V,Me=A.Ba+A.c*ce,ze=A.gc;t(A.ab==1),t(ze[0].hc==3),za(ze[0],ce,M,De,Me,Ce,Ie),ie(Z,ce,M,Ce,Ie,ye)}A.C=A.Ma=M}function Ae(A,M,Z,ce,ye,Ce,Ie){var De=A.$/ce,Me=A.$%ce,ze=A.m,at=A.s,gt=Z+A.$,vt=gt;ye=Z+ce*ye;var ht=Z+ce*Ce,qt=280+at.ua,St=A.Pb?De:16777216,ct=0<at.ua?at.Wa:null,it=at.wc,Ct=gt<ht?zr(at,Me,De):null;t(A.C<Ce),t(ht<=ye);var At=!1;e:for(;;){for(;At||gt<ht;){var Mt=0;if(De>=St){var dr=gt-Z;t((St=A).Pb),St.wd=St.m,St.xd=dr,0<St.s.ua&&le(St.s.Wa,St.s.vb),St=De+Xu}if(Me&it||(Ct=zr(at,Me,De)),t(Ct!=null),Ct.Qb&&(M[gt]=Ct.qb,At=!0),!At)if(K(ze),Ct.jc){Mt=ze,dr=M;var rr=gt,$r=Ct.pd[q(Mt)&Sa-1];t(Ct.jc),256>$r.g?(B(Mt,Mt.u+$r.g),dr[rr]=$r.value,Mt=0):(B(Mt,Mt.u+$r.g-256),t(256<=$r.value),Mt=$r.value),Mt==0&&(At=!0)}else Mt=wn(Ct.G[0],Ct.H[0],ze);if(ze.h)break;if(At||256>Mt){if(!At)if(Ct.nd)M[gt]=(Ct.qb|Mt<<8)>>>0;else{if(K(ze),At=wn(Ct.G[1],Ct.H[1],ze),K(ze),dr=wn(Ct.G[2],Ct.H[2],ze),rr=wn(Ct.G[3],Ct.H[3],ze),ze.h)break;M[gt]=(rr<<24|At<<16|Mt<<8|dr)>>>0}if(At=!1,++gt,++Me>=ce&&(Me=0,++De,Ie!=null&&De<=Ce&&!(De%16)&&Ie(A,De),ct!=null))for(;vt<gt;)Mt=M[vt++],ct.X[(506832829*Mt&4294967295)>>>ct.Mb]=Mt}else if(280>Mt){if(Mt=qn(Mt-256,ze),dr=wn(Ct.G[4],Ct.H[4],ze),K(ze),dr=an(ce,dr=qn(dr,ze)),ze.h)break;if(gt-Z<dr||ye-gt<Mt)break e;for(rr=0;rr<Mt;++rr)M[gt+rr]=M[gt+rr-dr];for(gt+=Mt,Me+=Mt;Me>=ce;)Me-=ce,++De,Ie!=null&&De<=Ce&&!(De%16)&&Ie(A,De);if(t(gt<=ye),Me&it&&(Ct=zr(at,Me,De)),ct!=null)for(;vt<gt;)Mt=M[vt++],ct.X[(506832829*Mt&4294967295)>>>ct.Mb]=Mt}else{if(!(Mt<qt))break e;for(At=Mt-280,t(ct!=null);vt<gt;)Mt=M[vt++],ct.X[(506832829*Mt&4294967295)>>>ct.Mb]=Mt;Mt=gt,t(!(At>>>(dr=ct).Xa)),M[Mt]=dr.X[At],At=!0}At||t(ze.h==V(ze))}if(A.Pb&&ze.h&&gt<ye)t(A.m.h),A.a=5,A.m=A.wd,A.$=A.xd,0<A.s.ua&&le(A.s.vb,A.s.Wa);else{if(ze.h)break e;Ie?.(A,De>Ce?Ce:De),A.a=0,A.$=gt-Z}return 1}return A.a=3,0}function Ge(A){t(A!=null),A.vc=null,A.yc=null,A.Ya=null;var M=A.Wa;M!=null&&(M.X=null),A.vb=null,t(A!=null)}function rt(){var A=new tu;return A==null?null:(A.a=0,A.xb=uu,Ve("Predictor","VP8LPredictors"),Ve("Predictor","VP8LPredictors_C"),Ve("PredictorAdd","VP8LPredictorsAdd"),Ve("PredictorAdd","VP8LPredictorsAdd_C"),ui=$e,vs=Be,wa=Ze,ns=Vt,Gi=Dt,Tl=dt,Fo=Tt,P.VP8LMapColor32b=Rs,P.VP8LMapColor8b=Vi,A)}function Qe(A,M,Z,ce,ye){var Ce=1,Ie=[A],De=[M],Me=ce.m,ze=ce.s,at=null,gt=0;e:for(;;){if(Z)for(;Ce&&ee(Me,1);){var vt=Ie,ht=De,qt=ce,St=1,ct=qt.m,it=qt.gc[qt.ab],Ct=ee(ct,2);if(qt.Oc&1<<Ct)Ce=0;else{switch(qt.Oc|=1<<Ct,it.hc=Ct,it.Ea=vt[0],it.nc=ht[0],it.K=[null],++qt.ab,t(4>=qt.ab),Ct){case 0:case 1:it.b=ee(ct,3)+2,St=Qe(we(it.Ea,it.b),we(it.nc,it.b),0,qt,it.K),it.K=it.K[0];break;case 3:var At,Mt=ee(ct,8)+1,dr=16<Mt?0:4<Mt?1:2<Mt?2:3;if(vt[0]=we(it.Ea,dr),it.b=dr,At=St=Qe(Mt,1,0,qt,it.K)){var rr,$r=Mt,fr=it,vn=1<<(8>>fr.b),Tn=i(vn);if(Tn==null)At=0;else{var An=fr.K[0],ln=fr.w;for(Tn[0]=fr.K[0][0],rr=1;rr<1*$r;++rr)Tn[rr]=Pe(An[ln+rr],Tn[rr-1]);for(;rr<4*vn;++rr)Tn[rr]=0;fr.K[0]=null,fr.K[0]=Tn,At=1}}St=At;break;case 2:break;default:t(0)}Ce=St}}if(Ie=Ie[0],De=De[0],Ce&&ee(Me,1)&&!(Ce=1<=(gt=ee(Me,4))&&11>=gt)){ce.a=3;break e}var Qn;if(Qn=Ce)t:{var In,en,Wa,Pi=ce,Va=Ie,Ns=De,Jn=gt,Cs=Z,mi=Pi.m,Ga=Pi.s,Fa=[null],Us=1,Ii=0,zo=Ku[Jn];r:for(;;){if(Cs&&ee(mi,1)){var Ka=ee(mi,3)+2,es=we(Va,Ka),Es=we(Ns,Ka),Fc=es*Es;if(!Qe(es,Es,0,Pi,Fa))break r;for(Fa=Fa[0],Ga.xc=Ka,In=0;In<Fc;++In){var Zi=Fa[In]>>8&65535;Fa[In]=Zi,Zi>=Us&&(Us=Zi+1)}}if(mi.h)break r;for(en=0;5>en;++en){var Kn=wd[en];!en&&0<Jn&&(Kn+=1<<Jn),Ii<Kn&&(Ii=Kn)}var Ml=o(Us*zo,O),kd=Us,fu=o(kd,z);if(fu==null)var Ho=null;else t(65536>=kd),Ho=fu;var No=i(Ii);if(Ho==null||No==null||Ml==null){Pi.a=1;break r}var ac=Ml;for(In=Wa=0;In<Us;++In){var jo=Ho[In],Rl=jo.G,Sd=jo.H,hu=0,ko=1,pu=0;for(en=0;5>en;++en){Kn=wd[en],Rl[en]=ac,Sd[en]=Wa,!en&&0<Jn&&(Kn+=1<<Jn);a:{var Mc,sc=Kn,mu=Pi,Bl=No,Xh=ac,Zu=Wa,va=0,ei=mu.m,ic=ee(ei,1);if(s(Bl,0,0,sc),ic){var U0=ee(ei,1)+1,_d=ee(ei,1),$f=ee(ei,_d==0?1:8);Bl[$f]=1,U0==2&&(Bl[$f=ee(ei,8)]=1);var Ul=1}else{var Ma=i(19),js=ee(ei,4)+4;if(19<js){mu.a=3;var is=0;break a}for(Mc=0;Mc<js;++Mc)Ma[Mf[Mc]]=ee(ei,3);var xu=void 0,oc=void 0,Rc=mu,q0=Ma,Ts=sc,zf=Bl,ef=0,ql=Rc.m,Wo=8,eo=o(128,O);n:for(;C(eo,0,7,q0,19);){if(ee(ql,1)){var tf=2+2*ee(ql,3);if((xu=2+ee(ql,tf))>Ts)break n}else xu=Ts;for(oc=0;oc<Ts&&xu--;){K(ql);var Hf=eo[0+(127&q(ql))];B(ql,ql.u+Hf.g);var lc=Hf.value;if(16>lc)zf[oc++]=lc,lc!=0&&(Wo=lc);else{var Ad=lc==16,rf=lc-16,to=Gu[rf],$0=ee(ql,Tc[rf])+to;if(oc+$0>Ts)break n;for(var z0=Ad?Wo:0;0<$0--;)zf[oc++]=z0}}ef=1;break n}ef||(Rc.a=3),Ul=ef}(Ul=Ul&&!ei.h)&&(va=C(Xh,Zu,8,Bl,sc)),Ul&&va!=0?is=va:(mu.a=3,is=0)}if(is==0)break r;if(ko&&M0[en]==1&&(ko=ac[Wa].g==0),hu+=ac[Wa].g,Wa+=is,3>=en){var cc,nf=No[0];for(cc=1;cc<Kn;++cc)No[cc]>nf&&(nf=No[cc]);pu+=nf}}if(jo.nd=ko,jo.Qb=0,ko&&(jo.qb=(Rl[3][Sd[3]+0].value<<24|Rl[1][Sd[1]+0].value<<16|Rl[2][Sd[2]+0].value)>>>0,hu==0&&256>Rl[0][Sd[0]+0].value&&(jo.Qb=1,jo.qb+=Rl[0][Sd[0]+0].value<<8)),jo.jc=!jo.Qb&&6>pu,jo.jc){var D,pe=jo;for(D=0;D<Sa;++D){var be=D,Je=pe.pd[be],ot=pe.G[0][pe.H[0]+be];256<=ot.value?(Je.g=ot.g+256,Je.value=ot.value):(Je.g=0,Je.value=0,be>>=Tr(ot,8,Je),be>>=Tr(pe.G[1][pe.H[1]+be],16,Je),be>>=Tr(pe.G[2][pe.H[2]+be],0,Je),Tr(pe.G[3][pe.H[3]+be],24,Je))}}}Ga.vc=Fa,Ga.Wb=Us,Ga.Ya=Ho,Ga.yc=Ml,Qn=1;break t}Qn=0}if(!(Ce=Qn)){ce.a=3;break e}if(0<gt){if(ze.ua=1<<gt,!Oe(ze.Wa,gt)){ce.a=1,Ce=0;break e}}else ze.ua=0;var It=ce,wt=Ie,$t=De,kr=It.s,xn=kr.xc;if(It.c=wt,It.i=$t,kr.md=we(wt,xn),kr.wc=xn==0?-1:(1<<xn)-1,Z){ce.xb=wo;break e}if((at=i(Ie*De))==null){ce.a=1,Ce=0;break e}Ce=(Ce=Ae(ce,at,0,Ie,De,De,null))&&!Me.h;break e}return Ce?(ye!=null?ye[0]=at:(t(at==null),t(Z)),ce.$=0,Z||Ge(ze)):Ge(ze),Ce}function tt(A,M){var Z=A.c*A.i,ce=Z+M+16*M;return t(A.c<=M),A.V=i(ce),A.V==null?(A.Ta=null,A.Ua=0,A.a=1,0):(A.Ta=A.V,A.Ua=A.Ba+Z+M,1)}function Ke(A,M){var Z=A.C,ce=M-Z,ye=A.V,Ce=A.Ba+A.c*Z;for(t(M<=A.l.o);0<ce;){var Ie=16<ce?16:ce,De=A.l.ma,Me=A.l.width,ze=Me*Ie,at=De.ca,gt=De.tb+Me*Z,vt=A.Ta,ht=A.Ua;ne(A,Ie,ye,Ce),_n(vt,ht,at,gt,ze),ie(De,Z,Z+Ie,at,gt,Me),ce-=Ie,ye+=Ie*A.c,Z+=Ie}t(Z==M),A.C=A.Ma=M}function Le(){this.ub=this.yd=this.td=this.Rb=0}function st(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ot(){this.Yb=(function(){var A=[];return(function M(Z,ce,ye){for(var Ce=ye[ce],Ie=0;Ie<Ce&&(Z.push(ye.length>ce+1?[]:0),!(ye.length<ce+1));Ie++)M(Z[Ie],ce+1,ye)})(A,0,[3,11]),A})()}function Lt(){this.jb=i(3),this.Wc=l([4,8],Ot),this.Xc=l([4,17],Ot)}function vr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Mr(){this.ld=this.La=this.dd=this.tc=0}function Vr(){this.Na=this.la=0}function Mn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fs(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $n(){this.uc=this.M=this.Nb=0,this.wa=Array(new Mr),this.Y=0,this.ya=Array(new Fs),this.aa=0,this.l=new As}function hs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function zn(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Le,this.Kc=new st,this.ed=new vr,this.Qa=new mt,this.Ic=this.$c=this.Aa=0,this.D=new $n,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,Mn),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hs),this.Hd=0,this.rb=Array(new Vr),this.sb=0,this.wa=Array(new Mr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fs),this.L=this.aa=0,this.gd=l([4,2],Mr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function As(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hn(){var A=new zn;return A!=null&&(A.a=0,A.sc="OK",A.cb=0,A.Xb=0,du||(du=We)),A}function Nn(A,M,Z){return A.a==0&&(A.a=M,A.sc=Z,A.cb=0),0}function ul(A,M,Z){return 3<=Z&&A[M+0]==157&&A[M+1]==1&&A[M+2]==42}function ua(A,M){if(A==null)return 0;if(A.a=0,A.sc="OK",M==null)return Nn(A,2,"null VP8Io passed to VP8GetHeaders()");var Z=M.data,ce=M.w,ye=M.ha;if(4>ye)return Nn(A,7,"Truncated header.");var Ce=Z[ce+0]|Z[ce+1]<<8|Z[ce+2]<<16,Ie=A.Od;if(Ie.Rb=!(1&Ce),Ie.td=Ce>>1&7,Ie.yd=Ce>>4&1,Ie.ub=Ce>>5,3<Ie.td)return Nn(A,3,"Incorrect keyframe parameters.");if(!Ie.yd)return Nn(A,4,"Frame not displayable.");ce+=3,ye-=3;var De=A.Kc;if(Ie.Rb){if(7>ye)return Nn(A,7,"cannot parse picture header");if(!ul(Z,ce,ye))return Nn(A,3,"Bad code word");De.c=16383&(Z[ce+4]<<8|Z[ce+3]),De.Td=Z[ce+4]>>6,De.i=16383&(Z[ce+6]<<8|Z[ce+5]),De.Ud=Z[ce+6]>>6,ce+=7,ye-=7,A.za=De.c+15>>4,A.Ub=De.i+15>>4,M.width=De.c,M.height=De.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,s((Ce=A.Pa).jb,0,255,Ce.jb.length),t((Ce=A.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,s(Ce.Zb,0,0,Ce.Zb.length),s(Ce.Lb,0,0,Ce.Lb)}if(Ie.ub>ye)return Nn(A,7,"bad partition length");H(Ce=A.m,Z,ce,Ie.ub),ce+=Ie.ub,ye-=Ie.ub,Ie.Rb&&(De.Ld=me(Ce),De.Kd=me(Ce)),De=A.Qa;var Me,ze=A.Pa;if(t(Ce!=null),t(De!=null),De.Cb=me(Ce),De.Cb){if(De.Bb=me(Ce),me(Ce)){for(De.Fb=me(Ce),Me=0;4>Me;++Me)De.Zb[Me]=me(Ce)?J(Ce,7):0;for(Me=0;4>Me;++Me)De.Lb[Me]=me(Ce)?J(Ce,6):0}if(De.Bb)for(Me=0;3>Me;++Me)ze.jb[Me]=me(Ce)?Q(Ce,8):255}else De.Bb=0;if(Ce.Ka)return Nn(A,3,"cannot parse segment header");if((De=A.ed).zd=me(Ce),De.Tb=Q(Ce,6),De.wb=Q(Ce,3),De.Pc=me(Ce),De.Pc&&me(Ce)){for(ze=0;4>ze;++ze)me(Ce)&&(De.vd[ze]=J(Ce,6));for(ze=0;4>ze;++ze)me(Ce)&&(De.od[ze]=J(Ce,6))}if(A.L=De.Tb==0?0:De.zd?1:2,Ce.Ka)return Nn(A,3,"cannot parse filter header");var at=ye;if(ye=Me=ce,ce=Me+at,De=at,A.Xb=(1<<Q(A.m,2))-1,at<3*(ze=A.Xb))Z=7;else{for(Me+=3*ze,De-=3*ze,at=0;at<ze;++at){var gt=Z[ye+0]|Z[ye+1]<<8|Z[ye+2]<<16;gt>De&&(gt=De),H(A.Jc[+at],Z,Me,gt),Me+=gt,De-=gt,ye+=3}H(A.Jc[+ze],Z,Me,De),Z=Me<ce?0:5}if(Z!=0)return Nn(A,Z,"cannot parse partitions");for(Z=Q(Me=A.m,7),ye=me(Me)?J(Me,4):0,ce=me(Me)?J(Me,4):0,De=me(Me)?J(Me,4):0,ze=me(Me)?J(Me,4):0,Me=me(Me)?J(Me,4):0,at=A.Qa,gt=0;4>gt;++gt){if(at.Cb){var vt=at.Zb[gt];at.Fb||(vt+=Z)}else{if(0<gt){A.pb[gt]=A.pb[0];continue}vt=Z}var ht=A.pb[gt];ht.Sc[0]=rc[Js(vt+ye,127)],ht.Sc[1]=cu[Js(vt+0,127)],ht.Eb[0]=2*rc[Js(vt+ce,127)],ht.Eb[1]=101581*cu[Js(vt+De,127)]>>16,8>ht.Eb[1]&&(ht.Eb[1]=8),ht.Qc[0]=rc[Js(vt+ze,117)],ht.Qc[1]=cu[Js(vt+Me,127)],ht.lc=vt+Me}if(!Ie.Rb)return Nn(A,4,"Not a key frame.");for(me(Ce),Ie=A.Pa,Z=0;4>Z;++Z){for(ye=0;8>ye;++ye)for(ce=0;3>ce;++ce)for(De=0;11>De;++De)ze=se(Ce,gm[Z][ye][ce][De])?Q(Ce,8):nc[Z][ye][ce][De],Ie.Wc[Z][ye].Yb[ce][De]=ze;for(ye=0;17>ye;++ye)Ie.Xc[Z][ye]=Ie.Wc[Z][Yu[ye]]}return A.kc=me(Ce),A.kc&&(A.Bd=Q(Ce,8)),A.cb=1}function We(A,M,Z,ce,ye,Ce,Ie){var De=M[ye].Yb[Z];for(Z=0;16>ye;++ye){if(!se(A,De[Z+0]))return ye;for(;!se(A,De[Z+1]);)if(De=M[++ye].Yb[0],Z=0,ye==16)return 16;var Me=M[ye+1].Yb;if(se(A,De[Z+2])){var ze=A,at=0;if(se(ze,(vt=De)[(gt=Z)+3]))if(se(ze,vt[gt+6])){for(De=0,gt=2*(at=se(ze,vt[gt+8]))+(vt=se(ze,vt[gt+9+at])),at=0,vt=Rf[gt];vt[De];++De)at+=at+se(ze,vt[De]);at+=3+(8<<gt)}else se(ze,vt[gt+7])?(at=7+2*se(ze,165),at+=se(ze,145)):at=5+se(ze,159);else at=se(ze,vt[gt+4])?3+se(ze,vt[gt+5]):2;De=Me[2]}else at=1,De=Me[1];Me=Ie+R0[ye],0>(ze=A).b&&oe(ze);var gt,vt=ze.b,ht=(gt=ze.Ca>>1)-(ze.I>>vt)>>31;--ze.b,ze.Ca+=ht,ze.Ca|=1,ze.I-=(gt+1&ht)<<vt,Ce[Me]=((at^ht)-ht)*ce[(0<ye)+0]}return 16}function Et(A){var M=A.rb[A.sb-1];M.la=0,M.Na=0,s(A.zc,0,0,A.zc.length),A.ja=0}function _t(A,M){if(A==null)return 0;if(M==null)return Nn(A,2,"NULL VP8Io parameter in VP8Decode().");if(!A.cb&&!ua(A,M))return 0;if(t(A.cb),M.ac==null||M.ac(M)){M.ob&&(A.L=0);var Z=Lc[A.L];if(A.L==2?(A.yb=0,A.zb=0):(A.yb=M.v-Z>>4,A.zb=M.j-Z>>4,0>A.yb&&(A.yb=0),0>A.zb&&(A.zb=0)),A.Va=M.o+15+Z>>4,A.Hb=M.va+15+Z>>4,A.Hb>A.za&&(A.Hb=A.za),A.Va>A.Ub&&(A.Va=A.Ub),0<A.L){var ce=A.ed;for(Z=0;4>Z;++Z){var ye;if(A.Qa.Cb){var Ce=A.Qa.Lb[Z];A.Qa.Fb||(Ce+=ce.Tb)}else Ce=ce.Tb;for(ye=0;1>=ye;++ye){var Ie=A.gd[Z][ye],De=Ce;if(ce.Pc&&(De+=ce.vd[0],ye&&(De+=ce.od[0])),0<(De=0>De?0:63<De?63:De)){var Me=De;0<ce.wb&&(Me=4<ce.wb?Me>>2:Me>>1)>9-ce.wb&&(Me=9-ce.wb),1>Me&&(Me=1),Ie.dd=Me,Ie.tc=2*De+Me,Ie.ld=40<=De?2:15<=De?1:0}else Ie.tc=0;Ie.La=ye}}}Z=0}else Nn(A,6,"Frame setup failed"),Z=A.a;if(Z=Z==0){if(Z){A.$c=0,0<A.Aa||(A.Ic=$o);e:{Z=A.Ic,ce=4*(Me=A.za);var ze=32*Me,at=Me+1,gt=0<A.L?Me*(0<A.Aa?2:1):0,vt=(A.Aa==2?2:1)*Me;if((Ie=ce+832+(ye=3*(16*Z+Lc[A.L])/2*ze)+(Ce=A.Fa!=null&&0<A.Fa.length?A.Kc.c*A.Kc.i:0))!=Ie)Z=0;else{if(Ie>A.Vb){if(A.Vb=0,A.Ec=i(Ie),A.Fc=0,A.Ec==null){Z=Nn(A,1,"no memory during frame initialization.");break e}A.Vb=Ie}Ie=A.Ec,De=A.Fc,A.Ac=Ie,A.Bc=De,De+=ce,A.Gd=o(ze,hs),A.Hd=0,A.rb=o(at+1,Vr),A.sb=1,A.wa=gt?o(gt,Mr):null,A.Y=0,A.D.Nb=0,A.D.wa=A.wa,A.D.Y=A.Y,0<A.Aa&&(A.D.Y+=Me),t(!0),A.oc=Ie,A.pc=De,De+=832,A.ya=o(vt,Fs),A.aa=0,A.D.ya=A.ya,A.D.aa=A.aa,A.Aa==2&&(A.D.aa+=Me),A.R=16*Me,A.B=8*Me,Me=(ze=Lc[A.L])*A.R,ze=ze/2*A.B,A.sa=Ie,A.ta=De+Me,A.qa=A.sa,A.ra=A.ta+16*Z*A.R+ze,A.Ha=A.qa,A.Ia=A.ra+8*Z*A.B+ze,A.$c=0,De+=ye,A.mb=Ce?Ie:null,A.nb=Ce?De:null,t(De+Ce<=A.Fc+A.Vb),Et(A),s(A.Ac,A.Bc,0,ce),Z=1}}if(Z){if(M.ka=0,M.y=A.sa,M.O=A.ta,M.f=A.qa,M.N=A.ra,M.ea=A.Ha,M.Vd=A.Ia,M.fa=A.R,M.Rc=A.B,M.F=null,M.J=0,!yd){for(Z=-255;255>=Z;++Z)_a[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Ro[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)iu[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)Bo[255+Z]=0>Z?0:255<Z?255:Z;yd=1}su=wr,pl=jn,Ol=Jt,Zs=cr,Ei=Ft,Gn=ta,Pl=El,vd=xs,Il=fd,Mo=kc,Ki=mo,Bs=Io,Xi=hd,Ti=fl,Yi=po,yo=zi,Cc=Hi,ys=Lf,bo[0]=Ja,bo[1]=Ua,bo[2]=Vn,bo[3]=Hr,bo[4]=fo,bo[5]=ps,bo[6]=Si,bo[7]=ms,bo[8]=He,bo[9]=ho,as[0]=bn,as[1]=Da,as[2]=er,as[3]=Jr,as[4]=mn,as[5]=Nr,as[6]=Wr,Oi[0]=Kr,Oi[1]=Ia,Oi[2]=br,Oi[3]=Cr,Oi[4]=ka,Oi[5]=Rn,Oi[6]=Ys,Z=1}else Z=0}Z&&(Z=(function(ht,qt){for(ht.M=0;ht.M<ht.Va;++ht.M){var St,ct=ht.Jc[ht.M&ht.Xb],it=ht.m,Ct=ht;for(St=0;St<Ct.za;++St){var At=it,Mt=Ct,dr=Mt.Ac,rr=Mt.Bc+4*St,$r=Mt.zc,fr=Mt.ya[Mt.aa+St];if(Mt.Qa.Bb?fr.$b=se(At,Mt.Pa.jb[0])?2+se(At,Mt.Pa.jb[2]):se(At,Mt.Pa.jb[1]):fr.$b=0,Mt.kc&&(fr.Ad=se(At,Mt.Bd)),fr.Za=!se(At,145)+0,fr.Za){var vn=fr.Ob,Tn=0;for(Mt=0;4>Mt;++Mt){var An,ln=$r[0+Mt];for(An=0;4>An;++An){ln=Nd[dr[rr+An]][ln];for(var Qn=Oc[se(At,ln[0])];0<Qn;)Qn=Oc[2*Qn+se(At,ln[Qn])];ln=-Qn,dr[rr+An]=ln}a(vn,Tn,dr,rr,4),Tn+=4,$r[0+Mt]=ln}}else ln=se(At,156)?se(At,128)?1:3:se(At,163)?2:0,fr.Ob[0]=ln,s(dr,rr,ln,4),s($r,0,ln,4);fr.Dd=se(At,142)?se(At,114)?se(At,183)?1:3:2:0}if(Ct.m.Ka)return Nn(ht,7,"Premature end-of-partition0 encountered.");for(;ht.ja<ht.za;++ht.ja){if(Ct=ct,At=(it=ht).rb[it.sb-1],dr=it.rb[it.sb+it.ja],St=it.ya[it.aa+it.ja],rr=it.kc?St.Ad:0)At.la=dr.la=0,St.Za||(At.Na=dr.Na=0),St.Hc=0,St.Gc=0,St.ia=0;else{var In,en;if(At=dr,dr=Ct,rr=it.Pa.Xc,$r=it.ya[it.aa+it.ja],fr=it.pb[$r.$b],Mt=$r.ad,vn=0,Tn=it.rb[it.sb-1],ln=An=0,s(Mt,vn,0,384),$r.Za)var Wa=0,Pi=rr[3];else{Qn=i(16);var Va=At.Na+Tn.Na;if(Va=du(dr,rr[1],Va,fr.Eb,0,Qn,0),At.Na=Tn.Na=(0<Va)+0,1<Va)su(Qn,0,Mt,vn);else{var Ns=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)Mt[vn+Qn]=Ns}Wa=1,Pi=rr[0]}var Jn=15&At.la,Cs=15&Tn.la;for(Qn=0;4>Qn;++Qn){var mi=1&Cs;for(Ns=en=0;4>Ns;++Ns)Jn=Jn>>1|(mi=(Va=du(dr,Pi,Va=mi+(1&Jn),fr.Sc,Wa,Mt,vn))>Wa)<<7,en=en<<2|(3<Va?3:1<Va?2:Mt[vn+0]!=0),vn+=16;Jn>>=4,Cs=Cs>>1|mi<<7,An=(An<<8|en)>>>0}for(Pi=Jn,Wa=Cs>>4,In=0;4>In;In+=2){for(en=0,Jn=At.la>>4+In,Cs=Tn.la>>4+In,Qn=0;2>Qn;++Qn){for(mi=1&Cs,Ns=0;2>Ns;++Ns)Va=mi+(1&Jn),Jn=Jn>>1|(mi=0<(Va=du(dr,rr[2],Va,fr.Qc,0,Mt,vn)))<<3,en=en<<2|(3<Va?3:1<Va?2:Mt[vn+0]!=0),vn+=16;Jn>>=2,Cs=Cs>>1|mi<<5}ln|=en<<4*In,Pi|=Jn<<4<<In,Wa|=(240&Cs)<<In}At.la=Pi,Tn.la=Wa,$r.Hc=An,$r.Gc=ln,$r.ia=43690&ln?0:fr.ia,rr=!(An|ln)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[St.$b][St.Za],it.wa[it.Y+it.ja].La|=!rr),Ct.Ka)return Nn(ht,7,"Premature end-of-file encountered.")}if(Et(ht),it=qt,Ct=1,St=(ct=ht).D,At=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(St.M=ct.M,St.uc=At,au(ct,St),Ct=1,St=(en=ct.D).Nb,At=(ln=Lc[ct.L])*ct.R,dr=ln/2*ct.B,Qn=16*St*ct.R,Ns=8*St*ct.B,rr=ct.sa,$r=ct.ta-At+Qn,fr=ct.qa,Mt=ct.ra-dr+Ns,vn=ct.Ha,Tn=ct.Ia-dr+Ns,Cs=(Jn=en.M)==0,An=Jn>=ct.Va-1,ct.Aa==2&&au(ct,en),en.uc)for(mi=(Va=ct).D.M,t(Va.D.uc),en=Va.yb;en<Va.Hb;++en){Wa=en,Pi=mi;var Ga=(Fa=(Kn=Va).D).Nb;In=Kn.R;var Fa=Fa.wa[Fa.Y+Wa],Us=Kn.sa,Ii=Kn.ta+16*Ga*In+16*Wa,zo=Fa.dd,Ka=Fa.tc;if(Ka!=0)if(t(3<=Ka),Kn.L==1)0<Wa&&yo(Us,Ii,In,Ka+4),Fa.La&&ys(Us,Ii,In,Ka),0<Pi&&Yi(Us,Ii,In,Ka+4),Fa.La&&Cc(Us,Ii,In,Ka);else{var es=Kn.B,Es=Kn.qa,Fc=Kn.ra+8*Ga*es+8*Wa,Zi=Kn.Ha,Kn=Kn.Ia+8*Ga*es+8*Wa;Ga=Fa.ld,0<Wa&&(vd(Us,Ii,In,Ka+4,zo,Ga),Mo(Es,Fc,Zi,Kn,es,Ka+4,zo,Ga)),Fa.La&&(Bs(Us,Ii,In,Ka,zo,Ga),Ti(Es,Fc,Zi,Kn,es,Ka,zo,Ga)),0<Pi&&(Pl(Us,Ii,In,Ka+4,zo,Ga),Il(Es,Fc,Zi,Kn,es,Ka+4,zo,Ga)),Fa.La&&(Ki(Us,Ii,In,Ka,zo,Ga),Xi(Es,Fc,Zi,Kn,es,Ka,zo,Ga))}}if(ct.ia&&alert("todo:DitherRow"),it.put!=null){if(en=16*Jn,Jn=16*(Jn+1),Cs?(it.y=ct.sa,it.O=ct.ta+Qn,it.f=ct.qa,it.N=ct.ra+Ns,it.ea=ct.Ha,it.W=ct.Ia+Ns):(en-=ln,it.y=rr,it.O=$r,it.f=fr,it.N=Mt,it.ea=vn,it.W=Tn),An||(Jn-=ln),Jn>it.o&&(Jn=it.o),it.F=null,it.J=null,ct.Fa!=null&&0<ct.Fa.length&&en<Jn&&(it.J=ru(ct,it,en,Jn-en),it.F=ct.mb,it.F==null&&it.F.length==0)){Ct=Nn(ct,3,"Could not decode alpha data.");break e}en<it.j&&(ln=it.j-en,en=it.j,t(!(1&ln)),it.O+=ct.R*ln,it.N+=ct.B*(ln>>1),it.W+=ct.B*(ln>>1),it.F!=null&&(it.J+=it.width*ln)),en<Jn&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=en-it.j,it.U=it.va-it.v,it.T=Jn-en,Ct=it.put(it))}St+1!=ct.Ic||An||(a(ct.sa,ct.ta-At,rr,$r+16*ct.R,At),a(ct.qa,ct.ra-dr,fr,Mt+8*ct.B,dr),a(ct.Ha,ct.Ia-dr,vn,Tn+8*ct.B,dr))}if(!Ct)return Nn(ht,6,"Output aborted.")}return 1})(A,M)),M.bc!=null&&M.bc(M),Z&=1}return Z?(A.cb=0,Z):0}function sr(A,M,Z,ce,ye){ye=A[M+Z+32*ce]+(ye>>3),A[M+Z+32*ce]=-256&ye?0>ye?0:255:ye}function yr(A,M,Z,ce,ye,Ce){sr(A,M,0,Z,ce+ye),sr(A,M,1,Z,ce+Ce),sr(A,M,2,Z,ce-Ce),sr(A,M,3,Z,ce-ye)}function pr(A){return(20091*A>>16)+A}function Dr(A,M,Z,ce){var ye,Ce=0,Ie=i(16);for(ye=0;4>ye;++ye){var De=A[M+0]+A[M+8],Me=A[M+0]-A[M+8],ze=(35468*A[M+4]>>16)-pr(A[M+12]),at=pr(A[M+4])+(35468*A[M+12]>>16);Ie[Ce+0]=De+at,Ie[Ce+1]=Me+ze,Ie[Ce+2]=Me-ze,Ie[Ce+3]=De-at,Ce+=4,M++}for(ye=Ce=0;4>ye;++ye)De=(A=Ie[Ce+0]+4)+Ie[Ce+8],Me=A-Ie[Ce+8],ze=(35468*Ie[Ce+4]>>16)-pr(Ie[Ce+12]),sr(Z,ce,0,0,De+(at=pr(Ie[Ce+4])+(35468*Ie[Ce+12]>>16))),sr(Z,ce,1,0,Me+ze),sr(Z,ce,2,0,Me-ze),sr(Z,ce,3,0,De-at),Ce++,ce+=32}function ta(A,M,Z,ce){var ye=A[M+0]+4,Ce=35468*A[M+4]>>16,Ie=pr(A[M+4]),De=35468*A[M+1]>>16;yr(Z,ce,0,ye+Ie,A=pr(A[M+1]),De),yr(Z,ce,1,ye+Ce,A,De),yr(Z,ce,2,ye-Ce,A,De),yr(Z,ce,3,ye-Ie,A,De)}function jn(A,M,Z,ce,ye){Dr(A,M,Z,ce),ye&&Dr(A,M+16,Z,ce+4)}function Jt(A,M,Z,ce){pl(A,M+0,Z,ce,1),pl(A,M+32,Z,ce+128,1)}function cr(A,M,Z,ce){var ye;for(A=A[M+0]+4,ye=0;4>ye;++ye)for(M=0;4>M;++M)sr(Z,ce,M,ye,A)}function Ft(A,M,Z,ce){A[M+0]&&Zs(A,M+0,Z,ce),A[M+16]&&Zs(A,M+16,Z,ce+4),A[M+32]&&Zs(A,M+32,Z,ce+128),A[M+48]&&Zs(A,M+48,Z,ce+128+4)}function wr(A,M,Z,ce){var ye,Ce=i(16);for(ye=0;4>ye;++ye){var Ie=A[M+0+ye]+A[M+12+ye],De=A[M+4+ye]+A[M+8+ye],Me=A[M+4+ye]-A[M+8+ye],ze=A[M+0+ye]-A[M+12+ye];Ce[0+ye]=Ie+De,Ce[8+ye]=Ie-De,Ce[4+ye]=ze+Me,Ce[12+ye]=ze-Me}for(ye=0;4>ye;++ye)Ie=(A=Ce[0+4*ye]+3)+Ce[3+4*ye],De=Ce[1+4*ye]+Ce[2+4*ye],Me=Ce[1+4*ye]-Ce[2+4*ye],ze=A-Ce[3+4*ye],Z[ce+0]=Ie+De>>3,Z[ce+16]=ze+Me>>3,Z[ce+32]=Ie-De>>3,Z[ce+48]=ze-Me>>3,ce+=64}function zt(A,M,Z){var ce,ye=M-32,Ce=fi,Ie=255-A[ye-1];for(ce=0;ce<Z;++ce){var De,Me=Ce,ze=Ie+A[M-1];for(De=0;De<Z;++De)A[M+De]=Me[ze+A[ye+De]];M+=32}}function Ua(A,M){zt(A,M,4)}function Ia(A,M){zt(A,M,8)}function Da(A,M){zt(A,M,16)}function er(A,M){var Z;for(Z=0;16>Z;++Z)a(A,M+32*Z,A,M-32,16)}function Jr(A,M){var Z;for(Z=16;0<Z;--Z)s(A,M,A[M-1],16),M+=32}function fa(A,M,Z){var ce;for(ce=0;16>ce;++ce)s(M,Z+32*ce,A,16)}function bn(A,M){var Z,ce=16;for(Z=0;16>Z;++Z)ce+=A[M-1+32*Z]+A[M+Z-32];fa(ce>>5,A,M)}function mn(A,M){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=A[M-1+32*Z];fa(ce>>4,A,M)}function Nr(A,M){var Z,ce=8;for(Z=0;16>Z;++Z)ce+=A[M+Z-32];fa(ce>>4,A,M)}function Wr(A,M){fa(128,A,M)}function or(A,M,Z){return A+2*M+Z+2>>2}function Vn(A,M){var Z,ce=M-32;for(ce=new Uint8Array([or(A[ce-1],A[ce+0],A[ce+1]),or(A[ce+0],A[ce+1],A[ce+2]),or(A[ce+1],A[ce+2],A[ce+3]),or(A[ce+2],A[ce+3],A[ce+4])]),Z=0;4>Z;++Z)a(A,M+32*Z,ce,0,ce.length)}function Hr(A,M){var Z=A[M-1],ce=A[M-1+32],ye=A[M-1+64],Ce=A[M-1+96];de(A,M+0,16843009*or(A[M-1-32],Z,ce)),de(A,M+32,16843009*or(Z,ce,ye)),de(A,M+64,16843009*or(ce,ye,Ce)),de(A,M+96,16843009*or(ye,Ce,Ce))}function Ja(A,M){var Z,ce=4;for(Z=0;4>Z;++Z)ce+=A[M+Z-32]+A[M-1+32*Z];for(ce>>=3,Z=0;4>Z;++Z)s(A,M+32*Z,ce,4)}function fo(A,M){var Z=A[M-1+0],ce=A[M-1+32],ye=A[M-1+64],Ce=A[M-1-32],Ie=A[M+0-32],De=A[M+1-32],Me=A[M+2-32],ze=A[M+3-32];A[M+0+96]=or(ce,ye,A[M-1+96]),A[M+1+96]=A[M+0+64]=or(Z,ce,ye),A[M+2+96]=A[M+1+64]=A[M+0+32]=or(Ce,Z,ce),A[M+3+96]=A[M+2+64]=A[M+1+32]=A[M+0+0]=or(Ie,Ce,Z),A[M+3+64]=A[M+2+32]=A[M+1+0]=or(De,Ie,Ce),A[M+3+32]=A[M+2+0]=or(Me,De,Ie),A[M+3+0]=or(ze,Me,De)}function Si(A,M){var Z=A[M+1-32],ce=A[M+2-32],ye=A[M+3-32],Ce=A[M+4-32],Ie=A[M+5-32],De=A[M+6-32],Me=A[M+7-32];A[M+0+0]=or(A[M+0-32],Z,ce),A[M+1+0]=A[M+0+32]=or(Z,ce,ye),A[M+2+0]=A[M+1+32]=A[M+0+64]=or(ce,ye,Ce),A[M+3+0]=A[M+2+32]=A[M+1+64]=A[M+0+96]=or(ye,Ce,Ie),A[M+3+32]=A[M+2+64]=A[M+1+96]=or(Ce,Ie,De),A[M+3+64]=A[M+2+96]=or(Ie,De,Me),A[M+3+96]=or(De,Me,Me)}function ps(A,M){var Z=A[M-1+0],ce=A[M-1+32],ye=A[M-1+64],Ce=A[M-1-32],Ie=A[M+0-32],De=A[M+1-32],Me=A[M+2-32],ze=A[M+3-32];A[M+0+0]=A[M+1+64]=Ce+Ie+1>>1,A[M+1+0]=A[M+2+64]=Ie+De+1>>1,A[M+2+0]=A[M+3+64]=De+Me+1>>1,A[M+3+0]=Me+ze+1>>1,A[M+0+96]=or(ye,ce,Z),A[M+0+64]=or(ce,Z,Ce),A[M+0+32]=A[M+1+96]=or(Z,Ce,Ie),A[M+1+32]=A[M+2+96]=or(Ce,Ie,De),A[M+2+32]=A[M+3+96]=or(Ie,De,Me),A[M+3+32]=or(De,Me,ze)}function ms(A,M){var Z=A[M+0-32],ce=A[M+1-32],ye=A[M+2-32],Ce=A[M+3-32],Ie=A[M+4-32],De=A[M+5-32],Me=A[M+6-32],ze=A[M+7-32];A[M+0+0]=Z+ce+1>>1,A[M+1+0]=A[M+0+64]=ce+ye+1>>1,A[M+2+0]=A[M+1+64]=ye+Ce+1>>1,A[M+3+0]=A[M+2+64]=Ce+Ie+1>>1,A[M+0+32]=or(Z,ce,ye),A[M+1+32]=A[M+0+96]=or(ce,ye,Ce),A[M+2+32]=A[M+1+96]=or(ye,Ce,Ie),A[M+3+32]=A[M+2+96]=or(Ce,Ie,De),A[M+3+64]=or(Ie,De,Me),A[M+3+96]=or(De,Me,ze)}function ho(A,M){var Z=A[M-1+0],ce=A[M-1+32],ye=A[M-1+64],Ce=A[M-1+96];A[M+0+0]=Z+ce+1>>1,A[M+2+0]=A[M+0+32]=ce+ye+1>>1,A[M+2+32]=A[M+0+64]=ye+Ce+1>>1,A[M+1+0]=or(Z,ce,ye),A[M+3+0]=A[M+1+32]=or(ce,ye,Ce),A[M+3+32]=A[M+1+64]=or(ye,Ce,Ce),A[M+3+64]=A[M+2+64]=A[M+0+96]=A[M+1+96]=A[M+2+96]=A[M+3+96]=Ce}function He(A,M){var Z=A[M-1+0],ce=A[M-1+32],ye=A[M-1+64],Ce=A[M-1+96],Ie=A[M-1-32],De=A[M+0-32],Me=A[M+1-32],ze=A[M+2-32];A[M+0+0]=A[M+2+32]=Z+Ie+1>>1,A[M+0+32]=A[M+2+64]=ce+Z+1>>1,A[M+0+64]=A[M+2+96]=ye+ce+1>>1,A[M+0+96]=Ce+ye+1>>1,A[M+3+0]=or(De,Me,ze),A[M+2+0]=or(Ie,De,Me),A[M+1+0]=A[M+3+32]=or(Z,Ie,De),A[M+1+32]=A[M+3+64]=or(ce,Z,Ie),A[M+1+64]=A[M+3+96]=or(ye,ce,Z),A[M+1+96]=or(Ce,ye,ce)}function br(A,M){var Z;for(Z=0;8>Z;++Z)a(A,M+32*Z,A,M-32,8)}function Cr(A,M){var Z;for(Z=0;8>Z;++Z)s(A,M,A[M-1],8),M+=32}function Er(A,M,Z){var ce;for(ce=0;8>ce;++ce)s(M,Z+32*ce,A,8)}function Kr(A,M){var Z,ce=8;for(Z=0;8>Z;++Z)ce+=A[M+Z-32]+A[M-1+32*Z];Er(ce>>4,A,M)}function Rn(A,M){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=A[M+Z-32];Er(ce>>3,A,M)}function ka(A,M){var Z,ce=4;for(Z=0;8>Z;++Z)ce+=A[M-1+32*Z];Er(ce>>3,A,M)}function Ys(A,M){Er(128,A,M)}function _i(A,M,Z){var ce=A[M-Z],ye=A[M+0],Ce=3*(ye-ce)+Uo[1020+A[M-2*Z]-A[M+Z]],Ie=Dl[112+(Ce+4>>3)];A[M-Z]=fi[255+ce+Dl[112+(Ce+3>>3)]],A[M+0]=fi[255+ye-Ie]}function dd(A,M,Z,ce){var ye=A[M+0],Ce=A[M+Z];return hi[255+A[M-2*Z]-A[M-Z]]>ce||hi[255+Ce-ye]>ce}function jc(A,M,Z,ce){return 4*hi[255+A[M-Z]-A[M+0]]+hi[255+A[M-2*Z]-A[M+Z]]<=ce}function ud(A,M,Z,ce,ye){var Ce=A[M-3*Z],Ie=A[M-2*Z],De=A[M-Z],Me=A[M+0],ze=A[M+Z],at=A[M+2*Z],gt=A[M+3*Z];return 4*hi[255+De-Me]+hi[255+Ie-ze]>ce?0:hi[255+A[M-4*Z]-Ce]<=ye&&hi[255+Ce-Ie]<=ye&&hi[255+Ie-De]<=ye&&hi[255+gt-at]<=ye&&hi[255+at-ze]<=ye&&hi[255+ze-Me]<=ye}function po(A,M,Z,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)jc(A,M+ce,Z,ye)&&_i(A,M+ce,Z)}function zi(A,M,Z,ce){var ye=2*ce+1;for(ce=0;16>ce;++ce)jc(A,M+ce*Z,1,ye)&&_i(A,M+ce*Z,1)}function Hi(A,M,Z,ce){var ye;for(ye=3;0<ye;--ye)po(A,M+=4*Z,Z,ce)}function Lf(A,M,Z,ce){var ye;for(ye=3;0<ye;--ye)zi(A,M+=4,Z,ce)}function Wi(A,M,Z,ce,ye,Ce,Ie,De){for(Ce=2*Ce+1;0<ye--;){if(ud(A,M,Z,Ce,Ie))if(dd(A,M,Z,De))_i(A,M,Z);else{var Me=A,ze=M,at=Z,gt=Me[ze-2*at],vt=Me[ze-at],ht=Me[ze+0],qt=Me[ze+at],St=Me[ze+2*at],ct=27*(Ct=Uo[1020+3*(ht-vt)+Uo[1020+gt-qt]])+63>>7,it=18*Ct+63>>7,Ct=9*Ct+63>>7;Me[ze-3*at]=fi[255+Me[ze-3*at]+Ct],Me[ze-2*at]=fi[255+gt+it],Me[ze-at]=fi[255+vt+ct],Me[ze+0]=fi[255+ht-ct],Me[ze+at]=fi[255+qt-it],Me[ze+2*at]=fi[255+St-Ct]}M+=ce}}function Ai(A,M,Z,ce,ye,Ce,Ie,De){for(Ce=2*Ce+1;0<ye--;){if(ud(A,M,Z,Ce,Ie))if(dd(A,M,Z,De))_i(A,M,Z);else{var Me=A,ze=M,at=Z,gt=Me[ze-at],vt=Me[ze+0],ht=Me[ze+at],qt=Dl[112+((St=3*(vt-gt))+4>>3)],St=Dl[112+(St+3>>3)],ct=qt+1>>1;Me[ze-2*at]=fi[255+Me[ze-2*at]+ct],Me[ze-at]=fi[255+gt+St],Me[ze+0]=fi[255+vt-qt],Me[ze+at]=fi[255+ht-ct]}M+=ce}}function El(A,M,Z,ce,ye,Ce){Wi(A,M,Z,1,16,ce,ye,Ce)}function xs(A,M,Z,ce,ye,Ce){Wi(A,M,1,Z,16,ce,ye,Ce)}function mo(A,M,Z,ce,ye,Ce){var Ie;for(Ie=3;0<Ie;--Ie)Ai(A,M+=4*Z,Z,1,16,ce,ye,Ce)}function Io(A,M,Z,ce,ye,Ce){var Ie;for(Ie=3;0<Ie;--Ie)Ai(A,M+=4,1,Z,16,ce,ye,Ce)}function fd(A,M,Z,ce,ye,Ce,Ie,De){Wi(A,M,ye,1,8,Ce,Ie,De),Wi(Z,ce,ye,1,8,Ce,Ie,De)}function kc(A,M,Z,ce,ye,Ce,Ie,De){Wi(A,M,1,ye,8,Ce,Ie,De),Wi(Z,ce,1,ye,8,Ce,Ie,De)}function hd(A,M,Z,ce,ye,Ce,Ie,De){Ai(A,M+4*ye,ye,1,8,Ce,Ie,De),Ai(Z,ce+4*ye,ye,1,8,Ce,Ie,De)}function fl(A,M,Z,ce,ye,Ce,Ie,De){Ai(A,M+4,1,ye,8,Ce,Ie,De),Ai(Z,ce+4,1,ye,8,Ce,Ie,De)}function Ci(){this.ba=new Ar,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Do(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $u(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new O}function tu(){this.xb=this.a=0,this.l=new As,this.ca=new Ar,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $u,this.ab=0,this.gc=o(4,pd),this.Oc=0}function Sc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new As,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ba(A,M,Z,ce,ye,Ce,Ie){for(A=A==null?0:A[M+0],M=0;M<Ie;++M)ye[Ce+M]=A+Z[ce+M]&255,A=ye[Ce+M]}function zu(A,M,Z,ce,ye,Ce,Ie){var De;if(A==null)ba(null,null,Z,ce,ye,Ce,Ie);else for(De=0;De<Ie;++De)ye[Ce+De]=A[M+De]+Z[ce+De]&255}function ec(A,M,Z,ce,ye,Ce,Ie){if(A==null)ba(null,null,Z,ce,ye,Ce,Ie);else{var De,Me=A[M+0],ze=Me,at=Me;for(De=0;De<Ie;++De)ze=at+(Me=A[M+De])-ze,at=Z[ce+De]+(-256&ze?0>ze?0:255:ze)&255,ze=Me,ye[Ce+De]=at}}function ru(A,M,Z,ce){var ye=M.width,Ce=M.o;if(t(A!=null&&M!=null),0>Z||0>=ce||Z+ce>Ce)return null;if(!A.Cc){if(A.ga==null){var Ie;if(A.ga=new Sc,(Ie=A.ga==null)||(Ie=M.width*M.o,t(A.Gb.length==0),A.Gb=i(Ie),A.Uc=0,A.Gb==null?Ie=0:(A.mb=A.Gb,A.nb=A.Uc,A.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=A.ga;var De=A.Fa,Me=A.P,ze=A.qc,at=A.mb,gt=A.nb,vt=Me+1,ht=ze-1,qt=Ie.l;if(t(De!=null&&at!=null&&M!=null),ss[0]=null,ss[1]=ba,ss[2]=zu,ss[3]=ec,Ie.ca=at,Ie.tb=gt,Ie.c=M.width,Ie.i=M.height,t(0<Ie.c&&0<Ie.i),1>=ze)M=0;else if(Ie.$a=De[Me+0]>>0&3,Ie.Z=De[Me+0]>>2&3,Ie.Lc=De[Me+0]>>4&3,Me=De[Me+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Me)M=0;else if(qt.put=Br,qt.ac=fn,qt.bc=Qr,qt.ma=Ie,qt.width=M.width,qt.height=M.height,qt.Da=M.Da,qt.v=M.v,qt.va=M.va,qt.j=M.j,qt.o=M.o,Ie.$a)e:{t(Ie.$a==1),M=rt();t:for(;;){if(M==null){M=0;break e}if(t(Ie!=null),Ie.mc=M,M.c=Ie.c,M.i=Ie.i,M.l=Ie.l,M.l.ma=Ie,M.l.width=Ie.c,M.l.height=Ie.i,M.a=0,re(M.m,De,vt,ht),!Qe(Ie.c,Ie.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&ke(M.s)?(Ie.ic=1,De=M.c*M.i,M.Ta=null,M.Ua=0,M.V=i(De),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Ie.ic=0,M=tt(M,Ie.c)),!M))break t;M=1;break e}Ie.mc=null,M=0}else M=ht>=Ie.c*Ie.i;Ie=!M}if(Ie)return null;A.ga.Lc!=1?A.Ga=0:ce=Ce-Z}t(A.ga!=null),t(Z+ce<=Ce);e:{if(M=(De=A.ga).c,Ce=De.l.o,De.$a==0){if(vt=A.rc,ht=A.Vc,qt=A.Fa,Me=A.P+1+Z*M,ze=A.mb,at=A.nb+Z*M,t(Me<=A.P+A.qc),De.Z!=0)for(t(ss[De.Z]!=null),Ie=0;Ie<ce;++Ie)ss[De.Z](vt,ht,qt,Me,ze,at,M),vt=ze,ht=at,at+=M,Me+=M;else for(Ie=0;Ie<ce;++Ie)a(ze,at,qt,Me,M),vt=ze,ht=at,at+=M,Me+=M;A.rc=vt,A.Vc=ht}else{if(t(De.mc!=null),M=Z+ce,t((Ie=De.mc)!=null),t(M<=Ie.i),Ie.C>=M)M=1;else if(De.ic||xt(),De.ic){De=Ie.V,vt=Ie.Ba,ht=Ie.c;var St=Ie.i,ct=(qt=1,Me=Ie.$/ht,ze=Ie.$%ht,at=Ie.m,gt=Ie.s,Ie.$),it=ht*St,Ct=ht*M,At=gt.wc,Mt=ct<Ct?zr(gt,ze,Me):null;t(ct<=it),t(M<=St),t(ke(gt));t:for(;;){for(;!at.h&&ct<Ct;){if(ze&At||(Mt=zr(gt,ze,Me)),t(Mt!=null),K(at),256>(St=wn(Mt.G[0],Mt.H[0],at)))De[vt+ct]=St,++ct,++ze>=ht&&(ze=0,++Me<=M&&!(Me%16)&&ge(Ie,Me));else{if(!(280>St)){qt=0;break t}St=qn(St-256,at);var dr,rr=wn(Mt.G[4],Mt.H[4],at);if(K(at),!(ct>=(rr=an(ht,rr=qn(rr,at)))&&it-ct>=St)){qt=0;break t}for(dr=0;dr<St;++dr)De[vt+ct+dr]=De[vt+ct+dr-rr];for(ct+=St,ze+=St;ze>=ht;)ze-=ht,++Me<=M&&!(Me%16)&&ge(Ie,Me);ct<Ct&&ze&At&&(Mt=zr(gt,ze,Me))}t(at.h==V(at))}ge(Ie,Me>M?M:Me);break t}!qt||at.h&&ct<it?(qt=0,Ie.a=at.h?5:3):Ie.$=ct,M=qt}else M=Ae(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,M,Ke);if(!M){ce=0;break e}}Z+ce>=Ce&&(A.Cc=1),ce=1}if(!ce)return null;if(A.Cc&&((ce=A.ga)!=null&&(ce.mc=null),A.ga=null,0<A.Ga))return alert("todo:WebPDequantizeLevels"),null}return A.nb+Z*ye}function G(A,M,Z,ce,ye,Ce){for(;0<ye--;){var Ie,De=A,Me=M+(Z?1:0),ze=A,at=M+(Z?0:3);for(Ie=0;Ie<ce;++Ie){var gt=ze[at+4*Ie];gt!=255&&(gt*=32897,De[Me+4*Ie+0]=De[Me+4*Ie+0]*gt>>23,De[Me+4*Ie+1]=De[Me+4*Ie+1]*gt>>23,De[Me+4*Ie+2]=De[Me+4*Ie+2]*gt>>23)}M+=Ce}}function Ne(A,M,Z,ce,ye){for(;0<ce--;){var Ce;for(Ce=0;Ce<Z;++Ce){var Ie=A[M+2*Ce+0],De=15&(ze=A[M+2*Ce+1]),Me=4369*De,ze=(240&ze|ze>>4)*Me>>16;A[M+2*Ce+0]=(240&Ie|Ie>>4)*Me>>16&240|(15&Ie|Ie<<4)*Me>>16>>4&15,A[M+2*Ce+1]=240&ze|De}M+=ye}}function Xe(A,M,Z,ce,ye,Ce,Ie,De){var Me,ze,at=255;for(ze=0;ze<ye;++ze){for(Me=0;Me<ce;++Me){var gt=A[M+Me];Ce[Ie+4*Me]=gt,at&=gt}M+=Z,Ie+=De}return at!=255}function nt(A,M,Z,ce,ye){var Ce;for(Ce=0;Ce<ye;++Ce)Z[ce+Ce]=A[M+Ce]>>8}function xt(){bs=G,ra=Ne,Xn=Xe,_n=nt}function Pt(A,M,Z){P[A]=function(ce,ye,Ce,Ie,De,Me,ze,at,gt,vt,ht,qt,St,ct,it,Ct,At){var Mt,dr=At-1>>1,rr=De[Me+0]|ze[at+0]<<16,$r=gt[vt+0]|ht[qt+0]<<16;t(ce!=null);var fr=3*rr+$r+131074>>2;for(M(ce[ye+0],255&fr,fr>>16,St,ct),Ce!=null&&(fr=3*$r+rr+131074>>2,M(Ce[Ie+0],255&fr,fr>>16,it,Ct)),Mt=1;Mt<=dr;++Mt){var vn=De[Me+Mt]|ze[at+Mt]<<16,Tn=gt[vt+Mt]|ht[qt+Mt]<<16,An=rr+vn+$r+Tn+524296,ln=An+2*(vn+$r)>>3;fr=ln+rr>>1,rr=(An=An+2*(rr+Tn)>>3)+vn>>1,M(ce[ye+2*Mt-1],255&fr,fr>>16,St,ct+(2*Mt-1)*Z),M(ce[ye+2*Mt-0],255&rr,rr>>16,St,ct+(2*Mt-0)*Z),Ce!=null&&(fr=An+$r>>1,rr=ln+Tn>>1,M(Ce[Ie+2*Mt-1],255&fr,fr>>16,it,Ct+(2*Mt-1)*Z),M(Ce[Ie+2*Mt+0],255&rr,rr>>16,it,Ct+(2*Mt+0)*Z)),rr=vn,$r=Tn}1&At||(fr=3*rr+$r+131074>>2,M(ce[ye+At-1],255&fr,fr>>16,St,ct+(At-1)*Z),Ce!=null&&(fr=3*$r+rr+131074>>2,M(Ce[Ie+At-1],255&fr,fr>>16,it,Ct+(At-1)*Z)))}}function Gt(){Qi[Hu]=vm,Qi[tc]=Pc,Qi[Vh]=Bf,Qi[ou]=Ll,Qi[Wu]=Ic,Qi[ha]=Qu,Qi[Ff]=Uf,Qi[Ec]=Pc,Qi[bd]=Ll,Qi[lu]=Ic,Qi[Vu]=Qu}function xr(A){return A&-16384?0>A?0:255:A>>Dc}function qr(A,M){return xr((19077*A>>8)+(26149*M>>8)-14234)}function sn(A,M,Z){return xr((19077*A>>8)-(6419*M>>8)-(13320*Z>>8)+8708)}function Zr(A,M){return xr((19077*A>>8)+(33050*M>>8)-17685)}function Sn(A,M,Z,ce,ye){ce[ye+0]=qr(A,Z),ce[ye+1]=sn(A,M,Z),ce[ye+2]=Zr(A,M)}function qa(A,M,Z,ce,ye){ce[ye+0]=Zr(A,M),ce[ye+1]=sn(A,M,Z),ce[ye+2]=qr(A,Z)}function $a(A,M,Z,ce,ye){var Ce=sn(A,M,Z);M=Ce<<3&224|Zr(A,M)>>3,ce[ye+0]=248&qr(A,Z)|Ce>>5,ce[ye+1]=M}function gs(A,M,Z,ce,ye){var Ce=240&Zr(A,M)|15;ce[ye+0]=240&qr(A,Z)|sn(A,M,Z)>>4,ce[ye+1]=Ce}function Qs(A,M,Z,ce,ye){ce[ye+0]=255,Sn(A,M,Z,ce,ye+1)}function Ms(A,M,Z,ce,ye){qa(A,M,Z,ce,ye),ce[ye+3]=255}function Lo(A,M,Z,ce,ye){Sn(A,M,Z,ce,ye),ce[ye+3]=255}function Js(A,M){return 0>A?0:A>M?M:A}function xo(A,M,Z){P[A]=function(ce,ye,Ce,Ie,De,Me,ze,at,gt){for(var vt=at+(-2&gt)*Z;at!=vt;)M(ce[ye+0],Ce[Ie+0],De[Me+0],ze,at),M(ce[ye+1],Ce[Ie+0],De[Me+0],ze,at+Z),ye+=2,++Ie,++Me,at+=2*Z;1&gt&&M(ce[ye+0],Ce[Ie+0],De[Me+0],ze,at)}}function go(A,M,Z){return Z==0?A==0?M==0?6:5:M==0?4:0:Z}function nu(A,M,Z,ce,ye){switch(A>>>30){case 3:pl(M,Z,ce,ye,0);break;case 2:Gn(M,Z,ce,ye);break;case 1:Zs(M,Z,ce,ye)}}function au(A,M){var Z,ce,ye=M.M,Ce=M.Nb,Ie=A.oc,De=A.pc+40,Me=A.oc,ze=A.pc+584,at=A.oc,gt=A.pc+600;for(Z=0;16>Z;++Z)Ie[De+32*Z-1]=129;for(Z=0;8>Z;++Z)Me[ze+32*Z-1]=129,at[gt+32*Z-1]=129;for(0<ye?Ie[De-1-32]=Me[ze-1-32]=at[gt-1-32]=129:(s(Ie,De-32-1,127,21),s(Me,ze-32-1,127,9),s(at,gt-32-1,127,9)),ce=0;ce<A.za;++ce){var vt=M.ya[M.aa+ce];if(0<ce){for(Z=-1;16>Z;++Z)a(Ie,De+32*Z-4,Ie,De+32*Z+12,4);for(Z=-1;8>Z;++Z)a(Me,ze+32*Z-4,Me,ze+32*Z+4,4),a(at,gt+32*Z-4,at,gt+32*Z+4,4)}var ht=A.Gd,qt=A.Hd+ce,St=vt.ad,ct=vt.Hc;if(0<ye&&(a(Ie,De-32,ht[qt].y,0,16),a(Me,ze-32,ht[qt].f,0,8),a(at,gt-32,ht[qt].ea,0,8)),vt.Za){var it=Ie,Ct=De-32+16;for(0<ye&&(ce>=A.za-1?s(it,Ct,ht[qt].y[15],4):a(it,Ct,ht[qt+1].y,0,4)),Z=0;4>Z;Z++)it[Ct+128+Z]=it[Ct+256+Z]=it[Ct+384+Z]=it[Ct+0+Z];for(Z=0;16>Z;++Z,ct<<=2)it=Ie,Ct=De+B0[Z],bo[vt.Ob[Z]](it,Ct),nu(ct,St,16*+Z,it,Ct)}else if(it=go(ce,ye,vt.Ob[0]),as[it](Ie,De),ct!=0)for(Z=0;16>Z;++Z,ct<<=2)nu(ct,St,16*+Z,Ie,De+B0[Z]);for(Z=vt.Gc,it=go(ce,ye,vt.Dd),Oi[it](Me,ze),Oi[it](at,gt),ct=St,it=Me,Ct=ze,255&(vt=Z>>0)&&(170&vt?Ol(ct,256,it,Ct):Ei(ct,256,it,Ct)),vt=at,ct=gt,255&(Z>>=8)&&(170&Z?Ol(St,320,vt,ct):Ei(St,320,vt,ct)),ye<A.Ub-1&&(a(ht[qt].y,0,Ie,De+480,16),a(ht[qt].f,0,Me,ze+224,8),a(ht[qt].ea,0,at,gt+224,8)),Z=8*Ce*A.B,ht=A.sa,qt=A.ta+16*ce+16*Ce*A.R,St=A.qa,vt=A.ra+8*ce+Z,ct=A.Ha,it=A.Ia+8*ce+Z,Z=0;16>Z;++Z)a(ht,qt+Z*A.R,Ie,De+32*Z,16);for(Z=0;8>Z;++Z)a(St,vt+Z*A.B,Me,ze+32*Z,8),a(ct,it+Z*A.B,at,gt+32*Z,8)}}function _c(A,M,Z,ce,ye,Ce,Ie,De,Me){var ze=[0],at=[0],gt=0,vt=Me!=null?Me.kd:0,ht=Me??new Do;if(A==null||12>Z)return 7;ht.data=A,ht.w=M,ht.ha=Z,M=[M],Z=[Z],ht.gb=[ht.gb];e:{var qt=M,St=Z,ct=ht.gb;if(t(A!=null),t(St!=null),t(ct!=null),ct[0]=0,12<=St[0]&&!r(A,qt[0],"RIFF")){if(r(A,qt[0]+8,"WEBP")){ct=3;break e}var it=Ue(A,qt[0]+4);if(12>it||4294967286<it){ct=3;break e}if(vt&&it>St[0]-8){ct=7;break e}ct[0]=it,qt[0]+=12,St[0]-=12}ct=0}if(ct!=0)return ct;for(it=0<ht.gb[0],Z=Z[0];;){e:{var Ct=A;St=M,ct=Z;var At=ze,Mt=at,dr=qt=[0];if((fr=gt=[gt])[0]=0,8>ct[0])ct=7;else{if(!r(Ct,St[0],"VP8X")){if(Ue(Ct,St[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var rr=Ue(Ct,St[0]+8),$r=1+he(Ct,St[0]+12);if(2147483648<=$r*(Ct=1+he(Ct,St[0]+15))){ct=3;break e}dr!=null&&(dr[0]=rr),At!=null&&(At[0]=$r),Mt!=null&&(Mt[0]=Ct),St[0]+=18,ct[0]-=18,fr[0]=1}ct=0}}if(gt=gt[0],qt=qt[0],ct!=0)return ct;if(St=!!(2&qt),!it&&gt)return 3;if(Ce!=null&&(Ce[0]=!!(16&qt)),Ie!=null&&(Ie[0]=St),De!=null&&(De[0]=0),Ie=ze[0],qt=at[0],gt&&St&&Me==null){ct=0;break}if(4>Z){ct=7;break}if(it&&gt||!it&&!gt&&!r(A,M[0],"ALPH")){Z=[Z],ht.na=[ht.na],ht.P=[ht.P],ht.Sa=[ht.Sa];e:{rr=A,ct=M,it=Z;var fr=ht.gb;At=ht.na,Mt=ht.P,dr=ht.Sa,$r=22,t(rr!=null),t(it!=null),Ct=ct[0];var vn=it[0];for(t(At!=null),t(dr!=null),At[0]=null,Mt[0]=null,dr[0]=0;;){if(ct[0]=Ct,it[0]=vn,8>vn){ct=7;break e}var Tn=Ue(rr,Ct+4);if(4294967286<Tn){ct=3;break e}var An=8+Tn+1&-2;if($r+=An,0<fr&&$r>fr){ct=3;break e}if(!r(rr,Ct,"VP8 ")||!r(rr,Ct,"VP8L")){ct=0;break e}if(vn[0]<An){ct=7;break e}r(rr,Ct,"ALPH")||(At[0]=rr,Mt[0]=Ct+8,dr[0]=Tn),Ct+=An,vn-=An}}if(Z=Z[0],ht.na=ht.na[0],ht.P=ht.P[0],ht.Sa=ht.Sa[0],ct!=0)break}Z=[Z],ht.Ja=[ht.Ja],ht.xa=[ht.xa];e:if(fr=A,ct=M,it=Z,At=ht.gb[0],Mt=ht.Ja,dr=ht.xa,rr=ct[0],Ct=!r(fr,rr,"VP8 "),$r=!r(fr,rr,"VP8L"),t(fr!=null),t(it!=null),t(Mt!=null),t(dr!=null),8>it[0])ct=7;else{if(Ct||$r){if(fr=Ue(fr,rr+4),12<=At&&fr>At-12){ct=3;break e}if(vt&&fr>it[0]-8){ct=7;break e}Mt[0]=fr,ct[0]+=8,it[0]-=8,dr[0]=$r}else dr[0]=5<=it[0]&&fr[rr+0]==47&&!(fr[rr+4]>>5),Mt[0]=it[0];ct=0}if(Z=Z[0],ht.Ja=ht.Ja[0],ht.xa=ht.xa[0],M=M[0],ct!=0)break;if(4294967286<ht.Ja)return 3;if(De==null||St||(De[0]=ht.xa?2:1),Ie=[Ie],qt=[qt],ht.xa){if(5>Z){ct=7;break}De=Ie,vt=qt,St=Ce,A==null||5>Z?A=0:5<=Z&&A[M+0]==47&&!(A[M+4]>>5)?(it=[0],fr=[0],At=[0],re(Mt=new T,A,M,Z),ir(Mt,it,fr,At)?(De!=null&&(De[0]=it[0]),vt!=null&&(vt[0]=fr[0]),St!=null&&(St[0]=At[0]),A=1):A=0):A=0}else{if(10>Z){ct=7;break}De=qt,A==null||10>Z||!ul(A,M+3,Z-3)?A=0:(vt=A[M+0]|A[M+1]<<8|A[M+2]<<16,St=16383&(A[M+7]<<8|A[M+6]),A=16383&(A[M+9]<<8|A[M+8]),1&vt||3<(vt>>1&7)||!(vt>>4&1)||vt>>5>=ht.Ja||!St||!A?A=0:(Ie&&(Ie[0]=St),De&&(De[0]=A),A=1))}if(!A||(Ie=Ie[0],qt=qt[0],gt&&(ze[0]!=Ie||at[0]!=qt)))return 3;Me!=null&&(Me[0]=ht,Me.offset=M-Me.w,t(4294967286>M-Me.w),t(Me.offset==Me.ha-Z));break}return ct==0||ct==7&&gt&&Me==null?(Ce!=null&&(Ce[0]|=ht.na!=null&&0<ht.na.length),ce!=null&&(ce[0]=Ie),ye!=null&&(ye[0]=qt),0):ct}function md(A,M,Z){var ce=M.width,ye=M.height,Ce=0,Ie=0,De=ce,Me=ye;if(M.Da=A!=null&&0<A.Da,M.Da&&(De=A.cd,Me=A.bd,Ce=A.v,Ie=A.j,11>Z||(Ce&=-2,Ie&=-2),0>Ce||0>Ie||0>=De||0>=Me||Ce+De>ce||Ie+Me>ye))return 0;if(M.v=Ce,M.j=Ie,M.va=Ce+De,M.o=Ie+Me,M.U=De,M.T=Me,M.da=A!=null&&0<A.da,M.da){if(!Se(De,Me,Z=[A.ib],Ce=[A.hb]))return 0;M.ib=Z[0],M.hb=Ce[0]}return M.ob=A!=null&&A.ob,M.Kb=A==null||!A.Sd,M.da&&(M.ob=M.ib<3*ce/4&&M.hb<3*ye/4,M.Kb=0),1}function xd(A){if(A==null)return 2;if(11>A.S){var M=A.f.RGBA;M.fb+=(A.height-1)*M.A,M.A=-M.A}else M=A.f.kb,A=A.height,M.O+=(A-1)*M.fa,M.fa=-M.fa,M.N+=(A-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(A-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(A-1)*M.lb,M.lb=-M.lb);return 0}function gd(A,M,Z,ce){if(ce==null||0>=A||0>=M)return 2;if(Z!=null){if(Z.Da){var ye=Z.cd,Ce=Z.bd,Ie=-2&Z.v,De=-2&Z.j;if(0>Ie||0>De||0>=ye||0>=Ce||Ie+ye>A||De+Ce>M)return 2;A=ye,M=Ce}if(Z.da){if(!Se(A,M,ye=[Z.ib],Ce=[Z.hb]))return 2;A=ye[0],M=Ce[0]}}ce.width=A,ce.height=M;e:{var Me=ce.width,ze=ce.height;if(A=ce.S,0>=Me||0>=ze||!(A>=Hu&&13>A))A=2;else{if(0>=ce.Rd&&ce.sd==null){Ie=Ce=ye=M=0;var at=(De=Me*La[A])*ze;if(11>A||(Ce=(ze+1)/2*(M=(Me+1)/2),A==12&&(Ie=(ye=Me)*ze)),(ze=i(at+2*Ce+Ie))==null){A=1;break e}ce.sd=ze,11>A?((Me=ce.f.RGBA).eb=ze,Me.fb=0,Me.A=De,Me.size=at):((Me=ce.f.kb).y=ze,Me.O=0,Me.fa=De,Me.Fd=at,Me.f=ze,Me.N=0+at,Me.Ab=M,Me.Cd=Ce,Me.ea=ze,Me.W=0+at+Ce,Me.Db=M,Me.Ed=Ce,A==12&&(Me.F=ze,Me.J=0+at+2*Ce),Me.Tc=Ie,Me.lb=ye)}if(M=1,ye=ce.S,Ce=ce.width,Ie=ce.height,ye>=Hu&&13>ye)if(11>ye)A=ce.f.RGBA,M&=(De=Math.abs(A.A))*(Ie-1)+Ce<=A.size,M&=De>=Ce*La[ye],M&=A.eb!=null;else{A=ce.f.kb,De=(Ce+1)/2,at=(Ie+1)/2,Me=Math.abs(A.fa),ze=Math.abs(A.Ab);var gt=Math.abs(A.Db),vt=Math.abs(A.lb),ht=vt*(Ie-1)+Ce;M&=Me*(Ie-1)+Ce<=A.Fd,M&=ze*(at-1)+De<=A.Cd,M=(M&=gt*(at-1)+De<=A.Ed)&Me>=Ce&ze>=De&gt>=De,M&=A.y!=null,M&=A.f!=null,M&=A.ea!=null,ye==12&&(M&=vt>=Ce,M&=ht<=A.Tc,M&=A.F!=null)}else M=0;A=M?0:2}}return A!=0||Z!=null&&Z.fd&&(A=xd(ce)),A}var Sa=64,vo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hl=24,Za=32,Ac=8,on=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fe("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(A){return A},P.Predictor2=function(A,M,Z){return M[Z+0]},P.Predictor3=function(A,M,Z){return M[Z+1]},P.Predictor4=function(A,M,Z){return M[Z-1]},P.Predictor5=function(A,M,Z){return Ee(Ee(A,M[Z+1]),M[Z+0])},P.Predictor6=function(A,M,Z){return Ee(A,M[Z-1])},P.Predictor7=function(A,M,Z){return Ee(A,M[Z+0])},P.Predictor8=function(A,M,Z){return Ee(M[Z-1],M[Z+0])},P.Predictor9=function(A,M,Z){return Ee(M[Z+0],M[Z+1])},P.Predictor10=function(A,M,Z){return Ee(Ee(A,M[Z-1]),Ee(M[Z+0],M[Z+1]))},P.Predictor11=function(A,M,Z){var ce=M[Z+0];return 0>=ve(ce>>24&255,A>>24&255,(M=M[Z-1])>>24&255)+ve(ce>>16&255,A>>16&255,M>>16&255)+ve(ce>>8&255,A>>8&255,M>>8&255)+ve(255&ce,255&A,255&M)?ce:A},P.Predictor12=function(A,M,Z){var ce=M[Z+0];return(Ye((A>>24&255)+(ce>>24&255)-((M=M[Z-1])>>24&255))<<24|Ye((A>>16&255)+(ce>>16&255)-(M>>16&255))<<16|Ye((A>>8&255)+(ce>>8&255)-(M>>8&255))<<8|Ye((255&A)+(255&ce)-(255&M)))>>>0},P.Predictor13=function(A,M,Z){var ce=M[Z-1];return(xe((A=Ee(A,M[Z+0]))>>24&255,ce>>24&255)<<24|xe(A>>16&255,ce>>16&255)<<16|xe(A>>8&255,ce>>8&255)<<8|xe(A>>0&255,ce>>0&255))>>>0};var rs=P.PredictorAdd0;P.PredictorAdd1=Fe,fe("Predictor2","PredictorAdd2"),fe("Predictor3","PredictorAdd3"),fe("Predictor4","PredictorAdd4"),fe("Predictor5","PredictorAdd5"),fe("Predictor6","PredictorAdd6"),fe("Predictor7","PredictorAdd7"),fe("Predictor8","PredictorAdd8"),fe("Predictor9","PredictorAdd9"),fe("Predictor10","PredictorAdd10"),fe("Predictor11","PredictorAdd11"),fe("Predictor12","PredictorAdd12"),fe("Predictor13","PredictorAdd13");var ga=P.PredictorAdd2;qe("ColorIndexInverseTransform","MapARGB","32b",(function(A){return A>>8&255}),(function(A){return A})),qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(A){return A}),(function(A){return A>>8&255}));var ui,Bn=P.ColorIndexInverseTransform,Rs=P.MapARGB,za=P.VP8LColorIndexInverseTransformAlpha,Vi=P.MapAlpha,Ha=P.VP8LPredictorsAdd=[];Ha.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var vs,wa,ns,Gi,Tl,Fo,su,pl,Gn,Ol,Zs,Ei,Pl,vd,Il,Mo,Ki,Bs,Xi,Ti,Yi,yo,Cc,ys,bs,ra,Xn,_n,_a=i(511),Ro=i(2041),iu=i(225),Bo=i(767),yd=0,Uo=Ro,Dl=iu,fi=Bo,hi=_a,Hu=0,tc=1,Vh=2,ou=3,Wu=4,ha=5,Ff=6,Ec=7,bd=8,lu=9,Vu=10,Tc=[2,3,7],Gu=[3,3,11],wd=[280,256,256,256,40],M0=[0,1,1,1,0],Mf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Gh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ku=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xu=8,rc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],cu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],du=null,Rf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],R0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Oc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Nd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],bo=[],Oi=[],wo=1,uu=2,ss=[],Qi=[];Pt("UpsampleRgbLinePair",Sn,3),Pt("UpsampleBgrLinePair",qa,3),Pt("UpsampleRgbaLinePair",Lo,4),Pt("UpsampleBgraLinePair",Ms,4),Pt("UpsampleArgbLinePair",Qs,4),Pt("UpsampleRgba4444LinePair",gs,2),Pt("UpsampleRgb565LinePair",$a,2);var vm=P.UpsampleRgbLinePair,Bf=P.UpsampleBgrLinePair,Pc=P.UpsampleRgbaLinePair,Ll=P.UpsampleBgraLinePair,Ic=P.UpsampleArgbLinePair,Qu=P.UpsampleRgba4444LinePair,Uf=P.UpsampleRgb565LinePair,qo=16,ml=1<<qo-1,Yn=-227,na=482,Dc=6,ws=0,pi=i(256),Fl=i(256),jd=i(256),Ji=i(256),Ju=i(na-Yn),qf=i(na-Yn);xo("YuvToRgbRow",Sn,3),xo("YuvToBgrRow",qa,3),xo("YuvToRgbaRow",Lo,4),xo("YuvToBgraRow",Ms,4),xo("YuvToArgbRow",Qs,4),xo("YuvToRgba4444Row",gs,2),xo("YuvToRgb565Row",$a,2);var B0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Lc=[0,2,8],Kh=[8,7,6,4,4,2,2,2,1,1,1,1],$o=1;this.WebPDecodeRGBA=function(A,M,Z,ce,ye){var Ce=tc,Ie=new Ci,De=new Ar;Ie.ba=De,De.S=Ce,De.width=[De.width],De.height=[De.height];var Me=De.width,ze=De.height,at=new Ir;if(at==null||A==null)var gt=2;else t(at!=null),gt=_c(A,M,Z,at.width,at.height,at.Pd,at.Qd,at.format,null);if(gt!=0?Me=0:(Me!=null&&(Me[0]=at.width[0]),ze!=null&&(ze[0]=at.height[0]),Me=1),Me){De.width=De.width[0],De.height=De.height[0],ce!=null&&(ce[0]=De.width),ye!=null&&(ye[0]=De.height);e:{if(ce=new As,(ye=new Do).data=A,ye.w=M,ye.ha=Z,ye.kd=1,M=[0],t(ye!=null),((A=_c(ye.data,ye.w,ye.ha,null,null,null,M,null,ye))==0||A==7)&&M[0]&&(A=4),(M=A)==0){if(t(Ie!=null),ce.data=ye.data,ce.w=ye.w+ye.offset,ce.ha=ye.ha-ye.offset,ce.put=Br,ce.ac=fn,ce.bc=Qr,ce.ma=Ie,ye.xa){if((A=rt())==null){Ie=1;break e}if((function(vt,ht){var qt=[0],St=[0],ct=[0];t:for(;;){if(vt==null)return 0;if(ht==null)return vt.a=2,0;if(vt.l=ht,vt.a=0,re(vt.m,ht.data,ht.w,ht.ha),!ir(vt.m,qt,St,ct)){vt.a=3;break t}if(vt.xb=uu,ht.width=qt[0],ht.height=St[0],!Qe(qt[0],St[0],1,vt,null))break t;return 1}return t(vt.a!=0),0})(A,ce)){if(ce=(M=gd(ce.width,ce.height,Ie.Oa,Ie.ba))==0){t:{ce=A;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((Z=ce.l)!=null),t((ye=Z.ma)!=null),ce.xb!=0){if(ce.ca=ye.ba,ce.tb=ye.tb,t(ce.ca!=null),!md(ye.Oa,Z,ou)){ce.a=2;break r}if(!tt(ce,Z.width)||Z.da)break r;if((Z.da||jt(ce.ca.S))&&xt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&xt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!Oe(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!Ae(ce,ce.V,ce.Ba,ce.c,ce.i,Z.o,je))break r;ye.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(M=A.a)}else M=A.a}else{if((A=new Hn)==null){Ie=1;break e}if(A.Fa=ye.na,A.P=ye.P,A.qc=ye.Sa,ua(A,ce)){if((M=gd(ce.width,ce.height,Ie.Oa,Ie.ba))==0){if(A.Aa=0,Z=Ie.Oa,t((ye=A)!=null),Z!=null){if(0<(Me=0>(Me=Z.Md)?0:100<Me?255:255*Me/100)){for(ze=at=0;4>ze;++ze)12>(gt=ye.pb[ze]).lc&&(gt.ia=Me*Kh[0>gt.lc?0:gt.lc]>>3),at|=gt.ia;at&&(alert("todo:VP8InitRandom"),ye.ia=1)}ye.Ga=Z.Id,100<ye.Ga?ye.Ga=100:0>ye.Ga&&(ye.Ga=0)}_t(A,ce)||(M=A.a)}}else M=A.a}M==0&&Ie.Oa!=null&&Ie.Oa.fd&&(M=xd(Ie.ba))}Ie=M}Ce=Ie!=0?null:11>Ce?De.f.RGBA.eb:De.f.kb.y}else Ce=null;return Ce};var La=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,I){for(var U="",C=0;C<4;C++)U+=String.fromCharCode(P[I++]);return U}function u(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16)>>>0}function f(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16|P[I+3]<<24)>>>0}new c;var m=[0],p=[0],y=[],v=new c,g=e,b=(function(P,I){var U={},C=0,O=!1,R=0,z=0;if(U.frames=[],!(function(q,V,B,K){for(var oe=0;oe<K;oe++)if(q[V+oe]!=B.charCodeAt(oe))return!0;return!1})(P,I,"RIFF",4)){var H,Q;for(f(P,I+=4),I+=8;I<P.length;){var J=d(P,I),re=f(P,I+=4);I+=4;var X=re+(1&re);switch(J){case"VP8 ":case"VP8L":U.frames[C]===void 0&&(U.frames[C]={}),(T=U.frames[C]).src_off=O?z:I-8,T.src_size=R+re+8,C++,O&&(O=!1,R=0,z=0);break;case"VP8X":(T=U.header={}).feature_flags=P[I];var ee=I+4;T.canvas_width=1+u(P,ee),ee+=3,T.canvas_height=1+u(P,ee),ee+=3;break;case"ALPH":O=!0,R=X+8,z=I-8;break;case"ANIM":(T=U.header).bgcolor=f(P,I),ee=I+4,T.loop_count=(H=P)[(Q=ee)+0]<<0|H[Q+1]<<8,ee+=2;break;case"ANMF":var W,T;(T=U.frames[C]={}).offset_x=2*u(P,I),I+=3,T.offset_y=2*u(P,I),I+=3,T.width=1+u(P,I),I+=3,T.height=1+u(P,I),I+=3,T.duration=u(P,I),I+=3,W=P[I++],T.dispose=1&W,T.blend=W>>1&1}J!="ANMF"&&(I+=X)}return U}})(g,0);b.response=g,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,j=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],p=[w.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var S=j[0],E=v.WebPDecodeRGBA(g,S.src_off,S.src_size,p,m);S.rgba=E,S.imgwidth=p[0],S.imgheight=m[0];for(var _=0;_<p[0]*m[0]*4;_++)y[_]=E[_];return this.width=p,this.height=m,this.data=y,this}(function(e){var t=function(){return typeof Bk=="function"},r=function(m,p,y,v){var g=4,b=o;switch(v){case e.image_compression.FAST:g=1,b=i;break;case e.image_compression.MEDIUM:g=6,b=l;break;case e.image_compression.SLOW:g=9,b=c}m=a(m,p,y,b);var w=Bk(m,{level:g});return e.__addimage__.arrayBufferToBinaryString(w)},a=function(m,p,y,v){for(var g,b,w,j=m.length/p,N=new Uint8Array(m.length+j),S=u(),E=0;E<j;E+=1){if(w=E*p,g=m.subarray(w,w+p),v)N.set(v(g,y,b),w+E);else{for(var _,P=S.length,I=[];_<P;_+=1)I[_]=S[_](g,y,b);var U=f(I.concat());N.set(I[U],w+E)}b=g}return N},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var y,v=[],g=m.length;v[0]=1;for(var b=0;b<g;b+=1)y=m[b-p]||0,v[b+1]=m[b]-y+256&255;return v},o=function(m,p,y){var v,g=[],b=m.length;g[0]=2;for(var w=0;w<b;w+=1)v=y&&y[w]||0,g[w+1]=m[w]-v+256&255;return g},l=function(m,p,y){var v,g,b=[],w=m.length;b[0]=3;for(var j=0;j<w;j+=1)v=m[j-p]||0,g=y&&y[j]||0,b[j+1]=m[j]+256-(v+g>>>1)&255;return b},c=function(m,p,y){var v,g,b,w,j=[],N=m.length;j[0]=4;for(var S=0;S<N;S+=1)v=m[S-p]||0,g=y&&y[S]||0,b=y&&y[S-p]||0,w=d(v,g,b),j[S+1]=m[S]-w+256&255;return j},d=function(m,p,y){if(m===p&&p===y)return m;var v=Math.abs(p-y),g=Math.abs(m-y),b=Math.abs(m+p-y-y);return v<=g&&v<=b?m:g<=b?p:y},u=function(){return[s,i,o,l,c]},f=function(m){var p=m.map((function(y){return y.reduce((function(v,g){return v+Math.abs(g)}),0)}));return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,y,v){var g,b,w,j,N,S,E,_,P,I,U,C,O,R,z,H=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(w=new I1e(m)).imgData,b=w.bits,g=w.colorSpace,N=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){P=(_=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,U=new Uint8Array(P*w.colors),I=new Uint8Array(P);var J,re=w.pixelBitlength-w.bits;for(R=0,z=0;R<P;R++){for(O=_[R],J=0;J<re;)U[z++]=O>>>J&255,J+=w.bits;I[R]=O>>>J&255}}if(w.bits===16){P=(_=new Uint32Array(w.decodePixels().buffer)).length,U=new Uint8Array(P*(32/w.pixelBitlength)*w.colors),I=new Uint8Array(P*(32/w.pixelBitlength)),C=w.colors>1,R=0,z=0;for(var X=0;R<P;)O=_[R++],U[z++]=O>>>0&255,C&&(U[z++]=O>>>16&255,O=_[R++],U[z++]=O>>>0&255),I[X++]=O>>>16&255;b=8}v!==e.image_compression.NONE&&t()?(m=r(U,w.width*w.colors,w.colors,v),E=r(I,w.width,1,v)):(m=U,E=I,H=void 0)}if(w.colorType===3&&(g=this.color_spaces.INDEXED,S=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,W=0;for(R=0,P=ee.length;R<P;++R)W+=ee[R];if((W/=255)===P-1&&ee.indexOf(0)!==-1)j=[ee.indexOf(0)];else if(W!==P){for(_=w.decodePixels(),I=new Uint8Array(_.length),R=0,P=_.length;R<P;R++)I[R]=ee[_[R]];E=r(I,w.width,1)}}var T=(function(q){var V;switch(q){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V})(v);return H===this.decode.FLATE_DECODE&&(Q="/Predictor "+T+" "),Q+="/Colors "+N+" /BitsPerComponent "+b+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:y,data:m,index:p,filter:H,decodeParameters:Q,transparency:j,palette:S,sMask:E,predictor:T,width:w.width,height:w.height,bitsPerComponent:b,colorSpace:g}}}})(cn.API),(function(e){e.processGIF89A=function(t,r,a,s){var i=new D1e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new Bj(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A})(cn.API),Md.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Md.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Xa.log("bit decode error:"+r)}},Md.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Md.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Md.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Md.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Md.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Md.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Md.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},Md.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new Md(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Bj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(cn.API),uD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new uD(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Bj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(cn.API),cn.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],f=a[d+1],m=a[d+2],p=a[d+3];i[l++]=u,i[l++]=f,i[l++]=m,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},cn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},lp=cn.API,$v=lp.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,m=0,p=e.length,y=0,v=l[0]||c,g=[];for(r=0;r<p;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(m=f&&Ta(d[a])==="object"&&!isNaN(parseInt(d[a][y],10))?d[a][y]/u:0,g.push((l[a]||v)/c+m)),y=a;return g},oD=lp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return lp.processArabic&&(e=lp.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:$v.apply(this,arguments).reduce((function(i,o){return i+o}),0)},lD=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},cD=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],f=[u],m=r.textIndent||0,p=0,y=0,v=e.split(" "),g=$v.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),w=[];v.map((function(N){(N=N.split(/\s*\n/)).length>1?w=w.concat(N.map((function(S,E){return(E&&S.length?`
`:"")+S}))):w.push(N[0])})),v=w,c=oD.apply(this,[b,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(a=v[i],c&&a[0]==`
`&&(a=a.substr(1),j=1),m+p+(y=(s=$v.apply(this,[a,r])).reduce((function(N,S){return N+S}),0))>t||j){if(y>t){for(l=lD.apply(this,[a,s,t-(m+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);y=s.slice(a.length-(u[0]?u[0].length:0)).reduce((function(N,S){return N+S}),0)}else u=[a];f.push(u),m=y+c,p=g}else u.push(a),m+=p+y,p=g}return d=c?function(N,S){return(S?b:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(d)},lp.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(cD.apply(this,[a[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var m,p,y,v,g=["{"];for(var b in f){if(m=f[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=i(b).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof m=="number")m<0?(y=i(m).slice(3),v="-"):(y=i(m).slice(2),v=""),y=v+y.slice(0,-1)+a[y.slice(-1)];else{if(Ta(m)!=="object")throw new Error("Don't know what to do with value type "+Ta(m)+".");y=o(m)}g.push(p+y)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,y,v,g={},b=1,w=g,j=[],N="",S="",E=f.length-1,_=1;_<E;_+=1)(v=f[_])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(j.push([w,y]),w={},y=void 0):v=="}"?((p=j.pop())[0][p[1]]=w,y=void 0,w=p[0]):v=="-"?b=-1:y===void 0?r.hasOwnProperty(v)?(N+=r[v],y=parseInt(N,16)*b,b=1,N=""):N+=v:r.hasOwnProperty(v)?(S+=r[v],w[y]=parseInt(S,16)*b,b=1,y=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var m=f.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(cn.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(px(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])})(cn),(function(e){function t(){return(dn.canvg?Promise.resolve(dn.canvg):n1(()=>import("./index.es-CoD7d0BX.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}cn.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw Xa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Xa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then((function(y){return y.fromString(f,r,m)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(y){return y.render(m)})).then((function(){p.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)}))}})(),cn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},cn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function m(y,v){var g,b=!1;for(g=0;g<y.length;g+=1)y[g]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(f=0;f<p;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ta(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(cn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,m=i.length;f<m;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,f,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,m=(l=Object.keys(i).sort((function(p,y){return p-y}))).length;f<m;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<m.length;y++)p+=String.fromCharCode(m[y]);var v=d();u({data:p,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+up(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+up(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+up(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var y=d();u({data:m,addLength1:!0,objectId:y}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+up(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+up(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},m=f.pdfEscape,p=f.activeFontKey,y=f.fonts,v=p,g="",b=0,w="",j=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(w=l,v=p,Array.isArray(l)&&(w=l[0]),b=0;b<w.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[w[b].charCodeAt(0)]),o||w[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?g+=w[b]:g+="";var N="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?N=m(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(N=r(g,y[v])),f.isHex=!0,{text:N,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(cn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(cn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,f=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,j=0;this.__bidiEngine__={};var N=function(C){var O=C.charCodeAt(),R=O>>8,z=v[R];return z!==void 0?f[256*z+(255&O)]:R===252||R===253?"AL":b.test(R)?"L":R===8?"R":"N"},S=function(C){for(var O,R=0;R<C.length;R++){if((O=N(C.charAt(R)))==="L")return!1;if(O==="R")return!0}return!1},E=function(C,O,R,z){var H,Q,J,re,X=O[z];switch(X){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(X="AN");break;case"AL":w=!0,X="R";break;case"WS":X="N";break;case"CS":z<1||z+1>=O.length||(H=R[z-1])!=="EN"&&H!=="AN"||(Q=O[z+1])!=="EN"&&Q!=="AN"?X="N":w&&(Q="AN"),X=Q===H?Q:"N";break;case"ES":X=(H=z>0?R[z-1]:"B")==="EN"&&z+1<O.length&&O[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&R[z-1]==="EN"){X="EN";break}if(w){X="N";break}for(J=z+1,re=O.length;J<re&&O[J]==="ET";)J++;X=J<re&&O[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(re=O.length,J=z+1;J<re&&O[J]==="NSM";)J++;if(J<re){var ee=C[z],W=ee>=1425&&ee<=2303||ee===64286;if(H=O[J],W&&(H==="R"||H==="AL")){X="R";break}}}X=z<1||(H=O[z-1])==="B"?"N":R[z-1];break;case"B":w=!1,s=!0,X=j;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":X="N"}return X},_=function(C,O,R){var z=C.split("");return R&&P(z,R,{hiLevel:j}),z.reverse(),O&&O.reverse(),z.join("")},P=function(C,O,R){var z,H,Q,J,re,X=-1,ee=C.length,W=0,T=[],q=j?p:m,V=[];for(w=!1,s=!1,i=!1,H=0;H<ee;H++)V[H]=N(C[H]);for(Q=0;Q<ee;Q++){if(re=W,T[Q]=E(C,V,T,Q),z=240&(W=q[re][y[T[Q]]]),W&=15,O[Q]=J=q[W][5],z>0)if(z===16){for(H=X;H<Q;H++)O[H]=1;X=-1}else X=-1;if(q[W][6])X===-1&&(X=Q);else if(X>-1){for(H=X;H<Q;H++)O[H]=J;X=-1}V[Q]==="B"&&(O[Q]=0),R.hiLevel|=J}i&&(function(B,K,oe){for(var me=0;me<oe;me++)if(B[me]==="S"){K[me]=j;for(var se=me-1;se>=0&&B[se]==="WS";se--)K[se]=j}})(V,O,ee)},I=function(C,O,R,z,H){if(!(H.hiLevel<C)){if(C===1&&j===1&&!s)return O.reverse(),void(R&&R.reverse());for(var Q,J,re,X,ee=O.length,W=0;W<ee;){if(z[W]>=C){for(re=W+1;re<ee&&z[re]>=C;)re++;for(X=W,J=re-1;X<J;X++,J--)Q=O[X],O[X]=O[J],O[J]=Q,R&&(Q=R[X],R[X]=R[J],R[J]=Q);W=re}W++}}},U=function(C,O,R){var z=C.split(""),H={hiLevel:j};return R||(R=[]),P(z,R,H),(function(Q,J,re){if(re.hiLevel!==0&&u)for(var X,ee=0;ee<Q.length;ee++)J[ee]===1&&(X=g.indexOf(Q[ee]))>=0&&(Q[ee]=g[X+1])})(z,R,H),I(2,z,O,R,H),I(1,z,O,R,H),z.join("")};return this.__bidiEngine__.doBidiReorder=function(C,O,R){if((function(H,Q){if(Q)for(var J=0;J<H.length;J++)Q[J]=J;l===void 0&&(l=S(H)),d===void 0&&(d=S(H))})(C,O),o||!c||d)if(o&&c&&l^d)j=l?1:0,C=_(C,O,R);else if(!o&&c&&d)j=l?1:0,C=U(C,O,R),C=_(C,O);else if(!o||l||c||d){if(o&&!c&&l^d)C=_(C,O),l?(j=0,C=U(C,O,R)):(j=1,C=U(C,O,R),C=_(C,O));else if(o&&l&&!c&&d)j=1,C=U(C,O,R),C=_(C,O);else if(!o&&!c&&l^d){var z=u;l?(j=1,C=U(C,O,R),j=0,u=!1,C=U(C,O,R),u=z):(j=0,C=U(C,O,R),C=_(C,O),j=1,u=!1,C=U(C,O,R),u=z,C=_(C,O))}}else j=0,C=U(C,O,R);else j=l?1:0,C=U(C,O,R);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,c=C.isOutputVisual,l=C.isInputRtl,d=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(cn),cn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new _0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new X1e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new L1e(this.contents),this.head=new M1e(this),this.name=new $1e(this),this.cmap=new Z9(this),this.toUnicode={},this.hhea=new R1e(this),this.maxp=new z1e(this),this.hmtx=new H1e(this),this.post=new U1e(this),this.os2=new B1e(this),this.loca=new K1e(this),this.glyf=new W1e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var eu,_0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),L1e=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,f,m,p,y,v;for(v in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),o=Math.floor(f/c),u=16*p-f,(s=new _0).writeInt(this.scalarType),s.writeShort(p),s.writeShort(f),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,y=[],r)for(m=r[v],s.writeString(v),s.writeInt(e(m)),s.writeInt(d),s.writeInt(m.length),y=y.concat(m),v==="head"&&(l=d),d+=m.length;d%4;)y.push(0),d++;return s.write(y),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=eB.call(r);r.length%4;)r.push(0);for(i=new _0(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),F1e={}.hasOwnProperty,qu=function(e,t){for(var r in t)F1e.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};eu=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var M1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new _0).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t})(),fD=(function(){function e(t,r){var a,s,i,o,l,c,d,u,f,m,p,y,v,g,b,w,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),d=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),u=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var N,S;for(S=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)S.push(t.readUInt16());return S})(),c=b=0,j=i.length;b<j;c=++b)for(g=i[c],a=w=y=v[c];y<=g?w<=g:w>=g;a=y<=g?++w:--w)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-y)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,f,m,p,y,v,g,b,w,j,N,S,E,_,P,I,U,C,O,R,z,H,Q,J,re,X,ee,W,T,q,V,B,K,oe,me,se,de,Re,he;switch(z=new _0,o=Object.keys(t).sort((function(Ue,Oe){return Ue-Oe})),r){case"macroman":for(v=0,g=(function(){var Ue=[];for(y=0;y<256;++y)Ue.push(0);return Ue})(),w={0:0},i={},H=0,X=o.length;H<X;H++)w[se=t[s=o[H]]]==null&&(w[se]=++v),i[s]={old:t[s],new:w[t[s]]},g[s]=w[t[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(g),{charMap:i,subtable:z.data,maxGlyphID:v+1};case"unicode":for(O=[],f=[],j=0,w={},a={},b=d=null,Q=0,ee=o.length;Q<ee;Q++)w[S=t[s=o[Q]]]==null&&(w[S]=++j),a[s]={old:S,new:w[S]},l=w[S]-s,b!=null&&l===d||(b&&f.push(b),O.push(s),d=l),b=s;for(b&&f.push(b),f.push(65535),O.push(65535),U=2*(I=O.length),P=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(P/2)/Math.LN2,_=2*I-P,c=[],E=[],p=[],y=J=0,W=O.length;J<W;y=++J){if(C=O[y],u=f[y],C===65535){c.push(0),E.push(0);break}if(C-(R=a[C].new)>=32768)for(c.push(0),E.push(2*(p.length+I-y)),s=re=C;C<=u?re<=u:re>=u;s=C<=u?++re:--re)p.push(a[s].new);else c.push(R-C),E.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*I+2*p.length),z.writeUInt16(0),z.writeUInt16(U),z.writeUInt16(P),z.writeUInt16(m),z.writeUInt16(_),oe=0,T=f.length;oe<T;oe++)s=f[oe],z.writeUInt16(s);for(z.writeUInt16(0),me=0,q=O.length;me<q;me++)s=O[me],z.writeUInt16(s);for(de=0,V=c.length;de<V;de++)l=c[de],z.writeUInt16(l);for(Re=0,B=E.length;Re<B;Re++)N=E[Re],z.writeUInt16(N);for(he=0,K=p.length;he<K;he++)v=p[he],z.writeUInt16(v);return{charMap:a,subtable:z.data,maxGlyphID:j+1}}},e})(),Z9=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new fD(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=fD.encode(r,a),(i=new _0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),R1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),B1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),U1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t})(),q1e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},$1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,f,m,p;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=f=0,m=s.length;f<m;o=++f)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new q1e(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),z1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),H1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)f.push(r.readInt16());return f})(),this.widths=(function(){var u,f,m,p;for(p=[],u=0,f=(m=this.metrics).length;u<f;u++)o=m[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),eB=[].slice,W1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,f,m;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new _0(a.read(i))).readShort(),u=c.readShort(),m=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new G1e(c,u,m,d,f):new V1e(c,l,u,m,d,f),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),V1e=(function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),G1e=(function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new _0(eB.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),K1e=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qu(t,eu),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),f=0;f<s.length;++f)u[4*f+3]=255&s[f],u[4*f+2]=(65280&s[f])>>8,u[4*f+1]=(16711680&s[f])>>16,u[4*f]=(4278190080&s[f])>>24;return u},t})(),X1e=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,f,m,p,y,v,g,b;for(s in a=Z9.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},b=a.charMap)p[(c=b[s]).old]=c.new;for(y in m=a.maxGlyphID,o)y in p||(p[y]=m++);return u=(function(w){var j,N;for(j in N={},w)N[w[j]]=j;return N})(p),f=Object.keys(u).sort((function(w,j){return w-j})),v=(function(){var w,j,N;for(N=[],w=0,j=f.length;w<j;w++)l=f[w],N.push(u[l]);return N})(),i=this.font.glyf.encode(o,v,p),d=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();cn.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const Y1e=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=On(),[i,o]=L.useState([]),[l,c]=L.useState([]),[d,u]=L.useState(null),[f,m]=L.useState(!0),[p,y]=L.useState(!1),[v,g]=L.useState(!1),[b,w]=L.useState([]),[j,N]=L.useState(!1),[S,E]=L.useState(!1),[_,P]=L.useState(!1),[I,U]=L.useState(!1),[C,O]=L.useState([]),[R,z]=L.useState(null),[H,Q]=L.useState({description:"",quantity:1,rate:0}),[J,re]=L.useState(!1),[X,ee]=L.useState(!1),[W,T]=L.useState(wi),q=L.useCallback(async()=>{m(!0);try{const Oe=await W7(),le=Oe?.data||Oe||[];o(Array.isArray(le)?le:[]);try{const te=await ld();c(te?.data||te||[])}catch{c([])}}catch(Oe){a(Oe.message||"Failed to load invoices")}finally{m(!1)}},[t,a]);L.useEffect(()=>{q()},[q]),L.useEffect(()=>{const Oe=()=>q();return window.addEventListener("refresh-invoices",Oe),()=>window.removeEventListener("refresh-invoices",Oe)},[q]);const V=Oe=>l.find(le=>le.id===Oe),B=Oe=>{switch(Oe){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Oe=>Oe.status!=="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0),awaitingPayment:i.filter(Oe=>Oe.status!=="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0),paidThisMonth:i.filter(Oe=>Oe.status==="Paid").reduce((Oe,le)=>Oe+(le.amount||0),0)},oe=()=>{b.length===i.length?w([]):w(i.map(Oe=>Oe.id))},me=async()=>{const Oe=[...b];if(Oe.length!==0){N(!0),s(`Processing payment status for ${Oe.length} items...`);try{await Promise.all(Oe.map(le=>Nv(le,{status:"Paid"}))),o(le=>le.map(te=>Oe.includes(te.id)?{...te,status:"Paid"}:te)),r(`Successfully marked ${Oe.length} invoices as paid`),w([]),q()}catch{a("Bulk update failed. Some items may not have been updated.")}finally{N(!1)}}},se=async()=>{[...b].length!==0&&P(!0)},de=async()=>{const Oe=[...b];if(Oe.length!==0){N(!0),P(!1),s(`Executing batch deletion for ${Oe.length} registry entries...`);try{await Promise.all(Oe.map(le=>aI(le))),o(le=>le.filter(te=>!Oe.includes(te.id))),r(`Successfully removed ${Oe.length} invoices from registry`),w([]),q()}catch{a("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{N(!1)}}};L.useEffect(()=>{if(d){const Oe=d.lineItems||d.items||[];O(Oe),U(!1),z(null),Q({description:"",quantity:1,rate:0}),T(d.currency||wi),ee(!1)}},[d]);const Re=async()=>{if(d){y(!0);try{await Nv(d.id,{items:C,lineItems:C}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,items:C,lineItems:C}:le)),u({...d,items:C,lineItems:C}),U(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to save breakdown:",Oe),a(Oe.message||"Failed to save breakdown")}finally{y(!1)}}},he=async()=>{if(d){y(!0);try{await Nv(d.id,{status:"Paid"}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,status:"Paid"}:le)),u({...d,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to update invoice:",Oe),a(Oe.message||"Failed to update invoice")}finally{y(!1)}}},Ue=async()=>{if(d){g(!0);try{await aI(d.id),o(Oe=>Oe.filter(le=>le.id!==d.id)),u(null),E(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Oe){console.error("Failed to delete invoice:",Oe),a(Oe.message||"Failed to delete invoice")}finally{g(!1)}}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Invoice"]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:n.jsx(Fu,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:n.jsx(Is,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:n.jsx(gn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Oe,le)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl ${Oe.bg} ${Oe.color} flex items-center justify-center`,children:ut.cloneElement(Oe.icon,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Oe.label}),n.jsx("h3",{className:"text-xl font-black text-slate-900",children:Oe.value})]})]},le))}),n.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[n.jsx("th",{className:"px-6 py-4 w-10",children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&b.length===i.length,onChange:oe})}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-right"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-50",children:f?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center",children:n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Oe=>{const le=b.includes(Oe.id);return n.jsxs("tr",{onClick:()=>u(Oe),className:`group transition-colors cursor-pointer ${le?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:te=>te.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:le,onChange:()=>w(te=>le?te.filter(Se=>Se!==Oe.id):[...te,Oe.id])})}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Oe.number}),n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Oe.id.substring(0,8)]})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vs,{src:V(Oe.companyId)?.logo,fallbackText:V(Oe.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:V(Oe.companyId)?.name||"Unknown Partner"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm font-bold text-slate-900",children:hf(Oe.amount,Oe.currency)})}),n.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Oe.dueDate}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${B(Oe.status)}`,children:Oe.status})}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(ya,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Oe.id)})})]})})}),b.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:b.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Oe=>{Oe.stopPropagation(),me()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(gn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),n.jsxs("button",{onClick:Oe=>{Oe.stopPropagation(),se()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>w([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),d&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>u(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:n.jsx(ea,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:d.number}),n.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${B(d.status)}`,children:d.status})]}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[n.jsx(Vs,{src:V(d.companyId)?.logo,fallbackText:V(d.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:V(d.companyId)?.name||"Unknown Company"}),n.jsx("p",{className:"text-xs text-slate-500",children:V(d.companyId)?.website||""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),X?n.jsx("button",{onClick:async()=>{y(!0);try{await Nv(d.id,{currency:W}),o(Oe=>Oe.map(le=>le.id===d.id?{...le,currency:W}:le)),u({...d,currency:W}),ee(!1),r("Currency updated successfully!")}catch(Oe){a(Oe.message||"Failed to update currency")}finally{y(!1)}},disabled:p,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:n.jsx(Ni,{className:"w-3 h-3"})}):n.jsx("button",{onClick:()=>ee(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:n.jsx(Sl,{className:"w-3 h-3"})})]}),X?n.jsx("select",{value:W,onChange:Oe=>T(Oe.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zp.map(Oe=>n.jsxs("option",{value:Oe.code,children:[Oe.code," (",Oe.symbol,")"]},Oe.code))}):n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:hf(d.amount,d.currency)})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:d.dueDate})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),n.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:d.description||"No additional strategic description provided for this statement."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),I?n.jsxs("button",{onClick:Re,disabled:p,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[n.jsx(Ni,{className:"w-3 h-3"})," ",p?"Saving...":"Save"]}):n.jsxs("button",{onClick:()=>U(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[n.jsx(Sl,{className:"w-3 h-3"})," Edit"]})]}),n.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[C.map(Oe=>n.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:Oe.description}),n.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Oe.quantity," @ ",cf(d.currency),Oe.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:hf(Oe.amount,d.currency)})]},Oe.id)),C.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[d.status!=="Paid"&&n.jsxs("button",{onClick:he,disabled:p,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[p?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(gn,{className:"w-4 h-4"})," Confirm Receipt"]}),n.jsx("button",{onClick:()=>E(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:n.jsx(Lr,{className:"w-5 h-5"})})]})]})]}),S&&d&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),n.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>E(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:Ue,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),_&&b.length>0&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",b.length," Invoice",b.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",b.length," invoice",b.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>P(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:de,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${b.length} Invoice${b.length>1?"s":""}`})]})]})})]})]})},Q1e=()=>n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),n.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(ed,{className:"w-4 h-4"})," Invite Member"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),n.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),n.jsx("div",{className:"divide-y divide-slate-100",children:Xv.map(e=>n.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Vs,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&n.jsx(Oy,{className:"w-4 h-4 text-indigo-600"})]}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[n.jsx(Qa,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),n.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:n.jsx(Gk,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),J1e=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:a=1,circularCrop:s=!0})=>{const[i,o]=L.useState({x:0,y:0}),[l,c]=L.useState(.5),[d,u]=L.useState(!1),[f,m]=L.useState({x:0,y:0}),[p,y]=L.useState(!1),[v,g]=L.useState(!1),b=L.useRef(null),w=L.useRef(null),j=L.useRef(300),N=L.useCallback(()=>{if(!w.current||!b.current)return null;const U=w.current.getBoundingClientRect(),C=j.current,O=U.width/2,R=U.height/2,z=b.current.getBoundingClientRect(),H=z.left-U.left,Q=z.top-U.top,J=(O-C/2-H-i.x)/l,re=(R-C/2-Q-i.y)/l,X=C/l;return{x:Math.max(0,J*(b.current.naturalWidth/b.current.width)),y:Math.max(0,re*(b.current.naturalHeight/b.current.height)),width:Math.min(b.current.naturalWidth,X*(b.current.naturalWidth/b.current.width)),height:Math.min(b.current.naturalHeight,X*(b.current.naturalHeight/b.current.height))}},[i,l]),S=L.useCallback(async()=>{if(b.current){y(!0);try{const I=N();if(!I)throw new Error("Failed to calculate crop area");const U=b.current,C=document.createElement("canvas"),O=C.getContext("2d");if(!O)throw new Error("Failed to create canvas context");const R=Math.min(I.width,I.height);C.width=R,C.height=R,s&&(O.beginPath(),O.arc(R/2,R/2,R/2,0,2*Math.PI),O.clip()),O.drawImage(U,I.x,I.y,I.width,I.height,0,0,R,R);const z=C.toDataURL("image/jpeg",.9);t(z)}catch(I){console.error("Error cropping image:",I)}finally{y(!1)}}},[N,s,t]),E=L.useCallback(I=>{I.preventDefault(),u(!0),m({x:I.clientX-i.x,y:I.clientY-i.y})},[i]),_=L.useCallback(I=>{if(!d||!w.current||!b.current)return;const U=w.current,C=b.current,O=U.getBoundingClientRect(),R=C.getBoundingClientRect(),z=I.clientX-f.x,H=I.clientY-f.y,Q=R.width*l,J=R.height*l,re=Math.max(0,(Q-O.width)/2),X=Math.max(0,(J-O.height)/2);l<=1?o({x:z,y:H}):o({x:Math.max(-re,Math.min(re,z)),y:Math.max(-X,Math.min(X,H))})},[d,f,l]),P=L.useCallback(()=>{u(!1)},[]);return L.useEffect(()=>{if(d)return document.addEventListener("mousemove",_),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",P)}},[d,_,P]),L.useEffect(()=>{if(w.current){const U=w.current.getBoundingClientRect();j.current=Math.min(U.width*.8,U.height*.8,300)}},[]),n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),n.jsx("button",{onClick:r,disabled:p,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{ref:w,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:d?"grabbing":"grab"},children:[n.jsx("img",{ref:b,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),w.current&&b.current){const U=w.current.getBoundingClientRect();j.current=Math.min(U.width*.8,U.height*.8,300)}},draggable:!1}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:E,style:{pointerEvents:p?"none":"auto",cursor:d?"grabbing":"grab"},children:[n.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:a.toString()}}),n.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),n.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:I=>{const U=parseFloat(I.target.value);c(U),U<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:p}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[n.jsx("span",{children:"30%"}),n.jsx("span",{children:"300%"})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,disabled:p,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:S,disabled:p||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lu,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},Z1e=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=L.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=L.useState(null),[l,c]=L.useState(!1),[d,u]=L.useState(!1),[f,m]=L.useState(!1),[p,y]=L.useState(!1),[v,g]=L.useState(!1),[b,w]=L.useState(!1);L.useEffect(()=>{j(),N()},[]);const j=async()=>{c(!0);try{const I=await dae("default");I.success&&I.data&&s(I.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},N=async()=>{m(!0);try{const I=await fae("default");I.success&&I.data&&o(I.data)}catch(I){console.error("Failed to load retention stats:",I)}finally{m(!1)}},S=async()=>{u(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await uae("default",{...a,updatedBy:I})).success&&(t("Retention policy updated successfully"),await N())}catch(I){r(I.message||"Failed to update retention policy")}finally{u(!1)}},E=async()=>{y(!0);try{const I=await hae("default",50);I.success&&(t(`Archive completed: ${I.data.archived} emails archived`),await N())}catch(I){r(I.message||"Failed to trigger archive")}finally{y(!1)}},_=async()=>{g(!0);try{const I=await pae("default",50);I.success&&(t(`Cleanup completed: ${I.data.deleted} emails deleted`),await N())}catch(I){r(I.message||"Failed to trigger cleanup")}finally{g(!1)}},P=async()=>{w(!0);try{const I=await mae("default",{format:"csv"});if(typeof I=="string"){const U=new Blob([I],{type:"text/csv"}),C=window.URL.createObjectURL(U),O=document.createElement("a");O.href=C,O.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(C),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(I){r(I.message||"Failed to export archived emails")}finally{w(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(wD,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?n.jsx("div",{className:"p-8 text-center",children:n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),n.jsx("input",{type:"number",min:"1",max:"20",value:a.retentionYears,onChange:I=>s({...a,retentionYears:parseInt(I.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),n.jsx("input",{type:"number",min:"0",max:a.retentionYears,value:a.coldStorageYears,onChange:I=>s({...a,coldStorageYears:parseInt(I.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),n.jsx("button",{onClick:()=>s({...a,archiveEnabled:!a.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),n.jsx("button",{onClick:()=>s({...a,autoCleanupEnabled:!a.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsx("button",{onClick:S,disabled:d,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:d?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(ku,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),f?n.jsx("div",{className:"p-8 text-center",children:n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Ou,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:E,disabled:p,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[p?n.jsx(yt,{className:"w-5 h-5 animate-spin text-indigo-600"}):n.jsx(ku,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),n.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),n.jsxs("button",{onClick:_,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?n.jsx(yt,{className:"w-5 h-5 animate-spin text-red-600"}):n.jsx(kU,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),n.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),n.jsxs("button",{onClick:P,disabled:b,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[b?n.jsx(yt,{className:"w-5 h-5 animate-spin text-green-600"}):n.jsx(h0,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),n.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},eye=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=L.useState([]),[i,o]=L.useState(!1),[l,c]=L.useState(!1),[d,u]=L.useState(null),[f,m]=L.useState({name:"",content:"",isDefault:!1}),[p,y]=L.useState(!1),[v,g]=L.useState(null),[b,w]=L.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});L.useEffect(()=>{j(),N()},[]);const j=async()=>{o(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I)return;const U=await tM(I);s(U.data||[])}catch(I){console.error("Failed to load signatures:",I)}finally{o(!1)}},N=()=>{try{const I=localStorage.getItem("user_display_preferences");I&&w(JSON.parse(I))}catch(I){console.error("Failed to load display preferences:",I)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(b)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},E=async()=>{if(!f.name||!f.content){r("Name and content are required");return}y(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I){r("Please log in to save signature");return}d?(await lse(d.id,{userId:I,...f}),t("Signature updated successfully")):(await ose({userId:I,...f}),t("Signature created successfully")),c(!1),u(null),m({name:"",content:"",isDefault:!1}),await j()}catch(I){r(I.message||"Failed to save signature")}finally{y(!1)}},_=async I=>{if(confirm("Are you sure you want to delete this signature?")){g(I);try{const U=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await cse(I,U),t("Signature deleted successfully"),await j()}catch(U){r(U.message||"Failed to delete signature")}finally{g(null)}}},P=I=>{I?(u(I),m({name:I.name||"",content:I.content||"",isDefault:I.isDefault||!1})):(u(null),m({name:"",content:"",isDefault:!1})),c(!0)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(ea,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),n.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Signature"]})]}),i?n.jsx("div",{className:"p-8 text-center",children:n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(ea,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),n.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):n.jsx("div",{className:"space-y-3",children:a.map(I=>n.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:I.name}),I.isDefault&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),n.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I.content}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P(I),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:n.jsx(Sl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_(I.id),disabled:v===I.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===I.id?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]})]})},I.id))})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Hj,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(I=>n.jsx("button",{onClick:()=>w({...b,layout:I}),className:`p-4 rounded-xl border-2 transition-all ${b.layout===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(I=>n.jsx("button",{onClick:()=>w({...b,density:I}),className:`p-4 rounded-xl border-2 transition-all ${b.density===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Tu,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),n.jsxs("select",{value:b.emailFormat,onChange:I=>w({...b,emailFormat:I.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),n.jsx("option",{value:"plain",children:"Plain Text"}),n.jsx("option",{value:"rich",children:"Rich Text"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),n.jsx("button",{onClick:()=>w({...b,showPreview:!b.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${b.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${b.showPreview?"translate-x-6":"translate-x-0"}`})})]}),b.showPreview&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),n.jsx("input",{type:"number",min:"1",max:"10",value:b.previewLines,onChange:I=>w({...b,previewLines:parseInt(I.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:d?"Edit Signature":"Create Signature"}),n.jsx("button",{onClick:()=>{c(!1),u(null),m({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),n.jsx("input",{type:"text",value:f.name,onChange:I=>m({...f,name:I.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),n.jsx("textarea",{value:f.content,onChange:I=>m({...f,content:I.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),n.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),n.jsx("button",{onClick:()=>m({...f,isDefault:!f.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${f.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${f.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>{c(!1),u(null),m({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:p||!f.name||!f.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),d?"Update":"Create"," Signature"]})})]})]})})]})},tye=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:a}=On(),[s,i]=L.useState("profile"),[o,l]=L.useState(iv),[c,d]=L.useState(!1),[u,f]=L.useState([]),[m,p]=L.useState(""),[y,v]=L.useState(!1),[g,b]=L.useState(!1),[w,j]=L.useState(!1),[N,S]=L.useState(null),[E,_]=L.useState(!1),[P,I]=L.useState(!1),[U,C]=L.useState([]),[O,R]=L.useState(!1),[z,H]=L.useState(""),[Q,J]=L.useState(!1),[re,X]=L.useState(null),[ee,W]=L.useState(null),[T,q]=L.useState(null),[V,B]=L.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Am(),language:"English"}),[K,oe]=L.useState(!1),[me,se]=L.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[de,Re]=L.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:Am(),language:"English"}),[he,Ue]=L.useState(!1),[Oe,le]=L.useState(null),[te,Se]=L.useState(""),[we,Pe]=L.useState(!1),[fe,ue]=L.useState(!1),[Ee,Ye]=L.useState(""),xe=L.useRef(null),ve=(dt,Tt)=>{l(Ht=>Ht.map(Ve=>Ve.id===dt?{...Ve,[Tt]:!Ve[Tt]}:Ve))};L.useEffect(()=>{s==="connections"&&(async()=>{const Tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(Tt)try{const Ht=await e3(Tt);j(Ht.connected||!1),S(Ht.userEmail||null)}catch{j(!1)}})()},[s,e]);const Fe=async()=>{R(!0);try{const dt=await ad(z||void 0);C(dt.data||[])}catch{C([])}finally{R(!1)}};L.useEffect(()=>{s==="users"&&Fe()},[s,z]),L.useEffect(()=>{(async()=>{if(s==="notifications")try{const Tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Tt)return;const Ve=(await $ne(Tt)).data||[];if(Ve.length>0){const jt=iv.map(gr=>Ve.find(Ar=>Ar.id===gr.id)||gr);l(jt)}else l(iv)}catch(Tt){console.error("[SETTINGS] Failed to load notification preferences:",Tt),l(iv)}})()},[s,e]);const $e=async()=>{_(!0);try{const dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Tt=await Z7(dt);Tt.authUrl&&(window.location.href=Tt.authUrl)}catch{a("Failed to connect Google Calendar"),_(!1)}},_e=async()=>{I(!0);try{const dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await qae(dt),j(!1),S(null),r("Google account disconnected successfully")}catch{a("Failed to disconnect Google account")}finally{I(!1)}};L.useEffect(()=>{(async()=>{let Tt=e||JSON.parse(localStorage.getItem("user_data")||"null");if(Tt){const Ht=Am();Re({name:Tt.name||"",email:Tt.email||"",avatar:Tt.avatar||"",phone:Tt.phone||"",jobTitle:Tt.jobTitle||"",department:Tt.department||"",bio:Tt.bio||"",timezone:Tt.timezone||Ht,language:Tt.language||"English"}),Se(Tt.avatar||"")}})()},[e]);const Be=(dt,Tt=400,Ht=400,Ve=.8)=>new Promise((jt,gr)=>{if(dt.size>5242880){gr(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const Ar=new FileReader;Ar.onload=Ir=>{const Xt=new Image;Xt.onload=()=>{let Qt=Xt.width,mr=Xt.height;Qt>mr?Qt>Tt&&(mr=mr*Tt/Qt,Qt=Tt):mr>Ht&&(Qt=Qt*Ht/mr,mr=Ht);const Fr=document.createElement("canvas");Fr.width=Qt,Fr.height=mr;const fn=Fr.getContext("2d");if(!fn){gr(new Error("Failed to create canvas context"));return}fn.drawImage(Xt,0,0,Qt,mr);const Br=Fr.toDataURL("image/jpeg",Ve);if(Br.length>9e5)if(Ve>.5){Be(dt,Tt,Ht,Ve-.1).then(jt).catch(gr);return}else{gr(new Error("Image is too large even after compression. Please use a smaller image."));return}jt(Br)},Xt.onerror=()=>gr(new Error("Failed to load image")),Xt.src=Ir.target?.result},Ar.onerror=()=>gr(new Error("Failed to read file")),Ar.readAsDataURL(dt)}),qe=async dt=>{const Tt=dt.target.files?.[0];if(Tt){if(!Tt.type.startsWith("image/")){a("Please select a valid image file.");return}le(null);try{const Ht=new FileReader;Ht.onload=Ve=>{const jt=Ve.target?.result;Ye(jt),ue(!0)},Ht.onerror=()=>{a("Failed to read image file.")},Ht.readAsDataURL(Tt)}catch(Ht){const Ve=Ht.message||"Failed to load image. Please try a different image.";a(Ve),le(Ve),xe.current&&(xe.current.value="")}}},Ze=async dt=>{ue(!1),Pe(!0);try{const Ht=await(await fetch(dt)).blob(),Ve=new File([Ht],"cropped-image.jpg",{type:"image/jpeg"}),jt=await Be(Ve,400,400,.8);Se(jt),Re(gr=>({...gr,avatar:jt})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(Tt){const Ht=Tt.message||"Failed to process cropped image.";a(Ht),le(Ht)}finally{Pe(!1),xe.current&&(xe.current.value="")}},Vt=()=>{ue(!1),Ye(""),xe.current&&(xe.current.value="")},Dt=async()=>{if(!de.name.trim()){le("Full name is required.");return}Ue(!0);try{const dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Tt=await One(dt,de),Ht=Tt.data||Tt;localStorage.setItem("user_data",JSON.stringify(Ht)),t(Ht),r("Profile updated successfully!"),le(null)}catch{a("Failed to update profile.")}finally{Ue(!1)}};return n.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&n.jsxs("button",{onClick:Dt,disabled:he,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[he?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Ni,{className:"w-4 h-4"}),"Save Changes"]})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[n.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:n.jsx(ol,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:n.jsx(Ey,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:n.jsx(Kj,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:n.jsx(zj,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:n.jsx(m0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:n.jsx(wD,{className:"w-4 h-4"})}].map(dt=>n.jsxs("button",{onClick:()=>i(dt.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===dt.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[dt.icon,dt.label]},dt.id))}),n.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Oe&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Oe}),n.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[n.jsxs("div",{className:"relative group",children:[n.jsx(Vs,{src:te,alt:de.name||"User",fallbackText:de.name||de.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),we&&n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:n.jsx(yt,{className:"w-6 h-6 text-white animate-spin"})}),n.jsx("button",{onClick:()=>xe.current?.click(),disabled:we,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:n.jsx(Qd,{className:"w-6 h-6"})}),n.jsx("input",{ref:xe,type:"file",accept:"image/*",onChange:qe,className:"hidden",disabled:we})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900",children:de.name||"Set Name"}),n.jsxs("p",{className:"text-slate-500 text-sm",children:[de.jobTitle||"No Title","  ",de.department||"No Dept"]}),n.jsx("p",{className:"text-slate-400 text-xs mt-1",children:de.email})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:de.name,onChange:dt=>Re({...de,name:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(kl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:de.jobTitle,onChange:dt=>Re({...de,jobTitle:dt.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:de.department,onChange:dt=>Re({...de,department:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:de.phone,onChange:dt=>Re({...de,phone:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:de.bio,onChange:dt=>Re({...de,bio:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(f6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:de.timezone,onChange:dt=>Re({...de,timezone:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:ex.map(dt=>n.jsx("option",{value:dt.value,children:dt.label},dt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),n.jsx("select",{value:de.language,onChange:dt=>Re({...de,language:dt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:m6.map(dt=>n.jsx("option",{value:dt.value,children:dt.label},dt.value))})]})]})]}),s==="notifications"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),n.jsx("div",{className:"space-y-4",children:o.map(dt=>n.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:dt.label}),n.jsx("p",{className:"text-xs text-slate-500",children:dt.description})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),n.jsx("button",{onClick:()=>ve(dt.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${dt.inApp?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${dt.inApp?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),n.jsx("button",{onClick:()=>ve(dt.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${dt.email?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${dt.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},dt.id))}),n.jsx("div",{className:"pt-4 border-t border-slate-100",children:n.jsxs("button",{onClick:async()=>{try{const dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!dt){a("Please log in to save preferences.");return}await zne(dt,o),r("Notification preferences saved successfully!")}catch(dt){console.error("[SETTINGS] Failed to save notification preferences:",dt),a(dt.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[n.jsx(Ni,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:n.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),n.jsx("div",{className:"p-6",children:w?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),N&&n.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:N})]})]}),n.jsx("button",{onClick:_e,disabled:P,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:P?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(oa,{className:"w-4 h-4 text-blue-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:n.jsx(Qa,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(mx,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[n.jsx("li",{children:" View and manage calendar events"}),n.jsx("li",{children:" Create, view, and manage files in Google Drive"}),n.jsx("li",{children:" Create and edit documents in Google Docs"}),n.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:n.jsx(zj,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),n.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),n.jsx("button",{onClick:$e,disabled:E,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:E?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(oa,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(Qa,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),n.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(mx,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),n.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[n.jsx("li",{children:" Your data is encrypted and securely stored"}),n.jsx("li",{children:" We only request the minimum permissions needed"}),n.jsx("li",{children:" You can disconnect at any time"}),n.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),n.jsxs("button",{onClick:()=>{X(null),B({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Am(),language:"English"}),J(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[n.jsx(ed,{className:"w-4 h-4"})," Add User"]})]}),n.jsx("div",{className:"p-4 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:z,onChange:dt=>H(dt.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:O?n.jsx("div",{className:"p-8 text-center",children:n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):U.map(dt=>n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vs,{src:dt.avatar,alt:dt.name||"",fallbackText:dt.name||dt.email||"U",className:"w-10 h-10 border",isAvatar:!0}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900 text-sm",children:dt.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[dt.email,"  ",n.jsx("span",{className:"font-bold text-indigo-600",children:dt.role})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{X(dt),B({email:dt.email,name:dt.name,role:dt.role||"User",jobTitle:dt.jobTitle||"",department:dt.department||"",phone:dt.phone||"",bio:dt.bio||"",timezone:dt.timezone||Am(),language:dt.language||"English"}),J(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:n.jsx(Sl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>q(dt),className:"p-2 text-slate-400 hover:text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},dt.id))})]}),s==="preferences"&&n.jsx(eye,{currentUser:e,showSuccess:r,showError:a}),s==="workspace"&&n.jsx(Z1e,{currentUser:e,showSuccess:r,showError:a})]})]}),Q&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:re?"Edit User":"Add New User"}),n.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:V.name,onChange:dt=>B({...V,name:dt.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),n.jsx("input",{type:"email",value:V.email,onChange:dt=>B({...V,email:dt.target.value}),placeholder:"Email Address",disabled:!!re,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),n.jsxs("select",{value:V.role,onChange:dt=>B({...V,role:dt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),n.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),n.jsx("option",{value:"Admin",children:"Admin - Full access"}),n.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[V.role==="Viewer"&&"Read-only access to shared inbox",V.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",V.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",V.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(kl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:V.jobTitle,onChange:dt=>B({...V,jobTitle:dt.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:V.department,onChange:dt=>B({...V,department:dt.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:V.phone,onChange:dt=>B({...V,phone:dt.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:V.bio,onChange:dt=>B({...V,bio:dt.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(f6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:V.timezone,onChange:dt=>B({...V,timezone:dt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:ex.map(dt=>n.jsx("option",{value:dt.value,children:dt.label},dt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),n.jsx("select",{value:V.language,onChange:dt=>B({...V,language:dt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:m6.map(dt=>n.jsx("option",{value:dt.value,children:dt.label},dt.value))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{oe(!0);try{re?await Ane(re.id,V):await _ne(V),J(!1),Fe(),r(re?"User updated successfully!":"User created successfully!")}catch(dt){a(dt.message||"Failed to save user")}finally{oe(!1)}},disabled:K||!V.name||!V.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),re?"Updating...":"Creating..."]}):re?"Update":"Invite"})]})]})}),T&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:T.name}),n.jsx("p",{className:"text-xs text-slate-500",children:T.email}),T.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:T.role})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>q(null),disabled:ee===T.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:async()=>{W(T.id);try{await Tne(T.id),await Fe(),q(null),r("User deleted successfully")}catch(dt){a(dt.message||"Failed to delete user")}finally{W(null)}},disabled:ee===T.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===T.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),fe&&Ee&&n.jsx(J1e,{imageSrc:Ee,onCrop:Ze,onCancel:Vt,aspectRatio:1,circularCrop:!0})]})},rye=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),a=e?.role==="Admin",[s,i]=L.useState("companies"),[o,l]=L.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,d]=L.useState({groups:[],totalDuplicates:0}),[u,f]=L.useState({groups:[],totalDuplicates:0}),[m,p]=L.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[y,v]=L.useState({mismatches:[],count:0}),[g,b]=L.useState(null),[w,j]=L.useState(!1),[N,S]=L.useState({}),E=L.useCallback(async()=>{l(J=>({...J,companies:!0}));try{const J=await Fae(),re=J?.data??J;d({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),d({groups:[],totalDuplicates:0})}finally{l(J=>({...J,companies:!1}))}},[r]),_=L.useCallback(async()=>{l(J=>({...J,contacts:!0}));try{const J=await Mae(),re=J?.data??J;f({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),f({groups:[],totalDuplicates:0})}finally{l(J=>({...J,contacts:!1}))}},[r]),P=L.useCallback(async()=>{l(J=>({...J,incomplete:!0}));try{const J=await Rae(),re=J?.data??J;p({companies:re.companies||[],contacts:re.contacts||[],deals:re.deals||[],projects:re.projects||[],invoices:re.invoices||[]})}catch{r("Failed to load incomplete records"),p({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(J=>({...J,incomplete:!1}))}},[r]),I=L.useCallback(async()=>{l(J=>({...J,mismatches:!0}));try{const J=await Bae(),re=J?.data??J;v({mismatches:re.mismatches||[],count:re.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(J=>({...J,mismatches:!1}))}},[r]);L.useEffect(()=>{a&&(s==="companies"?E():s==="contacts"?_():s==="incomplete"?P():s==="mismatches"&&I())},[a,s,E,_,P,I]);const U=()=>{s==="companies"?E():s==="contacts"?_():s==="incomplete"?P():I()},C=(J,re,X,ee,W,T)=>{b({open:!0,type:J,primaryId:re,secondaryId:X,primaryName:ee,secondaryName:W,groupKey:T})},O=()=>{w||b(null)},R=async()=>{if(g){j(!0);try{g.type==="company"?(await Dae(g.primaryId,g.secondaryId),t("Companies merged successfully"),E()):(await Lae(g.primaryId,g.secondaryId),t("Contacts merged successfully"),_()),b(null)}catch(J){r(J?.message||"Merge failed")}finally{j(!1)}}},z=J=>{S(re=>({...re,[J]:!re[J]}))};if(!a)return n.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[n.jsx(wU,{className:"w-12 h-12 text-amber-600 mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const H=[{id:"companies",label:"Duplicate Companies",icon:n.jsx(Wd,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:n.jsx(ol,{className:"w-4 h-4"}),count:u.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:n.jsx(iU,{className:"w-4 h-4"}),count:m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:n.jsx(dh,{className:"w-4 h-4"}),count:y.count}],Q=o[s];return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),n.jsxs("button",{onClick:U,disabled:Q,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Q?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Ou,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:H.map(J=>n.jsxs("button",{onClick:()=>i(J.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===J.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[J.icon,J.label,J.count!=null&&J.count>0&&n.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===J.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:J.count})]},J.id))}),n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Q&&n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsx(yt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Q&&s==="companies"&&n.jsx("div",{className:"p-6",children:c.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):n.jsx("ul",{className:"space-y-4",children:c.groups.map(J=>{const re=`company-${J.domain}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>z(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.domain}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," companies"]}),X?n.jsx(zs,{className:"w-5 h-5"}):n.jsx(ya,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.companies.map((ee,W)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),ee.industry&&n.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",ee.industry,")"]})]}),J.companies.length>=2&&n.jsx("div",{className:"flex gap-2",children:J.companies.filter(T=>T.id!==ee.id).map(T=>n.jsxs("button",{onClick:()=>C("company",ee.id,T.id,ee.name||ee.id,T.name||T.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Gv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},T.id))})]},ee.id))})]},re)})})}),!Q&&s==="contacts"&&n.jsx("div",{className:"p-6",children:u.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):n.jsx("ul",{className:"space-y-4",children:u.groups.map(J=>{const re=`contact-${J.email}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>z(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.email}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," contacts"]}),X?n.jsx(zs,{className:"w-5 h-5"}):n.jsx(ya,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.contacts.map(ee=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),n.jsx("span",{className:"text-slate-500 text-sm ml-2",children:ee.email})]}),J.contacts.filter(W=>W.id!==ee.id).map(W=>n.jsxs("button",{onClick:()=>C("contact",ee.id,W.id,ee.name||ee.id,W.name||W.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Gv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},W.id))]},ee.id))})]},re)})})}),!Q&&s==="incomplete"&&n.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:m.companies,recordLabel:J=>J.name||J.id},{key:"contacts",label:"Contacts",items:m.contacts,recordLabel:J=>J.name||J.email||J.id},{key:"deals",label:"Deals",items:m.deals,recordLabel:J=>J.name||J.title||J.id},{key:"projects",label:"Projects",items:m.projects,recordLabel:J=>J.name||J.title||J.id},{key:"invoices",label:"Invoices",items:m.invoices,recordLabel:J=>J.id}].map(({key:J,label:re,items:X,recordLabel:ee})=>X.length===0?null:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:re}),n.jsx("ul",{className:"space-y-2",children:X.map(W=>n.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Zn,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900",children:ee(W.record)}),n.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((T,q)=>n.jsx("li",{children:T},q))})]})]},W.record.id))})]},J)),m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length===0&&n.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Q&&s==="mismatches"&&n.jsx("div",{className:"p-6",children:y.mismatches.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):n.jsx("ul",{className:"space-y-3",children:y.mismatches.map((J,re)=>n.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx(Zn,{className:"w-5 h-5 text-amber-600 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("p",{className:"font-medium text-slate-900",children:[J.contact?.name," (",J.contact?.email,")"]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",n.jsx("strong",{children:J.contactDomain}),"  Company domain: ",n.jsx("strong",{children:J.companyDomain})," (",J.company?.name,")"]})]})]},re))})})]}),g&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:O}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),n.jsx("button",{onClick:O,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:w,children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",n.jsx("strong",{children:g.secondaryName})," into ",n.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:O,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:w,children:"Cancel"}),n.jsxs("button",{onClick:R,disabled:w,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[w?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsx(Gv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},nye=({currentUser:e,onNavigate:t,onNewEvent:r})=>{const{showError:a,showSuccess:s}=On(),[i,o]=L.useState(new Date),[l,c]=L.useState("daily"),[d,u]=L.useState([]),[f,m]=L.useState([]),[p,y]=L.useState([]),[v,g]=L.useState([]),[b,w]=L.useState([]),[j,N]=L.useState(!1),[S,E]=L.useState(!1),[_,P]=L.useState(null),[I,U]=L.useState(!1),[C,O]=L.useState(!1),[R,z]=L.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[H,Q]=L.useState([]),[J,re]=L.useState(!1),[X,ee]=L.useState(""),[W,T]=L.useState(""),[q,V]=L.useState(null),[B,K]=L.useState(!1),[oe,me]=L.useState(null),[se,de]=L.useState(null),[Re,he]=L.useState(!1),[Ue,Oe]=L.useState(""),[le,te]=L.useState(0),[Se,we]=L.useState([]),[Pe,fe]=L.useState(!1),[ue,Ee]=L.useState(null),[Ye,xe]=L.useState(!0),[ve,Fe]=L.useState(!0),$e=L.useRef(null),_e=L.useRef(null),Be=Array.from({length:24},(ne,je)=>je),qe=L.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),Ze=L.useMemo(()=>{const ne=i.getFullYear(),je=String(i.getMonth()+1).padStart(2,"0"),ke=String(i.getDate()).padStart(2,"0");return`${ne}-${je}-${ke}`},[i]);L.useEffect(()=>{(async()=>{if(e?.id)try{const je=await e3(e.id);N(je.connected||!1)}catch{N(!1)}})()},[e]);const Vt=ne=>ne.filter(je=>{if(je.recurringEventId){const ke=(je.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Ae=>ke.includes(Ae)))return!1}return!0});L.useEffect(()=>{(async()=>{E(!0);const je=new Date(i),ke=new Date(i);if(l==="monthly")je.setDate(1),je.setHours(0,0,0,0),ke.setMonth(ke.getMonth()+1),ke.setDate(0),ke.setHours(23,59,59,999);else if(l==="weekly"){const Qe=new Date(i),tt=Qe.getDay(),Ke=Qe.getDate()-tt+(tt===0?-6:1),Le=new Date(Qe.setDate(Ke));je.setTime(Le.getTime()),je.setHours(0,0,0,0);const st=new Date(Le);st.setDate(Le.getDate()+6),ke.setTime(st.getTime()),ke.setHours(23,59,59,999)}else je.setHours(0,0,0,0),ke.setHours(23,59,59,999);const ie=Qe=>{const tt=Qe.getFullYear(),Ke=String(Qe.getMonth()+1).padStart(2,"0"),Le=String(Qe.getDate()).padStart(2,"0");return`${tt}-${Ke}-${Le}`},ge=ie(je),Ae=ie(ke),Ge=[];if(j&&e?.id)try{const tt=(await Uae(ge,Ae,e.id)).data||[],Ke=Vt(tt);Ge.push(...Ke)}catch(Qe){console.warn("[Schedule] Failed to fetch Google Calendar events:",Qe.message)}if(e?.id)try{const Qe=await fk(e.id,void 0,ge,Ae);if(Qe.success&&Qe.data){const tt=Qe.data.map(Ke=>({id:Ke.id,title:Ke.title,description:Ke.description||"",start:Ke.start,end:Ke.end,type:Ke.type||"meeting",location:Ke.location||"",participants:Ke.participants||[],color:Ke.color||"#4f46e5",isAllDay:Ke.isAllDay||!1,source:"firestore",googleEventId:Ke.googleEventId||null,htmlLink:Ke.htmlLink||null,relatedEntity:Ke.relatedEntity||null}));Ge.push(...tt)}}catch(Qe){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Qe.message)}const rt=new Map;Ge.forEach(Qe=>{const tt=Qe.googleEventId||Qe.id;rt.has(tt)||rt.set(tt,Qe)}),u(Array.from(rt.values()));try{const Qe=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Qe){y([]),m([]);return}const tt=await db(Qe),Le=(Array.isArray(tt?.data||tt)?tt?.data||tt:[]).filter(mt=>{const Ot=mt.dueDate&&mt.dueDate!==null&&mt.dueDate!==void 0&&String(mt.dueDate).trim()!==""&&String(mt.dueDate).trim().toLowerCase()!=="ongoing";return!mt.archived&&Ot});y(Le);const st=Le.filter(mt=>mt.dueDate===Ze);m(st)}catch{y([]),m([])}try{const[Qe,tt,Ke]=await Promise.all([I0(e?.id),ad(),iy()]);g(Array.isArray(Qe?.data||Qe)?Qe?.data||Qe:[]),w(Array.isArray(tt?.data||tt)?tt?.data||tt:[]),Q(Array.isArray(Ke?.data)?Ke.data:[])}catch{g([]),w([]),Q([])}E(!1)})()},[Ze,j,e,l,i]);const Dt=()=>{const ne=new Date(i);l==="daily"?ne.setDate(ne.getDate()-1):l==="weekly"?ne.setDate(ne.getDate()-7):ne.setMonth(ne.getMonth()-1),o(ne)},dt=()=>{const ne=new Date(i);l==="daily"?ne.setDate(ne.getDate()+1):l==="weekly"?ne.setDate(ne.getDate()+7):ne.setMonth(ne.getMonth()+1),o(ne)},Tt=()=>{const ne=new Date;return i.toDateString()===ne.toDateString()},Ht=ne=>{let je=new Date(ne.start),ke=new Date(ne.end);const ie=new Date(i);ie.setHours(0,0,0,0);const ge=(je.getTime()-ie.getTime())/(1e3*60),Ae=(ke.getTime()-je.getTime())/(1e3*60),Ge=ge*(80/60)+20,rt=Ae*(80/60);return{top:Ge,height:Math.max(rt,50)}},Ve=ne=>{try{return new Date(ne).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ne}},jt=ne=>{switch(ne){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},gr=ne=>{const je=new Date(ne),ke=je.getDay(),ie=je.getDate()-ke+(ke===0?-6:1);return new Date(je.setDate(ie))},nr=ne=>{const je=gr(ne);return Array.from({length:7},(ke,ie)=>{const ge=new Date(je);return ge.setDate(je.getDate()+ie),ge})},Ar=ne=>{const je=ne.getFullYear(),ke=ne.getMonth(),ie=new Date(je,ke,1),ge=new Date(je,ke+1,0),Ae=new Date(ie);Ae.setDate(Ae.getDate()-Ae.getDay());const Ge=[],rt=new Date(Ae);for(;(rt<=ge||Ge.length<42)&&(Ge.push(new Date(rt)),rt.setDate(rt.getDate()+1),!(Ge.length>=42)););return Ge},Ir=ne=>{const je=ne.getFullYear(),ke=String(ne.getMonth()+1).padStart(2,"0"),ie=String(ne.getDate()).padStart(2,"0");return`${je}-${ke}-${ie}`},Xt=ne=>p.filter(je=>je.dueDate===ne),Qt=ne=>{Ir(ne);const je=new Date(ne);je.setHours(0,0,0,0);const ke=new Date(ne);return ke.setHours(23,59,59,999),d.filter(ie=>{const ge=new Date(ie.start),Ae=ie.end?new Date(ie.end):ge;return ge<=ke&&Ae>=je})},mr=ne=>{if(!ne||!/^\d{4}-\d{2}-\d{2}$/.test(ne))return ne;const[je,ke,ie]=ne.split("-").map(Number);return new Date(je,ke-1,ie).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};L.useEffect(()=>{_&&!I&&z({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},[_,I]),L.useEffect(()=>{if(!I){re(!1);return}_?.category&&!H.includes(_.category)?re(!0):R.category&&H.includes(R.category)?re(!1):R.category&&!H.includes(R.category)&&re(!0)},[I,R.category,H]),L.useEffect(()=>{if(!_)return;let ne=!1;return(async()=>{try{const je=await iy(),ke=Array.isArray(je?.data)?je.data:[];ne||Q(ke)}catch{ne||Q([])}})(),()=>{ne=!0}},[_?.id]);const Fr=()=>{P(null),U(!1),ee(""),T(""),V(null),he(!1),fe(!1),_e.current&&(_e.current.value="")},fn=async()=>{if(_){if(!R.title.trim()){a("Task title is required");return}if(!R.assigneeId){a("Assignee is required");return}O(!0);try{await oy(_.id,{title:R.title.trim(),category:R.category.trim()||void 0,description:R.description.trim()||"",dueDate:R.dueDate||null,priority:R.priority,status:R.status,assigneeId:R.assigneeId,projectId:R.projectId||null}),y(ne=>ne.map(je=>je.id===_.id?{...je,title:R.title.trim(),category:R.category.trim()||void 0,description:R.description.trim()||"",dueDate:R.dueDate||"",priority:R.priority,status:R.status,assigneeId:R.assigneeId,projectId:R.projectId||void 0}:je)),P({..._,title:R.title.trim(),category:R.category.trim()||void 0,description:R.description.trim()||"",dueDate:R.dueDate||"",priority:R.priority,status:R.status,assigneeId:R.assigneeId,projectId:R.projectId||void 0,updatedAt:new Date().toISOString()}),U(!1),s("Task updated successfully")}catch(ne){a(ne.message||"Failed to update task")}finally{O(!1)}}},Br=(ne,je=1200,ke=1200,ie=.8)=>new Promise((ge,Ae)=>{const Ge=new FileReader;Ge.onload=rt=>{const Qe=new Image;Qe.onload=()=>{let tt=Qe.width,Ke=Qe.height;tt>Ke?tt>je&&(Ke=Ke*je/tt,tt=je):Ke>ke&&(tt=tt*ke/Ke,Ke=ke);const Le=document.createElement("canvas");Le.width=tt,Le.height=Ke;const st=Le.getContext("2d");st?(st.drawImage(Qe,0,0,tt,Ke),ge(Le.toDataURL("image/jpeg",ie))):Ae(new Error("Canvas context not available"))},Qe.onerror=()=>Ae(new Error("Failed to load image")),Qe.src=rt.target?.result},Ge.onerror=()=>Ae(new Error("Failed to read file")),Ge.readAsDataURL(ne)}),Qr=async ne=>{const je=ne.target.files?.[0];if(je){if(!je.type.startsWith("image/")){a("Please select an image file");return}if(je.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const ke=await Br(je,1200,1200,.8);T(ke),V(je)}catch(ke){a(ke.message||"Failed to process image")}}},ir=ne=>{const je=ne.target.value,ke=ne.target.selectionStart;ee(je),te(ke);const ie=je.substring(0,ke),ge=ie.lastIndexOf("@");if(ge!==-1){const Ae=ie.substring(ge+1),Ge=ge>0?ie[ge-1]:" ";if((Ge===" "||Ge===`
`||ge===0)&&!Ae.includes(" ")&&!Ae.includes(`
`)){Oe(Ae);const rt=b.filter(Qe=>Qe.name.toLowerCase().includes(Ae.toLowerCase())||Qe.email.toLowerCase().includes(Ae.toLowerCase()));we(rt.slice(0,5)),he(!0);return}}he(!1)},qn=ne=>{const ke=X.substring(0,le).lastIndexOf("@"),ie=X.substring(le),Ae=`${X.substring(0,ke)}@${ne.name} ${ie}`;if(ee(Ae),he(!1),$e.current){$e.current.focus();const Ge=ke+ne.name.length+2;$e.current.setSelectionRange(Ge,Ge)}},an=ne=>{const je=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ke=[];let ie;for(;(ie=je.exec(ne))!==null;){const ge=ie[1].trim(),Ae=b.find(Ge=>Ge.name.toLowerCase()===ge.toLowerCase());Ae&&Ae.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&ke.push(Ae.id)}return[...new Set(ke)]};L.useEffect(()=>{if($e.current){const ne=$e.current;ne.style.height="auto";const je=24,ke=5*je,ie=15*je,ge=Math.min(Math.max(ne.scrollHeight,ke),ie);ne.style.height=`${ge}px`}},[X]);const wn=ne=>{const je=[],ke=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let ie=0,ge,Ae=0;for(;(ge=ke.exec(ne))!==null;){ge.index>ie&&je.push(ne.substring(ie,ge.index));const Ge=ge[1].trim();b.find(Qe=>Qe.name.toLowerCase()===Ge.toLowerCase())?je.push(n.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Ge]},Ae++)):je.push(`@${Ge}`),ie=ke.lastIndex}return ie<ne.length&&je.push(ne.substring(ie)),je.length>0?je:ne},Tr=async()=>{if(_){if(!X.trim()&&!q){a("Please add a note or attach an image");return}K(!0);try{const ne=JSON.parse(localStorage.getItem("user_data")||"{}"),je={id:`note_${Date.now()}`,userId:ne.id,userName:ne.name||"Unknown User",text:X.trim(),createdAt:new Date().toISOString()};W&&q&&(je.imageUrl=W,je.imageName=q.name,je.imageMimeType=q.type);const ke=[..._.notes||[],je];await oy(_.id,{notes:ke});const ie=an(X);if(ie.length>0)for(const ge of ie)try{await Jp({userId:ge,notificationType:"task-mention",title:"You were mentioned in a task",message:`${ne.name||"Someone"} mentioned you in task: "${_.title}"`,link:`/?tab=tasks&task=${_.id}`})}catch(Ae){console.error("Failed to send mention notification:",Ae)}P({..._,notes:ke}),y(ge=>ge.map(Ae=>Ae.id===_.id?{...Ae,notes:ke}:Ae)),ee(""),T(""),V(null),_e.current&&(_e.current.value=""),s("Note added successfully")}catch(ne){a(ne.message||"Failed to add note")}finally{K(!1)}}},zr=()=>{if(l==="daily")return n.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[Be.map(ne=>{const je=ne*80+20;return n.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${je}px`},children:[n.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:ne===0?"12 AM":ne===12?"12 PM":ne>12?`${ne-12} PM`:`${ne} AM`}),n.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),n.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},ne)}),Ye&&d.map(ne=>{const je=Ht(ne);return n.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${je.top}px`,height:`${je.height}px`},children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),n.jsxs("div",{className:"flex justify-between items-start gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:ne.title}),n.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:n.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[n.jsx(Is,{className:"w-3 h-3 text-indigo-400"})," ",Ve(ne.start)," - ",Ve(ne.end)]})})]}),ne.htmlLink&&n.jsx("a",{href:ne.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:n.jsx(Ss,{className:"w-3.5 h-3.5"})})]})]},ne.id)}),!S&&(Ye&&d.length===0||!Ye&&(!ve||f.length===0))&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[n.jsx(oa,{className:"w-16 h-16 text-slate-200 mb-4"}),n.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const ne=nr(i),je=new Date;return je.setHours(0,0,0,0),n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((ke,ie)=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ke})},ke))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:ne.map((ke,ie)=>{const ge=Ir(ke),Ae=ve?Xt(ge):[],Ge=Ye?Qt(ke):[];let rt=[],Qe=[];ve&&Ye?Ae.length>0&&Ge.length>0?(rt=Ae.slice(0,1),Qe=Ge.slice(0,1)):Ae.length>0?rt=Ae.slice(0,2):Ge.length>0&&(Qe=Ge.slice(0,2)):ve?rt=Ae.slice(0,2):Ye&&(Qe=Ge.slice(0,2));const tt=[...Ae,...Ge],Ke=ke.toDateString()===je.toDateString(),Le=ke.getMonth()===i.getMonth();return n.jsxs("div",{onClick:()=>{o(new Date(ke)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${Ke?"bg-indigo-50 border-indigo-300":Le?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-xs font-black mb-2 ${Ke?"text-indigo-600":Le?"text-slate-900":"text-slate-400"}`,children:ke.getDate()}),n.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[ve&&rt.map(st=>n.jsx("div",{onClick:mt=>{mt.stopPropagation(),P(st)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${st.priority==="High"?"bg-red-100 text-red-700":st.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:st.title,children:st.title},st.id)),Ye&&Qe.map(st=>n.jsx("div",{onClick:mt=>{mt.stopPropagation(),st.htmlLink&&window.open(st.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:st.title,children:st.title},st.id)),rt.length+Qe.length<tt.length&&n.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",tt.length-(rt.length+Qe.length)," more"]})]})]},ie)})})]})}if(l==="monthly"){const ne=Ar(i),je=new Date;je.setHours(0,0,0,0);const ke=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ke.map(ie=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:ie})},ie))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:ne.map((ie,ge)=>{const Ae=Ir(ie),Ge=ve?Xt(Ae):[],rt=Ye?Qt(ie):[];let Qe=[],tt=[];ve&&Ye?Ge.length>0&&rt.length>0?(Qe=Ge.slice(0,1),tt=rt.slice(0,1)):Ge.length>0?Qe=Ge.slice(0,1):rt.length>0&&(tt=rt.slice(0,1)):ve?Qe=Ge.slice(0,1):Ye&&(tt=rt.slice(0,1));const Ke=[...Ge,...rt],Le=ie.toDateString()===je.toDateString(),st=ie.getMonth()===i.getMonth();return n.jsxs("div",{onClick:()=>{o(new Date(ie)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${Le?"bg-indigo-50 border-indigo-300":st?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-[10px] font-black mb-1 ${Le?"text-indigo-600":st?"text-slate-900":"text-slate-400"}`,children:ie.getDate()}),n.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[ve&&Qe.map(mt=>n.jsx("div",{onClick:Ot=>{Ot.stopPropagation(),P(mt)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${mt.priority==="High"?"bg-red-100 text-red-700":mt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:mt.title,children:mt.title},mt.id)),Ye&&tt.map(mt=>n.jsx("div",{onClick:Ot=>{Ot.stopPropagation(),mt.htmlLink&&window.open(mt.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:mt.title,children:mt.title},mt.id)),Qe.length+tt.length<Ke.length&&n.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",Ke.length-(Qe.length+tt.length)]})]})]},ge)})})]})}};return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const ne=new Date(i);ne.setMonth(ne.getMonth()-1),o(ne)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:n.jsx(Uj,{className:"w-4 h-4"})}),n.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>{const ne=new Date(i);ne.setMonth(ne.getMonth()+1),o(ne)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:n.jsx(ya,{className:"w-4 h-4"})})]}):l==="weekly"?n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const ne=nr(i),je=ne[0],ke=ne[6];return`${je.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ke.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[n.jsx(Is,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:qe})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:Ye,onChange:ne=>xe(ne.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ye?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ye&&n.jsx(Lu,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),n.jsx("div",{className:"w-px h-4 bg-slate-200"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:ve,onChange:ne=>Fe(ne.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${ve?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ve&&n.jsx(Lu,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(ne=>n.jsx("button",{onClick:()=>c(ne),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===ne?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:ne},ne))}),n.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:Dt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(Uj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${Tt()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),n.jsx("button",{onClick:dt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(ya,{className:"w-5 h-5"})})]}),n.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"New Entry"]})]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[n.jsx(Is,{className:"w-3 h-3 text-slate-500"}),n.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:qe})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[S&&n.jsx(yt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${j?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:j?"Google Workspace Connected":"Google Disconnected"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&ve&&f.length>0&&n.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(gn,{className:"w-3 h-3"})," Today's Deliverables"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:f.map(ne=>n.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:ne.status==="Done"?n.jsx(gn,{className:"w-4 h-4 text-emerald-500"}):n.jsx(Eu,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-xs font-bold truncate ${ne.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:ne.title}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${jt(ne.priority)}`,children:ne.priority})})]})]},ne.id))})]}),zr()]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsx(Mi,{className:"w-8 h-8 text-indigo-400 mb-6"}),n.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),n.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),n.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),n.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:n.jsx(y0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),_&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Fr}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Fr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(gn,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[I?n.jsx("input",{type:"text",value:R.title,onChange:ne=>z(je=>({...je,title:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:_.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${_.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":_.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":_.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:_.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",_.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:I?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{U(!1),z({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},disabled:C,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:fn,disabled:C||!R.title.trim()||!R.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:C?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),I?n.jsxs("select",{value:R.assigneeId,onChange:ne=>z(je=>({...je,assigneeId:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),b.map(ne=>n.jsx("option",{value:ne.id,children:ne.name},ne.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:b.find(ne=>ne.id===_.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:b.find(ne=>ne.id===_.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),I?n.jsxs("select",{value:R.projectId,onChange:ne=>z(je=>({...je,projectId:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),v.filter(ne=>!ne.archived).map(ne=>n.jsx("option",{value:ne.id,children:ne.title},ne.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.projectId?v.find(ne=>ne.id===_.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ea,{className:"w-4 h-4 text-indigo-500"})," Description"]}),I?n.jsx(Q3,{value:R.description||"",onChange:ne=>z(je=>({...je,description:ne})),placeholder:"Add task description..."}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[_.description?n.jsx(I9,{content:_.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," Task Category"]}),I?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:J?"__new__":R.category||"",onChange:ne=>{const je=ne.target.value;je==="__new__"?(re(!0),z(ke=>({...ke,category:""}))):(re(!1),z(ke=>({...ke,category:je})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),H.map(ne=>n.jsx("option",{value:ne,children:ne},ne)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),J&&n.jsx("input",{type:"text",value:R.category,onChange:ne=>z(je=>({...je,category:ne.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:_.category?n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:_.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),I?n.jsx("input",{type:"date",value:R.dueDate,onChange:ne=>z(je=>({...je,dueDate:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.dueDate?mr(_.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),I?n.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(ne=>n.jsx("button",{onClick:()=>z(je=>({...je,priority:ne})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${R.priority===ne?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ne},ne))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${_.priority==="High"?"bg-red-50 text-red-600":_.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:_.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),I?n.jsxs("select",{value:R.status,onChange:ne=>z(je=>({...je,status:ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[_.status==="Done"?n.jsx(gn,{className:"w-5 h-5 text-emerald-500"}):_.status==="In Progress"?n.jsx(Is,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Eu,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:_.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",_.notes&&_.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:_.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:$e,rows:5,value:X,onChange:ir,onBlur:()=>{setTimeout(()=>he(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),Re&&Se.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(yh,{className:"w-3 h-3"}),"Mention User"]}),Se.map(ne=>n.jsxs("button",{onClick:()=>qn(ne),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ne.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ne.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ne.email})]})]},ne.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:W?n.jsx(Nl,{className:"w-4 h-4"}):n.jsx(Qd,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:W?q?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:_e,type:"file",accept:"image/*",onChange:Qr,className:"hidden"})]}),n.jsx("button",{onClick:Tr,disabled:B||!X.trim()&&!q,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:B?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send"]})})]}),W&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:W,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{T(""),V(null),_e.current&&(_e.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:_.notes&&_.notes.length>0?[..._.notes].reverse().map(ne=>{const je=e?.role==="Admin"||ne.userId===e?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ne.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ne.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),je&&n.jsx("button",{onClick:()=>de(ne.id),disabled:oe===ne.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:oe===ne.id?n.jsx(yt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ne.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:wn(ne.text)}),ne.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:ne.imageUrl,alt:ne.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const ke=window.open();ke&&ke.document.write(`<img src="${ne.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},ne.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>fe(!Pe),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(ya,{className:`w-4 h-4 text-slate-400 transition-transform ${Pe?"rotate-90":""}`})]}),Pe&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:_.createdAt?new Date(_.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),_.updatedAt&&_.updatedAt!==_.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(_.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),_.notes&&_.notes.map((ne,je)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[ne.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ne.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ne.id)),(!_.notes||_.notes.length===0)&&(!_.updatedAt||_.updatedAt===_.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[n.jsx("button",{onClick:()=>{Ee(_),Fr()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:Fr,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," Close"]})]})]})]}),ue&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ee(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(ue)try{await H7(ue.id),y(ne=>ne.filter(je=>je.id!==ue.id)),m(ne=>ne.filter(je=>je.id!==ue.id)),Ee(null),P(null),s("Task deleted successfully")}catch(ne){a(ne.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},aye=()=>{const{showSuccess:e}=On(),[t,r]=L.useState(null),[a,s]=L.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:n.jsx(Qa,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:n.jsx(bD,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:n.jsx(dh,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[n.jsx(Oy,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=a.includes(l.id),d=t===l.id;return n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&n.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),n.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?n.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):n.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),n.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[n.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:d||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:d?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):c?n.jsxs(n.Fragment,{children:["Connected ",n.jsx(gn,{className:"w-4 h-4"})]}):l.isComingSoon?n.jsx(n.Fragment,{children:"Development in Progress"}):n.jsxs(n.Fragment,{children:["Connect ",l.name," ",n.jsx(Eo,{className:"w-4 h-4"})]})}),n.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",n.jsx(Ss,{className:"w-3 h-3"})]})]})]},l.id)})}),n.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:n.jsx(i1,{className:"w-6 h-6 text-indigo-400"})}),n.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",n.jsx("br",{}),n.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),n.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),n.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),n.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:n.jsx(i1,{className:"w-full h-full text-indigo-600"})})]})]})};function sye(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,a)=>(r[a]=e[a],r),{});return JSON.stringify(t)}const os={all:["shared-inbox"],emails:()=>[...os.all,"emails"],emailsList:(e,t)=>[...os.emails(),e,sye(t)],senders:(e,t)=>[...os.all,"senders",e,t]},iye=(e,t,r)=>{const a=t?.limit||50;return Iie({queryKey:os.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:a};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await eM(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[],d=o?.hasMore,u=typeof d=="boolean"?d:c.length>=a;return{data:c,hasMore:u,total:o?.total??c.length,nextCursor:o?.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},oye=(e,t)=>Gs({queryKey:os.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await Kae(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),lye=()=>{const e=Pa();return ci({mutationFn:async({userId:t,accountEmail:r,scopeHours:a,scopeDays:s})=>await $ae(t,r,a,s),onSuccess:()=>{e.invalidateQueries({queryKey:os.emails()})}})},cye=({isOpen:e,onClose:t,userId:r,emailId:a,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:d,showError:u}=On(),[f,m]=L.useState(!1),[p,y]=L.useState(!1),[v,g]=L.useState([]),[b,w]=L.useState(!1),[j,N]=L.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});L.useEffect(()=>{if(!e)return;const _=new Date;_.setDate(_.getDate()+1),_.setHours(10,0,0,0);const P=new Date(_);P.setHours(11,0,0,0);let I=_.toISOString().substring(0,16),U=P.toISOString().substring(0,16);if(l?.date||l?.time)try{const C=l.date||"tomorrow",O=l.time||"10:00 AM";let R=new Date;if(C.toLowerCase().includes("tomorrow"))R.setDate(R.getDate()+1);else if(!C.toLowerCase().includes("today")){const H=C.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(H){const[,Q,J,re]=H;R=new Date(parseInt(re)<100?2e3+parseInt(re):parseInt(re),parseInt(Q)-1,parseInt(J))}}const z=O.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(z){let H=parseInt(z[1]);const Q=z[2]?parseInt(z[2]):0,J=z[3]?.toLowerCase();J==="pm"&&H!==12&&(H+=12),J==="am"&&H===12&&(H=0),R.setHours(H,Q,0,0),I=R.toISOString().substring(0,16);const re=new Date(R);re.setHours(re.getHours()+1),U=re.toISOString().substring(0,16)}}catch(C){console.warn("Failed to parse extracted date/time:",C)}N({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:I,end:U,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){u("Please set date/time and add participants to check availability");return}y(!0);try{const _=new Date(j.start).toISOString().split("T")[0],P=new Date(j.end).toISOString().split("T")[0],I=await Rse(r,j.participants,_,P);I.success&&I.data&&(g(I.data),w(!0))}catch(_){u(_.message||"Failed to check availability")}finally{y(!1)}},E=async _=>{if(_.preventDefault(),!j.title||!j.start||!j.end){u("Please fill in all required fields");return}if(!a){u("Email ID is required to create meeting");return}m(!0);try{(await Mse({userId:r,emailId:a,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(d("Meeting created successfully!"),c?.(),t())}catch(P){u(P.message||"Failed to create meeting")}finally{m(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(oa,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&n.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Zn,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),n.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&n.jsxs("p",{children:["Date: ",l.date]}),l.time&&n.jsxs("p",{children:["Time: ",l.time]}),l.location&&n.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),n.jsxs("form",{onSubmit:E,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:_=>N({...j,title:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Is,{className:"w-3 h-3"})," Start Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:_=>N({...j,start:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Is,{className:"w-3 h-3"})," End Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:_=>N({...j,end:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(jD,{className:"w-3 h-3"})," Location"]}),n.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:_=>N({...j,location:_.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(m0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&n.jsx("button",{type:"button",onClick:S,disabled:p||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Checking...":"Check Availability"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((_,P)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[_,n.jsx("button",{type:"button",onClick:()=>N({...j,participants:j.participants.filter((I,U)=>U!==P)}),className:"hover:text-indigo-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},P)),n.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:_=>{if(_.key==="Enter"&&_.currentTarget.value.trim()){_.preventDefault();const P=_.currentTarget.value.trim();j.participants.includes(P)||N({...j,participants:[...j.participants,P]}),_.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),b&&v.length>0&&n.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((_,P)=>n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("p",{className:"font-medium",children:_.userId}),_.busySlots&&_.busySlots.length>0?n.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",_.busySlots.length," conflict(s)"]}):n.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},P))]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),n.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:_=>N({...j,description:_.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:_=>N({...j,createInGoogleCalendar:_.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),n.jsx("button",{type:"button",onClick:E,disabled:f||!j.title||!j.start||!j.end||!a,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lu,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},dye={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},tB=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Wc=(e,t)=>{const r=tB(e);return(dye[t]||[]).includes(r)},uye=e=>tB(e)==="Admin",r1=ut.forwardRef((e,t)=>n.jsx(c3,{...e,ref:t}));r1.displayName="QuillEditor";function hD({content:e,highlightTerm:t}){const r=L.useRef(null),a=e||"No content",s=/<[a-z][\s\S]*>/i.test(a);if(L.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(d=>{d.forEach(u=>{if(u.isIntersecting){const f=u.target,m=f.getAttribute("data-src");m&&(f.src=m,f.removeAttribute("data-src"),f.loading="lazy",c.unobserve(f))}})},{rootMargin:"50px"});return l.forEach(d=>c.observe(d)),()=>{l.forEach(d=>c.unobserve(d))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),u=(s?a.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():a).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),f=Zx.sanitize(u,{ALLOWED_TAGS:["mark","br"]});return n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:f}})}const i=s?Zx.sanitize(a,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,d,u)=>`<img${c}data-src="${d}" loading="lazy"${u}>`)),n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:a}})}const fye=90*1e3;let pD=0;const rB=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),a=Pa(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=Wc(o,"shared-inbox:add-note"),c=Wc(o,"shared-inbox:assign-email"),d=Wc(o,"shared-inbox:send-email"),u=Wc(o,"shared-inbox:reply-email"),f=Wc(o,"shared-inbox:forward-email"),m=Wc(o,"shared-inbox:star-email"),p=Wc(o,"shared-inbox:archive-email"),y=Wc(o,"shared-inbox:delete-email"),v=Wc(o,"shared-inbox:update-metadata");Wc(o,"shared-inbox:manage-accounts");const g=Wc(o,"shared-inbox:sync-emails"),b=(D,pe="An error occurred")=>D?typeof D=="string"?D:typeof D=="object"?typeof D.message=="string"&&D.message?D.message:D.error&&typeof D.error=="object"&&typeof D.error.message=="string"&&D.error.message?D.error.message:pe:pe:pe,w=D=>!D||typeof D!="string"?"":D.replace(/\n/g,"<br/>"),j=async(D,pe)=>{try{return await D()}catch(be){const Je=b(be,"An error occurred");return pe&&pe(Je),null}},[N,S]=L.useState(null),[E,_]=L.useState(!1),[P,I]=L.useState(!1),[U,C]=L.useState(!1),O=L.useRef(!1),R=L.useRef(null),z=L.useRef(null),[H,Q]=L.useState(""),[J,re]=L.useState(null),[X,ee]=L.useState(""),[W,T]=L.useState(""),[q,V]=L.useState("contains"),[B,K]=L.useState(void 0),[oe,me]=L.useState(""),[se,de]=L.useState(""),[Re,he]=L.useState(void 0),[Ue,Oe]=L.useState(void 0),[le,te]=L.useState(""),[Se,we]=L.useState(!1),[Pe,fe]=L.useState(!1),{data:ue=[]}=oye(i,Se?150:void 0),[Ee,Ye]=L.useState([]),[xe,ve]=L.useState(!1),[Fe,$e]=L.useState(""),[_e,Be]=L.useState(!1),[qe,Ze]=L.useState([]),[Vt,Dt]=L.useState([]),[dt,Tt]=L.useState(!1),[Ht,Ve]=L.useState(""),[jt,gr]=L.useState(null),[nr,Ar]=L.useState(null),[Ir,Xt]=L.useState(null),[Qt,mr]=L.useState("list"),[Fr,fn]=L.useState(new Set),[Br,Qr]=L.useState(new Set),[ir,qn]=L.useState({}),[an,wn]=L.useState(""),[Tr,zr]=L.useState(""),[ne,je]=L.useState(null),[ke,ie]=L.useState(!1),[ge,Ae]=L.useState(null),[Ge,rt]=L.useState(null),[Qe,tt]=L.useState([]),[Ke,Le]=L.useState(null),[st,mt]=L.useState(!1),Ot=L.useRef(null),Lt=L.useRef(null),[vr,Mr]=L.useState(!1),[Vr,Mn]=L.useState([]),[Fs,$n]=L.useState(null),[hs,zn]=L.useState(!1),[As,Hn]=L.useState(""),[Nn,ul]=L.useState([]),[ua,We]=L.useState(!1),[Et,_t]=L.useState(""),[sr,yr]=L.useState(0),[pr,Dr]=L.useState([]),[ta,jn]=L.useState(null),[Jt,cr]=L.useState([]),[Ft,wr]=L.useState(!1),[zt,Ua]=L.useState(""),Ia=L.useRef(null),[Da,er]=L.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[Jr,fa]=L.useState(null),[bn,mn]=L.useState({}),[Nr,Wr]=L.useState([]),[or,Vn]=L.useState(!1),[Hr,Ja]=L.useState(null),[fo,Si]=L.useState(!1),[ps,ms]=L.useState(null),[ho,He]=L.useState([]),[br,Cr]=L.useState(null),[Er,Kr]=L.useState(!1),[Rn,ka]=L.useState([]),[Ys,_i]=L.useState(""),[dd,jc]=L.useState(!1),ud=L.useRef(null),po=L.useRef(null),zi=L.useRef(!1),[Hi,Lf]=L.useState("domain"),[Wi,Ai]=L.useState(""),[El,xs]=L.useState(""),[mo,Io]=L.useState([]),[fd,kc]=L.useState(!1),[hd,fl]=L.useState(!1),[Ci,Do]=L.useState(""),[pd,$u]=L.useState(!1),[tu,Sc]=L.useState(""),[ba,zu]=L.useState(null),[ec,ru]=L.useState(!1),[G,Ne]=L.useState([]),[Xe,nt]=L.useState(!1),[xt,Pt]=L.useState(!1),[Gt,xr]=L.useState(!1),[qr,sn]=L.useState(null),[Zr,Sn]=L.useState(null),[qa,$a]=L.useState(null),[gs,Qs]=L.useState(null),[Ms,Lo]=L.useState(null),[Js,xo]=L.useState([]),[go,nu]=L.useState(""),[au,_c]=L.useState(!1),[md,xd]=L.useState(!1),[gd,Sa]=L.useState(!1),[vo,hl]=L.useState(!1),[Za,Ac]=L.useState("compose"),[on,rs]=L.useState([]),[ga,ui]=L.useState([]),[Bn,Rs]=L.useState([]),[za,Vi]=L.useState(""),[Ha,vs]=L.useState(""),[wa,ns]=L.useState(""),[Gi,Tl]=L.useState(""),[Fo,su]=L.useState([]),[pl,Gn]=L.useState([]),[Ol,Zs]=L.useState(!1),[Ei,Pl]=L.useState(!1),[vd,Il]=L.useState(!1),[Mo,Ki]=L.useState(""),[Bs,Xi]=L.useState(""),[Ti,Yi]=L.useState(""),[yo,Cc]=L.useState([]),[ys,bs]=L.useState(!1),[ra,Xn]=L.useState(0),[_n,_a]=L.useState([]),Ro=L.useRef(null),[iu,Bo]=L.useState(!1),[yd,Uo]=L.useState([]),[Dl,fi]=L.useState(!1),[hi,Hu]=L.useState(""),[tc,Vh]=L.useState(null),[ou,Wu]=L.useState([]),[ha,Ff]=L.useState([]),[Ec,bd]=L.useState([]),[lu,Vu]=L.useState([]),[Tc,Gu]=L.useState({contacts:[],companies:[]}),[wd,M0]=L.useState(!1),[Mf,Gh]=L.useState([]),[Ku,Xu]=L.useState([]),[rc,cu]=L.useState([]),[du,Rf]=L.useState(!1),[R0,Oc]=L.useState(!1),[nc,Nd]=L.useState(null),[gm,Yu]=L.useState(!1),[as,bo]=L.useState(!1),[Oi,wo]=L.useState(null),[uu,ss]=L.useState(!1),[Qi,vm]=L.useState(null),[Bf,Pc]=L.useState(!1),[Ll,Ic]=L.useState(null),[Qu,Uf]=L.useState(!1),[qo,ml]=L.useState({}),[Yn,na]=L.useState(!1),[Dc,ws]=L.useState(!1),[pi,Fl]=L.useState(""),[jd,Ji]=L.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[Ju,qf]=L.useState([]),[B0,Lc]=L.useState(!1),[Kh,$o]=L.useState(!1),[La,A]=L.useState(new Set),[M,Z]=L.useState(!1),[ce,ye]=L.useState(!1),[Ce,Ie]=L.useState("date"),[De,Me]=L.useState("desc"),[ze,at]=L.useState(!1),[gt,vt]=L.useState(null),ht=L.useRef(null),qt=L.useRef(null),St=L.useRef(null),ct=L.useRef(null),it=L.useCallback(D=>{const pe={searchText:""};if(!D||typeof D!="string")return pe;const be=[];let Je="",ot=!1;for(let wt=0;wt<D.length;wt++){const $t=D[wt];if($t==='"'){ot=!ot;continue}if(!ot&&($t===" "||$t==="	")){Je&&(be.push(Je),Je="");continue}Je+=$t}Je&&be.push(Je);const It=[];for(const wt of be){const $t=wt.match(/^from:(.+)$/i);if($t){pe.from=$t[1].trim();continue}const kr=wt.match(/^subject:(.+)$/i);if(kr){pe.subject=kr[1].trim();continue}if(/^has:attachment$/i.test(wt)){pe.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(wt)||/^-has:attachment$/i.test(wt)){pe.hasAttachment=!1;continue}if(/^is:read$/i.test(wt)){pe.isRead=!0;continue}if(/^is:unread$/i.test(wt)){pe.isRead=!1;continue}if(/^is:starred$/i.test(wt)){pe.isStarred=!0;continue}if(/^is:unstarred$/i.test(wt)){pe.isStarred=!1;continue}It.push(wt)}return pe.searchText=It.join(" ").trim(),pe},[]),Ct=L.useMemo(()=>{const D=it(H),pe={};D.searchText&&(pe.search=D.searchText),le&&(pe.status=le);const be=D.from??X;be&&(pe.from=be);const Je=D.subject??W;Je&&(pe.subject=Je,pe.subjectOperator=q);const ot=D.hasAttachment!==void 0?D.hasAttachment:B;ot!==void 0&&(pe.hasAttachment=ot),oe&&(pe.dateFrom=oe),se&&(pe.dateTo=se),Hr&&(pe.labelId=Hr);const It=D.isRead!==void 0?D.isRead:Re;It!==void 0&&(pe.isRead=It);const wt=D.isStarred!==void 0?D.isStarred:Ue;return wt!==void 0&&(pe.isStarred=wt),pe},[H,le,X,W,q,B,oe,se,Hr,Re,Ue,it]),{data:At,isLoading:Mt,isFetchingNextPage:dr,hasNextPage:rr,fetchNextPage:$r,error:fr,refetch:vn}=iye(i,Object.keys(Ct).length>0?Ct:void 0,{staleTime:60*1e3,refetchInterval:120*1e3}),Tn=L.useMemo(()=>At?.pages?At.pages.flatMap(be=>be.data||[]).filter((be,Je,ot)=>be.id&&Je===ot.findIndex(It=>It.id===be.id)):[],[At]);At?.pages[0]?.total??Tn.length;const An=lye(),ln=L.useCallback(()=>{zi.current||dr||!rr||!i||(zi.current=!0,$r())},[dr,rr,$r,i]);L.useEffect(()=>{dr||(zi.current=!1)},[dr]),L.useEffect(()=>{if(fr){const D=fr?.message||"Failed to load inbox";Xt(D),(D.toLowerCase().includes("google")||D.toLowerCase().includes("connected"))&&re(!1)}else Xt(null)},[fr]),L.useEffect(()=>{const D=ud.current,pe=po.current;if(!D||!pe||!rr||dr)return;let be=null,Je=null,ot=null;const It=400;try{be=new IntersectionObserver(wt=>{wt[0].isIntersecting&&rr&&!dr&&ln()},{threshold:.1,rootMargin:"300px",root:pe}),be.observe(D)}catch(wt){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",wt)}return Je=()=>{dr||!rr||ot==null&&(ot=setTimeout(()=>{ot=null;const wt=pe,$t=D;if(!wt||!$t||dr||!rr)return;const kr=wt.getBoundingClientRect(),xn=$t.getBoundingClientRect(),aa=kr.bottom-xn.top;aa<500&&aa>-100&&ln()},It))},pe.addEventListener("scroll",Je,{passive:!0}),()=>{ot!=null&&clearTimeout(ot),be&&be.disconnect(),Je&&pe&&pe.removeEventListener("scroll",Je)}},[rr,dr,ln,Qt,Tn.length]);const Qn=L.useCallback(async()=>{if(i)try{const D=await e3(i),pe=D?.connected===!0||D?.data?.connected===!0;re(pe)}catch{re(!1)}},[i]),In=L.useCallback(async()=>{if(i){_c(!0);try{const D=await pse(i),pe=D?.data??D??[],be=Array.isArray(pe)?pe:[];xo(be.filter(Je=>Je.domain&&String(Je.domain).trim()||!1))}catch(D){console.error("[INBOX] Failed to load excluded domains:",D),r(b(D,"Failed to load excluded domains")),xo([])}finally{_c(!1)}}},[i,r]),en=L.useCallback(async()=>{if(!(!i||!go.trim())){xd(!0);try{await mse(i,go.trim()),nu(""),await In(),t("Domain added to exclusion list"),vn()}catch(D){console.error("[INBOX] Failed to add excluded domain:",D),r(b(D,"Failed to add excluded domain"))}finally{xd(!1)}}},[i,go,In,vn,t,r]),Wa=L.useCallback(async D=>{if(i)try{await xse(i,D),await In(),t("Domain removed from exclusion list"),vn()}catch(pe){console.error("[INBOX] Failed to remove excluded domain:",pe),r(b(pe,"Failed to remove excluded domain"))}},[i,In,vn,t,r]),Pi=D=>D?`${D.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").split(/\s+/)[0].replace(/[^a-z0-9]/g,"")||"user"}@impact24x7.com`:"",Va=L.useCallback(async()=>{if(i)try{let D=[],pe=[];try{const It=await zae(i),wt=It?.data??It??[];D=Array.isArray(wt)?wt.filter(($t,kr,xn)=>{const aa=($t.email||"").toLowerCase();return xn.findIndex(sa=>(sa.email||"").toLowerCase()===aa&&sa.userId===$t.userId)===kr}):[]}catch(It){console.error("[INBOX] Failed to load Gmail accounts:",It)}try{const It=await ad(),wt=It?.data??It??[];pe=Array.isArray(wt)?wt.filter($t=>$t.name&&$t.id).map($t=>({email:Pi($t.name),userId:$t.id,ownerName:$t.name,connectedAt:$t.createdAt||new Date().toISOString(),lastSyncedAt:$t.updatedAt||new Date().toISOString(),isCurrentUser:$t.id===i,isCustomEmail:!0})):[],console.log("[INBOX] Loaded custom email accounts:",pe.length)}catch(It){console.error("[INBOX] Failed to load users for custom emails:",It)}const be=[...D,...pe],Je=new Map;be.forEach(It=>{const wt=(It.email||"").toLowerCase(),$t=It.ownerName||"";$t.toLowerCase()==="unknown user"||$t.trim()===""||Je.has(wt)||Je.set(wt,It)});const ot=Array.from(Je.values());console.log("[INBOX] Total accounts loaded:",{gmail:D.length,custom:pe.length,beforeDedup:be.length,afterDedup:ot.length}),Ze(ot),re(D.length>0),ns(It=>ot.length>0&&!It?ot[0].email:It)}catch(D){console.error("[INBOX] Failed to load connected accounts:",D)}},[i]),Ns=async()=>{if(i)try{const D=await Z7(i),pe=D?.authUrl||D?.data?.authUrl;pe?window.location.href=pe:r("Failed to get authorization URL")}catch(D){r(D?.message||"Failed to connect account")}},Jn=async D=>{if(i){gr(D);try{await Hae(i,D),t(`Disconnected ${D}`),await Va(),await vn()}catch(pe){r(pe?.message||"Failed to disconnect account")}finally{gr(null)}}},Cs=L.useCallback(async()=>{if(i)try{const D=await Wae(i),pe=D?.data??D??[];Dt(Array.isArray(pe)?pe:[])}catch(D){console.error("[INBOX] Failed to load filtered accounts:",D),Dt([])}},[i]),mi=async D=>{if(i){Ar(D);try{await Vae(i,D),await Cs(),await a.invalidateQueries({queryKey:os.emails()}),t(`Emails from ${D} will be hidden`)}catch(pe){r(pe?.message||"Failed to filter account")}finally{Ar(null)}}},Ga=async(D,pe)=>{if(i){Ar(pe);try{await Gae(i,D),await Cs(),await a.invalidateQueries({queryKey:os.emails()}),t(`Emails from ${pe} will now be visible`)}catch(be){r(be?.message||"Failed to unfilter account")}finally{Ar(null)}}};L.useEffect(()=>{if(!i){re(!1);return}Qn(),Va(),In(),Cs()},[i,Qn,Va,In,Cs]),L.useEffect(()=>{qe.length>0&&!wa&&ns(qe[0].email)},[qe]),L.useEffect(()=>{try{const D=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(D){const pe=JSON.parse(D);Array.isArray(pe)&&Ye(pe)}}catch{}},[]),L.useEffect(()=>{if(Ee.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ee))}catch{}},[Ee]),L.useEffect(()=>{i&&(async()=>{try{const pe=await ad(),be=pe?.data??pe??[];ul(Array.isArray(be)?be:[])}catch(pe){const be=pe?.message||"Failed to load users";console.error("Failed to load users:",be)}})()},[i]),L.useEffect(()=>{const D=pe=>{Ia.current&&!Ia.current.contains(pe.target)&&wr(!1)};if(Ft)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[Ft]),L.useEffect(()=>{i&&(async()=>{try{const pe=await Sh(),be=pe?.data??pe??[];Gn(Array.isArray(be)?be:[])}catch(pe){console.error("Failed to load contacts:",pe?.message)}})()},[i]);const Fa=L.useCallback(async(D=!1)=>{if(i&&!(or&&!D))try{Vn(!0);const pe=await Ase(i),be=pe?.labels??pe?.data;Wr(Array.isArray(be)?be:[])}catch(pe){console.error("Error fetching labels:",pe),Wr([])}finally{Vn(!1)}},[i]);L.useEffect(()=>{i&&J&&Fa()},[i,J,Fa]),L.useEffect(()=>{fo&&ps&&i&&Fa(!0)},[fo,ps,i,Fa]),L.useEffect(()=>{i&&vo&&(async()=>{if(i)try{const pe=await tM(i),be=pe?.data??pe??[];su(Array.isArray(be)?be:[]);const Je=be.find(ot=>ot.isDefault);Je&&Tl(Je.content||"")}catch(pe){console.error("Failed to load signatures:",pe?.message)}})()},[i,vo]);const Us=async()=>{if(i){_(!0),Xt(null);try{await An.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(D){const pe=D?.message||"Sync failed";r(pe),Xt(pe)}finally{_(!1)}}},Ii=L.useRef(An),zo=L.useRef(a);L.useEffect(()=>{Ii.current=An,zo.current=a},[An,a]),L.useEffect(()=>{if(!i||!g){R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null);return}R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null);const D=()=>{const pe=Date.now();pe-pD<fye||O.current||(pD=pe,O.current=!0,I(!0),Ii.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{O.current=!1,I(!1)},onError:be=>{console.log("[INBOX] Background sync failed:",be?.message||"Unknown error"),O.current=!1,I(!1)}}))};return R.current=setTimeout(()=>{D(),R.current=null},30*1e3),z.current=setInterval(()=>{D()},1500*1e3),()=>{R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null),O.current=!1}},[i,g]);const Ka=async D=>{if(i){M0(!0);try{const pe=await Nse(D);Gu(pe?.data||{contacts:[],companies:[]})}catch(pe){console.error("Failed to load suggested links:",pe),Gu({contacts:[],companies:[]})}finally{M0(!1)}}},es=async D=>{if(i){Rf(!0);try{const[pe,be,Je]=await Promise.all([kse(D).catch(()=>({success:!0,data:[]})),Sse(D).catch(()=>({success:!0,data:[]})),_se(D).catch(()=>({success:!0,data:[]}))]);Gh(pe?.data||[]),Xu(be?.data||[]),cu(Je?.data||[])}catch(pe){console.error("Failed to load related items:",pe),Gh([]),Xu([]),cu([])}finally{Rf(!1)}}};L.useEffect(()=>{(async()=>{if(i)try{const[pe,be,Je,ot]=await Promise.all([ld().catch(()=>({data:[]})),jg(i).catch(()=>({data:[]})),I0(i).catch(()=>({data:[]})),J7({userId:i}).catch(()=>({data:[]}))]);Wu(pe?.data||[]),Ff(be?.data||[]),bd(Je?.data||[]),Vu(ot?.data||[])}catch(pe){console.error("Failed to load CRM data:",pe)}})()},[i]);const Es=async(D,pe)=>{if(!(!N?.id||!i)){bo(!0);try{const be=N.id;let Je;switch(D){case"contact":await gse({emailId:be,contactId:pe,userId:i}),Je="contactId";break;case"company":await vse({emailId:be,companyId:pe,userId:i}),Je="companyId";break;case"deal":await yse({emailId:be,dealId:pe,userId:i}),Je="dealId";break;case"project":await bse({emailId:be,projectId:pe,userId:i}),Je="projectId";break;case"contract":await wse({emailId:be,contractId:pe,userId:i}),Je="contractId";break;default:throw new Error(`Unknown link type: ${D}`)}t(`Email linked to ${D} successfully`),S(ot=>ot?{...ot,linkedRecords:{...ot.linkedRecords||{},[Je]:pe}}:null),es(be),Oc(!1),Nd(null)}catch(be){r(be?.message||`Failed to link email to ${D}`)}finally{bo(!1)}}},Fc=async D=>{if(!(!N?.id||!i))try{const pe=await jse({emailId:N.id,userId:i,title:D.title||N.subject||"Task from Email",description:D.description||N.body||"",dueDate:D.dueDate,priority:D.priority||"Medium",projectId:D.projectId,assigneeId:D.assigneeId});t("Task created successfully"),Yu(!1),es(N.id)}catch(pe){r(pe?.message||"Failed to create task")}},Zi=async D=>{if(!i)return;S(null),He([]),Cr(null),rt(null),tt([]),Le(null),C(!0);const pe=!D.isRead;pe&&a.setQueriesData({queryKey:os.emails()},be=>{if(!be?.pages)return be;const Je=be.pages.map(ot=>{const It=ot.data.map(wt=>wt.id===D.id?{...wt,isRead:!0}:wt);return{...ot,data:It}});return{...be,pages:Je}});try{const be=await Xae(D.id,i),Je=be?.data??be??{},ot={...D,...Je,body:Je.body??D.lastMessage,gmailThreadId:Je.gmailThreadId??D.gmailThreadId,isRead:!0};S(ot),pe&&Kn(D.id,!0,!0).catch(It=>{console.error("[INBOX] Failed to mark email as read:",It?.message),a.setQueryData(os.emailsList(i||"",Ct),wt=>wt?.pages?{...wt,pages:wt.pages.map($t=>({...$t,data:$t.data.map(kr=>kr.id===D.id?{...kr,isRead:!1}:kr)}))}:wt)}),D.id&&(Ka(D.id),es(D.id));try{const It=await Jae(D.id),wt=It?.data??It??[];qn($t=>({...$t,[D.id]:wt.map(kr=>({id:kr.id,userId:kr.userId,userName:kr.userName,message:kr.message,timestamp:kr.createdAt,imageUrl:kr.imageUrl,imageName:kr.imageName,markedFor:kr.markedFor||[]}))}))}catch(It){const wt=It?.message||"Failed to load notes";console.error("Failed to load notes:",wt),qn($t=>({...$t,[D.id]:[]}))}if(i)try{nt(!0);const It=await fk(i,D.id);It.success&&It.data?Ne(It.data):Ne([])}catch(It){console.error("Failed to load calendar events:",It.message),Ne([])}finally{nt(!1)}}catch(be){r(be?.message||"Could not load email")}finally{C(!1)}},Kn=async(D,pe,be=!1)=>{if(i)try{await dI(D,pe,i),a.setQueriesData({queryKey:os.emails()},Je=>{if(!Je?.pages)return Je;const ot=Je.pages.map(It=>({...It,data:It.data.map(wt=>wt.id===D?{...wt,isRead:pe,syncStatus:{...wt.syncStatus||{},readStatus:"pending"}}:wt)}));return{...Je,pages:ot}}),N?.id===D&&S(Je=>Je?{...Je,isRead:pe,syncStatus:{...Je.syncStatus||{},readStatus:"pending"}}:null),be||t(pe?"Marked as read":"Marked as unread")}catch(Je){be?console.error("[INBOX] Failed to mark email as read:",Je?.message):(r(Je?.message||"Update failed"),vn())}},Ml=async(D,pe)=>{try{await Yae(D,pe),a.setQueryData(os.emailsList(i||"",Ct),be=>be?.pages?{...be,pages:be.pages.map(Je=>({...Je,data:Je.data.map(ot=>ot.id===D?{...ot,isStarred:pe,syncStatus:{...ot.syncStatus||{},starredStatus:"pending"}}:ot)}))}:be),N?.id===D&&S(be=>be?{...be,isStarred:pe,syncStatus:{...be.syncStatus||{},starredStatus:"pending"}}:null),a.invalidateQueries({queryKey:os.emails()}),t(pe?"Starred":"Unstarred")}catch(be){r(be?.message||"Update failed"),vn()}},kd=D=>{if(!D)return null;switch(D){case"synced":return n.jsx(gn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return n.jsx(Is,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return n.jsx(Zn,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},fu=async(D,pe=[],be=[],Je=!1,ot)=>{try{if(await Ese(D,{addLabelIds:pe,removeLabelIds:be,trackAccuracy:Je,suggestionId:ot}),a.invalidateQueries({queryKey:os.emails()}),N?.id===D){const wt=[...N.labels||[]];pe.forEach($t=>{wt.includes($t)||wt.push($t)}),be.forEach($t=>{const kr=wt.indexOf($t);kr>-1&&wt.splice(kr,1)}),S({...N,labels:wt,syncStatus:{...N.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(It){r(It?.message||"Failed to update labels")}},Ho=async(D,pe)=>{try{await Tse(D,pe),await fu(D,[],[pe])}catch(be){r(be?.message||"Failed to remove label")}},No=async(D,pe)=>{if(i){$u(!0);try{await Cse({userId:i,accountEmail:pe,labelName:D,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await Fa(),Do(""),fl(!1)}catch(be){r(be?.message||"Failed to create label")}finally{$u(!1)}}},ac=async(D,pe)=>{if(i)try{await kv(D,{userId:i,...pe}),a.invalidateQueries({queryKey:os.emails()}),N?.id===D&&S(be=>be?{...be,...pe}:null),t("Email updated")}catch(be){r(be?.message||"Update failed")}},jo=()=>{Z(!M),A(new Set)},Rl=D=>{A(pe=>{const be=new Set(pe);return be.has(D)?be.delete(D):be.add(D),be})},Sd=()=>{La.size===to.length?A(new Set):A(new Set(to.map(D=>D.id)))},hu=async()=>{if(!(!i||La.size===0)){ye(!0);try{await Promise.all(Array.from(La).map(D=>dI(D,!0,i))),a.invalidateQueries({queryKey:os.emails()}),t(`${La.size} email(s) marked as read`),A(new Set)}catch(D){r(D?.message||"Failed to mark emails as read")}finally{ye(!1)}}},ko=async D=>{if(i)try{await uI(D,i),a.invalidateQueries({queryKey:os.emails()}),N?.id===D&&S(pe=>pe?{...pe,threadStatus:"archived"}:null),t("Email archived")}catch(pe){r(pe?.message||"Failed to archive email")}},pu=async D=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await fI(D,i),a.invalidateQueries({queryKey:os.emails()}),N?.id===D&&S(null),t("Email deleted")}catch(pe){r(pe?.message||"Failed to delete email")}},Mc=async D=>{if(i)try{await dse(D,i),a.invalidateQueries({queryKey:os.emails()}),N?.id===D&&S(pe=>pe?{...pe,threadStatus:"active"}:null),t("Email restored")}catch(pe){r(pe?.message||"Failed to restore email")}},sc=async D=>{if(i)try{await kv(D,{userId:i,threadStatus:"resolved"}),a.invalidateQueries({queryKey:os.emails()}),N?.id===D&&S(pe=>pe?{...pe,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(pe){r(pe?.message||"Failed to resolve conversation")}},mu=async()=>{if(!(!i||La.size===0)){ye(!0);try{await Promise.all(Array.from(La).map(D=>uI(D,i))),a.invalidateQueries({queryKey:os.emails()}),t(`${La.size} email(s) archived`),A(new Set)}catch(D){r(D?.message||"Failed to archive emails")}finally{ye(!1)}}},Bl=async()=>{if(!(!i||La.size===0)&&confirm(`Are you sure you want to delete ${La.size} email(s)? This action cannot be undone.`)){ye(!0);try{await Promise.all(Array.from(La).map(pe=>fI(pe,i)));const D=Array.from(La);a.invalidateQueries({queryKey:os.emails()}),N&&La.has(N.id)&&S(null),t(`${D.length} email(s) deleted`),A(new Set)}catch(D){r(D?.message||"Failed to delete emails")}finally{ye(!1)}}},Xh=async(D,pe,be,Je)=>{if(!i)return;const ot=`${D}-${pe}-view`;mn(It=>({...It,[ot]:!0}));try{const It=await hI(D,pe,i),wt=window.URL.createObjectURL(It);fa({isOpen:!0,emailId:D,attachmentId:pe,filename:be,mimeType:Je,url:wt})}catch(It){r(It?.message||"Failed to load attachment")}finally{mn(It=>({...It,[ot]:!1}))}},Zu=async(D,pe,be)=>{if(!i)return;const Je=`${D}-${pe}-download`;mn(ot=>({...ot,[Je]:!0}));try{const ot=await hI(D,pe,i),It=window.URL.createObjectURL(ot),wt=document.createElement("a");wt.href=It,wt.download=be,document.body.appendChild(wt),wt.click(),window.URL.revokeObjectURL(It),document.body.removeChild(wt),t("Attachment downloaded")}catch(ot){r(ot?.message||"Failed to download attachment")}finally{mn(ot=>({...ot,[Je]:!1}))}},va=D=>{if(D===0)return"0 Bytes";const pe=1024,be=["Bytes","KB","MB","GB"],Je=Math.floor(Math.log(D)/Math.log(pe));return Math.round(D/Math.pow(pe,Je)*100)/100+" "+be[Je]},ei=D=>D.startsWith("image/"),ic=D=>D==="application/pdf",U0=D=>{const pe=D.target.files;if(!pe||pe.length===0)return;const be=25*1024*1024,Je=[];Array.from(pe).forEach(ot=>{if(ot.size>be){r(`File "${ot.name}" is too large. Maximum size is 25MB.`);return}const It=`${Date.now()}-${Math.random()}`;let wt;ot.type.startsWith("image/")&&(wt=URL.createObjectURL(ot)),Je.push({file:ot,preview:wt,id:It})}),_a([..._n,...Je]),Ro.current&&(Ro.current.value="")},_d=async(D,pe)=>{if(i){fi(!0);try{const be=await Bse(i,wa||void 0,void 0,D||hi,pe),Je=be?.data||be||{};Uo(pe?ot=>[...ot,...Je.files||[]]:Je.files||[]),Vh(Je.nextPageToken||null)}catch(be){const Je=be?.message||"Failed to load Drive files";Je.includes("not connected")||be?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${wa||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Je),pe||Uo([])}finally{fi(!1)}}},$f=async D=>{if(!(!i||!vo))try{const pe=Za!=="compose"&&N?.id?N.id:`draft_${Date.now()}`;if(Za==="compose"){const be={id:`drive_${D.id}`,file:new uc([],D.name,{type:D.mimeType}),isDriveFile:!0,driveFileId:D.id,driveWebViewLink:D.webViewLink,driveIconLink:D.iconLink,preview:D.thumbnailLink||D.iconLink};_a([..._n,be]),Bo(!1),t("Drive file added")}else await mI({userId:i,emailId:N.id,fileId:D.id,fileName:D.name,fileMimeType:D.mimeType,webViewLink:D.webViewLink,webContentLink:D.webContentLink,iconLink:D.iconLink}),Bo(!1),t("Drive file attached"),N&&Zi(N)}catch(pe){r(pe?.message||"Failed to attach Drive file")}},Ul=D=>{const pe=_n.find(be=>be.id===D);pe?.preview&&URL.revokeObjectURL(pe.preview),ml(be=>{const Je={...be};return delete Je[D],Je}),_a(_n.filter(be=>be.id!==D))},Ma=async()=>{if(!i||!wa||!za||!Ha){r("Please fill in subject and message to save draft");return}na(!0);try{await use({userId:i,accountEmail:wa||qe[0]?.email,to:on.length>0?on:void 0,cc:ga.length>0?ga:void 0,bcc:Bn.length>0?Bn:void 0,subject:za,body:Ha}),t("Draft saved to Gmail")}catch(D){const pe=b(D,"Failed to save draft");r(pe)}finally{na(!1)}},js=async()=>{if(!(!i||!wa)){Lc(!0);try{const D=await fse(i,wa||qe[0]?.email),pe=D?.data||D||[];qf(Array.isArray(pe)?pe:[])}catch(D){const pe=b(D,"Failed to load drafts");r(pe),qf([])}finally{Lc(!1)}}};L.useEffect(()=>()=>{_n.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)})},[_n]),L.useEffect(()=>{!vo&&_n.length>0&&(_n.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)}),_a([]))},[vo,_n]);const is=(D,pe=1200,be=1200,Je=.8)=>new Promise((ot,It)=>{const wt=new FileReader;wt.onload=$t=>{const kr=new Image;kr.onload=()=>{let xn=kr.width,aa=kr.height;xn>aa?xn>pe&&(aa=aa*pe/xn,xn=pe):aa>be&&(xn=xn*be/aa,aa=be);const sa=document.createElement("canvas");sa.width=xn,sa.height=aa;const ti=sa.getContext("2d");ti?(ti.drawImage(kr,0,0,xn,aa),ot(sa.toDataURL("image/jpeg",Je))):It(new Error("Canvas context not available"))},kr.onerror=It,kr.src=$t.target?.result},wt.onerror=It,wt.readAsDataURL(D)}),xu=async D=>{const pe=D.target.files?.[0];if(pe){if(!pe.type.startsWith("image/")){r("Please select an image file");return}if(pe.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const be=await is(pe,1200,1200,.8);zr(be),je(pe)}catch(be){r(be.message||"Failed to process image")}}},oc=D=>{const pe=document.createElement("div");pe.innerHTML=D;const be=pe.textContent||pe.innerText||"",Je=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ot=[];let It;for(;(It=Je.exec(be))!==null;){const wt=It[1].trim(),$t=Nn.find(kr=>kr.name.toLowerCase()===wt.toLowerCase());$t&&$t.id!==i&&ot.push($t.id)}return[...new Set(ot)]},Rc=L.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),q0=["header","bold","italic","underline","strike","list","bullet","link"],Ts=L.useCallback((D,pe,be,Je)=>{if(wn(D),qt.current=Je,be==="user"){const ot=Je.getSelection(!0);if(ot){const wt=Je.getText().substring(0,ot.index),$t=wt.lastIndexOf("@");if($t!==-1){const kr=wt.substring($t+1),xn=$t>0?wt[$t-1]:" ";if(xn===" "||xn===`
`||$t===0)if(!kr.includes(" ")&&!kr.includes(`
`)&&kr.length<50){jn($t),_t(kr);const aa=Nn.filter(sa=>sa.name?.toLowerCase().includes(kr.toLowerCase())||sa.email?.toLowerCase().includes(kr.toLowerCase()));Dr(aa),We(aa.length>0)}else We(!1),jn(null);else We(!1),jn(null)}else We(!1),jn(null)}}},[Nn]),zf=L.useCallback(D=>{const pe=qt.current;if(!pe){console.error("[INBOX] Quill editor not available");return}pe.focus();const be=pe.getText();let Je=ta;if((Je===null||Je<0)&&(Je=be.lastIndexOf("@")),Je===-1){console.error("[INBOX] Could not find @ symbol for mention"),We(!1),jn(null);return}const ot=be.substring(Je+1),It=ot.indexOf(" "),wt=ot.indexOf(`
`);let $t=ot.length;It!==-1&&($t=Math.min($t,It)),wt!==-1&&($t=Math.min($t,wt));const kr=Je,xn=Je+1+$t,aa=xn-kr;console.log("[INBOX] Inserting mention:",{atIndex:Je,deleteStartIndex:kr,deleteEndIndex:xn,deleteLength:aa,textAfterAt:ot.substring(0,$t),mentionText:`@${D.name} `}),pe.setSelection(kr,aa,"api"),pe.deleteText(kr,aa,"api");const sa=`@${D.name} `;pe.insertText(kr,sa,"api"),pe.formatText(kr,sa.length-1,{bold:!0,color:"#4338ca"},"api");const ti=kr+sa.length;pe.setSelection(ti,0,"api");const Wf=pe.root.innerHTML;wn(Wf),We(!1),jn(null)},[ta]),ef=async()=>{if(!N||!an.trim()&&!ne||!i||!s){!an.trim()&&!ne&&r("Please enter a note or upload an image");return}ie(!0);try{const D=N.id,pe=s.name||s.email||"You",be=document.createElement("div");be.innerHTML=an;const ot=(be.textContent||be.innerText||"").trim()?an.trim():"",It={emailId:D,userId:i,userName:pe,message:ot};if(Jt.length>0&&(It.markedFor=Jt),Tr&&Tr.trim()){if(Tr.length>75e4){r("Image is too large. Please use a smaller image."),ie(!1);return}It.imageUrl=Tr,ne?.name&&(It.imageName=ne.name)}const wt=await Qae(It),$t=wt?.data||{};if(!$t.id&&!$t.emailId)throw console.error("[INBOX] Invalid note response:",wt),new Error("Invalid response from server. Note was not created.");const kr={id:$t.id||`thread-${Date.now()}`,userId:i,userName:pe,message:ot,timestamp:$t.createdAt||new Date().toISOString(),imageUrl:Tr||void 0,imageName:ne?.name||void 0,markedFor:$t.markedFor||[]};qn(sa=>({...sa,[D]:[kr,...sa[D]||[]]}));const xn=oc(ot);if(xn.length>0)for(const sa of xn)try{await Jp({userId:sa,type:"mention",title:"You were mentioned in an email note",message:`${pe} mentioned you in a note on email: "${N.subject||"Untitled"}"`,link:`/?tab=inbox&email=${D}`,read:!1})}catch(ti){const Wf=ti?.message||"Failed to send notification";console.error("Failed to send notification:",Wf)}wn(""),zr(""),je(null),cr([]),St.current&&(St.current.value=""),qt.current&&qt.current.setText("");const aa=wt?.message||(xn.length>0?`Note added and ${xn.length} user(s) notified`:"Internal note added");t(aa)}catch(D){const pe=b(D,"Failed to add note");console.error("[INBOX] Error adding note:",pe),r(pe)}finally{ie(!1)}},ql=async(D,pe)=>{if(!(!i||!s)){Ae(pe);try{await Zae(pe,i),qn(be=>({...be,[D]:(be[D]||[]).filter(Je=>Je.id!==pe)})),t("Note deleted")}catch(be){const Je=b(be,"Failed to delete note");r(Je)}finally{Ae(null)}}},Wo=async D=>{if(!(!N||!i)){mt(!0),tt([]),Le(null),rt(null);try{const pe=await ese(N.id,i,D),be=pe?.data??pe??{};if(be.variations&&Array.isArray(be.variations)&&be.variations.length>0)tt(be.variations),Le(0),rt(w(be.variations[0].draft)),t(`Generated ${be.variations.length} draft variations`);else{let Je=be.draft;(!Je||typeof Je!="string")&&(Je=`Hi ${N.sender||"there"},

Thank you for your email regarding "${N.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),rt(w(Je)),tt([{style:"default",description:"AI-generated draft",draft:Je,confidence:75}]),Le(0),t("AI draft generated")}}catch(pe){const be=b(pe,"Failed to generate draft");mt(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",be),r(be)},0)}finally{mt(!1)}}},eo=async()=>{if(!i||!za||on.length===0){r("Please enter a subject and recipient to generate AI draft");return}Uf(!0),Ic(null);try{const pe=`Hi ${on[0].split("@")[0]},

${za?`Regarding: ${za}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(be=>setTimeout(be,1e3)),Ic(w(pe)),t("AI draft generated")}catch(D){const pe=b(D,"Failed to generate draft");r(pe)}finally{Uf(!1)}},tf=()=>{if(!Ge)return;let D="";try{if(Lt.current&&typeof Lt.current.getText=="function")D=Lt.current.getText();else{const pe=document.createElement("div");pe.innerHTML=Ge,D=pe.textContent||pe.innerText||""}}catch(pe){const be=document.createElement("div");be.innerHTML=Ge||"",D=be.textContent||be.innerText||"";const Je=pe?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Je)}navigator.clipboard.writeText(D).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(pe=>{try{const be=document.createElement("textarea");be.value=D,document.body.appendChild(be),be.select(),document.execCommand("copy"),document.body.removeChild(be),t("Draft copied to clipboard!")}catch(be){const Je=be?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Je),r("Failed to copy draft. Please select and copy manually.")}})},Hf=()=>{!Ge||!i||!N||(Hn(""),zn(!0))},lc=async()=>{if(!As||!As.trim()||!Ge||!i||!N){r("Please enter a template name");return}try{const D=typeof Ge=="string"?Ge:String(Ge||"");await tse({name:As.trim(),content:D,userId:i,category:"email-response"}),t("Template saved successfully!"),zn(!1),Hn(""),Ad()}catch(D){const pe=b(D,"Failed to save template");console.error("[INBOX] Error saving template:",pe),r(pe)}},Ad=async()=>{if(i)try{const D=await rse(i),pe=D?.data??D??[];Mn(Array.isArray(pe)?pe:[])}catch(D){const pe=D?.message||"Failed to load templates";console.error("Failed to load templates:",pe)}};L.useEffect(()=>{i&&Ad()},[i]),L.useEffect(()=>{i&&vo&&Ad()},[i,vo]);const rf=(D,pe=100)=>{if(!D)return"";let be=D.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(be=be.replace(/https?:\/\/[^\s]+/g,"").trim(),be=be.replace(/\s+/g," ").trim(),be.length<=pe)return be;const Je=be.substring(0,pe),ot=Je.lastIndexOf(" ");return ot>pe*.7?Je.substring(0,ot)+"...":Je+"..."},to=L.useMemo(()=>{let pe=[...Tn.filter((be,Je,ot)=>be.id&&Je===ot.findIndex(It=>It.id===be.id))];return le==="archived"?pe=pe.filter(be=>be.threadStatus==="archived"):le&&le!=="archived"?pe=pe.filter(be=>be.status===le):le||(pe=pe.filter(be=>be.threadStatus!=="archived")),Hr&&(pe=pe.filter(be=>(be.labels||[]).includes(Hr))),ze&&i&&(pe=pe.filter(be=>be.owner===i)),gt&&(pe=pe.filter(be=>be.owner===gt)),pe.sort((be,Je)=>{let ot=0;switch(Ce){case"date":const It=parseInt(be.internalDate||"0")||0;ot=(parseInt(Je.internalDate||"0")||0)-It;break;case"sender":const $t=(be.sender||be.email||"").toLowerCase(),kr=(Je.sender||Je.email||"").toLowerCase();ot=$t.localeCompare(kr);break;case"subject":const xn=(be.subject||"").toLowerCase(),aa=(Je.subject||"").toLowerCase();ot=xn.localeCompare(aa);break;case"unread":if(be.isRead===Je.isRead){const sa=parseInt(be.internalDate||"0")||0;ot=(parseInt(Je.internalDate||"0")||0)-sa}else ot=be.isRead?1:-1;break}return De==="asc"?-ot:ot}),pe},[Tn,Hr,ze,gt,i,Ce,De]);L.useEffect(()=>{N?.id&&(to.some(pe=>pe.id===N.id)||(S(null),He([]),Cr(null),rt(null),tt([]),Le(null),Ne([]),qn(pe=>{const be={...pe};return delete be[N.id],be})))},[to,N?.id]);const $0=to.filter(D=>!D.isRead).length,z0=L.useMemo(()=>{if(Qt==="list")return null;const D=new Map;to.forEach(be=>{const Je=be.gmailThreadId||be.id;D.has(Je)||D.set(Je,[]),D.get(Je).push(be)});const pe=Array.from(D.entries()).map(([be,Je])=>{const ot=[...Je].sort((It,wt)=>{const $t=parseInt(It.internalDate||"0")||0;return(parseInt(wt.internalDate||"0")||0)-$t});return{threadId:be,emails:ot,latestEmail:ot[0],unreadCount:ot.filter(It=>!It.isRead).length}});return pe.sort((be,Je)=>{let ot=0;const It=be.latestEmail,wt=Je.latestEmail;switch(Ce){case"date":const $t=parseInt(It.internalDate||"0")||0;ot=(parseInt(wt.internalDate||"0")||0)-$t;break;case"sender":const xn=(It.sender||It.email||"").toLowerCase(),aa=(wt.sender||wt.email||"").toLowerCase();ot=xn.localeCompare(aa);break;case"subject":const sa=(It.subject||"").toLowerCase(),ti=(wt.subject||"").toLowerCase();ot=sa.localeCompare(ti);break;case"unread":if(be.unreadCount>0&&Je.unreadCount===0)ot=-1;else if(be.unreadCount===0&&Je.unreadCount>0)ot=1;else if(be.unreadCount===Je.unreadCount){const Wf=parseInt(It.internalDate||"0")||0;ot=(parseInt(wt.internalDate||"0")||0)-Wf}else ot=Je.unreadCount-be.unreadCount;break}return De==="asc"?-ot:ot}),pe},[to,Qt,Ce,De]),cc=D=>{fn(pe=>{const be=new Set(pe);return be.has(D)?be.delete(D):be.add(D),be})},nf=D=>{Qr(pe=>{const be=new Set(pe);return be.has(D)?be.delete(D):be.add(D),be})};return i?n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[P&&n.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[n.jsx(yt,{className:"w-4 h-4 animate-spin flex-shrink-0"}),n.jsx("span",{children:"Auto-syncing"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),Hr&&n.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",Nr.find(D=>D.id===Hr)?.name||Hr]})]}),n.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",$0," unread",Hr&&`  ${to.length} email${to.length!==1?"s":""} with label`]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Nr.length>0&&n.jsx("div",{className:"relative",children:n.jsxs("select",{value:Hr||"",onChange:D=>{const pe=D.target.value||null;Ja(pe);const be=document.querySelector(".overflow-y-auto");be&&(be.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[n.jsx("option",{value:"",children:"All Labels"}),Nr.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]})}),n.jsxs("button",{onClick:()=>mr(Qt==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Qt==="threads"?"Switch to list view":"Switch to threaded view",children:[n.jsx(lo,{className:"w-4 h-4"}),Qt==="threads"?"Threads":"List"]}),g&&n.jsxs("button",{onClick:Us,disabled:E,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[E?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Ou,{className:"w-4 h-4"}),E?"Syncing":"Sync from Gmail"]}),qe.length>0&&n.jsxs("button",{onClick:()=>Tt(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${qe.length} connected account${qe.length!==1?"s":""}`,children:[n.jsx(gn,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),n.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:qe.length})]})]})]}),J===!1&&qe.length===0&&n.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[n.jsx(Zn,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),n.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),n.jsxs("button",{onClick:Ns,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),n.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:H,onChange:D=>Q(D.target.value),onKeyDown:D=>D.key==="Enter"&&vn(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),n.jsxs("button",{type:"button",onClick:()=>we(D=>!D),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${Se?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[n.jsx(p0,{className:"w-4 h-4"}),"Filters",(X||W||B!==void 0||oe||se||Re!==void 0||Ue!==void 0||le||Hr)&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),Se&&n.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[n.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),n.jsx("input",{type:"text",placeholder:"email or name",value:X,onChange:D=>{ee(D.target.value),fe(!0)},onFocus:()=>fe(!0),onBlur:()=>setTimeout(()=>fe(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),Pe&&ue.length>0&&n.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:ue.filter(D=>!X||[D.email,D.name].some(pe=>pe?.toLowerCase().includes(X.toLowerCase()))).slice(0,20).map(D=>n.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:pe=>{pe.preventDefault(),ee(D.email||D.name),fe(!1)},children:[n.jsx("span",{className:"font-medium text-slate-800",children:D.name||D.email}),D.email!==D.name&&n.jsx("span",{className:"text-xs text-slate-500",children:D.email})]},D.email))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Re===void 0?"":String(Re),onChange:D=>he(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"false",children:"Unread"}),n.jsx("option",{value:"true",children:"Read"})]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:oe,onChange:D=>me(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(oa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:se,onChange:D=>de(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(oa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"",value:W,onChange:D=>T(D.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),n.jsxs("div",{className:"relative w-32",children:[n.jsxs("select",{value:q,onChange:D=>V(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[n.jsx("option",{value:"contains",children:"contains"}),n.jsx("option",{value:"equals",children:"equals"}),n.jsx("option",{value:"starts",children:"starts with"}),n.jsx("option",{value:"ends",children:"ends with"})]}),n.jsx(zs,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:B===void 0?"":String(B),onChange:D=>K(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Has attachment"}),n.jsx("option",{value:"false",children:"No attachment"})]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:le,onChange:D=>te(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"assigned",children:"Assigned to me"})]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Ue===void 0?"":String(Ue),onChange:D=>Oe(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Starred"}),n.jsx("option",{value:"false",children:"Not starred"})]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Nr.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Hr||"",onChange:D=>Ja(D.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"All labels"}),Nr.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:D=>{at(D.target.checked),D.target.checked&&vt(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),n.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:gt||"",onChange:D=>{const pe=D.target.value||null;vt(pe),pe&&at(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any team member"}),Nn.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),n.jsx(zs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>a.invalidateQueries({queryKey:os.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),n.jsx("button",{type:"button",onClick:()=>{ee(""),T(""),V("contains"),K(void 0),me(""),de(""),he(void 0),Oe(void 0),te(""),Ja(null),at(!1),vt(null),Q(""),setTimeout(()=>a.invalidateQueries({queryKey:os.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),n.jsxs("button",{type:"button",onClick:()=>ve(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(d6,{className:"w-4 h-4"}),"Save search"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>Be(D=>!D),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(d6,{className:"w-4 h-4"}),"Saved (",Ee.length,")"]}),_e&&n.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ee.length===0?n.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ee.map(D=>n.jsxs("div",{className:"flex items-center group",children:[n.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{Q(D.filters.search??""),ee(D.filters.from??""),T(D.filters.subject??""),V(D.filters.subjectOperator??"contains"),K(D.filters.hasAttachment),me(D.filters.dateFrom??""),de(D.filters.dateTo??""),he(D.filters.isRead),Oe(D.filters.isStarred),te(D.filters.status??""),Ja(D.filters.labelId??null),Be(!1),setTimeout(()=>a.invalidateQueries({queryKey:os.emails()}),0)},children:D.name}),n.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Ye(pe=>pe.filter(be=>be.id!==D.id)),Be(!1)},title:"Delete saved search",children:""})]},D.id))})]}),n.jsxs("button",{type:"button",onClick:()=>{jc(!0),i&&pI(i).then(D=>{const pe=D?.data??D??[];ka(Array.isArray(pe)?pe:[])}).catch(()=>ka([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[n.jsx(p0,{className:"w-4 h-4"}),"Categorization rules"]}),n.jsx("button",{type:"button",onClick:()=>{kc(!0),i&&Lse(i).then(D=>{const pe=D?.data??D??[];Io(Array.isArray(pe)?pe:[])}).catch(()=>Io([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),n.jsxs("button",{type:"button",onClick:()=>{Sa(!0),Js.length===0&&In()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[n.jsx(nv,{className:"w-4 h-4"}),"Excluded Domains ",Js.length>0&&`(${Js.length})`]})]})]}),(H||X||W||B!==void 0||oe||se||Re!==void 0||Ue!==void 0||le||Hr)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),H&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',H.length>20?H.slice(0,20)+"":H,'"',n.jsx("button",{type:"button",onClick:()=>Q(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Hr&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",Nr.find(D=>D.id===Hr)?.name||Hr,n.jsx("button",{type:"button",onClick:()=>Ja(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),X&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",X,n.jsx("button",{type:"button",onClick:()=>ee(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),W&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",n.jsx("button",{type:"button",onClick:()=>T(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),B!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[B?"Has attachment":"No attachment",n.jsx("button",{type:"button",onClick:()=>K(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),le&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",le,n.jsx("button",{type:"button",onClick:()=>te(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Re!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Re?"Read":"Unread",n.jsx("button",{type:"button",onClick:()=>he(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ue!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Ue?"Starred":"Not starred",n.jsx("button",{type:"button",onClick:()=>Oe(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(oe||se)&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",oe&&se?`${oe}  ${se}`:oe||se,n.jsx("button",{type:"button",onClick:()=>{me(""),de("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{te(le==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${le==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(av,{className:"w-4 h-4 inline mr-1.5"}),le==="archived"?"Show Active":"Show Archived"]}),le==="archived"&&n.jsxs("span",{className:"text-sm text-slate-500",children:[to.length," archived email(s)"]})]}),(M||La.size>0)&&n.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:Sd,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:La.size===to.length?"Deselect all":"Select all"}),n.jsxs("span",{className:"text-sm text-indigo-600",children:[La.size," selected"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:hu,disabled:ce||La.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),n.jsx("button",{type:"button",onClick:mu,disabled:ce||La.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),n.jsx("button",{type:"button",onClick:Bl,disabled:ce||La.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),n.jsx("button",{type:"button",onClick:jo,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("div",{className:"flex items-center gap-2",children:!M&&n.jsxs("button",{type:"button",onClick:jo,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[n.jsx(ji,{className:"w-4 h-4"}),"Select"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),n.jsxs("select",{value:Ce,onChange:D=>Ie(D.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"sender",children:"Sender"}),n.jsx("option",{value:"subject",children:"Subject"}),n.jsx("option",{value:"unread",children:"Unread"})]}),n.jsx("button",{type:"button",onClick:()=>Me(De==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:De==="asc"?"Ascending":"Descending",children:De==="asc"?n.jsx(qj,{className:"w-4 h-4"}):n.jsx(zs,{className:"w-4 h-4"})})]})]}),xe&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{ve(!1),$e("")},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:D=>D.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),n.jsx("input",{type:"text",placeholder:"Search name",value:Fe,onChange:D=>$e(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{ve(!1),$e("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>{const D=Fe.trim()||"Saved search",pe={search:H||void 0,status:le||void 0,from:X||void 0,subject:W||void 0,subjectOperator:q,hasAttachment:B,dateFrom:oe||void 0,dateTo:se||void 0,labelId:Hr||void 0,isRead:Re,isStarred:Ue},be={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:D,filters:pe};Ye(Je=>[...Je,be]),ve(!1),$e("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),dd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>jc(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),n.jsx("button",{type:"button",onClick:async()=>{if(i){ru(!0);try{const pe=(await Pse(i,30))?.data;zu(pe)}catch(D){console.error("Failed to load accuracy stats:",D)}finally{ru(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:ec,children:ec?"Loading...":"View accuracy stats"})]}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),ba&&n.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",ba.periodDays," days)"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),n.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[ba.summary.accuracyRate,"%"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ba.summary.accepted," accepted / ",ba.summary.accepted+ba.summary.rejected+ba.summary.changed," resolved"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),n.jsx("p",{className:"text-lg font-semibold text-slate-700",children:ba.summary.total}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ba.summary.pending," pending"]})]})]}),n.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ba.bySource.domain.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ba.bySource.domain.accepted,"/",ba.bySource.domain.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ba.bySource.keyword.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ba.bySource.keyword.accepted,"/",ba.bySource.keyword.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ba.bySource.ai.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ba.bySource.ai.accepted,"/",ba.bySource.ai.total]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsxs("select",{value:Hi,onChange:D=>Lf(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"domain",children:"Sender domain"}),n.jsx("option",{value:"keyword",children:"Keyword"})]}),n.jsx("input",{type:"text",placeholder:Hi==="domain"?"e.g. company.com":"e.g. invoice",value:Wi,onChange:D=>Ai(D.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),n.jsxs("select",{value:El,onChange:D=>xs(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Select label"}),Nr.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),n.jsx("button",{type:"button",disabled:!Wi.trim()||!El||!i,onClick:async()=>{if(!(!i||!Wi.trim()||!El))try{await Ise({userId:i,type:Hi,value:Wi.trim(),labelId:El,labelName:Nr.find(be=>be.id===El)?.name});const D=await pI(i),pe=D?.data??D??[];ka(Array.isArray(pe)?pe:[]),Ai(""),xs(""),t("Rule added")}catch(D){r(D?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:Rn.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):Rn.map(D=>n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[n.jsxs("span",{className:"text-slate-700",children:[n.jsx("span",{className:"font-medium",children:D.type==="domain"?"Domain":"Keyword"}),n.jsxs("span",{className:"text-slate-500",children:[' "',D.value,'"  ']}),n.jsx("span",{className:"text-indigo-600",children:D.labelName||D.labelId})]}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Dse(D.id,i),ka(pe=>pe.filter(be=>be.id!==D.id)),t("Rule removed")}catch(pe){r(pe?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:n.jsx(tr,{className:"w-4 h-4"})})]},D.id))}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>jc(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),gd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>Sa(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:n.jsx(nv,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),n.jsx("button",{type:"button",onClick:()=>Sa(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:go,onChange:D=>nu(D.target.value),onKeyDown:D=>{D.key==="Enter"&&go.trim()&&en()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),n.jsx("button",{type:"button",onClick:en,disabled:!go.trim()||md,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:md?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),au?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(yt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Js.length===0?n.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[n.jsx(nv,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):n.jsx("div",{className:"space-y-2",children:Js.filter(D=>D.domain&&String(D.domain).trim()).map(D=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx(nv,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.domain})]}),n.jsx("button",{type:"button",onClick:()=>Wa(D.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:n.jsx(Lr,{className:"w-4 h-4"})})]},D.id))})]}),n.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>Sa(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),fd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>kc(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:mo.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):mo.map((D,pe)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[n.jsx("span",{className:"flex-1 text-slate-700 truncate",children:D.labelName||D.labelId}),n.jsx("input",{type:"text",placeholder:"View name",value:D.viewName??"",onChange:be=>{const Je=[...mo];Je[pe]={...Je[pe],viewName:be.target.value},Io(Je)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),n.jsx("button",{type:"button",onClick:()=>Io(be=>be.filter((Je,ot)=>ot!==pe)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:n.jsx(tr,{className:"w-4 h-4"})})]},D.labelId||pe))}),n.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:n.jsxs("select",{value:"",onChange:D=>{const pe=D.target.value;if(!pe||mo.some(Je=>Je.labelId===pe))return;const be=Nr.find(Je=>Je.id===pe);Io(Je=>[...Je,{labelId:pe,labelName:be?.name,viewName:be?.name??"",sortOrder:Je.length}]),D.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Add label to mapping"}),Nr.filter(D=>!mo.some(pe=>pe.labelId===D.id)).map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>kc(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Fse({userId:i,mappings:mo}),t("Folder mapping saved"),kc(!1)}catch(D){r(D?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),Ir&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:Ir}),n.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[n.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${N?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:Mt?n.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((D,pe)=>n.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),n.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},pe))}):to.length===0?n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(Qa,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium",children:Hr?"No emails with this label":"No emails yet"}),n.jsx("p",{className:"text-slate-400 text-sm mt-1",children:Hr?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(oe||se)&&!Hr&&n.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),Hr&&n.jsx("button",{onClick:()=>Ja(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!Hr&&n.jsx("button",{onClick:Us,disabled:E,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:E?"Syncing":"Sync from Gmail"})]}):Qt==="threads"&&z0?n.jsxs("ul",{ref:po,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[z0.map(D=>{const pe=Fr.has(D.threadId),be=D.latestEmail,Je=D.emails.length>1;return n.jsxs("li",{children:[n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:ot=>{!M&&(ot.key==="Enter"||ot.key===" ")&&(ot.preventDefault(),Je?cc(D.threadId):Zi(be))},onClick:()=>!M&&(Je?cc(D.threadId):Zi(be)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===be.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:La.has(be.id),onChange:()=>Rl(be.id),onClick:ot=>ot.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Vs,{src:void 0,alt:be.sender||be.email||"",fallbackText:be.sender||be.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Je&&n.jsx("div",{role:"button",tabIndex:0,onClick:ot=>{ot.stopPropagation(),cc(D.threadId)},onKeyDown:ot=>{(ot.key==="Enter"||ot.key===" ")&&(ot.preventDefault(),ot.stopPropagation(),cc(D.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:pe?n.jsx(zs,{className:"w-4 h-4 text-slate-500"}):n.jsx(ya,{className:"w-4 h-4 text-slate-500"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${D.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:be.subject||"(No subject)"}),be.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),be.syncStatus?.starredStatus&&kd(be.syncStatus.starredStatus)]}),be.attachments&&be.attachments.length>0&&n.jsx(Q0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${be.attachments.length} attachment(s)`}),be.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${be.priority==="high"?"bg-red-100 text-red-700":be.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:be.priority==="high"?"High":be.priority==="low"?"Low":"Medium"}),be.threadStatus&&be.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${be.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":be.threadStatus==="pending"?"bg-amber-100 text-amber-700":be.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:be.threadStatus.charAt(0).toUpperCase()+be.threadStatus.slice(1)}),be.owner&&Nn.find(ot=>ot.id===be.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Nn.find(ot=>ot.id===be.owner)?.name||"Assigned"}),Je&&n.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:D.emails.length})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[be.sender||be.email,Je&&`  ${D.emails.length} messages`]}),(()=>{const ot=new Set;D.emails.forEach(wt=>{wt.participants&&Array.isArray(wt.participants)&&wt.participants.forEach($t=>ot.add($t.toLowerCase())),wt.to&&Array.isArray(wt.to)&&wt.to.forEach($t=>ot.add($t.toLowerCase())),wt.cc&&Array.isArray(wt.cc)&&wt.cc.forEach($t=>ot.add($t.toLowerCase()))});const It=Array.from(ot).slice(0,5);return It.length>0?n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[n.jsx("span",{className:"text-slate-500",children:"To: "}),It.map((wt,$t)=>n.jsxs("span",{children:[wt.split("@")[0],$t<It.length-1&&", "]},wt)),ot.size>5&&` +${ot.size-5} more`]}):null})(),(be.accountEmail||be.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[be.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",be.accountOwnerName]}),be.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:be.accountEmail})]}),be.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:rf(be.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:be.timestamp}),D.unreadCount>0&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(ya,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),pe&&Je&&n.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:D.emails.map((ot,It)=>{const wt=Br.has(ot.id);return n.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[n.jsxs("button",{type:"button",onClick:()=>nf(ot.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${N?.id===ot.id?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:$t=>{$t.stopPropagation(),nf(ot.id)},children:wt?n.jsx(zs,{className:"w-3 h-3 text-slate-500"}):n.jsx(ya,{className:"w-3 h-3 text-slate-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`text-xs font-medium ${ot.isRead?"text-slate-600":"text-slate-900"}`,children:ot.sender||ot.email}),!ot.isRead&&n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(ot.to?.length>0||ot.cc?.length>0)&&n.jsxs("span",{className:"text-xs text-slate-400",children:[ot.to?.length>0&&`To: ${ot.to.slice(0,2).map($t=>$t.split("@")[0]).join(", ")}${ot.to.length>2?"...":""}`,ot.cc?.length>0&&` CC: ${ot.cc.slice(0,2).map($t=>$t.split("@")[0]).join(", ")}${ot.cc.length>2?"...":""}`]})]}),ot.lastMessage&&!wt&&n.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:rf(ot.lastMessage,100)})]}),n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:ot.timestamp})]}),wt&&n.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsx("span",{className:"font-medium",children:ot.sender||ot.email}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsx("span",{children:ot.timestamp})]}),n.jsx("button",{type:"button",onClick:()=>Zi(ot),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),n.jsx("div",{className:"text-xs text-slate-700 mt-2",children:n.jsx(hD,{content:ot.lastMessage||"No content"})}),(ot.to?.length>0||ot.cc?.length>0||ot.bcc?.length>0)&&n.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[ot.to?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"To:"})," ",ot.to.join(", ")]}),ot.cc?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"CC:"})," ",ot.cc.join(", ")]}),ot.bcc?.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BCC:"})," ",ot.bcc.join(", ")]})]})]})]},ot.id)})})]},D.threadId)}),rr&&n.jsx("li",{className:"px-4 py-4 pb-6",ref:ud,children:dr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(yt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:ln,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${Hr||"all"}`):n.jsxs("ul",{ref:po,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[to.map(D=>n.jsx("li",{children:n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:pe=>{!M&&(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),Zi(D))},onClick:()=>!M&&Zi(D),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===D.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:La.has(D.id),onChange:()=>Rl(D.id),onClick:pe=>pe.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Vs,{src:void 0,alt:D.sender||D.email||"",fallbackText:D.sender||D.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${D.isRead?"text-slate-600":"text-slate-900"}`,children:D.subject||"(No subject)"}),D.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),D.syncStatus?.starredStatus&&kd(D.syncStatus.starredStatus)]}),D.attachments&&D.attachments.length>0&&n.jsx(Q0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${D.attachments.length} attachment(s)`}),D.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.priority==="high"?"bg-red-100 text-red-700":D.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:D.priority==="high"?"High":D.priority==="low"?"Low":"Medium"}),D.threadStatus&&D.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":D.threadStatus==="pending"?"bg-amber-100 text-amber-700":D.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:D.threadStatus.charAt(0).toUpperCase()+D.threadStatus.slice(1)}),D.owner&&Nn.find(pe=>pe.id===D.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Nn.find(pe=>pe.id===D.owner)?.name||"Assigned"}),D.labels&&D.labels.length>0&&n.jsxs(n.Fragment,{children:[D.labels.slice(0,3).map(pe=>{const be=Nr.find(Je=>Je.id===pe);return be?n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:be.name,children:be.name},pe):null}),D.labels.length>3&&n.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",D.labels.length-3]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:D.sender||D.email}),(D.accountEmail||D.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[D.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",D.accountOwnerName]}),D.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:D.accountEmail})]}),D.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:rf(D.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:D.timestamp}),!D.isRead&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(ya,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},D.id)),rr&&n.jsx("li",{ref:ud,className:"px-4 py-4 pb-6",children:dr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(yt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:ln,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${Hr||"all"}`)}),n.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:U?n.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:n.jsx(yt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):N?n.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[n.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:N.subject||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"break-words",children:N.sender||N.email}),n.jsx("span",{children:""}),n.jsx("span",{children:N.timestamp}),N.senderClassification&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${N.senderClassification==="internal"?"bg-slate-100 text-slate-700":N.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:N.senderClassification==="internal"?"Internal":N.senderClassification==="system"?"System":"Customer"})]}),(N.accountEmail||N.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[N.accountOwnerName&&n.jsxs("span",{children:["Synced via ",n.jsx("span",{className:"font-medium text-slate-600",children:N.accountOwnerName})]}),N.accountEmail&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:N.accountEmail})]})]})}),N.linkedRecords&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.linkedRecords.contactId&&(()=>{const D=pl.find(pe=>pe.id===N.linkedRecords?.contactId);return D?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[n.jsx(ol,{className:"w-3 h-3"}),D.name]}):null})(),N.linkedRecords.companyId&&(()=>{const D=ou.find(pe=>pe.id===N.linkedRecords?.companyId);return D?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[n.jsx(Wd,{className:"w-3 h-3"}),D.name]}):null})(),N.linkedRecords.dealId&&(()=>{const D=ha.find(pe=>pe.id===N.linkedRecords?.dealId);return D?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[n.jsx(kl,{className:"w-3 h-3"}),D.title||D.name]}):null})(),N.linkedRecords.projectId&&(()=>{const D=Ec.find(pe=>pe.id===N.linkedRecords?.projectId);return D?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[n.jsx(Vd,{className:"w-3 h-3"}),D.title||D.name]}):null})(),N.linkedRecords.contractId&&(()=>{const D=lu.find(pe=>pe.id===N.linkedRecords?.contractId);return D?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[n.jsx(ea,{className:"w-3 h-3"}),D.title]}):null})()]}),wd?n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(Tc.contacts.length>0||Tc.companies.length>0)&&n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),Tc.contacts.map(D=>n.jsxs("button",{onClick:()=>Es("contact",D.id),disabled:as,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[n.jsx(ol,{className:"w-3 h-3"}),D.name,n.jsx(nn,{className:"w-3 h-3"})]},D.id)),Tc.companies.map(D=>n.jsxs("button",{onClick:()=>Es("company",D.id),disabled:as,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[n.jsx(Wd,{className:"w-3 h-3"}),D.name,n.jsx(nn,{className:"w-3 h-3"})]},D.id))]}),n.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",onClick:()=>{Nd("contact"),Oc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(i0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),n.jsxs("button",{type:"button",onClick:()=>{Nd("company"),Oc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(i0,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),n.jsxs("button",{type:"button",onClick:()=>{Nd("deal"),Oc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(i0,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),n.jsxs("button",{type:"button",onClick:()=>{Nd("project"),Oc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(i0,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),n.jsxs("button",{type:"button",onClick:()=>{Nd("contract"),Oc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(i0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),n.jsxs("button",{type:"button",onClick:()=>Yu(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(ji,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),N.labels&&N.labels.length>0&&n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:N.labels.map(D=>{const pe=Nr.find(be=>be.id===D);return pe?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[200px]",children:pe.name}),n.jsx("button",{type:"button",onClick:()=>Ho(N.id,D),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:n.jsx(tr,{className:"w-3 h-3"})})]},D):null})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",disabled:Er||!i,onClick:async()=>{if(!(!N?.id||!i)){Kr(!0),He([]);try{const pe=(await Ose({emailId:N.id,userId:i,useAi:!0,availableLabels:Nr.map(be=>({id:be.id,name:be.name}))}))?.data;pe?.suggestedLabels?.length&&(He(pe.suggestedLabels),Cr(pe.suggestionId||null))}catch{He([])}finally{Kr(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Er?n.jsx(yt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):n.jsx(Mi,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),ho.length>0&&n.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),ho.map((D,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[150px]",children:D.labelName}),n.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",D.source,")"]}),D.labelId&&n.jsx("button",{type:"button",onClick:()=>{fu(N.id,[D.labelId],[],!0,br||void 0),He(be=>be.filter((Je,ot)=>ot!==pe))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:n.jsx(nn,{className:"w-3 h-3"})})]},D.labelId||pe))]}),n.jsx("div",{className:"mt-1",children:n.jsxs("button",{type:"button",onClick:()=>{ms(N.id),Si(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[n.jsx(nn,{className:"w-3 h-3"}),N.labels&&N.labels.length>0?"Manage Labels":"Add Labels"]})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(N.customTags||[]).map((D,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[D,n.jsx("button",{type:"button",onClick:()=>{const be=(N.customTags||[]).filter((Je,ot)=>ot!==pe);kv(N.id,{userId:i,customTags:be}).then(()=>{S(Je=>Je?{...Je,customTags:be}:null)}).catch(()=>{})},className:"hover:text-red-600",children:n.jsx(tr,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",placeholder:"Add tag",value:Ys,onChange:D=>_i(D.target.value),onKeyDown:D=>{if(D.key==="Enter"&&Ys.trim()){const be=[...N.customTags||[],Ys.trim()];kv(N.id,{userId:i,customTags:be}).then(()=>{S(Je=>Je?{...Je,customTags:be}:null),_i("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("select",{value:N.priority||"medium",onChange:D=>ac(N.id,{priority:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]}),n.jsxs("select",{value:N.threadStatus||"active",onChange:D=>ac(N.id,{threadStatus:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"resolved",children:"Resolved"}),n.jsx("option",{value:"archived",children:"Archived"})]}),c&&n.jsxs("select",{value:N.owner||"",onChange:D=>ac(N.id,{owner:D.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[n.jsx("option",{value:"",children:"Unassigned"}),Nn.map(D=>n.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),m&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Ml(N.id,!N.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:N.isStarred?"Unstar":"Star",children:N.isStarred?n.jsx(gf,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):n.jsx(jU,{className:"w-4 h-4"})}),N.syncStatus?.starredStatus&&n.jsx("div",{className:"flex-shrink-0",children:kd(N.syncStatus.starredStatus)})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Kn(N.id,!N.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:N.isRead?"Mark unread":"Mark read"}),N.syncStatus?.readStatus&&n.jsx("div",{className:"flex-shrink-0",children:kd(N.syncStatus.readStatus)})]}),p&&n.jsx(n.Fragment,{children:N.threadStatus==="archived"?n.jsxs("button",{type:"button",onClick:()=>Mc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[n.jsx(av,{className:"w-3 h-3"}),"Restore"]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>ko(N.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[n.jsx(av,{className:"w-3 h-3"}),"Archive"]}),N.threadStatus!=="resolved"&&v&&n.jsxs("button",{type:"button",onClick:()=>sc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[n.jsx(gn,{className:"w-3 h-3"}),"Resolve"]})]})}),y&&n.jsxs("button",{type:"button",onClick:()=>pu(N.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[n.jsx(Lr,{className:"w-3 h-3"}),"Delete"]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{Ac("reply"),rs([N.email]),ui([]),Rs([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),vs(""),ns(N.accountEmail||qe[0]?.email||""),Pl(!1),Il(!1),hl(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Gl,{className:"w-3 h-3"}),"Reply"]}),n.jsx("button",{type:"button",onClick:()=>{Ac("replyAll");const D=(N.accountEmail||"").toLowerCase(),pe=[N.email,...N.to||[],...N.cc||[]].filter((be,Je,ot)=>{const It=be.toLowerCase();return ot.findIndex(wt=>wt.toLowerCase()===It)===Je&&It!==D});rs([N.email]),ui(pe.filter(be=>be.toLowerCase()!==N.email.toLowerCase())),Rs([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),vs(""),ns(N.accountEmail||qe[0]?.email||""),Pl(!0),Il(!1),hl(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),f&&n.jsx("button",{type:"button",onClick:()=>{Ac("forward"),rs([]),ui([]),Rs([]),Vi(N.subject?.startsWith("Fwd:")||N.subject?.startsWith("Fw:")?N.subject:`Fwd: ${N.subject||""}`);const D=N.body||N.lastMessage||"";vs(`

--- Forwarded message ---
From: ${N.sender||N.email}
Date: ${N.timestamp}
Subject: ${N.subject}
To: ${N.to?.join(", ")||N.email}

${D}`),ns(N.accountEmail||qe[0]?.email||""),Pl(!1),Il(!1),hl(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),n.jsxs("button",{type:"button",onClick:()=>{if(!i||!N.id)return;const D=(N.body||N.lastMessage||"").replace(/<[^>]+>/g," "),pe=`${N.subject||""} ${D}`.toLowerCase(),be=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const sa of be){const ti=pe.match(sa);if(ti){Je=ti[0];break}}const ot=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let It;for(const sa of ot){const ti=pe.match(sa);if(ti){It=ti[0];break}}const wt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let $t;for(const sa of wt){const ti=pe.match(sa);if(ti?.[1]){$t=ti[1].trim();break}}const kr=Array.isArray(N.to)?N.to:N.to?[N.to]:[],xn=N.sender||N.from||N.email,aa=[...new Set([...kr,xn].filter(Boolean))];Sn(N.id),$a(N.subject||null),Qs(N.body||N.lastMessage||null),Lo(aa.length?aa:null),sn({title:N.subject||"Meeting",date:Je,time:It,location:$t,participants:aa,description:(N.body||N.lastMessage||"").substring(0,500)}),xr(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[n.jsx(oa,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),n.jsx("div",{className:"prose prose-slate max-w-none break-words",children:n.jsx(hD,{content:N.body||N.lastMessage||"No content",highlightTerm:it(H).searchText||void 0})})]}),(Mf.length>0||Ku.length>0||rc.length>0)&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),n.jsxs("div",{className:"space-y-3",children:[Mf.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ji,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",Mf.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Mf.map(D=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:D.title}),D.status&&n.jsx("span",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]}),Ku.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vd,{className:"w-4 h-4 text-amber-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Ku.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Ku.map(D=>n.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsx("p",{className:"text-sm font-medium text-amber-900",children:D.title||D.name}),D.status&&n.jsx("span",{className:"text-xs text-amber-600",children:D.status})]},D.id))})]}),rc.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ea,{className:"w-4 h-4 text-red-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",rc.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:rc.map(D=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:D.title}),D.status&&n.jsx("span",{className:"text-xs text-red-600",children:D.status})]},D.id))})]})]})]}),G.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(oa,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",G.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:G.map(D=>n.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:D.title}),n.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Is,{className:"w-3 h-3"}),n.jsxs("span",{children:[new Date(D.start).toLocaleString()," - ",new Date(D.end).toLocaleString()]})]}),D.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(jD,{className:"w-3 h-3"}),n.jsx("span",{children:D.location})]}),D.participants&&D.participants.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ol,{className:"w-3 h-3"}),n.jsx("span",{children:D.participants.join(", ")})]})]})]}),D.htmlLink&&n.jsx("a",{href:D.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:n.jsx(Ss,{className:"w-4 h-4"})})]})},D.id))})]}),N.attachments&&N.attachments.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Q0,{className:"w-4 h-4 text-slate-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",N.attachments.length,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.attachments.map((D,pe)=>{const be=D.isDriveFile||D.driveFileId;return n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${be?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[be&&D.iconUrl?n.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ei(D.mimeType)?"bg-blue-50 text-blue-600":ic(D.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ei(D.mimeType)?n.jsx(Nl,{className:"w-4 h-4"}):ic(D.mimeType)?n.jsx(uc,{className:"w-4 h-4"}):n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.filename}),be&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:be?"Google Drive file":`${va(D.size)}  ${D.mimeType}`})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[be&&D.previewUrl&&n.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(Ss,{className:"w-4 h-4"})}),!be&&(ei(D.mimeType)||ic(D.mimeType))&&n.jsx("button",{onClick:()=>Xh(N.id,D.attachmentId,D.filename,D.mimeType),disabled:bn[`${N.id}-${D.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:bn[`${N.id}-${D.attachmentId}-view`]?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Tu,{className:"w-4 h-4"})}),!be&&n.jsx("button",{onClick:()=>Zu(N.id,D.attachmentId,D.filename),disabled:bn[`${N.id}-${D.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:bn[`${N.id}-${D.attachmentId}-download`]?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(h0,{className:"w-4 h-4"})}),be&&D.downloadUrl&&n.jsx("a",{href:D.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:n.jsx(h0,{className:"w-4 h-4"})})]})]},D.attachmentId||pe)})})]}),N.attachments&&N.attachments.some(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation")))&&n.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(uc,{className:"w-4 h-4 text-blue-500"}),n.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),n.jsx("div",{className:"space-y-4",children:N.attachments.filter(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation"))).map((D,pe)=>{const be=D.previewUrl?.replace("/edit","/preview")||D.previewUrl;return n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[D.iconUrl&&n.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.filename}),n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),D.previewUrl&&n.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:n.jsx(Ss,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:n.jsx("iframe",{src:be,className:"absolute top-0 left-0 w-full h-full border-0",title:D.filename,allow:"fullscreen"})})]},D.attachmentId||pe)})})]}),n.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Mi,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Qe.length>0&&n.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>Wo(),pe=>{})},disabled:st,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:st?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ou,{className:"w-3 h-3"}),"Regenerate"]})}),!Ge&&n.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>Wo(),pe=>{})},disabled:st,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:st?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mi,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),Qe.length>1&&n.jsxs("div",{className:"mb-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Qe.map((D,pe)=>n.jsxs("button",{type:"button",onClick:()=>{Le(pe),rt(w(D.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Ke===pe?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:D.style}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[D.confidence,"%"]})]}),n.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:D.description}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full ${D.confidence>=80?"bg-green-500":D.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${D.confidence}%`}})})]},pe))})]}),Ge?n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[Qe.length>1&&Ke!==null&&n.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[Qe[Ke].style," Variation"]}),n.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",Qe[Ke].description,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Qe[Ke].confidence,"%"]})]})]}),n.jsx("div",{className:"quill-wrapper",children:n.jsx(r1,{ref:D=>{Ot.current=D,D&&(Lt.current=D.getEditor())},theme:"snow",value:Ge,onChange:D=>rt(D),modules:Rc,formats:q0,placeholder:"Edit your draft..."})}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("button",{type:"button",onClick:tf,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Gl,{className:"w-3 h-3"}),"Copy to Clipboard"]}),n.jsxs("button",{type:"button",onClick:Hf,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"}),"Save as Template"]}),n.jsx("button",{type:"button",onClick:()=>{Mr(!0),Ad()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),n.jsx("button",{type:"button",onClick:()=>{rt(null),tt([]),Le(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),n.jsx("button",{type:"button",onClick:()=>{Mr(!0),Ad()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",N?.id&&ir[N.id]&&ir[N.id].length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:ir[N.id].length})]}),l&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",style:{position:"relative"},children:[n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),n.jsx(r1,{ref:D=>{ht.current=D,D&&(qt.current=D.getEditor())},theme:"snow",value:an,onChange:Ts,onBlur:()=>{setTimeout(()=>{ua||jn(null)},200)},modules:Rc,formats:q0,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),ua&&pr.length>0&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:D=>{D.preventDefault()},children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(yh,{className:"w-3 h-3"}),"Mention User"]}),pr.map(D=>n.jsxs("button",{type:"button",onMouseDown:pe=>{pe.preventDefault(),pe.stopPropagation(),zf(D)},onClick:pe=>{pe.preventDefault(),pe.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:D.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]})]},D.id))]})})]}),n.jsxs("div",{className:"relative",ref:Ia,children:[n.jsxs("button",{type:"button",onClick:()=>wr(!Ft),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${Jt.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ed,{className:`w-4 h-4 ${Jt.length>0?"text-indigo-600":"text-slate-400"}`}),n.jsx("span",{className:`font-medium ${Jt.length>0?"text-indigo-900":"text-slate-600"}`,children:Jt.length>0?`Marked for ${Jt.length} team member${Jt.length>1?"s":""}`:"Mark for team member"})]}),Jt.length>0&&n.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),cr([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:n.jsx(tr,{className:"w-3 h-3 text-indigo-600"})})]}),Ft&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[n.jsx(ed,{className:"w-3 h-3"}),"Select Team Members"]}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:zt,onChange:D=>Ua(D.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),Nn.filter(D=>D.id!==i&&(zt===""||D.name?.toLowerCase().includes(zt.toLowerCase())||D.email?.toLowerCase().includes(zt.toLowerCase()))).map(D=>{const pe=Jt.includes(D.id);return n.jsxs("button",{type:"button",onClick:()=>{cr(pe?be=>be.filter(Je=>Je!==D.id):be=>[...be,D.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${pe?"bg-indigo-50":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${pe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:D.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]}),pe&&n.jsx(gn,{className:"w-4 h-4 text-indigo-600"})]},D.id)})]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:Tr?n.jsx(Nl,{className:"w-4 h-4"}):n.jsx(Qd,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Tr?ne?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:St,type:"file",accept:"image/*",onChange:xu,className:"hidden"})]}),n.jsx("button",{onClick:ef,disabled:ke||!an.trim()&&!ne,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:ke?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send"]})})]}),Tr&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Tr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{zr(""),je(null),St.current&&(St.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),!l&&n.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:n.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:ir[N?.id]&&ir[N.id]?.length>0?ir[N.id].map(D=>{const pe=Wc(o,"shared-inbox:delete-note")&&(uye(o)||D.userId===i);return n.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(D.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:D.userName?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:D.userName}),(D.markedFor||[]).length>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[n.jsx(ed,{className:"w-2.5 h-2.5"}),"Marked"]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(D.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(D.markedFor||[]).length>0&&n.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",Nn.filter(be=>(D.markedFor||[]).includes(be.id)).map(be=>be.name).join(", ")||"Unknown"]})]})]}),pe&&n.jsx("button",{onClick:()=>N?.id&&ql(N.id,D.id),disabled:ge===D.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ge===D.id?n.jsx(yt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),D.message&&n.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D.message}}),D.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsxs("button",{type:"button",onClick:()=>er({isOpen:!0,imageUrl:D.imageUrl,imageName:D.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[n.jsx(Nl,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:D.imageName||"View Attachment"})]})})]},D.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(Qa,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Da.isOpen&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>er({isOpen:!1,imageUrl:"",imageName:void 0}),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>er({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("img",{src:Da.imageUrl,alt:Da.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:D=>D.stopPropagation()}),Da.imageName&&n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Da.imageName})})]})}),hs&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{zn(!1),Hn("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Mi,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),n.jsx("button",{onClick:()=>{zn(!1),Hn("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:As,onChange:D=>Hn(D.target.value),onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),lc())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{zn(!1),Hn("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:lc,disabled:!As||!As.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),vr&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Mr(!1),children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Mi,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),n.jsx("button",{onClick:()=>Mr(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Vr.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Mi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):n.jsx("div",{className:"space-y-3",children:Vr.map(D=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),N&&D.content&&(rt(D.content),Mr(!1),t("Template loaded"))},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:D.name}),n.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[D.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(D.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),N&&D.content&&(rt(D.content),Mr(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),n.jsx("button",{onClick:async pe=>{pe.preventDefault(),pe.stopPropagation(),wo(D.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Lr,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},D.id))})})]})}),Oi&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>wo(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Zn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>wo(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const D=Oi;wo(null);try{await nse(D,i),t("Template deleted"),Ad()}catch(pe){const be=pe?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",be),r(be)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),iu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Bo(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(uc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),n.jsx("button",{onClick:()=>Bo(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:hi,onChange:D=>Hu(D.target.value),onKeyDown:D=>{D.key==="Enter"&&_d(hi)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),n.jsx("button",{onClick:()=>_d(hi),disabled:Dl,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Dl?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Dl&&yd.length===0?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):yd.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(uc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):n.jsx("div",{className:"space-y-2",children:yd.map(D=>n.jsxs("button",{onClick:()=>$f(D),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[D.iconLink?n.jsx("img",{src:D.iconLink,alt:D.name,className:"w-8 h-8"}):n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(uc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[D.size?va(D.size):"Drive file","  ",D.mimeType||"Unknown type"]})]}),n.jsx("button",{onClick:pe=>{pe.stopPropagation(),D.webViewLink&&window.open(D.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:n.jsx(Ss,{className:"w-4 h-4 text-slate-400"})})]},D.id))}),tc&&n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx("button",{onClick:()=>_d(hi,tc),disabled:Dl,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Dl?"Loading...":"Load More"})})]})]})})]}),uu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>ss(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:n.jsx(Zn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>ss(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{ss(!1),hl(!1),rs([]),ui([]),Rs([]),Vi(""),vs(""),Ki(""),Xi(""),Yi("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),vo&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ss(!0)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Za==="compose"?"Compose Email":Za==="reply"?"Reply":Za==="replyAll"?"Reply All":"Forward"}),n.jsx("button",{onClick:()=>{ss(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[qe.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),n.jsx("select",{value:wa,onChange:D=>ns(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:qe.map((D,pe)=>n.jsxs("option",{value:D.email,children:[D.email," ",D.isCurrentUser?"(You)":`(${D.ownerName})`]},`${D.email}-${D.userId}-${pe}`))})]}),qe.length===0&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No email accounts available. Please connect a Gmail account or ensure users are configured."}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[on.map((D,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[D,n.jsx("button",{type:"button",onClick:()=>rs(on.filter((be,Je)=>Je!==pe)),className:"hover:text-indigo-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:Mo,onChange:D=>{const pe=D.target.value;if(Ki(pe),pe.length>0){const be=pl.filter(Je=>Je.email?.toLowerCase().includes(pe.toLowerCase())||Je.name?.toLowerCase().includes(pe.toLowerCase())).slice(0,5);Cc(be),bs(!0)}else bs(!1)},onKeyDown:D=>{if(D.key==="Enter"&&Mo.trim()){D.preventDefault();const pe=Mo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!on.includes(pe)&&(rs([...on,pe]),Ki(""),bs(!1))}else if(D.key==="Backspace"&&Mo===""&&on.length>0)rs(on.slice(0,-1));else if(D.key==="ArrowDown"&&ys)D.preventDefault(),Xn(pe=>Math.min(pe+1,yo.length-1));else if(D.key==="ArrowUp"&&ys)D.preventDefault(),Xn(pe=>Math.max(pe-1,0));else if(D.key==="Enter"&&ys&&yo[ra]){D.preventDefault();const pe=yo[ra];pe.email&&!on.includes(pe.email)&&(rs([...on,pe.email]),Ki(""),bs(!1))}else if(D.key===","||D.key===";"){D.preventDefault();const pe=Mo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!on.includes(pe)&&(rs([...on,pe]),Ki(""),bs(!1))}},onBlur:()=>{const D=Mo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!on.includes(D)&&(rs([...on,D]),Ki(""),bs(!1))},placeholder:on.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),ys&&yo.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:yo.map((D,pe)=>n.jsxs("button",{type:"button",onClick:()=>{D.email&&!on.includes(D.email)&&(rs([...on,D.email]),Ki(""),bs(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${pe===ra?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"font-medium text-slate-900",children:D.name}),n.jsx("div",{className:"text-xs text-slate-500",children:D.email})]},D.id))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),n.jsxs("button",{type:"button",onClick:()=>Pl(!Ei),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ei?"Hide":"Show"," Cc"]})]}),Ei&&n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[ga.map((D,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,n.jsx("button",{type:"button",onClick:()=>ui(ga.filter((be,Je)=>Je!==pe)),className:"hover:text-slate-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:Bs,onChange:D=>{Xi(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&Bs.trim()){D.preventDefault();const pe=Bs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!ga.includes(pe)&&(ui([...ga,pe]),Xi(""))}else if(D.key==="Backspace"&&Bs===""&&ga.length>0)ui(ga.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const pe=Bs.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!ga.includes(pe)&&(ui([...ga,pe]),Xi(""))}},onBlur:()=>{const D=Bs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!ga.includes(D)&&(ui([...ga,D]),Xi(""))},placeholder:ga.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),n.jsxs("button",{type:"button",onClick:()=>Il(!vd),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[vd?"Hide":"Show"," Bcc"]})]}),vd&&n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Bn.map((D,pe)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,n.jsx("button",{type:"button",onClick:()=>Rs(Bn.filter((be,Je)=>Je!==pe)),className:"hover:text-slate-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},pe)),n.jsx("input",{type:"text",value:Ti,onChange:D=>{Yi(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&Ti.trim()){D.preventDefault();const pe=Ti.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!Bn.includes(pe)&&(Rs([...Bn,pe]),Yi(""))}else if(D.key==="Backspace"&&Ti===""&&Bn.length>0)Rs(Bn.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const pe=Ti.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(pe)&&!Bn.includes(pe)&&(Rs([...Bn,pe]),Yi(""))}},onBlur:()=>{const D=Ti.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!Bn.includes(D)&&(Rs([...Bn,D]),Yi(""))},placeholder:Bn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:za,onChange:D=>Vi(D.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),Vr.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:Qi||"",onChange:D=>{const pe=D.target.value||null;if(vm(pe),pe){const be=Vr.find(Je=>Je.id===pe);be?.content&&(vs(be.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No template"}),Vr.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]}),n.jsx("button",{type:"button",onClick:()=>Mr(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:n.jsx(Mi,{className:"w-4 h-4"})})]})]}),Za==="compose"&&n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>{Pc(!Bf),!Bf&&!Ll&&za&&on.length>0&&eo()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[n.jsx(Mi,{className:"w-4 h-4"}),Bf?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),Bf&&n.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:Qu?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):Ll?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),n.jsx("button",{type:"button",onClick:eo,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),n.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:Ll}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{vs(Ll||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),n.jsx("button",{type:"button",onClick:()=>{const D=Ll?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(D),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):n.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Fo.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),n.jsxs("select",{value:Fo.find(D=>D.content===Gi)?.id||"",onChange:D=>{const pe=Fo.find(be=>be.id===D.target.value);Tl(pe?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No signature"}),Fo.map(D=>n.jsxs("option",{value:D.id,children:[D.name," ",D.isDefault?"(Default)":""]},D.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),n.jsx(r1,{ref:D=>{ct.current=D},theme:"snow",value:Ha,onChange:D=>{vs(D)},modules:Rc,formats:q0,placeholder:"Compose your message..."})]}),Gi&&n.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[n.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:Gi}})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),n.jsx("input",{ref:Ro,type:"file",multiple:!0,onChange:U0,className:"hidden"})]}),n.jsxs("button",{type:"button",onClick:()=>{Bo(!0),Hu(""),_d()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(uc,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),_n.length>0&&n.jsx("div",{className:"mt-3 space-y-2",children:_n.map(D=>n.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${D.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[D.isDriveFile&&D.driveIconLink?n.jsx("img",{src:D.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ei(D.file.type)?"bg-blue-50 text-blue-600":ic(D.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ei(D.file.type)?n.jsx(Nl,{className:"w-4 h-4"}):ic(D.file.type)?n.jsx(uc,{className:"w-4 h-4"}):n.jsx(Q0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.file.name}),D.isDriveFile&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:D.isDriveFile?"Google Drive file":`${va(D.file.size)}  ${D.file.type}`}),qo[D.id]!==void 0&&qo[D.id]<100&&n.jsxs("div",{className:"flex-1 max-w-[100px]",children:[n.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${qo[D.id]}%`}})}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[qo[D.id],"%"]})]})]})]}),D.isDriveFile&&D.driveWebViewLink&&n.jsx("a",{href:D.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(Ss,{className:"w-4 h-4"})}),D.preview&&!D.isDriveFile&&n.jsx("button",{type:"button",onClick:()=>{fa({isOpen:!0,emailId:"",attachmentId:D.id,filename:D.file.name,mimeType:D.file.type,url:D.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:n.jsx(Tu,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:()=>Ul(D.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:n.jsx(tr,{className:"w-4 h-4"})})]},D.id))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{ss(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Za==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{$o(!0),await js()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(uc,{className:"w-4 h-4"}),"Load Drafts"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:Ma,disabled:Yn||!za||!Ha,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Yn?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(uc,{className:"w-4 h-4"}),"Save Draft"]})}),Za==="compose"&&n.jsxs("button",{type:"button",onClick:()=>{if(!on.length||!za||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}ws(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[n.jsx(Is,{className:"w-4 h-4"}),"Schedule"]}),Za==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{if(!i||on.length===0||!za||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}const D=Ha.replace(/<[^>]+>/g," ").toLowerCase(),pe=`${za} ${D}`,be=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Je;for(const kr of be){const xn=pe.match(kr);if(xn){Je=xn[0];break}}const ot=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let It;for(const kr of ot){const xn=pe.match(kr);if(xn){It=xn[0];break}}const wt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let $t;for(const kr of wt){const xn=pe.match(kr);if(xn&&xn[1]){$t=xn[1].trim();break}}sn({title:za,date:Je,time:It,location:$t,participants:on,description:Ha.substring(0,500)}),Sn(null),xr(!0)},disabled:xt||!i||on.length===0||!za,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[xt?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(oa,{className:"w-4 h-4"}),"Schedule Meeting"]}),d?n.jsx("button",{type:"button",onClick:async()=>{if(!i||on.length===0||!za||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}Zs(!0);try{let D=Ha;Gi&&(D+=`<br><br>${Gi}`);const pe=await Promise.all(_n.filter(Je=>!Je.isDriveFile).map(async Je=>new Promise((ot,It)=>{const wt=new FileReader;wt.onload=()=>{const $t=wt.result.split(",")[1];ot({filename:Je.file.name,content:$t,type:Je.file.type})},wt.onerror=It,wt.readAsDataURL(Je.file)}))),be=_n.filter(Je=>Je.isDriveFile&&Je.driveWebViewLink);if(be.length>0&&Za==="compose"){let Je='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';be.forEach(ot=>{Je+=`<li style="margin-bottom: 4px;"><a href="${ot.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${ot.file.name}</a></li>`}),Je+="</ul></div>",D+=Je}if(Za==="reply"||Za==="replyAll")await sse({emailId:N?.id||"",userId:i,accountEmail:wa||qe[0]?.email,body:D,replyAll:Za==="replyAll",attachments:pe.length>0?pe:void 0}),t("Reply sent successfully");else if(Za==="forward")await ise({emailId:N?.id||"",userId:i,accountEmail:wa||qe[0]?.email,to:on,cc:ga.length>0?ga:void 0,bcc:Bn.length>0?Bn:void 0,body:D,attachments:pe.length>0?pe:void 0}),t("Email forwarded successfully");else{const ot=(await ase({userId:i,accountEmail:wa||qe[0]?.email,to:on,cc:ga.length>0?ga:void 0,bcc:Bn.length>0?Bn:void 0,subject:za,body:D,attachments:pe.length>0?pe:void 0}))?.data?.id;if(ot){const It=_n.filter(wt=>wt.isDriveFile&&wt.driveFileId);for(const wt of It)try{await mI({userId:i,emailId:ot,fileId:wt.driveFileId,fileName:wt.file.name,fileMimeType:wt.file.type,webViewLink:wt.driveWebViewLink,webContentLink:void 0,iconLink:wt.driveIconLink})}catch($t){console.error("Failed to attach Drive file:",$t)}}t("Email sent successfully")}_n.forEach(Je=>{Je.preview&&URL.revokeObjectURL(Je.preview)}),hl(!1),rs([]),ui([]),Rs([]),Vi(""),vs(""),_a([]),Ki(""),Xi(""),Yi(""),Bo(!1),await vn()}catch(D){const pe=b(D,"Failed to send email");r(pe)}finally{Zs(!1)}},disabled:Ol||on.length===0||!za||!Ha||qe.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ol?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-4 h-4"}),Za==="reply"||Za==="replyAll"?"Send Reply":Za==="forward"?"Forward":"Send"]})}):n.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[n.jsx(Gl,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),Jr?.isOpen&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:n.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[(ei(Jr.mimeType)||ic(Jr.mimeType))&&n.jsx(Nl,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:Jr.filename})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{Jr.url&&window.URL.revokeObjectURL(Jr.url),fa(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>{N&&Jr.url&&Zu(Jr.emailId,Jr.attachmentId,Jr.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[n.jsx(h0,{className:"w-4 h-4"}),"Download"]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:Jr.url?ei(Jr.mimeType)?n.jsx("img",{src:Jr.url,alt:Jr.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):ic(Jr.mimeType)?n.jsx("iframe",{src:Jr.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:Jr.filename}):n.jsxs("div",{className:"text-center text-slate-500",children:[n.jsx(uc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),n.jsx("button",{onClick:()=>{N&&Zu(Jr.emailId,Jr.attachmentId,Jr.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),fo&&ps&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Si(!1),ms(null)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),n.jsx("button",{onClick:()=>{Si(!1),ms(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[qe.length>0&&n.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:n.jsxs("button",{onClick:()=>fl(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create New Label"]})}),or?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[n.jsx(yt,{className:"w-6 h-6 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Nr.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>Fa(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(Ou,{className:"w-4 h-4"}),"Retry"]}),qe.length>0&&n.jsxs("button",{onClick:()=>fl(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):n.jsx("div",{className:"space-y-2",children:Nr.map(D=>{const be=Tn.find(Je=>Je.id===ps)?.labels?.includes(D.id)||!1;return n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:be,onChange:Je=>{ps&&(Je.target.checked?fu(ps,[D.id],[]):fu(ps,[],[D.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:D.name}),D.type==="system"&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},D.id)})})]})]})}),hd&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{fl(!1),Do("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),n.jsx("button",{onClick:()=>{fl(!1),Do(""),Sc("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),n.jsx("input",{type:"text",value:Ci,onChange:D=>Do(D.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:D=>{if(D.key==="Enter"&&Ci.trim()&&(tu||qe.length>0)){const pe=tu||qe[0].email;No(Ci.trim(),pe)}},autoFocus:!0})]}),qe.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),n.jsx("select",{value:tu||qe[0].email,onChange:D=>Sc(D.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:qe.map(D=>n.jsx("option",{value:D.email,children:D.email},D.email))})]}),n.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[n.jsx("button",{onClick:()=>{fl(!1),Do(""),Sc("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{if(Ci.trim()&&qe.length>0){const D=tu||qe[0].email;No(Ci.trim(),D)}},disabled:!Ci.trim()||pd||qe.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:pd?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Gt&&i&&n.jsx(cye,{isOpen:Gt,onClose:()=>{xr(!1),sn(null),Sn(null),$a(null),Qs(null),Lo(null)},userId:i,emailId:Zr||void 0,emailSubject:qa??za,emailBody:gs??Ha,participants:Ms??on,extractedDetails:qr||void 0,onCreateSuccess:()=>{Zr&&N?.id===Zr&&fk(i,Zr).then(D=>{D.success&&D.data&&Ne(D.data)}).catch(()=>{})}}),R0&&nc&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",nc.charAt(0).toUpperCase()+nc.slice(1)]}),n.jsx("button",{onClick:()=>{Oc(!1),Nd(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[nc==="contact"&&n.jsx("div",{className:"space-y-2",children:pl.map(D=>n.jsxs("button",{onClick:()=>Es("contact",D.id),disabled:as,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:D.name}),n.jsx("p",{className:"text-xs text-slate-500",children:D.email})]},D.id))}),nc==="company"&&n.jsx("div",{className:"space-y-2",children:ou.map(D=>n.jsxs("button",{onClick:()=>Es("company",D.id),disabled:as,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:D.name}),D.industry&&n.jsx("p",{className:"text-xs text-slate-500",children:D.industry})]},D.id))}),nc==="deal"&&n.jsx("div",{className:"space-y-2",children:ha.map(D=>n.jsxs("button",{onClick:()=>Es("deal",D.id),disabled:as,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.stage&&n.jsx("p",{className:"text-xs text-slate-500",children:D.stage})]},D.id))}),nc==="project"&&n.jsx("div",{className:"space-y-2",children:Ec.map(D=>n.jsxs("button",{onClick:()=>Es("project",D.id),disabled:as,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.status&&n.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))}),nc==="contract"&&n.jsx("div",{className:"space-y-2",children:lu.map(D=>n.jsxs("button",{onClick:()=>Es("contract",D.id),disabled:as,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:D.title}),D.status&&n.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]})]})}),gm&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),n.jsx("button",{onClick:()=>Yu(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:N.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[n.jsx("option",{value:"",children:"None"}),Ec.map(D=>n.jsx("option",{value:D.id,children:D.title||D.name},D.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[n.jsx("option",{value:"",children:"Unassigned"}),Nn.map(D=>n.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),n.jsx("button",{onClick:()=>{const D=document.getElementById("task-title"),pe=document.getElementById("task-priority"),be=document.getElementById("task-project"),Je=document.getElementById("task-assignee");Fc({title:D?.value,priority:pe?.value,projectId:be?.value||void 0,assigneeId:Je?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Dc&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Is,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),n.jsx("button",{onClick:()=>{ws(!1),Fl("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:pi,onChange:D=>Fl(D.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),n.jsxs("select",{value:jd,onChange:D=>Ji(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[n.jsx("button",{onClick:()=>{ws(!1),Fl("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(!pi){r("Please select a date and time");return}if(!i||on.length===0||!za||!Ha){r("Please fill in all required fields");return}try{const D=await Promise.all(_n.filter(be=>!be.isDriveFile).map(async be=>new Promise((Je,ot)=>{const It=new FileReader;It.onload=()=>{const wt=It.result.split(",")[1];Je({filename:be.file.name,content:wt,type:be.file.type})},It.onerror=ot,It.readAsDataURL(be.file)})));let pe=Ha;Gi&&(pe+=`<br><br>${Gi}`),await hse({userId:i,accountEmail:wa||qe[0]?.email,to:on,cc:ga.length>0?ga:void 0,bcc:Bn.length>0?Bn:void 0,subject:za,body:pe,scheduledDateTime:pi,timezone:jd,attachments:D.length>0?D:void 0}),t("Email scheduled successfully"),ws(!1),hl(!1),rs([]),ui([]),Rs([]),Vi(""),vs(""),_a([]),Fl("")}catch(D){const pe=b(D,"Failed to schedule email");r(pe)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),Kh&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(uc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),n.jsx("button",{onClick:()=>{$o(!1),qf([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:B0?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(yt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):Ju.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(uc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):n.jsx("div",{className:"space-y-3",children:Ju.map(D=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(D.payload?.headers){const pe=D.payload.headers,be=pe.find(wt=>wt.name==="To"),Je=pe.find(wt=>wt.name==="Cc"),ot=pe.find(wt=>wt.name==="Bcc"),It=pe.find(wt=>wt.name==="Subject");be?.value&&rs(be.value.split(",").map(wt=>wt.trim())),Je?.value&&ui(Je.value.split(",").map(wt=>wt.trim())),ot?.value&&Rs(ot.value.split(",").map(wt=>wt.trim())),It?.value&&Vi(It.value)}if(D.payload?.body?.data)try{const pe=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));vs(pe)}catch(pe){console.error("Failed to decode draft body:",pe),r("Failed to decode draft body")}else if(D.payload?.parts){const pe=D.payload.parts.find(be=>be.mimeType==="text/html");if(pe?.body?.data)try{const be=atob(pe.body.data.replace(/-/g,"+").replace(/_/g,"/"));vs(be)}catch(be){console.error("Failed to decode draft body:",be),r("Failed to decode draft body")}}$o(!1),t("Draft loaded")},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:D.payload?.headers?.find(pe=>pe.name==="Subject")?.value||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",D.payload?.headers?.find(pe=>pe.name==="To")?.value||"No recipients"]}),n.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",D.message?.internalDate?new Date(parseInt(D.message.internalDate)).toLocaleString():"Unknown date"]})]}),n.jsx("button",{onClick:pe=>{if(pe.stopPropagation(),D.payload?.headers){const be=D.payload.headers,Je=be.find($t=>$t.name==="To"),ot=be.find($t=>$t.name==="Cc"),It=be.find($t=>$t.name==="Bcc"),wt=be.find($t=>$t.name==="Subject");Je?.value&&rs(Je.value.split(",").map($t=>$t.trim())),ot?.value&&ui(ot.value.split(",").map($t=>$t.trim())),It?.value&&Rs(It.value.split(",").map($t=>$t.trim())),wt?.value&&Vi(wt.value)}if(D.payload?.body?.data)try{const be=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));vs(be)}catch(be){console.error("Failed to decode draft body:",be),r("Failed to decode draft body")}else if(D.payload?.parts){const be=D.payload.parts.find(Je=>Je.mimeType==="text/html");if(be?.body?.data)try{const Je=atob(be.body.data.replace(/-/g,"+").replace(/_/g,"/"));vs(Je)}catch(Je){console.error("Failed to decode draft body:",Je),r("Failed to decode draft body")}}$o(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},D.id))})})]})}),dt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Tt(!1),Ve("")},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[qe.length," account",qe.length!==1?"s":""," connected"]})]})]}),n.jsx("button",{onClick:()=>{Tt(!1),Ve("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:n.jsxs("div",{className:"relative",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:Ht,onChange:D=>Ve(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const D=new Set(Vt.map(be=>be.accountEmail.toLowerCase())),pe=qe.filter((be,Je,ot)=>ot.findIndex(It=>It.email===be.email&&It.userId===be.userId)===Je).filter(be=>{if(!Ht.trim())return!0;const Je=Ht.toLowerCase();return be.email.toLowerCase().includes(Je)||be.ownerName.toLowerCase().includes(Je)});return pe.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx(m0,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium text-sm",children:Ht?"No accounts found matching your search":"No accounts connected"}),Ht&&n.jsx("button",{onClick:()=>Ve(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):n.jsx("div",{className:"space-y-2",children:pe.map((be,Je)=>{const ot=D.has(be.email.toLowerCase()),It=Vt.find(wt=>wt.accountEmail.toLowerCase()===be.email.toLowerCase());return n.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${be.isCurrentUser?"border-indigo-300 bg-indigo-50/30":ot?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${ot?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:be.email.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:be.email}),be.isCurrentUser&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),ot&&n.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:be.ownerName==="Unknown User"?n.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(be.connectedAt).toLocaleDateString()]}):n.jsxs(n.Fragment,{children:[be.ownerName,"  Connected ",new Date(be.connectedAt).toLocaleDateString(),!be.hasToken&&be.ownerName!=="Unknown User"&&n.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),n.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[ot?n.jsx("button",{onClick:()=>It&&Ga(It.id,be.email),disabled:nr===be.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:nr===be.email?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Unfiltering..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Tu,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Show"})]})}):n.jsx("button",{onClick:()=>mi(be.email),disabled:nr===be.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:nr===be.email?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Hiding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(tU,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Hide"})]})}),be.isCurrentUser&&be.hasToken!==!1&&n.jsx("button",{onClick:()=>Jn(be.email),disabled:jt===be.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:jt===be.email?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Disconnecting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(ND,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Remove"})]})}),be.isCurrentUser&&be.hasToken===!1&&n.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${be.email}-${be.userId}-${Je}`)})})})()}),n.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:n.jsxs("button",{onClick:()=>{Tt(!1),Ns()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[n.jsx(nn,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[n.jsx(av,{className:"w-14 h-14 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},hye=()=>{const{showSuccess:e,showError:t}=On(),[r,a]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState(!1),[c,d]=L.useState({name:"",trigger:"",action:"",description:""}),[u,f]=L.useState(!1),[m,p]=L.useState(null),[y,v]=L.useState(null),[g,b]=L.useState(null),[w,j]=L.useState(null);L.useEffect(()=>{(async()=>{i(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id,U=await sI(I),C=U?.data||U||[];a(Array.isArray(C)?C:[])}catch(I){console.error("[AUTOMATIONS] Failed to fetch automations:",I),t(I.message||"Failed to load automations"),a([])}finally{i(!1)}})()},[]),L.useEffect(()=>{const P=async()=>{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const U=await sI(I),C=U?.data||U||[];a(Array.isArray(C)?C:[])}catch(U){console.error("Failed to refresh automations:",U)}};return window.addEventListener("refresh-automations",P),()=>window.removeEventListener("refresh-automations",P)},[]);const N=async P=>{p(P);try{await Une(P);const I=r.find(U=>U.id===P);a(U=>U.map(C=>C.id===P?{...C,active:!C.active}:C)),e(`Automation "${I?.name}" ${I?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to toggle automation:",I),t(I.message||"Failed to toggle automation")}finally{p(null)}},S=P=>{j(P),b(P.id)},E=async()=>{if(w){v(w.id);try{await qne(w.id),a(P=>P.filter(I=>I.id!==w.id)),b(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(P){console.error("Failed to delete automation:",P),t(P.message||"Failed to delete automation")}finally{v(null)}}},_=async P=>{P.preventDefault(),f(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;await Bne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:I||void 0}),f(!1),l(!1),d({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to create automation:",I),t(I.message||"Failed to create automation"),f(!1)}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Recipe"]})]}),s?n.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[n.jsx(yt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(o1,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[n.jsx(nn,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(P=>n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{onClick:()=>N(P.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${P.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:n.jsx(o1,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:P.name}),P.active&&n.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[n.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:P.description})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),n.jsx("p",{className:"text-xs font-bold text-slate-700",children:P.trigger})]}),n.jsx(Eo,{className:"w-4 h-4 text-slate-300"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),n.jsx("p",{className:"text-xs font-bold text-indigo-600",children:P.action})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>N(P.id),disabled:m===P.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${P.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:P.active?"Pause Automation":"Activate Automation",children:m===P.id?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):P.active?n.jsx(gU,{className:"w-5 h-5 fill-indigo-600"}):n.jsx(vU,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>S(P),disabled:y===P.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:y===P.id?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsx(Lr,{className:"w-5 h-5"})})]})]})]},P.id)),n.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:n.jsx(Mi,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),n.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),n.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),n.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",n.jsx(Eo,{className:"w-4 h-4"})]})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:_,className:"p-6 space-y-4 text-left",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),n.jsx("input",{required:!0,type:"text",value:c.name,onChange:P=>d({...c,name:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),n.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:P=>d({...c,trigger:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),n.jsx("input",{required:!0,type:"text",value:c.action,onChange:P=>d({...c,action:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),n.jsx("textarea",{required:!0,value:c.description,onChange:P=>d({...c,description:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lu,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&w&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(b0,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),n.jsx("button",{onClick:()=>b(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",n.jsxs("span",{className:"font-bold text-slate-900",children:['"',w.name,'"']}),"?"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),n.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>b(null),disabled:y===w.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:y===w.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y===w.id?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},pye=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=On(),[s,i]=L.useState("registry"),[o,l]=L.useState([]),[c,d]=L.useState([]),[u,f]=L.useState(!0),[m,p]=L.useState("all"),[y,v]=L.useState("open"),[g,b]=L.useState(null),[w,j]=L.useState(!1),[N,S]=L.useState(!1),[E,_]=L.useState({type:"feature",title:"",description:""}),[P,I]=L.useState({type:null,item:null}),[U,C]=L.useState(null),[O,R]=L.useState(!1),[z,H]=L.useState([]),[Q,J]=L.useState(!1),[re,X]=L.useState(!1),[ee,W]=L.useState(null),[T,q]=L.useState(!1),[V,B]=L.useState(""),[K,oe]=L.useState(null),me=e?.role==="Admin",se=async()=>{if(s==="registry"){f(!0);try{const[ue,Ee]=await Promise.all([xae(),ad()]),Ye=(ue.data||[]).map(xe=>{const ve=xe.url||null;let Fe=[];return Array.isArray(xe.attachments)&&xe.attachments.length>0&&(Fe=xe.attachments.filter($e=>$e&&($e.source==="file"||$e.data)).map($e=>({type:$e.type||"image",data:$e.data||"",filename:$e.filename||"attachment",mimeType:$e.mimeType||"image/jpeg",source:"file"}))),{...xe,url:ve,attachments:Fe}});l(Ye),d(Ee.data||[])}catch{a("Failed to synchronize roadmap registry.")}finally{f(!1)}}};L.useEffect(()=>{se();const ue=()=>se();return window.addEventListener("refresh-roadmap",ue),()=>window.removeEventListener("refresh-roadmap",ue)},[s]),L.useEffect(()=>{const ue=Ee=>{Ee.key==="Escape"&&K&&oe(null)};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[K]),L.useEffect(()=>{B(g&&g.description||"")},[g]);const de=async()=>{if(!(!g||!me)){q(!0);try{await dj(g.id,{description:V.trim()}),l(ue=>ue.map(Ee=>Ee.id===g.id?{...Ee,description:V.trim()}:Ee)),b(ue=>ue&&{...ue,description:V.trim()}),r("Context updated")}catch{a("Failed to update context")}finally{q(!1)}}},Re=async(ue,Ee)=>{if(me)try{await dj(ue,{status:Ee}),l(Ye=>Ye.map(xe=>xe.id===ue?{...xe,status:Ee}:xe)),g?.id===ue&&b({...g,status:Ee}),r(`Status updated to ${Ee}`)}catch{a("Update failed.")}},he=async ue=>{if(me){R(!0);try{await lI(ue),l(Ee=>Ee.filter(Ye=>Ye.id!==ue)),g?.id===ue&&b(null),C(null),r("Entry purged from registry.")}catch{a("Purge failed.")}finally{R(!1)}}},Ue=()=>{z.length===fe.length?H([]):H(fe.map(ue=>ue.id))},Oe=async()=>{if(!me){a("Only admins can delete entries");return}if(z.length===0){a("No items selected");return}J(!0);try{const ue=[...z],Ee=ue.map(Ye=>lI(Ye));await Promise.all(Ee),l(Ye=>Ye.filter(xe=>!ue.includes(xe.id))),g&&ue.includes(g.id)&&b(null),H([]),X(!1),r(`Successfully deleted ${ue.length} entr${ue.length>1?"ies":"y"}`)}catch(ue){console.error("Bulk delete error:",ue),a(ue.message||"Failed to delete entries. Please try again.")}finally{J(!1)}},le=async ue=>{if(ue.preventDefault(),!E.title||!E.description){a("Title and description are required");return}S(!0);try{const Ee={...E,userId:e?.id||"anonymous",status:"planned"};await X7(Ee),r("Entry added to Strategic Pipeline"),j(!1),_({type:"feature",title:"",description:""}),se()}catch(Ee){console.error("[FEEDBACK] Creation failed:",Ee),a(`Failed to add entry: ${Ee.message||"Unknown error"}`)}finally{S(!1)}},te=async()=>{if(!P.item||!P.type)return;let ue,Ee;switch(P.type){case"done":ue="done",Ee="Entry marked as done";break;case"archive":ue="canceled",Ee="Entry archived";break;case"in-execution":ue="in-progress",Ee="Entry marked as in execution";break;default:return}try{await dj(P.item.id,{status:ue}),l(Ye=>Ye.map(xe=>xe.id===P.item.id?{...xe,status:ue}:xe)),g?.id===P.item.id&&b({...g,status:ue}),r(Ee),I({type:null,item:null})}catch{a("Failed to update entry status")}},Se=(ue,Ee="w-4 h-4")=>{switch(ue){case"done":return n.jsx(gn,{className:`${Ee} text-emerald-500`});case"in-progress":return n.jsx(Is,{className:`${Ee} text-blue-500 animate-pulse`});case"postponed":return n.jsx(ZB,{className:`${Ee} text-amber-500`});case"canceled":return n.jsx(yD,{className:`${Ee} text-slate-400`});default:return n.jsx(Vv,{className:`${Ee} text-indigo-400`})}},we=ue=>{switch(ue){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Pe=(ue,Ee="w-4 h-4")=>{switch(ue){case"bug":return n.jsx(Hv,{className:Ee});case"feature":return n.jsx(Mi,{className:Ee});case"idea":return n.jsx($j,{className:Ee})}},fe=o.filter(ue=>(y==="open"?ue.status!=="done"&&ue.status!=="canceled":ue.status==="done"||ue.status==="canceled")?m==="all"?!0:ue.type===m:!1);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),n.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[n.jsx(Vv,{className:"w-4 h-4 text-indigo-500"}),n.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),n.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:()=>{v("open"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),n.jsx("button",{onClick:()=>{v("completed"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ue=>n.jsx("button",{onClick:()=>{p(ue),H([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${m===ue?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ue},ue)),n.jsxs("button",{onClick:()=>{const Ee=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";_({type:Ee,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(nn,{className:"w-3 h-3"})," New Entry"]})]})]}),u?n.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[n.jsx(yt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):fe.length===0?n.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[n.jsx(a1,{className:"w-16 h-16 text-slate-100"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),n.jsxs("button",{onClick:()=>{const Ee=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";_({type:Ee,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Entry"]})]})]}):n.jsxs(n.Fragment,{children:[fe.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:fe.length>0&&z.length===fe.length,onChange:ue=>{ue.stopPropagation(),Ue()}}),n.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ue=>{ue.stopPropagation(),Ue()},children:"Select All Entries"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fe.map(ue=>{const Ee=c.find(xe=>xe.id===ue.userId),Ye=z.includes(ue.id);return n.jsxs("div",{onClick:()=>{b(ue),W(null)},className:`bg-white rounded-[32px] border ${Ye?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${we(ue.type)} flex items-center gap-1.5`,children:[Pe(ue.type,"w-2.5 h-2.5"),ue.type]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[Se(ue.status,"w-2.5 h-2.5"),ue.status]}),n.jsxs("div",{className:"flex items-center gap-1.5",onClick:xe=>xe.stopPropagation(),children:[n.jsx("div",{className:`${Ye?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:n.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Ye?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ye,onChange:xe=>{xe.stopPropagation(),H(ve=>ve.includes(ue.id)?ve.filter(Fe=>Fe!==ue.id):[...ve,ue.id])},onClick:xe=>{xe.stopPropagation()}})})}),(ue.status==="planned"||ue.status==="in-progress"||ue.status==="postponed")&&n.jsxs(n.Fragment,{children:[ue.status!=="in-progress"&&n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"in-execution",item:ue})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:n.jsx(Is,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"done",item:ue})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:n.jsx(gn,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"archive",item:ue})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:n.jsx(ku,{className:"w-3.5 h-3.5"})})]}),me&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:xe=>{xe.stopPropagation(),W(ee===ue.id?null:ue.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${ee===ue.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:n.jsx(Gk,{className:"w-3.5 h-3.5"})}),ee===ue.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-[55]",onClick:xe=>{xe.stopPropagation(),W(null)}}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),n.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(xe=>n.jsxs("button",{onClick:ve=>{ve.stopPropagation(),Re(ue.id,xe),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ue.status===xe?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",xe]},xe)),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),C(ue),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ue.title}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ue.description,'"']}),ue.url&&n.jsx("div",{className:"mb-6",children:n.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",onClick:xe=>xe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ue.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Nl,{className:"w-3 h-3"}):n.jsx(fp,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:ue.url.length>30?`${ue.url.substring(0,30)}...`:ue.url}),n.jsx(Ss,{className:"w-3 h-3"})]})}),ue.attachments&&Array.isArray(ue.attachments)&&ue.attachments.length>0&&n.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ue.attachments.map((xe,ve)=>xe.type==="image"&&xe.data?n.jsxs("button",{type:"button",onClick:Fe=>{Fe.stopPropagation(),oe({src:xe.data,alt:xe.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Nl,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:xe.filename||"Screenshot"})]},ve):xe.type==="video"&&xe.data?n.jsxs("a",{href:xe.data,target:"_blank",rel:"noopener noreferrer",onClick:Fe=>Fe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(fp,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:xe.filename||"Video"}),n.jsx(Ss,{className:"w-3 h-3"})]},ve):null)}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Ee?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black text-slate-900",children:Ee?.name||"Observer"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ue.createdAt).toLocaleDateString()})]})]}),n.jsx(ya,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ue.id)})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:n.jsx(Vv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ue=>ue.type==="bug").length,icon:n.jsx(Hv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ue=>ue.status==="done").length,icon:n.jsx(Mi,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ue=>ue.status==="in-progress").length,icon:n.jsx(Is,{className:"w-4 h-4 text-blue-500"})}].map((ue,Ee)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ue.icon}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ue.label}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:ue.value})]})]},Ee))})]}),s==="registry"&&n.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[n.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Mi,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),n.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",n.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(Qa,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),n.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:n.jsx(o1,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),n.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:n.jsx(bD,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(uh,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:n.jsx(Gd,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:n.jsx(vD,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:n.jsx(sU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:n.jsx(oi,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:n.jsx(lU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:n.jsx(Kk,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(pU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(Eo,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(rB,{currentUser:e})}),s==="automation"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(hye,{})}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>oe(null),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>oe(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ue=>ue.stopPropagation()})]})}),w&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(nn,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),n.jsx("button",{onClick:()=>{j(!1),_({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:le,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Hv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:n.jsx(Mi,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:n.jsx($j,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ue=>n.jsxs("button",{type:"button",onClick:()=>_({...E,type:ue.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${E.type===ue.id?`${ue.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ue.icon," ",ue.label]},ue.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:E.title,onChange:ue=>_({...E,title:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),n.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:E.description,onChange:ue=>_({...E,description:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),n.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),_({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N||!E.title||!E.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:N?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gl,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:()=>b(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Pe(g.type,"w-8 h-8")}),n.jsxs("div",{children:[n.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${we(g.type)}`,children:g.type}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[Se(g.status,"w-5 h-5"),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[n.jsx(oa,{className:"w-5 h-5 text-indigo-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),me&&n.jsx("button",{type:"button",onClick:de,disabled:T||V.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-3 h-3 animate-spin"})," Saving"]}):n.jsxs(n.Fragment,{children:[n.jsx(gn,{className:"w-3 h-3"})," Save Context"]})})]}),me?n.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[n.jsx("textarea",{rows:4,value:V,onChange:ue=>B(ue.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[n.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(i0,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:n.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Nl,{className:"w-4 h-4"}):n.jsx(fp,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),n.jsx(Ss,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Nl,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((ue,Ee)=>ue.type==="image"&&ue.data?n.jsxs("button",{type:"button",onClick:()=>oe({src:ue.data,alt:ue.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Nl,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Screenshot"})]},Ee):ue.type==="video"&&ue.data?n.jsxs("a",{href:ue.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(fp,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Video"}),n.jsx(Ss,{className:"w-4 h-4"})]},Ee):null)})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ol,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[n.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(ue=>ue.id===g.userId)?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-black text-slate-900",children:c.find(ue=>ue.id===g.userId)?.name||"Impact Member"}),n.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(ue=>ue.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),me&&n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ue=>n.jsxs("button",{onClick:()=>Re(g.id,ue),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[Se(ue,"w-3 h-3"),ue.replace("-"," ")]},ue))})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>C(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>b(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(gn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),P.type&&P.item&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${P.type==="done"?"bg-emerald-50 text-emerald-600":P.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:P.type==="done"?n.jsx(gn,{className:"w-6 h-6"}):P.type==="in-execution"?n.jsx(Is,{className:"w-6 h-6"}):n.jsx(ku,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:P.type==="done"?"Mark as Done?":P.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:P.type==="done"?"This will move the entry to Archive & Done":P.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:P.item.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:P.item.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>I({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:te,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${P.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":P.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:P.type==="done"?"Mark Done":P.type==="in-execution"?"Start Execution":"Archive"})]})]})}),U&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:U.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:U.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>C(null),disabled:O,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>he(U.id),disabled:O,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),z.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:z.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:ue=>{if(ue.preventDefault(),ue.stopPropagation(),!me){a("Only admins can delete entries");return}if(z.length===0){a("No items selected");return}X(!0)},disabled:Q,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Q?n.jsx(yt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>H([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),re&&z.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",z.length," Entr",z.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ue=>z.includes(ue.id)).slice(0,5).map(ue=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Pe(ue.type,"w-4 h-4"),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title}),n.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ue.type})]})]},ue.id)),z.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",z.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(!1),disabled:Q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),Oe()},disabled:Q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Q?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${z.length} Entr${z.length>1?"ies":"y"}`})]})]})})]})},mye=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),[a,s]=L.useState([]),[i,o]=L.useState([]),[l,c]=L.useState([]),[d,u]=L.useState(null),[f,m]=L.useState(!0),[p,y]=L.useState(!1),[v,g]=L.useState([]),[b,w]=L.useState(!1),[j,N]=L.useState("select"),[S,E]=L.useState(""),[_,P]=L.useState(!1),[I,U]=L.useState(!1),[C,O]=L.useState([]),[R,z]=L.useState(!1),[H,Q]=L.useState(!1),[J,re]=L.useState(!1),[X,ee]=L.useState(!1),[W,T]=L.useState(!1),[q,V]=L.useState(!1),[B,K]=L.useState(""),[oe,me]=L.useState(!1),se=L.useRef(null),[de,Re]=L.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),he=L.useCallback(async()=>{try{const _e=await Y7(),Be=_e?.data||_e||[];c(Array.isArray(Be)?Be:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),Ue=L.useCallback(async()=>{m(!0);try{const _e={};v.length===1&&(_e.companyId=v[0]);const Be=await gae(_e);let qe=Be?.data||Be||[];qe=Array.isArray(qe)?qe:[],v.length>1&&(qe=qe.filter(Ze=>v.includes(Ze.companyId))),s(qe);try{const Ze=await ld();o(Ze?.data||Ze||[])}catch(Ze){console.error("[Expenses] Failed to fetch companies:",Ze),o([])}}catch(_e){console.error("[Expenses] Error fetching expenses:",_e),r(_e.message||"Failed to load expenses"),s([])}finally{m(!1)}},[e,v,r]);L.useEffect(()=>{he()},[he]),L.useEffect(()=>{Ue()},[Ue]),L.useEffect(()=>{const _e=()=>Ue();return window.addEventListener("refresh-expenses",_e),()=>window.removeEventListener("refresh-expenses",_e)},[Ue]);const Oe=_e=>i.find(Be=>Be.id===_e),le=_e=>{switch(_e){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},te=a,Se={totalExpenses:te.reduce((_e,Be)=>_e+(Be.amount||0),0),pendingCount:te.filter(_e=>_e.status==="Pending"||!_e.status).length,approvedCount:te.filter(_e=>_e.status==="Approved").length,thisMonth:te.filter(_e=>{const Be=new Date(_e.date),qe=new Date;return Be.getMonth()===qe.getMonth()&&Be.getFullYear()===qe.getFullYear()}).reduce((_e,Be)=>_e+(Be.amount||0),0)},we=()=>{C.length===te.length&&te.length>0?O([]):O(te.map(_e=>_e.id))},Pe=(_e,Be=1920,qe=1080,Ze=.8)=>new Promise((Vt,Dt)=>{const dt=new FileReader;dt.onload=Tt=>{const Ht=new Image;Ht.onload=()=>{let Ve=Ht.width,jt=Ht.height;Ve>jt?Ve>Be&&(jt=jt*Be/Ve,Ve=Be):jt>qe&&(Ve=Ve*qe/jt,jt=qe);const gr=document.createElement("canvas");gr.width=Ve,gr.height=jt;const nr=gr.getContext("2d");if(!nr){Dt(new Error("Failed to create canvas context"));return}nr.drawImage(Ht,0,0,Ve,jt);const Ar=gr.toDataURL("image/jpeg",Ze);Vt(Ar)},Ht.onerror=()=>Dt(new Error("Failed to load image")),Ht.src=Tt.target?.result},dt.onerror=()=>Dt(new Error("Failed to read file")),dt.readAsDataURL(_e)}),fe=async _e=>{const Be=_e.target.files?.[0];if(Be){if(!Be.type.startsWith("image/")&&!Be.type.includes("pdf")){r("Please select an image or PDF file");return}if(Be.size>10*1024*1024){r("File size must be less than 10MB");return}V(!0);try{if(Be.type.startsWith("image/")){const qe=await Pe(Be,1920,1080,.8);K(qe),Re(Ze=>({...Ze,receiptFile:Be}))}else{const qe=new FileReader;qe.onload=()=>{K(qe.result),Re(Ze=>({...Ze,receiptFile:Be}))},qe.readAsDataURL(Be)}}catch(qe){r(qe.message||"Failed to process receipt")}finally{V(!1)}}},ue=async _e=>{if(_e.preventDefault(),!de.companyId||!de.title||!de.amount||!de.category||!de.date){r("Please fill in all required fields");return}T(!0);try{const Be=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let qe="",Ze="",Vt="";de.receiptFile&&(de.receiptFile.type.startsWith("image/"),qe=B,Ze=de.receiptFile.name,Vt=de.receiptFile.type),await vae({companyId:de.companyId,title:de.title,amount:parseFloat(de.amount),category:de.category,date:new Date(de.date).toISOString(),description:de.description,status:de.status,receiptUrl:qe||void 0,receiptFilename:Ze||void 0,receiptMimeType:Vt||void 0,userId:Be}),t("Expense added successfully"),ee(!1),Re({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value=""),Ue(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Be){r(Be.message||"Failed to add expense")}finally{T(!1)}},Ee=async()=>{if(S.trim()){P(!0);try{const _e=await Q7({name:S.trim()});if(_e?.data){const Be=_e.data;c(qe=>[...qe,Be]),Re(qe=>({...qe,category:Be.name})),E(""),w(!1),t("Category added successfully")}}catch(_e){_e.message?.includes("already exists")||_e.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(_e.message||"Failed to add category")}finally{P(!1)}}},Ye=async(_e,Be)=>{me(!0);try{await yae(_e,{status:Be}),s(qe=>qe.map(Ze=>Ze.id===_e?{...Ze,status:Be}:Ze)),d&&d.id===_e&&u({...d,status:Be}),t(`Expense status updated to ${Be}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(qe){r(qe.message||"Failed to update expense status")}finally{me(!1)}},xe=async()=>{if(d){y(!0);try{await cI(d.id),s(_e=>_e.filter(Be=>Be.id!==d.id)),u(null),re(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(_e){r(_e.message||"Failed to delete expense")}finally{y(!1)}}},ve=async()=>{const _e=[...C];if(_e.length!==0){z(!0),Q(!1);try{await Promise.all(_e.map(Be=>cI(Be))),s(Be=>Be.filter(qe=>!_e.includes(qe.id))),O([]),t(`Successfully deleted ${_e.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{z(!1)}}},Fe=_e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(_e),$e=_e=>new Date(_e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return f?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(yt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{N("manage"),w(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[n.jsx(Os,{className:"w-4 h-4"}),"Manage Categories"]}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[n.jsx(nn,{className:"w-5 h-5"}),"Add Expense"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:Fe(Se.totalExpenses),icon:n.jsx(Fu,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:Se.pendingCount.toString(),icon:n.jsx(Is,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:Se.approvedCount.toString(),icon:n.jsx(ji,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:Fe(Se.thisMonth),icon:n.jsx(oa,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((_e,Be)=>n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("div",{className:`p-2 rounded-lg ${_e.color}`,children:_e.icon})}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:_e.label}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:_e.value})]},Be))}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(p0,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),n.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(_e=>_e.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",te.length," expense(s)"]})]}),C.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:n.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-sm font-black",children:C.length})}),n.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),n.jsx("div",{className:"w-px h-6 bg-white/20"}),n.jsx("button",{onClick:()=>Q(!0),disabled:R,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:R?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"DELETE"]})}),n.jsx("button",{onClick:()=>O([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:n.jsx(tr,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:`lg:col-span-2 space-y-4 ${d?"lg:pr-6":""}`,children:[te.length>0&&n.jsx("div",{className:"flex items-center gap-3 mb-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:C.length===te.length&&te.length>0,onChange:we,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),te.length===0?n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[n.jsx(Gj,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),n.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[n.jsx(nn,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):te.map(_e=>{const Be=Oe(_e.companyId),qe=C.includes(_e.id);return n.jsxs("div",{onClick:()=>u(_e),className:`bg-white rounded-2xl border ${qe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${d?.id===_e.id?"ring-2 ring-indigo-500":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("input",{type:"checkbox",checked:qe,onChange:Ze=>{Ze.stopPropagation(),O(Vt=>qe?Vt.filter(Dt=>Dt!==_e.id):[...Vt,_e.id])},onClick:Ze=>Ze.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),n.jsx(Vs,{src:Be?.logo,fallbackText:Be?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:_e.title}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:Be?.name||"Unknown Company"})]})]}),n.jsxs("div",{className:"text-right shrink-0 ml-4",children:[n.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:Fe(_e.amount)}),n.jsxs("select",{value:_e.status||"Pending",onChange:Ze=>{Ze.stopPropagation(),Ye(_e.id,Ze.target.value)},onClick:Ze=>Ze.stopPropagation(),disabled:oe,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${le(_e.status||"Pending")} ${oe?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Os,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:_e.category})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(oa,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:$e(_e.date)})]}),_e.receiptUrl&&n.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[n.jsx(ea,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),_e.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:_e.description}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:Ze=>{Ze.stopPropagation(),u(_e)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",n.jsx(ya,{className:"w-3 h-3"})]}),n.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),u(_e),re(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},_e.id)})]}),d&&n.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),n.jsx("p",{className:"text-lg font-black text-slate-900",children:d.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vs,{src:Oe(d.companyId)?.logo,fallbackText:Oe(d.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Oe(d.companyId)?.name||"Unknown"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),n.jsx("p",{className:"text-2xl font-black text-indigo-600",children:Fe(d.amount)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),n.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:d.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsxs("select",{value:d.status||"Pending",onChange:_e=>{const Be=_e.target.value;Ye(d.id,Be)},disabled:oe,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${le(d.status||"Pending")} ${oe?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]}),oe&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(yt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:$e(d.date)})]}),d.description&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),d.receiptUrl&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),n.jsx("div",{className:"space-y-2",children:d.receiptMimeType?.startsWith("image/")?n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:d.receiptUrl,alt:d.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const _e=window.open();_e&&_e.document.write(`<img src="${d.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:n.jsx(Tu,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):n.jsxs("a",{href:d.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:d.receiptFilename||"Receipt"}),n.jsx(h0,{className:"w-4 h-4 text-slate-400"})]})})]}),n.jsx("div",{className:"pt-4 border-t border-slate-200",children:n.jsx("button",{onClick:()=>{u(d),re(!0)},disabled:p,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),X&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Gj,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),n.jsx("button",{onClick:()=>{ee(!1),Re({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:ue,className:"p-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),n.jsxs("select",{required:!0,value:de.companyId,onChange:_e=>Re({...de,companyId:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"",children:"Select Company"}),i.map(_e=>n.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:de.title,onChange:_e=>Re({...de,title:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),n.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:de.amount,onChange:_e=>Re({...de,amount:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),n.jsxs("button",{type:"button",onClick:()=>{N("select"),w(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${de.category?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:de.category||"Select Category"}),n.jsx(ya,{className:"w-4 h-4 text-slate-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),n.jsx("input",{required:!0,type:"date",value:de.date,onChange:_e=>Re({...de,date:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),n.jsxs("select",{value:de.status,onChange:_e=>Re({...de,status:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{rows:3,placeholder:"Additional details...",value:de.description,onChange:_e=>Re({...de,description:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),n.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:q?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):B?n.jsx(Nl,{className:"w-5 h-5"}):n.jsx(Qd,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:B?de.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),n.jsx("input",{ref:se,type:"file",accept:"image/*,.pdf",onChange:fe,disabled:q,className:"hidden"})]}),B&&de.receiptFile?.type.startsWith("image/")&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:B,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),B&&de.receiptFile?.type.includes("pdf")&&n.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(ea,{className:"w-8 h-8 text-red-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-red-900",children:de.receiptFile.name}),n.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),n.jsx("button",{type:"button",onClick:()=>{K(""),Re(_e=>({..._e,receiptFile:null})),se.current&&(se.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{ee(!1),Re({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:W||q,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),J&&d&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:d.title}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Fe(d.amount),"  ",Oe(d.companyId)?.name||"Unknown"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{re(!1),u(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:xe,disabled:p,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),n.jsx("button",{onClick:()=>{w(!1),E("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Os,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(_e=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:_e.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},_e.id)):l.map(_e=>n.jsxs("button",{type:"button",onClick:()=>{Re({...de,category:_e.name}),w(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${de.category===_e.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[n.jsx("span",{className:"font-bold text-sm",children:_e.name}),de.category===_e.name?n.jsx(gn,{className:"w-5 h-5 text-indigo-600"}):n.jsx(Eu,{className:"w-5 h-5 text-slate-300"})]},_e.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:_e=>E(_e.target.value),onKeyDown:_e=>{_e.key==="Enter"&&S.trim()&&!_&&(_e.preventDefault(),Ee())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ee,disabled:!S.trim()||_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),I&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),n.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(_e=>n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.includes(_e.id),onChange:Be=>{Be.target.checked?g(qe=>[...qe,_e.id]):g(qe=>qe.filter(Ze=>Ze!==_e.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx(Vs,{src:_e.logo,fallbackText:_e.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:_e.name})]},_e.id))]})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(tr,{className:"w-4 h-4"}),"Clear All"]}),n.jsxs("button",{onClick:()=>{U(!1),Ue()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),H&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-8 border-b border-slate-100",children:n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",C.length," Expense(s)?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:ve,disabled:R,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},xye=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),[a,s]=L.useState([]),[i,o]=L.useState([]),[l,c]=L.useState([]),[d,u]=L.useState(new Date().getFullYear()),[f,m]=L.useState(""),[p,y]=L.useState(null),[v,g]=L.useState(!0),[b,w]=L.useState(!1),[j,N]=L.useState("yearly"),[S,E]=L.useState(!1),[_,P]=L.useState(!1),[I,U]=L.useState(null),[C,O]=L.useState(!1),[R,z]=L.useState(!1),[H,Q]=L.useState(null),[J,re]=L.useState(!1),[X,ee]=L.useState(""),[W,T]=L.useState(!1),[q,V]=L.useState({year:new Date().getFullYear(),department:"",categories:[]}),B=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,oe=Array.from({length:5},(fe,ue)=>new Date().getFullYear()-2+ue),me=L.useCallback(async()=>{try{const ue=(await Sae())?.data||[];o(Array.isArray(ue)?ue:[])}catch(fe){console.error("[BUDGET] Error fetching departments:",fe)}},[]),se=L.useCallback(async()=>{try{const ue=(await Y7())?.data||[];c(Array.isArray(ue)?ue:[])}catch(fe){console.error("[BUDGET] Error fetching categories:",fe)}},[]),de=L.useCallback(async()=>{g(!0);try{const fe={year:d};f&&(fe.department=f),console.log("[Budget] Fetching budgets with params:",fe);const Ee=(await bae(fe))?.data||[];console.log("[Budget] Received budgets:",Ee),s(Array.isArray(Ee)?Ee:[])}catch(fe){console.error("[Budget] Error fetching budgets:",fe),r(fe.message||"Failed to load budgets")}finally{g(!1)}},[d,f,r]),Re=L.useCallback(async()=>{w(!0);try{const fe={year:d};f&&(fe.department=f),console.log("[Budget] Fetching tracking with params:",fe);const ue=await kae(fe);console.log("[Budget] Received tracking:",ue?.data),y(ue?.data||null)}catch(fe){console.error("[Budget] Error fetching tracking:",fe),y(null)}finally{w(!1)}},[d,f]);L.useEffect(()=>{me(),se()},[me,se]),L.useEffect(()=>{de(),Re()},[de,Re]);const he=()=>{V({year:d,department:f,categories:l.map(fe=>({categoryId:fe.id,categoryName:fe.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},Ue=async()=>{if(X.trim()){T(!0);try{const fe=await Q7({name:X.trim()});if(fe?.data){const ue=fe.data;c(Ee=>[...Ee,ue]),ee(""),t("Category added successfully"),se()}}catch(fe){fe.message?.includes("already exists")||fe.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(fe.message||"Failed to add category")}finally{T(!1)}}},Oe=async()=>{if(!K){r("User not found");return}if(q.categories.length===0){r("Please add at least one category");return}if(q.categories.reduce((ue,Ee)=>ue+Ee.yearlyBudget,0)===0){r("Total budget cannot be zero");return}O(!0);try{await wae({year:q.year,department:q.department||null,categories:q.categories,createdBy:K}),t("Budget created successfully"),E(!1),de(),Re()}catch(ue){r(ue.message||"Failed to create budget")}finally{O(!1)}},le=async()=>{if(!(!I||!K)){O(!0);try{await Nae(I.id,{categories:q.categories,updatedBy:K}),t("Budget updated successfully"),P(!1),U(null),de(),Re()}catch(fe){r(fe.message||"Failed to update budget")}finally{O(!1)}}},te=async fe=>{z(!0);try{await jae(fe.id),t("Budget deleted successfully"),Q(null),de(),Re()}catch(ue){r(ue.message||"Failed to delete budget")}finally{z(!1)}},Se=fe=>fe>=1e6?`$${(fe/1e6).toFixed(1)}M`:fe>=1e3?`$${(fe/1e3).toFixed(1)}k`:`$${fe.toLocaleString()}`,we=fe=>fe>=100?"text-red-600":fe>=80?"text-amber-600":"text-emerald-600",Pe=fe=>fe>=100?"bg-red-500":fe>=80?"bg-amber-500":"bg-emerald-500";return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),B&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Os,{className:"w-4 h-4"})," Manage Categories"]}),n.jsxs("button",{onClick:()=>{he(),E(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Budget"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),n.jsx("select",{value:d,onChange:fe=>u(parseInt(fe.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:oe.map(fe=>n.jsx("option",{value:fe,children:fe},fe))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:f,onChange:fe=>m(fe.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(fe=>n.jsx("option",{value:fe,children:fe},fe))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),n.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(fe=>n.jsx("button",{onClick:()=>N(fe),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===fe?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:fe},fe))})]})]})}),!v&&a.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:p&&p.hasBudget!==!1?"Current Budget":"Available Budgets"}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[a.length," budget",a.length!==1?"s":""," for selected filters"]})]}),p&&p.hasBudget!==!1&&B&&n.jsxs("button",{onClick:()=>{const fe=a[0];U(fe),V({year:fe.year,department:fe.department||"",categories:fe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"})," Edit Budget"]})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:a.map(fe=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[fe.year," ",fe.department&&`- ${fe.department}`]}),!fe.department&&n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),n.jsx("p",{className:"text-lg font-black text-indigo-600",children:Se(fe.totalBudget)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),n.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[fe.categories.length," configured"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),n.jsx("p",{className:"text-xs text-slate-500 font-medium",children:fe.createdAt?new Date(fe.createdAt).toLocaleDateString():"N/A"})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:n.jsxs("details",{className:"group",children:[n.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[n.jsx(ya,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:fe.categories.map(ue=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.categoryName}),n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",n.jsx("span",{className:"font-black",children:Se(ue.yearlyBudget)})]})]},ue.categoryId))})]})})]}),B&&!(p&&p.hasBudget!==!1)&&n.jsxs("button",{onClick:()=>{U(fe),V({year:fe.year,department:fe.department||"",categories:fe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"})," View/Edit"]})]})},fe.id))})]}),p&&p.hasBudget!==!1&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:n.jsx(Fu,{className:"w-5 h-5 text-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Se(p.totalBudget)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:n.jsx(Gd,{className:"w-5 h-5 text-blue-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Se(p.totalSpent)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl ${p.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:p.totalRemaining>=0?n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}):n.jsx(Zn,{className:"w-5 h-5 text-red-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),n.jsx("h3",{className:`text-2xl font-black ${p.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:Se(Math.abs(p.totalRemaining))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:n.jsx(Zm,{className:"w-5 h-5 text-purple-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),n.jsxs("h3",{className:`text-2xl font-black ${we(p.totalPercentUsed)}`,children:[p.totalPercentUsed.toFixed(1),"%"]})]})]}),p&&p.isOverBudget&&n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[n.jsx(b0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),n.jsxs("p",{className:"text-sm text-red-700",children:["You are ",n.jsx("span",{className:"font-black",children:Se(p.overBudgetAmount)})," over budget (",p.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!p||p.hasBudget===!1)&&n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(vD,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:B?`No budget has been set for ${d}${f?` - ${f}`:""}. Create one to start tracking.`:`No budget available for ${d}${f?` - ${f}`:""}.`}),B&&n.jsxs("button",{onClick:()=>{he(),E(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Create Budget"]})]}),p&&p.hasBudget!==!1&&p.categories&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),n.jsx("div",{className:"divide-y divide-slate-100",children:p.categories.map(fe=>n.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:fe.categoryName}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",n.jsx("span",{className:"font-black text-slate-900",children:Se(fe.yearlyBudget)})]}),n.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",n.jsx("span",{className:"font-black text-slate-900",children:Se(fe.yearlySpent)})]}),n.jsxs("span",{className:`font-black ${we(fe.yearlyPercentUsed)}`,children:[fe.yearlyPercentUsed.toFixed(1),"%"]})]})]}),fe.isOverBudget&&n.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",Se(fe.overBudgetAmount)]})]}),n.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[n.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Pe(fe.yearlyPercentUsed)}`,style:{width:`${Math.min(fe.yearlyPercentUsed,100)}%`}}),fe.yearlyPercentUsed>100&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&n.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((ue,Ee)=>{const Ye=fe.quarters[ue];return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ee+1]}),n.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[n.jsx("span",{className:"font-black text-slate-900",children:Se(Ye.spent)})," "," / ",Se(Ye.budget)]}),n.jsxs("p",{className:`text-xs font-black mt-1 ${we(Ye.percentUsed)}`,children:[Ye.percentUsed.toFixed(0),"%"]})]},ue)})})]},fe.categoryId))})]}),S&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Fu,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",q.year]})]})]}),n.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:q.year,onChange:fe=>V(ue=>({...ue,year:parseInt(fe.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:oe.map(fe=>n.jsx("option",{value:fe,children:fe},fe))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:q.department,onChange:fe=>V(ue=>({...ue,department:fe.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(fe=>n.jsx("option",{value:fe,children:fe},fe))]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),n.jsx("div",{className:"space-y-4",children:q.categories.map((fe,ue)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:fe.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:fe.yearlyBudget||"",onChange:Ee=>{const Ye=[...q.categories];Ye[ue].yearlyBudget=parseFloat(Ee.target.value)||0,V(xe=>({...xe,categories:Ye}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ee,Ye)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ye+1]}),n.jsx("input",{type:"number",value:fe[Ee]||"",onChange:xe=>{const ve=[...q.categories];ve[ue][Ee]=parseFloat(xe.target.value)||0,V(Fe=>({...Fe,categories:ve}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ee))]})]},fe.categoryId))}),n.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Se(q.categories.reduce((fe,ue)=>fe+ue.yearlyBudget,0))})]})})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>E(!1),disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Oe,disabled:C,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:C?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),_&&I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{P(!1),U(null)}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Sl,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",I.year,I.department&&` - ${I.department}`]})]})]}),n.jsx("button",{onClick:()=>{P(!1),U(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-4",children:[q.categories.map((fe,ue)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:fe.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:fe.yearlyBudget||"",onChange:Ee=>{const Ye=[...q.categories];Ye[ue].yearlyBudget=parseFloat(Ee.target.value)||0,V(xe=>({...xe,categories:Ye}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ee,Ye)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ye+1]}),n.jsx("input",{type:"number",value:fe[Ee]||"",onChange:xe=>{const ve=[...q.categories];ve[ue][Ee]=parseFloat(xe.target.value)||0,V(Fe=>({...Fe,categories:ve}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ee))]})]},fe.categoryId)),n.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Se(q.categories.reduce((fe,ue)=>fe+ue.yearlyBudget,0))})]})})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsxs("button",{onClick:()=>Q(I),disabled:C,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Lr,{className:"w-4 h-4"})," Delete"]}),n.jsx("button",{onClick:()=>{P(!1),U(null)},disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:le,disabled:C,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:C?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),H&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Q(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(b0,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",H.year,H.department&&` - ${H.department}`,"? This action cannot be undone."]})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>Q(null),disabled:R,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:()=>te(H),disabled:R,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),J&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),n.jsx("button",{onClick:()=>{re(!1),ee("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Os,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(fe=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Os,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:fe.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},fe.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:X,onChange:fe=>ee(fe.target.value),onKeyDown:fe=>{fe.key==="Enter"&&X.trim()&&!W&&(fe.preventDefault(),Ue())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ue,disabled:!X.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},mD=["Draft","Pending Signature","Signed","Expired","Terminated"],gye=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),[a,s]=L.useState([]),[i,o]=L.useState([]),[l,c]=L.useState([]),[d,u]=L.useState([]),[f,m]=L.useState(null),[p,y]=L.useState(!0),[v,g]=L.useState(!1),[b,w]=L.useState(!1),[j,N]=L.useState(""),[S,E]=L.useState(""),[_,P]=L.useState(""),[I,U]=L.useState(!1),[C,O]=L.useState(!1),[R,z]=L.useState(!1),[H,Q]=L.useState(!1),J=L.useRef(null),[re,X]=L.useState(!1),[ee,W]=L.useState(!1),[T,q]=L.useState(!1),[V,B]=L.useState(!1),[K,oe]=L.useState(!1),[me,se]=L.useState(""),[de,Re]=L.useState(!1),[he,Ue]=L.useState([]),[Oe,le]=L.useState(!1),[te,Se]=L.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),we=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Pe=L.useCallback(async()=>{y(!0);try{const[Ve,jt,gr,nr]=await Promise.all([J7(),ld(),Sh(),Tae()]);s(Ve?.data||[]),o(jt?.data||[]),c(gr?.data||[]),u(nr?.data||[])}catch(Ve){r(Ve.message||"Failed to load contracts")}finally{y(!1)}},[r]);L.useEffect(()=>{Pe()},[Pe]);const fe=async()=>{if(f){le(!0);try{const Ve=await t3("contract",f.id);Ue(Ve?.data||[])}catch(Ve){console.error("[CONTRACTS] Failed to fetch contract activities:",Ve),Ue([])}finally{le(!1)}}};L.useEffect(()=>{f?fe():Ue([])},[f?.id]),L.useEffect(()=>{(async()=>{if(we)try{await ly({userId:we}),q(!0)}catch{q(!1)}})()},[we]);const ue=async()=>{if(!we){r("User not authenticated");return}B(!0);try{let Ve;try{Ve=await ly({userId:we})}catch(Ir){throw Ir.message?.includes("Failed to fetch")||Ir.message?.includes("ERR_CONNECTION_REFUSED")||Ir.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Ir}const{accessToken:jt,apiKey:gr}=Ve?.data||{};if(!jt)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",jt?"Present":"Missing"),console.log("Google Picker - API Key:",gr?`Present (${gr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",Ve?.data),await new Promise((Ir,Xt)=>{let Qt=0;const mr=50,Fr=setInterval(()=>{Qt++,window.google&&window.google.picker?(clearInterval(Fr),Ir()):Qt>=mr&&(clearInterval(Fr),Xt(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const nr=window.google.picker;new nr.PickerBuilder().setOAuthToken(jt).setCallback(Ir=>{B(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Ir,null,2)),console.log("Google Picker Response Action:",Ir[nr.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:nr.Action.PICKED,CANCEL:nr.Action.CANCEL}),Ir[nr.Response.ACTION]===nr.Action.PICKED){const Xt=Ir[nr.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",Xt),console.log("Google Picker - Number of documents:",Xt?.length),Xt&&Xt.length>0){const Qt=Xt[0];console.log("Google Picker - Selected file data:",JSON.stringify(Qt,null,2)),console.log("Google Picker - File ID:",Qt.id),console.log("Google Picker - File Name:",Qt.name),console.log("Google Picker - File MIME Type:",Qt.mimeType),console.log("Google Picker - File URL:",Qt.url),console.log("Google Picker - File Service ID:",Qt.serviceId),Ee(Qt)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Ir[nr.Response.ACTION]!==nr.Action.CANCEL){const Xt=Ir[nr.Response.ERROR];Xt&&(console.error("Google Picker Error:",Xt),console.error("Error details:",JSON.stringify(Ir,null,2)),Xt===nr.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):Xt===nr.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):Xt===nr.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${Xt}. Check browser console for details.`))}}catch(Xt){console.error("Error handling picker callback:",Xt),r("Failed to process selected file")}}).addView(nr.ViewId.DOCS).enableFeature(nr.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Ve){B(!1),console.error("Google Drive Picker Error:",Ve),Ve.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):Ve.message?.includes("not connected")||Ve.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):Ve.message?.includes("Failed to fetch")||Ve.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(Ve.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ee=async Ve=>{if(we){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(Ve,null,2)),console.log("File data from Google Picker:",{id:Ve.id,name:Ve.name,url:Ve.url,iconUrl:Ve.iconUrl,mimeType:Ve.mimeType,serviceId:Ve.serviceId,type:Ve.type,sizeBytes:Ve.sizeBytes});try{const jt=Ve.url||Ve.embedUrl||"",gr=Ve.iconUrl||"",nr=Ve.sizeBytes?parseInt(Ve.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:Ve.id,publicUrl:jt,iconUrl:gr,fileName:Ve.name,fileMimeType:Ve.mimeType}),Se(Ar=>({...Ar,isGoogleDriveLinked:!0,googleDriveFileId:Ve.id,googleDriveWebViewLink:jt,googleDriveDownloadLink:jt,googleDriveIconUrl:gr,fileName:Ve.name||"Untitled",fileMimeType:Ve.mimeType||"",fileSize:nr,fileUrl:jt,file:null})),t("File attached from Google Drive")}catch(jt){console.error("Error handling Google Drive file selection:",jt),r(jt.message||"Failed to attach file from Google Drive")}}},Ye=async()=>{if(me.trim()){Re(!0);try{const Ve=await Oae({name:me.trim()});if(Ve?.data){const jt=Ve.data;u(gr=>[...gr,jt]),se(""),t("Document type added successfully")}}catch(Ve){Ve.message?.includes("already exists")||Ve.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(Ve.message||"Failed to add document type")}finally{Re(!1)}}},xe=Ve=>{const jt=Ve.target.files?.[0];if(!jt)return;if(jt.size>10*1024*1024){r("File size must be less than 10MB");return}Q(!0);const gr=new FileReader;gr.onload=()=>{const nr=gr.result;Se(Ar=>({...Ar,file:jt,fileUrl:nr,fileName:jt.name,fileMimeType:jt.type,fileSize:jt.size})),Q(!1)},gr.onerror=()=>{r("Failed to read file"),Q(!1)},gr.readAsDataURL(jt)},ve=async()=>{if(!te.fileUrl||!we){r("Please select a file first");return}X(!0);try{const Ve=await Pae({fileName:te.fileName,fileContent:te.fileUrl,fileMimeType:te.fileMimeType,userId:we});Se(jt=>({...jt,isGoogleDriveLinked:!0,googleDriveFileId:Ve.data.id,googleDriveWebViewLink:Ve.data.webViewLink,googleDriveDownloadLink:Ve.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(Ve){r(Ve.message||"Failed to upload to Google Drive")}finally{X(!1)}},Fe=async(Ve,jt)=>{W(!0);try{const gr=await Iae({contractId:Ve,userId:we,title:jt});t("Signature document created in Google Docs"),Pe(),window.open(gr.data.documentLink,"_blank")}catch(gr){r(gr.message||"Failed to create signature document")}finally{W(!1)}},$e=async()=>{if(!te.title||!te.documentType||!te.contractParty){r("Please fill in all required fields");return}z(!0);try{await _ae({title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,signatureStatus:te.requiresSignature?"Pending":"Not Required",fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null,userId:we}),t("Contract created successfully"),U(!1),Ze(),Pe()}catch(Ve){r(Ve.message||"Failed to create contract")}finally{z(!1)}},_e=async()=>{if(f){z(!0);try{await Aae(f.id,{title:te.title,documentType:te.documentType,contractParty:te.contractParty,companyId:te.companyId||null,contactId:te.contactId||null,expirationDate:te.expirationDate||null,renewalDate:te.renewalDate||null,signedDate:te.signedDate||null,status:te.status,description:te.description||null,tags:te.tags,requiresSignature:te.requiresSignature,fileUrl:te.fileUrl||null,fileName:te.fileName||null,fileMimeType:te.fileMimeType||null,fileSize:te.fileSize||null,isGoogleDriveLinked:te.isGoogleDriveLinked,googleDriveFileId:te.googleDriveFileId||null,googleDriveWebViewLink:te.googleDriveWebViewLink||null,googleDriveDownloadLink:te.googleDriveDownloadLink||null,googleDriveIconUrl:te.googleDriveIconUrl||null}),t("Contract updated successfully"),O(!1),m(null),Ze(),Pe()}catch(Ve){r(Ve.message||"Failed to update contract")}finally{z(!1)}}},Be=async()=>{if(f){g(!0);try{await Cae(f.id),t("Contract deleted successfully"),w(!1),m(null),Pe()}catch(Ve){r(Ve.message||"Failed to delete contract")}finally{g(!1)}}},qe=async Ve=>{try{await Eae(Ve.id,{signedBy:we,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Pe()}catch(jt){r(jt.message||"Failed to mark contract as signed")}},Ze=()=>{Se({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),J.current&&(J.current.value="")},Vt=Ve=>{m(Ve),Se({title:Ve.title,documentType:Ve.documentType,contractParty:Ve.contractParty,companyId:Ve.companyId||"",contactId:Ve.contactId||"",expirationDate:Ve.expirationDate||"",renewalDate:Ve.renewalDate||"",signedDate:Ve.signedDate||"",status:Ve.status,description:Ve.description||"",tags:Ve.tags||[],requiresSignature:Ve.requiresSignature,file:null,fileUrl:Ve.fileUrl||"",fileName:Ve.fileName||"",fileMimeType:Ve.fileMimeType||"",fileSize:Ve.fileSize||0,isGoogleDriveLinked:Ve.isGoogleDriveLinked,googleDriveFileId:Ve.googleDriveFileId||"",googleDriveWebViewLink:Ve.googleDriveWebViewLink||"",googleDriveDownloadLink:Ve.googleDriveDownloadLink||"",googleDriveIconUrl:Ve.googleDriveIconUrl||""}),O(!0)},Dt=Ve=>{switch(Ve){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},dt=Ve=>{switch(Ve){case"Signed":return n.jsx(gn,{className:"w-4 h-4"});case"Pending Signature":return n.jsx(Is,{className:"w-4 h-4"});case"Draft":return n.jsx(ea,{className:"w-4 h-4"});case"Expired":return n.jsx(Zn,{className:"w-4 h-4"});case"Terminated":return n.jsx(tr,{className:"w-4 h-4"});default:return n.jsx(ea,{className:"w-4 h-4"})}},Tt=a.filter(Ve=>{const jt=Ve.title.toLowerCase().includes(j.toLowerCase())||Ve.contractParty.toLowerCase().includes(j.toLowerCase())||Ve.documentType.toLowerCase().includes(j.toLowerCase()),gr=!S||Ve.status===S,nr=!_||Ve.documentType===_;return jt&&gr&&nr}),Ht={total:a.length,signed:a.filter(Ve=>Ve.status==="Signed").length,pending:a.filter(Ve=>Ve.status==="Pending Signature").length,expired:a.filter(Ve=>Ve.status==="Expired").length};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>oe(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Os,{className:"w-4 h-4"})," Manage Document Types"]}),n.jsxs("button",{onClick:()=>{Ze(),U(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Contract"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Ht.total})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(gn,{className:"w-5 h-5 text-emerald-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),n.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:Ht.signed})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Is,{className:"w-5 h-5 text-amber-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),n.jsx("h3",{className:"text-2xl font-black text-amber-600",children:Ht.pending})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Zn,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),n.jsx("h3",{className:"text-2xl font-black text-red-600",children:Ht.expired})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Yl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:j,onChange:Ve=>N(Ve.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("select",{value:S,onChange:Ve=>E(Ve.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Statuses"}),mD.map(Ve=>n.jsx("option",{value:Ve,children:Ve},Ve))]}),n.jsxs("select",{value:_,onChange:Ve=>P(Ve.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Types"}),d.map(Ve=>n.jsx("option",{value:Ve.name,children:Ve.name},Ve.id))]})]})}),p?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(yt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):Tt.length===0?n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(ea,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||_?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!_&&n.jsxs("button",{onClick:()=>{Ze(),U(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(nn,{className:"w-4 h-4"})," Add Contract"]})]}):n.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:Tt.map(Ve=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>m(Ve),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-base font-black text-slate-900",children:Ve.title}),n.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${Dt(Ve.status)} flex items-center gap-1`,children:[dt(Ve.status),Ve.status]}),Ve.isGoogleDriveLinked&&n.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[Ve.googleDriveIconUrl?n.jsx("img",{src:Ve.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:jt=>{jt.target.style.display="none"}}):n.jsx(s0,{className:"w-3 h-3"}),"Drive"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Os,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ve.documentType})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(ol,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:Ve.contractParty})]}),Ve.expirationDate&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(oa,{className:"w-4 h-4 text-slate-400"}),n.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(Ve.expirationDate).toLocaleDateString()]})]}),Ve.requiresSignature&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[n.jsx(Wv,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold",children:Ve.signatureStatus})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Ve.googleDriveWebViewLink&&n.jsx("a",{href:Ve.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:jt=>jt.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:n.jsx(Ss,{className:"w-4 h-4"})}),n.jsx("button",{onClick:jt=>{jt.stopPropagation(),Vt(Ve)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Sl,{className:"w-4 h-4"})}),n.jsx("button",{onClick:jt=>{jt.stopPropagation(),m(Ve),w(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})},Ve.id))})}),(I||C)&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{U(!1),O(!1),Ze()}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ea,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:I?"Add Contract":"Edit Contract"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:I?"Create a new contract with metadata and documents":"Update contract details"})]})]}),n.jsx("button",{onClick:()=>{U(!1),O(!1),Ze()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.title,onChange:Ve=>Se(jt=>({...jt,title:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:te.documentType,onChange:Ve=>Se(jt=>({...jt,documentType:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"Select type"}),d.map(Ve=>n.jsx("option",{value:Ve.name,children:Ve.name},Ve.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:te.contractParty,onChange:Ve=>Se(jt=>({...jt,contractParty:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),n.jsxs("select",{value:te.companyId,onChange:Ve=>Se(jt=>({...jt,companyId:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),i.map(Ve=>n.jsx("option",{value:Ve.id,children:Ve.name},Ve.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),n.jsxs("select",{value:te.contactId,onChange:Ve=>Se(jt=>({...jt,contactId:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),l.map(Ve=>n.jsx("option",{value:Ve.id,children:Ve.name},Ve.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),n.jsx("input",{type:"date",value:te.expirationDate,onChange:Ve=>Se(jt=>({...jt,expirationDate:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),n.jsx("input",{type:"date",value:te.renewalDate,onChange:Ve=>Se(jt=>({...jt,renewalDate:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),n.jsx("input",{type:"date",value:te.signedDate,onChange:Ve=>Se(jt=>({...jt,signedDate:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsx("select",{value:te.status,onChange:Ve=>Se(jt=>({...jt,status:Ve.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:mD.map(Ve=>n.jsx("option",{value:Ve,children:Ve},Ve))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:te.requiresSignature,onChange:Ve=>Se(jt=>({...jt,requiresSignature:Ve.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("textarea",{value:te.description,onChange:Ve=>Se(jt=>({...jt,description:Ve.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(I||C)&&n.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Qd,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),n.jsx("input",{ref:J,type:"file",onChange:xe,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!te.fileUrl&&!te.isGoogleDriveLinked?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>J.current?.click(),disabled:H,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:H?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qd,{className:"w-4 h-4"}),"Choose File"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 h-px bg-slate-200"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),n.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),n.jsx("button",{onClick:ue,disabled:!T||V,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:V?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(s0,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[te.isGoogleDriveLinked&&te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:Ve=>{Ve.target.style.display="none";const jt=document.createElement("div");jt.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',Ve.target.parentNode?.appendChild(jt)}}):te.isGoogleDriveLinked?n.jsx(s0,{className:"w-5 h-5 text-blue-600"}):n.jsx(rU,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:te.fileName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[te.fileSize>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(te.fileSize/1024).toFixed(1)," KB"]}),te.isGoogleDriveLinked&&n.jsxs(n.Fragment,{children:[te.fileSize>0&&n.jsx("span",{className:"text-slate-300",children:""}),n.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),n.jsx("button",{onClick:()=>{Se(Ve=>({...Ve,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),J.current&&(J.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]}),!te.isGoogleDriveLinked&&te.fileUrl&&n.jsx("button",{onClick:ve,disabled:re,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:re?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(s0,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),te.isGoogleDriveLinked&&te.googleDriveWebViewLink&&n.jsxs("a",{href:te.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[te.googleDriveIconUrl?n.jsx("img",{src:te.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:Ve=>{Ve.target.style.display="none"}}):n.jsx(Ss,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>{U(!1),O(!1),Ze()},disabled:R,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:I?$e:_e,disabled:R,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),I?"Creating...":"Updating..."]}):n.jsx(n.Fragment,{children:I?"Create Contract":"Update Contract"})})]})]})})]}),f&&!C&&!b&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:f.title}),n.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${Dt(f.status)} flex items-center gap-1`,children:[dt(f.status),f.status]})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[f.documentType," - ",f.contractParty]})]}),n.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.expirationDate).toLocaleDateString()})]}),f.renewalDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.renewalDate).toLocaleDateString()})]}),f.signedDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.signedDate).toLocaleDateString()})]})]}),f.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:f.description})]}),(f.fileUrl||f.isGoogleDriveLinked)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),n.jsxs("div",{className:"space-y-2",children:[f.fileName&&n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[f.isGoogleDriveLinked&&f.googleDriveIconUrl?n.jsx("img",{src:f.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:Ve=>{Ve.target.style.display="none"}}):n.jsx(ea,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.fileName}),f.fileSize&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(f.fileSize/1024).toFixed(1)," KB"]})]})]}),f.fileUrl&&n.jsx("a",{href:f.fileUrl,download:f.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(h0,{className:"w-4 h-4"})})]}),f.isGoogleDriveLinked&&f.googleDriveWebViewLink&&n.jsx("a",{href:f.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(s0,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),n.jsx(Ss,{className:"w-4 h-4 text-blue-600"})]})})]})]}),f.requiresSignature&&n.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Wv,{className:"w-5 h-5 text-amber-600"}),n.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),n.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",n.jsx("span",{className:"font-black",children:f.signatureStatus})]}),f.googleDocsSignatureLink?n.jsx("a",{href:f.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):n.jsx("button",{onClick:()=>Fe(f.id,f.title),disabled:ee,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ee?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wv,{className:"w-4 h-4"}),"Create Signature Document"]})}),f.status!=="Signed"&&n.jsxs("button",{onClick:()=>qe(f),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(gn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(xf,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Oe?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(yt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):he.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(Qa,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:he.map((Ve,jt)=>{const gr=new Date(Ve.createdAt),Ar=new Date().getTime()-gr.getTime(),Ir=Math.floor(Ar/(1e3*60*60*24));let Xt="";Ir===0?Xt="Today":Ir===1?Xt="Yesterday":Ir<7?Xt=`${Ir} days ago`:Ir<30?Xt=`${Math.floor(Ir/7)} week${Math.floor(Ir/7)>1?"s":""} ago`:Xt=`${Math.floor(Ir/30)} month${Math.floor(Ir/30)>1?"s":""} ago`;const Qt=Ve.activityType==="email_linked",mr=Qt?"border-indigo-600":"border-slate-200",Fr=Qt?"bg-indigo-600":"bg-slate-300",fn=Qt?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${mr} shadow-xl flex items-center justify-center`,children:Qt?n.jsx(Qa,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${Fr}`})}),n.jsxs("p",{className:`text-[10px] font-black ${fn} uppercase mb-1 tracking-widest`,children:[Qt?"Email Linked":Ve.activityType||"Activity","  ",Xt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Ve.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Ve.description||Ve.title}),Ve.emailId&&n.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${Ve.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(Ss,{className:"w-3 h-3"})," View Email"]})]},Ve.id||jt)})})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),n.jsxs("button",{onClick:()=>{Vt(f)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),b&&f&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(Zn,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",n.jsx("span",{className:"font-black",children:f.title}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>w(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Be,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),n.jsx("button",{onClick:()=>{oe(!1),se("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ea,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):d.map(Ve=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(ea,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:Ve.name})]}),n.jsx(gn,{className:"w-5 h-5 text-emerald-600"})]},Ve.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New document type...",value:me,onChange:Ve=>se(Ve.target.value),onKeyDown:Ve=>{Ve.key==="Enter"&&me.trim()&&!de&&(Ve.preventDefault(),Ye())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ye,disabled:!me.trim()||de,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:de?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},vye=()=>n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage your products and service catalog."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest border border-indigo-100",children:[n.jsx(Mi,{className:"w-4 h-4"})," Coming Soon"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-12 shadow-sm flex flex-col items-center justify-center min-h-[320px] text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-[24px] flex items-center justify-center mb-6",children:n.jsx(Kk,{className:"w-10 h-10 text-indigo-600"})}),n.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 max-w-md",children:"Catalog management, pricing, and service offerings will be available here. This section is in development."})]})]}),yye=({onLogin:e})=>{const[t,r]=L.useState("initial"),[a,s]=L.useState(""),[i,o]=L.useState(["","","","","",""]),[l,c]=L.useState(!1),[d,u]=L.useState(null),f=L.useRef([]),m=async()=>{if(!a||!a.includes("@")){u("Please enter a valid email address");return}c(!0),u(null);try{const w=await eI({email:a});if(w?.status===404)throw new Error(w.message);u(null),o(["","","","","",""]),r("verify")}catch(w){console.error("[AUTH UI] Error caught:",w),w.message&&(w.message.includes("Account not found")||w.status===404)?u("Account not found - contact your Administrator"):u(w.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},p=async()=>{const w=i.join("");if(w.length===6){if(!/^\d{6}$/.test(w)){u("OTP must contain only numbers");return}c(!0),u(null);try{const j=await kne({email:a,verificationCode:w});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?u("Account not found - contact your Administrator"):u(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>f.current[0]?.focus(),100)}finally{c(!1)}}},y=(w,j)=>{if(j&&!/^\d$/.test(j))return;const N=[...i];N[w]=j,o(N),d&&u(null),j&&w<5&&f.current[w+1]?.focus(),j&&w===5&&N.every(S=>S!=="")&&setTimeout(()=>p(),100)},v=(w,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const N=[...i];i[w]?N[w]="":w>0&&(N[w-1]="",f.current[w-1]?.focus()),o(N),d&&u(null)}else j.key==="Enter"?(j.preventDefault(),p()):j.key==="ArrowLeft"&&w>0?(j.preventDefault(),f.current[w-1]?.focus()):j.key==="ArrowRight"&&w<5&&(j.preventDefault(),f.current[w+1]?.focus())},g=w=>{w.preventDefault();const j=w.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),N=[...i];for(let E=0;E<6;E++)N[E]=j[E]||"";o(N),d&&u(null);const S=N.findIndex(E=>E==="");f.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>p(),100)};L.useEffect(()=>{t==="verify"?setTimeout(()=>f.current[0]?.focus(),100):o(["","","","","",""])},[t]);const b=w=>{w.preventDefault(),t==="initial"?m():p()};return n.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[n.jsx("div",{className:"mb-6 text-center",children:n.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),n.jsxs("div",{className:"flex flex-col items-center mb-10",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),n.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),n.jsxs("form",{onSubmit:b,className:"space-y-5",children:[d&&n.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Zn,{className:"w-4 h-4 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[d,d.includes("Administrator")&&n.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),n.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:a,onChange:w=>s(w.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&n.jsxs("div",{className:"space-y-4 text-center",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),n.jsx("p",{className:"text-sm font-semibold text-white",children:a})]}),n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),n.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((w,j)=>n.jsx("input",{ref:N=>{f.current[j]=N},type:"text",inputMode:"numeric",maxLength:1,value:w,onChange:N=>y(j,N.target.value),onKeyDown:N=>v(j,N),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),n.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:async()=>{u(null),o(["","","","","",""]),c(!0);try{await eI({email:a}),u(null),setTimeout(()=>f.current[0]?.focus(),100)}catch(w){u(w.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),n.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),u(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),n.jsx("button",{disabled:l||t==="verify"&&i.some(w=>w===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",n.jsx(Eo,{className:"w-4 h-4"})]})})]}),n.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(Wd,{className:"w-5 h-5 text-slate-700"}),n.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[n.jsx("p",{children:"Access restricted to authorized personnel."}),n.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[n.jsx("a",{href:"/help",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),n.jsx("span",{className:"text-slate-600",children:""}),n.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},bye=({children:e,onUserLoaded:t})=>{const[r,a]=L.useState(!0),[s,i]=L.useState(!1);return L.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),a(!1);return}if(c)try{const d=JSON.parse(c);t(d),i(!0),a(!1),tI().then(u=>{const f=u.data||u,m=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(f)!==JSON.stringify(m)&&(localStorage.setItem("user_data",JSON.stringify(f)),t(f))}).catch(u=>{console.warn("Session expired:",u),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const d=await tI(),u=d.data||d;localStorage.setItem("user_data",JSON.stringify(u)),t(u),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{a(!1)}})()},[t]),r?n.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[n.jsx(yt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),n.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?n.jsx(n.Fragment,{children:e}):n.jsx(yye,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},wye=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:a,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return n.jsx(ed,{className:"w-4 h-4 text-indigo-500"});if(f?.toLowerCase().includes("pipeline"))return n.jsx(Gd,{className:"w-4 h-4 text-purple-500"});switch(u){case"lead":return n.jsx(ed,{className:"w-4 h-4 text-blue-500"});case"deal":return n.jsx(lo,{className:"w-4 h-4 text-indigo-500"});case"task":return n.jsx(ji,{className:"w-4 h-4 text-emerald-500"});case"payment":return n.jsx(b0,{className:"w-4 h-4 text-red-500"});case"email-routing":return n.jsx(Gl,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return n.jsx(Qa,{className:"w-4 h-4 text-blue-500"});case"email-mention":return n.jsx(yh,{className:"w-4 h-4 text-violet-500"});case"new-email":return n.jsx(Qa,{className:"w-4 h-4 text-slate-600"});default:return n.jsx(mx,{className:"w-4 h-4 text-slate-400"})}},d=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return"bg-indigo-50";if(f?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return n.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ey,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a&&n.jsx("button",{onClick:a,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:n.jsx(Ou,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),n.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?n.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>n.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(u.id),u.link)if(u.link.startsWith("/?tab=")&&l){const m=new URL(u.link,window.location.origin).searchParams.get("tab");m?(l(m),localStorage.setItem("activeTab",m),window.history.replaceState(null,"",u.link),i()):window.location.href=u.link}else u.link.startsWith("/"),window.location.href=u.link},children:[n.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${d(u.type,u.title)}`,children:c(u.type,u.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-2",children:[n.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),n.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),n.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):n.jsxs("div",{className:"p-12 text-center text-slate-400",children:[n.jsx(Lu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),n.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),n.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:n.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},zv=20,Nye=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=On(),[s,i]=L.useState([]),[o,l]=L.useState(!0),[c,d]=L.useState(!1),[u,f]=L.useState(1),[m,p]=L.useState(1),[y,v]=L.useState(0),[g,b]=L.useState(!1),w=L.useCallback(async(z=!1)=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;z?d(!0):l(!0);const Q=await V7(H.id,500),J=Q?.data||Q||[],re=(Array.isArray(J)?J:[]).map(X=>{let ee="Just now";if(X.createdAt){const W=new Date(X.createdAt),q=new Date().getTime()-W.getTime(),V=Math.floor(q/6e4),B=Math.floor(q/36e5),K=Math.floor(q/864e5);V<1?ee="Just now":V<60?ee=`${V}m ago`:B<24?ee=`${B}h ago`:K<7?ee=`${K}d ago`:ee=W.toLocaleDateString()}return{id:X.id,userId:X.userId,type:X.type||"system",title:X.title,message:X.message,timestamp:ee,read:!!X.read,link:X.link||void 0}});i(re),v(re.length),p(Math.ceil(re.length/zv))}catch(H){console.error("[NOTIFICATIONS] Failed to load notifications",H),a(H.message||"Failed to load notifications")}finally{l(!1),d(!1)}},[e,a]);L.useEffect(()=>{w(!1)},[w]),L.useEffect(()=>{f(1)},[g]),L.useEffect(()=>{const z=()=>{w(!0)};return window.addEventListener("refresh-notifications",z),()=>{window.removeEventListener("refresh-notifications",z)}},[w]);const j=async z=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;await G7(z,H.id),i(Q=>Q.map(J=>J.id===z?{...J,read:!0}:J)),window.dispatchEvent(new Event("refresh-notifications"))}catch(H){console.error("[NOTIFICATIONS] Failed to mark as read",H),a(H.message||"Failed to mark notification as read")}},N=async()=>{try{const z=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!z?.id)return;await K7(z.id),i(H=>H.map(Q=>({...Q,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(z){console.error("[NOTIFICATIONS] Failed to mark all as read",z),a(z.message||"Failed to mark all notifications as read")}},S=(z,H)=>{if(z==="note-marked"||H?.toLowerCase().includes("marked"))return n.jsx(ed,{className:"w-5 h-5 text-indigo-500"});if(H?.toLowerCase().includes("pipeline"))return n.jsx(Gd,{className:"w-5 h-5 text-purple-500"});switch(z){case"lead":return n.jsx(ed,{className:"w-5 h-5 text-blue-500"});case"deal":return n.jsx(lo,{className:"w-5 h-5 text-indigo-500"});case"task":return n.jsx(ji,{className:"w-5 h-5 text-emerald-500"});case"payment":return n.jsx(b0,{className:"w-5 h-5 text-red-500"});case"email-routing":return n.jsx(Gl,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return n.jsx(Qa,{className:"w-5 h-5 text-blue-500"});case"email-mention":return n.jsx(yh,{className:"w-5 h-5 text-violet-500"});case"new-email":return n.jsx(Qa,{className:"w-5 h-5 text-slate-600"});default:return n.jsx(mx,{className:"w-5 h-5 text-slate-400"})}},E=(z,H)=>{if(z==="note-marked"||H?.toLowerCase().includes("marked"))return"bg-indigo-50";if(H?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(z){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},_=z=>{if(j(z.id),z.link)if(z.link.startsWith("/?tab=")){const Q=new URL(z.link,window.location.origin).searchParams.get("tab");Q&&t?t(Q):window.location.href=z.link}else z.link.startsWith("/"),window.location.href=z.link},P=g?s.filter(z=>z.type==="note-marked"||z.title?.toLowerCase().includes("marked")):s,I=(u-1)*zv,U=I+zv,C=P.slice(I,U),O=P.filter(z=>!z.read).length,R=Math.ceil(P.length/zv);return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(Ey,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:O>0?`${O} unread notification${O!==1?"s":""}`:"All caught up!"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>b(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[n.jsx(ed,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),n.jsxs("button",{onClick:()=>w(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[n.jsx(Ou,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),O>0&&n.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(Ou,{className:"w-8 h-8 animate-spin text-indigo-600"})}):P.length===0?n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[n.jsx(Lu,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),n.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:C.map(z=>n.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${z.read?"":"bg-indigo-50/30"}`,onClick:()=>_(z),children:[n.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${E(z.type,z.title)}`,children:S(z.type,z.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[n.jsx("p",{className:`text-sm font-semibold ${z.read?"text-slate-600":"text-slate-900 font-bold"}`,children:z.title}),n.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 font-medium",children:z.timestamp}),!z.read&&n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),n.jsx("p",{className:`text-sm ${z.read?"text-slate-400":"text-slate-600"}`,children:z.message})]})]},z.id))})}),R>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",n.jsx("span",{className:"font-semibold",children:I+1})," to"," ",n.jsx("span",{className:"font-semibold",children:Math.min(U,P.length)})," of"," ",n.jsx("span",{className:"font-semibold",children:P.length})," notifications"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>f(z=>Math.max(1,z-1)),disabled:u===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Uj,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:R},(z,H)=>H+1).map(z=>z===1||z===m||z>=u-1&&z<=u+1?n.jsx("button",{onClick:()=>f(z),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${u===z?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:z},z):z===u-2||z===u+2?n.jsx("span",{className:"px-2 text-slate-400",children:"..."},z):null)}),n.jsx("button",{onClick:()=>f(z=>Math.min(R,z+1)),disabled:u===R,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(ya,{className:"w-5 h-5"})})]})]})]})]})},r0=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const a=r[1].toLowerCase().trim();return a.includes(".")?a:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const a=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return a.includes(".")?a:null}catch{const a=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return a&&a.includes(".")?a:null}},jye=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 1;const s=r.length,i=a.length;if(s===0||i===0)return 0;const o=[];for(let d=0;d<=s;d++)o[d]=[d];for(let d=0;d<=i;d++)o[0][d]=d;for(let d=1;d<=s;d++)for(let u=1;u<=i;u++){const f=r[d-1]===a[u-1]?0:1;o[d][u]=Math.min(o[d-1][u]+1,o[d][u-1]+1,o[d-1][u-1]+f)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},kye=(e,t)=>{const r=[];if(!e.email)return r;const a=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===a&&r.push({record:s,matchType:"exact",confidence:1})}),r},Sye=(e,t,r=.8)=>{const a=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=jye(e.name||"",s.name||"");i>=r&&a.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),a},_ye=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],Aye=({type:e,stage:t,lockedType:r,onClose:a,onSuccess:s})=>{const[i,o]=L.useState(e),[l,c]=L.useState("form"),[d,u]=L.useState(!1),[f,m]=L.useState(null),[p,y]=L.useState({}),[v,g]=L.useState([]),[b,w]=L.useState([]),[j,N]=L.useState([]),[S,E]=L.useState([]),[_,P]=L.useState([]),[I,U]=L.useState(!1),[C,O]=L.useState(!1),[R,z]=L.useState(""),H=L.useRef(null),[Q,J]=L.useState(null),[re,X]=L.useState(!1),[ee,W]=L.useState(""),[T,q]=L.useState(null),V=L.useRef(null),[B,K]=L.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:wi,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});L.useEffect(()=>{const le={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(le.lineItems=[{description:"",quantity:1,rate:0,amount:0}],le.currency=wi):(le.lineItems=[],e!=="deal"&&(le.currency=wi)),K(te=>({...te,...le})),m(null),y({}),c("form"),U(!1),W(""),q(null),V.current&&(V.current.value="")},[e,t]),L.useEffect(()=>{(async()=>{try{const Se=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[we,Pe,fe,ue]=await Promise.all([ad(),ld(),Sh(),I0(Se)]);N(we.data||[]),g(Pe.data||[]),w(fe.data||[]);const Ee=Array.isArray(ue)?ue:ue?.data||[];if(E(Ee.filter(Ye=>!Ye.archived)),i==="task")try{const Ye=await iy(),xe=Array.isArray(Ye?.data)?Ye.data:[];P(xe)}catch{P([])}else P([]);Se&&K(Ye=>({...Ye,ownerId:Ye.ownerId||Se,assigneeId:Ye.assigneeId||Se}))}catch(te){console.error("[QUICK-CREATE] Data fetch failed:",te)}})()},[i]),L.useEffect(()=>{const le=te=>{H.current&&!H.current.contains(te.target)&&(O(!1),z(""))};if(C)return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[C]);const oe=_ye.filter(le=>le.toLowerCase().includes(R.toLowerCase())),me=(le,te=1200,Se=1200,we=.8)=>new Promise((Pe,fe)=>{const ue=new FileReader;ue.onload=Ee=>{const Ye=new Image;Ye.onload=()=>{let xe=Ye.width,ve=Ye.height;xe>ve?xe>te&&(ve=ve*te/xe,xe=te):ve>Se&&(xe=xe*Se/ve,ve=Se);const Fe=document.createElement("canvas");Fe.width=xe,Fe.height=ve;const $e=Fe.getContext("2d");$e?($e.drawImage(Ye,0,0,xe,ve),Pe(Fe.toDataURL("image/jpeg",we))):fe(new Error("Canvas context not available"))},Ye.onerror=()=>fe(new Error("Failed to load image")),Ye.src=Ee.target?.result},ue.onerror=()=>fe(new Error("Failed to read file")),ue.readAsDataURL(le)}),se=async le=>{const te=le.target.files?.[0];if(te){if(!te.type.startsWith("image/")){m("Please select an image file");return}if(te.size>10*1024*1024){m("Image size must be less than 10MB");return}try{const Se=await me(te,1200,1200,.8);W(Se),q(te),m(null)}catch(Se){m(Se.message||"Failed to process image")}}},de=()=>{W(""),q(null),V.current&&(V.current.value=""),a()},Re=()=>{const le={};if(i==="contact")B.name?.trim()||(le.name="Full Name is required"),B.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.email)||(le.email="Please enter a valid email address"):le.email="Email Address is required";else if(i==="company"){B.name?.trim()||(le.name="Company Name is required"),(!B.region||B.region.trim()==="")&&(le.region="Region is required"),B.ownerId?.trim()||(le.ownerId="Assignee / Lead is required");let te=B.domain;!te&&B.website&&(te=r0(B.website)||""),!te&&B.email&&(te=r0(B.email)||""),(!te||te.trim()==="")&&(le.domain="Domain is required (can be auto-populated from website or email)",le.website="Add website or email to auto-populate domain")}else if(i==="deal")B.title?.trim()||(le.title="Deal Name is required"),B.companyId?.trim()||(le.companyId="Organization is required"),(!B.value||parseFloat(B.value)<=0)&&(le.value="Amount is required and must be greater than $0"),B.stage?.trim()||(le.stage="Stage is required"),B.ownerId||(le.ownerId="Assignee / Lead is required");else if(i==="project"){if(B.title?.trim()||(le.title="Project Name is required"),B.engagement?.trim()||(le.engagement="Engagement is required"),B.startDate?.trim()||(le.startDate="Start Date is required"),B.endDate?.trim()||(le.endDate="End Date is required"),B.startDate&&B.endDate){const te=new Date(B.startDate),Se=new Date(B.endDate);!isNaN(te.getTime())&&!isNaN(Se.getTime())&&te>=Se&&(le.endDate="End Date must be after Start Date")}B.ownerId||(le.ownerId="Assignee / Lead is required")}else i==="task"?(B.title?.trim()||(le.title="Task Title is required"),B.assigneeId||(le.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(B.companyId||(le.companyId="Client (Organization) is required"),(!B.expectedCloseDate||B.expectedCloseDate.trim()==="")&&(le.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!B.lineItems||B.lineItems.length===0?le.lineItems="At least one line item is required":(B.lineItems.forEach((Se,we)=>{(!Se.description||!Se.description.trim())&&(le[`lineItem_${we}_description`]=`Line item ${we+1}: Description is required`),(!Se.quantity||Se.quantity<=0)&&(le[`lineItem_${we}_quantity`]=`Line item ${we+1}: Quantity must be greater than 0`),(!Se.rate||Se.rate<=0)&&(le[`lineItem_${we}_rate`]=`Line item ${we+1}: Rate must be greater than 0`)}),B.lineItems.reduce((Se,we)=>{const Pe=we.amount||we.rate*we.quantity||0;return Se+Pe},0)<=0&&(le.lineItems="Total amount must be greater than $0")));return y(le),Object.keys(le).length===0},he=async le=>{if(le.preventDefault(),d)return;if(m(null),!Re()){u(!1);return}u(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,B);try{const we=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Pe={name:B.name,email:B.email},fe=kye(Pe,b),ue=Sye(Pe,b,.8);if(fe.length>0||ue.length>0){const Ee=new Map,Ye=new Set;fe.forEach(ve=>{const Fe=ve.record,$e=Fe.id||Fe.email?.toLowerCase().trim()||"";$e&&!Ee.has($e)&&(Ee.set($e,{...Fe,matchType:"exact",matchReason:"email"}),Fe.email&&Ye.add(Fe.email.toLowerCase().trim()))}),ue.forEach(ve=>{const Fe=ve.record,$e=Fe.id||Fe.email?.toLowerCase().trim()||"",_e=Fe.email?.toLowerCase().trim();$e&&!Ee.has($e)&&(!_e||!Ye.has(_e))&&(Ee.set($e,{...Fe,matchType:"fuzzy",matchReason:"name",similarity:ve.similarity}),_e&&Ye.add(_e))});const xe=Array.from(Ee.values());J({open:!0,duplicates:xe,newContact:{name:B.name,email:B.email,companyId:B.companyId||void 0,role:B.role,phone:B.phone,linkedin:B.linkedin||void 0}}),u(!1);return}await rI({name:B.name,companyId:B.companyId||void 0,role:B.role,email:B.email,phone:B.phone,linkedin:B.linkedin||void 0})}else if(i==="company"){let Pe=B.domain;!Pe&&B.website&&(Pe=r0(B.website)||void 0),!Pe&&B.email&&(Pe=r0(B.email)||void 0);const fe={name:B.name?.trim(),industry:B.industry?.trim(),region:B.region?.trim()||"",website:B.website?.trim()||void 0,email:B.email?.trim()||void 0,domain:Pe||"",linkedin:B.linkedin?.trim()||void 0,ownerId:B.ownerId||we};if(!fe.region){y({region:"Region is required"}),u(!1);return}if(!fe.domain){y({domain:"Domain is required (can be auto-populated from website or email)"}),u(!1);return}await Pne(fe)}else if(i==="deal"){if(!B.companyId||B.companyId.trim()===""){y({companyId:"Organization is required"}),u(!1);return}if(!B.value||parseFloat(B.value)<=0){y({value:"Amount is required and must be greater than $0"}),u(!1);return}if(!B.stage||B.stage.trim()===""){y({stage:"Stage is required"}),u(!1);return}await Ine({title:B.title,companyId:B.companyId.trim(),value:parseFloat(B.value),currency:B.currency||wi,stage:B.stage,pipelineType:"sales",ownerId:B.ownerId,expectedCloseDate:B.expectedCloseDate||void 0,description:B.description||void 0})}else if(i==="project"){const Pe={};if(B.title?.trim()||(Pe.title="Project Name is required"),B.engagement?.trim()||(Pe.engagement="Engagement is required"),B.startDate?.trim()||(Pe.startDate="Start Date is required"),B.endDate?.trim()||(Pe.endDate="End Date is required"),B.ownerId?.trim()||(Pe.ownerId="Assignee / Lead is required"),B.startDate&&B.endDate){const ue=new Date(B.startDate),Ee=new Date(B.endDate);!isNaN(ue.getTime())&&!isNaN(Ee.getTime())&&ue>=Ee&&(Pe.endDate="End Date must be after Start Date")}if(Object.keys(Pe).length>0){y(Pe),u(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:B.title,engagement:B.engagement,startDate:B.startDate,endDate:B.endDate,ownerId:B.ownerId});const fe={title:B.title.trim(),engagement:B.engagement.trim(),startDate:B.startDate,endDate:B.endDate,companyId:B.companyId&&B.companyId.trim()!==""?B.companyId:void 0,status:B.status,ownerId:B.ownerId,projectManager:B.ownerId,progress:0,description:B.description||void 0};ee&&T&&(fe.noteImage=ee,fe.noteImageName=T.name,fe.noteImageMimeType=T.type),console.debug("[QUICK-CREATE] Project payload:",fe),await Lne(fe)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:B.title,assigneeId:B.assigneeId});const Pe={title:B.title,projectId:B.projectId||void 0,description:B.description||void 0,dueDate:B.expectedCloseDate||void 0,priority:B.priority,status:"Todo",assigneeId:B.assigneeId,category:B.category&&B.category.trim()?B.category.trim():void 0};if(ee||B.description){const fe=JSON.parse(localStorage.getItem("user_data")||"{}"),ue={id:`note_${Date.now()}`,userId:we||fe.id,userName:fe.name||"Unknown User",text:B.description||"",createdAt:new Date().toISOString()};ee&&T&&(ue.imageUrl=ee,ue.imageName=T.name,ue.imageMimeType=T.type),Pe.notes=[ue]}await z7(Pe),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Pe={};if(B.companyId?.trim()||(Pe.companyId="Client (Organization) is required"),B.expectedCloseDate?.trim()||(Pe.expectedCloseDate="Due Date is required"),(!B.lineItems||B.lineItems.length===0)&&(Pe.lineItems="At least one line item is required"),B.lineItems&&B.lineItems.length>0&&B.lineItems.forEach((Ee,Ye)=>{(!Ee.description||!Ee.description.trim())&&(Pe[`lineItem_${Ye}_description`]=`Line item ${Ye+1}: Description is required`),(!Ee.quantity||Ee.quantity<=0)&&(Pe[`lineItem_${Ye}_quantity`]=`Line item ${Ye+1}: Quantity must be greater than 0`),(!Ee.rate||Ee.rate<=0)&&(Pe[`lineItem_${Ye}_rate`]=`Line item ${Ye+1}: Rate must be greater than 0`)}),Object.keys(Pe).length>0){y(Pe),u(!1);return}const fe=B.lineItems.map(Ee=>({description:Ee.description.trim(),quantity:Ee.quantity,rate:Ee.rate,amount:Ee.amount||Ee.rate*Ee.quantity})),ue=fe.reduce((Ee,Ye)=>Ee+(Ye.amount||0),0);if(ue<=0){y({lineItems:"At least one line item with a valid amount is required"}),u(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:B.companyId,amount:ue,dueDate:B.expectedCloseDate,lineItemsCount:fe.length,lineItems:fe,name:B.name,description:B.description}),await Mne({companyId:B.companyId,amount:ue,currency:B.currency||wi,dueDate:B.expectedCloseDate,description:B.name||B.description||"",lineItems:fe,items:fe,status:"Draft",userId:we||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),q(null),V.current&&(V.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{a()},1500)}catch(Se){if(console.error("[QUICK-CREATE] Deployment failed:",Se),console.error("[QUICK-CREATE] Error details:",{message:Se.message,code:Se.code,status:Se.status,details:Se.details,type:i}),Se.code==="DUPLICATE_DETECTED"&&Se.duplicates&&i==="contact"){const we=new Map;Se.duplicates.forEach(fe=>{if(fe.id)if(!we.has(fe.id))we.set(fe.id,fe);else{const ue=we.get(fe.id);fe.matchType==="exact"&&ue.matchType!=="exact"&&we.set(fe.id,fe)}});const Pe=Array.from(we.values());J({open:!0,duplicates:Pe,newContact:{name:B.name,email:B.email,companyId:B.companyId||void 0,role:B.role,phone:B.phone,linkedin:B.linkedin||void 0}}),u(!1);return}if(Se.code==="VALIDATION_ERROR"||Se.details&&Se.details.errors){const we={};(Se.details?.errors||(Se.message?[Se.message]:[])).forEach(fe=>{const ue=fe.toLowerCase();if(ue.includes("name")||ue.includes("title"))we.title=fe;else if(ue.includes("industry"))we.industry=fe;else if(ue.includes("region"))we.region=fe;else if(ue.includes("domain"))we.domain=fe;else if(ue.includes("email"))we.email=fe;else if(ue.includes("engagement"))we.engagement=fe;else if(ue.includes("start date")||ue.includes("startdate"))we.startDate=fe;else if(ue.includes("end date")||ue.includes("enddate"))we.endDate=fe;else if(ue.includes("project manager")||ue.includes("manager"))we.ownerId=fe;else if(ue.includes("assignee")||ue.includes("lead")||ue.includes("owner"))we.ownerId=fe;else if(ue.includes("client")||ue.includes("company"))we.companyId=fe;else if(ue.includes("due date")||ue.includes("duedate"))we.expectedCloseDate=fe;else if(ue.includes("line item")){const Ee=ue.match(/line item (\d+):\s*(.+)/);if(Ee){const Ye=parseInt(Ee[1])-1,xe=Ee[2];xe.includes("description")?we[`lineItem_${Ye}_description`]=fe:xe.includes("quantity")?we[`lineItem_${Ye}_quantity`]=fe:(xe.includes("rate")||xe.includes("amount"))&&(we[`lineItem_${Ye}_rate`]=fe)}else we.lineItems=fe}else ue.includes("amount")&&!ue.includes("line item")&&(we.lineItems=fe)}),Object.keys(we).length>0?(y(we),m("Please correct the validation errors below")):m(Se.message||"Validation failed. Please check all required fields.")}else m(Se.message||"Operational error. Verify mandatory fields and team authorization.");u(!1)}},Ue=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Oe=()=>n.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?n.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[n.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:n.jsx(gn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):n.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&n.jsx(Wd,{className:"w-6 h-6"}),i==="project"&&n.jsx(Vd,{className:"w-6 h-6"}),i==="task"&&n.jsx(ji,{className:"w-6 h-6"}),i==="invoice"&&n.jsx(ea,{className:"w-6 h-6"}),i==="contact"&&n.jsx(ol,{className:"w-6 h-6"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:Ue()}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"WORKSPACE UPDATE"})]})]}),n.jsx("button",{onClick:de,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:he,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&n.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(le=>n.jsx("button",{type:"button",onClick:()=>o(le),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===le?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:le},le))}),f&&Object.keys(p).length===0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx(Zn,{className:"w-5 h-5 shrink-0"}),n.jsx("span",{children:f})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?B.title:B.name,onChange:le=>{const te=i==="deal"||i==="project"||i==="task"?"title":"name";K(Se=>({...Se,[te]:le.target.value})),p[te]&&y(Se=>{const we={...Se};return delete we[te],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.title||p.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(p.title||p.name)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.title||p.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&n.jsx(Oe,{})]}),n.jsxs("select",{required:i==="deal"||i==="invoice",value:B.companyId,onChange:le=>{K(te=>({...te,companyId:le.target.value})),p.companyId&&y(te=>{const Se={...te};return delete Se.companyId,Se})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(le=>n.jsx("option",{value:le.id,children:le.name},le.id))]}),p.companyId&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.companyId]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:B.email,onChange:le=>{K(te=>({...te,email:le.target.value})),p.email&&y(te=>{const Se={...te};return delete Se.email,Se})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.email]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),n.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:B.role,onChange:le=>K(te=>({...te,role:le.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:B.phone,onChange:le=>K(te=>({...te,phone:le.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),n.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:B.industry,onChange:le=>{K(te=>({...te,industry:le.target.value})),p.industry&&y(te=>{const Se={...te};return delete Se.industry,Se})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.industry&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.industry]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2 relative",ref:H,children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>{O(!C),C||z("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${p.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${B.region?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:B.region||"Select Region"}),n.jsx(zs,{className:`w-4 h-4 text-slate-400 transition-transform ${C?"rotate-180":""}`})]}),C&&n.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-3 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search regions...",value:R,onChange:le=>z(le.target.value),onClick:le=>le.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:oe.length>0?oe.map(le=>n.jsx("button",{type:"button",onClick:()=>{const te=le.trim();K(Se=>({...Se,region:te})),O(!1),z(""),y(Se=>{const we={...Se};return delete we.region,we}),m(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${B.region===le?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:le},le)):n.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),p.region&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.region]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),n.jsx("input",{type:"url",placeholder:"https://www.example.com",value:B.website,onChange:le=>{const te=le.target.value;K(Se=>{const we={...Se,website:te},Pe=te?r0(te):null,fe=Se.email?r0(Se.email):null;return we.domain=Pe||fe||"",we}),(p.domain||p.website)&&y(Se=>{const we={...Se};return delete we.domain,delete we.website,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.website&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.website]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),n.jsx("input",{type:"email",placeholder:"contact@company.com",value:B.email,onChange:le=>{const te=le.target.value;K(Se=>{const we={...Se,email:te},Pe=Se.website?r0(Se.website):null,fe=te?r0(te):null;return we.domain=Pe||fe||"",we}),(p.email||p.domain)&&y(Se=>{const we={...Se};return delete we.email,delete we.domain,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.email]})]}),i==="company"&&B.domain&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",n.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),n.jsx("input",{type:"text",value:B.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${p.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),p.domain&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.domain]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),n.jsxs("select",{value:B.projectId||"",onChange:le=>{const te=le.target.value;K(Se=>({...Se,projectId:te===""?"":te}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),S.map(le=>n.jsx("option",{value:le.id,children:le.title},le.id))]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3.5 h-3.5"})," Task Category"]}),n.jsxs("select",{value:I?"__new__":B.category||"",onChange:le=>{const te=le.target.value;te==="__new__"?(U(!0),K(Se=>({...Se,category:""}))):(U(!1),K(Se=>({...Se,category:te})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),_.map(le=>n.jsx("option",{value:le,children:le},le)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),I&&n.jsx("div",{className:"pt-1",children:n.jsx("input",{type:"text",value:B.category,onChange:le=>K(te=>({...te,category:le.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["ASSIGNEE / LEAD ",n.jsx(Oe,{})]}),n.jsxs("select",{required:!0,value:i==="task"?B.assigneeId:B.ownerId,onChange:le=>{const te=i==="task"?"assigneeId":"ownerId";K(Se=>({...Se,[te]:le.target.value})),p[te]&&y(Se=>{const we={...Se};return delete we[te],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${p.ownerId||p.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[n.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(le=>n.jsx("option",{value:le.id,children:le.name},le.id))]}),(p.ownerId||p.assigneeId)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.ownerId||p.assigneeId]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"relative w-32",children:n.jsx("select",{value:B.currency||wi,onChange:le=>{K(te=>({...te,currency:le.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zp.map(le=>n.jsxs("option",{value:le.code,children:[le.code," (",le.symbol,")"]},le.code))})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:cf(B.currency)}),n.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:B.value,onChange:le=>{K(te=>({...te,value:le.target.value})),p.value&&y(te=>{const Se={...te};return delete Se.value,Se})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${p.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),p.value&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.value]})]}),i==="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),n.jsx("div",{className:"relative w-full",children:n.jsx("select",{value:B.currency||wi,onChange:le=>{K(te=>({...te,currency:le.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Zp.map(le=>n.jsxs("option",{value:le.code,children:[le.code," (",le.symbol,")"]},le.code))})})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"space-y-3",children:[B.lineItems.map((le,te)=>n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",te+1]}),B.lineItems.length>1&&n.jsx("button",{type:"button",onClick:()=>{const Se=B.lineItems.filter((we,Pe)=>Pe!==te);K(we=>({...we,lineItems:Se})),y(we=>{const Pe={...we};return delete Pe[`lineItem_${te}_description`],delete Pe[`lineItem_${te}_quantity`],delete Pe[`lineItem_${te}_rate`],Pe})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Item description",value:le.description,onChange:Se=>{const we=[...B.lineItems];we[te]={...we[te],description:Se.target.value},K(Pe=>({...Pe,lineItems:we})),p[`lineItem_${te}_description`]&&y(Pe=>{const fe={...Pe};return delete fe[`lineItem_${te}_description`],fe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${te}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${te}_description`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${te}_description`]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:le.quantity||"",onChange:Se=>{const we=parseFloat(Se.target.value)||0,Pe=le.rate||0,fe=[...B.lineItems];fe[te]={...fe[te],quantity:we,amount:we*Pe},K(ue=>({...ue,lineItems:fe})),p[`lineItem_${te}_quantity`]&&y(ue=>{const Ee={...ue};return delete Ee[`lineItem_${te}_quantity`],Ee})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${te}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${te}_quantity`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${te}_quantity`]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",cf(B.currency),") ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:le.rate||"",onChange:Se=>{const we=parseFloat(Se.target.value)||0,Pe=le.quantity||0,fe=[...B.lineItems];fe[te]={...fe[te],rate:we,amount:Pe*we},K(ue=>({...ue,lineItems:fe})),p[`lineItem_${te}_rate`]&&y(ue=>{const Ee={...ue};return delete Ee[`lineItem_${te}_rate`],Ee})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${te}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${te}_rate`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${te}_rate`]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),n.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[cf(B.currency),((le.quantity||0)*(le.rate||0)).toFixed(2)]})})]})]},te)),n.jsxs("button",{type:"button",onClick:()=>{K(le=>({...le,lineItems:[...le.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),p.lineItems&&y(le=>{const te={...le};return delete te.lineItems,te})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4"}),"Add Line Item"]}),p.lineItems&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.lineItems]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",cf(B.currency),")"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Fu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[cf(B.currency),B.lineItems.reduce((le,te)=>{const Se=te.amount||te.rate*te.quantity||0;return le+Se},0).toFixed(2)]})]})]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",n.jsx(Oe,{})]}),n.jsxs("select",{required:!0,value:B.stage,onChange:le=>{K(te=>({...te,stage:le.target.value})),p.stage&&y(te=>{const Se={...te};return delete Se.stage,Se})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:"Select Stage"}),n.jsx("option",{value:"Discovery",children:"Discovery"}),n.jsx("option",{value:"Proposal",children:"Proposal"}),n.jsx("option",{value:"Negotiation",children:"Negotiation"}),n.jsx("option",{value:"Won",children:"Won"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),p.stage&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.stage]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",n.jsx(Oe,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:B.engagement,onChange:le=>{K(te=>({...te,engagement:le.target.value})),p.engagement&&y(te=>{const Se={...te};return delete Se.engagement,Se})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.engagement&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.engagement]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(oa,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:B.startDate,onChange:le=>{if(K(te=>({...te,startDate:le.target.value})),p.startDate&&y(te=>{const Se={...te};return delete Se.startDate,Se}),le.target.value&&B.endDate){const te=new Date(le.target.value),Se=new Date(B.endDate);!isNaN(te.getTime())&&!isNaN(Se.getTime())&&te>=Se?y(we=>({...we,endDate:"End Date must be after Start Date"})):p.endDate==="End Date must be after Start Date"&&y(we=>{const Pe={...we};return delete Pe.endDate,Pe})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.startDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.startDate]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(oa,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:B.endDate,onChange:le=>{if(K(te=>({...te,endDate:le.target.value})),p.endDate&&y(te=>{const Se={...te};return delete Se.endDate,Se}),B.startDate&&le.target.value){const te=new Date(B.startDate),Se=new Date(le.target.value);!isNaN(te.getTime())&&!isNaN(Se.getTime())&&te>=Se&&y(we=>({...we,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.endDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.endDate]})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",n.jsx(Oe,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(oa,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:B.expectedCloseDate,onChange:le=>{K(te=>({...te,expectedCloseDate:le.target.value})),p.expectedCloseDate&&y(te=>{const Se={...te};return delete Se.expectedCloseDate,Se})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.expectedCloseDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx(Zn,{className:"w-3 h-3"}),p.expectedCloseDate]})]}),i!=="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"DUE DATE"}),n.jsxs("div",{className:"relative",children:[n.jsx(oa,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),n.jsx("input",{type:"date",value:B.expectedCloseDate,onChange:le=>K(te=>({...te,expectedCloseDate:le.target.value})),placeholder:"dd/mm/yyyy",className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 font-bold placeholder:text-slate-300 [color-scheme:light]"})]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"PRIORITY"}),n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(le=>n.jsx("button",{type:"button",onClick:()=>K({...B,priority:le}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${B.priority===le?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:le.toUpperCase()},le))})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"DESCRIPTION"}),i==="task"?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(Q3,{value:B.description||"",onChange:le=>K(te=>({...te,description:le})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsx("textarea",{placeholder:"Add Context or Notes...",value:B.description,onChange:le=>K(te=>({...te,description:le.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),n.jsxs("label",{className:"cursor-pointer group block mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4 px-5 py-5 bg-slate-50/80 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all shrink-0",children:ee?n.jsx(Nl,{className:"w-6 h-6"}):n.jsx(Qd,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:ee?T?.name||"Image attached":"Attach Image to Note"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),n.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:se,className:"hidden"})]}),ee&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ee,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),n.jsx("button",{type:"button",onClick:()=>{W(""),q(null),V.current&&(V.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:de,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),n.jsxs("button",{type:"submit",disabled:d,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[d?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsx(Ni,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Q&&Q.open&&n.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!re&&J(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Q.duplicates.some(le=>le.matchType==="exact"||le.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),n.jsx("button",{onClick:()=>!re&&J(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:re,children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),n.jsx("p",{className:"font-semibold text-slate-900",children:Q.newContact.name||""}),Q.newContact.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Q.newContact.email}),Q.newContact.phone&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Q.newContact.phone]}),Q.newContact.role&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Q.newContact.role]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Q.duplicates.length>1?"s":""]}),n.jsx("div",{className:"space-y-3",children:Q.duplicates.map((le,te)=>n.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:le.name||""}),le.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:le.email}),n.jsxs("div",{className:"mt-2 space-y-1",children:[le.role?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",le.role]}):Q.newContact.role&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Q.newContact.role," (will be added)"]}),le.phone?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",le.phone]}):Q.newContact.phone&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Q.newContact.phone," (will be added)"]}),!le.companyId&&Q.newContact.companyId&&n.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),le.matchType==="fuzzy"&&le.similarity&&n.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(le.similarity*100),"% name similarity"]}),le.matchType==="exact"&&n.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{const Se={};Q.newContact.name&&(!le.name||le.name.trim()===""||Q.newContact.name.trim()!==le.name.trim())&&(Se.name=Q.newContact.name),Q.newContact.email&&(!le.email||le.email.trim()==="")&&(Se.email=Q.newContact.email),Q.newContact.phone&&(!le.phone||le.phone.trim()==="")&&(Se.phone=Q.newContact.phone),Q.newContact.role&&(!le.role||le.role.trim()==="")&&(Se.role=Q.newContact.role),Q.newContact.companyId&&(!le.companyId||le.companyId.trim()==="")&&(Se.companyId=Q.newContact.companyId),Q.newContact.linkedin&&(!le.linkedin||le.linkedin.trim()==="")&&(Se.linkedin=Q.newContact.linkedin),Object.keys(Se).length>0&&await B7(le.id,Se),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(Se){console.error("[MERGE] Failed:",Se),m(Se.message||"Merge failed"),X(!1)}}},disabled:re,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[re?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Gv,{className:"w-4 h-4"}),"Merge"]})]})},le.id||te))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>J(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:re,children:"Cancel"}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{await rI(Q.newContact),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(le){console.error("[CREATE] Failed:",le),m(le.message||"Failed to create contact"),X(!1),J(null)}}},disabled:re,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[re?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsx(nn,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},Cye=({event:e,selectedDate:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=On(),[o,l]=L.useState(!1),[c,d]=L.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});L.useEffect(()=>{if(e)d({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const f=new Date(t);f.setHours(9,0,0,0);const m=new Date(t);m.setHours(10,0,0,0),d(p=>({...p,start:f.toISOString().substring(0,16),end:m.toISOString().substring(0,16)}))}},[e,t]);const u=async f=>{f.preventDefault(),l(!0);try{e?(await qse(e.id,c),s("Event updated successfully")):(await Use({...c,source:"local"}),s("Event created successfully")),a(),r()}catch(m){i(m.message||"Failed to save event")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(oa,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:f=>d({...c,title:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Is,{className:"w-3 h-3"})," Start"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:f=>d({...c,start:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Is,{className:"w-3 h-3"})," End"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:f=>d({...c,end:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Os,{className:"w-3 h-3"})," Event Type"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(f=>n.jsx("button",{type:"button",onClick:()=>d({...c,type:f}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===f?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:f},f))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(YB,{className:"w-3 h-3"})," Description"]}),n.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:f=>d({...c,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Lu,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},Eye=({currentUser:e})=>{const{showSuccess:t,showError:r}=On(),[a,s]=L.useState(!1),[i,o]=L.useState(!1),[l,c]=L.useState(!1),[d,u]=L.useState(!1);L.useEffect(()=>{const H=setTimeout(()=>u(!0),500);return()=>clearTimeout(H)},[]);const[f,m]=L.useState({type:"bug",title:"",description:""}),[p,y]=L.useState([]),[v,g]=L.useState(!1),[b,w]=L.useState("upload"),[j,N]=L.useState(""),[S,E]=L.useState(!1),_=L.useRef(null),P=L.useRef(p);L.useEffect(()=>{P.current=p},[p]),L.useEffect(()=>()=>{P.current.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)})},[]);const I=(H,Q=1920,J=1080,re=.8)=>new Promise((X,ee)=>{const W=new FileReader;W.onload=T=>{const q=new Image;q.onload=()=>{let V=q.width,B=q.height;V>B?V>Q&&(B=B*Q/V,V=Q):B>J&&(V=V*J/B,B=J);const K=document.createElement("canvas");K.width=V,K.height=B;const oe=K.getContext("2d");if(!oe){ee(new Error("Failed to create canvas context"));return}oe.drawImage(q,0,0,V,B);const me=K.toDataURL("image/jpeg",re);X(me)},q.onerror=()=>ee(new Error("Failed to load image")),q.src=T.target?.result},W.onerror=()=>ee(new Error("Failed to read file")),W.readAsDataURL(H)}),U=async H=>{const Q=H.target.files;if(!(!Q||Q.length===0)){g(!0);try{const J=[];for(let re=0;re<Q.length;re++){const X=Q[re];if(!X.type.startsWith("image/")&&!X.type.startsWith("video/")){r("Please select only image or video files");continue}if(X.size>10*1024*1024){r(`File "${X.name}" is too large. Maximum size is 10MB`);continue}const ee=X.type.startsWith("image/");let W="";ee?W=await I(X,1920,1080,.8):W=URL.createObjectURL(X),J.push({file:X,preview:W,type:ee?"image":"video",source:"file"})}y(re=>[...re,...J]),_.current&&(_.current.value="")}catch(J){r(J.message||"Failed to process file")}finally{g(!1)}}},C=H=>new Promise(Q=>{const J=new Image,re=document.createElement("video"),X=[".jpg",".jpeg",".png",".gif",".webp",".svg"],ee=[".mp4",".mov",".avi",".webm",".mkv"],W=H.toLowerCase(),T=X.some(V=>W.includes(V))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),q=ee.some(V=>W.includes(V))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!T&&!q?(J.onload=()=>Q(!0),J.onerror=()=>{re.onloadedmetadata=()=>Q(!0),re.onerror=()=>Q(!1),re.src=H},J.src=H):Q(!0)}),O=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}E(!0);try{if(!await C(j.trim())){r("URL does not appear to be a valid image or video");return}const Q=j.toLowerCase(),J=Q.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Q.includes("image")||!Q.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Q.includes("video"),re={url:j.trim(),preview:j.trim(),type:J?"image":"video",source:"url"};y(X=>[...X,re]),N(""),t("URL added successfully")}catch(H){r(H.message||"Failed to validate URL")}finally{E(!1)}},R=H=>{const Q=p[H];Q.source==="file"&&Q.type==="video"&&Q.preview.startsWith("blob:")&&URL.revokeObjectURL(Q.preview),y(J=>J.filter((re,X)=>X!==H))},z=async H=>{if(H.preventDefault(),!(!f.title||!f.description)){o(!0);try{const Q=p.filter(W=>W.source==="url"),J=p.filter(W=>W.source==="file"),re=Q.length>0?Q[0].url:"",X=await Promise.all(J.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((T,q)=>{const V=new FileReader;V.onload=()=>{T({type:"video",data:V.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},V.onerror=q,V.readAsDataURL(W.file)}))),ee={...f,userId:e?.id||"anonymous",status:"planned",url:re||void 0,attachments:X.length>0?X:[]};await X7(ee),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),m({type:"bug",title:"",description:""}),p.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),y([])},2e3)}catch(Q){console.error("[FEEDBACK] Submission failed:",Q),r(`Submission error: ${Q.message||"Registry error"}`)}finally{o(!1)}}};return n.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[n.jsx("button",{onClick:()=>s(!a),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${d?"transition-all duration-300":""} ${a?"translate-x-full":""}`,children:n.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),n.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${d?"transition-all duration-500 ease-out":""} ${a?"translate-x-0":"translate-x-full"}`,style:d?void 0:{transform:a?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?n.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:n.jsx(gn,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):n.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[n.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:n.jsx(lo,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),n.jsx("button",{onClick:()=>{s(!1),p.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)}),y([]),N("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]}),n.jsxs("form",{onSubmit:z,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Hv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:n.jsx(Mi,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:n.jsx($j,{className:"w-3 h-3"}),label:"Idea"}].map(H=>n.jsxs("button",{type:"button",onClick:()=>m({...f,type:H.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${f.type===H.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[H.icon," ",H.label]},H.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:f.title,onChange:H=>m({...f,title:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),n.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:f.description,onChange:H=>m({...f,description:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),n.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[n.jsxs("button",{type:"button",onClick:()=>w("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(Qd,{className:"w-3 h-3"}),"Upload"]}),n.jsxs("button",{type:"button",onClick:()=>w("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(i0,{className:"w-3 h-3"}),"URL"]})]}),b==="upload"&&n.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?n.jsx(yt,{className:"w-5 h-5 animate-spin"}):n.jsx(Qd,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),n.jsx("input",{ref:_,type:"file",accept:"image/*,video/*",multiple:!0,onChange:U,disabled:v,className:"hidden"})]}),b==="url"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:H=>N(H.target.value),onKeyDown:H=>{H.key==="Enter"&&!S&&j.trim()&&(H.preventDefault(),O())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),n.jsx("button",{type:"button",onClick:O,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?n.jsxs(n.Fragment,{children:[n.jsx(yt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(i0,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),p.length>0&&n.jsx("div",{className:"space-y-2",children:p.map((H,Q)=>n.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:H.type==="image"?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:H.preview,alt:`Attachment ${Q+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:J=>{J.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Nl,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Image URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/1024).toFixed(1)} KB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>R(Q),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:n.jsx(fp,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(fp,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Video URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/(1024*1024)).toFixed(2)} MB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>R(Q),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})},Q))})]}),n.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?n.jsx(yt,{className:"w-4 h-4 animate-spin"}):n.jsx(Gl,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},Tye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Vk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(JB,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Enter your professional email address in the login portal"}),n.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),n.jsx("li",{children:"Enter the 6-digit code sent to your email"}),n.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Check your spam or junk folder"}),n.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),n.jsx("li",{children:'Click "Request New Code" on the verification screen'}),n.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),n.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),n.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),n.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),n.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Qa,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's IT administrator"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),Oye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Vk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(mx,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),n.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsx("div",{children:n.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(ea,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),n.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),n.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),n.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),n.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(uU,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"To authenticate your access and maintain your account"}),n.jsx("li",{children:"To personalize your experience and provide relevant features"}),n.jsx("li",{children:"To provide customer support and respond to your inquiries"}),n.jsx("li",{children:"To improve our services, features, and user experience"}),n.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),n.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),n.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),n.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),n.jsx("li",{children:"Access controls and role-based permissions"}),n.jsx("li",{children:"Regular security audits and monitoring"}),n.jsx("li",{children:"Restricted access to authorized personnel only"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),n.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Authentication and session management"}),n.jsx("li",{children:"Remembering your preferences"}),n.jsx("li",{children:"Security and fraud prevention"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),n.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),n.jsx("li",{children:"When required by law or to protect our rights and safety"}),n.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),n.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),n.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),n.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),n.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),n.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Qa,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),Pye=new wie({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),Iye=({children:e})=>n.jsx(Nie,{client:Pye,children:e}),Dye=()=>{const[e,t]=L.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,a]=L.useState(!1),[s,i]=L.useState(null),[o,l]=L.useState(!1),[c,d]=L.useState(!1),[u,f]=L.useState(()=>{try{const Ue=localStorage.getItem("navGroupsOpen");if(Ue){const Oe=JSON.parse(Ue);return{...Kv.reduce((le,te)=>({...le,[te.id]:!0}),{}),system:!0,...Oe}}}catch{}return{...Kv.reduce((Ue,Oe)=>({...Ue,[Oe.id]:!0}),{}),system:!0}}),m=Ue=>{f(Oe=>{const le={...Oe,[Ue]:!Oe[Ue]};try{localStorage.setItem("navGroupsOpen",JSON.stringify(le))}catch{}return le})},[p,y]=L.useState(""),[v,g]=L.useState(!1),[b,w]=L.useState({isOpen:!1,type:"deal"}),[j,N]=L.useState({isOpen:!1,event:null}),[S,E]=L.useState([]),[_,P]=L.useState(!1),[I,U]=L.useState(!1),C=S.filter(Ue=>!Ue.read).length,O=L.useRef(null),R=L.useCallback(async(Ue=!1)=>{try{const Oe=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!Oe?.id)return;Ue&&U(!0);const le=await V7(Oe.id,20),te=le?.data||le||[],Se=(Array.isArray(te)?te:[]).map(we=>{let Pe="Just now";if(we.createdAt){const fe=new Date(we.createdAt),Ee=new Date().getTime()-fe.getTime(),Ye=Math.floor(Ee/6e4),xe=Math.floor(Ee/36e5),ve=Math.floor(Ee/864e5);Ye<1?Pe="Just now":Ye<60?Pe=`${Ye}m ago`:xe<24?Pe=`${xe}h ago`:ve<7?Pe=`${ve}d ago`:Pe=fe.toLocaleDateString()}return{id:we.id,userId:we.userId,type:we.type||"system",title:we.title,message:we.message,timestamp:Pe,read:!!we.read,link:we.link||void 0}});E(Se)}catch(Oe){console.error("[NOTIFICATIONS] Failed to load notifications",Oe)}finally{Ue&&U(!1)}},[s]),z=L.useRef(null),H=L.useRef(!1);L.useEffect(()=>{const Ue=s||JSON.parse(localStorage.getItem("user_data")||"null");if(Ue?.id)return z.current=null,H.current=!1,n1(async()=>{const{getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le}=await import("./notificationWebSocket-mFjRd7uM.js");return{getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le}},[]).then(({getNotificationWebSocket:Oe,disconnectNotificationWebSocket:le})=>{if(H.current){le();return}const te=Oe(Ue.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(we=>{console.log("[NOTIFICATIONS] Browser notification permission:",we)});const Se=we=>{const Pe={id:we.id,userId:we.userId,type:we.type||"system",title:we.title||"Notification",message:we.message||"",timestamp:"Just now",read:!1,link:we.link};if(E(fe=>fe.find(Ee=>Ee.id===we.id)?fe:[Pe,...fe].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const fe=new window.Notification(we.title||"Notification",{body:we.message||"",icon:"/favicon.ico",tag:we.id,requireInteraction:!1});fe.onclick=()=>{window.focus(),we.link&&(window.location.href=we.link),fe.close()},setTimeout(()=>fe.close(),5e3)}catch(fe){console.error("[NOTIFICATIONS] Error showing browser notification:",fe)}};te.on("notification",Se),te.connect().catch(we=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",we)}),z.current=()=>{te.off("notification",Se),le()}}),()=>{H.current=!0,z.current?.(),z.current=null}},[s]),L.useEffect(()=>{R();const Ue=setInterval(()=>{R(!1)},3e4),Oe=()=>{R(!0)};return window.addEventListener("refresh-notifications",Oe),()=>{clearInterval(Ue),window.removeEventListener("refresh-notifications",Oe)}},[R]),L.useEffect(()=>{_&&R(!0)},[_,R]),L.useEffect(()=>{const Ue=()=>{const Oe=window.innerWidth<1024;l(Oe),a(!Oe)};return Ue(),window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[]);const[Q,J]=L.useState(null),[re,X]=L.useState(null);L.useEffect(()=>{const Ue=new URLSearchParams(window.location.search),Oe=Ue.get("tab"),le=Ue.get("company"),te=Ue.get("promptOnboarding"),Se=Ue.get("deal"),we=Ue.get("templateId");if(Oe&&["dashboard","schedule","crm","pipeline","projects","playbooks","tasks","invoices","roadmap","users","settings","integrations","satisfaction","inbox","expenses","budget","contracts","data-hygiene","products-services"].includes(Oe)){t(Oe),localStorage.setItem("activeTab",Oe),Oe==="satisfaction"&&le&&J(le),Oe==="playbooks"&&te==="true"&&X({dealId:Se||void 0,templateId:we||void 0}),Ue.delete("tab"),Ue.delete("company"),Ue.delete("promptOnboarding"),Ue.delete("deal"),Ue.delete("templateId");const fe=Ue.toString()?`${window.location.pathname}?${Ue.toString()}`:window.location.pathname;window.history.replaceState({},"",fe)}},[]),L.useEffect(()=>{const Ue=Oe=>{O.current&&!O.current.contains(Oe.target)&&P(!1)};return document.addEventListener("mousedown",Ue),()=>document.removeEventListener("mousedown",Ue)},[]);const ee=async()=>{await Sne(),window.location.reload()},W=async Ue=>{const Oe=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Oe){E(le=>le.map(te=>te.id===Ue?{...te,read:!0}:te));try{await G7(Ue,Oe)}catch{}}},T=async()=>{const Ue=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Ue){E(Oe=>Oe.map(le=>({...le,read:!0})));try{await K7(Ue)}catch{}}},q=(Ue,Oe)=>{w({isOpen:!0,type:Ue,stage:Oe||void 0})},V=(Ue,Oe)=>{N({isOpen:!0,event:null,selectedDate:Oe})},B=()=>{N({isOpen:!1,event:null})},K=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},oe=typeof window<"u"?window.location.pathname:"",[me,se]=L.useState(()=>oe==="/privacy-policy"||oe==="/privacy"?"privacy":oe==="/help"?"help":oe.startsWith("/survey/")?"survey":null),de=oe.startsWith("/survey/")?oe.replace("/survey/",""):null;if(L.useEffect(()=>{const Ue=window.location.pathname;Ue==="/privacy-policy"||Ue==="/privacy"?se("privacy"):Ue==="/help"?se("help"):Ue.startsWith("/survey/")?se("survey"):se(null)},[]),L.useEffect(()=>{const Ue=()=>{const Oe=window.location.pathname;Oe==="/privacy-policy"||Oe==="/privacy"?se("privacy"):Oe==="/help"?se("help"):Oe.startsWith("/survey/")?se("survey"):se(null)};return window.addEventListener("popstate",Ue),()=>window.removeEventListener("popstate",Ue)},[]),me==="privacy")return n.jsx(Oye,{onBack:()=>{window.history.pushState({},"","/"),se(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(me==="help")return n.jsx(Tye,{onBack:()=>{window.history.pushState({},"","/"),se(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(me==="survey"&&de)return n.jsx(zoe,{surveyId:de});const Re=()=>{switch(e){case"dashboard":return n.jsx(gI,{onNavigate:t});case"schedule":return n.jsx(nye,{currentUser:s,onNavigate:t,onNewEvent:()=>V()});case"crm":return n.jsx(boe,{onNavigate:t,onAddCompany:()=>q("company"),onAddContact:()=>q("contact"),externalSearchQuery:p});case"pipeline":return n.jsx(Noe,{onNavigate:t,onNewDeal:Ue=>q("deal",Ue),currentUser:s});case"projects":return n.jsx(Ioe,{onNavigate:t,onCreateProject:()=>q("project"),currentUser:s});case"playbooks":return n.jsx(Uoe,{onNavigate:t,currentUser:s,playbookPrompt:re,onClearPlaybookPrompt:()=>X(null)});case"satisfaction":return n.jsx(qoe,{onNavigate:t,companyIdFromUrl:Q,onClearCompanyIdFromUrl:()=>J(null)});case"tasks":return n.jsx(Jve,{onCreateTask:()=>q("task"),currentUser:s});case"invoices":return n.jsx(Y1e,{onCreateInvoice:()=>q("invoice"),currentUser:s});case"expenses":return n.jsx(mye,{currentUser:s});case"budget":return n.jsx(xye,{currentUser:s});case"contracts":return n.jsx(gye,{currentUser:s});case"inbox":return n.jsx(rB,{currentUser:s});case"roadmap":return n.jsx(pye,{currentUser:s,onNavigate:t});case"users":return n.jsx(Q1e,{});case"settings":return n.jsx(tye,{currentUser:s,onUserUpdate:i});case"data-hygiene":return n.jsx(rye,{currentUser:s});case"integrations":return n.jsx(aye,{});case"products-services":return n.jsx(vye,{});case"notifications":return n.jsx(Nye,{currentUser:s,onNavigate:t});default:return n.jsx(gI,{onNavigate:t})}},he=Ue=>{t(Ue),localStorage.setItem("activeTab",Ue),y(""),o&&a(!1)};return L.useEffect(()=>{const Ue=setTimeout(()=>d(!0),400);return()=>clearTimeout(Ue)},[]),n.jsx(Iye,{children:n.jsx(Kse,{children:n.jsx(bye,{onUserLoaded:i,children:n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&n.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>a(!1)}),n.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[n.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&n.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&n.jsx("button",{onClick:()=>a(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2 flex flex-col min-h-0",children:[kD.map(Ue=>n.jsxs("button",{onClick:()=>he(Ue.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===Ue.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:Ue.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap",children:Ue.label})]},Ue.id)),Kv.map(Ue=>{const Oe=u[Ue.id]!==!1;return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>m(Ue.id),"aria-expanded":Oe,"aria-label":`${Oe?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${Ue.items.some(le=>le.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Oe?n.jsx(zs,{className:"w-4 h-4"}):n.jsx(ya,{className:"w-4 h-4"})})]})]}),Oe&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:Ue.items.map(le=>n.jsxs("button",{onClick:()=>he(le.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===le.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:le.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:le.label})]},le.id))})]},Ue.id)})]}),n.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0 space-y-0.5",children:[(()=>{const Ue=SD,Oe=u[Ue.id]!==!1,le=Ue.items.filter(te=>te.id!=="data-hygiene"||s?.role==="Admin");return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>m(Ue.id),"aria-expanded":Oe,"aria-label":`${Oe?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${le.some(te=>te.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Oe?n.jsx(zs,{className:"w-4 h-4"}):n.jsx(ya,{className:"w-4 h-4"})})]})]}),Oe&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:le.map(te=>n.jsxs("button",{onClick:()=>he(te.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===te.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:te.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:te.label})]},te.id))})]})})(),n.jsxs("button",{onClick:()=>g(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[n.jsx(ND,{className:"w-5 h-5 shrink-0"}),r&&n.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[n.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[n.jsx("button",{onClick:()=>a(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(hU,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{className:"relative group hidden sm:block",children:[n.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),n.jsx("input",{type:"text",placeholder:"Search Current View...",value:p,onChange:Ue=>y(Ue.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[n.jsxs("div",{className:"relative",ref:O,children:[n.jsxs("button",{onClick:()=>P(!_),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${_?"bg-slate-100":""}`,children:[n.jsx(Ey,{className:`w-5 h-5 transition-colors ${C>0?"text-indigo-600":"text-slate-600"} ${I?"animate-pulse":""}`}),C>0&&n.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:n.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${I?"animate-pulse":""}`,children:C})})]}),_&&n.jsx(wye,{notifications:S,onMarkAsRead:W,onMarkAllAsRead:T,onRefresh:()=>R(!0),isRefreshing:I,onClose:()=>P(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),n.jsxs("button",{onClick:()=>q("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(nn,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),n.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:n.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:Re()})}),n.jsx(Eye,{currentUser:s})]}),b.isOpen&&n.jsx(Aye,{type:b.type,stage:b.stage,onClose:()=>w(Ue=>({...Ue,isOpen:!1})),onSuccess:()=>{(b.type==="contact"||b.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),b.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),b.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),b.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):b.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),j.isOpen&&n.jsx(Cye,{event:j.event,selectedDate:j.selectedDate,onClose:B,onSuccess:K}),v&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>g(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),n.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{onClick:ee,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function Lye(){const[e,t]=L.useState("loading"),[r,a]=L.useState(!1);L.useEffect(()=>{const c=Date.now();let d=!1;const u=()=>{if(d)return;const p=Date.now()-c,y=Math.max(0,850-p);setTimeout(()=>{d||t("fading")},y)},f=()=>{if(d)return;(document.fonts?.ready??Promise.resolve()).then(()=>{d||setTimeout(u,1100)}).catch(()=>setTimeout(u,1100))};if(document.readyState==="complete")return f(),()=>{d=!0};window.addEventListener("load",f);const m=setTimeout(()=>{d||t("fading")},4500);return()=>{d=!0,window.removeEventListener("load",f),clearTimeout(m)}},[]),L.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),L.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>a(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return n.jsxs(n.Fragment,{children:[(e==="fading"||e==="done")&&n.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:n.jsx(Dye,{})}),s&&n.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[n.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const nB=document.getElementById("root");if(!nB)throw new Error("Could not find root element to mount to");const Fye=HB.createRoot(nB);Fye.render(n.jsx(ut.StrictMode,{children:n.jsx(Lye,{})}));export{Ta as _,tv as c,Oa as g};
