(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wb={exports:{}},fm={},Vb={exports:{}},Dn={};var D_;function gB(){if(D_)return Dn;D_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=d&&W[d]||W["@@iterator"],typeof W=="function"?W:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||p}g.prototype.isReactComponent={},g.prototype.setState=function(W,O){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,O,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function b(){}b.prototype=g.prototype;function w(W,O,z){this.props=W,this.context=O,this.refs=v,this.updater=z||p}var j=w.prototype=new b;j.constructor=w,y(j,g.prototype),j.isPureReactComponent=!0;var N=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(W,O,z){var H,R={},K=null,le=null;if(O!=null)for(H in O.ref!==void 0&&(le=O.ref),O.key!==void 0&&(K=""+O.key),O)S.call(O,H)&&!A.hasOwnProperty(H)&&(R[H]=O[H]);var he=arguments.length-2;if(he===1)R.children=z;else if(1<he){for(var ie=Array(he),ce=0;ce<he;ce++)ie[ce]=arguments[ce+2];R.children=ie}if(W&&W.defaultProps)for(H in he=W.defaultProps,he)R[H]===void 0&&(R[H]=he[H]);return{$$typeof:e,type:W,key:K,ref:le,props:R,_owner:P.current}}function I(W,O){return{$$typeof:e,type:W.type,key:O,ref:W.ref,props:W.props,_owner:W._owner}}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function C(W){var O={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(z){return O[z]})}var E=/\/+/g;function M(W,O){return typeof W=="object"&&W!==null&&W.key!=null?C(""+W.key):O.toString(36)}function q(W,O,z,H,R){var K=typeof W;(K==="undefined"||K==="boolean")&&(W=null);var le=!1;if(W===null)le=!0;else switch(K){case"string":case"number":le=!0;break;case"object":switch(W.$$typeof){case e:case t:le=!0}}if(le)return le=W,R=R(le),W=H===""?"."+M(le,0):H,N(R)?(z="",W!=null&&(z=W.replace(E,"$&/")+"/"),q(R,O,z,"",function(ce){return ce})):R!=null&&(B(R)&&(R=I(R,z+(!R.key||le&&le.key===R.key?"":(""+R.key).replace(E,"$&/")+"/")+W)),O.push(R)),1;if(le=0,H=H===""?".":H+":",N(W))for(var he=0;he<W.length;he++){K=W[he];var ie=H+M(K,he);le+=q(K,O,z,ie,R)}else if(ie=m(W),typeof ie=="function")for(W=ie.call(W),he=0;!(K=W.next()).done;)K=K.value,ie=H+M(K,he++),le+=q(K,O,z,ie,R);else if(K==="object")throw O=String(W),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return le}function G(W,O,z){if(W==null)return W;var H=[],R=0;return q(W,H,"","",function(K){return O.call(z,K,R++)}),H}function Z(W){if(W._status===-1){var O=W._result;O=O(),O.then(function(z){(W._status===0||W._status===-1)&&(W._status=1,W._result=z)},function(z){(W._status===0||W._status===-1)&&(W._status=2,W._result=z)}),W._status===-1&&(W._status=0,W._result=O)}if(W._status===1)return W._result.default;throw W._result}var te={current:null},ae={transition:null},Q={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:ae,ReactCurrentOwner:P};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Dn.Children={map:G,forEach:function(W,O,z){G(W,function(){O.apply(this,arguments)},z)},count:function(W){var O=0;return G(W,function(){O++}),O},toArray:function(W){return G(W,function(O){return O})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Dn.Component=g,Dn.Fragment=r,Dn.Profiler=s,Dn.PureComponent=w,Dn.StrictMode=n,Dn.Suspense=c,Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Dn.act=ee,Dn.cloneElement=function(W,O,z){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var H=y({},W.props),R=W.key,K=W.ref,le=W._owner;if(O!=null){if(O.ref!==void 0&&(K=O.ref,le=P.current),O.key!==void 0&&(R=""+O.key),W.type&&W.type.defaultProps)var he=W.type.defaultProps;for(ie in O)S.call(O,ie)&&!A.hasOwnProperty(ie)&&(H[ie]=O[ie]===void 0&&he!==void 0?he[ie]:O[ie])}var ie=arguments.length-2;if(ie===1)H.children=z;else if(1<ie){he=Array(ie);for(var ce=0;ce<ie;ce++)he[ce]=arguments[ce+2];H.children=he}return{$$typeof:e,type:W.type,key:R,ref:K,props:H,_owner:le}},Dn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Dn.createElement=T,Dn.createFactory=function(W){var O=T.bind(null,W);return O.type=W,O},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(W){return{$$typeof:l,render:W}},Dn.isValidElement=B,Dn.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:Z}},Dn.memo=function(W,O){return{$$typeof:u,type:W,compare:O===void 0?null:O}},Dn.startTransition=function(W){var O=ae.transition;ae.transition={};try{W()}finally{ae.transition=O}},Dn.unstable_act=ee,Dn.useCallback=function(W,O){return te.current.useCallback(W,O)},Dn.useContext=function(W){return te.current.useContext(W)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(W){return te.current.useDeferredValue(W)},Dn.useEffect=function(W,O){return te.current.useEffect(W,O)},Dn.useId=function(){return te.current.useId()},Dn.useImperativeHandle=function(W,O,z){return te.current.useImperativeHandle(W,O,z)},Dn.useInsertionEffect=function(W,O){return te.current.useInsertionEffect(W,O)},Dn.useLayoutEffect=function(W,O){return te.current.useLayoutEffect(W,O)},Dn.useMemo=function(W,O){return te.current.useMemo(W,O)},Dn.useReducer=function(W,O,z){return te.current.useReducer(W,O,z)},Dn.useRef=function(W){return te.current.useRef(W)},Dn.useState=function(W){return te.current.useState(W)},Dn.useSyncExternalStore=function(W,O,z){return te.current.useSyncExternalStore(W,O,z)},Dn.useTransition=function(){return te.current.useTransition()},Dn.version="18.3.1",Dn}var L_;function xy(){return L_||(L_=1,Vb.exports=gB()),Vb.exports}var F_;function vB(){if(F_)return fm;F_=1;var e=xy(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var f,d={},m=null,p=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(p=c.ref);for(f in c)n.call(c,f)&&!i.hasOwnProperty(f)&&(d[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)d[f]===void 0&&(d[f]=c[f]);return{$$typeof:t,type:l,key:m,ref:p,props:d,_owner:s.current}}return fm.Fragment=r,fm.jsx=o,fm.jsxs=o,fm}var M_;function yB(){return M_||(M_=1,Wb.exports=vB()),Wb.exports}var a=yB(),U=xy();const at=Ea(U);var Vg={},Gb={exports:{}},zl={},Kb={exports:{}},Xb={};var R_;function bB(){return R_||(R_=1,(function(e){function t(ae,Q){var ee=ae.length;ae.push(Q);e:for(;0<ee;){var W=ee-1>>>1,O=ae[W];if(0<s(O,Q))ae[W]=Q,ae[ee]=O,ee=W;else break e}}function r(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var Q=ae[0],ee=ae.pop();if(ee!==Q){ae[0]=ee;e:for(var W=0,O=ae.length,z=O>>>1;W<z;){var H=2*(W+1)-1,R=ae[H],K=H+1,le=ae[K];if(0>s(R,ee))K<O&&0>s(le,R)?(ae[W]=le,ae[K]=ee,W=K):(ae[W]=R,ae[H]=ee,W=H);else if(K<O&&0>s(le,ee))ae[W]=le,ae[K]=ee,W=K;else break e}}return Q}function s(ae,Q){var ee=ae.sortIndex-Q.sortIndex;return ee!==0?ee:ae.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,m=3,p=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ae){for(var Q=r(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=ae)n(u),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=r(u)}}function N(ae){if(v=!1,j(ae),!y)if(r(c)!==null)y=!0,Z(S);else{var Q=r(u);Q!==null&&te(N,Q.startTime-ae)}}function S(ae,Q){y=!1,v&&(v=!1,b(T),T=-1),p=!0;var ee=m;try{for(j(Q),d=r(c);d!==null&&(!(d.expirationTime>Q)||ae&&!C());){var W=d.callback;if(typeof W=="function"){d.callback=null,m=d.priorityLevel;var O=W(d.expirationTime<=Q);Q=e.unstable_now(),typeof O=="function"?d.callback=O:d===r(c)&&n(c),j(Q)}else n(c);d=r(c)}if(d!==null)var z=!0;else{var H=r(u);H!==null&&te(N,H.startTime-Q),z=!1}return z}finally{d=null,m=ee,p=!1}}var P=!1,A=null,T=-1,I=5,B=-1;function C(){return!(e.unstable_now()-B<I)}function E(){if(A!==null){var ae=e.unstable_now();B=ae;var Q=!0;try{Q=A(!0,ae)}finally{Q?M():(P=!1,A=null)}}else P=!1}var M;if(typeof w=="function")M=function(){w(E)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=E,M=function(){G.postMessage(null)}}else M=function(){g(E,0)};function Z(ae){A=ae,P||(P=!0,M())}function te(ae,Q){T=g(function(){ae(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,Z(S))},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ee=m;m=Q;try{return ae()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ae,Q){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ee=m;m=ae;try{return Q()}finally{m=ee}},e.unstable_scheduleCallback=function(ae,Q,ee){var W=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,ae={id:f++,callback:Q,priorityLevel:ae,startTime:ee,expirationTime:O,sortIndex:-1},ee>W?(ae.sortIndex=ee,t(u,ae),r(c)===null&&ae===r(u)&&(v?(b(T),T=-1):v=!0,te(N,ee-W))):(ae.sortIndex=O,t(c,ae),y||p||(y=!0,Z(S))),ae},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(ae){var Q=m;return function(){var ee=m;m=Q;try{return ae.apply(this,arguments)}finally{m=ee}}}})(Xb)),Xb}var B_;function wB(){return B_||(B_=1,Kb.exports=bB()),Kb.exports}var U_;function NB(){if(U_)return zl;U_=1;var e=xy(),t=wB();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)n.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(h){return c.call(d,h)?!0:c.call(f,h)?!1:u.test(h)?d[h]=!0:(f[h]=!0,!1)}function p(h,x,k,L){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return L?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,x,k,L){if(x===null||typeof x>"u"||p(h,x,k,L))return!0;if(L)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,L,X,se,ke){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=L,this.attributeNamespace=X,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=se,this.removeEmptyString=ke}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(b,w);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,L){var X=g.hasOwnProperty(x)?g[x]:null;(X!==null?X.type!==0:L||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(y(x,k,X,L)&&(k=null),L||X===null?m(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):X.mustUseProperty?h[X.propertyName]=k===null?X.type===3?!1:"":k:(x=X.attributeName,L=X.attributeNamespace,k===null?h.removeAttribute(x):(X=X.type,k=X===3||X===4&&k===!0?"":""+k,L?h.setAttributeNS(L,x,k):h.setAttribute(x,k))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),P=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Q(h){return h===null||typeof h!="object"?null:(h=ae&&h[ae]||h["@@iterator"],typeof h=="function"?h:null)}var ee=Object.assign,W;function O(h){if(W===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+h}var z=!1;function H(h,x){if(!h||z)return"";z=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(St){var L=St}Reflect.construct(h,[],x)}else{try{x.call()}catch(St){L=St}h.call(x.prototype)}else{try{throw Error()}catch(St){L=St}h()}}catch(St){if(St&&L&&typeof St.stack=="string"){for(var X=St.stack.split(`
`),se=L.stack.split(`
`),ke=X.length-1,We=se.length-1;1<=ke&&0<=We&&X[ke]!==se[We];)We--;for(;1<=ke&&0<=We;ke--,We--)if(X[ke]!==se[We]){if(ke!==1||We!==1)do if(ke--,We--,0>We||X[ke]!==se[We]){var rt=`
`+X[ke].replace(" at new "," at ");return h.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",h.displayName)),rt}while(1<=ke&&0<=We);break}}}finally{z=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?O(h):""}function R(h){switch(h.tag){case 5:return O(h.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return h=H(h.type,!1),h;case 11:return h=H(h.type.render,!1),h;case 1:return h=H(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case A:return"Fragment";case P:return"Portal";case I:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case q:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case C:return(h.displayName||"Context")+".Consumer";case B:return(h._context.displayName||"Context")+".Provider";case E:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case G:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Z:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function le(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function he(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ie(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ce(h){var x=ie(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),L=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var X=k.get,se=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return X.call(this)},set:function(ke){L=""+ke,se.call(this,ke)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return L},setValue:function(ke){L=""+ke},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function De(h){h._valueTracker||(h._valueTracker=ce(h))}function ne(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),L="";return h&&(L=ie(h)?h.checked?"true":"false":h.value),h=L,h!==k?(x.setValue(h),!0):!1}function Ue(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Ce(h,x){var k=x.checked;return ee({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function de(h,x){var k=x.defaultValue==null?"":x.defaultValue,L=x.checked!=null?x.checked:x.defaultChecked;k=he(x.value!=null?x.value:k),h._wrapperState={initialChecked:L,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Y(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function ve(h,x){Y(h,x);var k=he(x.value),L=x.type;if(k!=null)L==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(L==="submit"||L==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Ae(h,x.type,k):x.hasOwnProperty("defaultValue")&&Ae(h,x.type,he(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function ye(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var L=x.type;if(!(L!=="submit"&&L!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Ae(h,x,k){(x!=="number"||Ue(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var pe=Array.isArray;function ue(h,x,k,L){if(h=h.options,x){x={};for(var X=0;X<k.length;X++)x["$"+k[X]]=!0;for(k=0;k<h.length;k++)X=x.hasOwnProperty("$"+h[k].value),h[k].selected!==X&&(h[k].selected=X),X&&L&&(h[k].defaultSelected=!0)}else{for(k=""+he(k),x=null,X=0;X<h.length;X++){if(h[X].value===k){h[X].selected=!0,L&&(h[X].defaultSelected=!0);return}x!==null||h[X].disabled||(x=h[X])}x!==null&&(x.selected=!0)}}function Pe(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ne(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(pe(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:he(k)}}function Re(h,x){var k=he(x.value),L=he(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),L!=null&&(h.defaultValue=""+L)}function nt(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function xt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?xt(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Me,vt=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,L,X){MSApp.execUnsafeLocalFunction(function(){return h(x,k,L,X)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Me.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function ut(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(lt).forEach(function(h){pr.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),lt[x]=lt[h]})});function rr(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||lt.hasOwnProperty(h)&&lt[h]?(""+x).trim():x+"px"}function ft(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var L=k.indexOf("--")===0,X=rr(k,x[k],L);k==="float"&&(k="cssFloat"),L?h.setProperty(k,X):h[k]=X}}var $t=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(h,x){if(x){if($t[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function $e(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function jr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Yt=null,Fr=null,Cr=null;function lr(h){if(h=tc(h)){if(typeof Yt!="function")throw Error(r(280));var x=h.stateNode;x&&(x=qc(x),Yt(h.stateNode,h.type,x))}}function Ut(h){Fr?Cr?Cr.push(h):Cr=[h]:Fr=h}function wr(){if(Fr){var h=Fr,x=Cr;if(Cr=Fr=null,lr(h),x)for(h=0;h<x.length;h++)lr(x[h])}}function Er(h,x){return h(x)}function Yr(){}var sn=!1;function Wn(h,x,k){if(sn)return h(x,k);sn=!0;try{return Er(h,x,k)}finally{sn=!1,(Fr!==null||Cr!==null)&&(Yr(),wr())}}function or(h,x){var k=h.stateNode;if(k===null)return null;var L=qc(k);if(L===null)return null;k=L[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(h=h.type,L=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!L;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var Vn=!1;if(l)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Vn=!1}function Ke(h,x,k,L,X,se,ke,We,rt){var St=Array.prototype.slice.call(arguments,3);try{x.apply(k,St)}catch(Jt){this.onError(Jt)}}var Nt=!1,Vt=null,re=!1,me=null,be={onError:function(h){Nt=!0,Vt=h}};function _e(h,x,k,L,X,se,ke,We,rt){Nt=!1,Vt=null,Ke.apply(be,arguments)}function Ee(h,x,k,L,X,se,ke,We,rt){if(_e.apply(this,arguments),Nt){if(Nt){var St=Vt;Nt=!1,Vt=null}else throw Error(r(198));re||(re=!0,me=St)}}function Oe(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function Xe(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function ct(h){if(Oe(h)!==h)throw Error(r(188))}function Ve(h){var x=h.alternate;if(!x){if(x=Oe(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,L=x;;){var X=k.return;if(X===null)break;var se=X.alternate;if(se===null){if(L=X.return,L!==null){k=L;continue}break}if(X.child===se.child){for(se=X.child;se;){if(se===k)return ct(X),h;if(se===L)return ct(X),x;se=se.sibling}throw Error(r(188))}if(k.return!==L.return)k=X,L=se;else{for(var ke=!1,We=X.child;We;){if(We===k){ke=!0,k=X,L=se;break}if(We===L){ke=!0,L=X,k=se;break}We=We.sibling}if(!ke){for(We=se.child;We;){if(We===k){ke=!0,k=se,L=X;break}if(We===L){ke=!0,L=se,k=X;break}We=We.sibling}if(!ke)throw Error(r(189))}}if(k.alternate!==L)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function Je(h){return h=Ve(h),h!==null?He(h):null}function He(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=He(h);if(x!==null)return x;h=h.sibling}return null}var Le=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,ht=t.unstable_shouldYield,Pt=t.unstable_requestPaint,Mt=t.unstable_now,vr=t.unstable_getCurrentPriorityLevel,zr=t.unstable_ImmediatePriority,on=t.unstable_UserBlockingPriority,Mn=t.unstable_NormalPriority,ps=t.unstable_LowPriority,xn=t.unstable_IdlePriority,wa=null,Pn=null;function pa(h){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(wa,h,void 0,(h.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:Ta,ma=Math.log,Ws=Math.LN2;function Ta(h){return h>>>=0,h===0?32:31-(ma(h)/Ws|0)|0}var qe=64,It=4194304;function Ct(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function sr(h,x){var k=h.pendingLanes;if(k===0)return 0;var L=0,X=h.suspendedLanes,se=h.pingedLanes,ke=k&268435455;if(ke!==0){var We=ke&~X;We!==0?L=Ct(We):(se&=ke,se!==0&&(L=Ct(se)))}else ke=k&~X,ke!==0?L=Ct(ke):se!==0&&(L=Ct(se));if(L===0)return 0;if(x!==0&&x!==L&&(x&X)===0&&(X=L&-L,se=x&-x,X>=se||X===16&&(se&4194240)!==0))return x;if((L&4)!==0&&(L|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=L;0<x;)k=31-sa(x),X=1<<k,L|=h[k],x&=~X;return L}function Nr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(h,x){for(var k=h.suspendedLanes,L=h.pingedLanes,X=h.expirationTimes,se=h.pendingLanes;0<se;){var ke=31-sa(se),We=1<<ke,rt=X[ke];rt===-1?((We&k)===0||(We&L)!==0)&&(X[ke]=Nr(We,x)):rt<=x&&(h.expiredLanes|=We),se&=~We}}function _r(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function kn(){var h=qe;return qe<<=1,(qe&4194240)===0&&(qe=64),h}function In(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function nr(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-sa(x),h[x]=k}function xr(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var L=h.eventTimes;for(h=h.expirationTimes;0<k;){var X=31-sa(k),se=1<<X;x[X]=0,L[X]=-1,h[X]=-1,k&=~se}}function Dt(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var L=31-sa(k),X=1<<L;X&x|h[L]&x&&(h[L]|=x),k&=~X}}var Ar=0;function Ht(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Gn,Rn,cn,er,Sn,Na=!1,un=[],gn=null,$r=null,Gr=null,Wt=new Map,En=new Map,Kn=[],ms="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Be(h,x){switch(h){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Wt.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(x.pointerId)}}function gr(h,x,k,L,X,se){return h===null||h.nativeEvent!==se?(h={blockedOn:x,domEventName:k,eventSystemFlags:L,nativeEvent:se,targetContainers:[X]},x!==null&&(x=tc(x),x!==null&&Rn(x)),h):(h.eventSystemFlags|=L,x=h.targetContainers,X!==null&&x.indexOf(X)===-1&&x.push(X),h)}function Tr(h,x,k,L,X){switch(x){case"focusin":return gn=gr(gn,h,x,k,L,X),!0;case"dragenter":return $r=gr($r,h,x,k,L,X),!0;case"mouseover":return Gr=gr(Gr,h,x,k,L,X),!0;case"pointerover":var se=X.pointerId;return Wt.set(se,gr(Wt.get(se)||null,h,x,k,L,X)),!0;case"gotpointercapture":return se=X.pointerId,En.set(se,gr(En.get(se)||null,h,x,k,L,X)),!0}return!1}function kr(h){var x=Uc(h.target);if(x!==null){var k=Oe(x);if(k!==null){if(x=k.tag,x===13){if(x=Xe(k),x!==null){h.blockedOn=x,Sn(h.priority,function(){cn(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Jr(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=_c(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var L=new k.constructor(k.type,k);bt=L,k.target.dispatchEvent(L),bt=null}else return x=tc(k),x!==null&&Rn(x),h.blockedOn=k,!1;x.shift()}return!0}function $n(h,x,k){Jr(h)&&k.delete(x)}function xs(){Na=!1,gn!==null&&Jr(gn)&&(gn=null),$r!==null&&Jr($r)&&($r=null),Gr!==null&&Jr(Gr)&&(Gr=null),Wt.forEach($n),En.forEach($n)}function us(h,x){h.blockedOn===x&&(h.blockedOn=null,Na||(Na=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xs)))}function Ds(h){function x(X){return us(X,h)}if(0<un.length){us(un[0],h);for(var k=1;k<un.length;k++){var L=un[k];L.blockedOn===h&&(L.blockedOn=null)}}for(gn!==null&&us(gn,h),$r!==null&&us($r,h),Gr!==null&&us(Gr,h),Wt.forEach(x),En.forEach(x),k=0;k<Kn.length;k++)L=Kn[k],L.blockedOn===h&&(L.blockedOn=null);for(;0<Kn.length&&(k=Kn[0],k.blockedOn===null);)kr(k),k.blockedOn===null&&Kn.shift()}var oi=N.ReactCurrentBatchConfig,kc=!0;function Sc(h,x,k,L){var X=Ar,se=oi.transition;oi.transition=null;try{Ar=1,Cl(h,x,k,L)}finally{Ar=X,oi.transition=se}}function Ld(h,x,k,L){var X=Ar,se=oi.transition;oi.transition=null;try{Ar=4,Cl(h,x,k,L)}finally{Ar=X,oi.transition=se}}function Cl(h,x,k,L){if(kc){var X=_c(h,x,k,L);if(X===null)Dc(h,x,L,Yl,k),Be(h,L);else if(Tr(X,h,x,k,L))L.stopPropagation();else if(Be(h,L),x&4&&-1<ms.indexOf(h)){for(;X!==null;){var se=tc(X);if(se!==null&&Gn(se),se=_c(h,x,k,L),se===null&&Dc(h,x,L,Yl,k),se===X)break;X=se}X!==null&&L.stopPropagation()}else Dc(h,x,L,null,k)}}var Yl=null;function _c(h,x,k,L){if(Yl=null,h=jr(L),h=Uc(h),h!==null)if(x=Oe(h),x===null)h=null;else if(k=x.tag,k===13){if(h=Xe(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return Yl=h,null}function hu(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vr()){case zr:return 1;case on:return 4;case Mn:case ps:return 16;case xn:return 536870912;default:return 16}default:return 16}}var Go=null,ki=null,ro=null;function Ac(){if(ro)return ro;var h,x=ki,k=x.length,L,X="value"in Go?Go.value:Go.textContent,se=X.length;for(h=0;h<k&&x[h]===X[h];h++);var ke=k-h;for(L=1;L<=ke&&x[k-L]===X[se-L];L++);return ro=X.slice(h,1<L?1-L:void 0)}function vo(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function gs(){return!0}function El(){return!1}function vs(h){function x(k,L,X,se,ke){this._reactName=k,this._targetInst=X,this.type=L,this.nativeEvent=se,this.target=ke,this.currentTarget=null;for(var We in h)h.hasOwnProperty(We)&&(k=h[We],this[We]=k?k(se):se[We]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?gs:El,this.isPropagationStopped=El,this}return ee(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),x}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=vs(Ko),yo=ee({},Ko,{view:0,detail:0}),Tl=vs(yo),Xo,pu,Yo,Jo=ee({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Yo&&(Yo&&h.type==="mousemove"?(Xo=h.screenX-Yo.screenX,pu=h.screenY-Yo.screenY):pu=Xo=0,Yo=h),Xo)},movementY:function(h){return"movementY"in h?h.movementY:pu}}),Ec=vs(Jo),Xa=ee({},Jo,{dataTransfer:0}),w0=vs(Xa),mu=ee({},yo,{relatedTarget:0}),Ol=vs(mu),xu=ee({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),no=vs(xu),kf=ee({},Ko,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),V=vs(kf),we=ee({},Ko,{data:0}),ze=vs(we),Ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ot={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Ot[h])?!!x[h]:!1}function br(){return Kt}var Rr=ee({},yo,{key:function(h){if(h.key){var x=Ze[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=vo(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?pt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(h){return h.type==="keypress"?vo(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?vo(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Kr=vs(Rr),Zr=ee({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hn=vs(Zr),Oa=ee({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),za=vs(Oa),Ya=ee({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vs=vs(Ya),ys=ee({},Jo,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Qo=vs(ys),li=[9,13,27,32],bs=l&&"CompositionEvent"in window,ao=null;l&&"documentMode"in document&&(ao=document.documentMode);var Ja=l&&"TextEvent"in window&&!ao,Tc=l&&(!bs||ao&&8<ao&&11>=ao),wn=" ",ds=!1;function Pa(h,x){switch(h){case"keyup":return li.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ws(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var pn=!1;function Ls(h,x){switch(h){case"compositionend":return ws(x);case"keypress":return x.which!==32?null:(ds=!0,wn);case"textInput":return h=x.data,h===wn&&ds?null:h;default:return null}}function Ia(h,x){if(pn)return h==="compositionend"||!bs&&Pa(h,x)?(h=Ac(),ro=ki=Go=null,pn=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Tc&&x.locale!=="ko"?null:x.data;default:return null}}var Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ns(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!Ui[h.type]:x==="textarea"}function fa(h,x,k,L){Ut(L),x=N0(x,"onChange"),0<x.length&&(k=new Cc("onChange","change",null,k,L),h.push({event:k,listeners:x}))}var js=null,qi=null;function Pl(h){qd(h,0)}function ci(h){var x=rc(h);if(ne(x))return h}function Jl(h,x){if(h==="change")return x}var Fd=!1;if(l){var Oc;if(l){var Il="oninput"in document;if(!Il){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),Il=typeof Ql.oninput=="function"}Oc=Il}else Oc=!1;Fd=Oc&&(!document.documentMode||9<document.documentMode)}function ui(){js&&(js.detachEvent("onpropertychange",Fs),qi=js=null)}function Fs(h){if(h.propertyName==="value"&&ci(qi)){var x=[];fa(x,qi,h,jr(h)),Wn(Pl,x)}}function Zo(h,x,k){h==="focusin"?(ui(),js=x,qi=k,js.attachEvent("onpropertychange",Fs)):h==="focusout"&&ui()}function el(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ci(qi)}function bo(h,x){if(h==="click")return ci(x)}function tl(h,x){if(h==="input"||h==="change")return ci(x)}function di(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var _n=typeof Object.is=="function"?Object.is:di;function $i(h,x){if(_n(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),L=Object.keys(x);if(k.length!==L.length)return!1;for(L=0;L<k.length;L++){var X=k[L];if(!c.call(x,X)||!_n(h[X],x[X]))return!1}return!0}function Qa(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ms(h,x){var k=Qa(h);h=0;for(var L;k;){if(k.nodeType===3){if(L=h+k.textContent.length,h<=x&&L>=x)return{node:k,offset:x-h};h=L}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Qa(k)}}function rl(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?rl(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function Md(){for(var h=window,x=Ue();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=Ue(h.document)}return x}function Dl(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function so(h){var x=Md(),k=h.focusedElem,L=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&rl(k.ownerDocument.documentElement,k)){if(L!==null&&Dl(k)){if(x=L.start,h=L.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var X=k.textContent.length,se=Math.min(L.start,X);L=L.end===void 0?se:Math.min(L.end,X),!h.extend&&se>L&&(X=L,L=se,se=X),X=Ms(k,se);var ke=Ms(k,L);X&&ke&&(h.rangeCount!==1||h.anchorNode!==X.node||h.anchorOffset!==X.offset||h.focusNode!==ke.node||h.focusOffset!==ke.offset)&&(x=x.createRange(),x.setStart(X.node,X.offset),h.removeAllRanges(),se>L?(h.addRange(x),h.extend(ke.node,ke.offset)):(x.setEnd(ke.node,ke.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Zl=l&&"documentMode"in document&&11>=document.documentMode,zi=null,Da=null,Si=null,nl=!1;function ec(h,x,k){var L=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;nl||zi==null||zi!==Ue(L)||(L=zi,"selectionStart"in L&&Dl(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),Si&&$i(Si,L)||(Si=L,L=N0(Da,"onSelect"),0<L.length&&(x=new Cc("onSelect","select",null,x,k),h.push({event:x,listeners:L}),x.target=zi)))}function io(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var ks={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionend:io("Transition","TransitionEnd")},fi={},Xn={};l&&(Xn=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Qn(h){if(fi[h])return fi[h];if(!ks[h])return h;var x=ks[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in Xn)return fi[h]=x[k];return h}var xa=Qn("animationend"),Za=Qn("animationiteration"),al=Qn("animationstart"),Xu=Qn("transitionend"),Pc=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sl(h,x){Pc.set(h,x),i(x,[h])}for(var Yu=0;Yu<Rd.length;Yu++){var Gs=Rd[Yu],wo=Gs.toLowerCase(),Bd=Gs[0].toUpperCase()+Gs.slice(1);sl(wo,"on"+Bd)}sl(xa,"onAnimationEnd"),sl(Za,"onAnimationIteration"),sl(al,"onAnimationStart"),sl("dblclick","onDoubleClick"),sl("focusin","onFocus"),sl("focusout","onBlur"),sl(Xu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ud=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ic));function Ju(h,x,k){var L=h.type||"unknown-event";h.currentTarget=k,Ee(L,x,void 0,h),h.currentTarget=null}function qd(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var L=h[k],X=L.event;L=L.listeners;e:{var se=void 0;if(x)for(var ke=L.length-1;0<=ke;ke--){var We=L[ke],rt=We.instance,St=We.currentTarget;if(We=We.listener,rt!==se&&X.isPropagationStopped())break e;Ju(X,We,St),se=rt}else for(ke=0;ke<L.length;ke++){if(We=L[ke],rt=We.instance,St=We.currentTarget,We=We.listener,rt!==se&&X.isPropagationStopped())break e;Ju(X,We,St),se=rt}}}if(re)throw h=me,re=!1,me=null,h}function ia(h,x){var k=x[Hi];k===void 0&&(k=x[Hi]=new Set);var L=h+"__bubble";k.has(L)||(Qu(x,h,2,!1),k.add(L))}function gu(h,x,k){var L=0;x&&(L|=4),Qu(k,h,L,x)}var vu="_reactListening"+Math.random().toString(36).slice(2);function Ll(h){if(!h[vu]){h[vu]=!0,n.forEach(function(k){k!=="selectionchange"&&(Ud.has(k)||gu(k,!1,h),gu(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[vu]||(x[vu]=!0,gu("selectionchange",!1,x))}}function Qu(h,x,k,L){switch(hu(x)){case 1:var X=Sc;break;case 4:X=Ld;break;default:X=Cl}k=X.bind(null,x,k,h),X=void 0,!Vn||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(X=!0),L?X!==void 0?h.addEventListener(x,k,{capture:!0,passive:X}):h.addEventListener(x,k,!0):X!==void 0?h.addEventListener(x,k,{passive:X}):h.addEventListener(x,k,!1)}function Dc(h,x,k,L,X){var se=L;if((x&1)===0&&(x&2)===0&&L!==null)e:for(;;){if(L===null)return;var ke=L.tag;if(ke===3||ke===4){var We=L.stateNode.containerInfo;if(We===X||We.nodeType===8&&We.parentNode===X)break;if(ke===4)for(ke=L.return;ke!==null;){var rt=ke.tag;if((rt===3||rt===4)&&(rt=ke.stateNode.containerInfo,rt===X||rt.nodeType===8&&rt.parentNode===X))return;ke=ke.return}for(;We!==null;){if(ke=Uc(We),ke===null)return;if(rt=ke.tag,rt===5||rt===6){L=se=ke;continue e}We=We.parentNode}}L=L.return}Wn(function(){var St=se,Jt=jr(k),Zt=[];e:{var Xt=Pc.get(h);if(Xt!==void 0){var Sr=Cc,Dr=h;switch(h){case"keypress":if(vo(k)===0)break e;case"keydown":case"keyup":Sr=Kr;break;case"focusin":Dr="focus",Sr=Ol;break;case"focusout":Dr="blur",Sr=Ol;break;case"beforeblur":case"afterblur":Sr=Ol;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Sr=Ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Sr=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Sr=za;break;case xa:case Za:case al:Sr=no;break;case Xu:Sr=Vs;break;case"scroll":Sr=Tl;break;case"wheel":Sr=Qo;break;case"copy":case"cut":case"paste":Sr=V;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Sr=hn}var Mr=(x&4)!==0,Qs=!Mr&&h==="scroll",yt=Mr?Xt!==null?Xt+"Capture":null:Xt;Mr=[];for(var ot=St,jt;ot!==null;){jt=ot;var ar=jt.stateNode;if(jt.tag===5&&ar!==null&&(jt=ar,yt!==null&&(ar=or(ot,yt),ar!=null&&Mr.push(Zu(ot,ar,jt)))),Qs)break;ot=ot.return}0<Mr.length&&(Xt=new Sr(Xt,Dr,null,k,Jt),Zt.push({event:Xt,listeners:Mr}))}}if((x&7)===0){e:{if(Xt=h==="mouseover"||h==="pointerover",Sr=h==="mouseout"||h==="pointerout",Xt&&k!==bt&&(Dr=k.relatedTarget||k.fromElement)&&(Uc(Dr)||Dr[Ss]))break e;if((Sr||Xt)&&(Xt=Jt.window===Jt?Jt:(Xt=Jt.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,Sr?(Dr=k.relatedTarget||k.toElement,Sr=St,Dr=Dr?Uc(Dr):null,Dr!==null&&(Qs=Oe(Dr),Dr!==Qs||Dr.tag!==5&&Dr.tag!==6)&&(Dr=null)):(Sr=null,Dr=St),Sr!==Dr)){if(Mr=Ec,ar="onMouseLeave",yt="onMouseEnter",ot="mouse",(h==="pointerout"||h==="pointerover")&&(Mr=hn,ar="onPointerLeave",yt="onPointerEnter",ot="pointer"),Qs=Sr==null?Xt:rc(Sr),jt=Dr==null?Xt:rc(Dr),Xt=new Mr(ar,ot+"leave",Sr,k,Jt),Xt.target=Qs,Xt.relatedTarget=jt,ar=null,Uc(Jt)===St&&(Mr=new Mr(yt,ot+"enter",Dr,k,Jt),Mr.target=jt,Mr.relatedTarget=Qs,ar=Mr),Qs=ar,Sr&&Dr)t:{for(Mr=Sr,yt=Dr,ot=0,jt=Mr;jt;jt=Lc(jt))ot++;for(jt=0,ar=yt;ar;ar=Lc(ar))jt++;for(;0<ot-jt;)Mr=Lc(Mr),ot--;for(;0<jt-ot;)yt=Lc(yt),jt--;for(;ot--;){if(Mr===yt||yt!==null&&Mr===yt.alternate)break t;Mr=Lc(Mr),yt=Lc(yt)}Mr=null}else Mr=null;Sr!==null&&Sh(Zt,Xt,Sr,Mr,!1),Dr!==null&&Qs!==null&&Sh(Zt,Qs,Dr,Mr,!0)}}e:{if(Xt=St?rc(St):window,Sr=Xt.nodeName&&Xt.nodeName.toLowerCase(),Sr==="select"||Sr==="input"&&Xt.type==="file")var Br=Jl;else if(Ns(Xt))if(Fd)Br=tl;else{Br=el;var Wr=Zo}else(Sr=Xt.nodeName)&&Sr.toLowerCase()==="input"&&(Xt.type==="checkbox"||Xt.type==="radio")&&(Br=bo);if(Br&&(Br=Br(h,St))){fa(Zt,Br,k,Jt);break e}Wr&&Wr(h,Xt,St),h==="focusout"&&(Wr=Xt._wrapperState)&&Wr.controlled&&Xt.type==="number"&&Ae(Xt,"number",Xt.value)}switch(Wr=St?rc(St):window,h){case"focusin":(Ns(Wr)||Wr.contentEditable==="true")&&(zi=Wr,Da=St,Si=null);break;case"focusout":Si=Da=zi=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,ec(Zt,k,Jt);break;case"selectionchange":if(Zl)break;case"keydown":case"keyup":ec(Zt,k,Jt)}var Vr;if(bs)e:{switch(h){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else pn?Pa(h,k)&&(ln="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(ln="onCompositionStart");ln&&(Tc&&k.locale!=="ko"&&(pn||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&pn&&(Vr=Ac()):(Go=Jt,ki="value"in Go?Go.value:Go.textContent,pn=!0)),Wr=N0(St,ln),0<Wr.length&&(ln=new ze(ln,h,null,k,Jt),Zt.push({event:ln,listeners:Wr}),Vr?ln.data=Vr:(Vr=ws(k),Vr!==null&&(ln.data=Vr)))),(Vr=Ja?Ls(h,k):Ia(h,k))&&(St=N0(St,"onBeforeInput"),0<St.length&&(Jt=new ze("onBeforeInput","beforeinput",null,k,Jt),Zt.push({event:Jt,listeners:St}),Jt.data=Vr))}qd(Zt,x)})}function Zu(h,x,k){return{instance:h,listener:x,currentTarget:k}}function N0(h,x){for(var k=x+"Capture",L=[];h!==null;){var X=h,se=X.stateNode;X.tag===5&&se!==null&&(X=se,se=or(h,k),se!=null&&L.unshift(Zu(h,se,X)),se=or(h,x),se!=null&&L.push(Zu(h,se,X))),h=h.return}return L}function Lc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Sh(h,x,k,L,X){for(var se=x._reactName,ke=[];k!==null&&k!==L;){var We=k,rt=We.alternate,St=We.stateNode;if(rt!==null&&rt===L)break;We.tag===5&&St!==null&&(We=St,X?(rt=or(k,se),rt!=null&&ke.unshift(Zu(k,rt,We))):X||(rt=or(k,se),rt!=null&&ke.push(Zu(k,rt,We)))),k=k.return}ke.length!==0&&h.push({event:x,listeners:ke})}var yu=/\r\n?/g,Fc=/\u0000|\uFFFD/g;function Mc(h){return(typeof h=="string"?h:""+h).replace(yu,`
`).replace(Fc,"")}function Sf(h,x,k){if(x=Mc(x),Mc(h)!==x&&k)throw Error(r(425))}function Rc(){}var il=null,Bc=null;function _f(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,_h=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,am=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(h){return bu.resolve(null).then(h).catch(sm)}:ed;function sm(h){setTimeout(function(){throw h})}function td(h,x){var k=x,L=0;do{var X=k.nextSibling;if(h.removeChild(k),X&&X.nodeType===8)if(k=X.data,k==="/$"){if(L===0){h.removeChild(X),Ds(x);return}L--}else k!=="$"&&k!=="$?"&&k!=="$!"||L++;k=X}while(k);Ds(x)}function _i(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function hi(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),Fl="__reactFiber$"+Ai,wu="__reactProps$"+Ai,Ss="__reactContainer$"+Ai,Hi="__reactEvents$"+Ai,Ah="__reactListeners$"+Ai,Ch="__reactHandles$"+Ai;function Uc(h){var x=h[Fl];if(x)return x;for(var k=h.parentNode;k;){if(x=k[Ss]||k[Fl]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=hi(h);h!==null;){if(k=h[Fl])return k;h=hi(h)}return x}h=k,k=h.parentNode}return null}function tc(h){return h=h[Fl]||h[Ss],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function rc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function qc(h){return h[wu]||null}var Af=[],nc=-1;function No(h){return{current:h}}function Yn(h){0>nc||(h.current=Af[nc],Af[nc]=null,nc--)}function oa(h,x){nc++,Af[nc]=h.current,h.current=x}var ac={},Ks=No(ac),Xs=No(!1),ga=ac;function jo(h,x){var k=h.type.contextTypes;if(!k)return ac;var L=h.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===x)return L.__reactInternalMemoizedMaskedChildContext;var X={},se;for(se in k)X[se]=x[se];return L&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=X),X}function Ha(h){return h=h.childContextTypes,h!=null}function Cf(){Yn(Xs),Yn(Ks)}function Ef(h,x,k){if(Ks.current!==ac)throw Error(r(168));oa(Ks,x),oa(Xs,k)}function $c(h,x,k){var L=h.stateNode;if(x=x.childContextTypes,typeof L.getChildContext!="function")return k;L=L.getChildContext();for(var X in L)if(!(X in x))throw Error(r(108,le(h)||"Unknown",X));return ee({},k,L)}function ol(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ac,ga=Ks.current,oa(Ks,h),oa(Xs,Xs.current),!0}function Eh(h,x,k){var L=h.stateNode;if(!L)throw Error(r(169));k?(h=$c(h,x,ga),L.__reactInternalMemoizedMergedChildContext=h,Yn(Xs),Yn(Ks),oa(Ks,h)):Yn(Xs),oa(Xs,k)}var Ci=null,$d=!1,_=!1;function F(h){Ci===null?Ci=[h]:Ci.push(h)}function J(h){$d=!0,F(h)}function oe(){if(!_&&Ci!==null){_=!0;var h=0,x=Ar;try{var k=Ci;for(Ar=1;h<k.length;h++){var L=k[h];do L=L(!0);while(L!==null)}Ci=null,$d=!1}catch(X){throw Ci!==null&&(Ci=Ci.slice(h+1)),Le(zr,oe),X}finally{Ar=x,_=!1}}return null}var xe=[],je=0,Se=null,Te=0,Ie=[],Fe=0,Qe=null,gt=1,dt="";function st(h,x){xe[je++]=Te,xe[je++]=Se,Se=h,Te=x}function qt(h,x,k){Ie[Fe++]=gt,Ie[Fe++]=dt,Ie[Fe++]=Qe,Qe=h;var L=gt;h=dt;var X=32-sa(L)-1;L&=~(1<<X),k+=1;var se=32-sa(x)+X;if(30<se){var ke=X-X%5;se=(L&(1<<ke)-1).toString(32),L>>=ke,X-=ke,gt=1<<32-sa(x)+X|k<<X|L,dt=se+h}else gt=1<<se|k<<X|L,dt=h}function At(h){h.return!==null&&(st(h,1),qt(h,1,0))}function Ye(h){for(;h===Se;)Se=xe[--je],xe[je]=null,Te=xe[--je],xe[je]=null;for(;h===Qe;)Qe=Ie[--Fe],Ie[Fe]=null,dt=Ie[--Fe],Ie[Fe]=null,gt=Ie[--Fe],Ie[Fe]=null}var et=null,Et=null,Tt=!1,Lt=null;function yr(h,x){var k=Hc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function cr(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,et=h,Et=_i(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,et=h,Et=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Qe!==null?{id:gt,overflow:dt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Hc(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,et=h,Et=null,!0):!1;default:return!1}}function qr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function dr(h){if(Tt){var x=Et;if(x){var k=x;if(!cr(h,x)){if(qr(h))throw Error(r(418));x=_i(k.nextSibling);var L=et;x&&cr(h,x)?yr(L,k):(h.flags=h.flags&-4097|2,Tt=!1,et=h)}}else{if(qr(h))throw Error(r(418));h.flags=h.flags&-4097|2,Tt=!1,et=h}}}function Bn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;et=h}function zn(h){if(h!==et)return!1;if(!Tt)return Bn(h),Tt=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!_f(h.type,h.memoizedProps)),x&&(x=Et)){if(qr(h))throw Nn(),Error(r(418));for(;x;)yr(h,x),x=_i(x.nextSibling)}if(Bn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){Et=_i(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}Et=null}}else Et=et?_i(h.stateNode.nextSibling):null;return!0}function Nn(){for(var h=Et;h;)h=_i(h.nextSibling)}function dn(){Et=et=null,Tt=!1}function ta(h){Lt===null?Lt=[h]:Lt.push(h)}var Un=N.ReactCurrentBatchConfig;function Xr(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var L=k.stateNode}if(!L)throw Error(r(147,h));var X=L,se=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===se?x.ref:(x=function(ke){var We=X.refs;ke===null?delete We[se]:We[se]=ke},x._stringRef=se,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function La(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Ei(h){var x=h._init;return x(h._payload)}function es(h){function x(yt,ot){if(h){var jt=yt.deletions;jt===null?(yt.deletions=[ot],yt.flags|=16):jt.push(ot)}}function k(yt,ot){if(!h)return null;for(;ot!==null;)x(yt,ot),ot=ot.sibling;return null}function L(yt,ot){for(yt=new Map;ot!==null;)ot.key!==null?yt.set(ot.key,ot):yt.set(ot.index,ot),ot=ot.sibling;return yt}function X(yt,ot){return yt=Rf(yt,ot),yt.index=0,yt.sibling=null,yt}function se(yt,ot,jt){return yt.index=jt,h?(jt=yt.alternate,jt!==null?(jt=jt.index,jt<ot?(yt.flags|=2,ot):jt):(yt.flags|=2,ot)):(yt.flags|=1048576,ot)}function ke(yt){return h&&yt.alternate===null&&(yt.flags|=2),yt}function We(yt,ot,jt,ar){return ot===null||ot.tag!==6?(ot=Bb(jt,yt.mode,ar),ot.return=yt,ot):(ot=X(ot,jt),ot.return=yt,ot)}function rt(yt,ot,jt,ar){var Br=jt.type;return Br===A?Jt(yt,ot,jt.props.children,ar,jt.key):ot!==null&&(ot.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===Z&&Ei(Br)===ot.type)?(ar=X(ot,jt.props),ar.ref=Xr(yt,ot,jt),ar.return=yt,ar):(ar=Mg(jt.type,jt.key,jt.props,null,yt.mode,ar),ar.ref=Xr(yt,ot,jt),ar.return=yt,ar)}function St(yt,ot,jt,ar){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==jt.containerInfo||ot.stateNode.implementation!==jt.implementation?(ot=Ub(jt,yt.mode,ar),ot.return=yt,ot):(ot=X(ot,jt.children||[]),ot.return=yt,ot)}function Jt(yt,ot,jt,ar,Br){return ot===null||ot.tag!==7?(ot=E0(jt,yt.mode,ar,Br),ot.return=yt,ot):(ot=X(ot,jt),ot.return=yt,ot)}function Zt(yt,ot,jt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ot=Bb(""+ot,yt.mode,jt),ot.return=yt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case S:return jt=Mg(ot.type,ot.key,ot.props,null,yt.mode,jt),jt.ref=Xr(yt,null,ot),jt.return=yt,jt;case P:return ot=Ub(ot,yt.mode,jt),ot.return=yt,ot;case Z:var ar=ot._init;return Zt(yt,ar(ot._payload),jt)}if(pe(ot)||Q(ot))return ot=E0(ot,yt.mode,jt,null),ot.return=yt,ot;La(yt,ot)}return null}function Xt(yt,ot,jt,ar){var Br=ot!==null?ot.key:null;if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Br!==null?null:We(yt,ot,""+jt,ar);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case S:return jt.key===Br?rt(yt,ot,jt,ar):null;case P:return jt.key===Br?St(yt,ot,jt,ar):null;case Z:return Br=jt._init,Xt(yt,ot,Br(jt._payload),ar)}if(pe(jt)||Q(jt))return Br!==null?null:Jt(yt,ot,jt,ar,null);La(yt,jt)}return null}function Sr(yt,ot,jt,ar,Br){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return yt=yt.get(jt)||null,We(ot,yt,""+ar,Br);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case S:return yt=yt.get(ar.key===null?jt:ar.key)||null,rt(ot,yt,ar,Br);case P:return yt=yt.get(ar.key===null?jt:ar.key)||null,St(ot,yt,ar,Br);case Z:var Wr=ar._init;return Sr(yt,ot,jt,Wr(ar._payload),Br)}if(pe(ar)||Q(ar))return yt=yt.get(jt)||null,Jt(ot,yt,ar,Br,null);La(ot,ar)}return null}function Dr(yt,ot,jt,ar){for(var Br=null,Wr=null,Vr=ot,ln=ot=0,Ki=null;Vr!==null&&ln<jt.length;ln++){Vr.index>ln?(Ki=Vr,Vr=null):Ki=Vr.sibling;var la=Xt(yt,Vr,jt[ln],ar);if(la===null){Vr===null&&(Vr=Ki);break}h&&Vr&&la.alternate===null&&x(yt,Vr),ot=se(la,ot,ln),Wr===null?Br=la:Wr.sibling=la,Wr=la,Vr=Ki}if(ln===jt.length)return k(yt,Vr),Tt&&st(yt,ln),Br;if(Vr===null){for(;ln<jt.length;ln++)Vr=Zt(yt,jt[ln],ar),Vr!==null&&(ot=se(Vr,ot,ln),Wr===null?Br=Vr:Wr.sibling=Vr,Wr=Vr);return Tt&&st(yt,ln),Br}for(Vr=L(yt,Vr);ln<jt.length;ln++)Ki=Sr(Vr,yt,ln,jt[ln],ar),Ki!==null&&(h&&Ki.alternate!==null&&Vr.delete(Ki.key===null?ln:Ki.key),ot=se(Ki,ot,ln),Wr===null?Br=Ki:Wr.sibling=Ki,Wr=Ki);return h&&Vr.forEach(function(Bf){return x(yt,Bf)}),Tt&&st(yt,ln),Br}function Mr(yt,ot,jt,ar){var Br=Q(jt);if(typeof Br!="function")throw Error(r(150));if(jt=Br.call(jt),jt==null)throw Error(r(151));for(var Wr=Br=null,Vr=ot,ln=ot=0,Ki=null,la=jt.next();Vr!==null&&!la.done;ln++,la=jt.next()){Vr.index>ln?(Ki=Vr,Vr=null):Ki=Vr.sibling;var Bf=Xt(yt,Vr,la.value,ar);if(Bf===null){Vr===null&&(Vr=Ki);break}h&&Vr&&Bf.alternate===null&&x(yt,Vr),ot=se(Bf,ot,ln),Wr===null?Br=Bf:Wr.sibling=Bf,Wr=Bf,Vr=Ki}if(la.done)return k(yt,Vr),Tt&&st(yt,ln),Br;if(Vr===null){for(;!la.done;ln++,la=jt.next())la=Zt(yt,la.value,ar),la!==null&&(ot=se(la,ot,ln),Wr===null?Br=la:Wr.sibling=la,Wr=la);return Tt&&st(yt,ln),Br}for(Vr=L(yt,Vr);!la.done;ln++,la=jt.next())la=Sr(Vr,yt,ln,la.value,ar),la!==null&&(h&&la.alternate!==null&&Vr.delete(la.key===null?ln:la.key),ot=se(la,ot,ln),Wr===null?Br=la:Wr.sibling=la,Wr=la);return h&&Vr.forEach(function(xB){return x(yt,xB)}),Tt&&st(yt,ln),Br}function Qs(yt,ot,jt,ar){if(typeof jt=="object"&&jt!==null&&jt.type===A&&jt.key===null&&(jt=jt.props.children),typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case S:e:{for(var Br=jt.key,Wr=ot;Wr!==null;){if(Wr.key===Br){if(Br=jt.type,Br===A){if(Wr.tag===7){k(yt,Wr.sibling),ot=X(Wr,jt.props.children),ot.return=yt,yt=ot;break e}}else if(Wr.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===Z&&Ei(Br)===Wr.type){k(yt,Wr.sibling),ot=X(Wr,jt.props),ot.ref=Xr(yt,Wr,jt),ot.return=yt,yt=ot;break e}k(yt,Wr);break}else x(yt,Wr);Wr=Wr.sibling}jt.type===A?(ot=E0(jt.props.children,yt.mode,ar,jt.key),ot.return=yt,yt=ot):(ar=Mg(jt.type,jt.key,jt.props,null,yt.mode,ar),ar.ref=Xr(yt,ot,jt),ar.return=yt,yt=ar)}return ke(yt);case P:e:{for(Wr=jt.key;ot!==null;){if(ot.key===Wr)if(ot.tag===4&&ot.stateNode.containerInfo===jt.containerInfo&&ot.stateNode.implementation===jt.implementation){k(yt,ot.sibling),ot=X(ot,jt.children||[]),ot.return=yt,yt=ot;break e}else{k(yt,ot);break}else x(yt,ot);ot=ot.sibling}ot=Ub(jt,yt.mode,ar),ot.return=yt,yt=ot}return ke(yt);case Z:return Wr=jt._init,Qs(yt,ot,Wr(jt._payload),ar)}if(pe(jt))return Dr(yt,ot,jt,ar);if(Q(jt))return Mr(yt,ot,jt,ar);La(yt,jt)}return typeof jt=="string"&&jt!==""||typeof jt=="number"?(jt=""+jt,ot!==null&&ot.tag===6?(k(yt,ot.sibling),ot=X(ot,jt),ot.return=yt,yt=ot):(k(yt,ot),ot=Bb(jt,yt.mode,ar),ot.return=yt,yt=ot),ke(yt)):k(yt,ot)}return Qs}var ts=es(!0),An=es(!1),pi=No(null),_s=null,Fa=null,As=null;function fs(){As=Fa=_s=null}function Ys(h){var x=pi.current;Yn(pi),h._currentValue=x}function ko(h,x,k){for(;h!==null;){var L=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,L!==null&&(L.childLanes|=x)):L!==null&&(L.childLanes&x)!==x&&(L.childLanes|=x),h===k)break;h=h.return}}function Ma(h,x){_s=h,As=Fa=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(Ul=!0),h.firstContext=null)}function Wa(h){var x=h._currentValue;if(As!==h)if(h={context:h,memoizedValue:x,next:null},Fa===null){if(_s===null)throw Error(r(308));Fa=h,_s.dependencies={lanes:0,firstContext:h}}else Fa=Fa.next=h;return x}var Wi=null;function sc(h){Wi===null?Wi=[h]:Wi.push(h)}function ic(h,x,k,L){var X=x.interleaved;return X===null?(k.next=k,sc(x)):(k.next=X.next,X.next=k),x.interleaved=k,Zn(h,L)}function Zn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Ml=!1;function Tf(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j0(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function So(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function _o(h,x,k){var L=h.updateQueue;if(L===null)return null;if(L=L.shared,(ra&2)!==0){var X=L.pending;return X===null?x.next=x:(x.next=X.next,X.next=x),L.pending=x,Zn(h,k)}return X=L.interleaved,X===null?(x.next=x,sc(L)):(x.next=X.next,X.next=x),L.interleaved=x,Zn(h,k)}function Nu(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var L=x.lanes;L&=h.pendingLanes,k|=L,x.lanes=k,Dt(h,k)}}function Ao(h,x){var k=h.updateQueue,L=h.alternate;if(L!==null&&(L=L.updateQueue,k===L)){var X=null,se=null;if(k=k.firstBaseUpdate,k!==null){do{var ke={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};se===null?X=se=ke:se=se.next=ke,k=k.next}while(k!==null);se===null?X=se=x:se=se.next=x}else X=se=x;k={baseState:L.baseState,firstBaseUpdate:X,lastBaseUpdate:se,shared:L.shared,effects:L.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function ll(h,x,k,L){var X=h.updateQueue;Ml=!1;var se=X.firstBaseUpdate,ke=X.lastBaseUpdate,We=X.shared.pending;if(We!==null){X.shared.pending=null;var rt=We,St=rt.next;rt.next=null,ke===null?se=St:ke.next=St,ke=rt;var Jt=h.alternate;Jt!==null&&(Jt=Jt.updateQueue,We=Jt.lastBaseUpdate,We!==ke&&(We===null?Jt.firstBaseUpdate=St:We.next=St,Jt.lastBaseUpdate=rt))}if(se!==null){var Zt=X.baseState;ke=0,Jt=St=rt=null,We=se;do{var Xt=We.lane,Sr=We.eventTime;if((L&Xt)===Xt){Jt!==null&&(Jt=Jt.next={eventTime:Sr,lane:0,tag:We.tag,payload:We.payload,callback:We.callback,next:null});e:{var Dr=h,Mr=We;switch(Xt=x,Sr=k,Mr.tag){case 1:if(Dr=Mr.payload,typeof Dr=="function"){Zt=Dr.call(Sr,Zt,Xt);break e}Zt=Dr;break e;case 3:Dr.flags=Dr.flags&-65537|128;case 0:if(Dr=Mr.payload,Xt=typeof Dr=="function"?Dr.call(Sr,Zt,Xt):Dr,Xt==null)break e;Zt=ee({},Zt,Xt);break e;case 2:Ml=!0}}We.callback!==null&&We.lane!==0&&(h.flags|=64,Xt=X.effects,Xt===null?X.effects=[We]:Xt.push(We))}else Sr={eventTime:Sr,lane:Xt,tag:We.tag,payload:We.payload,callback:We.callback,next:null},Jt===null?(St=Jt=Sr,rt=Zt):Jt=Jt.next=Sr,ke|=Xt;if(We=We.next,We===null){if(We=X.shared.pending,We===null)break;Xt=We,We=Xt.next,Xt.next=null,X.lastBaseUpdate=Xt,X.shared.pending=null}}while(!0);if(Jt===null&&(rt=Zt),X.baseState=rt,X.firstBaseUpdate=St,X.lastBaseUpdate=Jt,x=X.shared.interleaved,x!==null){X=x;do ke|=X.lane,X=X.next;while(X!==x)}else se===null&&(X.shared.lanes=0);S0|=ke,h.lanes=ke,h.memoizedState=Zt}}function oc(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var L=h[x],X=L.callback;if(X!==null){if(L.callback=null,L=k,typeof X!="function")throw Error(r(191,X));X.call(L)}}}var Co={},Cs=No(Co),rd=No(Co),cl=No(Co);function lc(h){if(h===Co)throw Error(r(174));return h}function nd(h,x){switch(oa(cl,x),oa(rd,h),oa(Cs,Co),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:kt(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=kt(x,h)}Yn(Cs),oa(Cs,x)}function Rl(){Yn(Cs),Yn(rd),Yn(cl)}function Th(h){lc(cl.current);var x=lc(Cs.current),k=kt(x,h.type);x!==k&&(oa(rd,h),oa(Cs,k))}function k0(h){rd.current===h&&(Yn(Cs),Yn(rd))}var ja=No(0);function ul(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var zd=[];function Hd(){for(var h=0;h<zd.length;h++)zd[h]._workInProgressVersionPrimary=null;zd.length=0}var Of=N.ReactCurrentDispatcher,Pf=N.ReactCurrentBatchConfig,Bl=0,Ra=null,rs=null,Va=null,ad=!1,cc=!1,ju=0,sd=0;function ns(){throw Error(r(321))}function mi(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!_n(h[k],x[k]))return!1;return!0}function Wd(h,x,k,L,X,se){if(Bl=se,Ra=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Of.current=h===null||h.memoizedState===null?$9:z9,h=k(L,X),cc){se=0;do{if(cc=!1,ju=0,25<=se)throw Error(r(301));se+=1,Va=rs=null,x.updateQueue=null,Of.current=H9,h=k(L,X)}while(cc)}if(Of.current=jg,x=rs!==null&&rs.next!==null,Bl=0,Va=rs=Ra=null,ad=!1,x)throw Error(r(300));return h}function dl(){var h=ju!==0;return ju=0,h}function oo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Va===null?Ra.memoizedState=Va=h:Va=Va.next=h,Va}function Vi(){if(rs===null){var h=Ra.alternate;h=h!==null?h.memoizedState:null}else h=rs.next;var x=Va===null?Ra.memoizedState:Va.next;if(x!==null)Va=x,rs=h;else{if(h===null)throw Error(r(310));rs=h,h={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},Va===null?Ra.memoizedState=Va=h:Va=Va.next=h}return Va}function D(h,x){return typeof x=="function"?x(h):x}function fe(h){var x=Vi(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var L=rs,X=L.baseQueue,se=k.pending;if(se!==null){if(X!==null){var ke=X.next;X.next=se.next,se.next=ke}L.baseQueue=X=se,k.pending=null}if(X!==null){se=X.next,L=L.baseState;var We=ke=null,rt=null,St=se;do{var Jt=St.lane;if((Bl&Jt)===Jt)rt!==null&&(rt=rt.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),L=St.hasEagerState?St.eagerState:h(L,St.action);else{var Zt={lane:Jt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};rt===null?(We=rt=Zt,ke=L):rt=rt.next=Zt,Ra.lanes|=Jt,S0|=Jt}St=St.next}while(St!==null&&St!==se);rt===null?ke=L:rt.next=We,_n(L,x.memoizedState)||(Ul=!0),x.memoizedState=L,x.baseState=ke,x.baseQueue=rt,k.lastRenderedState=L}if(h=k.interleaved,h!==null){X=h;do se=X.lane,Ra.lanes|=se,S0|=se,X=X.next;while(X!==h)}else X===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function ge(h){var x=Vi(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var L=k.dispatch,X=k.pending,se=x.memoizedState;if(X!==null){k.pending=null;var ke=X=X.next;do se=h(se,ke.action),ke=ke.next;while(ke!==X);_n(se,x.memoizedState)||(Ul=!0),x.memoizedState=se,x.baseQueue===null&&(x.baseState=se),k.lastRenderedState=se}return[se,L]}function Ge(){}function it(h,x){var k=Ra,L=Vi(),X=x(),se=!_n(L.memoizedState,X);if(se&&(L.memoizedState=X,Ul=!0),L=L.queue,Ph(Qt.bind(null,k,L,h),[h]),L.getSnapshot!==x||se||Va!==null&&Va.memoizedState.tag&1){if(k.flags|=2048,Hn(9,_t.bind(null,k,L,X,x),void 0,null),Gi===null)throw Error(r(349));(Bl&30)!==0||zt(k,x,X)}return X}function zt(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=Ra.updateQueue,x===null?(x={lastEffect:null,stores:null},Ra.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function _t(h,x,k,L){x.value=k,x.getSnapshot=L,Or(x)&&Cn(h)}function Qt(h,x,k){return k(function(){Or(x)&&Cn(h)})}function Or(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!_n(h,k)}catch{return!0}}function Cn(h){var x=Zn(h,1);x!==null&&Au(x,h,1,-1)}function ka(h){var x=oo();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:h},x.queue=h,h=h.dispatch=q9.bind(null,Ra,h),[x.memoizedState,h]}function Hn(h,x,k,L){return h={tag:h,create:x,destroy:k,deps:L,next:null},x=Ra.updateQueue,x===null?(x={lastEffect:null,stores:null},Ra.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(L=k.next,k.next=h,h.next=L,x.lastEffect=h)),h}function Js(){return Vi().memoizedState}function Ti(h,x,k,L){var X=oo();Ra.flags|=h,X.memoizedState=Hn(1|x,k,void 0,L===void 0?null:L)}function id(h,x,k,L){var X=Vi();L=L===void 0?null:L;var se=void 0;if(rs!==null){var ke=rs.memoizedState;if(se=ke.destroy,L!==null&&mi(L,ke.deps)){X.memoizedState=Hn(x,k,se,L);return}}Ra.flags|=h,X.memoizedState=Hn(1|x,k,se,L)}function Oh(h,x){return Ti(8390656,8,h,x)}function Ph(h,x){return id(2048,8,h,x)}function Ng(h,x){return id(4,2,h,x)}function Ih(h,x){return id(4,4,h,x)}function Dh(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function PS(h,x,k){return k=k!=null?k.concat([h]):null,id(4,4,Dh.bind(null,x,h),k)}function fb(){}function IS(h,x){var k=Vi();x=x===void 0?null:x;var L=k.memoizedState;return L!==null&&x!==null&&mi(x,L[1])?L[0]:(k.memoizedState=[h,x],h)}function DS(h,x){var k=Vi();x=x===void 0?null:x;var L=k.memoizedState;return L!==null&&x!==null&&mi(x,L[1])?L[0]:(h=h(),k.memoizedState=[h,x],h)}function LS(h,x,k){return(Bl&21)===0?(h.baseState&&(h.baseState=!1,Ul=!0),h.memoizedState=k):(_n(k,x)||(k=kn(),Ra.lanes|=k,S0|=k,h.baseState=!0),x)}function B9(h,x){var k=Ar;Ar=k!==0&&4>k?k:4,h(!0);var L=Pf.transition;Pf.transition={};try{h(!1),x()}finally{Ar=k,Pf.transition=L}}function FS(){return Vi().memoizedState}function U9(h,x,k){var L=Ff(h);if(k={lane:L,action:k,hasEagerState:!1,eagerState:null,next:null},MS(h))RS(x,k);else if(k=ic(h,x,k,L),k!==null){var X=hl();Au(k,h,L,X),BS(k,x,L)}}function q9(h,x,k){var L=Ff(h),X={lane:L,action:k,hasEagerState:!1,eagerState:null,next:null};if(MS(h))RS(x,X);else{var se=h.alternate;if(h.lanes===0&&(se===null||se.lanes===0)&&(se=x.lastRenderedReducer,se!==null))try{var ke=x.lastRenderedState,We=se(ke,k);if(X.hasEagerState=!0,X.eagerState=We,_n(We,ke)){var rt=x.interleaved;rt===null?(X.next=X,sc(x)):(X.next=rt.next,rt.next=X),x.interleaved=X;return}}catch{}k=ic(h,x,X,L),k!==null&&(X=hl(),Au(k,h,L,X),BS(k,x,L))}}function MS(h){var x=h.alternate;return h===Ra||x!==null&&x===Ra}function RS(h,x){cc=ad=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function BS(h,x,k){if((k&4194240)!==0){var L=x.lanes;L&=h.pendingLanes,k|=L,x.lanes=k,Dt(h,k)}}var jg={readContext:Wa,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useInsertionEffect:ns,useLayoutEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useMutableSource:ns,useSyncExternalStore:ns,useId:ns,unstable_isNewReconciler:!1},$9={readContext:Wa,useCallback:function(h,x){return oo().memoizedState=[h,x===void 0?null:x],h},useContext:Wa,useEffect:Oh,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,Ti(4194308,4,Dh.bind(null,x,h),k)},useLayoutEffect:function(h,x){return Ti(4194308,4,h,x)},useInsertionEffect:function(h,x){return Ti(4,2,h,x)},useMemo:function(h,x){var k=oo();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var L=oo();return x=k!==void 0?k(x):x,L.memoizedState=L.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},L.queue=h,h=h.dispatch=U9.bind(null,Ra,h),[L.memoizedState,h]},useRef:function(h){var x=oo();return h={current:h},x.memoizedState=h},useState:ka,useDebugValue:fb,useDeferredValue:function(h){return oo().memoizedState=h},useTransition:function(){var h=ka(!1),x=h[0];return h=B9.bind(null,h[1]),oo().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var L=Ra,X=oo();if(Tt){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),Gi===null)throw Error(r(349));(Bl&30)!==0||zt(L,x,k)}X.memoizedState=k;var se={value:k,getSnapshot:x};return X.queue=se,Oh(Qt.bind(null,L,se,h),[h]),L.flags|=2048,Hn(9,_t.bind(null,L,se,k,x),void 0,null),k},useId:function(){var h=oo(),x=Gi.identifierPrefix;if(Tt){var k=dt,L=gt;k=(L&~(1<<32-sa(L)-1)).toString(32)+k,x=":"+x+"R"+k,k=ju++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=sd++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},z9={readContext:Wa,useCallback:IS,useContext:Wa,useEffect:Ph,useImperativeHandle:PS,useInsertionEffect:Ng,useLayoutEffect:Ih,useMemo:DS,useReducer:fe,useRef:Js,useState:function(){return fe(D)},useDebugValue:fb,useDeferredValue:function(h){var x=Vi();return LS(x,rs.memoizedState,h)},useTransition:function(){var h=fe(D)[0],x=Vi().memoizedState;return[h,x]},useMutableSource:Ge,useSyncExternalStore:it,useId:FS,unstable_isNewReconciler:!1},H9={readContext:Wa,useCallback:IS,useContext:Wa,useEffect:Ph,useImperativeHandle:PS,useInsertionEffect:Ng,useLayoutEffect:Ih,useMemo:DS,useReducer:ge,useRef:Js,useState:function(){return ge(D)},useDebugValue:fb,useDeferredValue:function(h){var x=Vi();return rs===null?x.memoizedState=h:LS(x,rs.memoizedState,h)},useTransition:function(){var h=ge(D)[0],x=Vi().memoizedState;return[h,x]},useMutableSource:Ge,useSyncExternalStore:it,useId:FS,unstable_isNewReconciler:!1};function ku(h,x){if(h&&h.defaultProps){x=ee({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function hb(h,x,k,L){x=h.memoizedState,k=k(L,x),k=k==null?x:ee({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var kg={isMounted:function(h){return(h=h._reactInternals)?Oe(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var L=hl(),X=Ff(h),se=So(L,X);se.payload=x,k!=null&&(se.callback=k),x=_o(h,se,X),x!==null&&(Au(x,h,X,L),Nu(x,h,X))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var L=hl(),X=Ff(h),se=So(L,X);se.tag=1,se.payload=x,k!=null&&(se.callback=k),x=_o(h,se,X),x!==null&&(Au(x,h,X,L),Nu(x,h,X))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=hl(),L=Ff(h),X=So(k,L);X.tag=2,x!=null&&(X.callback=x),x=_o(h,X,L),x!==null&&(Au(x,h,L,k),Nu(x,h,L))}};function US(h,x,k,L,X,se,ke){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(L,se,ke):x.prototype&&x.prototype.isPureReactComponent?!$i(k,L)||!$i(X,se):!0}function qS(h,x,k){var L=!1,X=ac,se=x.contextType;return typeof se=="object"&&se!==null?se=Wa(se):(X=Ha(x)?ga:Ks.current,L=x.contextTypes,se=(L=L!=null)?jo(h,X):ac),x=new x(k,se),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=kg,h.stateNode=x,x._reactInternals=h,L&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=X,h.__reactInternalMemoizedMaskedChildContext=se),x}function $S(h,x,k,L){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,L),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,L),x.state!==h&&kg.enqueueReplaceState(x,x.state,null)}function pb(h,x,k,L){var X=h.stateNode;X.props=k,X.state=h.memoizedState,X.refs={},Tf(h);var se=x.contextType;typeof se=="object"&&se!==null?X.context=Wa(se):(se=Ha(x)?ga:Ks.current,X.context=jo(h,se)),X.state=h.memoizedState,se=x.getDerivedStateFromProps,typeof se=="function"&&(hb(h,x,se,k),X.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(x=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),x!==X.state&&kg.enqueueReplaceState(X,X.state,null),ll(h,k,X,L),X.state=h.memoizedState),typeof X.componentDidMount=="function"&&(h.flags|=4194308)}function Lh(h,x){try{var k="",L=x;do k+=R(L),L=L.return;while(L);var X=k}catch(se){X=`
Error generating stack: `+se.message+`
`+se.stack}return{value:h,source:x,stack:X,digest:null}}function mb(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function xb(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var W9=typeof WeakMap=="function"?WeakMap:Map;function zS(h,x,k){k=So(-1,k),k.tag=3,k.payload={element:null};var L=x.value;return k.callback=function(){Og||(Og=!0,Ob=L),xb(h,x)},k}function HS(h,x,k){k=So(-1,k),k.tag=3;var L=h.type.getDerivedStateFromError;if(typeof L=="function"){var X=x.value;k.payload=function(){return L(X)},k.callback=function(){xb(h,x)}}var se=h.stateNode;return se!==null&&typeof se.componentDidCatch=="function"&&(k.callback=function(){xb(h,x),typeof L!="function"&&(Df===null?Df=new Set([this]):Df.add(this));var ke=x.stack;this.componentDidCatch(x.value,{componentStack:ke!==null?ke:""})}),k}function WS(h,x,k){var L=h.pingCache;if(L===null){L=h.pingCache=new W9;var X=new Set;L.set(x,X)}else X=L.get(x),X===void 0&&(X=new Set,L.set(x,X));X.has(k)||(X.add(k),h=sB.bind(null,h,x,k),x.then(h,h))}function VS(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function GS(h,x,k,L,X){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=So(-1,1),x.tag=2,_o(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=X,h)}var V9=N.ReactCurrentOwner,Ul=!1;function fl(h,x,k,L){x.child=h===null?An(x,null,k,L):ts(x,h.child,k,L)}function KS(h,x,k,L,X){k=k.render;var se=x.ref;return Ma(x,X),L=Wd(h,x,k,L,se,X),k=dl(),h!==null&&!Ul?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~X,Vd(h,x,X)):(Tt&&k&&At(x),x.flags|=1,fl(h,x,L,X),x.child)}function XS(h,x,k,L,X){if(h===null){var se=k.type;return typeof se=="function"&&!Rb(se)&&se.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=se,YS(h,x,se,L,X)):(h=Mg(k.type,null,L,x,x.mode,X),h.ref=x.ref,h.return=x,x.child=h)}if(se=h.child,(h.lanes&X)===0){var ke=se.memoizedProps;if(k=k.compare,k=k!==null?k:$i,k(ke,L)&&h.ref===x.ref)return Vd(h,x,X)}return x.flags|=1,h=Rf(se,L),h.ref=x.ref,h.return=x,x.child=h}function YS(h,x,k,L,X){if(h!==null){var se=h.memoizedProps;if($i(se,L)&&h.ref===x.ref)if(Ul=!1,x.pendingProps=L=se,(h.lanes&X)!==0)(h.flags&131072)!==0&&(Ul=!0);else return x.lanes=h.lanes,Vd(h,x,X)}return gb(h,x,k,L,X)}function JS(h,x,k){var L=x.pendingProps,X=L.children,se=h!==null?h.memoizedState:null;if(L.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},oa(Mh,uc),uc|=k;else{if((k&1073741824)===0)return h=se!==null?se.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,oa(Mh,uc),uc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=se!==null?se.baseLanes:k,oa(Mh,uc),uc|=L}else se!==null?(L=se.baseLanes|k,x.memoizedState=null):L=k,oa(Mh,uc),uc|=L;return fl(h,x,X,k),x.child}function QS(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function gb(h,x,k,L,X){var se=Ha(k)?ga:Ks.current;return se=jo(x,se),Ma(x,X),k=Wd(h,x,k,L,se,X),L=dl(),h!==null&&!Ul?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~X,Vd(h,x,X)):(Tt&&L&&At(x),x.flags|=1,fl(h,x,k,X),x.child)}function ZS(h,x,k,L,X){if(Ha(k)){var se=!0;ol(x)}else se=!1;if(Ma(x,X),x.stateNode===null)_g(h,x),qS(x,k,L),pb(x,k,L,X),L=!0;else if(h===null){var ke=x.stateNode,We=x.memoizedProps;ke.props=We;var rt=ke.context,St=k.contextType;typeof St=="object"&&St!==null?St=Wa(St):(St=Ha(k)?ga:Ks.current,St=jo(x,St));var Jt=k.getDerivedStateFromProps,Zt=typeof Jt=="function"||typeof ke.getSnapshotBeforeUpdate=="function";Zt||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(We!==L||rt!==St)&&$S(x,ke,L,St),Ml=!1;var Xt=x.memoizedState;ke.state=Xt,ll(x,L,ke,X),rt=x.memoizedState,We!==L||Xt!==rt||Xs.current||Ml?(typeof Jt=="function"&&(hb(x,k,Jt,L),rt=x.memoizedState),(We=Ml||US(x,k,We,L,Xt,rt,St))?(Zt||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount()),typeof ke.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ke.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=L,x.memoizedState=rt),ke.props=L,ke.state=rt,ke.context=St,L=We):(typeof ke.componentDidMount=="function"&&(x.flags|=4194308),L=!1)}else{ke=x.stateNode,j0(h,x),We=x.memoizedProps,St=x.type===x.elementType?We:ku(x.type,We),ke.props=St,Zt=x.pendingProps,Xt=ke.context,rt=k.contextType,typeof rt=="object"&&rt!==null?rt=Wa(rt):(rt=Ha(k)?ga:Ks.current,rt=jo(x,rt));var Sr=k.getDerivedStateFromProps;(Jt=typeof Sr=="function"||typeof ke.getSnapshotBeforeUpdate=="function")||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(We!==Zt||Xt!==rt)&&$S(x,ke,L,rt),Ml=!1,Xt=x.memoizedState,ke.state=Xt,ll(x,L,ke,X);var Dr=x.memoizedState;We!==Zt||Xt!==Dr||Xs.current||Ml?(typeof Sr=="function"&&(hb(x,k,Sr,L),Dr=x.memoizedState),(St=Ml||US(x,k,St,L,Xt,Dr,rt)||!1)?(Jt||typeof ke.UNSAFE_componentWillUpdate!="function"&&typeof ke.componentWillUpdate!="function"||(typeof ke.componentWillUpdate=="function"&&ke.componentWillUpdate(L,Dr,rt),typeof ke.UNSAFE_componentWillUpdate=="function"&&ke.UNSAFE_componentWillUpdate(L,Dr,rt)),typeof ke.componentDidUpdate=="function"&&(x.flags|=4),typeof ke.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ke.componentDidUpdate!="function"||We===h.memoizedProps&&Xt===h.memoizedState||(x.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||We===h.memoizedProps&&Xt===h.memoizedState||(x.flags|=1024),x.memoizedProps=L,x.memoizedState=Dr),ke.props=L,ke.state=Dr,ke.context=rt,L=St):(typeof ke.componentDidUpdate!="function"||We===h.memoizedProps&&Xt===h.memoizedState||(x.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||We===h.memoizedProps&&Xt===h.memoizedState||(x.flags|=1024),L=!1)}return vb(h,x,k,L,se,X)}function vb(h,x,k,L,X,se){QS(h,x);var ke=(x.flags&128)!==0;if(!L&&!ke)return X&&Eh(x,k,!1),Vd(h,x,se);L=x.stateNode,V9.current=x;var We=ke&&typeof k.getDerivedStateFromError!="function"?null:L.render();return x.flags|=1,h!==null&&ke?(x.child=ts(x,h.child,null,se),x.child=ts(x,null,We,se)):fl(h,x,We,se),x.memoizedState=L.state,X&&Eh(x,k,!0),x.child}function e_(h){var x=h.stateNode;x.pendingContext?Ef(h,x.pendingContext,x.pendingContext!==x.context):x.context&&Ef(h,x.context,!1),nd(h,x.containerInfo)}function t_(h,x,k,L,X){return dn(),ta(X),x.flags|=256,fl(h,x,k,L),x.child}var yb={dehydrated:null,treeContext:null,retryLane:0};function bb(h){return{baseLanes:h,cachePool:null,transitions:null}}function r_(h,x,k){var L=x.pendingProps,X=ja.current,se=!1,ke=(x.flags&128)!==0,We;if((We=ke)||(We=h!==null&&h.memoizedState===null?!1:(X&2)!==0),We?(se=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(X|=1),oa(ja,X&1),h===null)return dr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(ke=L.children,h=L.fallback,se?(L=x.mode,se=x.child,ke={mode:"hidden",children:ke},(L&1)===0&&se!==null?(se.childLanes=0,se.pendingProps=ke):se=Rg(ke,L,0,null),h=E0(h,L,k,null),se.return=x,h.return=x,se.sibling=h,x.child=se,x.child.memoizedState=bb(k),x.memoizedState=yb,h):wb(x,ke));if(X=h.memoizedState,X!==null&&(We=X.dehydrated,We!==null))return G9(h,x,ke,L,We,X,k);if(se){se=L.fallback,ke=x.mode,X=h.child,We=X.sibling;var rt={mode:"hidden",children:L.children};return(ke&1)===0&&x.child!==X?(L=x.child,L.childLanes=0,L.pendingProps=rt,x.deletions=null):(L=Rf(X,rt),L.subtreeFlags=X.subtreeFlags&14680064),We!==null?se=Rf(We,se):(se=E0(se,ke,k,null),se.flags|=2),se.return=x,L.return=x,L.sibling=se,x.child=L,L=se,se=x.child,ke=h.child.memoizedState,ke=ke===null?bb(k):{baseLanes:ke.baseLanes|k,cachePool:null,transitions:ke.transitions},se.memoizedState=ke,se.childLanes=h.childLanes&~k,x.memoizedState=yb,L}return se=h.child,h=se.sibling,L=Rf(se,{mode:"visible",children:L.children}),(x.mode&1)===0&&(L.lanes=k),L.return=x,L.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=L,x.memoizedState=null,L}function wb(h,x){return x=Rg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function Sg(h,x,k,L){return L!==null&&ta(L),ts(x,h.child,null,k),h=wb(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function G9(h,x,k,L,X,se,ke){if(k)return x.flags&256?(x.flags&=-257,L=mb(Error(r(422))),Sg(h,x,ke,L)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(se=L.fallback,X=x.mode,L=Rg({mode:"visible",children:L.children},X,0,null),se=E0(se,X,ke,null),se.flags|=2,L.return=x,se.return=x,L.sibling=se,x.child=L,(x.mode&1)!==0&&ts(x,h.child,null,ke),x.child.memoizedState=bb(ke),x.memoizedState=yb,se);if((x.mode&1)===0)return Sg(h,x,ke,null);if(X.data==="$!"){if(L=X.nextSibling&&X.nextSibling.dataset,L)var We=L.dgst;return L=We,se=Error(r(419)),L=mb(se,L,void 0),Sg(h,x,ke,L)}if(We=(ke&h.childLanes)!==0,Ul||We){if(L=Gi,L!==null){switch(ke&-ke){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=(X&(L.suspendedLanes|ke))!==0?0:X,X!==0&&X!==se.retryLane&&(se.retryLane=X,Zn(h,X),Au(L,h,X,-1))}return Mb(),L=mb(Error(r(421))),Sg(h,x,ke,L)}return X.data==="$?"?(x.flags|=128,x.child=h.child,x=iB.bind(null,h),X._reactRetry=x,null):(h=se.treeContext,Et=_i(X.nextSibling),et=x,Tt=!0,Lt=null,h!==null&&(Ie[Fe++]=gt,Ie[Fe++]=dt,Ie[Fe++]=Qe,gt=h.id,dt=h.overflow,Qe=x),x=wb(x,L.children),x.flags|=4096,x)}function n_(h,x,k){h.lanes|=x;var L=h.alternate;L!==null&&(L.lanes|=x),ko(h.return,x,k)}function Nb(h,x,k,L,X){var se=h.memoizedState;se===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:L,tail:k,tailMode:X}:(se.isBackwards=x,se.rendering=null,se.renderingStartTime=0,se.last=L,se.tail=k,se.tailMode=X)}function a_(h,x,k){var L=x.pendingProps,X=L.revealOrder,se=L.tail;if(fl(h,x,L.children,k),L=ja.current,(L&2)!==0)L=L&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&n_(h,k,x);else if(h.tag===19)n_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}L&=1}if(oa(ja,L),(x.mode&1)===0)x.memoizedState=null;else switch(X){case"forwards":for(k=x.child,X=null;k!==null;)h=k.alternate,h!==null&&ul(h)===null&&(X=k),k=k.sibling;k=X,k===null?(X=x.child,x.child=null):(X=k.sibling,k.sibling=null),Nb(x,!1,X,k,se);break;case"backwards":for(k=null,X=x.child,x.child=null;X!==null;){if(h=X.alternate,h!==null&&ul(h)===null){x.child=X;break}h=X.sibling,X.sibling=k,k=X,X=h}Nb(x,!0,k,null,se);break;case"together":Nb(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function _g(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function Vd(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),S0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=Rf(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=Rf(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function K9(h,x,k){switch(x.tag){case 3:e_(x),dn();break;case 5:Th(x);break;case 1:Ha(x.type)&&ol(x);break;case 4:nd(x,x.stateNode.containerInfo);break;case 10:var L=x.type._context,X=x.memoizedProps.value;oa(pi,L._currentValue),L._currentValue=X;break;case 13:if(L=x.memoizedState,L!==null)return L.dehydrated!==null?(oa(ja,ja.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?r_(h,x,k):(oa(ja,ja.current&1),h=Vd(h,x,k),h!==null?h.sibling:null);oa(ja,ja.current&1);break;case 19:if(L=(k&x.childLanes)!==0,(h.flags&128)!==0){if(L)return a_(h,x,k);x.flags|=128}if(X=x.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),oa(ja,ja.current),L)break;return null;case 22:case 23:return x.lanes=0,JS(h,x,k)}return Vd(h,x,k)}var s_,jb,i_,o_;s_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},jb=function(){},i_=function(h,x,k,L){var X=h.memoizedProps;if(X!==L){h=x.stateNode,lc(Cs.current);var se=null;switch(k){case"input":X=Ce(h,X),L=Ce(h,L),se=[];break;case"select":X=ee({},X,{value:void 0}),L=ee({},L,{value:void 0}),se=[];break;case"textarea":X=Pe(h,X),L=Pe(h,L),se=[];break;default:typeof X.onClick!="function"&&typeof L.onClick=="function"&&(h.onclick=Rc)}tr(k,L);var ke;k=null;for(St in X)if(!L.hasOwnProperty(St)&&X.hasOwnProperty(St)&&X[St]!=null)if(St==="style"){var We=X[St];for(ke in We)We.hasOwnProperty(ke)&&(k||(k={}),k[ke]="")}else St!=="dangerouslySetInnerHTML"&&St!=="children"&&St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(s.hasOwnProperty(St)?se||(se=[]):(se=se||[]).push(St,null));for(St in L){var rt=L[St];if(We=X?.[St],L.hasOwnProperty(St)&&rt!==We&&(rt!=null||We!=null))if(St==="style")if(We){for(ke in We)!We.hasOwnProperty(ke)||rt&&rt.hasOwnProperty(ke)||(k||(k={}),k[ke]="");for(ke in rt)rt.hasOwnProperty(ke)&&We[ke]!==rt[ke]&&(k||(k={}),k[ke]=rt[ke])}else k||(se||(se=[]),se.push(St,k)),k=rt;else St==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,We=We?We.__html:void 0,rt!=null&&We!==rt&&(se=se||[]).push(St,rt)):St==="children"?typeof rt!="string"&&typeof rt!="number"||(se=se||[]).push(St,""+rt):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&(s.hasOwnProperty(St)?(rt!=null&&St==="onScroll"&&ia("scroll",h),se||We===rt||(se=[])):(se=se||[]).push(St,rt))}k&&(se=se||[]).push("style",k);var St=se;(x.updateQueue=St)&&(x.flags|=4)}},o_=function(h,x,k,L){k!==L&&(x.flags|=4)};function im(h,x){if(!Tt)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var L=null;k!==null;)k.alternate!==null&&(L=k),k=k.sibling;L===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:L.sibling=null}}function Eo(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,L=0;if(x)for(var X=h.child;X!==null;)k|=X.lanes|X.childLanes,L|=X.subtreeFlags&14680064,L|=X.flags&14680064,X.return=h,X=X.sibling;else for(X=h.child;X!==null;)k|=X.lanes|X.childLanes,L|=X.subtreeFlags,L|=X.flags,X.return=h,X=X.sibling;return h.subtreeFlags|=L,h.childLanes=k,x}function X9(h,x,k){var L=x.pendingProps;switch(Ye(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Eo(x),null;case 1:return Ha(x.type)&&Cf(),Eo(x),null;case 3:return L=x.stateNode,Rl(),Yn(Xs),Yn(Ks),Hd(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(h===null||h.child===null)&&(zn(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Lt!==null&&(Db(Lt),Lt=null))),jb(h,x),Eo(x),null;case 5:k0(x);var X=lc(cl.current);if(k=x.type,h!==null&&x.stateNode!=null)i_(h,x,k,L,X),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!L){if(x.stateNode===null)throw Error(r(166));return Eo(x),null}if(h=lc(Cs.current),zn(x)){L=x.stateNode,k=x.type;var se=x.memoizedProps;switch(L[Fl]=x,L[wu]=se,h=(x.mode&1)!==0,k){case"dialog":ia("cancel",L),ia("close",L);break;case"iframe":case"object":case"embed":ia("load",L);break;case"video":case"audio":for(X=0;X<Ic.length;X++)ia(Ic[X],L);break;case"source":ia("error",L);break;case"img":case"image":case"link":ia("error",L),ia("load",L);break;case"details":ia("toggle",L);break;case"input":de(L,se),ia("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!se.multiple},ia("invalid",L);break;case"textarea":Ne(L,se),ia("invalid",L)}tr(k,se),X=null;for(var ke in se)if(se.hasOwnProperty(ke)){var We=se[ke];ke==="children"?typeof We=="string"?L.textContent!==We&&(se.suppressHydrationWarning!==!0&&Sf(L.textContent,We,h),X=["children",We]):typeof We=="number"&&L.textContent!==""+We&&(se.suppressHydrationWarning!==!0&&Sf(L.textContent,We,h),X=["children",""+We]):s.hasOwnProperty(ke)&&We!=null&&ke==="onScroll"&&ia("scroll",L)}switch(k){case"input":De(L),ye(L,se,!0);break;case"textarea":De(L),nt(L);break;case"select":case"option":break;default:typeof se.onClick=="function"&&(L.onclick=Rc)}L=X,x.updateQueue=L,L!==null&&(x.flags|=4)}else{ke=X.nodeType===9?X:X.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=xt(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=ke.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof L.is=="string"?h=ke.createElement(k,{is:L.is}):(h=ke.createElement(k),k==="select"&&(ke=h,L.multiple?ke.multiple=!0:L.size&&(ke.size=L.size))):h=ke.createElementNS(h,k),h[Fl]=x,h[wu]=L,s_(h,x,!1,!1),x.stateNode=h;e:{switch(ke=$e(k,L),k){case"dialog":ia("cancel",h),ia("close",h),X=L;break;case"iframe":case"object":case"embed":ia("load",h),X=L;break;case"video":case"audio":for(X=0;X<Ic.length;X++)ia(Ic[X],h);X=L;break;case"source":ia("error",h),X=L;break;case"img":case"image":case"link":ia("error",h),ia("load",h),X=L;break;case"details":ia("toggle",h),X=L;break;case"input":de(h,L),X=Ce(h,L),ia("invalid",h);break;case"option":X=L;break;case"select":h._wrapperState={wasMultiple:!!L.multiple},X=ee({},L,{value:void 0}),ia("invalid",h);break;case"textarea":Ne(h,L),X=Pe(h,L),ia("invalid",h);break;default:X=L}tr(k,X),We=X;for(se in We)if(We.hasOwnProperty(se)){var rt=We[se];se==="style"?ft(h,rt):se==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,rt!=null&&vt(h,rt)):se==="children"?typeof rt=="string"?(k!=="textarea"||rt!=="")&&ut(h,rt):typeof rt=="number"&&ut(h,""+rt):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?rt!=null&&se==="onScroll"&&ia("scroll",h):rt!=null&&j(h,se,rt,ke))}switch(k){case"input":De(h),ye(h,L,!1);break;case"textarea":De(h),nt(h);break;case"option":L.value!=null&&h.setAttribute("value",""+he(L.value));break;case"select":h.multiple=!!L.multiple,se=L.value,se!=null?ue(h,!!L.multiple,se,!1):L.defaultValue!=null&&ue(h,!!L.multiple,L.defaultValue,!0);break;default:typeof X.onClick=="function"&&(h.onclick=Rc)}switch(k){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Eo(x),null;case 6:if(h&&x.stateNode!=null)o_(h,x,h.memoizedProps,L);else{if(typeof L!="string"&&x.stateNode===null)throw Error(r(166));if(k=lc(cl.current),lc(Cs.current),zn(x)){if(L=x.stateNode,k=x.memoizedProps,L[Fl]=x,(se=L.nodeValue!==k)&&(h=et,h!==null))switch(h.tag){case 3:Sf(L.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Sf(L.nodeValue,k,(h.mode&1)!==0)}se&&(x.flags|=4)}else L=(k.nodeType===9?k:k.ownerDocument).createTextNode(L),L[Fl]=x,x.stateNode=L}return Eo(x),null;case 13:if(Yn(ja),L=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Tt&&Et!==null&&(x.mode&1)!==0&&(x.flags&128)===0)Nn(),dn(),x.flags|=98560,se=!1;else if(se=zn(x),L!==null&&L.dehydrated!==null){if(h===null){if(!se)throw Error(r(318));if(se=x.memoizedState,se=se!==null?se.dehydrated:null,!se)throw Error(r(317));se[Fl]=x}else dn(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Eo(x),se=!1}else Lt!==null&&(Db(Lt),Lt=null),se=!0;if(!se)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(L=L!==null,L!==(h!==null&&h.memoizedState!==null)&&L&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(ja.current&1)!==0?Oi===0&&(Oi=3):Mb())),x.updateQueue!==null&&(x.flags|=4),Eo(x),null);case 4:return Rl(),jb(h,x),h===null&&Ll(x.stateNode.containerInfo),Eo(x),null;case 10:return Ys(x.type._context),Eo(x),null;case 17:return Ha(x.type)&&Cf(),Eo(x),null;case 19:if(Yn(ja),se=x.memoizedState,se===null)return Eo(x),null;if(L=(x.flags&128)!==0,ke=se.rendering,ke===null)if(L)im(se,!1);else{if(Oi!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(ke=ul(h),ke!==null){for(x.flags|=128,im(se,!1),L=ke.updateQueue,L!==null&&(x.updateQueue=L,x.flags|=4),x.subtreeFlags=0,L=k,k=x.child;k!==null;)se=k,h=L,se.flags&=14680066,ke=se.alternate,ke===null?(se.childLanes=0,se.lanes=h,se.child=null,se.subtreeFlags=0,se.memoizedProps=null,se.memoizedState=null,se.updateQueue=null,se.dependencies=null,se.stateNode=null):(se.childLanes=ke.childLanes,se.lanes=ke.lanes,se.child=ke.child,se.subtreeFlags=0,se.deletions=null,se.memoizedProps=ke.memoizedProps,se.memoizedState=ke.memoizedState,se.updateQueue=ke.updateQueue,se.type=ke.type,h=ke.dependencies,se.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return oa(ja,ja.current&1|2),x.child}h=h.sibling}se.tail!==null&&Mt()>Rh&&(x.flags|=128,L=!0,im(se,!1),x.lanes=4194304)}else{if(!L)if(h=ul(ke),h!==null){if(x.flags|=128,L=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),im(se,!0),se.tail===null&&se.tailMode==="hidden"&&!ke.alternate&&!Tt)return Eo(x),null}else 2*Mt()-se.renderingStartTime>Rh&&k!==1073741824&&(x.flags|=128,L=!0,im(se,!1),x.lanes=4194304);se.isBackwards?(ke.sibling=x.child,x.child=ke):(k=se.last,k!==null?k.sibling=ke:x.child=ke,se.last=ke)}return se.tail!==null?(x=se.tail,se.rendering=x,se.tail=x.sibling,se.renderingStartTime=Mt(),x.sibling=null,k=ja.current,oa(ja,L?k&1|2:k&1),x):(Eo(x),null);case 22:case 23:return Fb(),L=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==L&&(x.flags|=8192),L&&(x.mode&1)!==0?(uc&1073741824)!==0&&(Eo(x),x.subtreeFlags&6&&(x.flags|=8192)):Eo(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function Y9(h,x){switch(Ye(x),x.tag){case 1:return Ha(x.type)&&Cf(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return Rl(),Yn(Xs),Yn(Ks),Hd(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return k0(x),null;case 13:if(Yn(ja),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));dn()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return Yn(ja),null;case 4:return Rl(),null;case 10:return Ys(x.type._context),null;case 22:case 23:return Fb(),null;case 24:return null;default:return null}}var Ag=!1,To=!1,J9=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function Fh(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(L){Rs(h,x,L)}else k.current=null}function kb(h,x,k){try{k()}catch(L){Rs(h,x,L)}}var l_=!1;function Q9(h,x){if(il=kc,h=Md(),Dl(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var L=k.getSelection&&k.getSelection();if(L&&L.rangeCount!==0){k=L.anchorNode;var X=L.anchorOffset,se=L.focusNode;L=L.focusOffset;try{k.nodeType,se.nodeType}catch{k=null;break e}var ke=0,We=-1,rt=-1,St=0,Jt=0,Zt=h,Xt=null;t:for(;;){for(var Sr;Zt!==k||X!==0&&Zt.nodeType!==3||(We=ke+X),Zt!==se||L!==0&&Zt.nodeType!==3||(rt=ke+L),Zt.nodeType===3&&(ke+=Zt.nodeValue.length),(Sr=Zt.firstChild)!==null;)Xt=Zt,Zt=Sr;for(;;){if(Zt===h)break t;if(Xt===k&&++St===X&&(We=ke),Xt===se&&++Jt===L&&(rt=ke),(Sr=Zt.nextSibling)!==null)break;Zt=Xt,Xt=Zt.parentNode}Zt=Sr}k=We===-1||rt===-1?null:{start:We,end:rt}}else k=null}k=k||{start:0,end:0}}else k=null;for(Bc={focusedElem:h,selectionRange:k},kc=!1,Pr=x;Pr!==null;)if(x=Pr,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Pr=h;else for(;Pr!==null;){x=Pr;try{var Dr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Dr!==null){var Mr=Dr.memoizedProps,Qs=Dr.memoizedState,yt=x.stateNode,ot=yt.getSnapshotBeforeUpdate(x.elementType===x.type?Mr:ku(x.type,Mr),Qs);yt.__reactInternalSnapshotBeforeUpdate=ot}break;case 3:var jt=x.stateNode.containerInfo;jt.nodeType===1?jt.textContent="":jt.nodeType===9&&jt.documentElement&&jt.removeChild(jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ar){Rs(x,x.return,ar)}if(h=x.sibling,h!==null){h.return=x.return,Pr=h;break}Pr=x.return}return Dr=l_,l_=!1,Dr}function om(h,x,k){var L=x.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var X=L=L.next;do{if((X.tag&h)===h){var se=X.destroy;X.destroy=void 0,se!==void 0&&kb(x,k,se)}X=X.next}while(X!==L)}}function Cg(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var L=k.create;k.destroy=L()}k=k.next}while(k!==x)}}function Sb(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function c_(h){var x=h.alternate;x!==null&&(h.alternate=null,c_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[Fl],delete x[wu],delete x[Hi],delete x[Ah],delete x[Ch])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function u_(h){return h.tag===5||h.tag===3||h.tag===4}function d_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||u_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function _b(h,x,k){var L=h.tag;if(L===5||L===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=Rc));else if(L!==4&&(h=h.child,h!==null))for(_b(h,x,k),h=h.sibling;h!==null;)_b(h,x,k),h=h.sibling}function Ab(h,x,k){var L=h.tag;if(L===5||L===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(L!==4&&(h=h.child,h!==null))for(Ab(h,x,k),h=h.sibling;h!==null;)Ab(h,x,k),h=h.sibling}var lo=null,Su=!1;function If(h,x,k){for(k=k.child;k!==null;)f_(h,x,k),k=k.sibling}function f_(h,x,k){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(wa,k)}catch{}switch(k.tag){case 5:To||Fh(k,x);case 6:var L=lo,X=Su;lo=null,If(h,x,k),lo=L,Su=X,lo!==null&&(Su?(h=lo,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):lo.removeChild(k.stateNode));break;case 18:lo!==null&&(Su?(h=lo,k=k.stateNode,h.nodeType===8?td(h.parentNode,k):h.nodeType===1&&td(h,k),Ds(h)):td(lo,k.stateNode));break;case 4:L=lo,X=Su,lo=k.stateNode.containerInfo,Su=!0,If(h,x,k),lo=L,Su=X;break;case 0:case 11:case 14:case 15:if(!To&&(L=k.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){X=L=L.next;do{var se=X,ke=se.destroy;se=se.tag,ke!==void 0&&((se&2)!==0||(se&4)!==0)&&kb(k,x,ke),X=X.next}while(X!==L)}If(h,x,k);break;case 1:if(!To&&(Fh(k,x),L=k.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=k.memoizedProps,L.state=k.memoizedState,L.componentWillUnmount()}catch(We){Rs(k,x,We)}If(h,x,k);break;case 21:If(h,x,k);break;case 22:k.mode&1?(To=(L=To)||k.memoizedState!==null,If(h,x,k),To=L):If(h,x,k);break;default:If(h,x,k)}}function h_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new J9),x.forEach(function(L){var X=oB.bind(null,h,L);k.has(L)||(k.add(L),L.then(X,X))})}}function _u(h,x){var k=x.deletions;if(k!==null)for(var L=0;L<k.length;L++){var X=k[L];try{var se=h,ke=x,We=ke;e:for(;We!==null;){switch(We.tag){case 5:lo=We.stateNode,Su=!1;break e;case 3:lo=We.stateNode.containerInfo,Su=!0;break e;case 4:lo=We.stateNode.containerInfo,Su=!0;break e}We=We.return}if(lo===null)throw Error(r(160));f_(se,ke,X),lo=null,Su=!1;var rt=X.alternate;rt!==null&&(rt.return=null),X.return=null}catch(St){Rs(X,x,St)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)p_(x,h),x=x.sibling}function p_(h,x){var k=h.alternate,L=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(_u(x,h),od(h),L&4){try{om(3,h,h.return),Cg(3,h)}catch(Mr){Rs(h,h.return,Mr)}try{om(5,h,h.return)}catch(Mr){Rs(h,h.return,Mr)}}break;case 1:_u(x,h),od(h),L&512&&k!==null&&Fh(k,k.return);break;case 5:if(_u(x,h),od(h),L&512&&k!==null&&Fh(k,k.return),h.flags&32){var X=h.stateNode;try{ut(X,"")}catch(Mr){Rs(h,h.return,Mr)}}if(L&4&&(X=h.stateNode,X!=null)){var se=h.memoizedProps,ke=k!==null?k.memoizedProps:se,We=h.type,rt=h.updateQueue;if(h.updateQueue=null,rt!==null)try{We==="input"&&se.type==="radio"&&se.name!=null&&Y(X,se),$e(We,ke);var St=$e(We,se);for(ke=0;ke<rt.length;ke+=2){var Jt=rt[ke],Zt=rt[ke+1];Jt==="style"?ft(X,Zt):Jt==="dangerouslySetInnerHTML"?vt(X,Zt):Jt==="children"?ut(X,Zt):j(X,Jt,Zt,St)}switch(We){case"input":ve(X,se);break;case"textarea":Re(X,se);break;case"select":var Xt=X._wrapperState.wasMultiple;X._wrapperState.wasMultiple=!!se.multiple;var Sr=se.value;Sr!=null?ue(X,!!se.multiple,Sr,!1):Xt!==!!se.multiple&&(se.defaultValue!=null?ue(X,!!se.multiple,se.defaultValue,!0):ue(X,!!se.multiple,se.multiple?[]:"",!1))}X[wu]=se}catch(Mr){Rs(h,h.return,Mr)}}break;case 6:if(_u(x,h),od(h),L&4){if(h.stateNode===null)throw Error(r(162));X=h.stateNode,se=h.memoizedProps;try{X.nodeValue=se}catch(Mr){Rs(h,h.return,Mr)}}break;case 3:if(_u(x,h),od(h),L&4&&k!==null&&k.memoizedState.isDehydrated)try{Ds(x.containerInfo)}catch(Mr){Rs(h,h.return,Mr)}break;case 4:_u(x,h),od(h);break;case 13:_u(x,h),od(h),X=h.child,X.flags&8192&&(se=X.memoizedState!==null,X.stateNode.isHidden=se,!se||X.alternate!==null&&X.alternate.memoizedState!==null||(Tb=Mt())),L&4&&h_(h);break;case 22:if(Jt=k!==null&&k.memoizedState!==null,h.mode&1?(To=(St=To)||Jt,_u(x,h),To=St):_u(x,h),od(h),L&8192){if(St=h.memoizedState!==null,(h.stateNode.isHidden=St)&&!Jt&&(h.mode&1)!==0)for(Pr=h,Jt=h.child;Jt!==null;){for(Zt=Pr=Jt;Pr!==null;){switch(Xt=Pr,Sr=Xt.child,Xt.tag){case 0:case 11:case 14:case 15:om(4,Xt,Xt.return);break;case 1:Fh(Xt,Xt.return);var Dr=Xt.stateNode;if(typeof Dr.componentWillUnmount=="function"){L=Xt,k=Xt.return;try{x=L,Dr.props=x.memoizedProps,Dr.state=x.memoizedState,Dr.componentWillUnmount()}catch(Mr){Rs(L,k,Mr)}}break;case 5:Fh(Xt,Xt.return);break;case 22:if(Xt.memoizedState!==null){g_(Zt);continue}}Sr!==null?(Sr.return=Xt,Pr=Sr):g_(Zt)}Jt=Jt.sibling}e:for(Jt=null,Zt=h;;){if(Zt.tag===5){if(Jt===null){Jt=Zt;try{X=Zt.stateNode,St?(se=X.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none"):(We=Zt.stateNode,rt=Zt.memoizedProps.style,ke=rt!=null&&rt.hasOwnProperty("display")?rt.display:null,We.style.display=rr("display",ke))}catch(Mr){Rs(h,h.return,Mr)}}}else if(Zt.tag===6){if(Jt===null)try{Zt.stateNode.nodeValue=St?"":Zt.memoizedProps}catch(Mr){Rs(h,h.return,Mr)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===h)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===h)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===h)break e;Jt===Zt&&(Jt=null),Zt=Zt.return}Jt===Zt&&(Jt=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}break;case 19:_u(x,h),od(h),L&4&&h_(h);break;case 21:break;default:_u(x,h),od(h)}}function od(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(u_(k)){var L=k;break e}k=k.return}throw Error(r(160))}switch(L.tag){case 5:var X=L.stateNode;L.flags&32&&(ut(X,""),L.flags&=-33);var se=d_(h);Ab(h,se,X);break;case 3:case 4:var ke=L.stateNode.containerInfo,We=d_(h);_b(h,We,ke);break;default:throw Error(r(161))}}catch(rt){Rs(h,h.return,rt)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function Z9(h,x,k){Pr=h,m_(h)}function m_(h,x,k){for(var L=(h.mode&1)!==0;Pr!==null;){var X=Pr,se=X.child;if(X.tag===22&&L){var ke=X.memoizedState!==null||Ag;if(!ke){var We=X.alternate,rt=We!==null&&We.memoizedState!==null||To;We=Ag;var St=To;if(Ag=ke,(To=rt)&&!St)for(Pr=X;Pr!==null;)ke=Pr,rt=ke.child,ke.tag===22&&ke.memoizedState!==null?v_(X):rt!==null?(rt.return=ke,Pr=rt):v_(X);for(;se!==null;)Pr=se,m_(se),se=se.sibling;Pr=X,Ag=We,To=St}x_(h)}else(X.subtreeFlags&8772)!==0&&se!==null?(se.return=X,Pr=se):x_(h)}}function x_(h){for(;Pr!==null;){var x=Pr;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:To||Cg(5,x);break;case 1:var L=x.stateNode;if(x.flags&4&&!To)if(k===null)L.componentDidMount();else{var X=x.elementType===x.type?k.memoizedProps:ku(x.type,k.memoizedProps);L.componentDidUpdate(X,k.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var se=x.updateQueue;se!==null&&oc(x,se,L);break;case 3:var ke=x.updateQueue;if(ke!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}oc(x,ke,k)}break;case 5:var We=x.stateNode;if(k===null&&x.flags&4){k=We;var rt=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":rt.autoFocus&&k.focus();break;case"img":rt.src&&(k.src=rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var St=x.alternate;if(St!==null){var Jt=St.memoizedState;if(Jt!==null){var Zt=Jt.dehydrated;Zt!==null&&Ds(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}To||x.flags&512&&Sb(x)}catch(Xt){Rs(x,x.return,Xt)}}if(x===h){Pr=null;break}if(k=x.sibling,k!==null){k.return=x.return,Pr=k;break}Pr=x.return}}function g_(h){for(;Pr!==null;){var x=Pr;if(x===h){Pr=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Pr=k;break}Pr=x.return}}function v_(h){for(;Pr!==null;){var x=Pr;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Cg(4,x)}catch(rt){Rs(x,k,rt)}break;case 1:var L=x.stateNode;if(typeof L.componentDidMount=="function"){var X=x.return;try{L.componentDidMount()}catch(rt){Rs(x,X,rt)}}var se=x.return;try{Sb(x)}catch(rt){Rs(x,se,rt)}break;case 5:var ke=x.return;try{Sb(x)}catch(rt){Rs(x,ke,rt)}}}catch(rt){Rs(x,x.return,rt)}if(x===h){Pr=null;break}var We=x.sibling;if(We!==null){We.return=x.return,Pr=We;break}Pr=x.return}}var eB=Math.ceil,Eg=N.ReactCurrentDispatcher,Cb=N.ReactCurrentOwner,zc=N.ReactCurrentBatchConfig,ra=0,Gi=null,xi=null,co=0,uc=0,Mh=No(0),Oi=0,lm=null,S0=0,Tg=0,Eb=0,cm=null,ql=null,Tb=0,Rh=1/0,Gd=null,Og=!1,Ob=null,Df=null,Pg=!1,Lf=null,Ig=0,um=0,Pb=null,Dg=-1,Lg=0;function hl(){return(ra&6)!==0?Mt():Dg!==-1?Dg:Dg=Mt()}function Ff(h){return(h.mode&1)===0?1:(ra&2)!==0&&co!==0?co&-co:Un.transition!==null?(Lg===0&&(Lg=kn()),Lg):(h=Ar,h!==0||(h=window.event,h=h===void 0?16:hu(h.type)),h)}function Au(h,x,k,L){if(50<um)throw um=0,Pb=null,Error(r(185));nr(h,k,L),((ra&2)===0||h!==Gi)&&(h===Gi&&((ra&2)===0&&(Tg|=k),Oi===4&&Mf(h,co)),$l(h,L),k===1&&ra===0&&(x.mode&1)===0&&(Rh=Mt()+500,$d&&oe()))}function $l(h,x){var k=h.callbackNode;mr(h,x);var L=sr(h,h===Gi?co:0);if(L===0)k!==null&&tt(k),h.callbackNode=null,h.callbackPriority=0;else if(x=L&-L,h.callbackPriority!==x){if(k!=null&&tt(k),x===1)h.tag===0?J(b_.bind(null,h)):F(b_.bind(null,h)),am(function(){(ra&6)===0&&oe()}),k=null;else{switch(Ht(L)){case 1:k=zr;break;case 4:k=on;break;case 16:k=Mn;break;case 536870912:k=xn;break;default:k=Mn}k=C_(k,y_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function y_(h,x){if(Dg=-1,Lg=0,(ra&6)!==0)throw Error(r(327));var k=h.callbackNode;if(Bh()&&h.callbackNode!==k)return null;var L=sr(h,h===Gi?co:0);if(L===0)return null;if((L&30)!==0||(L&h.expiredLanes)!==0||x)x=Fg(h,L);else{x=L;var X=ra;ra|=2;var se=N_();(Gi!==h||co!==x)&&(Gd=null,Rh=Mt()+500,A0(h,x));do try{nB();break}catch(We){w_(h,We)}while(!0);fs(),Eg.current=se,ra=X,xi!==null?x=0:(Gi=null,co=0,x=Oi)}if(x!==0){if(x===2&&(X=_r(h),X!==0&&(L=X,x=Ib(h,X))),x===1)throw k=lm,A0(h,0),Mf(h,L),$l(h,Mt()),k;if(x===6)Mf(h,L);else{if(X=h.current.alternate,(L&30)===0&&!tB(X)&&(x=Fg(h,L),x===2&&(se=_r(h),se!==0&&(L=se,x=Ib(h,se))),x===1))throw k=lm,A0(h,0),Mf(h,L),$l(h,Mt()),k;switch(h.finishedWork=X,h.finishedLanes=L,x){case 0:case 1:throw Error(r(345));case 2:C0(h,ql,Gd);break;case 3:if(Mf(h,L),(L&130023424)===L&&(x=Tb+500-Mt(),10<x)){if(sr(h,0)!==0)break;if(X=h.suspendedLanes,(X&L)!==L){hl(),h.pingedLanes|=h.suspendedLanes&X;break}h.timeoutHandle=ed(C0.bind(null,h,ql,Gd),x);break}C0(h,ql,Gd);break;case 4:if(Mf(h,L),(L&4194240)===L)break;for(x=h.eventTimes,X=-1;0<L;){var ke=31-sa(L);se=1<<ke,ke=x[ke],ke>X&&(X=ke),L&=~se}if(L=X,L=Mt()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*eB(L/1960))-L,10<L){h.timeoutHandle=ed(C0.bind(null,h,ql,Gd),L);break}C0(h,ql,Gd);break;case 5:C0(h,ql,Gd);break;default:throw Error(r(329))}}}return $l(h,Mt()),h.callbackNode===k?y_.bind(null,h):null}function Ib(h,x){var k=cm;return h.current.memoizedState.isDehydrated&&(A0(h,x).flags|=256),h=Fg(h,x),h!==2&&(x=ql,ql=k,x!==null&&Db(x)),h}function Db(h){ql===null?ql=h:ql.push.apply(ql,h)}function tB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var L=0;L<k.length;L++){var X=k[L],se=X.getSnapshot;X=X.value;try{if(!_n(se(),X))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Mf(h,x){for(x&=~Eb,x&=~Tg,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-sa(x),L=1<<k;h[k]=-1,x&=~L}}function b_(h){if((ra&6)!==0)throw Error(r(327));Bh();var x=sr(h,0);if((x&1)===0)return $l(h,Mt()),null;var k=Fg(h,x);if(h.tag!==0&&k===2){var L=_r(h);L!==0&&(x=L,k=Ib(h,L))}if(k===1)throw k=lm,A0(h,0),Mf(h,x),$l(h,Mt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,C0(h,ql,Gd),$l(h,Mt()),null}function Lb(h,x){var k=ra;ra|=1;try{return h(x)}finally{ra=k,ra===0&&(Rh=Mt()+500,$d&&oe())}}function _0(h){Lf!==null&&Lf.tag===0&&(ra&6)===0&&Bh();var x=ra;ra|=1;var k=zc.transition,L=Ar;try{if(zc.transition=null,Ar=1,h)return h()}finally{Ar=L,zc.transition=k,ra=x,(ra&6)===0&&oe()}}function Fb(){uc=Mh.current,Yn(Mh)}function A0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,_h(k)),xi!==null)for(k=xi.return;k!==null;){var L=k;switch(Ye(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Cf();break;case 3:Rl(),Yn(Xs),Yn(Ks),Hd();break;case 5:k0(L);break;case 4:Rl();break;case 13:Yn(ja);break;case 19:Yn(ja);break;case 10:Ys(L.type._context);break;case 22:case 23:Fb()}k=k.return}if(Gi=h,xi=h=Rf(h.current,null),co=uc=x,Oi=0,lm=null,Eb=Tg=S0=0,ql=cm=null,Wi!==null){for(x=0;x<Wi.length;x++)if(k=Wi[x],L=k.interleaved,L!==null){k.interleaved=null;var X=L.next,se=k.pending;if(se!==null){var ke=se.next;se.next=X,L.next=ke}k.pending=L}Wi=null}return h}function w_(h,x){do{var k=xi;try{if(fs(),Of.current=jg,ad){for(var L=Ra.memoizedState;L!==null;){var X=L.queue;X!==null&&(X.pending=null),L=L.next}ad=!1}if(Bl=0,Va=rs=Ra=null,cc=!1,ju=0,Cb.current=null,k===null||k.return===null){Oi=1,lm=x,xi=null;break}e:{var se=h,ke=k.return,We=k,rt=x;if(x=co,We.flags|=32768,rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var St=rt,Jt=We,Zt=Jt.tag;if((Jt.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var Xt=Jt.alternate;Xt?(Jt.updateQueue=Xt.updateQueue,Jt.memoizedState=Xt.memoizedState,Jt.lanes=Xt.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var Sr=VS(ke);if(Sr!==null){Sr.flags&=-257,GS(Sr,ke,We,se,x),Sr.mode&1&&WS(se,St,x),x=Sr,rt=St;var Dr=x.updateQueue;if(Dr===null){var Mr=new Set;Mr.add(rt),x.updateQueue=Mr}else Dr.add(rt);break e}else{if((x&1)===0){WS(se,St,x),Mb();break e}rt=Error(r(426))}}else if(Tt&&We.mode&1){var Qs=VS(ke);if(Qs!==null){(Qs.flags&65536)===0&&(Qs.flags|=256),GS(Qs,ke,We,se,x),ta(Lh(rt,We));break e}}se=rt=Lh(rt,We),Oi!==4&&(Oi=2),cm===null?cm=[se]:cm.push(se),se=ke;do{switch(se.tag){case 3:se.flags|=65536,x&=-x,se.lanes|=x;var yt=zS(se,rt,x);Ao(se,yt);break e;case 1:We=rt;var ot=se.type,jt=se.stateNode;if((se.flags&128)===0&&(typeof ot.getDerivedStateFromError=="function"||jt!==null&&typeof jt.componentDidCatch=="function"&&(Df===null||!Df.has(jt)))){se.flags|=65536,x&=-x,se.lanes|=x;var ar=HS(se,We,x);Ao(se,ar);break e}}se=se.return}while(se!==null)}k_(k)}catch(Br){x=Br,xi===k&&k!==null&&(xi=k=k.return);continue}break}while(!0)}function N_(){var h=Eg.current;return Eg.current=jg,h===null?jg:h}function Mb(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),Gi===null||(S0&268435455)===0&&(Tg&268435455)===0||Mf(Gi,co)}function Fg(h,x){var k=ra;ra|=2;var L=N_();(Gi!==h||co!==x)&&(Gd=null,A0(h,x));do try{rB();break}catch(X){w_(h,X)}while(!0);if(fs(),ra=k,Eg.current=L,xi!==null)throw Error(r(261));return Gi=null,co=0,Oi}function rB(){for(;xi!==null;)j_(xi)}function nB(){for(;xi!==null&&!ht();)j_(xi)}function j_(h){var x=A_(h.alternate,h,uc);h.memoizedProps=h.pendingProps,x===null?k_(h):xi=x,Cb.current=null}function k_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=X9(k,x,uc),k!==null){xi=k;return}}else{if(k=Y9(k,x),k!==null){k.flags&=32767,xi=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Oi=6,xi=null;return}}if(x=x.sibling,x!==null){xi=x;return}xi=x=h}while(x!==null);Oi===0&&(Oi=5)}function C0(h,x,k){var L=Ar,X=zc.transition;try{zc.transition=null,Ar=1,aB(h,x,k,L)}finally{zc.transition=X,Ar=L}return null}function aB(h,x,k,L){do Bh();while(Lf!==null);if((ra&6)!==0)throw Error(r(327));k=h.finishedWork;var X=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var se=k.lanes|k.childLanes;if(xr(h,se),h===Gi&&(xi=Gi=null,co=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||Pg||(Pg=!0,C_(Mn,function(){return Bh(),null})),se=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||se){se=zc.transition,zc.transition=null;var ke=Ar;Ar=1;var We=ra;ra|=4,Cb.current=null,Q9(h,k),p_(k,h),so(Bc),kc=!!il,Bc=il=null,h.current=k,Z9(k),Pt(),ra=We,Ar=ke,zc.transition=se}else h.current=k;if(Pg&&(Pg=!1,Lf=h,Ig=X),se=h.pendingLanes,se===0&&(Df=null),pa(k.stateNode),$l(h,Mt()),x!==null)for(L=h.onRecoverableError,k=0;k<x.length;k++)X=x[k],L(X.value,{componentStack:X.stack,digest:X.digest});if(Og)throw Og=!1,h=Ob,Ob=null,h;return(Ig&1)!==0&&h.tag!==0&&Bh(),se=h.pendingLanes,(se&1)!==0?h===Pb?um++:(um=0,Pb=h):um=0,oe(),null}function Bh(){if(Lf!==null){var h=Ht(Ig),x=zc.transition,k=Ar;try{if(zc.transition=null,Ar=16>h?16:h,Lf===null)var L=!1;else{if(h=Lf,Lf=null,Ig=0,(ra&6)!==0)throw Error(r(331));var X=ra;for(ra|=4,Pr=h.current;Pr!==null;){var se=Pr,ke=se.child;if((Pr.flags&16)!==0){var We=se.deletions;if(We!==null){for(var rt=0;rt<We.length;rt++){var St=We[rt];for(Pr=St;Pr!==null;){var Jt=Pr;switch(Jt.tag){case 0:case 11:case 15:om(8,Jt,se)}var Zt=Jt.child;if(Zt!==null)Zt.return=Jt,Pr=Zt;else for(;Pr!==null;){Jt=Pr;var Xt=Jt.sibling,Sr=Jt.return;if(c_(Jt),Jt===St){Pr=null;break}if(Xt!==null){Xt.return=Sr,Pr=Xt;break}Pr=Sr}}}var Dr=se.alternate;if(Dr!==null){var Mr=Dr.child;if(Mr!==null){Dr.child=null;do{var Qs=Mr.sibling;Mr.sibling=null,Mr=Qs}while(Mr!==null)}}Pr=se}}if((se.subtreeFlags&2064)!==0&&ke!==null)ke.return=se,Pr=ke;else e:for(;Pr!==null;){if(se=Pr,(se.flags&2048)!==0)switch(se.tag){case 0:case 11:case 15:om(9,se,se.return)}var yt=se.sibling;if(yt!==null){yt.return=se.return,Pr=yt;break e}Pr=se.return}}var ot=h.current;for(Pr=ot;Pr!==null;){ke=Pr;var jt=ke.child;if((ke.subtreeFlags&2064)!==0&&jt!==null)jt.return=ke,Pr=jt;else e:for(ke=ot;Pr!==null;){if(We=Pr,(We.flags&2048)!==0)try{switch(We.tag){case 0:case 11:case 15:Cg(9,We)}}catch(Br){Rs(We,We.return,Br)}if(We===ke){Pr=null;break e}var ar=We.sibling;if(ar!==null){ar.return=We.return,Pr=ar;break e}Pr=We.return}}if(ra=X,oe(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(wa,h)}catch{}L=!0}return L}finally{Ar=k,zc.transition=x}}return!1}function S_(h,x,k){x=Lh(k,x),x=zS(h,x,1),h=_o(h,x,1),x=hl(),h!==null&&(nr(h,1,x),$l(h,x))}function Rs(h,x,k){if(h.tag===3)S_(h,h,k);else for(;x!==null;){if(x.tag===3){S_(x,h,k);break}else if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Df===null||!Df.has(L))){h=Lh(k,h),h=HS(x,h,1),x=_o(x,h,1),h=hl(),x!==null&&(nr(x,1,h),$l(x,h));break}}x=x.return}}function sB(h,x,k){var L=h.pingCache;L!==null&&L.delete(x),x=hl(),h.pingedLanes|=h.suspendedLanes&k,Gi===h&&(co&k)===k&&(Oi===4||Oi===3&&(co&130023424)===co&&500>Mt()-Tb?A0(h,0):Eb|=k),$l(h,x)}function __(h,x){x===0&&((h.mode&1)===0?x=1:(x=It,It<<=1,(It&130023424)===0&&(It=4194304)));var k=hl();h=Zn(h,x),h!==null&&(nr(h,x,k),$l(h,k))}function iB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),__(h,k)}function oB(h,x){var k=0;switch(h.tag){case 13:var L=h.stateNode,X=h.memoizedState;X!==null&&(k=X.retryLane);break;case 19:L=h.stateNode;break;default:throw Error(r(314))}L!==null&&L.delete(x),__(h,k)}var A_;A_=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||Xs.current)Ul=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return Ul=!1,K9(h,x,k);Ul=(h.flags&131072)!==0}else Ul=!1,Tt&&(x.flags&1048576)!==0&&qt(x,Te,x.index);switch(x.lanes=0,x.tag){case 2:var L=x.type;_g(h,x),h=x.pendingProps;var X=jo(x,Ks.current);Ma(x,k),X=Wd(null,x,L,h,X,k);var se=dl();return x.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ha(L)?(se=!0,ol(x)):se=!1,x.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,Tf(x),X.updater=kg,x.stateNode=X,X._reactInternals=x,pb(x,L,h,k),x=vb(null,x,L,!0,se,k)):(x.tag=0,Tt&&se&&At(x),fl(null,x,X,k),x=x.child),x;case 16:L=x.elementType;e:{switch(_g(h,x),h=x.pendingProps,X=L._init,L=X(L._payload),x.type=L,X=x.tag=cB(L),h=ku(L,h),X){case 0:x=gb(null,x,L,h,k);break e;case 1:x=ZS(null,x,L,h,k);break e;case 11:x=KS(null,x,L,h,k);break e;case 14:x=XS(null,x,L,ku(L.type,h),k);break e}throw Error(r(306,L,""))}return x;case 0:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:ku(L,X),gb(h,x,L,X,k);case 1:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:ku(L,X),ZS(h,x,L,X,k);case 3:e:{if(e_(x),h===null)throw Error(r(387));L=x.pendingProps,se=x.memoizedState,X=se.element,j0(h,x),ll(x,L,null,k);var ke=x.memoizedState;if(L=ke.element,se.isDehydrated)if(se={element:L,isDehydrated:!1,cache:ke.cache,pendingSuspenseBoundaries:ke.pendingSuspenseBoundaries,transitions:ke.transitions},x.updateQueue.baseState=se,x.memoizedState=se,x.flags&256){X=Lh(Error(r(423)),x),x=t_(h,x,L,k,X);break e}else if(L!==X){X=Lh(Error(r(424)),x),x=t_(h,x,L,k,X);break e}else for(Et=_i(x.stateNode.containerInfo.firstChild),et=x,Tt=!0,Lt=null,k=An(x,null,L,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(dn(),L===X){x=Vd(h,x,k);break e}fl(h,x,L,k)}x=x.child}return x;case 5:return Th(x),h===null&&dr(x),L=x.type,X=x.pendingProps,se=h!==null?h.memoizedProps:null,ke=X.children,_f(L,X)?ke=null:se!==null&&_f(L,se)&&(x.flags|=32),QS(h,x),fl(h,x,ke,k),x.child;case 6:return h===null&&dr(x),null;case 13:return r_(h,x,k);case 4:return nd(x,x.stateNode.containerInfo),L=x.pendingProps,h===null?x.child=ts(x,null,L,k):fl(h,x,L,k),x.child;case 11:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:ku(L,X),KS(h,x,L,X,k);case 7:return fl(h,x,x.pendingProps,k),x.child;case 8:return fl(h,x,x.pendingProps.children,k),x.child;case 12:return fl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(L=x.type._context,X=x.pendingProps,se=x.memoizedProps,ke=X.value,oa(pi,L._currentValue),L._currentValue=ke,se!==null)if(_n(se.value,ke)){if(se.children===X.children&&!Xs.current){x=Vd(h,x,k);break e}}else for(se=x.child,se!==null&&(se.return=x);se!==null;){var We=se.dependencies;if(We!==null){ke=se.child;for(var rt=We.firstContext;rt!==null;){if(rt.context===L){if(se.tag===1){rt=So(-1,k&-k),rt.tag=2;var St=se.updateQueue;if(St!==null){St=St.shared;var Jt=St.pending;Jt===null?rt.next=rt:(rt.next=Jt.next,Jt.next=rt),St.pending=rt}}se.lanes|=k,rt=se.alternate,rt!==null&&(rt.lanes|=k),ko(se.return,k,x),We.lanes|=k;break}rt=rt.next}}else if(se.tag===10)ke=se.type===x.type?null:se.child;else if(se.tag===18){if(ke=se.return,ke===null)throw Error(r(341));ke.lanes|=k,We=ke.alternate,We!==null&&(We.lanes|=k),ko(ke,k,x),ke=se.sibling}else ke=se.child;if(ke!==null)ke.return=se;else for(ke=se;ke!==null;){if(ke===x){ke=null;break}if(se=ke.sibling,se!==null){se.return=ke.return,ke=se;break}ke=ke.return}se=ke}fl(h,x,X.children,k),x=x.child}return x;case 9:return X=x.type,L=x.pendingProps.children,Ma(x,k),X=Wa(X),L=L(X),x.flags|=1,fl(h,x,L,k),x.child;case 14:return L=x.type,X=ku(L,x.pendingProps),X=ku(L.type,X),XS(h,x,L,X,k);case 15:return YS(h,x,x.type,x.pendingProps,k);case 17:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:ku(L,X),_g(h,x),x.tag=1,Ha(L)?(h=!0,ol(x)):h=!1,Ma(x,k),qS(x,L,X),pb(x,L,X,k),vb(null,x,L,!0,h,k);case 19:return a_(h,x,k);case 22:return JS(h,x,k)}throw Error(r(156,x.tag))};function C_(h,x){return Le(h,x)}function lB(h,x,k,L){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hc(h,x,k,L){return new lB(h,x,k,L)}function Rb(h){return h=h.prototype,!(!h||!h.isReactComponent)}function cB(h){if(typeof h=="function")return Rb(h)?1:0;if(h!=null){if(h=h.$$typeof,h===E)return 11;if(h===G)return 14}return 2}function Rf(h,x){var k=h.alternate;return k===null?(k=Hc(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Mg(h,x,k,L,X,se){var ke=2;if(L=h,typeof h=="function")Rb(h)&&(ke=1);else if(typeof h=="string")ke=5;else e:switch(h){case A:return E0(k.children,X,se,x);case T:ke=8,X|=8;break;case I:return h=Hc(12,k,x,X|2),h.elementType=I,h.lanes=se,h;case M:return h=Hc(13,k,x,X),h.elementType=M,h.lanes=se,h;case q:return h=Hc(19,k,x,X),h.elementType=q,h.lanes=se,h;case te:return Rg(k,X,se,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:ke=10;break e;case C:ke=9;break e;case E:ke=11;break e;case G:ke=14;break e;case Z:ke=16,L=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=Hc(ke,k,x,X),x.elementType=h,x.type=L,x.lanes=se,x}function E0(h,x,k,L){return h=Hc(7,h,L,x),h.lanes=k,h}function Rg(h,x,k,L){return h=Hc(22,h,L,x),h.elementType=te,h.lanes=k,h.stateNode={isHidden:!1},h}function Bb(h,x,k){return h=Hc(6,h,null,x),h.lanes=k,h}function Ub(h,x,k){return x=Hc(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function uB(h,x,k,L,X){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=In(0),this.expirationTimes=In(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.identifierPrefix=L,this.onRecoverableError=X,this.mutableSourceEagerHydrationData=null}function qb(h,x,k,L,X,se,ke,We,rt){return h=new uB(h,x,k,We,rt),x===1?(x=1,se===!0&&(x|=8)):x=0,se=Hc(3,null,null,x),h.current=se,se.stateNode=h,se.memoizedState={element:L,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(se),h}function dB(h,x,k){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:L==null?null:""+L,children:h,containerInfo:x,implementation:k}}function E_(h){if(!h)return ac;h=h._reactInternals;e:{if(Oe(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Ha(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(Ha(k))return $c(h,k,x)}return x}function T_(h,x,k,L,X,se,ke,We,rt){return h=qb(k,L,!0,h,X,se,ke,We,rt),h.context=E_(null),k=h.current,L=hl(),X=Ff(k),se=So(L,X),se.callback=x??null,_o(k,se,X),h.current.lanes=X,nr(h,X,L),$l(h,L),h}function Bg(h,x,k,L){var X=x.current,se=hl(),ke=Ff(X);return k=E_(k),x.context===null?x.context=k:x.pendingContext=k,x=So(se,ke),x.payload={element:h},L=L===void 0?null:L,L!==null&&(x.callback=L),h=_o(X,x,ke),h!==null&&(Au(h,X,ke,se),Nu(h,X,ke)),ke}function Ug(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function O_(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function $b(h,x){O_(h,x),(h=h.alternate)&&O_(h,x)}function fB(){return null}var P_=typeof reportError=="function"?reportError:function(h){console.error(h)};function zb(h){this._internalRoot=h}qg.prototype.render=zb.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));Bg(h,x,null,null)},qg.prototype.unmount=zb.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;_0(function(){Bg(null,h,null,null)}),x[Ss]=null}};function qg(h){this._internalRoot=h}qg.prototype.unstable_scheduleHydration=function(h){if(h){var x=er();h={blockedOn:null,target:h,priority:x};for(var k=0;k<Kn.length&&x!==0&&x<Kn[k].priority;k++);Kn.splice(k,0,h),k===0&&kr(h)}};function Hb(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function $g(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function I_(){}function hB(h,x,k,L,X){if(X){if(typeof L=="function"){var se=L;L=function(){var St=Ug(ke);se.call(St)}}var ke=T_(x,L,h,0,null,!1,!1,"",I_);return h._reactRootContainer=ke,h[Ss]=ke.current,Ll(h.nodeType===8?h.parentNode:h),_0(),ke}for(;X=h.lastChild;)h.removeChild(X);if(typeof L=="function"){var We=L;L=function(){var St=Ug(rt);We.call(St)}}var rt=qb(h,0,!1,null,null,!1,!1,"",I_);return h._reactRootContainer=rt,h[Ss]=rt.current,Ll(h.nodeType===8?h.parentNode:h),_0(function(){Bg(x,rt,k,L)}),rt}function zg(h,x,k,L,X){var se=k._reactRootContainer;if(se){var ke=se;if(typeof X=="function"){var We=X;X=function(){var rt=Ug(ke);We.call(rt)}}Bg(x,ke,h,X)}else ke=hB(k,x,h,X,L);return Ug(ke)}Gn=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=Ct(x.pendingLanes);k!==0&&(Dt(x,k|1),$l(x,Mt()),(ra&6)===0&&(Rh=Mt()+500,oe()))}break;case 13:_0(function(){var L=Zn(h,1);if(L!==null){var X=hl();Au(L,h,1,X)}}),$b(h,1)}},Rn=function(h){if(h.tag===13){var x=Zn(h,134217728);if(x!==null){var k=hl();Au(x,h,134217728,k)}$b(h,134217728)}},cn=function(h){if(h.tag===13){var x=Ff(h),k=Zn(h,x);if(k!==null){var L=hl();Au(k,h,x,L)}$b(h,x)}},er=function(){return Ar},Sn=function(h,x){var k=Ar;try{return Ar=h,x()}finally{Ar=k}},Yt=function(h,x,k){switch(x){case"input":if(ve(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var L=k[x];if(L!==h&&L.form===h.form){var X=qc(L);if(!X)throw Error(r(90));ne(L),ve(L,X)}}}break;case"textarea":Re(h,k);break;case"select":x=k.value,x!=null&&ue(h,!!k.multiple,x,!1)}},Er=Lb,Yr=_0;var pB={usingClientEntryPoint:!1,Events:[tc,rc,qc,Ut,wr,Lb]},dm={findFiberByHostInstance:Uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mB={bundleType:dm.bundleType,version:dm.version,rendererPackageName:dm.rendererPackageName,rendererConfig:dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Je(h),h===null?null:h.stateNode},findFiberByHostInstance:dm.findFiberByHostInstance||fB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{wa=Hg.inject(mB),Pn=Hg}catch{}}return zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pB,zl.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hb(x))throw Error(r(200));return dB(h,x,null,k)},zl.createRoot=function(h,x){if(!Hb(h))throw Error(r(299));var k=!1,L="",X=P_;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onRecoverableError!==void 0&&(X=x.onRecoverableError)),x=qb(h,1,!1,null,null,k,!1,L,X),h[Ss]=x.current,Ll(h.nodeType===8?h.parentNode:h),new zb(x)},zl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=Je(x),h=h===null?null:h.stateNode,h},zl.flushSync=function(h){return _0(h)},zl.hydrate=function(h,x,k){if(!$g(x))throw Error(r(200));return zg(null,h,x,!0,k)},zl.hydrateRoot=function(h,x,k){if(!Hb(h))throw Error(r(405));var L=k!=null&&k.hydratedSources||null,X=!1,se="",ke=P_;if(k!=null&&(k.unstable_strictMode===!0&&(X=!0),k.identifierPrefix!==void 0&&(se=k.identifierPrefix),k.onRecoverableError!==void 0&&(ke=k.onRecoverableError)),x=T_(x,null,h,1,k??null,X,!1,se,ke),h[Ss]=x.current,Ll(h),L)for(h=0;h<L.length;h++)k=L[h],X=k._getVersion,X=X(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,X]:x.mutableSourceEagerHydrationData.push(k,X);return new qg(x)},zl.render=function(h,x,k){if(!$g(x))throw Error(r(200));return zg(null,h,x,!1,k)},zl.unmountComponentAtNode=function(h){if(!$g(h))throw Error(r(40));return h._reactRootContainer?(_0(function(){zg(null,null,h,!1,function(){h._reactRootContainer=null,h[Ss]=null})}),!0):!1},zl.unstable_batchedUpdates=Lb,zl.unstable_renderSubtreeIntoContainer=function(h,x,k,L){if(!$g(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return zg(h,x,k,!1,L)},zl.version="18.3.1-next-f1338f8080-20240426",zl}var q_;function Q8(){if(q_)return Gb.exports;q_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gb.exports=NB(),Gb.exports}var $_;function jB(){if($_)return Vg;$_=1;var e=Q8();return Vg.createRoot=e.createRoot,Vg.hydrateRoot=e.hydrateRoot,Vg}var kB=jB();const SB=Ea(kB),_B="modulepreload",AB=function(e){return"/"+e},z_={},_j=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=AB(u),u in z_)return;z_[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":_B,f||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((p,y)=>{m.addEventListener("load",p),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const CB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Z8=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();var EB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const TB=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>U.createElement("svg",{ref:c,...EB,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Z8("lucide",s),...l},[...o.map(([u,f])=>U.createElement(u,f)),...Array.isArray(i)?i:[i]]));const Bt=(e,t)=>{const r=U.forwardRef(({className:n,...s},i)=>U.createElement(TB,{ref:i,iconNode:t,className:Z8(`lucide-${CB(e)}`,n),...s}));return r.displayName=`${e}`,r};const H_=Bt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const OB=Bt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const pd=Bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Ek=Bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ho=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const PB=Bt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const ax=Bt("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const Gg=Bt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const gy=Bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const IB=Bt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const W_=Bt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const Gv=Bt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const su=Bt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Dv=Bt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const yd=Bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ha=Bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const V_=Bt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const eD=Bt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const qm=Bt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const Ad=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const xl=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Aj=Bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const os=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const DB=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const ea=Bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const yn=Bt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const LB=Bt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const FB=Bt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const tD=Bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const bd=Bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Os=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const hm=Bt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const rD=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const nD=Bt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const ff=Bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const H0=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const G_=Bt("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const aD=Bt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Di=Bt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const MB=Bt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const wd=Bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const RB=Bt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Lv=Bt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const BB=Bt("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const UB=Bt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const Ka=Bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const K_=Bt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const qB=Bt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const $B=Bt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const dc=Bt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const sx=Bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Zf=Bt("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const W0=Bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const zB=Bt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Kd=Bt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const HB=Bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const af=Bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const WB=Bt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const bl=Bt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Kg=Bt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const a0=Bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Cj=Bt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Ej=Bt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const Vf=Bt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const V0=Bt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const VB=Bt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const GB=Bt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const wt=Bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const KB=Bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const sD=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ai=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const iD=Bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Fv=Bt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const XB=Bt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const YB=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Mv=Bt("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const JB=Bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const xo=Bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const QB=Bt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const ZB=Bt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const eU=Bt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const tU=Bt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Tj=Bt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Uh=Bt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const rU=Bt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Oj=Bt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const bc=Bt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Pj=Bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const nU=Bt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const vn=Bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ij=Bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const Nd=Bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const aU=Bt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Kv=Bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Mi=Bt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const sU=Bt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const Hu=Bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const nu=Bt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const X_=Bt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const oD=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Xv=Bt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const iU=Bt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const vy=Bt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ix=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ji=Bt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const jl=Bt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const oU=Bt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const lU=Bt("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const G0=Bt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Es=Bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const pm=Bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Ur=Bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const cU=Bt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const uU=Bt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const jd=Bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const s0=Bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Wu=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Xg=Bt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Uu=Bt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const wl=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const e0=Bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Qh=Bt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const dU=Bt("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const ir=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Yv=Bt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),fU=[{id:"dashboard",label:"Dashboard",icon:a.jsx(WB,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:a.jsx(ha,{className:"w-5 h-5"})},{id:"inbox",label:"Shared Inbox",icon:a.jsx(ai,{className:"w-5 h-5"})},{id:"crm",label:"CRM",icon:a.jsx(e0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:a.jsx(su,{className:"w-5 h-5"})},{id:"projects",label:"Projects",icon:a.jsx(Ka,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:a.jsx(G0,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:a.jsx(jl,{className:"w-5 h-5"})},{id:"invoices",label:"Billing & Invoicing",icon:a.jsx(ff,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:a.jsx(Ij,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:a.jsx(qm,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:a.jsx(Lv,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:a.jsx(Fv,{className:"w-5 h-5"})},{id:"integrations",label:"Integrations",icon:a.jsx(Xv,{className:"w-5 h-5"})}],Rv=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],Yg=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],hU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,n=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(n+s/60)},$m=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],mm=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if($m.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),u=`UTC${t>=0?"+":"-"}${o}:${l}`;if($m.find(f=>f.value===u))return u}const n=t;let s="UTC+0",i=1/0;return $m.forEach(o=>{const l=hU(o.value),c=Math.abs(l-n);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},Y_=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function lD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=lD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ua(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=lD(e))&&(n&&(n+=" "),n+=t);return n}var Yb,J_;function Kl(){if(J_)return Yb;J_=1;var e=Array.isArray;return Yb=e,Yb}var Jb,Q_;function cD(){if(Q_)return Jb;Q_=1;var e=typeof Wg=="object"&&Wg&&Wg.Object===Object&&Wg;return Jb=e,Jb}var Qb,Z_;function Ed(){if(Z_)return Qb;Z_=1;var e=cD(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Qb=r,Qb}var Zb,e6;function sg(){if(e6)return Zb;e6=1;var e=Ed(),t=e.Symbol;return Zb=t,Zb}var e2,t6;function pU(){if(t6)return e2;t6=1;var e=sg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(l?o[s]=c:delete o[s]),f}return e2=i,e2}var t2,r6;function mU(){if(r6)return t2;r6=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return t2=r,t2}var r2,n6;function vf(){if(n6)return r2;n6=1;var e=sg(),t=pU(),r=mU(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return r2=o,r2}var n2,a6;function yf(){if(a6)return n2;a6=1;function e(t){return t!=null&&typeof t=="object"}return n2=e,n2}var a2,s6;function $p(){if(s6)return a2;s6=1;var e=vf(),t=yf(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return a2=n,a2}var s2,i6;function Tk(){if(i6)return s2;i6=1;var e=Kl(),t=$p(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return s2=s,s2}var i2,o6;function f0(){if(o6)return i2;o6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return i2=e,i2}var o2,l6;function Ok(){if(l6)return o2;l6=1;var e=vf(),t=f0(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==n||c==s||c==r||c==i}return o2=o,o2}var l2,c6;function xU(){if(c6)return l2;c6=1;var e=Ed(),t=e["__core-js_shared__"];return l2=t,l2}var c2,u6;function gU(){if(u6)return c2;u6=1;var e=xU(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return c2=r,c2}var u2,d6;function uD(){if(d6)return u2;d6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return u2=r,u2}var d2,f6;function vU(){if(f6)return d2;f6=1;var e=Ok(),t=gU(),r=f0(),n=uD(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(m){if(!r(m)||t(m))return!1;var p=e(m)?f:i;return p.test(n(m))}return d2=d,d2}var f2,h6;function yU(){if(h6)return f2;h6=1;function e(t,r){return t?.[r]}return f2=e,f2}var h2,p6;function hh(){if(p6)return h2;p6=1;var e=vU(),t=yU();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return h2=r,h2}var p2,m6;function yy(){if(m6)return p2;m6=1;var e=hh(),t=e(Object,"create");return p2=t,p2}var m2,x6;function bU(){if(x6)return m2;x6=1;var e=yy();function t(){this.__data__=e?e(null):{},this.size=0}return m2=t,m2}var x2,g6;function wU(){if(g6)return x2;g6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return x2=e,x2}var g2,v6;function NU(){if(v6)return g2;v6=1;var e=yy(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return g2=s,g2}var v2,y6;function jU(){if(y6)return v2;y6=1;var e=yy(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return v2=n,v2}var y2,b6;function kU(){if(b6)return y2;b6=1;var e=yy(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return y2=r,y2}var b2,w6;function SU(){if(w6)return b2;w6=1;var e=bU(),t=wU(),r=NU(),n=jU(),s=kU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,b2=i,b2}var w2,N6;function _U(){if(N6)return w2;N6=1;function e(){this.__data__=[],this.size=0}return w2=e,w2}var N2,j6;function Pk(){if(j6)return N2;j6=1;function e(t,r){return t===r||t!==t&&r!==r}return N2=e,N2}var j2,k6;function by(){if(k6)return j2;k6=1;var e=Pk();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return j2=t,j2}var k2,S6;function AU(){if(S6)return k2;S6=1;var e=by(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return k2=n,k2}var S2,_6;function CU(){if(_6)return S2;_6=1;var e=by();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return S2=t,S2}var _2,A6;function EU(){if(A6)return _2;A6=1;var e=by();function t(r){return e(this.__data__,r)>-1}return _2=t,_2}var A2,C6;function TU(){if(C6)return A2;C6=1;var e=by();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return A2=t,A2}var C2,E6;function wy(){if(E6)return C2;E6=1;var e=_U(),t=AU(),r=CU(),n=EU(),s=TU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,C2=i,C2}var E2,T6;function Ik(){if(T6)return E2;T6=1;var e=hh(),t=Ed(),r=e(t,"Map");return E2=r,E2}var T2,O6;function OU(){if(O6)return T2;O6=1;var e=SU(),t=wy(),r=Ik();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return T2=n,T2}var O2,P6;function PU(){if(P6)return O2;P6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return O2=e,O2}var P2,I6;function Ny(){if(I6)return P2;I6=1;var e=PU();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return P2=t,P2}var I2,D6;function IU(){if(D6)return I2;D6=1;var e=Ny();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return I2=t,I2}var D2,L6;function DU(){if(L6)return D2;L6=1;var e=Ny();function t(r){return e(this,r).get(r)}return D2=t,D2}var L2,F6;function LU(){if(F6)return L2;F6=1;var e=Ny();function t(r){return e(this,r).has(r)}return L2=t,L2}var F2,M6;function FU(){if(M6)return F2;M6=1;var e=Ny();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return F2=t,F2}var M2,R6;function Dk(){if(R6)return M2;R6=1;var e=OU(),t=IU(),r=DU(),n=LU(),s=FU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,M2=i,M2}var R2,B6;function dD(){if(B6)return R2;B6=1;var e=Dk(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,R2=r,R2}var B2,U6;function MU(){if(U6)return B2;U6=1;var e=dD(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return B2=r,B2}var U2,q6;function RU(){if(q6)return U2;q6=1;var e=MU(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,u){i.push(c?u.replace(r,"$1"):l||o)}),i});return U2=n,U2}var q2,$6;function Lk(){if($6)return q2;$6=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return q2=e,q2}var $2,z6;function BU(){if(z6)return $2;z6=1;var e=sg(),t=Lk(),r=Kl(),n=$p(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return $2=o,$2}var z2,H6;function fD(){if(H6)return z2;H6=1;var e=BU();function t(r){return r==null?"":e(r)}return z2=t,z2}var H2,W6;function hD(){if(W6)return H2;W6=1;var e=Kl(),t=Tk(),r=RU(),n=fD();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return H2=s,H2}var W2,V6;function jy(){if(V6)return W2;V6=1;var e=$p();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return W2=t,W2}var V2,G6;function Fk(){if(G6)return V2;G6=1;var e=hD(),t=jy();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return V2=r,V2}var G2,K6;function pD(){if(K6)return G2;K6=1;var e=Fk();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return G2=t,G2}var UU=pD();const iu=Ea(UU);var K2,X6;function qU(){if(X6)return K2;X6=1;function e(t){return t==null}return K2=e,K2}var $U=qU();const Jn=Ea($U);var X2,Y6;function zU(){if(Y6)return X2;Y6=1;var e=vf(),t=Kl(),r=yf(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return X2=s,X2}var HU=zU();const ig=Ea(HU);var WU=Ok();const Tn=Ea(WU);var VU=f0();const zp=Ea(VU);var Y2={exports:{}},va={};var J6;function GU(){if(J6)return va;J6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case n:case u:case f:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case m:case d:case i:return g;default:return b}}case t:return b}}}return va.ContextConsumer=o,va.ContextProvider=i,va.Element=e,va.ForwardRef=c,va.Fragment=r,va.Lazy=m,va.Memo=d,va.Portal=t,va.Profiler=s,va.StrictMode=n,va.Suspense=u,va.SuspenseList=f,va.isAsyncMode=function(){return!1},va.isConcurrentMode=function(){return!1},va.isContextConsumer=function(g){return v(g)===o},va.isContextProvider=function(g){return v(g)===i},va.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},va.isForwardRef=function(g){return v(g)===c},va.isFragment=function(g){return v(g)===r},va.isLazy=function(g){return v(g)===m},va.isMemo=function(g){return v(g)===d},va.isPortal=function(g){return v(g)===t},va.isProfiler=function(g){return v(g)===s},va.isStrictMode=function(g){return v(g)===n},va.isSuspense=function(g){return v(g)===u},va.isSuspenseList=function(g){return v(g)===f},va.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===n||g===u||g===f||g===p||typeof g=="object"&&g!==null&&(g.$$typeof===m||g.$$typeof===d||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===y||g.getModuleId!==void 0)},va.typeOf=v,va}var Q6;function KU(){return Q6||(Q6=1,Y2.exports=GU()),Y2.exports}var mD=KU(),J2,Z6;function xD(){if(Z6)return J2;Z6=1;var e=vf(),t=yf(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return J2=n,J2}var Q2,eA;function XU(){if(eA)return Q2;eA=1;var e=xD();function t(r){return e(r)&&r!=+r}return Q2=t,Q2}var YU=XU();const Hp=Ea(YU);var JU=xD();const QU=Ea(JU);var Mu=function(t){return t===0?0:t>0?1:-1},M0=function(t){return ig(t)&&t.indexOf("%")===t.length-1},hr=function(t){return QU(t)&&!Hp(t)},Fi=function(t){return hr(t)||ig(t)},ZU=0,og=function(t){var r=++ZU;return"".concat(t||"").concat(r)},th=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!hr(t)&&!ig(t))return n;var i;if(M0(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Hp(i)&&(i=n),s&&i>r&&(i=r),i},Gf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},eq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},ru=function(t,r){return hr(t)&&hr(r)?function(n){return t+n*(r-t)}:function(){return r}};function Jv(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):iu(n,t))===r})}function np(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Dj(e){"@babel/helpers - typeof";return Dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dj(e)}var tq=["viewBox","children"],rq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tA=["points","pathLength"],Z2={svg:tq,polygon:tA,polyline:tA},Mk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Qv=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(U.isValidElement(t)&&(n=t.props),!zp(n))return null;var s={};return Object.keys(n).forEach(function(i){Mk.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},nq=function(t,r,n){return function(s){return t(r,n,s),null}},Zv=function(t,r,n){if(!zp(t)||Dj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Mk.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=nq(o,r,n))}),s},aq=["children"],sq=["children"];function rA(e,t){if(e==null)return{};var r=iq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lj(e){"@babel/helpers - typeof";return Lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lj(e)}var nA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},sf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},aA=null,ew=null,Rk=function e(t){if(t===aA&&Array.isArray(ew))return ew;var r=[];return U.Children.forEach(t,function(n){Jn(n)||(mD.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),ew=r,aA=t,r};function qu(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return sf(s)}):n=[sf(t)],Rk(e).forEach(function(s){var i=iu(s,"type.displayName")||iu(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function hc(e,t){var r=qu(e,t);return r&&r[0]}var sA=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!hr(n)||n<=0||!hr(s)||s<=0)},oq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lq=function(t){return t&&t.type&&ig(t.type)&&oq.indexOf(t.type)>=0},cq=function(t){return t&&Lj(t)==="object"&&"clipDot"in t},uq=function(t,r,n,s){var i,o=(i=Z2?.[s])!==null&&i!==void 0?i:[];return!Tn(t)&&(s&&o.includes(r)||rq.includes(r))||n&&Mk.includes(r)},qn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(U.isValidElement(t)&&(s=t.props),!zp(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;uq((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Fj=function e(t,r){if(t===r)return!0;var n=U.Children.count(t);if(n!==U.Children.count(r))return!1;if(n===0)return!0;if(n===1)return iA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!iA(i,o))return!1}return!0},iA=function(t,r){if(Jn(t)&&Jn(r))return!0;if(!Jn(t)&&!Jn(r)){var n=t.props||{},s=n.children,i=rA(n,aq),o=r.props||{},l=o.children,c=rA(o,sq);return s&&l?np(i,c)&&Fj(s,l):!s&&!l?np(i,c):!1}return!1},oA=function(t,r){var n=[],s={};return Rk(t).forEach(function(i,o){if(lq(i))n.push(i);else if(i){var l=sf(i.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!s[l])){var d=u(i,l,o);n.push(d),s[l]=!0}}}),n},dq=function(t){var r=t&&t.type;return r&&nA[r]?nA[r]:null},fq=function(t,r){return Rk(r).indexOf(t)},hq=["children","width","height","viewBox","className","style","title","desc"];function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mj.apply(this,arguments)}function pq(e,t){if(e==null)return{};var r=mq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Rj(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=pq(e,hq),f=s||{width:r,height:n,x:0,y:0},d=ua("recharts-surface",i);return at.createElement("svg",Mj({},qn(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),at.createElement("title",null,l),at.createElement("desc",null,c),t)}var xq=["children","className"];function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bj.apply(this,arguments)}function gq(e,t){if(e==null)return{};var r=vq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ts=at.forwardRef(function(e,t){var r=e.children,n=e.className,s=gq(e,xq),i=ua("recharts-layer",n);return at.createElement("g",Bj({className:i},qn(s,!0),{ref:t}),r)}),of=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},tw,lA;function yq(){if(lA)return tw;lA=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return tw=e,tw}var rw,cA;function bq(){if(cA)return rw;cA=1;var e=yq();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return rw=t,rw}var nw,uA;function gD(){if(uA)return nw;uA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(u){return l.test(u)}return nw=c,nw}var aw,dA;function wq(){if(dA)return aw;dA=1;function e(t){return t.split("")}return aw=e,aw}var sw,fA;function Nq(){if(fA)return sw;fA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=u+"?",v="["+i+"]?",g="(?:"+p+"(?:"+[f,d,m].join("|")+")"+v+y+")*",b=v+y+g,w="(?:"+[f+l+"?",l,d,m,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+w+b,"g");function N(S){return S.match(j)||[]}return sw=N,sw}var iw,hA;function jq(){if(hA)return iw;hA=1;var e=wq(),t=gD(),r=Nq();function n(s){return t(s)?r(s):e(s)}return iw=n,iw}var ow,pA;function kq(){if(pA)return ow;pA=1;var e=bq(),t=gD(),r=jq(),n=fD();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[i]()+u}}return ow=s,ow}var lw,mA;function Sq(){if(mA)return lw;mA=1;var e=kq(),t=e("toUpperCase");return lw=t,lw}var _q=Sq();const ky=Ea(_q);function Ga(e){return function(){return e}}const vD=Math.cos,e1=Math.sin,Vu=Math.sqrt,t1=Math.PI,Sy=2*t1,Uj=Math.PI,qj=2*Uj,P0=1e-6,Aq=qj-P0;function yD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Cq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yD;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Eq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yD:Cq(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,f=o-t,d=l-r,m=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>P0)if(!(Math.abs(d*c-u*f)>P0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=s-l,v=c*c+u*u,g=p*p+y*y,b=Math.sqrt(v),w=Math.sqrt(m),j=i*Math.tan((Uj-Math.acos((v+m-g)/(2*b*w)))/2),N=j/w,S=j/b;Math.abs(N-1)>P0&&this._append`L${t+N*f},${r+N*d}`,this._append`A${i},${i},0,0,${+(d*p>f*y)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,f=r+c,d=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>P0||Math.abs(this._y1-f)>P0)&&this._append`L${u},${f}`,n&&(m<0&&(m=m%qj+qj),m>Aq?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:m>P0&&this._append`A${n},${n},0,${+(m>=Uj)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Bk(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Eq(t)}function Uk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bD(e){this._context=e}bD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _y(e){return new bD(e)}function wD(e){return e[0]}function ND(e){return e[1]}function jD(e,t){var r=Ga(!0),n=null,s=_y,i=null,o=Bk(l);e=typeof e=="function"?e:e===void 0?wD:Ga(e),t=typeof t=="function"?t:t===void 0?ND:Ga(t);function l(c){var u,f=(c=Uk(c)).length,d,m=!1,p;for(n==null&&(i=s(p=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,u,c),+t(d,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ga(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ga(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ga(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Jg(e,t,r){var n=null,s=Ga(!0),i=null,o=_y,l=null,c=Bk(u);e=typeof e=="function"?e:e===void 0?wD:Ga(+e),t=typeof t=="function"?t:Ga(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ND:Ga(+r);function u(d){var m,p,y,v=(d=Uk(d)).length,g,b=!1,w,j=new Array(v),N=new Array(v);for(i==null&&(l=o(w=c())),m=0;m<=v;++m){if(!(m<v&&s(g=d[m],m,d))===b)if(b=!b)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(j[y],N[y]);l.lineEnd(),l.areaEnd()}b&&(j[m]=+e(g,m,d),N[m]=+t(g,m,d),l.point(n?+n(g,m,d):j[m],r?+r(g,m,d):N[m]))}if(w)return l=null,w+""||null}function f(){return jD().defined(s).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ga(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Ga(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Ga(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ga(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Ga(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Ga(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Ga(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class kD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Tq(e){return new kD(e,!0)}function Oq(e){return new kD(e,!1)}const qk={draw(e,t){const r=Vu(t/t1);e.moveTo(r,0),e.arc(0,0,r,0,Sy)}},Pq={draw(e,t){const r=Vu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},SD=Vu(1/3),Iq=SD*2,Dq={draw(e,t){const r=Vu(t/Iq),n=r*SD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Lq={draw(e,t){const r=Vu(t),n=-r/2;e.rect(n,n,r,r)}},Fq=.8908130915292852,_D=e1(t1/10)/e1(7*t1/10),Mq=e1(Sy/10)*_D,Rq=-vD(Sy/10)*_D,Bq={draw(e,t){const r=Vu(t*Fq),n=Mq*r,s=Rq*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Sy*i/5,l=vD(o),c=e1(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},cw=Vu(3),Uq={draw(e,t){const r=-Vu(t/(cw*3));e.moveTo(0,r*2),e.lineTo(-cw*r,-r),e.lineTo(cw*r,-r),e.closePath()}},Wc=-.5,Vc=Vu(3)/2,$j=1/Vu(12),qq=($j/2+1)*3,$q={draw(e,t){const r=Vu(t/qq),n=r/2,s=r*$j,i=n,o=r*$j+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Wc*n-Vc*s,Vc*n+Wc*s),e.lineTo(Wc*i-Vc*o,Vc*i+Wc*o),e.lineTo(Wc*l-Vc*c,Vc*l+Wc*c),e.lineTo(Wc*n+Vc*s,Wc*s-Vc*n),e.lineTo(Wc*i+Vc*o,Wc*o-Vc*i),e.lineTo(Wc*l+Vc*c,Wc*c-Vc*l),e.closePath()}};function zq(e,t){let r=null,n=Bk(s);e=typeof e=="function"?e:Ga(e||qk),t=typeof t=="function"?t:Ga(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ga(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ga(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function r1(){}function n1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function AD(e){this._context=e}AD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:n1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hq(e){return new AD(e)}function CD(e){this._context=e}CD.prototype={areaStart:r1,areaEnd:r1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wq(e){return new CD(e)}function ED(e){this._context=e}ED.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vq(e){return new ED(e)}function TD(e){this._context=e}TD.prototype={areaStart:r1,areaEnd:r1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Gq(e){return new TD(e)}function xA(e){return e<0?-1:1}function gA(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(xA(i)+xA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function vA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function uw(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function a1(e){this._context=e}a1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uw(this,this._t0,vA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uw(this,vA(this,r=gA(this,e,t)),r);break;default:uw(this,this._t0,r=gA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function OD(e){this._context=new PD(e)}(OD.prototype=Object.create(a1.prototype)).point=function(e,t){a1.prototype.point.call(this,t,e)};function PD(e){this._context=e}PD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function Kq(e){return new a1(e)}function Xq(e){return new OD(e)}function ID(e){this._context=e}ID.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=yA(e),s=yA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yA(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Yq(e){return new ID(e)}function Ay(e,t){this._context=e,this._t=t}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Jq(e){return new Ay(e,.5)}function Qq(e){return new Ay(e,0)}function Zq(e){return new Ay(e,1)}function mp(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function zj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function e$(e,t){return e[t]}function t$(e){const t=[];return t.key=e,t}function r$(){var e=Ga([]),t=zj,r=mp,n=e$;function s(i){var o=Array.from(e.apply(this,arguments),t$),l,c=o.length,u=-1,f;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,f=Uk(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ga(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ga(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?zj:typeof i=="function"?i:Ga(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??mp,s):r},s}function n$(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}mp(e,t)}}function a$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}mp(e,t)}}function s$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[n][1]||0,m=f[n-1][1]||0,p=(d-m)/2,y=0;y<l;++y){var v=e[t[y]],g=v[n][1]||0,b=v[n-1][1]||0;p+=g-b}c+=d,u+=p*d}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,mp(e,t)}}function ox(e){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}var i$=["type","size","sizeType"];function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hj.apply(this,arguments)}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){o$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o$(e,t,r){return t=l$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l$(e){var t=c$(e,"string");return ox(t)=="symbol"?t:t+""}function c$(e,t){if(ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u$(e,t){if(e==null)return{};var r=d$(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var DD={symbolCircle:qk,symbolCross:Pq,symbolDiamond:Dq,symbolSquare:Lq,symbolStar:Bq,symbolTriangle:Uq,symbolWye:$q},f$=Math.PI/180,h$=function(t){var r="symbol".concat(ky(t));return DD[r]||qk},p$=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*f$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},m$=function(t,r){DD["symbol".concat(ky(t))]=r},$k=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=u$(t,i$),u=wA(wA({},c),{},{type:n,size:i,sizeType:l}),f=function(){var g=h$(n),b=zq().type(g).size(p$(i,l,n));return b()},d=u.className,m=u.cx,p=u.cy,y=qn(u,!0);return m===+m&&p===+p&&i===+i?at.createElement("path",Hj({},y,{className:ua("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(p,")"),d:f()})):null};$k.registerSymbol=m$;function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wj.apply(this,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){lx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FD(n.key),n)}}function y$(e,t,r){return t&&v$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b$(e,t,r){return t=s1(t),w$(e,LD()?Reflect.construct(t,r||[],s1(e).constructor):t.apply(e,r))}function w$(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N$(e)}function N$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LD=function(){return!!e})()}function s1(e){return s1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s1(e)}function j$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Vj(e,t)}function lx(e,t,r){return t=FD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FD(e){var t=k$(e,"string");return xp(t)=="symbol"?t:t+""}function k$(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gc=32,zk=(function(e){function t(){return g$(this,t),b$(this,t,arguments)}return j$(t,e),y$(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Gc/2,o=Gc/6,l=Gc/3,c=n.inactive?s:n.color;if(n.type==="plainline")return at.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Gc,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return at.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Gc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return at.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gc/8,"h").concat(Gc,"v").concat(Gc*3/4,"h").concat(-Gc,"z"),className:"recharts-legend-icon"});if(at.isValidElement(n.legendIcon)){var u=x$({},n);return delete u.legendIcon,at.cloneElement(n.legendIcon,u)}return at.createElement($k,{fill:c,cx:i,cy:i,size:Gc,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Gc,height:Gc},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var v=p.formatter||c,g=ua(lx(lx({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=Tn(p.value)?null:p.value;of(!Tn(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return at.createElement("li",Wj({className:g,style:d,key:"legend-item-".concat(y)},Zv(n.props,p,y)),at.createElement(Rj,{width:o,height:o,viewBox:f,style:m},n.renderIcon(p)),at.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(b,p,y):b))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return at.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(U.PureComponent);lx(zk,"displayName","Legend");lx(zk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var dw,jA;function S$(){if(jA)return dw;jA=1;var e=wy();function t(){this.__data__=new e,this.size=0}return dw=t,dw}var fw,kA;function _$(){if(kA)return fw;kA=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return fw=e,fw}var hw,SA;function A$(){if(SA)return hw;SA=1;function e(t){return this.__data__.get(t)}return hw=e,hw}var pw,_A;function C$(){if(_A)return pw;_A=1;function e(t){return this.__data__.has(t)}return pw=e,pw}var mw,AA;function E$(){if(AA)return mw;AA=1;var e=wy(),t=Ik(),r=Dk(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<n-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return mw=s,mw}var xw,CA;function MD(){if(CA)return xw;CA=1;var e=wy(),t=S$(),r=_$(),n=A$(),s=C$(),i=E$();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,xw=o,xw}var gw,EA;function T$(){if(EA)return gw;EA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return gw=t,gw}var vw,TA;function O$(){if(TA)return vw;TA=1;function e(t){return this.__data__.has(t)}return vw=e,vw}var yw,OA;function RD(){if(OA)return yw;OA=1;var e=Dk(),t=T$(),r=O$();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,yw=n,yw}var bw,PA;function BD(){if(PA)return bw;PA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return bw=e,bw}var ww,IA;function UD(){if(IA)return ww;IA=1;function e(t,r){return t.has(r)}return ww=e,ww}var Nw,DA;function qD(){if(DA)return Nw;DA=1;var e=RD(),t=BD(),r=UD(),n=1,s=2;function i(o,l,c,u,f,d){var m=c&n,p=o.length,y=l.length;if(p!=y&&!(m&&y>p))return!1;var v=d.get(o),g=d.get(l);if(v&&g)return v==l&&g==o;var b=-1,w=!0,j=c&s?new e:void 0;for(d.set(o,l),d.set(l,o);++b<p;){var N=o[b],S=l[b];if(u)var P=m?u(S,N,b,l,o,d):u(N,S,b,o,l,d);if(P!==void 0){if(P)continue;w=!1;break}if(j){if(!t(l,function(A,T){if(!r(j,T)&&(N===A||f(N,A,c,u,d)))return j.push(T)})){w=!1;break}}else if(!(N===S||f(N,S,c,u,d))){w=!1;break}}return d.delete(o),d.delete(l),w}return Nw=i,Nw}var jw,LA;function P$(){if(LA)return jw;LA=1;var e=Ed(),t=e.Uint8Array;return jw=t,jw}var kw,FA;function I$(){if(FA)return kw;FA=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return kw=e,kw}var Sw,MA;function Hk(){if(MA)return Sw;MA=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return Sw=e,Sw}var _w,RA;function D$(){if(RA)return _w;RA=1;var e=sg(),t=P$(),r=Pk(),n=qD(),s=I$(),i=Hk(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Map]",m="[object Number]",p="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",j=e?e.prototype:void 0,N=j?j.valueOf:void 0;function S(P,A,T,I,B,C,E){switch(T){case w:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case b:return!(P.byteLength!=A.byteLength||!C(new t(P),new t(A)));case c:case u:case m:return r(+P,+A);case f:return P.name==A.name&&P.message==A.message;case p:case v:return P==A+"";case d:var M=s;case y:var q=I&o;if(M||(M=i),P.size!=A.size&&!q)return!1;var G=E.get(P);if(G)return G==A;I|=l,E.set(P,A);var Z=n(M(P),M(A),I,B,C,E);return E.delete(P),Z;case g:if(N)return N.call(P)==N.call(A)}return!1}return _w=S,_w}var Aw,BA;function $D(){if(BA)return Aw;BA=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return Aw=e,Aw}var Cw,UA;function L$(){if(UA)return Cw;UA=1;var e=$D(),t=Kl();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return Cw=r,Cw}var Ew,qA;function F$(){if(qA)return Ew;qA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return Ew=e,Ew}var Tw,$A;function M$(){if($A)return Tw;$A=1;function e(){return[]}return Tw=e,Tw}var Ow,zA;function R$(){if(zA)return Ow;zA=1;var e=F$(),t=M$(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return Ow=i,Ow}var Pw,HA;function B$(){if(HA)return Pw;HA=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return Pw=e,Pw}var Iw,WA;function U$(){if(WA)return Iw;WA=1;var e=vf(),t=yf(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Iw=n,Iw}var Dw,VA;function Wk(){if(VA)return Dw;VA=1;var e=U$(),t=yf(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return Dw=i,Dw}var Im={exports:{}},Lw,GA;function q$(){if(GA)return Lw;GA=1;function e(){return!1}return Lw=e,Lw}Im.exports;var KA;function zD(){return KA||(KA=1,(function(e,t){var r=Ed(),n=q$(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Im,Im.exports)),Im.exports}var Fw,XA;function Vk(){if(XA)return Fw;XA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Fw=r,Fw}var Mw,YA;function Gk(){if(YA)return Mw;YA=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Mw=t,Mw}var Rw,JA;function $$(){if(JA)return Rw;JA=1;var e=vf(),t=Gk(),r=yf(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",d="[object Object]",m="[object RegExp]",p="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",j="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",P="[object Int32Array]",A="[object Uint8Array]",T="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",C={};C[w]=C[j]=C[N]=C[S]=C[P]=C[A]=C[T]=C[I]=C[B]=!0,C[n]=C[s]=C[g]=C[i]=C[b]=C[o]=C[l]=C[c]=C[u]=C[f]=C[d]=C[m]=C[p]=C[y]=C[v]=!1;function E(M){return r(M)&&t(M.length)&&!!C[e(M)]}return Rw=E,Rw}var Bw,QA;function HD(){if(QA)return Bw;QA=1;function e(t){return function(r){return t(r)}}return Bw=e,Bw}var Dm={exports:{}};Dm.exports;var ZA;function z$(){return ZA||(ZA=1,(function(e,t){var r=cD(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Dm,Dm.exports)),Dm.exports}var Uw,eC;function WD(){if(eC)return Uw;eC=1;var e=$$(),t=HD(),r=z$(),n=r&&r.isTypedArray,s=n?t(n):e;return Uw=s,Uw}var qw,tC;function H$(){if(tC)return qw;tC=1;var e=B$(),t=Wk(),r=Kl(),n=zD(),s=Vk(),i=WD(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var d=r(u),m=!d&&t(u),p=!d&&!m&&n(u),y=!d&&!m&&!p&&i(u),v=d||m||p||y,g=v?e(u.length,String):[],b=g.length;for(var w in u)(f||l.call(u,w))&&!(v&&(w=="length"||p&&(w=="offset"||w=="parent")||y&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,b)))&&g.push(w);return g}return qw=c,qw}var $w,rC;function W$(){if(rC)return $w;rC=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return $w=t,$w}var zw,nC;function VD(){if(nC)return zw;nC=1;function e(t,r){return function(n){return t(r(n))}}return zw=e,zw}var Hw,aC;function V$(){if(aC)return Hw;aC=1;var e=VD(),t=e(Object.keys,Object);return Hw=t,Hw}var Ww,sC;function G$(){if(sC)return Ww;sC=1;var e=W$(),t=V$(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return Ww=s,Ww}var Vw,iC;function lg(){if(iC)return Vw;iC=1;var e=Ok(),t=Gk();function r(n){return n!=null&&t(n.length)&&!e(n)}return Vw=r,Vw}var Gw,oC;function Cy(){if(oC)return Gw;oC=1;var e=H$(),t=G$(),r=lg();function n(s){return r(s)?e(s):t(s)}return Gw=n,Gw}var Kw,lC;function K$(){if(lC)return Kw;lC=1;var e=L$(),t=R$(),r=Cy();function n(s){return e(s,r,t)}return Kw=n,Kw}var Xw,cC;function X$(){if(cC)return Xw;cC=1;var e=K$(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,c,u,f){var d=l&t,m=e(i),p=m.length,y=e(o),v=y.length;if(p!=v&&!d)return!1;for(var g=p;g--;){var b=m[g];if(!(d?b in o:n.call(o,b)))return!1}var w=f.get(i),j=f.get(o);if(w&&j)return w==o&&j==i;var N=!0;f.set(i,o),f.set(o,i);for(var S=d;++g<p;){b=m[g];var P=i[b],A=o[b];if(c)var T=d?c(A,P,b,o,i,f):c(P,A,b,i,o,f);if(!(T===void 0?P===A||u(P,A,l,c,f):T)){N=!1;break}S||(S=b=="constructor")}if(N&&!S){var I=i.constructor,B=o.constructor;I!=B&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(N=!1)}return f.delete(i),f.delete(o),N}return Xw=s,Xw}var Yw,uC;function Y$(){if(uC)return Yw;uC=1;var e=hh(),t=Ed(),r=e(t,"DataView");return Yw=r,Yw}var Jw,dC;function J$(){if(dC)return Jw;dC=1;var e=hh(),t=Ed(),r=e(t,"Promise");return Jw=r,Jw}var Qw,fC;function GD(){if(fC)return Qw;fC=1;var e=hh(),t=Ed(),r=e(t,"Set");return Qw=r,Qw}var Zw,hC;function Q$(){if(hC)return Zw;hC=1;var e=hh(),t=Ed(),r=e(t,"WeakMap");return Zw=r,Zw}var e5,pC;function Z$(){if(pC)return e5;pC=1;var e=Y$(),t=Ik(),r=J$(),n=GD(),s=Q$(),i=vf(),o=uD(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",d="[object WeakMap]",m="[object DataView]",p=o(e),y=o(t),v=o(r),g=o(n),b=o(s),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=m||t&&w(new t)!=l||r&&w(r.resolve())!=u||n&&w(new n)!=f||s&&w(new s)!=d)&&(w=function(j){var N=i(j),S=N==c?j.constructor:void 0,P=S?o(S):"";if(P)switch(P){case p:return m;case y:return l;case v:return u;case g:return f;case b:return d}return N}),e5=w,e5}var t5,mC;function ez(){if(mC)return t5;mC=1;var e=MD(),t=qD(),r=D$(),n=X$(),s=Z$(),i=Kl(),o=zD(),l=WD(),c=1,u="[object Arguments]",f="[object Array]",d="[object Object]",m=Object.prototype,p=m.hasOwnProperty;function y(v,g,b,w,j,N){var S=i(v),P=i(g),A=S?f:s(v),T=P?f:s(g);A=A==u?d:A,T=T==u?d:T;var I=A==d,B=T==d,C=A==T;if(C&&o(v)){if(!o(g))return!1;S=!0,I=!1}if(C&&!I)return N||(N=new e),S||l(v)?t(v,g,b,w,j,N):r(v,g,A,b,w,j,N);if(!(b&c)){var E=I&&p.call(v,"__wrapped__"),M=B&&p.call(g,"__wrapped__");if(E||M){var q=E?v.value():v,G=M?g.value():g;return N||(N=new e),j(q,G,b,w,N)}}return C?(N||(N=new e),n(v,g,b,w,j,N)):!1}return t5=y,t5}var r5,xC;function Kk(){if(xC)return r5;xC=1;var e=ez(),t=yf();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return r5=r,r5}var n5,gC;function tz(){if(gC)return n5;gC=1;var e=MD(),t=Kk(),r=1,n=2;function s(i,o,l,c){var u=l.length,f=u,d=!c;if(i==null)return!f;for(i=Object(i);u--;){var m=l[u];if(d&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++u<f;){m=l[u];var p=m[0],y=i[p],v=m[1];if(d&&m[2]){if(y===void 0&&!(p in i))return!1}else{var g=new e;if(c)var b=c(y,v,p,i,o,g);if(!(b===void 0?t(v,y,r|n,c,g):b))return!1}}return!0}return n5=s,n5}var a5,vC;function KD(){if(vC)return a5;vC=1;var e=f0();function t(r){return r===r&&!e(r)}return a5=t,a5}var s5,yC;function rz(){if(yC)return s5;yC=1;var e=KD(),t=Cy();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return s5=r,s5}var i5,bC;function XD(){if(bC)return i5;bC=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return i5=e,i5}var o5,wC;function nz(){if(wC)return o5;wC=1;var e=tz(),t=rz(),r=XD();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return o5=n,o5}var l5,NC;function az(){if(NC)return l5;NC=1;function e(t,r){return t!=null&&r in Object(t)}return l5=e,l5}var c5,jC;function sz(){if(jC)return c5;jC=1;var e=hD(),t=Wk(),r=Kl(),n=Vk(),s=Gk(),i=jy();function o(l,c,u){c=e(c,l);for(var f=-1,d=c.length,m=!1;++f<d;){var p=i(c[f]);if(!(m=l!=null&&u(l,p)))break;l=l[p]}return m||++f!=d?m:(d=l==null?0:l.length,!!d&&s(d)&&n(p,d)&&(r(l)||t(l)))}return c5=o,c5}var u5,kC;function iz(){if(kC)return u5;kC=1;var e=az(),t=sz();function r(n,s){return n!=null&&t(n,s,e)}return u5=r,u5}var d5,SC;function oz(){if(SC)return d5;SC=1;var e=Kk(),t=pD(),r=iz(),n=Tk(),s=KD(),i=XD(),o=jy(),l=1,c=2;function u(f,d){return n(f)&&s(d)?i(o(f),d):function(m){var p=t(m,f);return p===void 0&&p===d?r(m,f):e(d,p,l|c)}}return d5=u,d5}var f5,_C;function Wp(){if(_C)return f5;_C=1;function e(t){return t}return f5=e,f5}var h5,AC;function lz(){if(AC)return h5;AC=1;function e(t){return function(r){return r?.[t]}}return h5=e,h5}var p5,CC;function cz(){if(CC)return p5;CC=1;var e=Fk();function t(r){return function(n){return e(n,r)}}return p5=t,p5}var m5,EC;function uz(){if(EC)return m5;EC=1;var e=lz(),t=cz(),r=Tk(),n=jy();function s(i){return r(i)?e(n(i)):t(i)}return m5=s,m5}var x5,TC;function h0(){if(TC)return x5;TC=1;var e=nz(),t=oz(),r=Wp(),n=Kl(),s=uz();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return x5=i,x5}var g5,OC;function YD(){if(OC)return g5;OC=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return g5=e,g5}var v5,PC;function dz(){if(PC)return v5;PC=1;function e(t){return t!==t}return v5=e,v5}var y5,IC;function fz(){if(IC)return y5;IC=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return y5=e,y5}var b5,DC;function hz(){if(DC)return b5;DC=1;var e=YD(),t=dz(),r=fz();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return b5=n,b5}var w5,LC;function pz(){if(LC)return w5;LC=1;var e=hz();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return w5=t,w5}var N5,FC;function mz(){if(FC)return N5;FC=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return N5=e,N5}var j5,MC;function xz(){if(MC)return j5;MC=1;function e(){}return j5=e,j5}var k5,RC;function gz(){if(RC)return k5;RC=1;var e=GD(),t=xz(),r=Hk(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return k5=s,k5}var S5,BC;function vz(){if(BC)return S5;BC=1;var e=RD(),t=pz(),r=mz(),n=UD(),s=gz(),i=Hk(),o=200;function l(c,u,f){var d=-1,m=t,p=c.length,y=!0,v=[],g=v;if(f)y=!1,m=r;else if(p>=o){var b=u?null:s(c);if(b)return i(b);y=!1,m=n,g=new e}else g=u?[]:v;e:for(;++d<p;){var w=c[d],j=u?u(w):w;if(w=f||w!==0?w:0,y&&j===j){for(var N=g.length;N--;)if(g[N]===j)continue e;u&&g.push(j),v.push(w)}else m(g,j,f)||(g!==v&&g.push(j),v.push(w))}return v}return S5=l,S5}var _5,UC;function yz(){if(UC)return _5;UC=1;var e=h0(),t=vz();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return _5=r,_5}var bz=yz();const qC=Ea(bz);function JD(e,t,r){return t===!0?qC(e,r):Tn(t)?qC(e,t):e}function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}var wz=["ref"];function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){Ey(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZD(n.key),n)}}function jz(e,t,r){return t&&zC(e.prototype,t),r&&zC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kz(e,t,r){return t=i1(t),Sz(e,QD()?Reflect.construct(t,r||[],i1(e).constructor):t.apply(e,r))}function Sz(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _z(e)}function _z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QD=function(){return!!e})()}function i1(e){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i1(e)}function Az(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gj(e,t)}function Ey(e,t,r){return t=ZD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZD(e){var t=Cz(e,"string");return gp(t)=="symbol"?t:t+""}function Cz(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ez(e,t){if(e==null)return{};var r=Tz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Oz(e){return e.value}function Pz(e,t){if(at.isValidElement(e))return at.cloneElement(e,t);if(typeof e=="function")return at.createElement(e,t);t.ref;var r=Ez(t,wz);return at.createElement(zk,r)}var HC=1,ap=(function(e){function t(){var r;Nz(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=kz(this,t,[].concat(s)),Ey(r,"lastBoundingBox",{width:-1,height:-1}),r}return Az(t,e),jz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>HC||Math.abs(s.height-this.lastBoundingBox.height)>HC)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,f=s.chartHeight,d,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((f||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Xd(Xd({},d),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,d=Xd(Xd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return at.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},Pz(i,Xd(Xd({},this.props),{},{payload:JD(f,u,Oz)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Xd(Xd({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&hr(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(U.PureComponent);Ey(ap,"displayName","Legend");Ey(ap,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var A5,WC;function Iz(){if(WC)return A5;WC=1;var e=sg(),t=Wk(),r=Kl(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return A5=s,A5}var C5,VC;function eL(){if(VC)return C5;VC=1;var e=$D(),t=Iz();function r(n,s,i,o,l){var c=-1,u=n.length;for(i||(i=t),l||(l=[]);++c<u;){var f=n[c];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return C5=r,C5}var E5,GC;function Dz(){if(GC)return E5;GC=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var u=l[t?c:++i];if(n(o[u],u,o)===!1)break}return r}}return E5=e,E5}var T5,KC;function Lz(){if(KC)return T5;KC=1;var e=Dz(),t=e();return T5=t,T5}var O5,XC;function tL(){if(XC)return O5;XC=1;var e=Lz(),t=Cy();function r(n,s){return n&&e(n,s,t)}return O5=r,O5}var P5,YC;function Fz(){if(YC)return P5;YC=1;var e=lg();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,c=Object(s);(n?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return P5=t,P5}var I5,JC;function Xk(){if(JC)return I5;JC=1;var e=tL(),t=Fz(),r=t(e);return I5=r,I5}var D5,QC;function rL(){if(QC)return D5;QC=1;var e=Xk(),t=lg();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,c,u){o[++i]=s(l,c,u)}),o}return D5=r,D5}var L5,ZC;function Mz(){if(ZC)return L5;ZC=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return L5=e,L5}var F5,eE;function Rz(){if(eE)return F5;eE=1;var e=$p();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=n!==void 0,u=n===null,f=n===n,d=e(n);if(!u&&!d&&!l&&r>n||l&&c&&f&&!u&&!d||i&&c&&f||!s&&f||!o)return 1;if(!i&&!l&&!d&&r<n||d&&s&&o&&!i&&!l||u&&s&&o||!c&&o||!f)return-1}return 0}return F5=t,F5}var M5,tE;function Bz(){if(tE)return M5;tE=1;var e=Rz();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,c=o.length,u=s.length;++i<c;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var d=s[i];return f*(d=="desc"?-1:1)}}return r.index-n.index}return M5=t,M5}var R5,rE;function Uz(){if(rE)return R5;rE=1;var e=Lk(),t=Fk(),r=h0(),n=rL(),s=Mz(),i=HD(),o=Bz(),l=Wp(),c=Kl();function u(f,d,m){d.length?d=e(d,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):d=[l];var p=-1;d=e(d,i(r));var y=n(f,function(v,g,b){var w=e(d,function(j){return j(v)});return{criteria:w,index:++p,value:v}});return s(y,function(v,g){return o(v,g,m)})}return R5=u,R5}var B5,nE;function qz(){if(nE)return B5;nE=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return B5=e,B5}var U5,aE;function $z(){if(aE)return U5;aE=1;var e=qz(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(n,this,f)}}return U5=r,U5}var q5,sE;function zz(){if(sE)return q5;sE=1;function e(t){return function(){return t}}return q5=e,q5}var $5,iE;function nL(){if(iE)return $5;iE=1;var e=hh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return $5=t,$5}var z5,oE;function Hz(){if(oE)return z5;oE=1;var e=zz(),t=nL(),r=Wp(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return z5=n,z5}var H5,lE;function Wz(){if(lE)return H5;lE=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return H5=n,H5}var W5,cE;function Vz(){if(cE)return W5;cE=1;var e=Hz(),t=Wz(),r=t(e);return W5=r,W5}var V5,uE;function Gz(){if(uE)return V5;uE=1;var e=Wp(),t=$z(),r=Vz();function n(s,i){return r(t(s,i,e),s+"")}return V5=n,V5}var G5,dE;function Ty(){if(dE)return G5;dE=1;var e=Pk(),t=lg(),r=Vk(),n=f0();function s(i,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return G5=s,G5}var K5,fE;function Kz(){if(fE)return K5;fE=1;var e=eL(),t=Uz(),r=Gz(),n=Ty(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return K5=s,K5}var Xz=Kz();const Yk=Ea(Xz);function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kj.apply(this,arguments)}function Yz(e,t){return eH(e)||Zz(e,t)||Qz(e,t)||Jz()}function Jz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qz(e,t){if(e){if(typeof e=="string")return hE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hE(e,t)}}function hE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function eH(e){if(Array.isArray(e))return e}function pE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(r),!0).forEach(function(n){tH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tH(e,t,r){return t=rH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return cx(t)=="symbol"?t:t+""}function nH(e,t){if(cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aH(e){return Array.isArray(e)&&Fi(e[0])&&Fi(e[1])?e.join(" ~ "):e}var sH=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,v=t.label,g=t.labelFormatter,b=t.accessibilityLayer,w=b===void 0?!1:b,j=function(){if(f&&f.length){var E={padding:0,margin:0},M=(m?Yk(f,m):f).map(function(q,G){if(q.type==="none")return null;var Z=X5({display:"block",paddingTop:4,paddingBottom:4,color:q.color||"#000"},l),te=q.formatter||d||aH,ae=q.value,Q=q.name,ee=ae,W=Q;if(te&&ee!=null&&W!=null){var O=te(ae,Q,q,G,f);if(Array.isArray(O)){var z=Yz(O,2);ee=z[0],W=z[1]}else ee=O}return at.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:Z},Fi(W)?at.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Fi(W)?at.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,at.createElement("span",{className:"recharts-tooltip-item-value"},ee),at.createElement("span",{className:"recharts-tooltip-item-unit"},q.unit||""))});return at.createElement("ul",{className:"recharts-tooltip-item-list",style:E},M)}return null},N=X5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=X5({margin:0},u),P=!Jn(v),A=P?v:"",T=ua("recharts-default-tooltip",p),I=ua("recharts-tooltip-label",y);P&&g&&f!==void 0&&f!==null&&(A=g(v,f));var B=w?{role:"status","aria-live":"assertive"}:{};return at.createElement("div",Kj({className:T,style:N},B),at.createElement("p",{className:I,style:S},at.isValidElement(A)?A:"".concat(A)),j())};function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function Qg(e,t,r){return t=iH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iH(e){var t=oH(e,"string");return ux(t)=="symbol"?t:t+""}function oH(e,t){if(ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xm="recharts-tooltip-wrapper",lH={visibility:"hidden"};function cH(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ua(xm,Qg(Qg(Qg(Qg({},"".concat(xm,"-right"),hr(r)&&t&&hr(t.x)&&r>=t.x),"".concat(xm,"-left"),hr(r)&&t&&hr(t.x)&&r<t.x),"".concat(xm,"-bottom"),hr(n)&&t&&hr(t.y)&&n>=t.y),"".concat(xm,"-top"),hr(n)&&t&&hr(t.y)&&n<t.y))}function mE(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&hr(i[n]))return i[n];var f=r[n]-l-s,d=r[n]+s;if(t[n])return o[n]?f:d;if(o[n]){var m=f,p=c[n];return m<p?Math.max(d,c[n]):Math.max(f,c[n])}var y=d+l,v=c[n]+u;return y>v?Math.max(f,c[n]):Math.max(d,c[n])}function uH(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function dH(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=mE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=mE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=uH({translateX:f,translateY:d,useTranslate3d:l})):u=lH,{cssProperties:u,cssClasses:cH({translateX:f,translateY:d,coordinate:r})}}function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(n){Yj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sL(n.key),n)}}function pH(e,t,r){return t&&hH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mH(e,t,r){return t=o1(t),xH(e,aL()?Reflect.construct(t,r||[],o1(e).constructor):t.apply(e,r))}function xH(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gH(e)}function gH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!e})()}function o1(e){return o1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o1(e)}function vH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xj(e,t)}function Yj(e,t,r){return t=sL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sL(e){var t=yH(e,"string");return vp(t)=="symbol"?t:t+""}function yH(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vE=1,bH=(function(e){function t(){var r;fH(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=mH(this,t,[].concat(s)),Yj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Yj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return vH(t,e),pH(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>vE||Math.abs(n.height-this.state.lastBoundingBox.height)>vE)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,f=s.coordinate,d=s.hasPayload,m=s.isAnimationActive,p=s.offset,y=s.position,v=s.reverseDirection,g=s.useTranslate3d,b=s.viewBox,w=s.wrapperStyle,j=dH({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),N=j.cssClasses,S=j.cssProperties,P=gE(gE({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return at.createElement("div",{tabIndex:-1,className:N,style:P,ref:function(T){n.wrapperNode=T}},u)}}])})(U.PureComponent),wH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vp={isSsr:wH()};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(r),!0).forEach(function(n){Jk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oL(n.key),n)}}function kH(e,t,r){return t&&jH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SH(e,t,r){return t=l1(t),_H(e,iL()?Reflect.construct(t,r||[],l1(e).constructor):t.apply(e,r))}function _H(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AH(e)}function AH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iL=function(){return!!e})()}function l1(e){return l1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l1(e)}function CH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jj(e,t)}function Jj(e,t){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jj(e,t)}function Jk(e,t,r){return t=oL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e){var t=EH(e,"string");return yp(t)=="symbol"?t:t+""}function EH(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function TH(e){return e.dataKey}function OH(e,t){return at.isValidElement(e)?at.cloneElement(e,t):typeof e=="function"?at.createElement(e,t):at.createElement(sH,t)}var hd=(function(e){function t(){return NH(this,t),SH(this,t,arguments)}return CH(t,e),kH(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,f=s.coordinate,d=s.filterNull,m=s.isAnimationActive,p=s.offset,y=s.payload,v=s.payloadUniqBy,g=s.position,b=s.reverseDirection,w=s.useTranslate3d,j=s.viewBox,N=s.wrapperStyle,S=y??[];d&&S.length&&(S=JD(y.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),v,TH));var P=S.length>0;return at.createElement(bH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:P,offset:p,position:g,reverseDirection:b,useTranslate3d:w,viewBox:j,wrapperStyle:N},OH(u,bE(bE({},this.props),{},{payload:S})))}}])})(U.PureComponent);Jk(hd,"displayName","Tooltip");Jk(hd,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Vp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y5,wE;function PH(){if(wE)return Y5;wE=1;var e=Ed(),t=function(){return e.Date.now()};return Y5=t,Y5}var J5,NE;function IH(){if(NE)return J5;NE=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return J5=t,J5}var Q5,jE;function DH(){if(jE)return Q5;jE=1;var e=IH(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Q5=r,Q5}var Z5,kE;function lL(){if(kE)return Z5;kE=1;var e=DH(),t=f0(),r=$p(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=i.test(u);return d||o.test(u)?l(u.slice(2),d?2:8):s.test(u)?n:+u}return Z5=c,Z5}var eN,SE;function LH(){if(SE)return eN;SE=1;var e=f0(),t=PH(),r=lL(),n="Expected a function",s=Math.max,i=Math.min;function o(l,c,u){var f,d,m,p,y,v,g=0,b=!1,w=!1,j=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,e(u)&&(b=!!u.leading,w="maxWait"in u,m=w?s(r(u.maxWait)||0,c):m,j="trailing"in u?!!u.trailing:j);function N(M){var q=f,G=d;return f=d=void 0,g=M,p=l.apply(G,q),p}function S(M){return g=M,y=setTimeout(T,c),b?N(M):p}function P(M){var q=M-v,G=M-g,Z=c-q;return w?i(Z,m-G):Z}function A(M){var q=M-v,G=M-g;return v===void 0||q>=c||q<0||w&&G>=m}function T(){var M=t();if(A(M))return I(M);y=setTimeout(T,P(M))}function I(M){return y=void 0,j&&f?N(M):(f=d=void 0,p)}function B(){y!==void 0&&clearTimeout(y),g=0,f=v=d=y=void 0}function C(){return y===void 0?p:I(t())}function E(){var M=t(),q=A(M);if(f=arguments,d=this,v=M,q){if(y===void 0)return S(v);if(w)return clearTimeout(y),y=setTimeout(T,c),N(v)}return y===void 0&&(y=setTimeout(T,c)),p}return E.cancel=B,E.flush=C,E}return eN=o,eN}var tN,_E;function FH(){if(_E)return tN;_E=1;var e=LH(),t=f0(),r="Expected a function";function n(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return tN=n,tN}var MH=FH();const cL=Ea(MH);function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(n){RH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RH(e,t,r){return t=BH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BH(e){var t=UH(e,"string");return dx(t)=="symbol"?t:t+""}function UH(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qH(e,t){return WH(e)||HH(e,t)||zH(e,t)||$H()}function $H(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zH(e,t){if(e){if(typeof e=="string")return CE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CE(e,t)}}function CE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function WH(e){if(Array.isArray(e))return e}var VH=U.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,v=y===void 0?0:y,g=e.id,b=e.className,w=e.onResize,j=e.style,N=j===void 0?{}:j,S=U.useRef(null),P=U.useRef();P.current=w,U.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var A=U.useState({containerWidth:s.width,containerHeight:s.height}),T=qH(A,2),I=T[0],B=T[1],C=U.useCallback(function(M,q){B(function(G){var Z=Math.round(M),te=Math.round(q);return G.containerWidth===Z&&G.containerHeight===te?G:{containerWidth:Z,containerHeight:te}})},[]);U.useEffect(function(){var M=function(Q){var ee,W=Q[0].contentRect,O=W.width,z=W.height;C(O,z),(ee=P.current)===null||ee===void 0||ee.call(P,O,z)};v>0&&(M=cL(M,v,{trailing:!0,leading:!1}));var q=new ResizeObserver(M),G=S.current.getBoundingClientRect(),Z=G.width,te=G.height;return C(Z,te),q.observe(S.current),function(){q.disconnect()}},[C,v]);var E=U.useMemo(function(){var M=I.containerWidth,q=I.containerHeight;if(M<0||q<0)return null;of(M0(o)||M0(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),of(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=M0(o)?M:o,Z=M0(c)?q:c;r&&r>0&&(G?Z=G/r:Z&&(G=Z*r),m&&Z>m&&(Z=m)),of(G>0||Z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,Z,o,c,f,d,r);var te=!Array.isArray(p)&&sf(p.type).endsWith("Chart");return at.Children.map(p,function(ae){return mD.isElement(ae)?U.cloneElement(ae,Zg({width:G,height:Z},te?{style:Zg({height:"100%",width:"100%",maxHeight:Z,maxWidth:G},ae.props.style)}:{})):ae})},[r,p,c,m,d,f,I,o]);return at.createElement("div",{id:g?"".concat(g):void 0,className:ua("recharts-responsive-container",b),style:Zg(Zg({},N),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:m}),ref:S},E)}),uL=function(t){return null};uL.displayName="Cell";function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}function EE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(r),!0).forEach(function(n){GH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GH(e,t,r){return t=KH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=XH(e,"string");return fx(t)=="symbol"?t:t+""}function XH(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qh={widthCache:{},cacheCount:0},YH=2e3,JH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TE="recharts_measurement_span";function QH(e){var t=Qj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var zm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Vp.isSsr)return{width:0,height:0};var n=QH(r),s=JSON.stringify({text:t,copyStyle:n});if(qh.widthCache[s])return qh.widthCache[s];try{var i=document.getElementById(TE);i||(i=document.createElement("span"),i.setAttribute("id",TE),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Qj(Qj({},JH),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return qh.widthCache[s]=c,++qh.cacheCount>YH&&(qh.cacheCount=0,qh.widthCache={}),c}catch{return{width:0,height:0}}},ZH=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function hx(e){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hx(e)}function c1(e,t){return nW(e)||rW(e,t)||tW(e,t)||eW()}function eW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(e,t){if(e){if(typeof e=="string")return OE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OE(e,t)}}function OE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nW(e){if(Array.isArray(e))return e}function aW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iW(n.key),n)}}function sW(e,t,r){return t&&PE(e.prototype,t),r&&PE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iW(e){var t=oW(e,"string");return hx(t)=="symbol"?t:t+""}function oW(e,t){if(hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var IE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uW=Object.keys(dL),Zh="NaN";function dW(e,t){return e*dL[t]}var ev=(function(){function e(t,r){aW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!lW.test(r)&&(this.num=NaN,this.unit=""),uW.includes(r)&&(this.num=dW(t,r),this.unit="px")}return sW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=cW.exec(r))!==null&&n!==void 0?n:[],i=c1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function fL(e){if(e.includes(Zh))return Zh;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=IE.exec(t))!==null&&r!==void 0?r:[],s=c1(n,4),i=s[1],o=s[2],l=s[3],c=ev.parse(i??""),u=ev.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Zh;t=t.replace(IE,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,m=(d=DE.exec(t))!==null&&d!==void 0?d:[],p=c1(m,4),y=p[1],v=p[2],g=p[3],b=ev.parse(y??""),w=ev.parse(g??""),j=v==="+"?b.add(w):b.subtract(w);if(j.isNaN())return Zh;t=t.replace(DE,j.toString())}return t}var LE=/\(([^()]*)\)/;function fW(e){for(var t=e;t.includes("(");){var r=LE.exec(t),n=c1(r,2),s=n[1];t=t.replace(LE,fL(s))}return t}function hW(e){var t=e.replace(/\s+/g,"");return t=fW(t),t=fL(t),t}function pW(e){try{return hW(e)}catch{return Zh}}function rN(e){var t=pW(e.slice(5,-1));return t===Zh?"":t}var mW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],xW=["dx","dy","angle","className","breakAll"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zj.apply(this,arguments)}function FE(e,t){if(e==null)return{};var r=gW(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ME(e,t){return wW(e)||bW(e,t)||yW(e,t)||vW()}function vW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yW(e,t){if(e){if(typeof e=="string")return RE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RE(e,t)}}function RE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function wW(e){if(Array.isArray(e))return e}var hL=/[ \f\n\r\t\v\u2028\u2029]+/,pL=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];Jn(r)||(n?i=r.toString().split(""):i=r.toString().split(hL));var o=i.map(function(c){return{word:c,width:zm(c,s).width}}),l=n?0:zm("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},NW=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=hr(o),d=l,m=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(Z,te){var ae=te.word,Q=te.width,ee=Z[Z.length-1];if(ee&&(s==null||i||ee.width+Q+n<Number(s)))ee.words.push(ae),ee.width+=Q+n;else{var W={words:[ae],width:Q};Z.push(W)}return Z},[])},p=m(r),y=function(G){return G.reduce(function(Z,te){return Z.width>te.width?Z:te})};if(!f)return p;for(var v="",g=function(G){var Z=d.slice(0,G),te=pL({breakAll:u,style:c,children:Z+v}).wordsWithComputedWidth,ae=m(te),Q=ae.length>o||y(ae).width>Number(s);return[Q,ae]},b=0,w=d.length-1,j=0,N;b<=w&&j<=d.length-1;){var S=Math.floor((b+w)/2),P=S-1,A=g(P),T=ME(A,2),I=T[0],B=T[1],C=g(S),E=ME(C,1),M=E[0];if(!I&&!M&&(b=S+1),I&&M&&(w=S-1),!I&&M){N=B;break}j++}return N||p},BE=function(t){var r=Jn(t)?[]:t.toString().split(hL);return[{words:r}]},jW=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Vp.isSsr){var c,u,f=pL({breakAll:o,children:s,style:i});if(f){var d=f.wordsWithComputedWidth,m=f.spaceWidth;c=d,u=m}else return BE(s);return NW({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return BE(s)},UE="#808080",u1=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,v=y===void 0?"end":y,g=t.fill,b=g===void 0?UE:g,w=FE(t,mW),j=U.useMemo(function(){return jW({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),N=w.dx,S=w.dy,P=w.angle,A=w.className,T=w.breakAll,I=FE(w,xW);if(!Fi(n)||!Fi(i))return null;var B=n+(hr(N)?N:0),C=i+(hr(S)?S:0),E;switch(v){case"start":E=rN("calc(".concat(u,")"));break;case"middle":E=rN("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=rN("calc(".concat(j.length-1," * -").concat(l,")"));break}var M=[];if(d){var q=j[0].width,G=w.width;M.push("scale(".concat((hr(G)?G/q:1)/q,")"))}return P&&M.push("rotate(".concat(P,", ").concat(B,", ").concat(C,")")),M.length&&(I.transform=M.join(" ")),at.createElement("text",Zj({},qn(I,!0),{x:B,y:C,className:ua("recharts-text",A),textAnchor:p,fill:b.includes("url")?UE:b}),j.map(function(Z,te){var ae=Z.words.join(T?"":" ");return at.createElement("tspan",{x:B,dy:te===0?E:l,key:"".concat(ae,"-").concat(te)},ae)}))};function t0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qk(e){let t,r,n;e.length!==2?(t=t0,r=(l,c)=>t0(e(l),c),n=(l,c)=>e(l)-c):(t=e===t0||e===kW?e:SW,r=e,n=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=s(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:s,center:o,right:i}}function SW(){return 0}function mL(e){return e===null?NaN:+e}function*_W(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const AW=Qk(t0),cg=AW.right;Qk(mL).center;class qE extends Map{constructor(t,r=TW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get($E(this,t))}has(t){return super.has($E(this,t))}set(t,r){return super.set(CW(this,t),r)}delete(t){return super.delete(EW(this,t))}}function $E({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function CW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function EW({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function TW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function OW(e=t0){if(e===t0)return xL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function xL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PW=Math.sqrt(50),IW=Math.sqrt(10),DW=Math.sqrt(2);function d1(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=PW?10:i>=IW?5:i>=DW?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?d1(e,t,r*2):[l,c,u]}function e4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?d1(t,e,r):d1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function t4(e,t,r){return t=+t,e=+e,r=+r,d1(e,t,r)[2]}function r4(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?t4(t,e,r):t4(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function zE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function HE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gL(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?xL:OW(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/c+m)),y=Math.min(n,Math.floor(t+(c-u)*d/c+m));gL(e,t,p,y,s)}const i=e[t];let o=r,l=n;for(gm(e,r,t),s(e[n],i)>0&&gm(e,r,n);o<l;){for(gm(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?gm(e,r,l):(++l,gm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function gm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function LW(e,t,r){if(e=Float64Array.from(_W(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return HE(e);if(t>=1)return zE(e);var n,s=(n-1)*t,i=Math.floor(s),o=zE(gL(e,i).subarray(0,i+1)),l=HE(e.subarray(i+1));return o+(l-o)*(s-i)}}function FW(e,t,r=mL){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function MW(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function du(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const n4=Symbol("implicit");function Zk(){var e=new qE,t=[],r=[],n=n4;function s(i){let o=e.get(i);if(o===void 0){if(n!==n4)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new qE;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Zk(t,r).unknown(n)},du.apply(s,arguments),s}function px(){var e=Zk().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var m=t().length,p=s<n,y=p?s:n,v=p?n:s;i=(v-y)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),y+=(v-y-i*(m-c))*f,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var g=MW(m).map(function(b){return y+i*b});return r(p?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),d()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,d()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,d()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),d()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),d()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,d()):u},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),d()):f},e.copy=function(){return px(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},du.apply(d(),arguments)}function vL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vL(t())},e}function Hm(){return vL(px.apply(null,arguments).paddingInner(1))}function e3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ug(){}var mx=.7,f1=1/mx,sp="\\s*([+-]?\\d+)\\s*",xx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RW=/^#([0-9a-f]{3,8})$/,BW=new RegExp(`^rgb\\(${sp},${sp},${sp}\\)$`),UW=new RegExp(`^rgb\\(${kd},${kd},${kd}\\)$`),qW=new RegExp(`^rgba\\(${sp},${sp},${sp},${xx}\\)$`),$W=new RegExp(`^rgba\\(${kd},${kd},${kd},${xx}\\)$`),zW=new RegExp(`^hsl\\(${xx},${kd},${kd}\\)$`),HW=new RegExp(`^hsla\\(${xx},${kd},${kd},${xx}\\)$`),WE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e3(ug,gx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VE,formatHex:VE,formatHex8:WW,formatHsl:VW,formatRgb:GE,toString:GE});function VE(){return this.rgb().formatHex()}function WW(){return this.rgb().formatHex8()}function VW(){return bL(this).formatHsl()}function GE(){return this.rgb().formatRgb()}function gx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=RW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?KE(t):r===3?new Wl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?tv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?tv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BW.exec(e))?new Wl(t[1],t[2],t[3],1):(t=UW.exec(e))?new Wl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qW.exec(e))?tv(t[1],t[2],t[3],t[4]):(t=$W.exec(e))?tv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zW.exec(e))?JE(t[1],t[2]/100,t[3]/100,1):(t=HW.exec(e))?JE(t[1],t[2]/100,t[3]/100,t[4]):WE.hasOwnProperty(e)?KE(WE[e]):e==="transparent"?new Wl(NaN,NaN,NaN,0):null}function KE(e){return new Wl(e>>16&255,e>>8&255,e&255,1)}function tv(e,t,r,n){return n<=0&&(e=t=r=NaN),new Wl(e,t,r,n)}function GW(e){return e instanceof ug||(e=gx(e)),e?(e=e.rgb(),new Wl(e.r,e.g,e.b,e.opacity)):new Wl}function a4(e,t,r,n){return arguments.length===1?GW(e):new Wl(e,t,r,n??1)}function Wl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}e3(Wl,a4,yL(ug,{brighter(e){return e=e==null?f1:Math.pow(f1,e),new Wl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mx:Math.pow(mx,e),new Wl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wl(K0(this.r),K0(this.g),K0(this.b),h1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XE,formatHex:XE,formatHex8:KW,formatRgb:YE,toString:YE}));function XE(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}`}function KW(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}${R0((isNaN(this.opacity)?1:this.opacity)*255)}`}function YE(){const e=h1(this.opacity);return`${e===1?"rgb(":"rgba("}${K0(this.r)}, ${K0(this.g)}, ${K0(this.b)}${e===1?")":`, ${e})`}`}function h1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function K0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R0(e){return e=K0(e),(e<16?"0":"")+e.toString(16)}function JE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fu(e,t,r,n)}function bL(e){if(e instanceof Fu)return new Fu(e.h,e.s,e.l,e.opacity);if(e instanceof ug||(e=gx(e)),!e)return new Fu;if(e instanceof Fu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Fu(o,l,c,e.opacity)}function XW(e,t,r,n){return arguments.length===1?bL(e):new Fu(e,t,r,n??1)}function Fu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}e3(Fu,XW,yL(ug,{brighter(e){return e=e==null?f1:Math.pow(f1,e),new Fu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mx:Math.pow(mx,e),new Fu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Wl(nN(e>=240?e-240:e+120,s,n),nN(e,s,n),nN(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Fu(QE(this.h),rv(this.s),rv(this.l),h1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h1(this.opacity);return`${e===1?"hsl(":"hsla("}${QE(this.h)}, ${rv(this.s)*100}%, ${rv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QE(e){return e=(e||0)%360,e<0?e+360:e}function rv(e){return Math.max(0,Math.min(1,e||0))}function nN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const t3=e=>()=>e;function YW(e,t){return function(r){return e+r*t}}function JW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function QW(e){return(e=+e)==1?wL:function(t,r){return r-t?JW(t,r,e):t3(isNaN(t)?r:t)}}function wL(e,t){var r=t-e;return r?YW(e,r):t3(isNaN(e)?t:e)}const ZE=(function e(t){var r=QW(t);function n(s,i){var o=r((s=a4(s)).r,(i=a4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=wL(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return n.gamma=e,n})(1);function ZW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function eV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tV(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Gp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function rV(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function p1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function nV(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Gp(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var s4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aN=new RegExp(s4.source,"g");function aV(e){return function(){return e}}function sV(e){return function(t){return e(t)+""}}function iV(e,t){var r=s4.lastIndex=aN.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=s4.exec(e))&&(s=aN.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:p1(n,s)})),r=aN.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?sV(c[0].x):aV(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Gp(e,t){var r=typeof t,n;return t==null||r==="boolean"?t3(t):(r==="number"?p1:r==="string"?(n=gx(t))?(t=n,ZE):iV:t instanceof gx?ZE:t instanceof Date?rV:eV(t)?ZW:Array.isArray(t)?tV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?nV:p1)(e,t)}function r3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function oV(e,t){t===void 0&&(t=e,e=Gp);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function lV(e){return function(){return e}}function m1(e){return+e}var eT=[0,1];function Nl(e){return e}function i4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:lV(isNaN(t)?NaN:.5)}function cV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function uV(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=i4(s,n),i=r(o,i)):(n=i4(n,s),i=r(i,o)),function(l){return i(n(l))}}function dV(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=i4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=cg(e,l,1,n)-1;return i[c](s[c](l))}}function dg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Oy(){var e=eT,t=eT,r=Gp,n,s,i,o=Nl,l,c,u;function f(){var m=Math.min(e.length,t.length);return o!==Nl&&(o=cV(e[0],e[m-1])),l=m>2?dV:uV,c=u=null,d}function d(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return d.invert=function(m){return o(s((u||(u=l(t,e.map(n),p1)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,m1),f()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),r=r3,f()},d.clamp=function(m){return arguments.length?(o=m?!0:Nl,f()):o!==Nl},d.interpolate=function(m){return arguments.length?(r=m,f()):r},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,p){return n=m,s=p,f()}}function n3(){return Oy()(Nl,Nl)}function fV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function x1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function bp(e){return e=x1(Math.abs(e)),e?e[1]:NaN}function hV(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function pV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var mV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vx(e){if(!(t=mV.exec(e)))throw new Error("invalid format: "+e);var t;return new a3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vx.prototype=a3.prototype;function a3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}a3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xV(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var g1;function gV(e,t){var r=x1(e,t);if(!r)return g1=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(g1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+x1(e,Math.max(0,t+i-1))[0]}function tT(e,t){var r=x1(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const rT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tT(e*100,t),r:tT,s:gV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nT(e){return e}var aT=Array.prototype.map,sT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vV(e){var t=e.grouping===void 0||e.thousands===void 0?nT:hV(aT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nT:pV(aT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d,m){d=vx(d);var p=d.fill,y=d.align,v=d.sign,g=d.symbol,b=d.zero,w=d.width,j=d.comma,N=d.precision,S=d.trim,P=d.type;P==="n"?(j=!0,P="g"):rT[P]||(N===void 0&&(N=12),S=!0,P="g"),(b||p==="0"&&y==="=")&&(b=!0,p="0",y="=");var A=(m&&m.prefix!==void 0?m.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),T=(g==="$"?n:/[%p]/.test(P)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),I=rT[P],B=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function C(E){var M=A,q=T,G,Z,te;if(P==="c")q=I(E)+q,E="";else{E=+E;var ae=E<0||1/E<0;if(E=isNaN(E)?c:I(Math.abs(E),N),S&&(E=xV(E)),ae&&+E==0&&v!=="+"&&(ae=!1),M=(ae?v==="("?v:l:v==="-"||v==="("?"":v)+M,q=(P==="s"&&!isNaN(E)&&g1!==void 0?sT[8+g1/3]:"")+q+(ae&&v==="("?")":""),B){for(G=-1,Z=E.length;++G<Z;)if(te=E.charCodeAt(G),48>te||te>57){q=(te===46?s+E.slice(G+1):E.slice(G))+q,E=E.slice(0,G);break}}}j&&!b&&(E=t(E,1/0));var Q=M.length+E.length+q.length,ee=Q<w?new Array(w-Q+1).join(p):"";switch(j&&b&&(E=t(ee+E,ee.length?w-q.length:1/0),ee=""),y){case"<":E=M+E+q+ee;break;case"=":E=M+ee+E+q;break;case"^":E=ee.slice(0,Q=ee.length>>1)+M+E+q+ee.slice(Q);break;default:E=ee+M+E+q;break}return i(E)}return C.toString=function(){return d+""},C}function f(d,m){var p=Math.max(-8,Math.min(8,Math.floor(bp(m)/3)))*3,y=Math.pow(10,-p),v=u((d=vx(d),d.type="f",d),{suffix:sT[8+p/3]});return function(g){return v(y*g)}}return{format:u,formatPrefix:f}}var nv,s3,NL;yV({thousands:",",grouping:[3],currency:["$",""]});function yV(e){return nv=vV(e),s3=nv.format,NL=nv.formatPrefix,nv}function bV(e){return Math.max(0,-bp(Math.abs(e)))}function wV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bp(t)/3)))*3-bp(Math.abs(e)))}function NV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bp(t)-bp(e))+1}function jL(e,t,r,n){var s=r4(e,t,r),i;switch(n=vx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=wV(s,o))&&(n.precision=i),NL(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=NV(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=bV(s))&&(n.precision=i-(n.type==="%")*2);break}}return s3(n)}function p0(e){var t=e.domain;return e.ticks=function(r){var n=t();return e4(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return jL(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=t4(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function v1(){var e=n3();return e.copy=function(){return dg(e,v1())},du.apply(e,arguments),p0(e)}function kL(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,m1),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return kL(e).unknown(t)},e=arguments.length?Array.from(e,m1):[0,1],p0(r)}function SL(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function iT(e){return Math.log(e)}function oT(e){return Math.exp(e)}function jV(e){return-Math.log(-e)}function kV(e){return-Math.exp(-e)}function SV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _V(e){return e===10?SV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function AV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lT(e){return(t,r)=>-e(-t,r)}function i3(e){const t=e(iT,oT),r=t.domain;let n=10,s,i;function o(){return s=AV(n),i=_V(n),r()[0]<0?(s=lT(s),i=lT(i),e(jV,kV)):e(iT,oT),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let m=s(u),p=s(f),y,v;const g=l==null?10:+l;let b=[];if(!(n%1)&&p-m<g){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(y=1;y<n;++y)if(v=m<0?y/i(-m):y*i(m),!(v<u)){if(v>f)break;b.push(v)}}else for(;m<=p;++m)for(y=n-1;y>=1;--y)if(v=m>0?y/i(-m):y*i(m),!(v<u)){if(v>f)break;b.push(v)}b.length*2<g&&(b=e4(u,f,g))}else b=e4(m,p,Math.min(p-m,g)).map(i);return d?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=vx(c)).precision==null&&(c.trim=!0),c=s3(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/i(Math.round(s(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(SL(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function _L(){const e=i3(Oy()).domain([1,10]);return e.copy=()=>dg(e,_L()).base(e.base()),du.apply(e,arguments),e}function cT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o3(e){var t=1,r=e(cT(t),uT(t));return r.constant=function(n){return arguments.length?e(cT(t=+n),uT(t)):t},p0(r)}function AL(){var e=o3(Oy());return e.copy=function(){return dg(e,AL()).constant(e.constant())},du.apply(e,arguments)}function dT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function CV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function EV(e){return e<0?-e*e:e*e}function l3(e){var t=e(Nl,Nl),r=1;function n(){return r===1?e(Nl,Nl):r===.5?e(CV,EV):e(dT(r),dT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},p0(t)}function c3(){var e=l3(Oy());return e.copy=function(){return dg(e,c3()).exponent(e.exponent())},du.apply(e,arguments),e}function TV(){return c3.apply(null,arguments).exponent(.5)}function fT(e){return Math.sign(e)*e*e}function OV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function CL(){var e=n3(),t=[0,1],r=!1,n;function s(i){var o=OV(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(fT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,m1)).map(fT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return CL(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},du.apply(s,arguments),p0(s)}function EL(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=FW(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[cg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(t0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return EL().domain(e).range(t).unknown(n)},du.apply(i,arguments)}function TL(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[cg(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return TL().domain([e,t]).range(s).unknown(i)},du.apply(p0(o),arguments)}function OL(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[cg(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return OL().domain(e).range(t).unknown(r)},du.apply(s,arguments)}const sN=new Date,iN=new Date;function Bi(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Bi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(sN.setTime(+i),iN.setTime(+o),e(sN),e(iN),Math.floor(r(sN,iN))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const y1=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);y1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):y1);y1.range;const Qd=1e3,au=Qd*60,Zd=au*60,hf=Zd*24,u3=hf*7,hT=hf*30,oN=hf*365,B0=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qd)},(e,t)=>(t-e)/Qd,e=>e.getUTCSeconds());B0.range;const d3=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qd)},(e,t)=>{e.setTime(+e+t*au)},(e,t)=>(t-e)/au,e=>e.getMinutes());d3.range;const f3=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*au)},(e,t)=>(t-e)/au,e=>e.getUTCMinutes());f3.range;const h3=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qd-e.getMinutes()*au)},(e,t)=>{e.setTime(+e+t*Zd)},(e,t)=>(t-e)/Zd,e=>e.getHours());h3.range;const p3=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zd)},(e,t)=>(t-e)/Zd,e=>e.getUTCHours());p3.range;const fg=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*au)/hf,e=>e.getDate()-1);fg.range;const Py=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hf,e=>e.getUTCDate()-1);Py.range;const PL=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hf,e=>Math.floor(e/hf));PL.range;function ph(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*au)/u3)}const Iy=ph(0),b1=ph(1),PV=ph(2),IV=ph(3),wp=ph(4),DV=ph(5),LV=ph(6);Iy.range;b1.range;PV.range;IV.range;wp.range;DV.range;LV.range;function mh(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/u3)}const Dy=mh(0),w1=mh(1),FV=mh(2),MV=mh(3),Np=mh(4),RV=mh(5),BV=mh(6);Dy.range;w1.range;FV.range;MV.range;Np.range;RV.range;BV.range;const m3=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());m3.range;const x3=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());x3.range;const pf=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());pf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});pf.range;const mf=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());mf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});mf.range;function IL(e,t,r,n,s,i){const o=[[B0,1,Qd],[B0,5,5*Qd],[B0,15,15*Qd],[B0,30,30*Qd],[i,1,au],[i,5,5*au],[i,15,15*au],[i,30,30*au],[s,1,Zd],[s,3,3*Zd],[s,6,6*Zd],[s,12,12*Zd],[n,1,hf],[n,2,2*hf],[r,1,u3],[t,1,hT],[t,3,3*hT],[e,1,oN]];function l(u,f,d){const m=f<u;m&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:c(u,f,d),y=p?p.range(u,+f+1):[];return m?y.reverse():y}function c(u,f,d){const m=Math.abs(f-u)/d,p=Qk(([,,g])=>g).right(o,m);if(p===o.length)return e.every(r4(u/oN,f/oN,d));if(p===0)return y1.every(Math.max(r4(u,f,d),1));const[y,v]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return y.every(v)}return[l,c]}const[UV,qV]=IL(mf,x3,Dy,PL,p3,f3),[$V,zV]=IL(pf,m3,Iy,fg,h3,d3);function lN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function HV(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ym(s),f=bm(s),d=ym(i),m=bm(i),p=ym(o),y=bm(o),v=ym(l),g=bm(l),b=ym(c),w=bm(c),j={a:te,A:ae,b:Q,B:ee,c:null,d:yT,e:yT,f:hG,g:jG,G:SG,H:uG,I:dG,j:fG,L:DL,m:pG,M:mG,p:W,q:O,Q:NT,s:jT,S:xG,u:gG,U:vG,V:yG,w:bG,W:wG,x:null,X:null,y:NG,Y:kG,Z:_G,"%":wT},N={a:z,A:H,b:R,B:K,c:null,d:bT,e:bT,f:TG,g:UG,G:$G,H:AG,I:CG,j:EG,L:FL,m:OG,M:PG,p:le,q:he,Q:NT,s:jT,S:IG,u:DG,U:LG,V:FG,w:MG,W:RG,x:null,X:null,y:BG,Y:qG,Z:zG,"%":wT},S={a:B,A:C,b:E,B:M,c:q,d:gT,e:gT,f:iG,g:xT,G:mT,H:vT,I:vT,j:rG,L:sG,m:tG,M:nG,p:I,q:eG,Q:lG,s:cG,S:aG,u:XV,U:YV,V:JV,w:KV,W:QV,x:G,X:Z,y:xT,Y:mT,Z:ZV,"%":oG};j.x=P(r,j),j.X=P(n,j),j.c=P(t,j),N.x=P(r,N),N.X=P(n,N),N.c=P(t,N);function P(ie,ce){return function(De){var ne=[],Ue=-1,Ce=0,de=ie.length,Y,ve,ye;for(De instanceof Date||(De=new Date(+De));++Ue<de;)ie.charCodeAt(Ue)===37&&(ne.push(ie.slice(Ce,Ue)),(ve=pT[Y=ie.charAt(++Ue)])!=null?Y=ie.charAt(++Ue):ve=Y==="e"?" ":"0",(ye=ce[Y])&&(Y=ye(De,ve)),ne.push(Y),Ce=Ue+1);return ne.push(ie.slice(Ce,Ue)),ne.join("")}}function A(ie,ce){return function(De){var ne=vm(1900,void 0,1),Ue=T(ne,ie,De+="",0),Ce,de;if(Ue!=De.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(ce&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Ce=cN(vm(ne.y,0,1)),de=Ce.getUTCDay(),Ce=de>4||de===0?w1.ceil(Ce):w1(Ce),Ce=Py.offset(Ce,(ne.V-1)*7),ne.y=Ce.getUTCFullYear(),ne.m=Ce.getUTCMonth(),ne.d=Ce.getUTCDate()+(ne.w+6)%7):(Ce=lN(vm(ne.y,0,1)),de=Ce.getDay(),Ce=de>4||de===0?b1.ceil(Ce):b1(Ce),Ce=fg.offset(Ce,(ne.V-1)*7),ne.y=Ce.getFullYear(),ne.m=Ce.getMonth(),ne.d=Ce.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),de="Z"in ne?cN(vm(ne.y,0,1)).getUTCDay():lN(vm(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(de+5)%7:ne.w+ne.U*7-(de+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,cN(ne)):lN(ne)}}function T(ie,ce,De,ne){for(var Ue=0,Ce=ce.length,de=De.length,Y,ve;Ue<Ce;){if(ne>=de)return-1;if(Y=ce.charCodeAt(Ue++),Y===37){if(Y=ce.charAt(Ue++),ve=S[Y in pT?ce.charAt(Ue++):Y],!ve||(ne=ve(ie,De,ne))<0)return-1}else if(Y!=De.charCodeAt(ne++))return-1}return ne}function I(ie,ce,De){var ne=u.exec(ce.slice(De));return ne?(ie.p=f.get(ne[0].toLowerCase()),De+ne[0].length):-1}function B(ie,ce,De){var ne=p.exec(ce.slice(De));return ne?(ie.w=y.get(ne[0].toLowerCase()),De+ne[0].length):-1}function C(ie,ce,De){var ne=d.exec(ce.slice(De));return ne?(ie.w=m.get(ne[0].toLowerCase()),De+ne[0].length):-1}function E(ie,ce,De){var ne=b.exec(ce.slice(De));return ne?(ie.m=w.get(ne[0].toLowerCase()),De+ne[0].length):-1}function M(ie,ce,De){var ne=v.exec(ce.slice(De));return ne?(ie.m=g.get(ne[0].toLowerCase()),De+ne[0].length):-1}function q(ie,ce,De){return T(ie,t,ce,De)}function G(ie,ce,De){return T(ie,r,ce,De)}function Z(ie,ce,De){return T(ie,n,ce,De)}function te(ie){return o[ie.getDay()]}function ae(ie){return i[ie.getDay()]}function Q(ie){return c[ie.getMonth()]}function ee(ie){return l[ie.getMonth()]}function W(ie){return s[+(ie.getHours()>=12)]}function O(ie){return 1+~~(ie.getMonth()/3)}function z(ie){return o[ie.getUTCDay()]}function H(ie){return i[ie.getUTCDay()]}function R(ie){return c[ie.getUTCMonth()]}function K(ie){return l[ie.getUTCMonth()]}function le(ie){return s[+(ie.getUTCHours()>=12)]}function he(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ce=P(ie+="",j);return ce.toString=function(){return ie},ce},parse:function(ie){var ce=A(ie+="",!1);return ce.toString=function(){return ie},ce},utcFormat:function(ie){var ce=P(ie+="",N);return ce.toString=function(){return ie},ce},utcParse:function(ie){var ce=A(ie+="",!0);return ce.toString=function(){return ie},ce}}}var pT={"-":"",_:" ",0:"0"},to=/^\s*\d+/,WV=/^%/,VV=/[\\^$*+?|[\]().{}]/g;function da(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function GV(e){return e.replace(VV,"\\$&")}function ym(e){return new RegExp("^(?:"+e.map(GV).join("|")+")","i")}function bm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function KV(e,t,r){var n=to.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function XV(e,t,r){var n=to.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function YV(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function JV(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function QV(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function mT(e,t,r){var n=to.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function xT(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ZV(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function eG(e,t,r){var n=to.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function tG(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function gT(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function rG(e,t,r){var n=to.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function vT(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function nG(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function aG(e,t,r){var n=to.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function sG(e,t,r){var n=to.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function iG(e,t,r){var n=to.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function oG(e,t,r){var n=WV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function lG(e,t,r){var n=to.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function cG(e,t,r){var n=to.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yT(e,t){return da(e.getDate(),t,2)}function uG(e,t){return da(e.getHours(),t,2)}function dG(e,t){return da(e.getHours()%12||12,t,2)}function fG(e,t){return da(1+fg.count(pf(e),e),t,3)}function DL(e,t){return da(e.getMilliseconds(),t,3)}function hG(e,t){return DL(e,t)+"000"}function pG(e,t){return da(e.getMonth()+1,t,2)}function mG(e,t){return da(e.getMinutes(),t,2)}function xG(e,t){return da(e.getSeconds(),t,2)}function gG(e){var t=e.getDay();return t===0?7:t}function vG(e,t){return da(Iy.count(pf(e)-1,e),t,2)}function LL(e){var t=e.getDay();return t>=4||t===0?wp(e):wp.ceil(e)}function yG(e,t){return e=LL(e),da(wp.count(pf(e),e)+(pf(e).getDay()===4),t,2)}function bG(e){return e.getDay()}function wG(e,t){return da(b1.count(pf(e)-1,e),t,2)}function NG(e,t){return da(e.getFullYear()%100,t,2)}function jG(e,t){return e=LL(e),da(e.getFullYear()%100,t,2)}function kG(e,t){return da(e.getFullYear()%1e4,t,4)}function SG(e,t){var r=e.getDay();return e=r>=4||r===0?wp(e):wp.ceil(e),da(e.getFullYear()%1e4,t,4)}function _G(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+da(t/60|0,"0",2)+da(t%60,"0",2)}function bT(e,t){return da(e.getUTCDate(),t,2)}function AG(e,t){return da(e.getUTCHours(),t,2)}function CG(e,t){return da(e.getUTCHours()%12||12,t,2)}function EG(e,t){return da(1+Py.count(mf(e),e),t,3)}function FL(e,t){return da(e.getUTCMilliseconds(),t,3)}function TG(e,t){return FL(e,t)+"000"}function OG(e,t){return da(e.getUTCMonth()+1,t,2)}function PG(e,t){return da(e.getUTCMinutes(),t,2)}function IG(e,t){return da(e.getUTCSeconds(),t,2)}function DG(e){var t=e.getUTCDay();return t===0?7:t}function LG(e,t){return da(Dy.count(mf(e)-1,e),t,2)}function ML(e){var t=e.getUTCDay();return t>=4||t===0?Np(e):Np.ceil(e)}function FG(e,t){return e=ML(e),da(Np.count(mf(e),e)+(mf(e).getUTCDay()===4),t,2)}function MG(e){return e.getUTCDay()}function RG(e,t){return da(w1.count(mf(e)-1,e),t,2)}function BG(e,t){return da(e.getUTCFullYear()%100,t,2)}function UG(e,t){return e=ML(e),da(e.getUTCFullYear()%100,t,2)}function qG(e,t){return da(e.getUTCFullYear()%1e4,t,4)}function $G(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Np(e):Np.ceil(e),da(e.getUTCFullYear()%1e4,t,4)}function zG(){return"+0000"}function wT(){return"%"}function NT(e){return+e}function jT(e){return Math.floor(+e/1e3)}var $h,RL,BL;HG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HG(e){return $h=HV(e),RL=$h.format,$h.parse,BL=$h.utcFormat,$h.utcParse,$h}function WG(e){return new Date(e)}function VG(e){return e instanceof Date?+e:+new Date(+e)}function g3(e,t,r,n,s,i,o,l,c,u){var f=n3(),d=f.invert,m=f.domain,p=u(".%L"),y=u(":%S"),v=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),w=u("%b %d"),j=u("%B"),N=u("%Y");function S(P){return(c(P)<P?p:l(P)<P?y:o(P)<P?v:i(P)<P?g:n(P)<P?s(P)<P?b:w:r(P)<P?j:N)(P)}return f.invert=function(P){return new Date(d(P))},f.domain=function(P){return arguments.length?m(Array.from(P,VG)):m().map(WG)},f.ticks=function(P){var A=m();return e(A[0],A[A.length-1],P??10)},f.tickFormat=function(P,A){return A==null?S:u(A)},f.nice=function(P){var A=m();return(!P||typeof P.range!="function")&&(P=t(A[0],A[A.length-1],P??10)),P?m(SL(A,P)):f},f.copy=function(){return dg(f,g3(e,t,r,n,s,i,o,l,c,u))},f}function GG(){return du.apply(g3($V,zV,pf,m3,Iy,fg,h3,d3,B0,RL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KG(){return du.apply(g3(UV,qV,mf,x3,Dy,Py,p3,f3,B0,BL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ly(){var e=0,t=1,r,n,s,i,o=Nl,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(i(d)-r)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(m){var p,y;return arguments.length?([p,y]=m,o=d(p,y),u):[o(0),o(1)]}}return u.range=f(Gp),u.rangeRound=f(r3),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),s=r===n?0:1/(n-r),u}}function m0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function UL(){var e=p0(Ly()(Nl));return e.copy=function(){return m0(e,UL())},bf.apply(e,arguments)}function qL(){var e=i3(Ly()).domain([1,10]);return e.copy=function(){return m0(e,qL()).base(e.base())},bf.apply(e,arguments)}function $L(){var e=o3(Ly());return e.copy=function(){return m0(e,$L()).constant(e.constant())},bf.apply(e,arguments)}function v3(){var e=l3(Ly());return e.copy=function(){return m0(e,v3()).exponent(e.exponent())},bf.apply(e,arguments)}function XG(){return v3.apply(null,arguments).exponent(.5)}function zL(){var e=[],t=Nl;function r(n){if(n!=null&&!isNaN(n=+n))return t((cg(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(t0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>LW(e,i/n))},r.copy=function(){return zL(t).domain(e)},bf.apply(r,arguments)}function Fy(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=Nl,f,d=!1,m;function p(v){return isNaN(v=+v)?m:(v=.5+((v=+f(v))-i)*(n*v<n*i?l:c),u(d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function y(v){return function(g){var b,w,j;return arguments.length?([b,w,j]=g,u=oV(v,[b,w,j]),p):[u(0),u(.5),u(1)]}}return p.range=y(Gp),p.rangeRound=y(r3),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return f=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function HL(){var e=p0(Fy()(Nl));return e.copy=function(){return m0(e,HL())},bf.apply(e,arguments)}function WL(){var e=i3(Fy()).domain([.1,1,10]);return e.copy=function(){return m0(e,WL()).base(e.base())},bf.apply(e,arguments)}function VL(){var e=o3(Fy());return e.copy=function(){return m0(e,VL()).constant(e.constant())},bf.apply(e,arguments)}function y3(){var e=l3(Fy());return e.copy=function(){return m0(e,y3()).exponent(e.exponent())},bf.apply(e,arguments)}function YG(){return y3.apply(null,arguments).exponent(.5)}const kT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:px,scaleDiverging:HL,scaleDivergingLog:WL,scaleDivergingPow:y3,scaleDivergingSqrt:YG,scaleDivergingSymlog:VL,scaleIdentity:kL,scaleImplicit:n4,scaleLinear:v1,scaleLog:_L,scaleOrdinal:Zk,scalePoint:Hm,scalePow:c3,scaleQuantile:EL,scaleQuantize:TL,scaleRadial:CL,scaleSequential:UL,scaleSequentialLog:qL,scaleSequentialPow:v3,scaleSequentialQuantile:zL,scaleSequentialSqrt:XG,scaleSequentialSymlog:$L,scaleSqrt:TV,scaleSymlog:AL,scaleThreshold:OL,scaleTime:GG,scaleUtc:KG,tickFormat:jL},Symbol.toStringTag,{value:"Module"}));var uN,ST;function GL(){if(ST)return uN;ST=1;var e=$p();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=n(l);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,f=l}return f}return uN=t,uN}var dN,_T;function JG(){if(_T)return dN;_T=1;function e(t,r){return t>r}return dN=e,dN}var fN,AT;function QG(){if(AT)return fN;AT=1;var e=GL(),t=JG(),r=Wp();function n(s){return s&&s.length?e(s,r,t):void 0}return fN=n,fN}var ZG=QG();const Kf=Ea(ZG);var hN,CT;function eK(){if(CT)return hN;CT=1;function e(t,r){return t<r}return hN=e,hN}var pN,ET;function tK(){if(ET)return pN;ET=1;var e=GL(),t=eK(),r=Wp();function n(s){return s&&s.length?e(s,r,t):void 0}return pN=n,pN}var rK=tK();const My=Ea(rK);var mN,TT;function nK(){if(TT)return mN;TT=1;var e=Lk(),t=h0(),r=rL(),n=Kl();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return mN=s,mN}var xN,OT;function aK(){if(OT)return xN;OT=1;var e=eL(),t=nK();function r(n,s){return e(t(n,s),1)}return xN=r,xN}var sK=aK();const iK=Ea(sK);var gN,PT;function KL(){if(PT)return gN;PT=1;var e=Kk();function t(r,n){return e(r,n)}return gN=t,gN}var oK=KL();const yx=Ea(oK);var Kp=1e9,lK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},w3,hs=!0,lu="[DecimalError] ",X0=lu+"Invalid argument: ",b3=lu+"Exponent out of range: ",Xp=Math.floor,I0=Math.pow,cK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xc,Xi=1e7,as=7,XL=9007199254740991,N1=Xp(XL/as),Ir={};Ir.absoluteValue=Ir.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ir.comparedTo=Ir.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ir.decimalPlaces=Ir.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*as;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ir.dividedBy=Ir.div=function(e){return lf(this,new this.constructor(e))};Ir.dividedToIntegerBy=Ir.idiv=function(e){var t=this,r=t.constructor;return $a(lf(t,new r(e),0,1),r.precision)};Ir.equals=Ir.eq=function(e){return!this.cmp(e)};Ir.exponent=function(){return Ni(this)};Ir.greaterThan=Ir.gt=function(e){return this.cmp(e)>0};Ir.greaterThanOrEqualTo=Ir.gte=function(e){return this.cmp(e)>=0};Ir.isInteger=Ir.isint=function(){return this.e>this.d.length-2};Ir.isNegative=Ir.isneg=function(){return this.s<0};Ir.isPositive=Ir.ispos=function(){return this.s>0};Ir.isZero=function(){return this.s===0};Ir.lessThan=Ir.lt=function(e){return this.cmp(e)<0};Ir.lessThanOrEqualTo=Ir.lte=function(e){return this.cmp(e)<1};Ir.logarithm=Ir.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(xc))throw Error(lu+"NaN");if(r.s<1)throw Error(lu+(r.s?"NaN":"-Infinity"));return r.eq(xc)?new n(0):(hs=!1,t=lf(bx(r,i),bx(e,i),i),hs=!0,$a(t,s))};Ir.minus=Ir.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QL(t,e):YL(t,(e.s=-e.s,e))};Ir.modulo=Ir.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(lu+"NaN");return r.s?(hs=!1,t=lf(r,e,0,1).times(e),hs=!0,r.minus(t)):$a(new n(r),s)};Ir.naturalExponential=Ir.exp=function(){return JL(this)};Ir.naturalLogarithm=Ir.ln=function(){return bx(this)};Ir.negated=Ir.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ir.plus=Ir.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YL(t,e):QL(t,(e.s=-e.s,e))};Ir.precision=Ir.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(X0+e);if(t=Ni(s)+1,n=s.d.length-1,r=n*as+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ir.squareRoot=Ir.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(lu+"NaN")}for(e=Ni(l),hs=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=md(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Xp((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(lf(l,i,o+2)).times(.5),md(i.d).slice(0,o)===(t=md(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if($a(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return hs=!0,$a(n,r)};Ir.times=Ir.mul=function(e){var t,r,n,s,i,o,l,c,u,f=this,d=f.constructor,m=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+p[n]*m[s-n-1]+t,i[s--]=l%Xi|0,t=l/Xi|0;i[s]=(i[s]+t)%Xi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,hs?$a(e,d.precision):e};Ir.toDecimalPlaces=Ir.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Cd(e,0,Kp),t===void 0?t=n.rounding:Cd(t,0,8),$a(r,e+Ni(r)+1,t))};Ir.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=rh(n,!0):(Cd(e,0,Kp),t===void 0?t=s.rounding:Cd(t,0,8),n=$a(new s(n),e+1,t),r=rh(n,!0,e+1)),r};Ir.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?rh(s):(Cd(e,0,Kp),t===void 0?t=i.rounding:Cd(t,0,8),n=$a(new i(s),e+Ni(s)+1,t),r=rh(n.abs(),!1,e+Ni(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ir.toInteger=Ir.toint=function(){var e=this,t=e.constructor;return $a(new t(e),Ni(e)+1,t.rounding)};Ir.toNumber=function(){return+this};Ir.toPower=Ir.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(xc);if(l=new c(l),!l.s){if(e.s<1)throw Error(lu+"Infinity");return l}if(l.eq(xc))return l;if(n=c.precision,e.eq(xc))return $a(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=XL){for(s=new c(xc),t=Math.ceil(n/as+4),hs=!1;r%2&&(s=s.times(l),DT(s.d,t)),r=Xp(r/2),r!==0;)l=l.times(l),DT(l.d,t);return hs=!0,e.s<0?new c(xc).div(s):$a(s,n)}}else if(i<0)throw Error(lu+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,hs=!1,s=e.times(bx(l,n+u)),hs=!0,s=JL(s),s.s=i,s};Ir.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Ni(s),n=rh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Cd(e,1,Kp),t===void 0?t=i.rounding:Cd(t,0,8),s=$a(new i(s),e,t),r=Ni(s),n=rh(s,e<=r||r<=i.toExpNeg,e)),n};Ir.toSignificantDigits=Ir.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Cd(e,1,Kp),t===void 0?t=n.rounding:Cd(t,0,8)),$a(new n(r),e,t)};Ir.toString=Ir.valueOf=Ir.val=Ir.toJSON=Ir[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ni(e),r=e.constructor;return rh(e,t<=r.toExpNeg||t>=r.toExpPos)};function YL(e,t){var r,n,s,i,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),hs?$a(t,d):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(d/as),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Xi|0,c[i]%=Xi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,hs?$a(t,d):t}function Cd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(X0+e)}function md(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=as-n.length,r&&(i+=Wf(r)),i+=n;o=e[t],n=o+"",r=as-n.length,r&&(i+=Wf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var lf=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Xi|0,o=i/Xi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Xi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,f,d,m,p,y,v,g,b,w,j,N,S,P,A,T,I=n.constructor,B=n.s==s.s?1:-1,C=n.d,E=s.d;if(!n.s)return new I(n);if(!s.s)throw Error(lu+"Division by zero");for(c=n.e-s.e,A=E.length,S=C.length,p=new I(B),y=p.d=[],u=0;E[u]==(C[u]||0);)++u;if(E[u]>(C[u]||0)&&--c,i==null?w=i=I.precision:o?w=i+(Ni(n)-Ni(s))+1:w=i,w<0)return new I(0);if(w=w/as+2|0,u=0,A==1)for(f=0,E=E[0],w++;(u<S||f)&&w--;u++)j=f*Xi+(C[u]||0),y[u]=j/E|0,f=j%E|0;else{for(f=Xi/(E[0]+1)|0,f>1&&(E=e(E,f),C=e(C,f),A=E.length,S=C.length),N=A,v=C.slice(0,A),g=v.length;g<A;)v[g++]=0;T=E.slice(),T.unshift(0),P=E[0],E[1]>=Xi/2&&++P;do f=0,l=t(E,v,A,g),l<0?(b=v[0],A!=g&&(b=b*Xi+(v[1]||0)),f=b/P|0,f>1?(f>=Xi&&(f=Xi-1),d=e(E,f),m=d.length,g=v.length,l=t(d,v,m,g),l==1&&(f--,r(d,A<m?T:E,m))):(f==0&&(l=f=1),d=E.slice()),m=d.length,m<g&&d.unshift(0),r(v,d,g),l==-1&&(g=v.length,l=t(E,v,A,g),l<1&&(f++,r(v,A<g?T:E,g))),g=v.length):l===0&&(f++,v=[0]),y[u++]=f,l&&v[0]?v[g++]=C[N]||0:(v=[C[N]],g=1);while((N++<S||v[0]!==void 0)&&w--)}return y[0]||y.shift(),p.e=c,$a(p,o?i+Ni(p)+1:i)}})();function JL(e,t){var r,n,s,i,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(Ni(e)>16)throw Error(b3+Ni(e));if(!e.s)return new f(xc);for(hs=!1,l=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(I0(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f(xc),f.precision=l;;){if(s=$a(s.times(e),l),r=r.times(++c),o=i.plus(lf(s,r,l)),md(o.d).slice(0,l)===md(i.d).slice(0,l)){for(;u--;)i=$a(i.times(i),l);return f.precision=d,t==null?(hs=!0,$a(i,d)):i}i=o}}function Ni(e){for(var t=e.e*as,r=e.d[0];r>=10;r/=10)t++;return t}function vN(e,t,r){if(t>e.LN10.sd())throw hs=!0,r&&(e.precision=r),Error(lu+"LN10 precision limit exceeded");return $a(new e(e.LN10),t)}function Wf(e){for(var t="";e--;)t+="0";return t}function bx(e,t){var r,n,s,i,o,l,c,u,f,d=1,m=10,p=e,y=p.d,v=p.constructor,g=v.precision;if(p.s<1)throw Error(lu+(p.s?"NaN":"-Infinity"));if(p.eq(xc))return new v(0);if(t==null?(hs=!1,u=g):u=t,p.eq(10))return t==null&&(hs=!0),vN(v,u);if(u+=m,v.precision=u,r=md(y),n=r.charAt(0),i=Ni(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=md(p.d),n=r.charAt(0),d++;i=Ni(p),n>1?(p=new v("0."+r),i++):p=new v(n+"."+r.slice(1))}else return c=vN(v,u+2,g).times(i+""),p=bx(new v(n+"."+r.slice(1)),u-m).plus(c),v.precision=g,t==null?(hs=!0,$a(p,g)):p;for(l=o=p=lf(p.minus(xc),p.plus(xc),u),f=$a(p.times(p),u),s=3;;){if(o=$a(o.times(f),u),c=l.plus(lf(o,new v(s),u)),md(c.d).slice(0,u)===md(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(vN(v,u+2,g).times(i+""))),l=lf(l,new v(d),u),v.precision=g,t==null?(hs=!0,$a(l,g)):l;l=c,s+=2}}function IT(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Xp(r/as),e.d=[],n=(r+1)%as,r<0&&(n+=as),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=as;n<s;)e.d.push(+t.slice(n,n+=as));t=t.slice(n),n=as-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),hs&&(e.e>N1||e.e<-N1))throw Error(b3+r)}else e.s=0,e.e=0,e.d=[0];return e}function $a(e,t,r){var n,s,i,o,l,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=as,s=t,u=d[f=0];else{if(f=Math.ceil((n+1)/as),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=as,s=n-as+o}if(r!==void 0&&(i=I0(10,o-s-1),l=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/I0(10,o-s):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=Ni(e),d.length=1,t=t-i-1,d[0]=I0(10,(as-t%as)%as),e.e=Xp(-t/as)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=I0(10,as-n),d[f]=s>0?(u/I0(10,o-s)%I0(10,s)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==Xi&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Xi)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(hs&&(e.e>N1||e.e<-N1))throw Error(b3+Ni(e));return e}function QL(e,t){var r,n,s,i,o,l,c,u,f,d,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),hs?$a(t,p):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),s=Math.max(Math.ceil(p/as),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=d.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){f=c[s]<d[s];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(i=s;i&&c[--i]===0;)c[i]=Xi-1;--c[i],c[s]+=Xi}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,hs?$a(t,p):t):new m(0)}function rh(e,t,r){var n,s=Ni(e),i=md(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wf(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Wf(-s-1)+i,r&&(n=r-o)>0&&(i+=Wf(n))):s>=o?(i+=Wf(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Wf(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Wf(n))),e.s<0?"-"+i:i}function DT(e,t){if(e.length>t)return e.length=t,!0}function ZL(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(X0+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return IT(o,i.toString())}else if(typeof i!="string")throw Error(X0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,cK.test(i))IT(o,i);else throw Error(X0+i)}if(s.prototype=Ir,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=ZL,s.config=s.set=uK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function uK(e){if(!e||typeof e!="object")throw Error(lu+"Object expected");var t,r,n,s=["precision",1,Kp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Xp(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(X0+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(X0+r+": "+n);return this}var w3=ZL(lK);xc=new w3(1);const Ba=w3;function dK(e){return mK(e)||pK(e)||hK(e)||fK()}function fK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hK(e,t){if(e){if(typeof e=="string")return o4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o4(e,t)}}function pK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mK(e){if(Array.isArray(e))return o4(e)}function o4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xK=function(t){return t},eF={},tF=function(t){return t===eF},LT=function(t){return function r(){return arguments.length===0||arguments.length===1&&tF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},gK=function e(t,r){return t===1?r:LT(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==eF}).length;return o>=t?r.apply(void 0,s):e(t-o,LT(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=s.map(function(d){return tF(d)?c.shift():d});return r.apply(void 0,dK(f).concat(c))}))})},Ry=function(t){return gK(t.length,t)},l4=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},vK=Ry(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),yK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return xK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},c4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},rF=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function bK(e){var t;return e===0?t=1:t=Math.floor(new Ba(e).abs().log(10).toNumber())+1,t}function wK(e,t,r){for(var n=new Ba(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var NK=Ry(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),jK=Ry(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),kK=Ry(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const By={rangeStep:wK,getDigitCount:bK,interpolateNumber:NK,uninterpolateNumber:jK,uninterpolateTruncation:kK};function u4(e){return AK(e)||_K(e)||nF(e)||SK()}function SK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _K(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function AK(e){if(Array.isArray(e))return d4(e)}function wx(e,t){return TK(e)||EK(e,t)||nF(e,t)||CK()}function CK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nF(e,t){if(e){if(typeof e=="string")return d4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(e,t)}}function d4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EK(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function TK(e){if(Array.isArray(e))return e}function aF(e){var t=wx(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function sF(e,t,r){if(e.lte(0))return new Ba(0);var n=By.getDigitCount(e.toNumber()),s=new Ba(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ba(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Ba(Math.ceil(c))}function OK(e,t,r){var n=1,s=new Ba(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ba(10).pow(By.getDigitCount(e)-1),s=new Ba(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ba(Math.floor(e)))}else e===0?s=new Ba(Math.floor((t-1)/2)):r||(s=new Ba(Math.floor(e)));var o=Math.floor((t-1)/2),l=yK(vK(function(c){return s.add(new Ba(c-o).mul(n)).toNumber()}),l4);return l(0,t)}function iF(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ba(0),tickMin:new Ba(0),tickMax:new Ba(0)};var i=sF(new Ba(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new Ba(0):(o=new Ba(e).add(t).div(2),o=o.sub(new Ba(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ba(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?iF(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Ba(l).mul(i)),tickMax:o.add(new Ba(c).mul(i))})}function PK(e){var t=wx(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=aF([r,n]),c=wx(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(u4(l4(0,s-1).map(function(){return 1/0}))):[].concat(u4(l4(0,s-1).map(function(){return-1/0})),[f]);return r>n?c4(d):d}if(u===f)return OK(u,s,i);var m=iF(u,f,o,i),p=m.step,y=m.tickMin,v=m.tickMax,g=By.rangeStep(y,v.add(new Ba(.1).mul(p)),p);return r>n?c4(g):g}function IK(e,t){var r=wx(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aF([n,s]),l=wx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var f=Math.max(t,2),d=sF(new Ba(u).sub(c).div(f-1),i,0),m=[].concat(u4(By.rangeStep(new Ba(c),new Ba(u).sub(new Ba(.99).mul(d)),d)),[u]);return n>s?c4(m):m}var DK=rF(PK),LK=rF(IK),FK="Invariant failed";function nh(e,t){throw new Error(FK)}var MK=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j1.apply(this,arguments)}function RK(e,t){return $K(e)||qK(e,t)||UK(e,t)||BK()}function BK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UK(e,t){if(e){if(typeof e=="string")return FT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FT(e,t)}}function FT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function $K(e){if(Array.isArray(e))return e}function zK(e,t){if(e==null)return{};var r=HK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cF(n.key),n)}}function GK(e,t,r){return t&&VK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KK(e,t,r){return t=k1(t),XK(e,oF()?Reflect.construct(t,r||[],k1(e).constructor):t.apply(e,r))}function XK(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YK(e)}function YK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k1(e)}function JK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f4(e,t)}function f4(e,t){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},f4(e,t)}function lF(e,t,r){return t=cF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=QK(e,"string");return jp(t)=="symbol"?t:t+""}function QK(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Uy=(function(e){function t(){return WK(this,t),KK(this,t,arguments)}return JK(t,e),GK(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,m=zK(n,MK),p=qn(m,!1);this.props.direction==="x"&&f.type!=="number"&&nh();var y=c.map(function(v){var g=u(v,l),b=g.x,w=g.y,j=g.value,N=g.errorVal;if(!N)return null;var S=[],P,A;if(Array.isArray(N)){var T=RK(N,2);P=T[0],A=T[1]}else P=A=N;if(i==="vertical"){var I=f.scale,B=w+s,C=B+o,E=B-o,M=I(j-P),q=I(j+A);S.push({x1:q,y1:C,x2:q,y2:E}),S.push({x1:M,y1:B,x2:q,y2:B}),S.push({x1:M,y1:C,x2:M,y2:E})}else if(i==="horizontal"){var G=d.scale,Z=b+s,te=Z-o,ae=Z+o,Q=G(j-P),ee=G(j+A);S.push({x1:te,y1:ee,x2:ae,y2:ee}),S.push({x1:Z,y1:Q,x2:Z,y2:ee}),S.push({x1:te,y1:Q,x2:ae,y2:Q})}return at.createElement(Ts,j1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},p),S.map(function(W){return at.createElement("line",j1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return at.createElement(Ts,{className:"recharts-errorBars"},y)}}])})(at.Component);lF(Uy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lF(Uy,"displayName","ErrorBar");function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function MT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(r),!0).forEach(function(n){ZK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZK(e,t,r){return t=eX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return Nx(t)=="symbol"?t:t+""}function tX(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uF=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=hc(r,ap);if(!o)return null;var l=ap.defaultProps,c=l!==void 0?T0(T0({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var m=d.item,p=d.props,y=p.sectors||p.data||[];return f.concat(y.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(f){var d=f.item,m=d.type.defaultProps,p=m!==void 0?T0(T0({},m),d.props):{},y=p.dataKey,v=p.name,g=p.legendType,b=p.hide;return{inactive:b,dataKey:y,type:c.iconType||g||"square",color:N3(d),value:v||y,payload:p}}),T0(T0(T0({},c),ap.getWithHeight(o,s)),{},{payload:u,item:o})};function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function RT(e){return sX(e)||aX(e)||nX(e)||rX()}function rX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nX(e,t){if(e){if(typeof e=="string")return h4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,t)}}function aX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sX(e){if(Array.isArray(e))return h4(e)}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(r),!0).forEach(function(n){ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ip(e,t,r){return t=iX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iX(e){var t=oX(e,"string");return jx(t)=="symbol"?t:t+""}function oX(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wc(e,t,r){return Jn(e)||Jn(t)?r:Fi(t)?iu(e,t,r):Tn(t)?t(e):r}function Wm(e,t,r,n){var s=iK(e,function(l){return wc(l,t)});if(r==="number"){var i=s.filter(function(l){return hr(l)||parseFloat(l)});return i.length?[My(i),Kf(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Jn(l)}):s;return o.map(function(l){return Fi(l)||l instanceof Date?l:""})}var lX=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Mu(d-f)!==Mu(m-d)){var y=[];if(Mu(m-d)===Mu(c[1]-c[0])){p=m;var v=d+c[1]-c[0];y[0]=Math.min(v,(v+f)/2),y[1]=Math.max(v,(v+f)/2)}else{p=f;var g=m+c[1]-c[0];y[0]=Math.min(d,(g+d)/2),y[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>b[0]&&t<=b[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var w=Math.min(f,m),j=Math.max(f,m);if(t>(w+d)/2&&t<=(j+d)/2){o=s[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(n[N].coordinate+n[N+1].coordinate)/2||N>0&&N<l-1&&t>(n[N].coordinate+n[N-1].coordinate)/2&&t<=(n[N].coordinate+n[N+1].coordinate)/2||N===l-1&&t>(n[N].coordinate+n[N-1].coordinate)/2){o=n[N].index;break}return o},N3=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?qs(qs({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},cX=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var f=i[l[c]].stackGroups,d=Object.keys(f),m=0,p=d.length;m<p;m++){var y=f[d[m]],v=y.items,g=y.cateAxisId,b=v.filter(function(A){return sf(A.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,j=w!==void 0?qs(qs({},w),b[0].props):b[0].props,N=j.barSize,S=j[g];o[S]||(o[S]=[]);var P=Jn(N)?r:N;o[S].push({item:b[0],stackList:b.slice(1),barSize:Jn(P)?void 0:th(P,n,0)})}}return o},uX=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=th(r,s,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=s/c,y=o.reduce(function(N,S){return N+S.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&p>0&&(m=!0,p*=.9,y=c*p);var v=(s-y)/2>>0,g={offset:v-u,size:0};f=o.reduce(function(N,S){var P={item:S.item,position:{offset:g.offset+g.size+u,size:m?p:S.barSize}},A=[].concat(RT(N),[P]);return g=A[A.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){A.push({item:T,position:g})}),A},d)}else{var b=th(n,s,0,!0);s-2*b-(c-1)*u<=0&&(u=0);var w=(s-2*b-(c-1)*u)/c;w>1&&(w>>=0);var j=l===+l?Math.min(w,l):w;f=o.reduce(function(N,S,P){var A=[].concat(RT(N),[{item:S.item,position:{offset:b+(w+u)*P+(w-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){A.push({item:T,position:A[A.length-1].position})}),A},d)}return f},dX=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=uF({children:i,legendWidth:c});if(u){var f=s||{},d=f.width,m=f.height,p=u.align,y=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&hr(t[p]))return qs(qs({},t),{},ip({},p,t[p]+(d||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&hr(t[y]))return qs(qs({},t),{},ip({},y,t[y]+(m||0)))}return t},fX=function(t,r,n){return Jn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},dF=function(t,r,n,s,i){var o=r.props.children,l=qu(o,Uy).filter(function(u){return fX(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=wc(f,n);if(Jn(d))return u;var m=Array.isArray(d)?[My(d),Kf(d)]:[d,d],p=c.reduce(function(y,v){var g=wc(f,v,0),b=m[0]-Math.abs(Array.isArray(g)?g[0]:g),w=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},hX=function(t,r,n,s,i){var o=r.map(function(l){return dF(t,l,n,i,s)}).filter(function(l){return!Jn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},fF=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&dF(t,c,u,s)||Wm(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},hF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},pF=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},ef=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Mu(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var m=i?i.indexOf(d):d;return{coordinate:s(m)+u,value:d,offset:u}});return f.filter(function(d){return!Hp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,m){return{coordinate:s(d)+u,value:d,index:m,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,m){return{coordinate:s(d)+u,value:i?i[d]:d,index:m,offset:u}})},yN=new WeakMap,av=function(t,r){if(typeof r!="function")return t;yN.has(t)||yN.set(t,new WeakMap);var n=yN.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},pX=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:px(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:v1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Hm(),realScaleType:"point"}:i==="category"?{scale:px(),realScaleType:"band"}:{scale:v1(),realScaleType:"linear"};if(ig(s)){var c="scale".concat(ky(s));return{scale:(kT[c]||Hm)(),realScaleType:kT[c]?c:"point"}}return Tn(s)?{scale:s}:{scale:Hm(),realScaleType:"point"}},UT=1e-4,mX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-UT,o=Math.max(s[0],s[1])+UT,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},xX=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},gX=function(t,r){if(!r||r.length!==2||!hr(r[0])||!hr(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!hr(t[0])||t[0]<n)&&(i[0]=n),(!hr(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},vX=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Hp(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},yX=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Hp(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},bX={sign:vX,expand:n$,none:mp,silhouette:a$,wiggle:s$,positive:yX},wX=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=bX[n],o=r$().keys(s).value(function(l,c){return+wc(l,c,0)}).order(zj).offset(i);return o(t)},NX=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?qs(qs({},m.type.defaultProps),m.props):m.props,v=y.stackId,g=y.hide;if(g)return d;var b=y[n],w=d[b]||{hasStack:!1,stackGroups:{}};if(Fi(v)){var j=w.stackGroups[v]||{numericAxisId:n,cateAxisId:s,items:[]};j.items.push(m),w.hasStack=!0,w.stackGroups[v]=j}else w.stackGroups[og("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return qs(qs({},d),{},ip({},b,w))},c),f={};return Object.keys(u).reduce(function(d,m){var p=u[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,g){var b=p.stackGroups[g];return qs(qs({},v),{},ip({},g,{numericAxisId:n,cateAxisId:s,items:b.items,stackedData:wX(t,b.items,i)}))},y)}return qs(qs({},d),{},ip({},m,p))},f)},jX=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=DK(u,i,l);return t.domain([My(f),Kf(f)]),{niceTicks:f}}if(i&&s==="number"){var d=t.domain(),m=LK(d,i,l);return{niceTicks:m}}return null};function qT(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Jn(s[t.dataKey])){var l=Jv(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=wc(s,Jn(o)?t.dataKey:o);return Jn(c)?null:t.scale(c)}var $T=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=wc(o,r.dataKey,r.domain[l]);return Jn(c)?null:r.scale(c)-i/2+s},kX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},SX=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?qs(qs({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Fi(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},_X=function(t){return t.reduce(function(r,n){return[My(n.concat([r[0]]).filter(hr)),Kf(n.concat([r[1]]).filter(hr))]},[1/0,-1/0])},mF=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,f){var d=_X(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},zT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p4=function(t,r,n){if(Tn(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(hr(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(zT.test(t[0])){var i=+zT.exec(t[0])[1];s[0]=r[0]-i}else Tn(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(hr(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(HT.test(t[1])){var o=+HT.exec(t[1])[1];s[1]=r[1]+o}else Tn(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},S1=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=Yk(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},WT=function(t,r,n){return!t||!t.length||yx(t,iu(n,"type.defaultProps.domain"))?r:t},xF=function(t,r){var n=t.type.defaultProps?qs(qs({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return qs(qs({},qn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:N3(t),value:wc(r,s),type:c,payload:r,chartType:u,hide:f})};function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function VT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(r),!0).forEach(function(n){AX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AX(e,t,r){return t=CX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=EX(e,"string");return kx(t)=="symbol"?t:t+""}function EX(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _1=Math.PI/180,TX=function(t){return t*180/Math.PI},go=function(t,r,n,s){return{x:t+Math.cos(-_1*s)*n,y:r+Math.sin(-_1*s)*n}},OX=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},PX=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=OX({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:TX(u),angleInRadian:u}},IX=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},DX=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},KT=function(t,r){var n=t.x,s=t.y,i=PX({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=IX(r),d=f.startAngle,m=f.endAngle,p=l,y;if(d<=m){for(;p>m;)p-=360;for(;p<d;)p+=360;y=p>=d&&p<=m}else{for(;p>d;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=d}return y?GT(GT({},r),{},{radius:o,angle:DX(p,r)}):null};function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}var LX=["offset"];function FX(e){return UX(e)||BX(e)||RX(e)||MX()}function MX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RX(e,t){if(e){if(typeof e=="string")return m4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m4(e,t)}}function BX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UX(e){if(Array.isArray(e))return m4(e)}function m4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qX(e,t){if(e==null)return{};var r=$X(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $X(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function XT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(r),!0).forEach(function(n){zX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zX(e,t,r){return t=HX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=WX(e,"string");return Sx(t)=="symbol"?t:t+""}function WX(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_x.apply(this,arguments)}var VX=function(t){var r=t.value,n=t.formatter,s=Jn(t.children)?r:t.children;return Tn(n)?n(s):s},GX=function(t,r){var n=Mu(r-t),s=Math.min(Math.abs(r-t),360);return n*s},KX=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,g=(d+m)/2,b=GX(p,y),w=b>=0?1:-1,j,N;s==="insideStart"?(j=p+w*o,N=v):s==="insideEnd"?(j=y-w*o,N=!v):s==="end"&&(j=y+w*o,N=v),N=b<=0?N:!N;var S=go(u,f,g,j),P=go(u,f,g,j+(N?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(P.x,",").concat(P.y),T=Jn(t.id)?og("recharts-radial-line-"):t.id;return at.createElement("text",_x({},n,{dominantBaseline:"central",className:ua("recharts-radial-bar-label",l)}),at.createElement("defs",null,at.createElement("path",{id:T,d:A})),at.createElement("textPath",{xlinkHref:"#".concat(T)},r))},XX=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,m=(f+d)/2;if(s==="outside"){var p=go(o,l,u+n,m),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,b=go(o,l,g,m),w=b.x,j=b.y;return{x:w,y:j,textAnchor:"middle",verticalAnchor:"middle"}},YX=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,m=d*s,p=d>0?"end":"start",y=d>0?"start":"end",v=u>=0?1:-1,g=v*s,b=v>0?"end":"start",w=v>0?"start":"end";if(i==="top"){var j={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:p};return Pi(Pi({},j),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+f+m,textAnchor:"middle",verticalAnchor:y};return Pi(Pi({},N),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var S={x:l-g,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return Pi(Pi({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(i==="right"){var P={x:l+u+g,y:c+f/2,textAnchor:w,verticalAnchor:"middle"};return Pi(Pi({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:f}:{})}var A=n?{width:u,height:f}:{};return i==="insideLeft"?Pi({x:l+g,y:c+f/2,textAnchor:w,verticalAnchor:"middle"},A):i==="insideRight"?Pi({x:l+u-g,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideTop"?Pi({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:y},A):i==="insideBottom"?Pi({x:l+u/2,y:c+f-m,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?Pi({x:l+g,y:c+m,textAnchor:w,verticalAnchor:y},A):i==="insideTopRight"?Pi({x:l+u-g,y:c+m,textAnchor:b,verticalAnchor:y},A):i==="insideBottomLeft"?Pi({x:l+g,y:c+f-m,textAnchor:w,verticalAnchor:p},A):i==="insideBottomRight"?Pi({x:l+u-g,y:c+f-m,textAnchor:b,verticalAnchor:p},A):zp(i)&&(hr(i.x)||M0(i.x))&&(hr(i.y)||M0(i.y))?Pi({x:l+th(i.x,u),y:c+th(i.y,f),textAnchor:"end",verticalAnchor:"end"},A):Pi({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},A)},JX=function(t){return"cx"in t&&hr(t.cx)};function Bo(e){var t=e.offset,r=t===void 0?5:t,n=qX(e,LX),s=Pi({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,f=s.className,d=f===void 0?"":f,m=s.textBreakAll;if(!i||Jn(l)&&Jn(c)&&!U.isValidElement(u)&&!Tn(u))return null;if(U.isValidElement(u))return U.cloneElement(u,s);var p;if(Tn(u)){if(p=U.createElement(u,s),U.isValidElement(p))return p}else p=VX(s);var y=JX(i),v=qn(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return KX(s,p,v);var g=y?XX(s):YX(s);return at.createElement(u1,_x({className:ua("recharts-label",d)},v,g,{breakAll:m}),p)}Bo.displayName="Label";var gF=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,m=t.y,p=t.top,y=t.left,v=t.width,g=t.height,b=t.clockWise,w=t.labelViewBox;if(w)return w;if(hr(v)&&hr(g)){if(hr(d)&&hr(m))return{x:d,y:m,width:v,height:g};if(hr(p)&&hr(y))return{x:p,y,width:v,height:g}}return hr(d)&&hr(m)?{x:d,y:m,width:0,height:0}:hr(r)&&hr(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},QX=function(t,r){return t?t===!0?at.createElement(Bo,{key:"label-implicit",viewBox:r}):Fi(t)?at.createElement(Bo,{key:"label-implicit",viewBox:r,value:t}):U.isValidElement(t)?t.type===Bo?U.cloneElement(t,{key:"label-implicit",viewBox:r}):at.createElement(Bo,{key:"label-implicit",content:t,viewBox:r}):Tn(t)?at.createElement(Bo,{key:"label-implicit",content:t,viewBox:r}):zp(t)?at.createElement(Bo,_x({viewBox:r},t,{key:"label-implicit"})):null:null},ZX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=gF(t),o=qu(s,Bo).map(function(c,u){return U.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=QX(t.label,r||i);return[l].concat(FX(o))};Bo.parseViewBox=gF;Bo.renderCallByParent=ZX;var bN,YT;function eY(){if(YT)return bN;YT=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return bN=e,bN}var tY=eY();const rY=Ea(tY);function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}var nY=["valueAccessor"],aY=["data","dataKey","clockWise","id","textBreakAll"];function sY(e){return cY(e)||lY(e)||oY(e)||iY()}function iY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oY(e,t){if(e){if(typeof e=="string")return x4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x4(e,t)}}function lY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cY(e){if(Array.isArray(e))return x4(e)}function x4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A1.apply(this,arguments)}function JT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(r),!0).forEach(function(n){uY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uY(e,t,r){return t=dY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dY(e){var t=fY(e,"string");return Ax(t)=="symbol"?t:t+""}function fY(e,t){if(Ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZT(e,t){if(e==null)return{};var r=hY(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var pY=function(t){return Array.isArray(t.value)?rY(t.value):t.value};function r0(e){var t=e.valueAccessor,r=t===void 0?pY:t,n=ZT(e,nY),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=ZT(n,aY);return!s||!s.length?null:at.createElement(Ts,{className:"recharts-label-list"},s.map(function(f,d){var m=Jn(i)?r(f,d):wc(f&&f.payload,i),p=Jn(l)?{}:{id:"".concat(l,"-").concat(d)};return at.createElement(Bo,A1({},qn(f,!0),u,p,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:Bo.parseViewBox(Jn(o)?f:QT(QT({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}r0.displayName="LabelList";function mY(e,t){return e?e===!0?at.createElement(r0,{key:"labelList-implicit",data:t}):at.isValidElement(e)||Tn(e)?at.createElement(r0,{key:"labelList-implicit",data:t,content:e}):zp(e)?at.createElement(r0,A1({data:t},e,{key:"labelList-implicit"})):null:null}function xY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=qu(n,r0).map(function(o,l){return U.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=mY(e.label,t);return[i].concat(sY(s))}r0.renderCallByParent=xY;function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function g4(){return g4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g4.apply(this,arguments)}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(n){gY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gY(e,t,r){return t=vY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vY(e){var t=yY(e,"string");return Cx(t)=="symbol"?t:t+""}function yY(e,t){if(Cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bY=function(t,r){var n=Mu(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},sv=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+s,d=Math.asin(c/f)/_1,m=u?i:i+o*d,p=go(r,n,f,m),y=go(r,n,s,m),v=u?i-o*d:i,g=go(r,n,f*Math.cos(d*_1),v);return{center:p,circleTangency:y,lineTangency:g,theta:d}},vF=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=bY(o,l),u=o+c,f=go(r,n,i,o),d=go(r,n,i,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var p=go(r,n,s,o),y=go(r,n,s,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},wY=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Mu(f-u),m=sv({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,v=m.theta,g=sv({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,w=g.lineTangency,j=g.theta,N=c?Math.abs(u-f):Math.abs(u-f)-v-j;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):vF({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(s>0){var P=sv({cx:r,cy:n,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=P.circleTangency,T=P.lineTangency,I=P.theta,B=sv({cx:r,cy:n,radius:s,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=B.circleTangency,E=B.lineTangency,M=B.theta,q=c?Math.abs(u-f):Math.abs(u-f)-I-M;if(q<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(q>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},NY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yF=function(t){var r=tO(tO({},NY),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,m=r.className;if(o<i||f===d)return null;var p=ua("recharts-sector",m),y=o-i,v=th(l,y,0,!0),g;return v>0&&Math.abs(f-d)<360?g=wY({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):g=vF({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),at.createElement("path",g4({},qn(r,!0),{className:p,d:g,role:"img"}))};function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}function v4(){return v4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v4.apply(this,arguments)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){jY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jY(e,t,r){return t=kY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kY(e){var t=SY(e,"string");return Ex(t)=="symbol"?t:t+""}function SY(e,t){if(Ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aO={curveBasisClosed:Wq,curveBasisOpen:Vq,curveBasis:Hq,curveBumpX:Tq,curveBumpY:Oq,curveLinearClosed:Gq,curveLinear:_y,curveMonotoneX:Kq,curveMonotoneY:Xq,curveNatural:Yq,curveStep:Jq,curveStepAfter:Zq,curveStepBefore:Qq},iv=function(t){return t.x===+t.x&&t.y===+t.y},wm=function(t){return t.x},Nm=function(t){return t.y},_Y=function(t,r){if(Tn(t))return t;var n="curve".concat(ky(t));return(n==="curveMonotone"||n==="curveBump")&&r?aO["".concat(n).concat(r==="vertical"?"Y":"X")]:aO[n]||_y},AY=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=_Y(n,l),d=u?i.filter(function(v){return iv(v)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(v){return iv(v)}):o,y=d.map(function(v,g){return nO(nO({},v),{},{base:p[g]})});return l==="vertical"?m=Jg().y(Nm).x1(wm).x0(function(v){return v.base.x}):m=Jg().x(wm).y1(Nm).y0(function(v){return v.base.y}),m.defined(iv).curve(f),m(y)}return l==="vertical"&&hr(o)?m=Jg().y(Nm).x1(wm).x0(o):hr(o)?m=Jg().x(wm).y1(Nm).y0(o):m=jD().x(wm).y(Nm),m.defined(iv).curve(f),m(d)},Vm=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?AY(t):s;return at.createElement("path",v4({},qn(t,!1),Qv(t),{className:ua("recharts-curve",r),d:o,ref:i}))},wN={exports:{}},NN,sO;function CY(){if(sO)return NN;sO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return NN=e,NN}var jN,iO;function EY(){if(iO)return jN;iO=1;var e=CY();function t(){}function r(){}return r.resetWarningCache=t,jN=function(){function n(o,l,c,u,f,d){if(d!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},jN}var oO;function TY(){return oO||(oO=1,wN.exports=EY()()),wN.exports}var OY=TY();const ya=Ea(OY),{getOwnPropertyNames:PY,getOwnPropertySymbols:IY}=Object,{hasOwnProperty:DY}=Object.prototype;function kN(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function ov(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function LY(e){return e?.[Symbol.toStringTag]}function lO(e){return PY(e).concat(IY(e))}const FY=Object.hasOwn||((e,t)=>DY.call(e,t));function xh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const MY="__v",RY="__o",BY="_owner",{getOwnPropertyDescriptor:cO,keys:uO}=Object;function UY(e,t){return e.byteLength===t.byteLength&&C1(new Uint8Array(e),new Uint8Array(t))}function qY(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function $Y(e,t){return e.byteLength===t.byteLength&&C1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function zY(e,t){return xh(e.getTime(),t.getTime())}function HY(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function WY(e,t){return e===t}function dO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(l=u.next())&&!l.done;){if(s[d]){d++;continue}const m=o.value,p=l.value;if(r.equals(m[0],p[0],c,d,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){f=s[d]=!0;break}d++}if(!f)return!1;c++}return!0}const VY=xh;function GY(e,t,r){const n=uO(e);let s=n.length;if(uO(t).length!==s)return!1;for(;s-- >0;)if(!bF(e,t,r,n[s]))return!1;return!0}function jm(e,t,r){const n=lO(e);let s=n.length;if(lO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!bF(e,t,r,i)||(o=cO(e,i),l=cO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function KY(e,t){return xh(e.valueOf(),t.valueOf())}function XY(e,t){return e.source===t.source&&e.flags===t.flags}function fO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function C1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function YY(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function bF(e,t,r,n){return(n===BY||n===RY||n===MY)&&(e.$$typeof||t.$$typeof)?!0:FY(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const JY="[object ArrayBuffer]",QY="[object Arguments]",ZY="[object Boolean]",eJ="[object DataView]",tJ="[object Date]",rJ="[object Error]",nJ="[object Map]",aJ="[object Number]",sJ="[object Object]",iJ="[object RegExp]",oJ="[object Set]",lJ="[object String]",cJ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},uJ="[object URL]",dJ=Object.prototype.toString;function fJ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:m,areUrlsEqual:p,unknownTagComparators:y}){return function(g,b,w){if(g===b)return!0;if(g==null||b==null)return!1;const j=typeof g;if(j!==typeof b)return!1;if(j!=="object")return j==="number"?l(g,b,w):j==="function"?i(g,b,w):!1;const N=g.constructor;if(N!==b.constructor)return!1;if(N===Object)return c(g,b,w);if(Array.isArray(g))return t(g,b,w);if(N===Date)return n(g,b,w);if(N===RegExp)return f(g,b,w);if(N===Map)return o(g,b,w);if(N===Set)return d(g,b,w);const S=dJ.call(g);if(S===tJ)return n(g,b,w);if(S===iJ)return f(g,b,w);if(S===nJ)return o(g,b,w);if(S===oJ)return d(g,b,w);if(S===sJ)return typeof g.then!="function"&&typeof b.then!="function"&&c(g,b,w);if(S===uJ)return p(g,b,w);if(S===rJ)return s(g,b,w);if(S===QY)return c(g,b,w);if(cJ[S])return m(g,b,w);if(S===JY)return e(g,b,w);if(S===eJ)return r(g,b,w);if(S===ZY||S===aJ||S===lJ)return u(g,b,w);if(y){let P=y[S];if(!P){const A=LY(g);A&&(P=y[A])}if(P)return P(g,b,w)}return!1}}function hJ({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:UY,areArraysEqual:r?jm:qY,areDataViewsEqual:$Y,areDatesEqual:zY,areErrorsEqual:HY,areFunctionsEqual:WY,areMapsEqual:r?kN(dO,jm):dO,areNumbersEqual:VY,areObjectsEqual:r?jm:GY,arePrimitiveWrappersEqual:KY,areRegExpsEqual:XY,areSetsEqual:r?kN(fO,jm):fO,areTypedArraysEqual:r?kN(C1,jm):C1,areUrlsEqual:YY,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=ov(n.areArraysEqual),i=ov(n.areMapsEqual),o=ov(n.areObjectsEqual),l=ov(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function pJ(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function mJ({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const xJ=x0();x0({strict:!0});x0({circular:!0});x0({circular:!0,strict:!0});x0({createInternalComparator:()=>xh});x0({strict:!0,createInternalComparator:()=>xh});x0({circular:!0,createInternalComparator:()=>xh});x0({circular:!0,createInternalComparator:()=>xh,strict:!0});function x0(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=hJ(e),o=fJ(i),l=r?r(o):pJ(o);return mJ({circular:t,comparator:o,createState:n,equals:l,strict:s})}function gJ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function hO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):gJ(s)};requestAnimationFrame(n)}function y4(e){"@babel/helpers - typeof";return y4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y4(e)}function vJ(e){return NJ(e)||wJ(e)||bJ(e)||yJ()}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NJ(e){if(Array.isArray(e))return e}function jJ(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=vJ(o),c=l[0],u=l.slice(1);if(typeof c=="number"){hO(s.bind(null,u),c);return}s(c),hO(s.bind(null,u));return}y4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(n){wF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t,r){return t=kJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kJ(e){var t=SJ(e,"string");return Tx(t)==="symbol"?t:String(t)}function SJ(e,t){if(Tx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _J=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},AJ=function(t){return t},CJ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Gm=function(t,r){return Object.keys(r).reduce(function(n,s){return xO(xO({},n),{},wF({},s,t(s,r[s])))},{})},gO=function(t,r,n){return t.map(function(s){return"".concat(CJ(s)," ").concat(r,"ms ").concat(n)}).join(",")};function EJ(e,t){return PJ(e)||OJ(e,t)||NF(e,t)||TJ()}function TJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function PJ(e){if(Array.isArray(e))return e}function IJ(e){return FJ(e)||LJ(e)||NF(e)||DJ()}function DJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NF(e,t){if(e){if(typeof e=="string")return b4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b4(e,t)}}function LJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FJ(e){if(Array.isArray(e))return b4(e)}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E1=1e-4,jF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},kF=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},vO=function(t,r){return function(n){var s=jF(t,r);return kF(s,n)}},MJ=function(t,r){return function(n){var s=jF(t,r),i=[].concat(IJ(s.map(function(o,l){return o*l}).slice(1)),[0]);return kF(i,n)}},yO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),f=EJ(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var d=vO(s,o),m=vO(i,l),p=MJ(s,o),y=function(b){return b>1?1:b<0?0:b},v=function(b){for(var w=b>1?1:b,j=w,N=0;N<8;++N){var S=d(j)-w,P=p(j);if(Math.abs(S-w)<E1||P<E1)return m(j);j=y(j-S/P)}return m(j)};return v.isStepper=!1,v},RJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,d,m){var p=-(f-d)*n,y=m*i,v=m+(p-y)*l/1e3,g=m*l/1e3+f;return Math.abs(g-d)<E1&&Math.abs(v)<E1?[d,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},BJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yO(s);case"spring":return RJ();default:if(s.split("(")[0]==="cubic-bezier")return yO(s)}return typeof s=="function"?s:null};function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function bO(e){return $J(e)||qJ(e)||SF(e)||UJ()}function UJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $J(e){if(Array.isArray(e))return N4(e)}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(n){w4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w4(e,t,r){return t=zJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zJ(e){var t=HJ(e,"string");return Ox(t)==="symbol"?t:String(t)}function HJ(e,t){if(Ox(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ox(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WJ(e,t){return KJ(e)||GJ(e,t)||SF(e,t)||VJ()}function VJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SF(e,t){if(e){if(typeof e=="string")return N4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,t)}}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function KJ(e){if(Array.isArray(e))return e}var T1=function(t,r,n){return t+(r-t)*n},j4=function(t){var r=t.from,n=t.to;return r!==n},XJ=function e(t,r,n){var s=Gm(function(i,o){if(j4(o)){var l=t(o.from,o.to,o.velocity),c=WJ(l,2),u=c[0],f=c[1];return fo(fo({},o),{},{from:u,velocity:f})}return o},r);return n<1?Gm(function(i,o){return j4(o)?fo(fo({},o),{},{velocity:T1(o.velocity,s[i].velocity,n),from:T1(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const YJ=(function(e,t,r,n,s){var i=_J(e,t),o=i.reduce(function(g,b){return fo(fo({},g),{},w4({},b,[e[b],t[b]]))},{}),l=i.reduce(function(g,b){return fo(fo({},g),{},w4({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,f,d=function(){return null},m=function(){return Gm(function(b,w){return w.from},l)},p=function(){return!Object.values(l).filter(j4).length},y=function(b){u||(u=b);var w=b-u,j=w/r.dt;l=XJ(r,l,j),s(fo(fo(fo({},e),t),m())),u=b,p()||(c=requestAnimationFrame(d))},v=function(b){f||(f=b);var w=(b-f)/n,j=Gm(function(S,P){return T1.apply(void 0,bO(P).concat([r(w)]))},o);if(s(fo(fo(fo({},e),t),j)),w<1)c=requestAnimationFrame(d);else{var N=Gm(function(S,P){return T1.apply(void 0,bO(P).concat([r(1)]))},o);s(fo(fo(fo({},e),t),N))}};return d=r.isStepper?y:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}});function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}var JJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function QJ(e,t){if(e==null)return{};var r=ZJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function SN(e){return nQ(e)||rQ(e)||tQ(e)||eQ()}function eQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tQ(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function rQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nQ(e){if(Array.isArray(e))return k4(e)}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(n){Lm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lm(e,t,r){return t=_F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_F(n.key),n)}}function iQ(e,t,r){return t&&sQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _F(e){var t=oQ(e,"string");return kp(t)==="symbol"?t:String(t)}function oQ(e,t){if(kp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S4(e,t)}function S4(e,t){return S4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},S4(e,t)}function cQ(e){var t=uQ();return function(){var n=O1(e),s;if(t){var i=O1(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return _4(this,s)}}function _4(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A4(e)}function A4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O1(e)}var xf=(function(e){lQ(r,e);var t=cQ(r);function r(n,s){var i;aQ(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(A4(i)),i.changeStyle=i.changeStyle.bind(A4(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),_4(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof m=="function")return i.state={style:u},_4(i);i.state={style:c?Lm({},c,u):u}}else i.state={style:{}};return i}return iQ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Lm({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(p);return}if(!(xJ(s.to,f)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||u?d:s.to;if(this.state&&m){var g={style:c?Lm({},c,v):v};(c&&m[c]!==v||!c&&m!==v)&&this.setState(g)}this.runAnimation(Cu(Cu({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,f=s.begin,d=s.onAnimationEnd,m=s.onAnimationStart,p=YJ(o,l,BJ(u),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,f,y,c,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],f=u.style,d=u.duration,m=d===void 0?0:d,p=function(v,g,b){if(b===0)return v;var w=g.duration,j=g.easing,N=j===void 0?"ease":j,S=g.style,P=g.properties,A=g.onAnimationEnd,T=b>0?o[b-1]:g,I=P||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(SN(v),[i.runJSAnimation.bind(i,{from:T.style,to:S,duration:w,easing:N}),w]);var B=gO(I,w,N),C=Cu(Cu(Cu({},T.style),S),{},{transition:B});return[].concat(SN(v),[C,w,A]).filter(AJ)};return this.manager.start([c].concat(SN(o.reduce(p,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=jJ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,f=s.onAnimationStart,d=s.onAnimationEnd,m=s.steps,p=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var v=l?Lm({},l,c):c,g=gO(Object.keys(v),o,u);y.start([f,i,Cu(Cu({},v),{},{transition:g}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=QJ(s,JJ),u=U.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var d=function(p){var y=p.props,v=y.style,g=v===void 0?{}:v,b=y.className,w=U.cloneElement(p,Cu(Cu({},c),{},{style:Cu(Cu({},g),f),className:b}));return w};return u===1?d(U.Children.only(i)):at.createElement("div",null,U.Children.map(i,function(m){return d(m)}))}}]),r})(U.PureComponent);xf.displayName="Animate";xf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};xf.propTypes={from:ya.oneOfType([ya.object,ya.string]),to:ya.oneOfType([ya.object,ya.string]),attributeName:ya.string,duration:ya.number,begin:ya.number,easing:ya.oneOfType([ya.string,ya.func]),steps:ya.arrayOf(ya.shape({duration:ya.number.isRequired,style:ya.object.isRequired,easing:ya.oneOfType([ya.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ya.func]),properties:ya.arrayOf("string"),onAnimationEnd:ya.func})),children:ya.oneOfType([ya.node,ya.func]),isActive:ya.bool,canBegin:ya.bool,onAnimationEnd:ya.func,shouldReAnimate:ya.bool,onAnimationStart:ya.func,onAnimationReStart:ya.func};function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function P1(){return P1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P1.apply(this,arguments)}function dQ(e,t){return mQ(e)||pQ(e,t)||hQ(e,t)||fQ()}function fQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hQ(e,t){if(e){if(typeof e=="string")return jO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jO(e,t)}}function jO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mQ(e){if(Array.isArray(e))return e}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(r),!0).forEach(function(n){xQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xQ(e,t,r){return t=gQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=vQ(e,"string");return Px(t)=="symbol"?t:t+""}function vQ(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _O=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],m=0,p=4;m<p;m++)d[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+s-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+s)),f+="L ".concat(t+c*d[3],",").concat(r+s),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);f="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+s,`
            L `).concat(t+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*y," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},yQ=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),d=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=f&&s>=d&&s<=m}return!1},bQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},j3=function(t){var r=SO(SO({},bQ),t),n=U.useRef(),s=U.useState(-1),i=dQ(s,2),o=i[0],l=i[1];U.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,m=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var j=ua("recharts-rectangle",p);return w?at.createElement(xf,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:y,isActive:w},function(N){var S=N.width,P=N.height,A=N.x,T=N.y;return at.createElement(xf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:b,easing:y},at.createElement("path",P1({},qn(r,!0),{className:j,d:_O(A,T,S,P,m),ref:n})))}):at.createElement("path",P1({},qn(r,!0),{className:j,d:_O(c,u,f,d,m)}))};function C4(){return C4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C4.apply(this,arguments)}var k3=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=ua("recharts-dot",i);return r===+r&&n===+n&&s===+s?at.createElement("circle",C4({},qn(t,!1),Qv(t),{className:o,cx:r,cy:n,r:s})):null};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}var wQ=["x","y","top","left","width","height","className"];function E4(){return E4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E4.apply(this,arguments)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){jQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jQ(e,t,r){return t=kQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kQ(e){var t=SQ(e,"string");return Ix(t)=="symbol"?t:t+""}function SQ(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ix(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Q(e,t){if(e==null)return{};var r=AQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var CQ=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},EQ=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,m=t.height,p=m===void 0?0:m,y=t.className,v=_Q(t,wQ),g=NQ({x:n,y:i,top:l,left:u,width:d,height:p},v);return!hr(n)||!hr(i)||!hr(d)||!hr(p)||!hr(l)||!hr(u)?null:at.createElement("path",E4({},qn(g,!0),{className:ua("recharts-cross",y),d:CQ(n,i,d,p,l,u)}))},_N,CO;function TQ(){if(CO)return _N;CO=1;var e=VD(),t=e(Object.getPrototypeOf,Object);return _N=t,_N}var AN,EO;function OQ(){if(EO)return AN;EO=1;var e=vf(),t=TQ(),r=yf(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function u(f){if(!r(f)||e(f)!=n)return!1;var d=t(f);if(d===null)return!0;var m=l.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return AN=u,AN}var PQ=OQ();const IQ=Ea(PQ);var CN,TO;function DQ(){if(TO)return CN;TO=1;var e=vf(),t=yf(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return CN=n,CN}var LQ=DQ();const FQ=Ea(LQ);function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1.apply(this,arguments)}function MQ(e,t){return qQ(e)||UQ(e,t)||BQ(e,t)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(e,t){if(e){if(typeof e=="string")return OO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OO(e,t)}}function OO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qQ(e){if(Array.isArray(e))return e}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(n){$Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t,r){return t=zQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zQ(e){var t=HQ(e,"string");return Dx(t)=="symbol"?t:t+""}function HQ(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DO=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},WQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VQ=function(t){var r=IO(IO({},WQ),t),n=U.useRef(),s=U.useState(-1),i=MQ(s,2),o=i[0],l=i[1];U.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||m!==+m||f===0&&d===0||m===0)return null;var w=ua("recharts-trapezoid",p);return b?at.createElement(xf,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:m,x:c,y:u},duration:v,animationEasing:y,isActive:b},function(j){var N=j.upperWidth,S=j.lowerWidth,P=j.height,A=j.x,T=j.y;return at.createElement(xf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:y},at.createElement("path",I1({},qn(r,!0),{className:w,d:DO(A,T,N,S,P),ref:n})))}):at.createElement("g",null,at.createElement("path",I1({},qn(r,!0),{className:w,d:DO(c,u,f,d,m)})))},GQ=["option","shapeType","propTransformer","activeClassName","isActive"];function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function KQ(e,t){if(e==null)return{};var r=XQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){YQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YQ(e,t,r){return t=JQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JQ(e){var t=QQ(e,"string");return Lx(t)=="symbol"?t:t+""}function QQ(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZQ(e,t){return D1(D1({},t),e)}function eZ(e,t){return e==="symbols"}function FO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return at.createElement(j3,r);case"trapezoid":return at.createElement(VQ,r);case"sector":return at.createElement(yF,r);case"symbols":if(eZ(t))return at.createElement($k,r);break;default:return null}}function tZ(e){return U.isValidElement(e)?e.props:e}function rZ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?ZQ:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=KQ(e,GQ),u;if(U.isValidElement(t))u=U.cloneElement(t,D1(D1({},c),tZ(t)));else if(Tn(t))u=t(c);else if(IQ(t)&&!FQ(t)){var f=s(t,c);u=at.createElement(FO,{shapeType:r,elementProps:f})}else{var d=c;u=at.createElement(FO,{shapeType:r,elementProps:d})}return l?at.createElement(Ts,{className:o},u):u}function qy(e,t){return t!=null&&"trapezoids"in e.props}function $y(e,t){return t!=null&&"sectors"in e.props}function Fx(e,t){return t!=null&&"points"in e.props}function nZ(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function aZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function sZ(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function iZ(e,t){var r;return qy(e,t)?r=nZ:$y(e,t)?r=aZ:Fx(e,t)&&(r=sZ),r}function oZ(e,t){var r;return qy(e,t)?r="trapezoids":$y(e,t)?r="sectors":Fx(e,t)&&(r="points"),r}function lZ(e,t){if(qy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if($y(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Fx(e,t)?t.payload:{}}function cZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=oZ(r,t),i=lZ(r,t),o=n.filter(function(c,u){var f=yx(i,c),d=r.props[s].filter(function(y){var v=iZ(r,t);return v(y,t)}),m=r.props[s].indexOf(d[d.length-1]),p=u===m;return f&&p}),l=n.indexOf(o[o.length-1]);return l}var EN,MO;function uZ(){if(MO)return EN;MO=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,c=t(e((s-n)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=i;return u}return EN=r,EN}var TN,RO;function AF(){if(RO)return TN;RO=1;var e=lL(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return TN=n,TN}var ON,BO;function dZ(){if(BO)return ON;BO=1;var e=uZ(),t=Ty(),r=AF();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return ON=n,ON}var PN,UO;function fZ(){if(UO)return PN;UO=1;var e=dZ(),t=e();return PN=t,PN}var hZ=fZ();const L1=Ea(hZ);function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){CF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CF(e,t,r){return t=pZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pZ(e){var t=mZ(e,"string");return Mx(t)=="symbol"?t:t+""}function mZ(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xZ=["Webkit","Moz","O","ms"],gZ=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=xZ.reduce(function(i,o){return $O($O({},i),{},CF({},o+n,r))},{});return s[t]=r,s};function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){fc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TF(n.key),n)}}function yZ(e,t,r){return t&&HO(e.prototype,t),r&&HO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bZ(e,t,r){return t=M1(t),wZ(e,EF()?Reflect.construct(t,r||[],M1(e).constructor):t.apply(e,r))}function wZ(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NZ(e)}function NZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EF=function(){return!!e})()}function M1(e){return M1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M1(e)}function jZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T4(e,t)}function T4(e,t){return T4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},T4(e,t)}function fc(e,t,r){return t=TF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){var t=kZ(e,"string");return Sp(t)=="symbol"?t:t+""}function kZ(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var SZ=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Hm().domain(L1(0,c)).range([i,i+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},WO=function(t){return t.changedTouches&&!!t.changedTouches.length},_p=(function(e){function t(r){var n;return vZ(this,t),n=bZ(this,t,[r]),fc(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),fc(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),fc(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),fc(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),fc(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),fc(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),fc(n,"handleSlideDragStart",function(s){var i=WO(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return jZ(t,e),yZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(o,d),y=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:y===f?f:y-y%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=wc(i[n],l,n);return Tn(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,v=n.pageX-i;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==m||g.endIndex!==p)&&y&&y(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=WO(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],f=this.props,d=f.x,m=f.width,p=f.travellerWidth,y=f.onChange,v=f.gap,g=f.data,b={startX:this.state.startX,endX:this.state.endX},w=n.pageX-i;w>0?w=Math.min(w,d+m-p-u):w<0&&(w=Math.max(w,d-u)),b[o]=u+w;var j=this.getIndex(b),N=j.startIndex,S=j.endIndex,P=function(){var T=g.length-1;return o==="startX"&&(l>c?N%v===0:S%v===0)||l<c&&S===T||o==="endX"&&(l>c?S%v===0:N%v===0)||l>c&&S===T};this.setState(fc(fc({},o,u+w),"brushMoveStartX",n.pageX),function(){y&&P()&&y(j)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[s],d=l.indexOf(f);if(d!==-1){var m=d+n;if(!(m===-1||m>=l.length)){var p=l[m];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(fc({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return at.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=U.Children.only(u);return d?at.cloneElement(d,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,g=c.endIndex,b=Math.max(n,this.props.x),w=IN(IN({},qn(this.props,!1)),{},{x:b,y:u,width:f,height:d}),j=p||"Min value: ".concat((i=y[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[g])===null||o===void 0?void 0:o.name);return at.createElement(Ts,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,w))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,d=Math.max(Math.abs(s-n)-u,0);return at.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,m=f.endX,p=5,y={pointerEvents:"none",fill:u};return at.createElement(Ts,{className:"recharts-brush-texts"},at.createElement(u1,F1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,m)-p,y:o+l/2},y),this.getTextOfTick(s)),at.createElement(u1,F1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,m)+c+p,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,m=this.state,p=m.startX,y=m.endX,v=m.isTextActive,g=m.isSlideMoving,b=m.isTravellerMoving,w=m.isTravellerFocused;if(!s||!s.length||!hr(l)||!hr(c)||!hr(u)||!hr(f)||u<=0||f<=0)return null;var j=ua("recharts-brush",i),N=at.Children.count(o)===1,S=gZ("userSelect","none");return at.createElement(Ts,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||g||b||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return at.createElement(at.Fragment,null,at.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),at.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),at.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return at.isValidElement(n)?i=at.cloneElement(n,s):Tn(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return IN({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?SZ({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])})(U.PureComponent);fc(_p,"displayName","Brush");fc(_p,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var DN,VO;function _Z(){if(VO)return DN;VO=1;var e=Xk();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return DN=t,DN}var LN,GO;function AZ(){if(GO)return LN;GO=1;var e=BD(),t=h0(),r=_Z(),n=Kl(),s=Ty();function i(o,l,c){var u=n(o)?e:r;return c&&s(o,l,c)&&(l=void 0),u(o,t(l,3))}return LN=i,LN}var CZ=AZ();const EZ=Ea(CZ);var Sd=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},FN,KO;function TZ(){if(KO)return FN;KO=1;var e=nL();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return FN=t,FN}var MN,XO;function OZ(){if(XO)return MN;XO=1;var e=TZ(),t=tL(),r=h0();function n(s,i){var o={};return i=r(i,3),t(s,function(l,c,u){e(o,c,i(l,c,u))}),o}return MN=n,MN}var PZ=OZ();const IZ=Ea(PZ);var RN,YO;function DZ(){if(YO)return RN;YO=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return RN=e,RN}var BN,JO;function LZ(){if(JO)return BN;JO=1;var e=Xk();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return BN=t,BN}var UN,QO;function FZ(){if(QO)return UN;QO=1;var e=DZ(),t=LZ(),r=h0(),n=Kl(),s=Ty();function i(o,l,c){var u=n(o)?e:t;return c&&s(o,l,c)&&(l=void 0),u(o,r(l,3))}return UN=i,UN}var MZ=FZ();const OF=Ea(MZ);var RZ=["x","y"];function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function O4(){return O4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O4.apply(this,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function km(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){BZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BZ(e,t,r){return t=UZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UZ(e){var t=qZ(e,"string");return Rx(t)=="symbol"?t:t+""}function qZ(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Z(e,t){if(e==null)return{};var r=zZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HZ(e,t){var r=e.x,n=e.y,s=$Z(e,RZ),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),d="".concat(t.width||s.width),m=parseInt(d,10);return km(km(km(km(km({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function eP(e){return at.createElement(rZ,O4({shapeType:"rectangle",propTransformer:HZ,activeClassName:"recharts-active-bar"},e))}var WZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=typeof n=="number";return i?t(n,s):(i||nh(),r)}},VZ=["value","background"],PF;function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function GZ(e,t){if(e==null)return{};var r=KZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R1.apply(this,arguments)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(n){Xf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DF(n.key),n)}}function YZ(e,t,r){return t&&rP(e.prototype,t),r&&rP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function JZ(e,t,r){return t=B1(t),QZ(e,IF()?Reflect.construct(t,r||[],B1(e).constructor):t.apply(e,r))}function QZ(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZZ(e)}function ZZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function B1(e){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B1(e)}function eee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}function P4(e,t){return P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},P4(e,t)}function Xf(e,t,r){return t=DF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DF(e){var t=tee(e,"string");return Ap(t)=="symbol"?t:t+""}function tee(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hg=(function(e){function t(){var r;XZ(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=JZ(this,t,[].concat(s)),Xf(r,"state",{isAnimationFinished:!1}),Xf(r,"id",og("recharts-bar-")),Xf(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Xf(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return eee(t,e),YZ(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,f=qn(this.props,!1);return n&&n.map(function(d,m){var p=m===c,y=p?u:o,v=vi(vi(vi({},f),d),{},{isActive:p,option:y,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return at.createElement(Ts,R1({className:"recharts-bar-rectangle"},Zv(s.props,d,m),{key:"rectangle-".concat(d?.x,"-").concat(d?.y,"-").concat(d?.value)}),at.createElement(eP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,f=s.animationEasing,d=s.animationId,m=this.state.prevData;return at.createElement(xf,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=i.map(function(g,b){var w=m&&m[b];if(w){var j=ru(w.x,g.x),N=ru(w.y,g.y),S=ru(w.width,g.width),P=ru(w.height,g.height);return vi(vi({},g),{},{x:j(y),y:N(y),width:S(y),height:P(y)})}if(o==="horizontal"){var A=ru(0,g.height),T=A(y);return vi(vi({},g),{},{y:g.y+g.height-T,height:T})}var I=ru(0,g.width),B=I(y);return vi(vi({},g),{},{width:B})});return at.createElement(Ts,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!yx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=qn(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,m=GZ(u,VZ);if(!d)return null;var p=vi(vi(vi(vi(vi({},m),{},{fill:"#eee"},d),c),Zv(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return at.createElement(eP,R1({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},p))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=qu(f,Uy);if(!d)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(g,b){var w=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:w,errorVal:wc(g,b)}},y={clipPath:n?"url(#clipPath-".concat(s,")"):null};return at.createElement(Ts,y,d.map(function(v){return at.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,m=n.height,p=n.isAnimationActive,y=n.background,v=n.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,b=ua("recharts-bar",o),w=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=w||j,S=Jn(v)?this.id:v;return at.createElement(Ts,{className:b},w||j?at.createElement("defs",null,at.createElement("clipPath",{id:"clipPath-".concat(S)},at.createElement("rect",{x:w?u:u-d/2,y:j?f:f-m/2,width:w?d:d*2,height:j?m:m*2}))):null,at.createElement(Ts,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!p||g)&&r0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(U.PureComponent);PF=hg;Xf(hg,"displayName","Bar");Xf(hg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Vp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xf(hg,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,p=xX(n,r);if(!p)return null;var y=t.layout,v=r.type.defaultProps,g=v!==void 0?vi(vi({},v),r.props):r.props,b=g.dataKey,w=g.children,j=g.minPointSize,N=y==="horizontal"?o:i,S=u?N.scale.domain():null,P=kX({numericAxis:N}),A=qu(w,uL),T=d.map(function(I,B){var C,E,M,q,G,Z;u?C=gX(u[f+B],S):(C=wc(I,b),Array.isArray(C)||(C=[P,C]));var te=WZ(j,PF.defaultProps.minPointSize)(C[1],B);if(y==="horizontal"){var ae,Q=[o.scale(C[0]),o.scale(C[1])],ee=Q[0],W=Q[1];E=$T({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:I,index:B}),M=(ae=W??ee)!==null&&ae!==void 0?ae:void 0,q=p.size;var O=ee-W;if(G=Number.isNaN(O)?0:O,Z={x:E,y:o.y,width:q,height:o.height},Math.abs(te)>0&&Math.abs(G)<Math.abs(te)){var z=Mu(G||te)*(Math.abs(te)-Math.abs(G));M-=z,G+=z}}else{var H=[i.scale(C[0]),i.scale(C[1])],R=H[0],K=H[1];if(E=R,M=$T({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:I,index:B}),q=K-R,G=p.size,Z={x:i.x,y:M,width:i.width,height:G},Math.abs(te)>0&&Math.abs(q)<Math.abs(te)){var le=Mu(q||te)*(Math.abs(te)-Math.abs(q));q+=le}}return vi(vi(vi({},I),{},{x:E,y:M,width:q,height:G,value:u?C:C[1],payload:I,background:Z},A&&A[B]&&A[B].props),{},{tooltipPayload:[xF(r,I)],tooltipPosition:{x:E+q/2,y:M+G/2}})});return vi({data:T,layout:y},m)});function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function ree(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LF(n.key),n)}}function nee(e,t,r){return t&&nP(e.prototype,t),r&&nP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(n){zy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zy(e,t,r){return t=LF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LF(e){var t=aee(e,"string");return Bx(t)=="symbol"?t:t+""}function aee(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var see=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!hc(u,hg);return f.reduce(function(p,y){var v=r[y],g=v.orientation,b=v.domain,w=v.padding,j=w===void 0?{}:w,N=v.mirror,S=v.reversed,P="".concat(g).concat(N?"Mirror":""),A,T,I,B,C;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var E=b[1]-b[0],M=1/0,q=v.categoricalDomain.sort();if(q.forEach(function(H,R){R>0&&(M=Math.min((H||0)-(q[R-1]||0),M))}),Number.isFinite(M)){var G=M/E,Z=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(A=G*Z/2),v.padding==="no-gap"){var te=th(t.barCategoryGap,G*Z),ae=G*Z/2;A=ae-te-(ae-te)/Z*te}}}s==="xAxis"?T=[n.left+(j.left||0)+(A||0),n.left+n.width-(j.right||0)-(A||0)]:s==="yAxis"?T=c==="horizontal"?[n.top+n.height-(j.bottom||0),n.top+(j.top||0)]:[n.top+(j.top||0)+(A||0),n.top+n.height-(j.bottom||0)-(A||0)]:T=v.range,S&&(T=[T[1],T[0]]);var Q=pX(v,i,m),ee=Q.scale,W=Q.realScaleType;ee.domain(b).range(T),mX(ee);var O=jX(ee,Lu(Lu({},v),{},{realScaleType:W}));s==="xAxis"?(C=g==="top"&&!N||g==="bottom"&&N,I=n.left,B=d[P]-C*v.height):s==="yAxis"&&(C=g==="left"&&!N||g==="right"&&N,I=d[P]-C*v.width,B=n.top);var z=Lu(Lu(Lu({},v),O),{},{realScaleType:W,x:I,y:B,scale:ee,width:s==="xAxis"?n.width:v.width,height:s==="yAxis"?n.height:v.height});return z.bandSize=S1(z,O),!v.hide&&s==="xAxis"?d[P]+=(C?-1:1)*z.height:v.hide||(d[P]+=(C?-1:1)*z.width),Lu(Lu({},p),{},zy({},y,z))},{})},FF=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},iee=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return FF({x:r,y:n},{x:s,y:i})},MF=(function(){function e(t){ree(this,e),this.scale=t}return nee(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();zy(MF,"EPS",1e-4);var S3=function(t){var r=Object.keys(t).reduce(function(n,s){return Lu(Lu({},n),{},zy({},s,MF.create(t[s])))},{});return Lu(Lu({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return IZ(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return OF(s,function(i,o){return r[o].isInRange(i)})}})};function oee(e){return(e%180+180)%180}var lee=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=oee(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},qN,sP;function cee(){if(sP)return qN;sP=1;var e=h0(),t=lg(),r=Cy();function n(s){return function(i,o,l){var c=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(d){return u(c[d],d,c)}}var f=s(i,o,l);return f>-1?c[u?i[f]:f]:void 0}}return qN=n,qN}var $N,iP;function uee(){if(iP)return $N;iP=1;var e=AF();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return $N=t,$N}var zN,oP;function dee(){if(oP)return zN;oP=1;var e=YD(),t=h0(),r=uee(),n=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),e(i,t(o,3),u)}return zN=s,zN}var HN,lP;function fee(){if(lP)return HN;lP=1;var e=cee(),t=dee(),r=e(t);return HN=r,HN}var hee=fee();const pee=Ea(hee);var mee=dD();const xee=Ea(mee);var gee=xee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),_3=U.createContext(void 0),A3=U.createContext(void 0),RF=U.createContext(void 0),BF=U.createContext({}),UF=U.createContext(void 0),qF=U.createContext(0),$F=U.createContext(0),cP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=gee(i);return at.createElement(_3.Provider,{value:n},at.createElement(A3.Provider,{value:s},at.createElement(BF.Provider,{value:i},at.createElement(RF.Provider,{value:f},at.createElement(UF.Provider,{value:o},at.createElement(qF.Provider,{value:u},at.createElement($F.Provider,{value:c},l)))))))},vee=function(){return U.useContext(UF)},zF=function(t){var r=U.useContext(_3);r==null&&nh();var n=r[t];return n==null&&nh(),n},yee=function(){var t=U.useContext(_3);return Gf(t)},bee=function(){var t=U.useContext(A3),r=pee(t,function(n){return OF(n.domain,Number.isFinite)});return r||Gf(t)},HF=function(t){var r=U.useContext(A3);r==null&&nh();var n=r[t];return n==null&&nh(),n},wee=function(){var t=U.useContext(RF);return t},Nee=function(){return U.useContext(BF)},C3=function(){return U.useContext($F)},E3=function(){return U.useContext(qF)};function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VF(n.key),n)}}function See(e,t,r){return t&&kee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ee(e,t,r){return t=U1(t),Aee(e,WF()?Reflect.construct(t,r||[],U1(e).constructor):t.apply(e,r))}function Aee(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cee(e)}function Cee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WF=function(){return!!e})()}function U1(e){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U1(e)}function Eee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I4(e,t)}function I4(e,t){return I4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},I4(e,t)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){T3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T3(e,t,r){return t=VF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VF(e){var t=Tee(e,"string");return Cp(t)=="symbol"?t:t+""}function Tee(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Oee(e,t){return Lee(e)||Dee(e,t)||Iee(e,t)||Pee()}function Pee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iee(e,t){if(e){if(typeof e=="string")return fP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fP(e,t)}}function fP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Lee(e){if(Array.isArray(e))return e}function D4(){return D4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D4.apply(this,arguments)}var Fee=function(t,r){var n;return at.isValidElement(t)?n=at.cloneElement(t,r):Tn(t)?n=t(r):n=at.createElement("line",D4({},r,{className:"recharts-reference-line-line"})),n},Mee=function(t,r,n,s,i,o,l,c,u){var f=i.x,d=i.y,m=i.width,p=i.height;if(n){var y=u.y,v=t.y.apply(y,{position:o});if(Sd(u,"discard")&&!t.y.isInRange(v))return null;var g=[{x:f+m,y:v},{x:f,y:v}];return c==="left"?g.reverse():g}if(r){var b=u.x,w=t.x.apply(b,{position:o});if(Sd(u,"discard")&&!t.x.isInRange(w))return null;var j=[{x:w,y:d+p},{x:w,y:d}];return l==="top"?j.reverse():j}if(s){var N=u.segment,S=N.map(function(P){return t.apply(P,{position:o})});return Sd(u,"discard")&&EZ(S,function(P){return!t.isInRange(P)})?null:S}return null};function Ree(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=vee(),f=zF(s),d=HF(i),m=wee();if(!u||!m)return null;of(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=S3({x:f.scale,y:d.scale}),y=Fi(t),v=Fi(r),g=n&&n.length===2,b=Mee(p,y,v,g,m,e.position,f.orientation,d.orientation,e);if(!b)return null;var w=Oee(b,2),j=w[0],N=j.x,S=j.y,P=w[1],A=P.x,T=P.y,I=Sd(e,"hidden")?"url(#".concat(u,")"):void 0,B=dP(dP({clipPath:I},qn(e,!0)),{},{x1:N,y1:S,x2:A,y2:T});return at.createElement(Ts,{className:ua("recharts-reference-line",l)},Fee(o,B),Bo.renderCallByParent(e,iee({x1:N,y1:S,x2:A,y2:T})))}var O3=(function(e){function t(){return jee(this,t),_ee(this,t,arguments)}return Eee(t,e),See(t,[{key:"render",value:function(){return at.createElement(Ree,this.props)}}])})(at.Component);T3(O3,"displayName","ReferenceLine");T3(O3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function L4(){return L4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L4.apply(this,arguments)}function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(n){Hy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KF(n.key),n)}}function qee(e,t,r){return t&&Uee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ee(e,t,r){return t=q1(t),zee(e,GF()?Reflect.construct(t,r||[],q1(e).constructor):t.apply(e,r))}function zee(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hee(e)}function Hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GF=function(){return!!e})()}function q1(e){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q1(e)}function Wee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},F4(e,t)}function Hy(e,t,r){return t=KF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KF(e){var t=Vee(e,"string");return Ep(t)=="symbol"?t:t+""}function Vee(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gee=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=S3({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Sd(t,"discard")&&!o.isInRange(l)?null:l},Wy=(function(e){function t(){return Bee(this,t),$ee(this,t,arguments)}return Wee(t,e),qee(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Fi(s),f=Fi(i);if(of(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=Gee(this.props);if(!d)return null;var m=d.x,p=d.y,y=this.props,v=y.shape,g=y.className,b=Sd(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=pP(pP({clipPath:b},qn(this.props,!0)),{},{cx:m,cy:p});return at.createElement(Ts,{className:ua("recharts-reference-dot",g)},t.renderDot(v,w),Bo.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])})(at.Component);Hy(Wy,"displayName","ReferenceDot");Hy(Wy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Hy(Wy,"renderDot",function(e,t){var r;return at.isValidElement(e)?r=at.cloneElement(e,t):Tn(e)?r=e(t):r=at.createElement(k3,L4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function M4(){return M4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M4.apply(this,arguments)}function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function mP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(r),!0).forEach(function(n){Vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YF(n.key),n)}}function Yee(e,t,r){return t&&Xee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jee(e,t,r){return t=$1(t),Qee(e,XF()?Reflect.construct(t,r||[],$1(e).constructor):t.apply(e,r))}function Qee(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zee(e)}function Zee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XF=function(){return!!e})()}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$1(e)}function ete(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R4(e,t)}function R4(e,t){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},R4(e,t)}function Vy(e,t,r){return t=YF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=tte(e,"string");return Tp(t)=="symbol"?t:t+""}function tte(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rte=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var m=S3({x:f.scale,y:d.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Sd(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:FF(p,y)},Gy=(function(e){function t(){return Kee(this,t),Jee(this,t,arguments)}return ete(t,e),Yee(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;of(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Fi(s),m=Fi(i),p=Fi(o),y=Fi(l),v=this.props.shape;if(!d&&!m&&!p&&!y&&!v)return null;var g=rte(d,m,p,y,this.props);if(!g&&!v)return null;var b=Sd(this.props,"hidden")?"url(#".concat(f,")"):void 0;return at.createElement(Ts,{className:ua("recharts-reference-area",c)},t.renderRect(v,xP(xP({clipPath:b},qn(this.props,!0)),g)),Bo.renderCallByParent(this.props,g))}}])})(at.Component);Vy(Gy,"displayName","ReferenceArea");Vy(Gy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Vy(Gy,"renderRect",function(e,t){var r;return at.isValidElement(e)?r=at.cloneElement(e,t):Tn(e)?r=e(t):r=at.createElement(j3,M4({},t,{className:"recharts-reference-area-rect"})),r});function JF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function nte(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return lee(n,r)}function ate(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function z1(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function ste(e,t){return JF(e,t+1)}function ite(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var y=n?.[c];if(y===void 0)return{v:JF(n,u)};var v=c,g,b=function(){return g===void 0&&(g=r(y,v)),g},w=y.coordinate,j=c===0||z1(e,w,b,f,l);j||(c=0,f=o,u+=1),j&&(f=w+e*(b()/2+s),c+=u)},m;u<=i.length;)if(m=d(),m)return m.v;return[]}function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){ote(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ote(e,t,r){return t=lte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lte(e){var t=cte(e,"string");return Ux(t)=="symbol"?t:t+""}function cte(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ute(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],y,v=function(){return y===void 0&&(y=r(p,m)),y};if(m===o-1){var g=e*(p.coordinate+e*v()/2-c);i[m]=p=Fo(Fo({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else i[m]=p=Fo(Fo({},p),{},{tickCoord:p.coordinate});var b=z1(e,p.tickCoord,v,l,c);b&&(c=p.tickCoord-e*(v()/2+s),i[m]=Fo(Fo({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function dte(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var f=n[l-1],d=r(f,l-1),m=e*(f.coordinate+e*d/2-u);o[l-1]=f=Fo(Fo({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var p=z1(e,f.tickCoord,function(){return d},c,u);p&&(u=f.tickCoord-e*(d/2+s),o[l-1]=Fo(Fo({},f),{},{isShow:!0}))}for(var y=i?l-1:l,v=function(w){var j=o[w],N,S=function(){return N===void 0&&(N=r(j,w)),N};if(w===0){var P=e*(j.coordinate-e*S()/2-c);o[w]=j=Fo(Fo({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[w]=j=Fo(Fo({},j),{},{tickCoord:j.coordinate});var A=z1(e,j.tickCoord,S,c,u);A&&(c=j.tickCoord+e*(S()/2+s),o[w]=Fo(Fo({},j),{},{isShow:!0}))},g=0;g<y;g++)v(g);return o}function P3(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(hr(c)||Vp.isSsr)return ste(s,typeof c=="number"&&hr(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",y=f&&p==="width"?zm(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var S=Tn(u)?u(j.value,N):j.value;return p==="width"?nte(zm(S,{fontSize:t,letterSpacing:r}),y,d):zm(S,{fontSize:t,letterSpacing:r})[p]},g=s.length>=2?Mu(s[1].coordinate-s[0].coordinate):1,b=ate(i,g,p);return c==="equidistantPreserveStart"?ite(g,b,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=dte(g,b,v,s,o,c==="preserveStartEnd"):m=ute(g,b,v,s,o),m.filter(function(w){return w.isShow}))}var fte=["viewBox"],hte=["viewBox"],pte=["ticks"];function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(this,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){I3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WN(e,t){if(e==null)return{};var r=mte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZF(n.key),n)}}function gte(e,t,r){return t&&yP(e.prototype,t),r&&yP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vte(e,t,r){return t=H1(t),yte(e,QF()?Reflect.construct(t,r||[],H1(e).constructor):t.apply(e,r))}function yte(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bte(e)}function bte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QF=function(){return!!e})()}function H1(e){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H1(e)}function wte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},B4(e,t)}function I3(e,t,r){return t=ZF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e){var t=Nte(e,"string");return Op(t)=="symbol"?t:t+""}function Nte(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yp=(function(e){function t(r){var n;return xte(this,t),n=vte(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return wte(t,e),gte(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=WN(n,fte),l=this.props,c=l.viewBox,u=WN(l,hte);return!np(i,c)||!np(o,u)||!np(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,f=s.tickSize,d=s.mirror,m=s.tickMargin,p,y,v,g,b,w,j=d?-1:1,N=n.tickSize||f,S=hr(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=y=n.coordinate,g=o+ +!d*c,v=g-j*N,w=v-j*m,b=S;break;case"left":v=g=n.coordinate,y=i+ +!d*l,p=y-j*N,b=p-j*m,w=S;break;case"right":v=g=n.coordinate,y=i+ +d*l,p=y+j*N,b=p+j*m,w=S;break;default:p=y=n.coordinate,g=o+ +d*c,v=g+j*N,w=v+j*m,b=S;break}return{line:{x1:p,y1:v,x2:y,y2:g},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=pl(pl(pl({},qn(this.props,!1)),qn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);d=pl(pl({},d),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=pl(pl({},d),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+l})}return at.createElement("line",ep({},d,{className:ua("recharts-cartesian-axis-line",iu(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,m=l.unit,p=P3(pl(pl({},this.props),{},{ticks:n}),s,i),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=qn(this.props,!1),b=qn(f,!1),w=pl(pl({},g),{},{fill:"none"},qn(c,!1)),j=p.map(function(N,S){var P=o.getTickLineCoord(N),A=P.line,T=P.tick,I=pl(pl(pl(pl({textAnchor:y,verticalAnchor:v},g),{},{stroke:"none",fill:u},b),T),{},{index:S,payload:N,visibleTicksCount:p.length,tickFormatter:d});return at.createElement(Ts,ep({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Zv(o.props,N,S)),c&&at.createElement("line",ep({},w,A,{className:ua("recharts-cartesian-axis-tick-line",iu(c,"className"))})),f&&t.renderTickItem(f,I,"".concat(Tn(d)?d(N.value,S):N.value).concat(m||"")))});return at.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var d=this.props,m=d.ticks,p=WN(d,pte),y=m;return Tn(c)&&(y=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:at.createElement(Ts,{className:ua("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Bo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return at.isValidElement(n)?o=at.cloneElement(n,s):Tn(n)?o=n(s):o=at.createElement(u1,ep({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(U.Component);I3(Yp,"displayName","CartesianAxis");I3(Yp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jte=["x1","y1","x2","y2","key"],kte=["offset"];function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){Ste(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ste(e,t,r){return t=_te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _te(e){var t=Ate(e,"string");return ah(t)=="symbol"?t:t+""}function Ate(e,t){if(ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U0.apply(this,arguments)}function wP(e,t){if(e==null)return{};var r=Cte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ete=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return at.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function e7(e,t){var r;if(at.isValidElement(e))r=at.cloneElement(e,t);else if(Tn(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=wP(t,jte),u=qn(c,!1);u.offset;var f=wP(u,kte);r=at.createElement("line",U0({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Tte(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Uo(Uo({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return e7(s,u)});return at.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ote(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Uo(Uo({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return e7(s,u)});return at.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Pte(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==f[0]&&f.unshift(0);var d=f.map(function(m,p){var y=!f[p+1],v=y?s+o-m:f[p+1]-m;if(v<=0)return null;var g=p%t.length;return at.createElement("rect",{key:"react-".concat(p),y:m,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return at.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Ite(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==f[0]&&f.unshift(0);var d=f.map(function(m,p){var y=!f[p+1],v=y?i+l-m:f[p+1]-m;if(v<=0)return null;var g=p%n.length;return at.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:v,height:c,stroke:"none",fill:n[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return at.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Dte=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return pF(P3(Uo(Uo(Uo({},Yp.defaultProps),n),{},{ticks:ef(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Lte=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return pF(P3(Uo(Uo(Uo({},Yp.defaultProps),n),{},{ticks:ef(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},zh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function t7(e){var t,r,n,s,i,o,l=C3(),c=E3(),u=Nee(),f=Uo(Uo({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:zh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:zh.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:zh.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:zh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:zh.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:zh.verticalFill,x:hr(e.x)?e.x:u.left,y:hr(e.y)?e.y:u.top,width:hr(e.width)?e.width:u.width,height:hr(e.height)?e.height:u.height}),d=f.x,m=f.y,p=f.width,y=f.height,v=f.syncWithTicks,g=f.horizontalValues,b=f.verticalValues,w=yee(),j=bee();if(!hr(p)||p<=0||!hr(y)||y<=0||!hr(d)||d!==+d||!hr(m)||m!==+m)return null;var N=f.verticalCoordinatesGenerator||Dte,S=f.horizontalCoordinatesGenerator||Lte,P=f.horizontalPoints,A=f.verticalPoints;if((!P||!P.length)&&Tn(S)){var T=g&&g.length,I=S({yAxis:j?Uo(Uo({},j),{},{ticks:T?g:j.ticks}):void 0,width:l,height:c,offset:u},T?!0:v);of(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ah(I),"]")),Array.isArray(I)&&(P=I)}if((!A||!A.length)&&Tn(N)){var B=b&&b.length,C=N({xAxis:w?Uo(Uo({},w),{},{ticks:B?b:w.ticks}):void 0,width:l,height:c,offset:u},B?!0:v);of(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ah(C),"]")),Array.isArray(C)&&(A=C)}return at.createElement("g",{className:"recharts-cartesian-grid"},at.createElement(Ete,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),at.createElement(Tte,U0({},f,{offset:u,horizontalPoints:P,xAxis:w,yAxis:j})),at.createElement(Ote,U0({},f,{offset:u,verticalPoints:A,xAxis:w,yAxis:j})),at.createElement(Pte,U0({},f,{horizontalPoints:P})),at.createElement(Ite,U0({},f,{verticalPoints:A})))}t7.displayName="CartesianGrid";var Fte=["layout","type","stroke","connectNulls","isRange","ref"],Mte=["key"],r7;function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function n7(e,t){if(e==null)return{};var r=Rte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(this,arguments)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){xd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s7(n.key),n)}}function Ute(e,t,r){return t&&jP(e.prototype,t),r&&jP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qte(e,t,r){return t=W1(t),$te(e,a7()?Reflect.construct(t,r||[],W1(e).constructor):t.apply(e,r))}function $te(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zte(e)}function zte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a7=function(){return!!e})()}function W1(e){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W1(e)}function Hte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U4(e,t)}function U4(e,t){return U4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},U4(e,t)}function xd(e,t,r){return t=s7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s7(e){var t=Wte(e,"string");return Pp(t)=="symbol"?t:t+""}function Wte(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var g0=(function(e){function t(){var r;Bte(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=qte(this,t,[].concat(s)),xd(r,"state",{isAnimationFinished:!0}),xd(r,"id",og("recharts-area-")),xd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Tn(o)&&o()}),xd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Tn(o)&&o()}),r}return Hte(t,e),Ute(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,d=c.dataKey,m=qn(this.props,!1),p=qn(u,!0),y=f.map(function(g,b){var w=Hf(Hf(Hf({key:"dot-".concat(b),r:3},m),p),{},{index:b,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:f});return t.renderDotItem(u,w)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return at.createElement(Ts,q0({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=n*Math.abs(c-u),d=Kf(o.map(function(m){return m.y||0}));return hr(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Kf(i.map(function(m){return m.y||0})),d)),hr(d)?at.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=n*Math.abs(c-u),d=Kf(o.map(function(m){return m.x||0}));return hr(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Kf(i.map(function(m){return m.x||0})),d)),hr(d)?at.createElement("rect",{x:0,y:c<u?c:c-f,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,d=l.connectNulls,m=l.isRange;l.ref;var p=n7(l,Fte);return at.createElement(Ts,{clipPath:i?"url(#clipPath-".concat(o,")"):null},at.createElement(Vm,q0({},qn(p,!0),{points:n,connectNulls:d,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&at.createElement(Vm,q0({},qn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&m&&at.createElement(Vm,q0({},qn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,m=o.animationEasing,p=o.animationId,y=this.state,v=y.prevPoints,g=y.prevBaseLine;return at.createElement(xf,{begin:f,duration:d,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(v){var j=v.length/l.length,N=l.map(function(T,I){var B=Math.floor(I*j);if(v[B]){var C=v[B],E=ru(C.x,T.x),M=ru(C.y,T.y);return Hf(Hf({},T),{},{x:E(w),y:M(w)})}return T}),S;if(hr(c)&&typeof c=="number"){var P=ru(g,c);S=P(w)}else if(Jn(c)||Hp(c)){var A=ru(g,0);S=A(w)}else S=c.map(function(T,I){var B=Math.floor(I*j);if(g[B]){var C=g[B],E=ru(C.x,T.x),M=ru(C.y,T.y);return Hf(Hf({},T),{},{x:E(w),y:M(w)})}return T});return i.renderAreaStatically(N,S,n,s)}return at.createElement(Ts,null,at.createElement("defs",null,at.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(w))),at.createElement(Ts,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!f&&m>0||!yx(f,o)||!yx(d,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,f=s.left,d=s.xAxis,m=s.yAxis,p=s.width,y=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,j=ua("recharts-area",c),N=d&&d.allowDataOverflow,S=m&&m.allowDataOverflow,P=N||S,A=Jn(g)?this.id:g,T=(n=qn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},I=T.r,B=I===void 0?3:I,C=T.strokeWidth,E=C===void 0?2:C,M=cq(o)?o:{},q=M.clipDot,G=q===void 0?!0:q,Z=B*2+E;return at.createElement(Ts,{className:j},N||S?at.createElement("defs",null,at.createElement("clipPath",{id:"clipPath-".concat(A)},at.createElement("rect",{x:N?f:f-p/2,y:S?u:u-y/2,width:N?p:p*2,height:S?y:y*2})),!G&&at.createElement("clipPath",{id:"clipPath-dots-".concat(A)},at.createElement("rect",{x:f-Z/2,y:u-Z/2,width:p+Z,height:y+Z}))):null,w?null:this.renderArea(P,A),(o||w)&&this.renderDots(P,G,A),(!v||b)&&r0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(U.PureComponent);r7=g0;xd(g0,"displayName","Area");xd(g0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Vp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});xd(g0,"getBaseValue",function(e,t,r,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(hr(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});xd(g0,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,p=t.layout,y=u&&u.length,v=r7.getBaseValue(t,r,n,s),g=p==="horizontal",b=!1,w=d.map(function(N,S){var P;y?P=u[f+S]:(P=wc(N,c),Array.isArray(P)?b=!0:P=[v,P]);var A=P[1]==null||y&&wc(N,c)==null;return g?{x:qT({axis:n,ticks:i,bandSize:l,entry:N,index:S}),y:A?null:s.scale(P[1]),value:P,payload:N}:{x:A?null:n.scale(P[1]),y:qT({axis:s,ticks:o,bandSize:l,entry:N,index:S}),value:P,payload:N}}),j;return y||b?j=w.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:S!=null&&N.y!=null?s.scale(S):null}:{x:S!=null?n.scale(S):null,y:N.y}}):j=g?s.scale(v):n.scale(v),Hf({points:w,baseLine:j,layout:p,isRange:b},m)});xd(g0,"renderDotItem",function(e,t){var r;if(at.isValidElement(e))r=at.cloneElement(e,t);else if(Tn(e))r=e(t);else{var n=ua("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=n7(t,Mte);r=at.createElement(k3,q0({},i,{key:s,className:n}))}return r});function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function Vte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l7(n.key),n)}}function Kte(e,t,r){return t&&Gte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xte(e,t,r){return t=V1(t),Yte(e,i7()?Reflect.construct(t,r||[],V1(e).constructor):t.apply(e,r))}function Yte(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jte(e)}function Jte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i7=function(){return!!e})()}function V1(e){return V1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V1(e)}function Qte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},q4(e,t)}function o7(e,t,r){return t=l7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=Zte(e,"string");return Ip(t)=="symbol"?t:t+""}function Zte(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $4(){return $4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$4.apply(this,arguments)}function ere(e){var t=e.xAxisId,r=C3(),n=E3(),s=zF(t);return s==null?null:at.createElement(Yp,$4({},s,{className:ua("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ef(o,!0)}}))}var Ky=(function(e){function t(){return Vte(this,t),Xte(this,t,arguments)}return Qte(t,e),Kte(t,[{key:"render",value:function(){return at.createElement(ere,this.props)}}])})(at.Component);o7(Ky,"displayName","XAxis");o7(Ky,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function tre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d7(n.key),n)}}function nre(e,t,r){return t&&rre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function are(e,t,r){return t=G1(t),sre(e,c7()?Reflect.construct(t,r||[],G1(e).constructor):t.apply(e,r))}function sre(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ire(e)}function ire(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c7=function(){return!!e})()}function G1(e){return G1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G1(e)}function ore(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z4(e,t)}function z4(e,t){return z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},z4(e,t)}function u7(e,t,r){return t=d7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7(e){var t=lre(e,"string");return Dp(t)=="symbol"?t:t+""}function lre(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function H4(){return H4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H4.apply(this,arguments)}var cre=function(t){var r=t.yAxisId,n=C3(),s=E3(),i=HF(r);return i==null?null:at.createElement(Yp,H4({},i,{className:ua("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ef(l,!0)}}))},Xy=(function(e){function t(){return tre(this,t),are(this,t,arguments)}return ore(t,e),nre(t,[{key:"render",value:function(){return at.createElement(cre,this.props)}}])})(at.Component);u7(Xy,"displayName","YAxis");u7(Xy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kP(e){return hre(e)||fre(e)||dre(e)||ure()}function ure(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dre(e,t){if(e){if(typeof e=="string")return W4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W4(e,t)}}function fre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hre(e){if(Array.isArray(e))return W4(e)}function W4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V4=function(t,r,n,s,i){var o=qu(t,O3),l=qu(t,Wy),c=[].concat(kP(o),kP(l)),u=qu(t,Gy),f="".concat(s,"Id"),d=s[0],m=r;if(c.length&&(m=c.reduce(function(v,g){if(g.props[f]===n&&Sd(g.props,"extendDomain")&&hr(g.props[d])){var b=g.props[d];return[Math.min(v[0],b),Math.max(v[1],b)]}return v},m)),u.length){var p="".concat(d,"1"),y="".concat(d,"2");m=u.reduce(function(v,g){if(g.props[f]===n&&Sd(g.props,"extendDomain")&&hr(g.props[p])&&hr(g.props[y])){var b=g.props[p],w=g.props[y];return[Math.min(v[0],b,w),Math.max(v[1],b,w)]}return v},m)}return i&&i.length&&(m=i.reduce(function(v,g){return hr(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},m)),m},VN={exports:{}},SP;function pre(){return SP||(SP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new s(f,d||c,m),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var m=0,p=d.length,y=new Array(p);m<p;m++)y[m]=d[m].fn;return y},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,m,p,y){var v=r?r+u:u;if(!this._events[v])return!1;var g=this._events[v],b=arguments.length,w,j;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,d),!0;case 4:return g.fn.call(g.context,f,d,m),!0;case 5:return g.fn.call(g.context,f,d,m,p),!0;case 6:return g.fn.call(g.context,f,d,m,p,y),!0}for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];g.fn.apply(g.context,w)}else{var N=g.length,S;for(j=0;j<N;j++)switch(g[j].once&&this.removeListener(u,g[j].fn,void 0,!0),b){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,f);break;case 3:g[j].fn.call(g[j].context,f,d);break;case 4:g[j].fn.call(g[j].context,f,d,m);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];g[j].fn.apply(g[j].context,w)}}return!0},l.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,m){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===f&&(!m||y.once)&&(!d||y.context===d)&&o(this,p);else{for(var v=0,g=[],b=y.length;v<b;v++)(y[v].fn!==f||m&&!y[v].once||d&&y[v].context!==d)&&g.push(y[v]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(VN)),VN.exports}var mre=pre();const xre=Ea(mre);var GN=new xre,KN="recharts.syncMouseEvents";function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function gre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f7(n.key),n)}}function yre(e,t,r){return t&&vre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XN(e,t,r){return t=f7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=bre(e,"string");return qx(t)=="symbol"?t:t+""}function bre(e,t){if(qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wre=(function(){function e(){gre(this,e),XN(this,"activeIndex",0),XN(this,"coordinateList",[]),XN(this,"layout","horizontal")}return yre(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:m})}}}])})();function Nre(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&hr(n)&&hr(s))return!0}return!1}function jre(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function h7(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=go(t,r,n,s),l=go(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function kre(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,m=go(l,c,u,d),p=go(l,c,f,d);n=m.x,s=m.y,i=p.x,o=p.y}else return h7(t);return[{x:n,y:s},{x:i,y:o}]}function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){Sre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sre(e,t,r){return t=_re(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _re(e){var t=Are(e,"string");return $x(t)=="symbol"?t:t+""}function Are(e,t){if($x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cre(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,m=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var y,v=Vm;if(m==="ScatterChart")y=o,v=EQ;else if(m==="BarChart")y=jre(d,o,c,f),v=j3;else if(d==="radial"){var g=h7(o),b=g.cx,w=g.cy,j=g.radius,N=g.startAngle,S=g.endAngle;y={cx:b,cy:w,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},v=yF}else y={points:kre(d,o,c)},v=Vm;var P=lv(lv(lv(lv({stroke:"#ccc",pointerEvents:"none"},c),y),qn(p,!1)),{},{payload:l,payloadIndex:u,className:ua("recharts-tooltip-cursor",p.className)});return U.isValidElement(p)?U.cloneElement(p,P):U.createElement(v,P)}var Ere=["item"],Tre=["children","className","width","height","style","compact","title","desc"];function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(this,arguments)}function AP(e,t){return Ire(e)||Pre(e,t)||m7(e,t)||Ore()}function Ore(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Ire(e){if(Array.isArray(e))return e}function CP(e,t){if(e==null)return{};var r=Dre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x7(n.key),n)}}function Mre(e,t,r){return t&&Fre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rre(e,t,r){return t=K1(t),Bre(e,p7()?Reflect.construct(t,r||[],K1(e).constructor):t.apply(e,r))}function Bre(e,t){if(t&&(Lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ure(e)}function Ure(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p7=function(){return!!e})()}function K1(e){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K1(e)}function qre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G4(e,t)}function G4(e,t){return G4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},G4(e,t)}function Fp(e){return Hre(e)||zre(e)||m7(e)||$re()}function $re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m7(e,t){if(e){if(typeof e=="string")return K4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K4(e,t)}}function zre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hre(e){if(Array.isArray(e))return K4(e)}function K4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(n){nn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nn(e,t,r){return t=x7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=Wre(e,"string");return Lp(t)=="symbol"?t:t+""}function Wre(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vre={xAxis:["bottom","top"],yAxis:["left","right"]},Gre={width:"100%",height:"100%"},g7={x:0,y:0};function cv(e){return e}var Kre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Xre=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Rt(Rt(Rt({},s),go(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return Rt(Rt(Rt({},s),go(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return g7},Yy=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Fp(l),Fp(u)):l},[]);return o.length>0?o:t&&t.length&&hr(s)&&hr(i)?t.slice(s,i+1):[]};function v7(e){return e==="number"?[0,"auto"]:void 0}var X4=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Yy(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?l:d;m=Jv(p,o.dataKey,s)}else m=d&&d[n]||l[n];return m?[].concat(Fp(c),[xF(u,m)]):c},[])},TP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Kre(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=lX(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,m=X4(t,r,f,d),p=Xre(n,l,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:m,activeCoordinate:p}}return null},Yre=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=t.stackOffset,p=hF(f,i);return n.reduce(function(y,v){var g,b=v.type.defaultProps!==void 0?Rt(Rt({},v.type.defaultProps),v.props):v.props,w=b.type,j=b.dataKey,N=b.allowDataOverflow,S=b.allowDuplicatedCategory,P=b.scale,A=b.ticks,T=b.includeHidden,I=b[o];if(y[I])return y;var B=Yy(t.data,{graphicalItems:s.filter(function(O){var z,H=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o];return H===I}),dataStartIndex:c,dataEndIndex:u}),C=B.length,E,M,q;Nre(b.domain,N,w)&&(E=p4(b.domain,null,N),p&&(w==="number"||P!=="auto")&&(q=Wm(B,j,"category")));var G=v7(w);if(!E||E.length===0){var Z,te=(Z=b.domain)!==null&&Z!==void 0?Z:G;if(j){if(E=Wm(B,j,w),w==="category"&&p){var ae=eq(E);S&&ae?(M=E,E=L1(0,C)):S||(E=WT(te,E,v).reduce(function(O,z){return O.indexOf(z)>=0?O:[].concat(Fp(O),[z])},[]))}else if(w==="category")S?E=E.filter(function(O){return O!==""&&!Jn(O)}):E=WT(te,E,v).reduce(function(O,z){return O.indexOf(z)>=0||z===""||Jn(z)?O:[].concat(Fp(O),[z])},[]);else if(w==="number"){var Q=hX(B,s.filter(function(O){var z,H,R=o in O.props?O.props[o]:(z=O.type.defaultProps)===null||z===void 0?void 0:z[o],K="hide"in O.props?O.props.hide:(H=O.type.defaultProps)===null||H===void 0?void 0:H.hide;return R===I&&(T||!K)}),j,i,f);Q&&(E=Q)}p&&(w==="number"||P!=="auto")&&(q=Wm(B,j,"category"))}else p?E=L1(0,C):l&&l[I]&&l[I].hasStack&&w==="number"?E=m==="expand"?[0,1]:mF(l[I].stackGroups,c,u):E=fF(B,s.filter(function(O){var z=o in O.props?O.props[o]:O.type.defaultProps[o],H="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return z===I&&(T||!H)}),w,f,!0);if(w==="number")E=V4(d,E,I,i,A),te&&(E=p4(te,E,N));else if(w==="category"&&te){var ee=te,W=E.every(function(O){return ee.indexOf(O)>=0});W&&(E=ee)}}return Rt(Rt({},y),{},nn({},I,Rt(Rt({},b),{},{axisType:i,domain:E,categoricalDomain:q,duplicateDomain:M,originalDomain:(g=b.domain)!==null&&g!==void 0?g:G,isCategorical:p,layout:f})))},{})},Jre=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=Yy(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=m.length,y=hF(f,i),v=-1;return n.reduce(function(g,b){var w=b.type.defaultProps!==void 0?Rt(Rt({},b.type.defaultProps),b.props):b.props,j=w[o],N=v7("number");if(!g[j]){v++;var S;return y?S=L1(0,p):l&&l[j]&&l[j].hasStack?(S=mF(l[j].stackGroups,c,u),S=V4(d,S,j,i)):(S=p4(N,fF(m,n.filter(function(P){var A,T,I=o in P.props?P.props[o]:(A=P.type.defaultProps)===null||A===void 0?void 0:A[o],B="hide"in P.props?P.props.hide:(T=P.type.defaultProps)===null||T===void 0?void 0:T.hide;return I===j&&!B}),"number",f),s.defaultProps.allowDataOverflow),S=V4(d,S,j,i)),Rt(Rt({},g),{},nn({},j,Rt(Rt({axisType:i},s.defaultProps),{},{hide:!0,orientation:iu(Vre,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:N,isCategorical:y,layout:f})))}return g},{})},Qre=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(s,"Id"),m=qu(f,i),p={};return m&&m.length?p=Yre(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=Jre(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},Zre=function(t){var r=Gf(t),n=ef(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Yk(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:S1(r,n)}},OP=function(t){var r=t.children,n=t.defaultShowTooltip,s=hc(r,_p),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},ene=function(t){return!t||!t.length?!1:t.some(function(r){var n=sf(r&&r.type);return n&&n.indexOf("Bar")>=0})},PP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tne=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,m=n.margin||{},p=hc(d,_p),y=hc(d,ap),v=Object.keys(c).reduce(function(S,P){var A=c[P],T=A.orientation;return!A.mirror&&!A.hide?Rt(Rt({},S),{},nn({},T,S[T]+A.width)):S},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(S,P){var A=o[P],T=A.orientation;return!A.mirror&&!A.hide?Rt(Rt({},S),{},nn({},T,iu(S,"".concat(T))+A.height)):S},{top:m.top||0,bottom:m.bottom||0}),b=Rt(Rt({},g),v),w=b.bottom;p&&(b.bottom+=p.props.height||_p.defaultProps.height),y&&r&&(b=dX(b,s,n,r));var j=u-b.left-b.right,N=f-b.top-b.bottom;return Rt(Rt({brushBottom:w},b),{},{width:Math.max(j,0),height:Math.max(N,0)})},rne=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},nne=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,m=function(g,b){var w=b.graphicalItems,j=b.stackGroups,N=b.offset,S=b.updateId,P=b.dataStartIndex,A=b.dataEndIndex,T=g.barSize,I=g.layout,B=g.barGap,C=g.barCategoryGap,E=g.maxBarSize,M=PP(I),q=M.numericAxisName,G=M.cateAxisName,Z=ene(w),te=[];return w.forEach(function(ae,Q){var ee=Yy(g.data,{graphicalItems:[ae],dataStartIndex:P,dataEndIndex:A}),W=ae.type.defaultProps!==void 0?Rt(Rt({},ae.type.defaultProps),ae.props):ae.props,O=W.dataKey,z=W.maxBarSize,H=W["".concat(q,"Id")],R=W["".concat(G,"Id")],K={},le=c.reduce(function(pe,ue){var Pe=b["".concat(ue.axisType,"Map")],Ne=W["".concat(ue.axisType,"Id")];Pe&&Pe[Ne]||ue.axisType==="zAxis"||nh();var Re=Pe[Ne];return Rt(Rt({},pe),{},nn(nn({},ue.axisType,Re),"".concat(ue.axisType,"Ticks"),ef(Re)))},K),he=le[G],ie=le["".concat(G,"Ticks")],ce=j&&j[H]&&j[H].hasStack&&SX(ae,j[H].stackGroups),De=sf(ae.type).indexOf("Bar")>=0,ne=S1(he,ie),Ue=[],Ce=Z&&cX({barSize:T,stackGroups:j,totalSize:rne(le,G)});if(De){var de,Y,ve=Jn(z)?E:z,ye=(de=(Y=S1(he,ie,!0))!==null&&Y!==void 0?Y:ve)!==null&&de!==void 0?de:0;Ue=uX({barGap:B,barCategoryGap:C,bandSize:ye!==ne?ye:ne,sizeList:Ce[R],maxBarSize:ve}),ye!==ne&&(Ue=Ue.map(function(pe){return Rt(Rt({},pe),{},{position:Rt(Rt({},pe.position),{},{offset:pe.position.offset-ye/2})})}))}var Ae=ae&&ae.type&&ae.type.getComposedData;Ae&&te.push({props:Rt(Rt({},Ae(Rt(Rt({},le),{},{displayedData:ee,props:g,dataKey:O,item:ae,bandSize:ne,barPosition:Ue,offset:N,stackedData:ce,layout:I,dataStartIndex:P,dataEndIndex:A}))),{},nn(nn(nn({key:ae.key||"item-".concat(Q)},q,le[q]),G,le[G]),"animationId",S)),childIndex:fq(ae,g.children),item:ae})}),te},p=function(g,b){var w=g.props,j=g.dataStartIndex,N=g.dataEndIndex,S=g.updateId;if(!sA({props:w}))return null;var P=w.children,A=w.layout,T=w.stackOffset,I=w.data,B=w.reverseStackOrder,C=PP(A),E=C.numericAxisName,M=C.cateAxisName,q=qu(P,n),G=NX(I,q,"".concat(E,"Id"),"".concat(M,"Id"),T,B),Z=c.reduce(function(W,O){var z="".concat(O.axisType,"Map");return Rt(Rt({},W),{},nn({},z,Qre(w,Rt(Rt({},O),{},{graphicalItems:q,stackGroups:O.axisType===E&&G,dataStartIndex:j,dataEndIndex:N}))))},{}),te=tne(Rt(Rt({},Z),{},{props:w,graphicalItems:q}),b?.legendBBox);Object.keys(Z).forEach(function(W){Z[W]=f(w,Z[W],te,W.replace("Map",""),r)});var ae=Z["".concat(M,"Map")],Q=Zre(ae),ee=m(w,Rt(Rt({},Z),{},{dataStartIndex:j,dataEndIndex:N,updateId:S,graphicalItems:q,stackGroups:G,offset:te}));return Rt(Rt({formattedGraphicalItems:ee,graphicalItems:q,offset:te,stackGroups:G},Q),Z)},y=(function(v){function g(b){var w,j,N;return Lre(this,g),N=Rre(this,g,[b]),nn(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(N,"accessibilityManager",new wre),nn(N,"handleLegendBBoxUpdate",function(S){if(S){var P=N.state,A=P.dataStartIndex,T=P.dataEndIndex,I=P.updateId;N.setState(Rt({legendBBox:S},p({props:N.props,dataStartIndex:A,dataEndIndex:T,updateId:I},Rt(Rt({},N.state),{},{legendBBox:S}))))}}),nn(N,"handleReceiveSyncEvent",function(S,P,A){if(N.props.syncId===S){if(A===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(P)}}),nn(N,"handleBrushChange",function(S){var P=S.startIndex,A=S.endIndex;if(P!==N.state.dataStartIndex||A!==N.state.dataEndIndex){var T=N.state.updateId;N.setState(function(){return Rt({dataStartIndex:P,dataEndIndex:A},p({props:N.props,dataStartIndex:P,dataEndIndex:A,updateId:T},N.state))}),N.triggerSyncEvent({dataStartIndex:P,dataEndIndex:A})}}),nn(N,"handleMouseEnter",function(S){var P=N.getMouseInfo(S);if(P){var A=Rt(Rt({},P),{},{isTooltipActive:!0});N.setState(A),N.triggerSyncEvent(A);var T=N.props.onMouseEnter;Tn(T)&&T(A,S)}}),nn(N,"triggeredAfterMouseMove",function(S){var P=N.getMouseInfo(S),A=P?Rt(Rt({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(A),N.triggerSyncEvent(A);var T=N.props.onMouseMove;Tn(T)&&T(A,S)}),nn(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),nn(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),nn(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),nn(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};N.setState(P),N.triggerSyncEvent(P);var A=N.props.onMouseLeave;Tn(A)&&A(P,S)}),nn(N,"handleOuterEvent",function(S){var P=dq(S),A=iu(N.props,"".concat(P));if(P&&Tn(A)){var T,I;/.*touch.*/i.test(P)?I=N.getMouseInfo(S.changedTouches[0]):I=N.getMouseInfo(S),A((T=I)!==null&&T!==void 0?T:{},S)}}),nn(N,"handleClick",function(S){var P=N.getMouseInfo(S);if(P){var A=Rt(Rt({},P),{},{isTooltipActive:!0});N.setState(A),N.triggerSyncEvent(A);var T=N.props.onClick;Tn(T)&&T(A,S)}}),nn(N,"handleMouseDown",function(S){var P=N.props.onMouseDown;if(Tn(P)){var A=N.getMouseInfo(S);P(A,S)}}),nn(N,"handleMouseUp",function(S){var P=N.props.onMouseUp;if(Tn(P)){var A=N.getMouseInfo(S);P(A,S)}}),nn(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),nn(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),nn(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),nn(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&GN.emit(KN,N.props.syncId,S,N.eventEmitterSymbol)}),nn(N,"applySyncEvent",function(S){var P=N.props,A=P.layout,T=P.syncMethod,I=N.state.updateId,B=S.dataStartIndex,C=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(Rt({dataStartIndex:B,dataEndIndex:C},p({props:N.props,dataStartIndex:B,dataEndIndex:C,updateId:I},N.state)));else if(S.activeTooltipIndex!==void 0){var E=S.chartX,M=S.chartY,q=S.activeTooltipIndex,G=N.state,Z=G.offset,te=G.tooltipTicks;if(!Z)return;if(typeof T=="function")q=T(te,S);else if(T==="value"){q=-1;for(var ae=0;ae<te.length;ae++)if(te[ae].value===S.activeLabel){q=ae;break}}var Q=Rt(Rt({},Z),{},{x:Z.left,y:Z.top}),ee=Math.min(E,Q.x+Q.width),W=Math.min(M,Q.y+Q.height),O=te[q]&&te[q].value,z=X4(N.state,N.props.data,q),H=te[q]?{x:A==="horizontal"?te[q].coordinate:ee,y:A==="horizontal"?W:te[q].coordinate}:g7;N.setState(Rt(Rt({},S),{},{activeLabel:O,activeCoordinate:H,activePayload:z,activeTooltipIndex:q}))}else N.setState(S)}),nn(N,"renderCursor",function(S){var P,A=N.state,T=A.isTooltipActive,I=A.activeCoordinate,B=A.activePayload,C=A.offset,E=A.activeTooltipIndex,M=A.tooltipAxisBandSize,q=N.getTooltipEventType(),G=(P=S.props.active)!==null&&P!==void 0?P:T,Z=N.props.layout,te=S.key||"_recharts-cursor";return at.createElement(Cre,{key:te,activeCoordinate:I,activePayload:B,activeTooltipIndex:E,chartName:r,element:S,isActive:G,layout:Z,offset:C,tooltipAxisBandSize:M,tooltipEventType:q})}),nn(N,"renderPolarAxis",function(S,P,A){var T=iu(S,"type.axisType"),I=iu(N.state,"".concat(T,"Map")),B=S.type.defaultProps,C=B!==void 0?Rt(Rt({},B),S.props):S.props,E=I&&I[C["".concat(T,"Id")]];return U.cloneElement(S,Rt(Rt({},E),{},{className:ua(T,E.className),key:S.key||"".concat(P,"-").concat(A),ticks:ef(E,!0)}))}),nn(N,"renderPolarGrid",function(S){var P=S.props,A=P.radialLines,T=P.polarAngles,I=P.polarRadius,B=N.state,C=B.radiusAxisMap,E=B.angleAxisMap,M=Gf(C),q=Gf(E),G=q.cx,Z=q.cy,te=q.innerRadius,ae=q.outerRadius;return U.cloneElement(S,{polarAngles:Array.isArray(T)?T:ef(q,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(I)?I:ef(M,!0).map(function(Q){return Q.coordinate}),cx:G,cy:Z,innerRadius:te,outerRadius:ae,key:S.key||"polar-grid",radialLines:A})}),nn(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,P=N.props,A=P.children,T=P.width,I=P.height,B=N.props.margin||{},C=T-(B.left||0)-(B.right||0),E=uF({children:A,formattedGraphicalItems:S,legendWidth:C,legendContent:u});if(!E)return null;var M=E.item,q=CP(E,Ere);return U.cloneElement(M,Rt(Rt({},q),{},{chartWidth:T,chartHeight:I,margin:B,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),nn(N,"renderTooltip",function(){var S,P=N.props,A=P.children,T=P.accessibilityLayer,I=hc(A,hd);if(!I)return null;var B=N.state,C=B.isTooltipActive,E=B.activeCoordinate,M=B.activePayload,q=B.activeLabel,G=B.offset,Z=(S=I.props.active)!==null&&S!==void 0?S:C;return U.cloneElement(I,{viewBox:Rt(Rt({},G),{},{x:G.left,y:G.top}),active:Z,label:q,payload:Z?M:[],coordinate:E,accessibilityLayer:T})}),nn(N,"renderBrush",function(S){var P=N.props,A=P.margin,T=P.data,I=N.state,B=I.offset,C=I.dataStartIndex,E=I.dataEndIndex,M=I.updateId;return U.cloneElement(S,{key:S.key||"_recharts-brush",onChange:av(N.handleBrushChange,S.props.onChange),data:T,x:hr(S.props.x)?S.props.x:B.left,y:hr(S.props.y)?S.props.y:B.top+B.height+B.brushBottom-(A.bottom||0),width:hr(S.props.width)?S.props.width:B.width,startIndex:C,endIndex:E,updateId:"brush-".concat(M)})}),nn(N,"renderReferenceElement",function(S,P,A){if(!S)return null;var T=N,I=T.clipPathId,B=N.state,C=B.xAxisMap,E=B.yAxisMap,M=B.offset,q=S.type.defaultProps||{},G=S.props,Z=G.xAxisId,te=Z===void 0?q.xAxisId:Z,ae=G.yAxisId,Q=ae===void 0?q.yAxisId:ae;return U.cloneElement(S,{key:S.key||"".concat(P,"-").concat(A),xAxis:C[te],yAxis:E[Q],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:I})}),nn(N,"renderActivePoints",function(S){var P=S.item,A=S.activePoint,T=S.basePoint,I=S.childIndex,B=S.isRange,C=[],E=P.props.key,M=P.item.type.defaultProps!==void 0?Rt(Rt({},P.item.type.defaultProps),P.item.props):P.item.props,q=M.activeDot,G=M.dataKey,Z=Rt(Rt({index:I,dataKey:G,cx:A.x,cy:A.y,r:4,fill:N3(P.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},qn(q,!1)),Qv(q));return C.push(g.renderActiveDot(q,Z,"".concat(E,"-activePoint-").concat(I))),T?C.push(g.renderActiveDot(q,Rt(Rt({},Z),{},{cx:T.x,cy:T.y}),"".concat(E,"-basePoint-").concat(I))):B&&C.push(null),C}),nn(N,"renderGraphicChild",function(S,P,A){var T=N.filterFormatItem(S,P,A);if(!T)return null;var I=N.getTooltipEventType(),B=N.state,C=B.isTooltipActive,E=B.tooltipAxis,M=B.activeTooltipIndex,q=B.activeLabel,G=N.props.children,Z=hc(G,hd),te=T.props,ae=te.points,Q=te.isRange,ee=te.baseLine,W=T.item.type.defaultProps!==void 0?Rt(Rt({},T.item.type.defaultProps),T.item.props):T.item.props,O=W.activeDot,z=W.hide,H=W.activeBar,R=W.activeShape,K=!!(!z&&C&&Z&&(O||H||R)),le={};I!=="axis"&&Z&&Z.props.trigger==="click"?le={onClick:av(N.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(le={onMouseLeave:av(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:av(N.handleItemMouseEnter,S.props.onMouseEnter)});var he=U.cloneElement(S,Rt(Rt({},T.props),le));function ie(ue){return typeof E.dataKey=="function"?E.dataKey(ue.payload):null}if(K)if(M>=0){var ce,De;if(E.dataKey&&!E.allowDuplicatedCategory){var ne=typeof E.dataKey=="function"?ie:"payload.".concat(E.dataKey.toString());ce=Jv(ae,ne,q),De=Q&&ee&&Jv(ee,ne,q)}else ce=ae?.[M],De=Q&&ee&&ee[M];if(R||H){var Ue=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[U.cloneElement(S,Rt(Rt(Rt({},T.props),le),{},{activeIndex:Ue})),null,null]}if(!Jn(ce))return[he].concat(Fp(N.renderActivePoints({item:T,activePoint:ce,basePoint:De,childIndex:M,isRange:Q})))}else{var Ce,de=(Ce=N.getItemByXY(N.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:he},Y=de.graphicalItem,ve=Y.item,ye=ve===void 0?S:ve,Ae=Y.childIndex,pe=Rt(Rt(Rt({},T.props),le),{},{activeIndex:Ae});return[U.cloneElement(ye,pe),null,null]}return Q?[he,null,null]:[he,null]}),nn(N,"renderCustomized",function(S,P,A){return U.cloneElement(S,Rt(Rt({key:"recharts-customized-".concat(A)},N.props),N.state))}),nn(N,"renderMap",{CartesianGrid:{handler:cv,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:cv},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:cv},YAxis:{handler:cv},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:og("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=cL(N.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),N.state={},N}return qre(g,v),Mre(g,[{key:"componentDidMount",value:function(){var w,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,j=w.children,N=w.data,S=w.height,P=w.layout,A=hc(j,hd);if(A){var T=A.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,B=X4(this.state,N,T,I),C=this.state.tooltipTicks[T].coordinate,E=(this.state.offset.top+S)/2,M=P==="horizontal",q=M?{x:C,y:E}:{y:C,x:E},G=this.state.formattedGraphicalItems.find(function(te){var ae=te.item;return ae.type.name==="Scatter"});G&&(q=Rt(Rt({},q),G.props.points[T].tooltipPosition),B=G.props.points[T].tooltipPayload);var Z={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:I,activePayload:B,activeCoordinate:q};this.setState(Z),this.renderCursor(A),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){Fj([hc(w.children,hd)],[hc(this.props.children,hd)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=hc(this.props.children,hd);if(w&&typeof w.props.shared=="boolean"){var j=w.props.shared?"axis":"item";return l.indexOf(j)>=0?j:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var j=this.container,N=j.getBoundingClientRect(),S=ZH(N),P={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},A=N.width/j.offsetWidth||1,T=this.inRange(P.chartX,P.chartY,A);if(!T)return null;var I=this.state,B=I.xAxisMap,C=I.yAxisMap,E=this.getTooltipEventType();if(E!=="axis"&&B&&C){var M=Gf(B).scale,q=Gf(C).scale,G=M&&M.invert?M.invert(P.chartX):null,Z=q&&q.invert?q.invert(P.chartY):null;return Rt(Rt({},P),{},{xValue:G,yValue:Z})}var te=TP(this.state,this.props.data,this.props.layout,T);return te?Rt(Rt({},P),te):null}},{key:"inRange",value:function(w,j){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,P=w/N,A=j/N;if(S==="horizontal"||S==="vertical"){var T=this.state.offset,I=P>=T.left&&P<=T.left+T.width&&A>=T.top&&A<=T.top+T.height;return I?{x:P,y:A}:null}var B=this.state,C=B.angleAxisMap,E=B.radiusAxisMap;if(C&&E){var M=Gf(C);return KT({x:P,y:A},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,j=this.getTooltipEventType(),N=hc(w,hd),S={};N&&j==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var P=Qv(this.props,this.handleOuterEvent);return Rt(Rt({},P),S)}},{key:"addListener",value:function(){GN.on(KN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){GN.removeListener(KN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,j,N){for(var S=this.state.formattedGraphicalItems,P=0,A=S.length;P<A;P++){var T=S[P];if(T.item===w||T.props.key===w.key||j===sf(T.item.type)&&N===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,j=this.state.offset,N=j.left,S=j.top,P=j.height,A=j.width;return at.createElement("defs",null,at.createElement("clipPath",{id:w},at.createElement("rect",{x:N,y:S,height:P,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(j,N){var S=AP(N,2),P=S[0],A=S[1];return Rt(Rt({},j),{},nn({},P,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(j,N){var S=AP(N,2),P=S[0],A=S[1];return Rt(Rt({},j),{},nn({},P,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(w){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(w){var j=this.state,N=j.formattedGraphicalItems,S=j.activeItem;if(N&&N.length)for(var P=0,A=N.length;P<A;P++){var T=N[P],I=T.props,B=T.item,C=B.type.defaultProps!==void 0?Rt(Rt({},B.type.defaultProps),B.props):B.props,E=sf(B.type);if(E==="Bar"){var M=(I.data||[]).find(function(te){return yQ(w,te)});if(M)return{graphicalItem:T,payload:M}}else if(E==="RadialBar"){var q=(I.data||[]).find(function(te){return KT(w,te)});if(q)return{graphicalItem:T,payload:q}}else if(qy(T,S)||$y(T,S)||Fx(T,S)){var G=cZ({graphicalItem:T,activeTooltipItem:S,itemData:C.data}),Z=C.activeIndex===void 0?G:C.activeIndex;return{graphicalItem:Rt(Rt({},T),{},{childIndex:Z}),payload:Fx(T,S)?C.data[G]:T.props.data[G]}}}return null}},{key:"render",value:function(){var w=this;if(!sA(this))return null;var j=this.props,N=j.children,S=j.className,P=j.width,A=j.height,T=j.style,I=j.compact,B=j.title,C=j.desc,E=CP(j,Tre),M=qn(E,!1);if(I)return at.createElement(cP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},at.createElement(Rj,Km({},M,{width:P,height:A,title:B,desc:C}),this.renderClipPath(),oA(N,this.renderMap)));if(this.props.accessibilityLayer){var q,G;M.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,M.role=(G=this.props.role)!==null&&G!==void 0?G:"application",M.onKeyDown=function(te){w.accessibilityManager.keyboardEvent(te)},M.onFocus=function(){w.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return at.createElement(cP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},at.createElement("div",Km({className:ua("recharts-wrapper",S),style:Rt({position:"relative",cursor:"default",width:P,height:A},T)},Z,{ref:function(ae){w.container=ae}}),at.createElement(Rj,Km({},M,{width:P,height:A,title:B,desc:C,style:Gre}),this.renderClipPath(),oA(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(U.Component);return nn(y,"displayName",r),nn(y,"defaultProps",Rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),nn(y,"getDerivedStateFromProps",function(v,g){var b=v.dataKey,w=v.data,j=v.children,N=v.width,S=v.height,P=v.layout,A=v.stackOffset,T=v.margin,I=g.dataStartIndex,B=g.dataEndIndex;if(g.updateId===void 0){var C=OP(v);return Rt(Rt(Rt({},C),{},{updateId:0},p(Rt(Rt({props:v},C),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:w,prevWidth:N,prevHeight:S,prevLayout:P,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(b!==g.prevDataKey||w!==g.prevData||N!==g.prevWidth||S!==g.prevHeight||P!==g.prevLayout||A!==g.prevStackOffset||!np(T,g.prevMargin)){var E=OP(v),M={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},q=Rt(Rt({},TP(g,w,P)),{},{updateId:g.updateId+1}),G=Rt(Rt(Rt({},E),M),q);return Rt(Rt(Rt({},G),p(Rt({props:v},G),g)),{},{prevDataKey:b,prevData:w,prevWidth:N,prevHeight:S,prevLayout:P,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(!Fj(j,g.prevChildren)){var Z,te,ae,Q,ee=hc(j,_p),W=ee&&(Z=(te=ee.props)===null||te===void 0?void 0:te.startIndex)!==null&&Z!==void 0?Z:I,O=ee&&(ae=(Q=ee.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&ae!==void 0?ae:B,z=W!==I||O!==B,H=!Jn(w),R=H&&!z?g.updateId:g.updateId+1;return Rt(Rt({updateId:R},p(Rt(Rt({props:v},g),{},{updateId:R,dataStartIndex:W,dataEndIndex:O}),g)),{},{prevChildren:j,dataStartIndex:W,dataEndIndex:O})}return null}),nn(y,"renderActiveDot",function(v,g,b){var w;return U.isValidElement(v)?w=U.cloneElement(v,g):Tn(v)?w=v(g):w=at.createElement(k3,g),at.createElement(Ts,{className:"recharts-active-dot",key:b},w)}),function(g){return at.createElement(y,g)}},ane=nne({chartName:"AreaChart",GraphicalChild:g0,axisComponents:[{axisType:"xAxis",AxisComp:Ky},{axisType:"yAxis",AxisComp:Xy}],formatAxisMap:see});const sne=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},ni=({src:e,alt:t,className:r,fallbackText:n,isAvatar:s})=>{const[i,o]=U.useState(!1),[l,c]=U.useState(!1),u=U.useMemo(()=>{const g=(n||t||"").trim();if(!g)return"?";if(s){const b=g.match(/[a-zA-Z0-9]/);return b?b[0].toUpperCase():"?"}else{const b=g.split(/\s+/).filter(w=>w.length>0);if(b.length===0)return"?";if(b.length===1){const w=b[0].match(/[a-zA-Z0-9]/);return w?w[0].toUpperCase():"?"}else{const w=b[0].match(/[a-zA-Z0-9]/),j=b[1].match(/[a-zA-Z0-9]/),N=w?w[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return N&&S?`${N}${S}`:N||"?"}}},[n,t,s]),f=U.useMemo(()=>sne(u),[u]),d=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",p=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",y=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:v,children:a.jsx("span",{className:d(),children:u})})}if(!e||i){const v=`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:v,children:a.jsx("span",{className:d(),children:u})})}return a.jsxs(a.Fragment,{children:[!l&&a.jsx("div",{className:`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:a.jsx("span",{className:d(),children:u})}),a.jsx("img",{src:e,alt:t,className:`${y} ${p} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},IP=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},uv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},DP=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},n=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${n} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),Rv.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:Rv.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=IP("feedback",[]);if(n==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),uv("feedback",o),{success:!0,data:l,simulated:!0}}if(n==="PATCH"||n==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),uv("feedback",o),{success:!0,simulated:!0}}if(n==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),uv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(n==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(n==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=IP(i,[]);if(n==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),uv(i,o),{success:!0,data:l,simulated:!0}}if(n==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(u=>u.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&n==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return Rv[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},y7=()=>"http://127.0.0.1:8050/api/v1/impactOS",D3=y7();typeof window<"u"&&console.log(`[API] Initializing with Base: ${D3}`);const mt=async(e,t={})=>{const r=localStorage.getItem("auth_token"),n=e.startsWith("/")?e:`/${e}`,s=`${D3}${n}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const o=await fetch(s,{...t,headers:i}),l=await o.json().catch(()=>({}));if(!o.ok){const u=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(m=>n.includes(m));if(o.status===404&&u)return console.warn(`[SYSTEM] Live endpoint ${n} not found. Engaging Virtual Engine fallback.`),DP(n,t);let f=`Server Error ${o.status}`;try{l&&typeof l=="object"&&(f=l.message||l.error?.message||f)}catch{}const d=new Error(f);throw d.status=o.status,l?.error?.code&&typeof l.error.code=="string"&&(d.code=l.error.code),d}return l}catch(o){let l="Unknown error",c="Error",u,f;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,u=typeof o.status=="number"?o.status:void 0,f=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const d=c==="TypeError"||l.includes("Failed to fetch"),m=u!==void 0&&u>=500,p=u!==void 0&&u>=400&&u<500;if(d||m&&!p)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),DP(n,t);const y=new Error(l);throw u!==void 0&&(y.status=u),f&&(y.code=f),y}},LP=e=>mt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),ine=e=>mt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),FP=()=>mt("/auth/me"),one=async()=>{try{await mt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},Td=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return mt(`/users${t}`)},lne=e=>mt("/users",{method:"POST",body:JSON.stringify(e)}),cne=(e,t)=>mt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),une=e=>mt(`/users/${e}/dashboard-layout`),dne=(e,t)=>mt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),fne=e=>mt(`/users/${e}`,{method:"DELETE"}),hne=(e,t)=>mt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Od=e=>mt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),pne=e=>mt("/companies",{method:"POST",body:JSON.stringify(e)}),b7=(e,t)=>mt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),w7=e=>mt(`/companies/${e}`,{method:"DELETE"}),Jp=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const n=r.toString();return mt(`/contacts${n?`?${n}`:""}`)},MP=e=>mt("/contacts",{method:"POST",body:JSON.stringify(e)}),N7=(e,t)=>mt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),j7=e=>mt(`/contacts/${e}`,{method:"DELETE"}),Jy=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return mt(`/deals${s?`?${s}`:""}`)},mne=e=>mt("/deals",{method:"POST",body:JSON.stringify(e)}),dv=(e,t)=>mt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),RP=e=>mt(`/deals/${e}`,{method:"DELETE"}),Qp=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return mt(`/projects${s?`?${s}`:""}`)},xne=e=>mt(`/projects/${e}`),gne=e=>mt("/projects",{method:"POST",body:JSON.stringify(e)}),k7=(e,t)=>mt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),S7=e=>mt(`/projects/${e}`,{method:"DELETE"}),Qy=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return mt(`/tasks${s?`?${s}`:""}`)},X1=()=>mt("/tasks/categories"),_7=e=>mt("/tasks",{method:"POST",body:JSON.stringify(e)}),Y1=(e,t)=>mt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),A7=e=>mt(`/tasks/${e}`,{method:"DELETE"}),vne=e=>mt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),C7=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return mt(`/invoices${s?`?${s}`:""}`)},yne=e=>mt("/invoices",{method:"POST",body:JSON.stringify(e)}),fv=(e,t)=>mt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),BP=e=>mt(`/invoices/${e}`,{method:"DELETE"}),bne=(e,t)=>mt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),UP=e=>mt(`/automations${e?`?userId=${e}`:""}`),wne=e=>mt("/automations",{method:"POST",body:JSON.stringify(e)}),Nne=e=>mt(`/automations/${e}/toggle`,{method:"PATCH"}),jne=e=>mt(`/automations/${e}`,{method:"DELETE"}),E7=(e,t)=>mt(`/notifications?userId=${e}&limitNum=${t}`),Mp=e=>mt("/notifications",{method:"POST",body:JSON.stringify(e)}),T7=(e,t)=>mt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),O7=e=>mt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),kne=e=>mt(`/users/${e}/notification-preferences`),Sne=(e,t)=>mt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),_ne=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return mt(`/satisfaction/records${t}`)},Ane=e=>mt(`/satisfaction/records/${e}`),Cne=e=>mt("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),P7=e=>mt(`/satisfaction/companies/${e}`),Ene=e=>mt(`/satisfaction/surveys/${e}`),Tne=e=>mt("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),One=()=>mt("/satisfaction/templates/default"),Pne=e=>mt("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),Ine=(e,t)=>mt(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),Dne=(e="default")=>mt(`/data-retention/policy?workspaceId=${e}`),Lne=(e,t)=>mt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),Fne=(e="default")=>mt(`/data-retention/stats?workspaceId=${e}`),Mne=(e="default",t=50)=>mt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Rne=(e="default",t=50)=>mt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Bne=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),mt(`/data-retention/export?${r.toString()}`)},qP=()=>mt("/pipelines"),$P=e=>mt("/pipelines",{method:"POST",body:JSON.stringify(e)}),hv=(e,t)=>mt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),Une=()=>mt("/feedback"),I7=e=>mt("/feedback",{method:"POST",body:JSON.stringify(e)}),YN=(e,t)=>mt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),zP=e=>mt(`/feedback/${e}`,{method:"DELETE"}),qne=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return mt(`/expenses${r?`?${r}`:""}`)},$ne=e=>mt("/expenses",{method:"POST",body:JSON.stringify(e)}),zne=(e,t)=>mt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),HP=e=>mt(`/expenses/${e}`,{method:"DELETE"}),D7=()=>mt("/expense-categories"),L7=e=>mt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),Hne=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString():"";return mt(`/budgets${t}`)},Wne=e=>mt("/budgets",{method:"POST",body:JSON.stringify(e)}),Vne=(e,t)=>mt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),Gne=e=>mt(`/budgets/${e}`,{method:"DELETE"}),Kne=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString();return mt(`/budgets/tracking${t}`)},Xne=()=>mt("/budgets/departments"),F7=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n)).toString():"";return mt(`/contracts${t}`)},Yne=e=>mt("/contracts",{method:"POST",body:JSON.stringify(e)}),Jne=(e,t)=>mt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Qne=e=>mt(`/contracts/${e}`,{method:"DELETE"}),Zne=(e,t)=>mt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),eae=()=>mt("/contracts/document-types"),tae=e=>mt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),WP=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return mt(`/contracts/google-drive/access-token${t}`)},rae=e=>mt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),nae=e=>mt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),aae=(e,t)=>mt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),sae=(e,t)=>mt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),iae=()=>mt("/data-hygiene/duplicate-companies"),oae=()=>mt("/data-hygiene/duplicate-contacts"),lae=()=>mt("/data-hygiene/incomplete-records"),cae=()=>mt("/data-hygiene/domain-mismatches"),L3=e=>mt(`/google-calendar/status?userId=${e}`),M7=e=>mt(`/google-calendar/auth-url?userId=${e}`),uae=(e,t,r)=>mt(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),dae=e=>mt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),fae=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),n!=null&&s.append("scopeDays",String(n)),mt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},hae=e=>mt(`/shared-inbox/accounts?userId=${e}`),pae=(e,t)=>mt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),mae=e=>mt(`/shared-inbox/filtered-accounts?userId=${e}`),xae=(e,t)=>mt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),gae=(e,t)=>mt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),R7=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.page!==void 0&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),mt(`/shared-inbox/emails?${r.toString()}`)):mt(`/shared-inbox/emails?${r.toString()}`)},vae=(e,t)=>mt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),yae=(e,t)=>mt(`/shared-inbox/emails/${e}?userId=${t}`),VP=(e,t,r)=>mt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),bae=(e,t)=>mt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),wae=e=>mt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),Nae=e=>mt(`/shared-inbox/notes/${e}`),jae=(e,t)=>mt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),kae=(e,t,r)=>mt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),Sae=e=>mt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),_ae=e=>mt(`/shared-inbox/templates?userId=${e}`),Aae=(e,t)=>mt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Cae=e=>mt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),Eae=e=>mt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),Tae=e=>mt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),B7=e=>mt(`/shared-inbox/signatures?userId=${e}`),Oae=e=>mt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),Pae=(e,t)=>mt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),Iae=(e,t)=>mt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),GP=(e,t)=>mt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),KP=(e,t)=>mt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Dae=(e,t)=>mt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),pv=(e,t)=>mt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),XP=(e,t,r)=>{const n=y7(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${n}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},Lae=e=>mt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),Fae=(e,t)=>mt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),Mae=e=>mt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),Rae=e=>mt(`/email-sync-filter?userId=${e}`),Bae=(e,t)=>mt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),Uae=(e,t)=>mt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),F3=(e,t)=>mt(`/shared-inbox/activity/${e}/${t}`),qae=e=>mt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),$ae=e=>mt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),zae=e=>mt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),Hae=e=>mt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),Wae=e=>mt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),Vae=e=>mt(`/shared-inbox/suggested-links?emailId=${e}`),Gae=e=>mt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),Kae=e=>mt(`/shared-inbox/related-tasks/${e}`),Xae=e=>mt(`/shared-inbox/related-projects/${e}`),Yae=e=>mt(`/shared-inbox/related-contracts/${e}`),Jae=e=>mt(`/shared-inbox/labels?userId=${e}`),Qae=e=>mt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Zae=(e,t)=>mt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),ese=(e,t)=>mt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),tse=e=>mt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),YP=e=>mt(`/shared-inbox/categorization-rules?userId=${e}`),rse=(e,t=30)=>mt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),nse=e=>mt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),ase=(e,t)=>mt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),sse=e=>mt(`/shared-inbox/folder-mapping?userId=${e}`),ise=e=>mt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),Bv=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),n&&s.append("endDate",n),mt(`/shared-inbox/calendar-events?${s.toString()}`)},ose=e=>mt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),lse=(e,t,r,n)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:n});return mt(`/shared-inbox/calendar-availability?${s.toString()}`)},cse=(e,t,r)=>mt("/shared-inbox/create-meeting",{method:"POST",body:JSON.stringify({userId:e,emailId:t,createInGoogleCalendar:r})}),use=(e,t,r,n,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),n&&o.append("query",n),s&&o.append("pageToken",s),mt(`/shared-inbox/drive-files?${o.toString()}`)},JP=e=>mt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),dse=e=>mt("/events",{method:"POST",body:JSON.stringify(e)}),fse=(e,t)=>mt(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),U7=e=>mt("/lead-sources?active=true"),hse=async(e,t)=>{const r=localStorage.getItem("auth_token"),n=new FormData;n.append("file",e),n.append("userId",t);const s=await fetch(`${D3}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},pse=e=>mt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),mse=e=>mt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),xse=e=>mt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),gse=({toast:e,onRemove:t})=>{U.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return a.jsx(yn,{className:"w-5 h-5 text-emerald-600"});case"error":return a.jsx(tD,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(ea,{className:"w-5 h-5 text-amber-600"});case"info":return a.jsx(a0,{className:"w-5 h-5 text-blue-600"});default:return a.jsx(a0,{className:"w-5 h-5 text-blue-600"})}},n=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return a.jsxs("div",{className:`${n()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[a.jsx("div",{className:"shrink-0",children:r()}),a.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-4 h-4 text-slate-400"})})]})},vse=({toasts:e,onRemove:t})=>a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>a.jsx("div",{className:"pointer-events-auto",children:a.jsx(gse,{toast:r,onRemove:t})},r.id))}),q7=U.createContext(void 0),ba=()=>{const e=U.useContext(q7);if(!e)throw new Error("useToast must be used within ToastProvider");return e},yse=({children:e})=>{const[t,r]=U.useState([]),n=U.useCallback(u=>{r(f=>f.filter(d=>d.id!==u))},[]),s=U.useCallback((u,f="info",d=3e3)=>{const p={id:Math.random().toString(36).substring(2,9),message:u,type:f,duration:d};r(y=>[...y,p])},[]),i=U.useCallback((u,f)=>{s(u,"success",f)},[s]),o=U.useCallback((u,f)=>{s(u,"error",f||5e3)},[s]),l=U.useCallback((u,f)=>{s(u,"warning",f)},[s]),c=U.useCallback((u,f)=>{s(u,"info",f)},[s]);return a.jsxs(q7.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,a.jsx(vse,{toasts:t,onRemove:n})]})},Rp=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],wi="USD",Y4=e=>Rp.find(t=>t.code===e),Jd=e=>e?Y4(e)?.symbol||"$":Rp.find(r=>r.code===wi)?.symbol||"$",tf=(e,t)=>`${Jd(t)}${e.toLocaleString()}`,QP=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"}],ZP=({onNavigate:e})=>{const{showError:t,showSuccess:r}=ba(),[n,s]=U.useState(null),[i,o]=U.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=U.useState([]),[u,f]=U.useState([]),[d,m]=U.useState(!0),[p,y]=U.useState("1M"),[v,g]=U.useState([]),[b,w]=U.useState(!1),[j,N]=U.useState({}),[S,P]=U.useState({}),[A,T]=U.useState(wi),[I,B]=U.useState(!1),[C,E]=U.useState(QP),[M,q]=U.useState(null),[G,Z]=U.useState(!1),[te,ae]=U.useState(!1),[Q,ee]=U.useState(null);U.useRef(0),U.useEffect(()=>{const Y=JSON.parse(localStorage.getItem("user_data")||"null");s(Y),Y?.id&&W(Y.id)},[]);const W=async Y=>{try{const ve=await une(Y);if(ve?.data&&Array.isArray(ve.data)){const ye=ve.data.flatMap(ue=>ue.id==="stats-grid"?[{id:"stat-pipeline",order:ue.order,size:ue.size||"medium"},{id:"stat-projects",order:ue.order+.1,size:ue.size||"medium"},{id:"stat-invoices",order:ue.order+.2,size:ue.size||"medium"},{id:"stat-tasks",order:ue.order+.3,size:ue.size||"medium"}]:ue.order>0?[{...ue,order:ue.order+3,size:ue.size||"medium"}]:[{...ue,size:ue.size||"medium"}]),Ae=new Set,pe=ye.filter(ue=>Ae.has(ue.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${ue.id}, removing duplicate`),!1):(Ae.add(ue.id),!0));E(pe)}}catch{console.log("[DASHBOARD] Using default layout")}},O=async()=>{if(n?.id){ae(!0);try{await dne(n.id,C),r("Dashboard layout saved"),Z(!1)}catch{t("Failed to save layout")}finally{ae(!1)}}},z=()=>{E(QP)},H=(Y,ve)=>{E(ye=>ye.map(Ae=>Ae.id===Y?{...Ae,size:ve}:Ae))},R=(Y="medium",ve)=>{if(ve.startsWith("stat-"))return"";switch(Y){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},K=(Y,ve)=>{G&&(q(ve),Y.dataTransfer.effectAllowed="move",Y.dataTransfer.setData("text/html",ve))},le=Y=>{!G||!M||(Y.preventDefault(),Y.dataTransfer.dropEffect="move")},he=(Y,ve)=>{if(!G||!M||M===ve)return;Y.preventDefault();const ye=[...C],Ae=ye.findIndex(ue=>ue.id===M),pe=ye.findIndex(ue=>ue.id===ve);if(Ae!==-1&&pe!==-1){const ue=ye[Ae];ye.splice(Ae,1),ye.splice(pe,0,ue),ye.forEach((Pe,Ne)=>{Pe.order=Ne}),E(ye)}q(null)},ie=()=>{q(null)};U.useEffect(()=>{(async()=>{m(!0);try{const ve=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ve){m(!1);return}const[ye,Ae,pe,ue,Pe,Ne]=await Promise.all([Jy(ve).catch(()=>({data:[]})),Qp(ve).catch(()=>({data:[]})),Qy(ve).catch(()=>({data:[]})),C7(ve).catch(()=>({data:[]})),R7(ve).catch(()=>({data:[]})),Td().catch(()=>({data:[]}))]),Re=ye?.data||ye||[],nt=Ae?.data||Ae||[],xt=pe?.data||pe||[],kt=ue?.data||ue||[],Me=Pe?.data||Pe||[],vt=Ne?.data||Ne||[],ut=Array.isArray(Re)?Re.filter(Ut=>Ut.stage!=="Won"&&Ut.stage!=="Lost"):[],lt={},pr={};ut.forEach(Ut=>{const wr=Ut.currency||wi,Er=Ut.value||0;lt[wr]=(lt[wr]||0)+Er,pr[wr]=(pr[wr]||0)+1});const rr=Array.isArray(nt)?nt.filter(Ut=>Ut.status!=="Completed"&&Ut.status!=="Cancelled").length:0,ft=Array.isArray(kt)?kt.filter(Ut=>Ut.status!=="Paid"):[],$t={};ft.forEach(Ut=>{const wr=Ut.currency||wi,Er=Ut.amount||0;$t[wr]=($t[wr]||0)+Er,pr[wr]=(pr[wr]||0)+1});let tr=0,$e=wi;Object.keys(pr).forEach(Ut=>{pr[Ut]>tr&&(tr=pr[Ut],$e=Ut)}),N(lt),P($t),T($e);const bt=lt[$e]||0,jr=$t[$e]||0,Yt=0,Fr=new Date;Fr.setHours(0,0,0,0);const Cr=Array.isArray(xt)?xt.filter(Ut=>{if(!Ut.dueDate)return!1;const wr=new Date(Ut.dueDate);return wr.setHours(0,0,0,0),wr.getTime()===Fr.getTime()&&Ut.status!=="Done"}):[],lr=await Promise.all(Cr.slice(0,2).map(async Ut=>{if(Ut.projectId)try{const wr=await xne(Ut.projectId);return{...Ut,projectTitle:wr?.data?.title||"Software"}}catch{return{...Ut,projectTitle:"Software"}}return{...Ut,projectTitle:"Software"}}));o({openPipeline:bt,activeProjects:rr,unpaidInvoices:jr,actionableMail:Yt}),c(lr),f(vt.slice(0,3))}catch(ve){console.error("[DASHBOARD] Failed to fetch data:",ve),t("Failed to load dashboard data")}finally{m(!1)}})()},[t]),U.useEffect(()=>{(async()=>{w(!0);try{const ve=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ve){w(!1);return}const ye=await bne(ve,p),Ae=ye?.data||ye||[];g(Array.isArray(Ae)?Ae:[])}catch{g([])}finally{w(!1)}})()},[p]);const ce=(Y,ve=A)=>{const ye=Jd(ve);return Y>=1e3?`${ye}${(Y/1e3).toFixed(1)}k`:`${ye}${Y.toLocaleString()}`},De=(Y,ve)=>{const ye=M===Y,Ae=C.find(Ne=>Ne.id===Y),pe=ve||Ae?.size||"medium",ue={draggable:G,onDragStart:Ne=>K(Ne,Y),onDragOver:le,onDrop:Ne=>he(Ne,Y),onDragEnd:ie,className:`transition-all ${ye?"opacity-50 scale-95":""} ${G?"cursor-move":""}`},Pe=()=>{if(!G)return null;const Ne=[{value:"small",icon:a.jsx(QB,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:a.jsx(oU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:a.jsx(XB,{className:"w-3 h-3"}),label:"Large"}];return a.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:Ne.map(({value:Re,icon:nt,label:xt})=>a.jsx("button",{onClick:kt=>{kt.stopPropagation(),H(Y,Re)},onMouseEnter:()=>ee(Y),onMouseLeave:()=>ee(null),className:`p-1.5 rounded transition-all ${pe===Re?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:xt,children:nt},Re))})};switch(Y){case"stat-pipeline":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),a.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:a.jsx(jd,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ce(i.openPipeline,A)})]}),a.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(W0,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},Y);case"stat-projects":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),a.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:a.jsx(su,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},Y);case"stat-invoices":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),a.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:a.jsx(ff,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ce(i.unpaidInvoices,A)})]}),a.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(W0,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},Y);case"stat-tasks":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),a.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:a.jsx(jl,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},Y);case"revenue-chart":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),Pe()]}),a.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),a.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),a.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(Ne=>a.jsx("button",{onClick:()=>y(Ne),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${Ne===p?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:Ne},Ne))})]}),a.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:b?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx(H_,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(jd,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):a.jsx(VH,{width:"100%",height:"100%",children:a.jsxs(ane,{data:v,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),a.jsx(t7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),a.jsx(Ky,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),a.jsx(Xy,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:Ne=>`$${Ne}`}),a.jsx(hd,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),a.jsx(g0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},Y);case"inbox-card":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),Pe()]}),a.jsxs("div",{onClick:()=>!G&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${G?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[a.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:a.jsx(G0,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!G&&a.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:a.jsx(ho,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),a.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),a.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),a.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:a.jsxs("div",{className:"flex -space-x-2",children:[u.map((Ne,Re)=>a.jsx(ni,{src:Ne.avatar,isAvatar:!0,fallbackText:Ne.name||Ne.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},Ne.id||Re)),a.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),a.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:a.jsx(e0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},Y);case"tasks-card":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Kd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),Pe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),a.jsx(jl,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4 lg:space-y-6",children:d?a.jsx("div",{className:"space-y-3",children:[1,2].map(Ne=>a.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},Ne))}):l.length>0?l.slice(0,2).map(Ne=>a.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[a.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:Ne.title}),a.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:Ne.projectTitle||"Software"})]})]},Ne.id)):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),a.jsx("button",{onClick:()=>!G&&e("tasks"),disabled:G,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},Y);default:return null}},ne=n?.name?.split(" ")[0]||"Alex",Ue=n?.avatar||n?.photoURL||"",Ce=n?.name||n?.email||"Impact Member",de=[...C].sort((Y,ve)=>Y.order-ve.order);return a.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ni,{src:Ue,alt:Ce,fallbackText:Ce,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",ne]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:G?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:z,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),a.jsx("button",{onClick:O,disabled:te,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:te?a.jsxs(a.Fragment,{children:[a.jsx(H_,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Layout"]})}),a.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):a.jsxs("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[a.jsx(Kd,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),G&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:a.jsx(Kd,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),a.jsx("div",{className:"space-y-6 lg:space-y-8",children:de.map((Y,ve)=>{const ye=De(Y.id,Y.size);if(Y.id.startsWith("stat-")){const Ne=de[ve-1];if(Ne&&Ne.id.startsWith("stat-"))return null;{const nt=[];for(let xt=ve;xt<de.length&&de[xt].id.startsWith("stat-");xt++)nt.push(de[xt]);return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:nt.map(xt=>De(xt.id,xt.size))},`stat-cards-group-${ve}`)}}if(Y.id==="revenue-chart"){const Ne=de[ve+1],Re=de[ve+2],nt=Y.size||"large";if(Ne&&Re&&(Ne.id==="inbox-card"&&Re.id==="tasks-card"||Ne.id==="tasks-card"&&Re.id==="inbox-card")&&nt==="large")return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:ye}),a.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[De(Ne.id,Ne.size),De(Re.id,Re.size)]})]},"revenue-with-sidebar")}const pe=de[ve-1],ue=de[ve-2];if(pe?.id==="revenue-chart"&&(Y.id==="inbox-card"||Y.id==="tasks-card")){const Ne=pe.size||"large",Re=de[ve+1];if(Ne==="large"&&Re&&(Y.id==="inbox-card"&&Re.id==="tasks-card"||Y.id==="tasks-card"&&Re.id==="inbox-card"))return null}if(ue?.id==="revenue-chart"&&(Y.id==="inbox-card"||Y.id==="tasks-card")&&(ue.size||"large")==="large")return null;const Pe=R(Y.size||"medium",Y.id);return Pe?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:a.jsx("div",{className:Pe,children:ye})},Y.id):a.jsx("div",{children:ye},Y.id)})}),I&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>B(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(W0,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),a.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(jd,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((Y,ve)=>ve[1]-Y[1]).map(([Y,ve])=>{const ye=Y4(Y),Ae=Y===A;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ae?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:ye?.symbol||Y}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:Y}),Ae&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:tf(ve,Y)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:ye?.name||Y})]},Y)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(ff,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((Y,ve)=>ve[1]-Y[1]).map(([Y,ve])=>{const ye=Y4(Y),Ae=Y===A;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ae?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:ye?.symbol||Y}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:Y}),Ae&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:tf(ve,Y)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:ye?.name||Y})]},Y)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),a.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:a.jsxs("button",{onClick:()=>B(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(jl,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},$7=({extractedData:e,suggestions:t,source:r,onConfirm:n,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=U.useState(""),[u,f]=U.useState(""),[d,m]=U.useState(""),[p,y]=U.useState(""),[v,g]=U.useState(""),[b,w]=U.useState(""),[j,N]=U.useState(""),[S,P]=U.useState(null),[A,T]=U.useState({});U.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),f(e?.email?.value||""),m(e?.phone?.value||""),y(e?.title?.value||""),g(e?.linkedin?.value||""),w(e?.company?.value||""),N(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),f(e?.email||""),m(e?.phone||""),y(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),w(e?.currentCompany||""),N(e?.companyWebsite||"")),t?.existingCompany&&P(t.existingCompany.id)},[e,t,r]);const I=M=>M>=95?"text-green-600 bg-green-50":M>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",B=M=>M>=95?"High Confidence":M>=75?"Medium - Verify":"Low - Review",C=()=>{const M={};return l.trim()||(M.name="Name is required"),u&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)&&(M.email="Invalid email format"),!S&&!b.trim()&&(M.company="Company is required"),T(M),Object.keys(M).length===0},E=()=>{if(!C())return;const M={name:l,email:u.toLowerCase(),phone:d,role:p,linkedin:v};n(M,{name:b,website:j},S)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(ir,{className:"w-6 h-6"})})]}),t?.existingContact&&a.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[a.jsx(s0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),a.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(wl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:l,onChange:M=>c(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.name.confidence)}`,children:B(e.name.confidence)})]}),A.name&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.name})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ai,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:u,onChange:M=>f(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.email.confidence)}`,children:B(e.email.confidence)})]}),A.email&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.email})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsxs("div",{className:"relative",children:[a.jsx(Pj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"tel",value:d,onChange:M=>m(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.phone.confidence)}`,children:B(e.phone.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(su,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:p,onChange:M=>y(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.title.confidence)}`,children:B(e.title.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),a.jsxs("div",{className:"relative",children:[a.jsx(V0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:v,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),a.jsxs("select",{value:S||"new",onChange:M=>{const q=M.target.value;if(q==="new")P(null);else{P(q);const G=o.find(Z=>Z.id===q);G&&(w(G.name),N(G.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]}),A.company&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.company})]}),!S&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(yd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:b,onChange:M=>w(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),a.jsxs("div",{className:"relative",children:[a.jsx(W0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:j,onChange:M=>N(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:E,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(yn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},bse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=ba(),[i,o]=U.useState("select"),[l,c]=U.useState(null),[u,f]=U.useState(null),[d,m]=U.useState(null),[p,y]=U.useState(null),[v,g]=U.useState(null),[b,w]=U.useState(!1),[j,N]=U.useState([]),[S,P]=U.useState([]),A=U.useRef(null),T=U.useRef(null),I=U.useRef(null),B=U.useRef(null);at.useEffect(()=>{(async()=>{try{const[Q,ee]=await Promise.all([Od(),U7(!0)]);N(Q.data||[]),P(ee.data||[])}catch(Q){console.error("Failed to load data:",Q)}})()},[]);const C=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let ae;try{console.log("Requesting rear camera..."),ae=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),ae=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",ae),B.current=ae,o("camera"),await new Promise(Q=>setTimeout(Q,100)),A.current){A.current.srcObject=ae,console.log("Stream set to video element");try{await A.current.play(),console.log(" Camera started successfully")}catch(Q){console.error("Video play error:",Q)}}}catch(ae){console.error(" Camera error:",ae);let Q="Camera access denied. Please grant camera permission or use file upload.";ae.name==="NotAllowedError"?Q="Camera permission denied. Please allow camera access in your browser settings.":ae.name==="NotFoundError"?Q="No camera found on this device. Please use file upload instead.":ae.name==="NotReadableError"?Q="Camera is already in use by another application.":ae.name==="NotSupportedError"&&(Q="Camera not supported on this browser. Please use file upload."),g(Q),o("select"),E()}},E=()=>{B.current&&(B.current.getTracks().forEach(ae=>ae.stop()),B.current=null),A.current&&(A.current.srcObject=null)},M=()=>{if(!A.current||!T.current)return;const ae=A.current,Q=T.current,ee=Q.getContext("2d");ee&&(Q.width=ae.videoWidth,Q.height=ae.videoHeight,ee.drawImage(ae,0,0),Q.toBlob(W=>{if(W){const O=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(O),f(Q.toDataURL("image/jpeg")),E(),G(O)}},"image/jpeg",.95))},q=ae=>{const Q=ae.target.files;if(!Q||Q.length===0)return;const ee=Q[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(ee.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(ee.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(ee),ee.type.startsWith("image/")){const W=new FileReader;W.onload=O=>{f(O.target?.result)},W.readAsDataURL(ee)}G(ee)},G=async ae=>{o("processing"),g(null),w(!0);try{const Q=await hse(ae,r);if(Q.success)m(Q.data.extractedData),y(Q.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(Q){console.error("Processing error:",Q),g(Q.message||"Failed to process business card. Please try again."),o("select")}finally{w(!1)}},Z=async(ae,Q,ee)=>{w(!0),g(null);try{const W=S.find(z=>z.name==="Business Card Scanner");if((await pse({contactData:ae,companyData:Q,linkToExistingCompany:ee,leadSourceId:W?.id||"",scanConfidenceScore:te(d),originalScanData:d,userId:r})).success)o("success"),n("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),g(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{w(!1)}},te=ae=>{if(!ae)return 0;const Q=[ae.name?.confidence||0,ae.email?.confidence||0,ae.phone?.confidence||0,ae.title?.confidence||0,ae.company?.confidence||0].filter(ee=>ee>0);return Q.length===0?0:Math.round(Q.reduce((ee,W)=>ee+W,0)/Q.length)};return at.useEffect(()=>()=>{E()},[]),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(ir,{className:"w-6 h-6"})})]}),v&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:ae=>{ae.preventDefault(),console.log("Camera button clicked"),C()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[a.jsx(V_,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),a.jsxs("button",{onClick:()=>I.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[a.jsx(Wu,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),a.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),a.jsx("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:q,className:"hidden"})]}),i==="camera-loading"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(wt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),a.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&a.jsxs("div",{className:"relative bg-black",children:[a.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),a.jsx("canvas",{ref:T,className:"hidden"}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:a.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("button",{onClick:()=>{E(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:a.jsx(Ek,{className:"w-6 h-6 text-gray-700"})})}),a.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:a.jsx("button",{onClick:M,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:a.jsx(V_,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(wt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),u&&a.jsx("div",{className:"mt-6",children:a.jsx("img",{src:u,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&d&&a.jsx($7,{extractedData:d,suggestions:p||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Z,onCancel:e,isProcessing:b,companies:j}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(yn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},wse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=ba(),[i,o]=U.useState("input"),[l,c]=U.useState(""),[u,f]=U.useState(null),[d,m]=U.useState(null),[p,y]=U.useState(null),[v,g]=U.useState(!1),[b,w]=U.useState([]),[j,N]=U.useState([]);at.useEffect(()=>{(async()=>{try{const[C,E]=await Promise.all([Od(),U7(!0)]);w(C.data||[]),N(E.data||[])}catch(C){console.error("Failed to load data:",C)}})()},[]);const S=B=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(B),P=B=>{let C=B.trim();return!C.startsWith("http://")&&!C.startsWith("https://")&&(C=`https://${C}`),C.includes("www.")||(C=C.replace("linkedin.com","www.linkedin.com")),C.replace(/\/$/,"")},A=B=>{c(B),y(null)},T=async()=>{if(!l.trim()){y("Please enter a LinkedIn URL");return}const B=P(l);if(!S(B)){y("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),y(null),g(!0);try{const C=await mse({linkedinUrl:B,userId:r});if(C.success)f(C.data.profile),m(C.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(C){console.error("Fetch error:",C);let E="Failed to fetch LinkedIn profile";C.message?.includes("Invalid LinkedIn URL")?E="Invalid LinkedIn URL format":C.message?.includes("private")?E="This LinkedIn profile is private and cannot be accessed":C.message?.includes("rate limit")&&(E="Rate limit exceeded. Please try again later"),y(E),o("input")}finally{g(!1)}},I=async(B,C,E)=>{g(!0),y(null);try{const M=j.find(G=>G.name==="LinkedIn Scanner");if((await xse({contactData:B,linkedinData:u?{headline:u.headline,currentRole:u.currentRole,profileImageUrl:u.profileImageUrl}:void 0,companyData:C,linkToExistingCompany:E,leadSourceId:M?.id||"",userId:r})).success)o("success"),n("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(M){console.error("Confirm error:",M),y(M.message||"Failed to create contact. Please try again."),s(M.message||"Failed to create contact")}finally{g(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(ir,{className:"w-6 h-6"})})]}),p&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(ea,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-red-800",children:p})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),a.jsxs("div",{className:"relative",children:[a.jsx(V0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:l,onChange:B=>A(B.target.value),onKeyPress:B=>B.key==="Enter"&&T(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Paste any public LinkedIn profile URL"}),a.jsx("li",{children:"We'll extract available contact and company information"}),a.jsx("li",{children:"Review and edit before saving to your CRM"}),a.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:T,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(V0,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(wt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&u&&a.jsx($7,{extractedData:u,suggestions:d||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:I,onCancel:e,isProcessing:v,companies:b}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(yn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var Zp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nse={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},jse=class{#e=Nse;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},$0=new jse;function kse(e){setTimeout(e,0)}var sh=typeof window>"u"||"Deno"in globalThis;function gl(){}function Sse(e,t){return typeof e=="function"?e(t):e}function J4(e){return typeof e=="number"&&e>=0&&e!==1/0}function z7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function n0(e,t){return typeof e=="function"?e(t):e}function tu(e,t){return typeof e=="function"?e(t):e}function eI(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==M3(o,t.options))return!1}else if(!zx(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function tI(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ih(t.options.mutationKey)!==ih(i))return!1}else if(!zx(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function M3(e,t){return(t?.queryKeyHashFn||ih)(e)}function ih(e){return JSON.stringify(e,(t,r)=>Q4(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function zx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>zx(e[r],t[r])):!1}var _se=Object.prototype.hasOwnProperty;function H7(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=rI(e)&&rI(t);if(!n&&!(Q4(e)&&Q4(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let u=0;for(let f=0;f<l;f++){const d=n?f:o[f],m=e[d],p=t[d];if(m===p){c[d]=m,(n?f<i:_se.call(e,d))&&u++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){c[d]=p;continue}const y=H7(m,p,r+1);c[d]=y,y===m&&u++}return i===l&&u===i?e:c}function J1(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function rI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Q4(e){if(!nI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!nI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function nI(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ase(e){return new Promise(t=>{$0.setTimeout(t,e)})}function Z4(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?H7(e,t):t}function Cse(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Ese(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var R3=Symbol();function W7(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===R3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function B3(e,t){return typeof e=="function"?e(...t):!!e}function Tse(e,t,r){let n=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var Ose=class extends Zp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!sh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},U3=new Ose;function ek(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var Pse=kse;function Ise(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=Pse;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Ii=Ise(),Dse=class extends Zp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!sh&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Q1=new Dse;function Lse(e){return Math.min(1e3*2**e,3e4)}function V7(e){return(e??"online")==="online"?Q1.isOnline():!0}var tk=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function G7(e){let t=!1,r=0,n;const s=ek(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new tk(v);m(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>U3.isFocused()&&(e.networkMode==="always"||Q1.isOnline())&&e.canRun(),f=()=>V7(e.networkMode)&&e.canRun(),d=v=>{i()||(n?.(),s.resolve(v))},m=v=>{i()||(n?.(),s.reject(v))},p=()=>new Promise(v=>{n=g=>{(i()||u())&&v(g)},e.onPause?.()}).then(()=>{n=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(d).catch(b=>{if(i())return;const w=e.retry??(sh?0:3),j=e.retryDelay??Lse,N=typeof j=="function"?j(r,b):j,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,b);if(t||!S){m(b);return}r++,e.onFail?.(r,b),Ase(N).then(()=>u()?void 0:p()).then(()=>{t?m(b):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n?.(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?y():p().then(y),s)}}var K7=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),J4(this.gcTime)&&(this.#e=$0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(sh?1/0:300*1e3))}clearGcTimeout(){this.#e&&($0.clearTimeout(this.#e),this.#e=void 0)}},Fse=class extends K7{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=sI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=sI(this.options);t.data!==void 0&&(this.setState(aI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Z4(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(gl).catch(gl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>tu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===R3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>n0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!z7(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=W7(this.options,t),u=(()=>{const f={client:this.#a,queryKey:this.queryKey,meta:this.meta};return n(f),f})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=G7({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof tk&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof tk){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...X7(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...aI(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ii.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function X7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:V7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function aI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function sI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Y7=class extends Zp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=ek(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),iI(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rk(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rk(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof tu(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!J1(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&oI(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),n&&(this.#t!==r||tu(this.options.enabled,this.#t)!==tu(t.enabled,this.#t)||n0(this.options.staleTime,this.#t)!==n0(t.staleTime,this.#t))&&this.#x();const s=this.#g();n&&(this.#t!==r||tu(this.options.enabled,this.#t)!==tu(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Rse(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#d(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(gl)),t}#x(){this.#b();const e=n0(this.options.staleTime,this.#t);if(sh||this.#a.isStale||!J4(e))return;const r=z7(this.#a.dataUpdatedAt,e)+1;this.#c=$0.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(sh||tu(this.options.enabled,this.#t)===!1||!J4(this.#l)||this.#l===0)&&(this.#u=$0.setInterval(()=>{(this.options.refetchIntervalInBackground||U3.isFocused())&&this.#d()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&($0.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&($0.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:u}=e;let f={...u},d=!1,m;if(t._optimisticResults){const T=this.hasListeners(),I=!T&&iI(e,t),B=T&&oI(e,r,t,n);(I||B)&&(f={...f,...X7(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:v}=f;m=f.data;let g=!1;if(t.placeholderData!==void 0&&m===void 0&&v==="pending"){let T;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(T=s.data,g=!0):T=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,T!==void 0&&(v="success",m=Z4(s?.data,T,t),d=!0)}if(t.select&&m!==void 0&&!g)if(s&&m===i?.data&&t.select===this.#m)m=this.#f;else try{this.#m=t.select,m=t.select(m),m=Z4(s?.data,m,t),this.#f=m,this.#s=null}catch(T){this.#s=T}this.#s&&(p=this.#s,m=this.#f,y=Date.now(),v="error");const b=f.fetchStatus==="fetching",w=v==="pending",j=v==="error",N=w&&b,S=m!==void 0,A={status:v,fetchStatus:f.fetchStatus,isPending:w,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:j&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:j&&S,isStale:q3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:tu(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=A.data!==void 0,I=A.status==="error"&&!T,B=M=>{I?M.reject(A.error):T&&M.resolve(A.data)},C=()=>{const M=this.#o=A.promise=ek();B(M)},E=this.#o;switch(E.status){case"pending":e.queryHash===r.queryHash&&B(E);break;case"fulfilled":(I||A.data!==E.value)&&C();break;case"rejected":(!I||A.error!==E.reason)&&C();break}}return A}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),J1(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(e){Ii.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Mse(e,t){return tu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function iI(e,t){return Mse(e,t)||e.state.data!==void 0&&rk(e,t,t.refetchOnMount)}function rk(e,t,r){if(tu(t.enabled,e)!==!1&&n0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&q3(e,t)}return!1}function oI(e,t,r,n){return(e!==t||tu(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&q3(e,r)}function q3(e,t){return tu(t.enabled,e)!==!1&&e.isStaleByTime(n0(t.staleTime,e))}function Rse(e,t){return!J1(e.getCurrentResult(),t)}function Z1(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let f=!1;const d=y=>{Tse(y,()=>t.signal,()=>f=!0)},m=W7(t.options,t.fetchOptions),p=async(y,v,g)=>{if(f)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const w=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return d(P),P})(),j=await m(w),{maxPages:N}=t.options,S=g?Ese:Cse;return{pages:S(y.pages,j,N),pageParams:S(y.pageParams,v,N)}};if(s&&i.length){const y=s==="backward",v=y?J7:nk,g={pages:i,pageParams:o},b=v(n,g);l=await p(g,b,y)}else{const y=e??i.length;do{const v=c===0?o[0]??n.initialPageParam:nk(n,l);if(c>0&&v==null)break;l=await p(l,v),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function nk(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function J7(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function Bse(e,t){return t?nk(e,t)!=null:!1}function Use(e,t){return!t||!e.getPreviousPageParam?!1:J7(e,t)!=null}var qse=class extends Y7{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Z1()})}getOptimisticResult(e){return e.behavior=Z1(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,n=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=n,c=r.fetchMeta?.fetchMore?.direction,u=o&&c==="forward",f=s&&c==="forward",d=o&&c==="backward",m=s&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Bse(t,r.data),hasPreviousPage:Use(t,r.data),isFetchNextPageError:u,isFetchingNextPage:f,isFetchPreviousPageError:d,isFetchingPreviousPage:m,isRefetchError:l&&!u&&!d,isRefetching:i&&!f&&!m}}},$se=class extends K7{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Q7(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=G7({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",s=!this.#a.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ii.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Q7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zse=class extends Zp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new $se({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=mv(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=mv(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=mv(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(s=>s.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=mv(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ii.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>tI(t,r))}findAll(e={}){return this.getAll().filter(t=>tI(e,t))}notify(e){Ii.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ii.batch(()=>Promise.all(e.map(t=>t.continue().catch(gl))))}};function mv(e){return e.options.scope?.id}var Hse=class extends Zp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),J1(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&ih(r.mutationKey)!==ih(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??Q7();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ii.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,n,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,n,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Wse=class extends Zp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,s=t.queryHash??M3(n,t);let i=this.get(s);return i||(i=new Fse({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ii.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>eI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>eI(e,r)):t}notify(e){Ii.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ii.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ii.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Vse=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Wse,this.#t=e.mutationCache||new zse,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=U3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Q1.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(n0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(n.queryHash)?.state.data,o=Sse(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ii.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ii.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ii.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ii.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(gl).catch(gl)}invalidateQueries(e,t={}){return Ii.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ii.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(gl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(gl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(n0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(gl).catch(gl)}fetchInfiniteQuery(e){return e.behavior=Z1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(gl).catch(gl)}ensureInfiniteQueryData(e){return e.behavior=Z1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Q1.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(ih(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(n=>{zx(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(ih(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{zx(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=M3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===R3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Z7=U.createContext(void 0),ji=e=>{const t=U.useContext(Z7);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Gse=({client:e,children:t})=>(U.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Z7.Provider,{value:e,children:t})),eM=U.createContext(!1),Kse=()=>U.useContext(eM);eM.Provider;function Xse(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Yse=U.createContext(Xse()),Jse=()=>U.useContext(Yse),Qse=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?B3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},Zse=e=>{U.useEffect(()=>{e.clearReset()},[e])},eie=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||B3(r,[e.error,n])),tie=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},rie=(e,t)=>e.isLoading&&e.isFetching&&!t,nie=(e,t)=>e?.suspense&&t.isPending,lI=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function tM(e,t,r){const n=Kse(),s=Jse(),i=ji(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",tie(o),Qse(o,s,l),Zse(s);const c=!i.getQueryCache().get(o.queryHash),[u]=U.useState(()=>new t(i,o)),f=u.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(m=>{const p=d?u.subscribe(Ii.batchCalls(m)):gl;return u.updateResult(),p},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),U.useEffect(()=>{u.setOptions(o)},[o,u]),nie(o,f))throw lI(o,u,s);if(eie({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!sh&&rie(f,n)&&(c?lI(o,u,s):l?.promise)?.catch(gl).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function jc(e,t){return tM(e,Y7)}function Al(e,t){const r=ji(),[n]=U.useState(()=>new Hse(r,e));U.useEffect(()=>{n.setOptions(e)},[n,e]);const s=U.useSyncExternalStore(U.useCallback(o=>n.subscribe(Ii.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=U.useCallback((o,l)=>{n.mutate(o,l).catch(gl)},[n]);if(s.error&&B3(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function aie(e,t){return tM(e,qse)}const Zy={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},sie=e=>jc({queryKey:Zy.companies(e),queryFn:async()=>(await Od(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),iie=e=>jc({queryKey:Zy.contacts(e),queryFn:async()=>(await Jp(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),oie=()=>jc({queryKey:Zy.deals(),queryFn:async()=>(await Jy()).data||[],staleTime:60*1e3,gcTime:600*1e3}),lie=()=>jc({queryKey:Zy.users(),queryFn:async()=>(await Td()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),cie=()=>{const e=ji();return Al({mutationFn:async({id:t,updates:r})=>(await b7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const n=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:n}},onError:(t,r,n)=>{n?.previousCompanies&&n.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},uie=()=>{const e=ji();return Al({mutationFn:async({id:t,updates:r})=>(await N7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const n=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:n}},onError:(t,r,n)=>{n?.previousContacts&&n.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},die=()=>{const e=ji();return Al({mutationFn:async t=>(await w7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(n=>n.id!==t))}})},fie=()=>{const e=ji();return Al({mutationFn:async t=>(await j7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(n=>n.id!==t))}})},hie=()=>{const e=ji();return Al({mutationFn:async t=>(await Promise.all(t.map(r=>w7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(n=>!t.includes(n.id)))}})},pie=()=>{const e=ji();return Al({mutationFn:async t=>(await Promise.all(t.map(r=>j7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(n=>!t.includes(n.id)))}})},mie=()=>{const e=ji();return Al({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(n=>b7(n,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},n=>n?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},xie=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:n=""})=>{const{showSuccess:s,showError:i}=ba(),o=ji(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,u]=U.useState("companies"),[f,d]=U.useState(""),[m,p]=U.useState(null),[y,v]=U.useState(null),{data:g=[],isLoading:b}=sie(f),{data:w=[],isLoading:j}=iie(f),{data:N=[],isLoading:S}=oie(),{data:P=[],isLoading:A}=lie(),T=cie(),I=uie(),B=die(),C=fie(),E=hie(),M=pie(),q=mie(),G=b||j||S||A,[Z,te]=U.useState([]),[ae,Q]=U.useState([]),[ee,W]=U.useState([]),[O,z]=U.useState(!1),[H,R]=U.useState(!1),[K,le]=U.useState({}),[he,ie]=U.useState(!1),[ce,De]=U.useState(!1),[ne,Ue]=U.useState({}),[Ce,de]=U.useState("details"),[Y,ve]=U.useState(!1),[ye,Ae]=U.useState(null),[pe,ue]=U.useState(null),[Pe,Ne]=U.useState(!1),[Re,nt]=U.useState(!1),[xt,kt]=U.useState([]),[Me,vt]=U.useState([]),[ut,lt]=U.useState(!1),[pr,rr]=U.useState(!1),[ft,$t]=U.useState(!1),[tr,$e]=U.useState(!1),[bt,jr]=U.useState(null),[Yt,Fr]=U.useState(null),[Cr,lr]=U.useState(!1),[Ut,wr]=U.useState(""),[Er,Yr]=U.useState(!1),[sn,Wn]=U.useState(null),[or,Vn]=U.useState(null),[fn,Ke]=U.useState(!1),[Nt,Vt]=U.useState(""),[re,me]=U.useState(0),[be,_e]=U.useState([]),[Ee,Oe]=U.useState(""),[Xe,ct]=U.useState(!1),[Ve,Je]=U.useState(null),[He,Le]=U.useState(null),[tt,ht]=U.useState(!1),[Pt,Mt]=U.useState(""),[vr,zr]=U.useState(0),[on,Mn]=U.useState([]),[ps,xn]=U.useState(!1),[wa,Pn]=U.useState(!1),[pa,sa]=U.useState(!1),ma=async()=>{sa(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>sa(!1),500)}};U.useEffect(()=>{n!==void 0&&d(n)},[n]),U.useEffect(()=>{kt([]),vt([])},[c,f]),U.useEffect(()=>{const Be=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",Be),()=>window.removeEventListener("refresh-crm",Be)},[o]);const Ws=async Be=>{if(m)try{await T.mutateAsync({id:m.id,updates:Be}),p({...m,...Be}),s("Account updated")}catch{i("Update failed")}},Ta=async()=>{if(!(!y||Y)){if(!ne.name||!ne.email){i("Name and Email are required fields");return}ve(!0);try{await I.mutateAsync({id:y.id,updates:ne});const Be={...y,...ne};v(Be),De(!1),s("Contact profile updated successfully")}catch(Be){console.error("Contact update error:",Be),i(Be.message||"Failed to update contact. Please try again.")}finally{ve(!1)}}},qe=async Be=>{Ne(!0);try{await B.mutateAsync(Be),m?.id===Be&&(p(null),R(!1)),Ae(null),s("Company deleted successfully")}catch(gr){i(gr.message||"Failed to delete company")}finally{Ne(!1)}},It=async Be=>{nt(!0);try{await C.mutateAsync(Be),y?.id===Be&&(v(null),De(!1)),ue(null),s("Contact deleted successfully")}catch(gr){i(gr.message||"Failed to delete contact")}finally{nt(!1)}};U.useEffect(()=>{m?.id?(async()=>{try{lr(!0);const gr=await P7(m.id);gr.success&&Fr(gr.data)}catch{Fr(null)}finally{lr(!1)}})():Fr(null)},[m?.id]);const Ct=()=>{p(null),R(!1),wr(""),Ke(!1),Fr(null)},sr=()=>{v(null),De(!1),Oe(""),ht(!1)},Nr=Be=>{const gr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Tr=[];let kr;for(;(kr=gr.exec(Be))!==null;){const Jr=kr[1].trim(),$n=P.find(xs=>xs.name.toLowerCase()===Jr.toLowerCase());$n&&Tr.push($n.id)}return[...new Set(Tr)]},mr=Be=>{const gr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Tr=[];let kr=0,Jr;for(;(Jr=gr.exec(Be))!==null;){Jr.index>kr&&Tr.push(Be.substring(kr,Jr.index));const $n=Jr[1].trim(),xs=P.find(us=>us.name.toLowerCase()===$n.toLowerCase());xs?Tr.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",xs.name]},Jr.index)):Tr.push(`@${$n}`),kr=Jr.index+Jr[0].length}return kr<Be.length&&Tr.push(Be.substring(kr)),Tr.length>0?Tr:Be},_r=Be=>{const gr=Be.target.value,Tr=Be.target.selectionStart;wr(gr),me(Tr);const kr=gr.substring(0,Tr),Jr=kr.lastIndexOf("@");if(Jr!==-1){const $n=kr.substring(Jr+1),xs=Jr>0?kr[Jr-1]:" ";if((xs===" "||xs===`
`||Jr===0)&&!$n.includes(" ")&&!$n.includes(`
`)){Vt($n);const us=P.filter(Ds=>Ds.name.toLowerCase().includes($n.toLowerCase())||Ds.email.toLowerCase().includes($n.toLowerCase()));_e(us.slice(0,5)),Ke(!0);return}}Ke(!1)},kn=Be=>{const Tr=Ut.substring(0,re).lastIndexOf("@"),kr=Ut.substring(re),$n=`${Ut.substring(0,Tr)}@${Be.name} ${kr}`;wr($n),Ke(!1)},In=async()=>{if(!(!m||!Ut.trim())){Yr(!0);try{const Be=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",gr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Tr={id:`note_${Date.now()}`,userId:Be,userName:gr,text:Ut.trim(),createdAt:new Date().toISOString()},kr=[...m.notes||[],Tr];await T.mutateAsync({id:m.id,updates:{notes:kr}}),p({...m,notes:kr}),o.invalidateQueries({queryKey:["companies"]});const Jr=Nr(Ut);for(const xs of Jr)try{await Mp({userId:xs,type:"mention",title:"You were mentioned in a company note",message:`${gr} mentioned you in ${m.name}`,relatedId:m.id,relatedType:"company",read:!1})}catch(us){console.error("Failed to send notification:",us)}wr("");const $n=Jr.length>0?`Note added and ${Jr.length} user(s) notified`:"Note added successfully";s($n)}catch(Be){i(Be.message||"Failed to add note")}finally{Yr(!1)}}},nr=async()=>{if(!(!m||!l||!or))try{Wn(or);const Be=m.notes?.filter(gr=>gr.id!==or)||[];await T.mutateAsync({id:m.id,updates:{notes:Be}}),p({...m,notes:Be}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),Vn(null)}catch(Be){i(Be.message||"Failed to delete note")}finally{Wn(null)}},xr=Be=>{const gr=Be.target.value,Tr=Be.target.selectionStart;Oe(gr),zr(Tr);const kr=gr.substring(0,Tr),Jr=kr.lastIndexOf("@");if(Jr!==-1){const $n=kr.substring(Jr+1),xs=Jr>0?kr[Jr-1]:" ";if((xs===" "||xs===`
`||Jr===0)&&!$n.includes(" ")&&!$n.includes(`
`)){Mt($n);const us=P.filter(Ds=>Ds.name.toLowerCase().includes($n.toLowerCase())||Ds.email.toLowerCase().includes($n.toLowerCase()));Mn(us.slice(0,5)),ht(!0);return}}ht(!1)},Dt=Be=>{const Tr=Ee.substring(0,vr).lastIndexOf("@"),kr=Ee.substring(vr),$n=`${Ee.substring(0,Tr)}@${Be.name} ${kr}`;Oe($n),ht(!1)},Ar=async()=>{if(!(!y||!Ee.trim())){ct(!0);try{const Be=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",gr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",Tr={id:`note_${Date.now()}`,userId:Be,userName:gr,text:Ee.trim(),createdAt:new Date().toISOString()},kr=[...y.notes||[],Tr];await I.mutateAsync({id:y.id,updates:{notes:kr}}),v({...y,notes:kr}),o.invalidateQueries({queryKey:["contacts"]});const Jr=Nr(Ee);for(const xs of Jr)try{await Mp({userId:xs,type:"mention",title:"You were mentioned in a contact note",message:`${gr} mentioned you in ${y.name}`,relatedId:y.id,relatedType:"contact",read:!1})}catch(us){console.error("Failed to send notification:",us)}Oe("");const $n=Jr.length>0?`Note added and ${Jr.length} user(s) notified`:"Note added successfully";s($n)}catch(Be){i(Be.message||"Failed to add note")}finally{ct(!1)}}},Ht=async()=>{if(!(!y||!l||!He))try{Je(He);const Be=y.notes?.filter(gr=>gr.id!==He)||[];await I.mutateAsync({id:y.id,updates:{notes:Be}}),v({...y,notes:Be}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),Le(null)}catch(Be){i(Be.message||"Failed to delete note")}finally{Je(null)}},Gn=U.useCallback(Be=>N.some(gr=>gr.companyId===Be),[N]),Rn=U.useMemo(()=>g.filter(Be=>{if(Z.length>0){const gr=Z.includes("target")&&Be.isTargetAccount,Tr=Z.includes("non-target")&&!Be.isTargetAccount;if(!gr&&!Tr)return!1}if(ae.length>0){const gr=ae.includes("assigned")&&Be.ownerId,Tr=ae.includes("unassigned")&&!Be.ownerId;if(!gr&&!Tr)return!1}if(ee.length>0){const gr=ee.includes("has-deals")&&Gn(Be.id),Tr=ee.includes("no-deals")&&!Gn(Be.id);if(!gr&&!Tr)return!1}return!0}),[g,Z,ae,ee,Gn]),cn=U.useMemo(()=>Z.length>0||ae.length>0||ee.length>0,[Z,ae,ee]),er=()=>{te([]),Q([]),W([])},Sn=(Be,gr)=>{Be==="target"?te(Tr=>Tr.includes(gr)?Tr.filter(kr=>kr!==gr):[...Tr,gr]):Be==="assigned"?Q(Tr=>Tr.includes(gr)?Tr.filter(kr=>kr!==gr):[...Tr,gr]):Be==="deals"&&W(Tr=>Tr.includes(gr)?Tr.filter(kr=>kr!==gr):[...Tr,gr])},Na=()=>{xt.length===Rn.length&&Rn.length>0?kt([]):kt(Rn.map(Be=>Be.id))},un=()=>{Me.length===w.length?vt([]):vt(w.map(Be=>Be.id))},gn=async()=>{lt(!0);try{const Be=[...xt];await E.mutateAsync(Be),m&&Be.includes(m.id)&&(p(null),R(!1)),kt([]),jr(null),s(`Successfully deleted ${Be.length} compan${Be.length>1?"ies":"y"}`)}catch(Be){i(Be.message||"Failed to delete companies")}finally{lt(!1)}},$r=async()=>{rr(!0);try{const Be=[...Me];await M.mutateAsync(Be),y&&Be.includes(y.id)&&(v(null),De(!1)),vt([]),jr(null),s(`Successfully deleted ${Be.length} contact${Be.length>1?"s":""}`)}catch(Be){i(Be.message||"Failed to delete contacts")}finally{rr(!1)}},Gr=async()=>{if(xt.length!==0){$t(!0);try{const Be=[...xt];await q.mutateAsync({ids:Be,updates:{isTargetAccount:!0}}),m&&Be.includes(m.id)&&p({...m,isTargetAccount:!0}),kt([]),s(`Successfully marked ${Be.length} compan${Be.length>1?"ies":"y"} as target account${Be.length>1?"s":""}`)}catch(Be){i(Be.message||"Failed to mark companies as target accounts")}finally{$t(!1)}}},Wt=async()=>{if(xt.length!==0){$e(!0);try{const Be=[...xt];await q.mutateAsync({ids:Be,updates:{isTargetAccount:!1}}),m&&Be.includes(m.id)&&p({...m,isTargetAccount:!1}),kt([]),s(`Successfully unmarked ${Be.length} compan${Be.length>1?"ies":"y"} as target account${Be.length>1?"s":""}`)}catch(Be){i(Be.message||"Failed to unmark companies as target accounts")}finally{$e(!1)}}},En=async()=>{m&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},Kn=Be=>N.filter(gr=>gr.companyId===Be&&gr.stage!=="Won"&&gr.stage!=="Lost").length,ms=Be=>Be?P.find(gr=>gr.id===Be)?.name||"Unknown":"Unassigned";return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),a.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[a.jsxs("button",{onClick:()=>{u("companies"),kt([]),vt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Rn.length:g.length,")"]}),a.jsxs("button",{onClick:()=>{u("contacts"),kt([]),vt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",w.length,")"]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:ma,disabled:pa,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[a.jsx(Nd,{className:`w-4 h-4 ${pa?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),a.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[a.jsx(vn,{className:"w-4 h-4 shrink-0"})," ",a.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>xn(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[a.jsx(sU,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),a.jsxs("button",{onClick:()=>Pn(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[a.jsx(V0,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[a.jsx("div",{className:"w-full min-w-0",children:a.jsxs("div",{className:"relative group w-full min-w-0",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),a.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:f,onChange:Be=>d(Be.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:G,checked:c==="companies"?Rn.length>0&&xt.length===Rn.length&&Rn.every(Be=>xt.includes(Be.id)):w.length>0&&Me.length===w.length,onChange:c==="companies"?Na:un}),a.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>z(!0),disabled:G,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${cn?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(sx,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"text-sm font-bold",children:"Filters"}),cn&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:Z.length+ae.length+ee.length})]}),a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:G?"Loading...":`Showing ${Rn.length} of ${g.length} companies`})]}):a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:G?"Loading...":`Showing ${w.length} contact${w.length!==1?"s":""}`})}),O&&c==="companies"&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:a.jsx(sx,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),a.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(pm,{className:"w-4 h-4"}),"Target Account"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Z.includes("target"),onChange:()=>Sn("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(pm,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>Be.isTargetAccount).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Z.includes("non-target"),onChange:()=>Sn("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(yd,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>!Be.isTargetAccount).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Xg,{className:"w-4 h-4"}),"Assignment"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ae.includes("assigned"),onChange:()=>Sn("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Xg,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>Be.ownerId).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ae.includes("unassigned"),onChange:()=>Sn("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(bd,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>!Be.ownerId).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(su,{className:"w-4 h-4"}),"Deals"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ee.includes("has-deals"),onChange:()=>Sn("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(su,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>Gn(Be.id)).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ee.includes("no-deals"),onChange:()=>Sn("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(su,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(Be=>!Gn(Be.id)).length," companies"]})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:er,disabled:!cn,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[a.jsx(ir,{className:"w-4 h-4"}),"Clear All Filters"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Rn.length," of ",g.length," companies"]}),a.jsx("button",{onClick:()=>z(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:G?Array.from({length:8}).map((Be,gr)=>a.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${gr}`)):c==="companies"?Rn.map(Be=>{const gr=P.find(kr=>kr.id===Be.ownerId),Tr=xt.includes(Be.id);return a.jsxs("div",{onClick:()=>p(Be),className:`bg-white p-6 rounded-2xl border ${Tr?"border-indigo-400 bg-indigo-50/30":Be.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[Be.isTargetAccount&&a.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[a.jsx(pm,{className:"w-2.5 h-2.5"})," Target Account"]}),a.jsx("div",{className:"absolute top-4 right-4",onClick:kr=>kr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Tr,onChange:()=>kt(kr=>Tr?kr.filter(Jr=>Jr!==Be.id):[...kr,Be.id])})}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(ni,{src:Be.logo,fallbackText:Be.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:Be.name}),a.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:Be.industry})]})]}),a.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(W0,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate",children:Be.website||"No website"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wl,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate font-medium",children:gr?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[Kn(Be.id)," Active Deals"]}),a.jsx(os,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Be.id)}):w.map(Be=>{const gr=g.find(kr=>kr.id===Be.companyId),Tr=Me.includes(Be.id);return a.jsxs("div",{onClick:()=>v(Be),className:`bg-white p-5 rounded-2xl border ${Tr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[a.jsx("div",{className:"absolute top-4 right-4",onClick:kr=>kr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Tr,onChange:()=>vt(kr=>Tr?kr.filter(Jr=>Jr!==Be.id):[...kr,Be.id])})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:Be.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:Be.name}),a.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[Be.role," @ ",gr?.name||"Partner"]})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ai,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:Be.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pj,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-[13px]",children:Be.phone})]})]}),Be.linkedin&&a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsxs("a",{href:Be.linkedin,target:"_blank",rel:"noreferrer",onClick:kr=>kr.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[a.jsx(V0,{className:"w-4 h-4"}),"LinkedIn"]})})]},Be.id)})})]}),(c==="companies"&&xt.length>0||c==="contacts"&&Me.length>0)&&a.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?xt.length:Me.length}),"Selected"]}),a.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:Be=>{Be.stopPropagation(),Gr()},disabled:ft||tr,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[ft?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(pm,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),a.jsxs("button",{onClick:Be=>{Be.stopPropagation(),Wt()},disabled:ft||tr,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[tr?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(bd,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),a.jsxs("button",{onClick:Be=>{Be.stopPropagation(),jr(c)},disabled:c==="companies"?ut:pr,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?ut:pr)?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Ur,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),a.jsx("button",{onClick:()=>{c==="companies"?kt([]):vt([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),m&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:Ct}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ni,{src:m.logo,fallbackText:m.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:m.name}),a.jsx("button",{onClick:()=>Ws({isTargetAccount:!m.isTargetAccount}),className:`p-1 rounded-lg transition-all ${m.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:a.jsx(pm,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-500",children:m.industry})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[H?a.jsx("button",{onClick:async()=>{await Ws(K),R(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:a.jsx(Mi,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{le({...m}),R(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:a.jsx(Oj,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>Ae(m),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:a.jsx(Ur,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:Ct,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[H?a.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),a.jsx("input",{type:"text",value:K.name,onChange:Be=>le({...K,name:Be.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),a.jsx("input",{type:"text",value:K.industry,onChange:Be=>le({...K,industry:Be.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),a.jsxs("select",{value:K.ownerId,onChange:Be=>le({...K,ownerId:Be.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"",children:"Unassigned"}),P.map(Be=>a.jsx("option",{value:Be.id,children:Be.name},Be.id))]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),a.jsx("input",{type:"text",value:K.website,onChange:Be=>le({...K,website:Be.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),a.jsx("input",{type:"text",value:K.linkedin,onChange:Be=>le({...K,linkedin:Be.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),a.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[a.jsx(wl,{className:"w-4 h-4"})," ",ms(m.ownerId)]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),a.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${m.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:m.isTargetAccount?"Target Account":"Standard Account"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(jd,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),a.jsxs("button",{onClick:En,disabled:he,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[he?a.jsx(wt,{className:"w-3 h-3 animate-spin"}):a.jsx(dU,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),a.jsxs("div",{className:"space-y-3",children:[he&&a.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),a.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!m.socialSignals||m.socialSignals.length===0)&&!he?a.jsxs("div",{className:"py-12 text-center text-slate-400",children:[a.jsx(jd,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),a.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(m.socialSignals||[]).map(Be=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Be.type==="funding"?"bg-emerald-50 text-emerald-600":Be.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[Be.type==="funding"&&a.jsx(aU,{className:"w-4 h-4"}),Be.type==="hiring"&&a.jsx(Uu,{className:"w-4 h-4"}),Be.type==="acquisition"&&a.jsx(Yv,{className:"w-4 h-4"}),Be.type==="news"&&a.jsx(eU,{className:"w-4 h-4"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-slate-900",children:Be.title}),Be.isAiGenerated&&a.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[a.jsx(Ji,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:Be.date})]}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:Be.description})]},Be.id))]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(G0,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),Yt&&a.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",a.jsx(os,{className:"w-3 h-3"})]})]}),Cr?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(wt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):Yt?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-2xl border-2 ${Yt.latestNpsScore>=9?"bg-green-50 border-green-200":Yt.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":Yt.latestNpsScore!==void 0&&Yt.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),Yt.latestNpsScore!==void 0&&Yt.latestNpsScore!==null?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-2xl font-black ${Yt.latestNpsScore>=9?"text-green-600":Yt.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:Yt.latestNpsScore}),Yt.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${Yt.npsCategory==="Promoter"?"bg-green-100 text-green-700":Yt.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Yt.npsCategory})]}):a.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),Yt.lastSurveyDate?a.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[a.jsx(ha,{className:"w-4 h-4"}),new Date(Yt.lastSurveyDate).toLocaleDateString()]}):a.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):a.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:a.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",m.notes&&m.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:m.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:3,value:Ut,onChange:_r,onBlur:()=>setTimeout(()=>Ke(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),fn&&be.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(ax,{className:"w-3 h-3"}),"Mention User"]}),be.map(Be=>a.jsxs("button",{onClick:()=>kn(Be),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Be.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Be.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Be.email})]})]},Be.id))]})})]}),a.jsx("button",{onClick:In,disabled:Er||!Ut.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Er?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Send"]})})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:m.notes&&m.notes.length>0?[...m.notes].reverse().map(Be=>{const gr=l?.role==="Admin"||Be.userId===l?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Be.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Be.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),gr&&a.jsx("button",{onClick:()=>Vn(Be.id),disabled:sn===Be.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:sn===Be.id?a.jsx(wt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Be.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:mr(Be.text)})]},Be.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),a.jsx("div",{className:"space-y-3",children:w.filter(Be=>Be.companyId===m.id).map(Be=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>v(Be),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:Be.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Be.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:Be.role})]})]}),a.jsx(os,{className:"w-4 h-4 text-slate-300"})]},Be.id))})]})]})]})]}),y&&a.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:sr}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:sr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:y.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:y.name}),a.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[y.role," @ ",g.find(Be=>Be.id===y.companyId)?.name||"Direct Contact"]}),a.jsx("div",{className:"flex gap-2 mt-4",children:ce?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:Ta,disabled:Y,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-3.5 h-3.5"})," Save Changes"]})}),a.jsxs("button",{onClick:()=>{De(!1),Ue({...y})},disabled:Y,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ir,{className:"w-3.5 h-3.5"})," Cancel"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{Ue({...y}),De(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[a.jsx(Oj,{className:"w-3.5 h-3.5"})," Edit Profile"]}),a.jsx("a",{href:`mailto:${y.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:a.jsx(ai,{className:"w-4 h-4"})}),y.linkedin&&a.jsx("a",{href:y.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:a.jsx(V0,{className:"w-4 h-4"})})]})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:a.jsx(a0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:a.jsx(Ka,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:a.jsx(af,{className:"w-3.5 h-3.5"})}].map(Be=>a.jsxs("button",{onClick:()=>{de(Be.id),De(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Ce===Be.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Be.icon," ",Be.label]},Be.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[Ce==="details"&&a.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:ce?a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"text",value:ne.name||"",onChange:Be=>Ue({...ne,name:Be.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),a.jsx("input",{type:"text",value:ne.role||"",onChange:Be=>Ue({...ne,role:Be.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),a.jsxs("select",{value:ne.companyId||"",onChange:Be=>Ue({...ne,companyId:Be.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"No Organization"}),g.map(Be=>a.jsx("option",{value:Be.id,children:Be.name},Be.id))]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[a.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"email",value:ne.email||"",onChange:Be=>Ue({...ne,email:Be.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),a.jsx("input",{type:"tel",value:ne.phone||"",onChange:Be=>Ue({...ne,phone:Be.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),a.jsx("input",{type:"url",value:ne.linkedin||"",onChange:Be=>Ue({...ne,linkedin:Be.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),a.jsx(ai,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:y.email}),a.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),a.jsx(Pj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:y.phone||"Registry Pending"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(yd,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),a.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[a.jsx(ni,{src:g.find(Be=>Be.id===y.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:g.find(Be=>Be.id===y.companyId)?.name||"Independent Partner"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:g.find(Be=>Be.id===y.companyId)?.industry||"Uncategorized"}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),a.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),a.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:a.jsx(Di,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ji,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[a.jsx(Xg,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[a.jsx(Xv,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),Ce==="notes"&&a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",y.notes&&y.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:y.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:4,value:Ee,onChange:xr,onBlur:()=>setTimeout(()=>ht(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),tt&&on.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(ax,{className:"w-3 h-3"}),"Mention User"]}),on.map(Be=>a.jsxs("button",{onClick:()=>Dt(Be),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Be.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Be.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Be.email})]})]},Be.id))]})})]}),a.jsx("button",{onClick:Ar,disabled:Xe||!Ee.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Xe?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Send"]})})]}),y.legacyNotes&&a.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(a0,{className:"w-4 h-4 text-amber-600"}),a.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),a.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:y.legacyNotes})]}),a.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:y.notes&&y.notes.length>0?[...y.notes].reverse().map(Be=>{const gr=l?.role==="Admin"||Be.userId===l?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Be.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Be.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),gr&&a.jsx("button",{onClick:()=>Le(Be.id),disabled:Ve===Be.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ve===Be.id?a.jsx(wt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Be.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:mr(Be.text)})]},Be.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(xo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),Ce==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),a.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[a.jsx(BB,{className:"w-3 h-3"})," Audit Log"]})]}),a.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>ue(y),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ur,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>{v(null),De(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Xg,{className:"w-5 h-5"})," Save"]})]})]})]}),ye&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(ni,{src:ye.logo,fallbackText:ye.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:ye.name}),a.jsx("p",{className:"text-xs text-slate-500",children:ye.industry})]})]})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ae(null),disabled:Pe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>qe(ye.id),disabled:Pe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Pe?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),pe&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:pe.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:pe.name}),a.jsx("p",{className:"text-xs text-slate-500",children:pe.email}),pe.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:pe.role})]})]}),g.find(Be=>Be.id===pe.companyId)&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(yd,{className:"w-4 h-4 text-slate-400"}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:g.find(Be=>Be.id===pe.companyId)?.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ue(null),disabled:Re,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>It(pe.id),disabled:Re,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Re?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),bt&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",bt==="companies"?xt.length:Me.length," ",bt==="companies"?"Compan":"Contact",bt==="companies"?xt.length>1?"ies":"y":Me.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",bt==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(bt==="companies"?g.filter(Be=>xt.includes(Be.id)):w.filter(Be=>Me.includes(Be.id))).slice(0,5).map(Be=>a.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:bt==="companies"?a.jsxs(a.Fragment,{children:[a.jsx(ni,{src:Be.logo,fallbackText:Be.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Be.industry})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:Be.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Be.email})]})]})},Be.id)),(bt==="companies"?xt.length:Me.length)>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(bt==="companies"?xt.length:Me.length)-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>jr(null),disabled:bt==="companies"?ut:pr,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>{bt==="companies"?gn():$r()},disabled:bt==="companies"?ut:pr,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(bt==="companies"?ut:pr)?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${bt==="companies"?xt.length:Me.length} ${bt==="companies"?"Compan":"Contact"}${bt==="companies"?xt.length>1?"ies":"y":Me.length>1?"s":""}`})]})]})}),or&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(s0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Vn(null),disabled:sn===or,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:nr,disabled:sn===or,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:sn===or?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete"]})})]})]})}),He&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(s0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Le(null),disabled:Ve===He,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ht,disabled:Ve===He,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ve===He?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete"]})})]})]})}),ps&&a.jsx(bse,{onClose:()=>xn(!1),onSuccess:()=>{xn(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),wa&&a.jsx(wse,{onClose:()=>Pn(!1),onSuccess:()=>{Pn(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""})]})},cI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],gie=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:n,showError:s,showInfo:i}=ba(),[o,l]=U.useState([]),[c,u]=U.useState([]),[f,d]=U.useState([]),[m,p]=U.useState([]),[y,v]=U.useState(!0),[g,b]=U.useState(null),[w,j]=U.useState("overview"),[N,S]=U.useState(!1),[P,A]=U.useState(null),[T,I]=U.useState(null),[B,C]=U.useState(""),[E,M]=U.useState(null),[q,G]=U.useState(!1),[Z,te]=U.useState(!1),[ae,Q]=U.useState(!1),[ee,W]=U.useState({title:"",companyId:"",value:"",currency:wi,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[O,z]=U.useState([]),[H,R]=U.useState(!1),[K,le]=U.useState(!1),[he,ie]=U.useState([]),[ce,De]=U.useState(!1),[ne,Ue]=U.useState([]),[Ce,de]=U.useState(""),[Y]=U.useState("sales"),[ve,ye]=U.useState(!1),[Ae,pe]=U.useState(!1),[ue,Pe]=U.useState(!0),[Ne,Re]=U.useState(!1),[nt,xt]=U.useState(null),[kt,Me]=U.useState(""),[vt,ut]=U.useState(""),lt=ne.find(Ke=>Ke.id===Ce)||null,[pr,rr]=U.useState(null),ft=async()=>{try{Pe(!0);const Vt=((await qP())?.data||[]).filter(re=>re.type==="sales");if(Vt.length===0)try{const re=await $P({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});re?.data?.id&&await hv(re.data.id,{isActive:!0});const _e=((await qP())?.data||[]).filter(Oe=>Oe.type==="sales");Ue(_e);const Ee=_e.find(Oe=>Oe.isActive)||_e[0];Ee&&de(Ee.id)}catch(re){console.error("[PIPELINE] Failed to create default sales pipeline:",re);const me=cI.filter(be=>be.type==="sales");Ue(me),me.length>0&&de(me[0].id)}else{Ue(Vt);const re=Vt.find(me=>me.isActive)||Vt[0];re&&de(re.id)}}catch(Ke){console.error("[PIPELINE] Failed to fetch pipelines:",Ke);const Nt=cI.filter(Vt=>Vt.type==="sales");Ue(Nt),Nt.length>0&&de(Nt[0].id)}finally{Pe(!1)}};U.useEffect(()=>{ft()},[]);const $t=async()=>{v(!0);try{const Ke=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,[Nt,Vt,re,me]=await Promise.all([Jy(Ke),Od(),Td(),Jp()]),_e=(Array.isArray(Nt)?Nt:Nt?.data||[]).filter(Ee=>Ee.pipelineType?Ee.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(Ee.stage));l(_e),u(Vt?.data||[]),d(re?.data||[]),p(me?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};U.useEffect(()=>{$t()},[r,Y]),U.useEffect(()=>{const Ke=()=>$t();return window.addEventListener("refresh-pipeline",Ke),()=>window.removeEventListener("refresh-pipeline",Ke)},[]);const tr=(Ke,Nt)=>{rr(Nt),Ke.dataTransfer.setData("dealId",Nt)},$e=async(Ke,Nt)=>{Ke.preventDefault();const Vt=Ke.dataTransfer.getData("dealId"),re=o.find(me=>me.id===Vt);if(!(!re||re.stage===Nt))try{await dv(Vt,{stage:Nt,pipelineType:"sales"}),l(me=>me.map(be=>be.id===Vt?{...be,stage:Nt}:be)),n(`Deal moved to ${Nt}`),re.ownerId&&re.ownerId!==r?.id&&await Mp({userId:re.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${re.title}" was moved to ${Nt}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{rr(null)}},bt=async()=>{if(!(!kt.trim()||!Ce||Ne))try{Re(!0);const Ke=ne.find(Vt=>Vt.id===Ce);if(!Ke)return;const Nt=[...Ke.stages,kt.trim()];await hv(Ce,{stages:Nt}),Ue(Vt=>Vt.map(re=>re.id===Ce?{...re,stages:Nt}:re)),Me(""),n("Stage added successfully")}catch(Ke){s(Ke.message||"Failed to add stage")}finally{Re(!1)}},jr=async Ke=>{if(Ce)try{const Nt=ne.find(re=>re.id===Ce);if(!Nt)return;const Vt=Nt.stages.filter((re,me)=>me!==Ke);await hv(Ce,{stages:Vt}),Ue(re=>re.map(me=>me.id===Ce?{...me,stages:Vt}:me)),n("Stage removed successfully")}catch(Nt){s(Nt.message||"Failed to remove stage")}},Yt=async()=>{if(vt.trim())try{const Ke=await $P({name:vt.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});Ke?.data&&(await ft(),de(Ke.data.id),ut(""),ye(!1),n("Sales pipeline created successfully"))}catch(Ke){s(Ke.message||"Failed to create pipeline")}},Fr=async Ke=>{try{const Nt=ne.find(Vt=>Vt.id===Ke);if(!Nt)return;await hv(Ke,{isActive:!0}),de(Ke),await ft(),await $t(),n(`Switched to ${Nt.name}`)}catch(Nt){s(Nt.message||"Failed to switch pipeline")}},Cr=async Ke=>{G(!0);try{await RP(Ke),l(Nt=>Nt.filter(Vt=>Vt.id!==Ke)),g?.id===Ke&&b(null),M(null),n("Opportunity removed from pipeline")}catch(Nt){s(Nt.message||"Failed to delete opportunity")}finally{G(!1)}},lr=()=>{O.length===o.length?z([]):z(o.map(Ke=>Ke.id))},Ut=async()=>{R(!0);try{const Ke=[...O];await Promise.all(Ke.map(Nt=>RP(Nt))),l(Nt=>Nt.filter(Vt=>!Ke.includes(Vt.id))),g&&Ke.includes(g.id)&&b(null),z([]),le(!1),n(`Successfully deleted ${Ke.length} opportunit${Ke.length>1?"ies":"y"}`)}catch(Ke){s(Ke.message||"Failed to delete opportunities")}finally{R(!1)}},wr=async Ke=>{if(!g)return;if(g.stakeholderIds?.includes(Ke)){s("Stakeholder already linked");return}A(Ke);const Nt=[...g.stakeholderIds||[],Ke];try{await dv(g.id,{stakeholderIds:Nt});const Vt={...g,stakeholderIds:Nt};b(Vt),l(re=>re.map(me=>me.id===g.id?Vt:me)),S(!1),C(""),n("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{A(null)}},Er=c.find(Ke=>Ke.id===g?.companyId),Yr=f.find(Ke=>Ke.id===g?.ownerId),sn=m.filter(Ke=>g?.stakeholderIds?.includes(Ke.id)),Wn=m.filter(Ke=>!g?.stakeholderIds?.includes(Ke.id)&&(Ke.name.toLowerCase().includes(B.toLowerCase())||Ke.email.toLowerCase().includes(B.toLowerCase())));U.useEffect(()=>{g&&!Z&&W({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||wi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const or=async()=>{if(g){if(!ee.title.trim()){s("Deal title is required");return}if(!ee.ownerId){s("Opportunity lead is required");return}Q(!0);try{const Ke={title:ee.title.trim(),companyId:ee.companyId&&ee.companyId.trim()!==""?ee.companyId:null,value:parseFloat(ee.value)||0,currency:ee.currency||wi,stage:ee.stage,pipelineType:"sales",ownerId:ee.ownerId,expectedCloseDate:ee.expectedCloseDate&&ee.expectedCloseDate.trim()!==""?ee.expectedCloseDate:null,description:ee.description.trim()||null};await dv(g.id,Ke);const Nt={...g,...Ke};l(Vt=>Vt.map(re=>re.id===g.id?Nt:re)),b(Nt),te(!1),n("Deal updated successfully")}catch(Ke){s(Ke.message||"Failed to update deal")}finally{Q(!1)}}},Vn=async()=>{if(!(!g||w!=="activity")){De(!0);try{const Ke=await F3("deal",g.id);ie(Ke?.data||[])}catch(Ke){console.error("[PIPELINE] Failed to fetch deal activities:",Ke),ie([])}finally{De(!1)}}};U.useEffect(()=>{g&&w==="activity"?Vn():ie([])},[g?.id,w]);const fn=()=>{if(!g)return[];const Ke=[];return g.createdAt&&Ke.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${Yr?` by ${Yr.name}`:""}`,date:g.createdAt,icon:a.jsx(vn,{className:"w-4 h-4"}),color:"indigo"}),Ke.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(jd,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&Ke.push({id:"value",type:"value",title:`Deal Value: ${tf(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${tf(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(ff,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&Ke.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:a.jsx(ha,{className:"w-4 h-4"}),color:"amber"}),sn.length>0&&Ke.push({id:"stakeholders",type:"stakeholder",title:`${sn.length} Stakeholder${sn.length>1?"s":""} Linked`,description:sn.map(Nt=>Nt.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(e0,{className:"w-4 h-4"}),color:"purple"}),g.description&&Ke.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(xo,{className:"w-4 h-4"}),color:"slate"}),he.forEach(Nt=>{Nt.activityType==="email_linked"&&Ke.push({id:Nt.id||`email-${Nt.emailId}`,type:"email_linked",title:Nt.title||"Email Linked",description:Nt.description||`Email "${Nt.emailSubject||"Untitled"}" from ${Nt.emailSender||"Unknown"}`,date:Nt.createdAt,icon:a.jsx(ai,{className:"w-4 h-4"}),color:"indigo",emailId:Nt.emailId})}),Ke.sort((Nt,Vt)=>new Date(Vt.date).getTime()-new Date(Nt.date).getTime())};return a.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[a.jsx(Tj,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-900",children:lt?.name||"Loading..."}),a.jsx(xl,{className:"w-4 h-4 text-slate-400"})]}),a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[ne.length>0?ne.map(Ke=>a.jsxs("button",{onClick:()=>Fr(Ke.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${Ce===Ke.id?"text-indigo-600":"text-slate-600"}`,children:[Ke.name," ",Ce===Ke.id&&a.jsx(Ad,{className:"w-4 h-4"})]},Ke.id)):a.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsxs("button",{onClick:()=>ye(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[a.jsx(vn,{className:"w-3 h-3"}),"Manage Pipelines"]})}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:vt,onChange:Ke=>ut(Ke.target.value),onKeyDown:Ke=>Ke.key==="Enter"&&Yt(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),a.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsx("button",{onClick:()=>ye(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:a.jsx(X_,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[a.jsx(vn,{className:"w-4 h-4"})," New Deal"]})]})]}),!y&&o.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&O.length===o.length,onChange:lr}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),a.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:y||ue||!lt?a.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:a.jsx(wt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):lt.stages.map(Ke=>{const Nt=o.filter(Vt=>Vt.stage===Ke);return a.jsxs("div",{onDragOver:Vt=>Vt.preventDefault(),onDrop:Vt=>$e(Vt,Ke),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:Ke}),a.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:Nt.length})]}),a.jsx(vn,{onClick:()=>t(Ke),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),a.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:Nt.map(Vt=>{const re=c.find(be=>be.id===Vt.companyId),me=O.includes(Vt.id);return a.jsxs("div",{onClick:()=>b(Vt),draggable:!0,onDragStart:be=>tr(be,Vt.id),className:`bg-white p-5 rounded-2xl border ${me?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${pr===Vt.id?"opacity-30":""}`,children:[a.jsx("div",{className:"absolute top-3 right-3",onClick:be=>be.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:me,onChange:()=>z(be=>me?be.filter(_e=>_e!==Vt.id):[...be,Vt.id])})}),a.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[a.jsx(ni,{src:re?.logo,fallbackText:re?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),a.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Vt.title})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:re?.name||"Independent"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-indigo-600 font-black text-xs",children:tf(Vt.value,Vt.currency)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Vt.expectedCloseDate}),a.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Vt.id)})})]},Ke)})}),g&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{b(null),S(!1)}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:a.jsx(su,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[Z?a.jsx("input",{type:"text",value:ee.title,onChange:Ke=>W(Nt=>({...Nt,title:Ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Z?a.jsx("select",{value:ee.stage,onChange:Ke=>W(Nt=>({...Nt,stage:Ke.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:lt?.stages?.map(Ke=>a.jsx("option",{value:Ke,children:Ke},Ke))||[]}):a.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Z?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{te(!1),W({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||wi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:ae,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:or,disabled:ae||!ee.title.trim()||!ee.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ae?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>te(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"}),"Edit Deal"]}),a.jsx("button",{onClick:()=>{b(null),S(!1),te(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:a.jsx(ir,{className:"w-6 h-6"})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:a.jsx(a0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:a.jsx(af,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:a.jsx(e0,{className:"w-4 h-4"})}].map(Ke=>a.jsxs("button",{onClick:()=>{j(Ke.id),S(!1),te(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${w===Ke.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Ke.icon," ",Ke.label]},Ke.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[w==="overview"&&a.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[Z?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(qm,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("select",{value:ee.currency||wi,onChange:Ke=>W(Nt=>({...Nt,currency:Ke.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:Rp.map(Ke=>a.jsxs("option",{value:Ke.code,children:[Ke.code," (",Ke.symbol,")"]},Ke.code))}),a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:Jd(ee.currency||wi)}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:ee.value||"",onChange:Ke=>W(Nt=>({...Nt,value:Ke.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(ha,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("input",{type:"date",value:ee.expectedCloseDate,onChange:Ke=>W(Nt=>({...Nt,expectedCloseDate:Ke.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(qm,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:tf(g.value,g.currency)}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(ha,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(yd,{className:"w-4 h-4"})," Account Association"]}),Z?a.jsxs("select",{value:ee.companyId,onChange:Ke=>W(Nt=>({...Nt,companyId:Ke.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[a.jsx("option",{value:"",children:"Independent/Direct"}),c.map(Ke=>a.jsx("option",{value:Ke.id,children:Ke.name},Ke.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[a.jsx(ni,{src:Er?.logo,className:"w-14 h-14",fallbackText:Er?.name||"A",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:Er?.name||"Independent/Direct"}),a.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:Er?.industry||"Uncategorized"})]}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:a.jsx(Di,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vy,{className:"w-4 h-4"})," Opportunity Lead"]}),Z?a.jsxs("select",{value:ee.ownerId,onChange:Ke=>W(Nt=>({...Nt,ownerId:Ke.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[a.jsx("option",{value:"",children:"Select Owner"}),f.map(Ke=>a.jsxs("option",{value:Ke.id,children:[Ke.name," (",Ke.role,")"]},Ke.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[a.jsx(ni,{src:Yr?.avatar,className:"w-14 h-14",fallbackText:Yr?.name||"U",isAvatar:!0}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:Yr?.name||"Unassigned"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:Yr?.role||"Teammate"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4"})," Strategic Context"]}),Z?a.jsx("textarea",{value:ee.description,onChange:Ke=>W(Nt=>({...Nt,description:Ke.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[a.jsx(Ji,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),a.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(Ka,{className:"w-6 h-6"})}),a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),a.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),a.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),w==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),ce?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(wt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const Ke=fn();return Ke.length===0?a.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[a.jsx(af,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),a.jsx("div",{className:"space-y-6",children:Ke.map((Nt,Vt)=>{const re=Ee=>{const Oe={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Oe[Ee]||Oe.slate},me=new Date(Nt.date),be=me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_e=me.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${re(Nt.color)} flex items-center justify-center flex-shrink-0`,children:Nt.icon}),a.jsx("div",{className:"flex-1 pb-6",children:a.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-black text-slate-900 text-sm",children:Nt.title}),a.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[be," ",_e]})]}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:Nt.description}),Nt.type==="email_linked"&&Nt.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Nt.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Di,{className:"w-3 h-3"})," View Email"]})]})})]},Nt.id)})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:sn.length})]})]})]}),w==="stakeholders"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!N&&a.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx(Uu,{className:"w-3 h-3"})," Link Person"]})]}),N?a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),a.jsx("button",{onClick:()=>S(!1),className:"p-1 hover:bg-white rounded-lg",children:a.jsx(ir,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search global registry...",value:B,onChange:Ke=>C(Ke.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Wn.length>0?Wn.map(Ke=>{const Nt=P===Ke.id;return a.jsxs("button",{onClick:()=>wr(Ke.id),disabled:Nt||!!P,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:Ke.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:Ke.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:Ke.role})]}),Nt?a.jsx(wt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):a.jsx(vn,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},Ke.id)}):a.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):sn.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3",children:sn.map(Ke=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:Ke.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:Ke.name}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:Ke.role})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(g){I(Ke.id);try{const Nt=(g.stakeholderIds||[]).filter(re=>re!==Ke.id);await dv(g.id,{stakeholderIds:Nt});const Vt={...g,stakeholderIds:Nt};b(Vt),l(re=>re.map(me=>me.id===g.id?Vt:me)),n("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{I(null)}}},disabled:T===Ke.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:T===Ke.id?a.jsx(wt,{className:"w-4 h-4 animate-spin text-red-500"}):a.jsx(Ur,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:a.jsx(os,{className:"w-5 h-5"})})]})]},Ke.id))}):a.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[a.jsx(e0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>M(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:a.jsx(Ur,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(jl,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),E&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(su,{className:"w-5 h-5 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:E.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:E.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",E.value.toLocaleString()]})]})]})]}),Er&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(ni,{src:Er.logo,fallbackText:Er.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:Er.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>M(null),disabled:q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Cr(E.id),disabled:q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),O.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:O.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),le(!0)},disabled:H,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[H?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ur,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>z([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),K&&O.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",O.length," Opportunit",O.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ke=>O.includes(Ke.id)).slice(0,5).map(Ke=>(c.find(Nt=>Nt.id===Ke.companyId),a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(su,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ke.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:Ke.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",Ke.value.toLocaleString()]})]})]})]},Ke.id))),O.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",O.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>le(!1),disabled:H,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ut,disabled:H,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${O.length} Opportunit${O.length>1?"ies":"y"}`})]})]})}),Ae&&a.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[a.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>pe(!1)}),a.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(X_,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),a.jsx("button",{onClick:()=>pe(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),a.jsx("div",{className:"space-y-2",children:ne.map(Ke=>a.jsx("button",{onClick:()=>Fr(Ke.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${Ce===Ke.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:Ke.name}),a.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[Ke.stages.length," stages"]})]}),Ce===Ke.id&&a.jsx(Ad,{className:"w-5 h-5 text-indigo-600"})]})},Ke.id))})]}),lt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[lt.stages.length," stages"]})]}),a.jsx("div",{className:"space-y-2",children:lt.stages.map((Ke,Nt)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:Nt+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-sm text-slate-900",children:Ke}),a.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Vt=>Vt.stage===Ke).length," deals"]})]})]},Ke))})]}),a.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(qm,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),a.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((Ke,Nt)=>Ke+(Nt.value||0),0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{pe(!1),ye(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(Tj,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),a.jsx(os,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),a.jsxs("button",{onClick:()=>{pe(!1),$t(),n("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(Nd,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),a.jsx(os,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),ve&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),a.jsx("button",{onClick:()=>ye(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),a.jsx("div",{className:"space-y-2",children:ne.map(Ke=>a.jsx("button",{onClick:()=>Fr(Ke.id),className:`w-full p-3 rounded-xl border-2 text-left ${Ce===Ke.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:a.jsx("p",{className:"font-bold",children:Ke.name})},Ke.id))})]}),lt&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),a.jsx("div",{className:"space-y-2",children:lt.stages.map((Ke,Nt)=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:Ke}),a.jsx("button",{onClick:()=>jr(Nt),disabled:nt!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:nt===Nt?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4"})})]},Nt))}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("input",{type:"text",placeholder:"New stage name...",value:kt,onChange:Ke=>Me(Ke.target.value),onKeyDown:Ke=>{Ke.key==="Enter"&&kt.trim()&&!Ne&&bt()},disabled:Ne,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsx("button",{onClick:bt,disabled:Ne||!kt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Ne?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Pipeline name...",value:vt,onChange:Ke=>ut(Ke.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),a.jsx("button",{onClick:Yt,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),a.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:a.jsx("button",{onClick:()=>ye(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})})]})},gh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},vie=e=>jc({queryKey:gh.projects(e||""),queryFn:async()=>e?(await Qp(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),yie=()=>jc({queryKey:gh.companies,queryFn:async()=>(await Od()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),bie=()=>jc({queryKey:gh.users,queryFn:async()=>(await Td()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),wie=e=>jc({queryKey:gh.tasks(e||""),queryFn:async()=>e?(await Qy(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Nie=e=>jc({queryKey:gh.projectActivities(e||""),queryFn:async()=>e?(await F3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),jie=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async({id:n,data:s})=>await k7(n,s),onSuccess:async(n,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:gh.projectActivities(s.id),type:"active"})])},onError:n=>{console.error("Failed to update project:",n),r(n?.message||"Failed to update project")}})},kie=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async n=>await S7(n),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to delete project:",n),r(n?.message||"Failed to delete project")}})},Sie=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async({id:n,archived:s})=>await k7(n,{archived:s}),onSuccess:async(n,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:gh.projectActivities(s.id)})},onError:n=>{console.error("Failed to archive/restore project:",n),r(n?.message||"Failed to update project")}})},_ie=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async n=>{await Promise.all(n.map(s=>S7(s)))},onSuccess:async(n,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to bulk delete projects:",n),r(n?.message||"Failed to delete projects")}})},Aie=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:n,showError:s}=ba(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=vie(i),{data:c=[]}=yie(),{data:u=[]}=bie(),{data:f=[]}=wie(i),[d,m]=U.useState(null),{data:p=[],isLoading:y}=Nie(d?.id||null),[v,g]=U.useState("active"),b=l,w=jie(),j=kie(),N=Sie(),S=_ie(),P=Ne=>{const Re=f.filter(xt=>xt.projectId===Ne);if(Re.length===0)return 0;const nt=Re.filter(xt=>xt.status==="Done").length;return Math.round(nt/Re.length*100)},[A,T]=U.useState(null),[I,B]=U.useState(null),[C,E]=U.useState(null),[M,q]=U.useState(null),[G,Z]=U.useState([]),[te,ae]=U.useState(!1),[Q,ee]=U.useState(!1),[W,O]=U.useState(!1),[z,H]=U.useState(!1),[R,K]=U.useState(!1),[le,he]=U.useState(""),[ie,ce]=U.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[De,ne]=U.useState(null),Ue=async Ne=>{if(o.find(nt=>nt.id===Ne)){B(Ne);try{await N.mutateAsync({id:Ne,archived:v==="active"}),E(null),d?.id===Ne&&m(null)}finally{B(null)}}},Ce=async Ne=>{T(Ne);try{await j.mutateAsync(Ne),q(null),d?.id===Ne&&m(null)}finally{T(null)}},de=()=>{G.length===Pe.length?Z([]):Z(Pe.map(Ne=>Ne.id))},Y=async()=>{ae(!0);try{const Ne=[...G];await S.mutateAsync(Ne),Z([]),ee(!1),d&&Ne.includes(d.id)&&m(null),n(`Successfully deleted ${Ne.length} project${Ne.length>1?"s":""}`)}catch(Ne){s(Ne.message||"Failed to delete projects")}finally{ae(!1)}},ve=Ne=>{if(!Ne)return"";try{const Re=new Date(Ne);if(isNaN(Re.getTime()))return"";const nt=Re.getFullYear(),xt=String(Re.getMonth()+1).padStart(2,"0"),kt=String(Re.getDate()).padStart(2,"0");return`${nt}-${xt}-${kt}`}catch{return""}},ye=Ne=>{m(Ne),ce({title:Ne.title,description:Ne.description||"",companyId:Ne.companyId||"",status:Ne.status,engagement:Ne.engagement||"",startDate:ve(Ne.startDate),endDate:ve(Ne.endDate)}),O(!1)},Ae=async()=>{if(d){if(!ie.title.trim()){s("Project title is required");return}H(!0);try{const Ne={title:ie.title.trim(),description:ie.description.trim(),status:ie.status,companyId:ie.companyId&&ie.companyId.trim()!==""?ie.companyId:null};await w.mutateAsync({id:d.id,data:Ne});const Re={...d,...Ne};m(Re),O(!1)}catch{}finally{H(!1)}}},pe=async Ne=>{if(d){H(!0);try{await w.mutateAsync({id:d.id,data:{status:Ne}});const Re={...d,status:Ne};m(Re),ce(nt=>({...nt,status:Ne}))}catch{}finally{H(!1)}}},ue=async(Ne,Re)=>{ne(Ne);try{const nt=Re==="Done"?"Todo":"Done";await Y1(Ne,{status:nt}),setTasks(Me=>Me.map(vt=>vt.id===Ne?{...vt,status:nt}:vt));const xt=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,kt=await apiGetTasks(xt);setTasks(kt.data||[]),n(nt==="Done"?"Task marked as done":"Task marked as todo")}catch(nt){s(nt.message||"Failed to update task status")}finally{ne(null)}},Pe=U.useMemo(()=>o.filter(Ne=>{const Re=Ne.archived===!0;return v==="archived"?Re:!Re}),[o,v]);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{g("active"),Z([])},className:`text-sm font-bold pb-1 transition-all ${v==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{g("archived"),Z([])},className:`text-sm font-bold pb-1 transition-all ${v==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Ne=>Ne.archived).length,")"]})]})]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[a.jsx(vn,{className:"w-4 h-4"})," Create Project"]})]}),!b&&Pe.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Pe.length>0&&G.length===Pe.length,onChange:de}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),b?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(wt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Pe.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[a.jsx(Gv,{className:"w-16 h-16 text-slate-200 mb-6"}),a.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",v," projects found"]}),a.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pe.map(Ne=>{const Re=c.find(kt=>kt.id===Ne.companyId),nt=P(Ne.id),xt=G.includes(Ne.id);return a.jsxs("div",{onClick:kt=>{!Ne.archived&&!xt&&(kt.stopPropagation(),ye(Ne))},className:`bg-white rounded-3xl border ${xt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Ne.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[a.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[a.jsx("button",{onClick:kt=>{kt.stopPropagation(),E(Ne)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:v==="active"?"Archive":"Restore",children:v==="active"?a.jsx(pd,{className:"w-4 h-4"}):a.jsx(Kv,{className:"w-4 h-4"})}),a.jsx("button",{onClick:kt=>{kt.stopPropagation(),q(Ne)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:a.jsx(Ur,{className:"w-4 h-4"})}),a.jsx("div",{onClick:kt=>kt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${xt?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:xt,onChange:()=>Z(kt=>xt?kt.filter(Me=>Me!==Ne.id):[...kt,Ne.id])})})]}),a.jsxs("div",{className:"p-7",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:a.jsx(Zf,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Ne.title}),a.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:Re?.name||"Standalone Project"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[a.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),a.jsxs("span",{className:"text-indigo-600",children:[nt,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${nt}%`}})})]})]}),a.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[a.jsx(Os,{className:"w-3.5 h-3.5"})," ",Ne.status]}),!Ne.archived&&a.jsx(os,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Ne.id)})}),C&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:C.archived?a.jsx(Kv,{className:"w-6 h-6"}):a.jsx(pd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:C.archived?"Restore Project?":"Archive Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:C.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:C.title}),a.jsx("p",{className:"text-xs text-slate-500",children:c.find(Ne=>Ne.id===C.companyId)?.name||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>E(null),disabled:I===C.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ue(C.id),disabled:I===C.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:I===C.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),C.archived?"Restoring...":"Archiving..."]}):C.archived?"Restore Project":"Archive Project"})]})]})}),M&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:M.title}),a.jsx("p",{className:"text-xs text-slate-500",children:c.find(Ne=>Ne.id===M.companyId)?.name||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>q(null),disabled:A===M.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ce(M.id),disabled:A===M.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A===M.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),G.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:G.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),ee(!0)},disabled:te,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[te?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ur,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>Z([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),Q&&G.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",G.length," Project",G.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ne=>G.includes(Ne.id)).slice(0,5).map(Ne=>{const Re=c.find(nt=>nt.id===Ne.companyId);return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(Zf,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ne.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Re?.name||"Standalone Project"})]})]},Ne.id)}),G.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",G.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ee(!1),disabled:te,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Y,disabled:te,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:te?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${G.length} Project${G.length>1?"s":""}`})]})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!W&&!z&&(m(null),O(!1))}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[a.jsx("button",{onClick:()=>{!W&&!z&&(m(null),O(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:z,children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Zf,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[W?a.jsxs("div",{children:[a.jsx("input",{type:"text",value:ie.title,onChange:Ne=>ce(Re=>({...Re,title:Ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),a.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:d.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${d.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":d.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":d.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:d.status}),a.jsx("span",{className:"text-xs text-slate-400",children:c.find(Ne=>Ne.id===d.companyId)?.name||"Standalone Project"})]})]})]}),a.jsx("div",{className:"flex gap-3",children:W?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{O(!1),ce({title:d.title,description:d.description||"",companyId:d.companyId||"",status:d.status,engagement:d.engagement||"",startDate:ve(d.startDate),endDate:ve(d.endDate)})},disabled:z,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Ae,disabled:z||!ie.title.trim()||!ie.engagement.trim()||!ie.startDate.trim()||!ie.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:z?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"}),"Edit Project"]})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Es,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),a.jsx("div",{className:"space-y-4",children:W?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ie.engagement,onChange:Ne=>ce(Re=>({...Re,engagement:Ne.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.startDate,onChange:Ne=>{if(ce(Re=>({...Re,startDate:Ne.target.value})),Ne.target.value&&ie.endDate){const Re=new Date(Ne.target.value),nt=new Date(ie.endDate);!isNaN(Re.getTime())&&!isNaN(nt.getTime())&&Re>=nt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.endDate,onChange:Ne=>{if(ce(Re=>({...Re,endDate:Ne.target.value})),ie.startDate&&Ne.target.value){const Re=new Date(ie.startDate),nt=new Date(Ne.target.value);!isNaN(Re.getTime())&&!isNaN(nt.getTime())&&Re>=nt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{value:ie.description,onChange:Ne=>ce(Re=>({...Re,description:Ne.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),a.jsxs("select",{value:ie.companyId,onChange:Ne=>ce(Re=>({...Re,companyId:Ne.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"Standalone Project"}),c.map(Ne=>a.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.title})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.engagement||""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.startDate?new Date(d.startDate).toLocaleDateString():""})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.endDate?new Date(d.endDate).toLocaleDateString():""})]})]}),d.description&&a.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:d.description})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Ne=>Ne.id===d.companyId)?.name||"Standalone Project"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),a.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[P(d.id),"%"]})]})]}),d.noteImage&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ka,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),d.noteImageMimeType?.includes("pdf")?a.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:a.jsx(Ka,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:d.noteImageName||"Document.pdf"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),a.jsxs("button",{onClick:()=>{const Ne=window.open();Ne&&Ne.document.write(`
                                        <html>
                                          <head>
                                            <title>${d.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${d.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[a.jsx(wd,{className:"w-4 h-4"}),"View PDF"]})]})}):a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:d.noteImage,alt:d.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{he(d.noteImage||""),K(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:a.jsx(wd,{className:"w-5 h-5 text-indigo-600"})})})]})]})]})})]}),!W&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Os,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Ne=>a.jsxs("button",{onClick:()=>pe(Ne),disabled:z||d.status===Ne,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${d.status===Ne?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[d.status===Ne?a.jsx(yn,{className:"w-4 h-4"}):a.jsx(bd,{className:"w-4 h-4"}),Ne]},Ne))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(VB,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),a.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",d.id),e("tasks"),m(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",a.jsx(os,{className:"w-3 h-3"})]})]}),(()=>{const Ne=f.filter(Re=>Re.projectId===d.id);return Ne.length===0?a.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[a.jsx(Gv,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):a.jsx("div",{className:"space-y-2",children:Ne.map(Re=>{const nt=u.find(kt=>kt.id===Re.assigneeId),xt=De===Re.id;return a.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("button",{onClick:kt=>{kt.stopPropagation(),xt||ue(Re.id,Re.status)},disabled:xt,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:xt?a.jsx(wt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):Re.status==="Done"?a.jsx(yn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):a.jsx(bd,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),a.jsx("p",{className:`text-sm font-bold ${Re.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Re.title})]}),Re.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:Re.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${Re.priority==="High"?"bg-red-50 text-red-600":Re.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Re.priority}),a.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:Re.status}),Re.dueDate&&a.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[a.jsx(ha,{className:"w-3 h-3"}),Re.dueDate]})]})]}),nt&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:nt.name.charAt(0)})})]})},Re.id)})})})()]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):p.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(ai,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:p.map((Ne,Re)=>{const nt=new Date(Ne.createdAt),kt=new Date().getTime()-nt.getTime(),Me=Math.floor(kt/(1e3*60*60*24));let vt="";Me===0?vt="Today":Me===1?vt="Yesterday":Me<7?vt=`${Me} days ago`:Me<30?vt=`${Math.floor(Me/7)} week${Math.floor(Me/7)>1?"s":""} ago`:vt=`${Math.floor(Me/30)} month${Math.floor(Me/30)>1?"s":""} ago`;const ut=Ne.activityType==="email_linked",lt=ut?"border-indigo-600":"border-slate-200",pr=ut?"bg-indigo-600":"bg-slate-300",rr=ut?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${lt} shadow-xl flex items-center justify-center`,children:ut?a.jsx(ai,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${pr}`})}),a.jsxs("p",{className:`text-[10px] font-black ${rr} uppercase mb-1 tracking-widest`,children:[ut?"Email Linked":Ne.activityType||"Activity","  ",vt]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:Ne.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Ne.description||Ne.title}),Ne.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Ne.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Di,{className:"w-3 h-3"})," View Email"]})]},Ne.id||Re)})})]})]}),a.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:a.jsxs("button",{onClick:()=>{!W&&!z&&(m(null),O(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:z,children:[a.jsx(yn,{className:"w-5 h-5"})," Close"]})})]})]}),R&&a.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>K(!1)}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[a.jsx("button",{onClick:()=>K(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:a.jsx(ir,{className:"w-6 h-6"})}),a.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:a.jsx("img",{src:le,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Ne=>Ne.stopPropagation()})})]})]})]})},Cie=({onNavigate:e})=>{const{showSuccess:t,showError:r}=ba(),n=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[s,i]=U.useState([]),[o,l]=U.useState(!0),[c,u]=U.useState(""),[f,d]=U.useState(null),[m,p]=U.useState("date"),[y,v]=U.useState("desc"),[g,b]=U.useState([]),[w,j]=U.useState(!1),[N,S]=U.useState(!1),[P,A]=U.useState(null),[T,I]=U.useState([]),[B,C]=U.useState([]),[E,M]=U.useState("email"),[q,G]=U.useState(!1),[Z,te]=U.useState(!1),[ae,Q]=U.useState(null),[ee,W]=U.useState(!1),O=async()=>{try{W(!0);const ne=await One();console.log("[SATISFACTION] Template response:",ne),ne&&ne.success&&ne.data?Q(ne.data):(console.error("[SATISFACTION] Invalid response format:",ne),r(ne?.error?.message||ne?.message||"Failed to load survey template"))}catch(ne){console.error("[SATISFACTION] Error loading template:",ne),r(ne.message||"Failed to load survey template")}finally{W(!1)}};U.useEffect(()=>{Z&&!ae&&O()},[Z]),U.useEffect(()=>{z()},[]),U.useEffect(()=>{f&&H(f.id)},[f]);const z=async()=>{try{l(!0);const ne=await _ne(c);if(ne.success&&ne.data){const Ue=ne.data.map(Ce=>({companyId:Ce.companyId,companyName:Ce.company?.name||"Unknown Company",latestNpsScore:Ce.latestNpsScore,npsCategory:Ce.npsCategory,accountManagerId:Ce.company?.ownerId,accountManagerName:null,lastSurveyDate:Ce.lastSurveyDate,status:Ce.status||"not_yet_sent",satisfactionRecordId:Ce.id}));i(Ue)}}catch(ne){r(ne.message||"Failed to load satisfaction records")}finally{l(!1)}},H=async ne=>{try{j(!0);const Ue=await Ane(ne);Ue.success&&Ue.data&&b(Ue.data.surveys||[])}catch(Ue){r(Ue.message||"Failed to load record details")}finally{j(!1)}},R=ne=>ne==null?"text-slate-400":ne>=9?"text-green-600":ne>=7?"text-yellow-600":"text-red-600",K=ne=>ne==null?"bg-slate-100":ne>=9?"bg-green-50":ne>=7?"bg-yellow-50":"bg-red-50",le=ne=>{const Ce={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[ne];return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Ce.color}`,children:Ce.label})},he=U.useMemo(()=>[...s.filter(Ue=>Ue.companyName.toLowerCase().includes(c.toLowerCase()))].sort((Ue,Ce)=>{let de=0;if(m==="score"){const Y=Ue.latestNpsScore??-1,ve=Ce.latestNpsScore??-1;de=Y-ve}else if(m==="date"){const Y=Ue.lastSurveyDate?new Date(Ue.lastSurveyDate).getTime():0,ve=Ce.lastSurveyDate?new Date(Ce.lastSurveyDate).getTime():0;de=Y-ve}else m==="status"&&(de=Ue.status.localeCompare(Ce.status));return y==="asc"?de:-de}),[s,c,m,y]),ie=async()=>{if(!P||B.length===0){r("Please select a company and at least one contact");return}try{G(!0);let Ue=(await P7(P)).data?.satisfactionRecordId;Ue||(Ue=(await Cne({companyId:P,source:"manual"})).data.id);const Ce=await Tne({satisfactionRecordId:Ue,contactIds:B,deliveryMethod:E});if(E==="link"&&Ce.data?.surveyUrl){const de=Ce.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(de).then(()=>{t(`Survey link copied to clipboard! Share: ${de}`)}).catch(()=>{t(`Survey created! Copy this link: ${de}`)}):t(`Survey created! Copy this link: ${de}`)}else t("Survey sent successfully");S(!1),C([]),z()}catch(ne){r(ne.message||"Failed to send survey")}finally{G(!1)}},ce=async ne=>{A(ne),S(!0);try{const Ue=await Jp("",ne);if(Ue.success&&Ue.data){const Ce=Ue.data.filter(de=>de.email);I(Ce)}}catch(Ue){r(Ue.message||"Failed to load contacts")}},De=ne=>{if(!n)return!1;const Ue=n.role==="Admin",Ce=n.id===ne.accountManagerId;return Ue||Ce};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),a.jsxs("button",{onClick:()=>te(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[a.jsx(Oj,{className:"w-4 h-4"}),"Survey Builder"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search companies...",value:c,onChange:ne=>u(ne.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:m,onChange:ne=>p(ne.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Sort by Date"}),a.jsx("option",{value:"score",children:"Sort by Score"}),a.jsx("option",{value:"status",children:"Sort by Status"})]}),a.jsx("button",{onClick:()=>v(y==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:a.jsx(PB,{className:"w-4 h-4"})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):he.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(G0,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):a.jsx("div",{className:"space-y-4",children:he.map(ne=>a.jsx("div",{onClick:()=>{const Ue={id:ne.satisfactionRecordId,companyId:ne.companyId,createdAt:"",createdBy:"",source:"manual"};d(Ue)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:`w-16 h-16 rounded-xl ${K(ne.latestNpsScore)} flex items-center justify-center`,children:ne.latestNpsScore!==void 0&&ne.latestNpsScore!==null?a.jsx("span",{className:`text-2xl font-bold ${R(ne.latestNpsScore)}`,children:ne.latestNpsScore}):a.jsx(ZB,{className:"w-6 h-6 text-slate-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:ne.companyName}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[ne.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ne.npsCategory==="Promoter"?"bg-green-100 text-green-700":ne.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:ne.npsCategory}),le(ne.status),ne.lastSurveyDate&&a.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx(ha,{className:"w-3 h-3"}),new Date(ne.lastSurveyDate).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[De(ne)&&a.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),ce(ne.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx(nu,{className:"w-4 h-4"}),"Send Survey"]}),a.jsx(os,{className:"w-5 h-5 text-slate-400"})]})]})},ne.satisfactionRecordId))})}),f&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>d(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),a.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:w?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),g.length===0?a.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):a.jsx("div",{className:"space-y-4",children:g.map(ne=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",new Date(ne.sentAt).toLocaleDateString()]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ne.status==="completed"?"bg-green-100 text-green-700":ne.status==="sent"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-700"}`,children:ne.status})]}),a.jsxs("div",{className:"text-xs text-slate-500",children:[ne.recipients?.length||0," recipient(s)  ",ne.responses?.length||0," response(s)"]}),ne.responses&&ne.responses.length>0&&a.jsx("div",{className:"mt-4 space-y-3",children:ne.responses.map(Ue=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",Ue.npsScore]}),a.jsx("span",{className:"text-xs text-slate-500",children:new Date(Ue.submittedAt).toLocaleDateString()})]}),Ue.answers.map((Ce,de)=>Ce.questionText&&Ce.answer&&a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsx("span",{className:"font-medium text-slate-700",children:Ce.questionText}),a.jsx("p",{className:"text-slate-600 mt-1",children:String(Ce.answer)})]},de))]},Ue.id))})]},ne.id))})]})})})]})]}),N&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>S(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:ne=>ne.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-slate-200",children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),a.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:T.map(ne=>a.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:B.includes(ne.id),onChange:Ue=>{Ue.target.checked?C([...B,ne.id]):C(B.filter(Ce=>Ce!==ne.id))},className:"w-4 h-4 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:ne.name}),a.jsx("div",{className:"text-xs text-slate-500",children:ne.email})]})]},ne.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:E==="email",onChange:()=>M("email"),className:"w-4 h-4 text-indigo-600"}),a.jsx(ai,{className:"w-4 h-4"}),a.jsx("span",{children:"Email"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:E==="link",onChange:()=>M("link"),className:"w-4 h-4 text-indigo-600"}),a.jsx(Ej,{className:"w-4 h-4"}),a.jsx("span",{children:"Copy Link"})]})]}),E==="link"&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:ie,disabled:q||B.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[q&&a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),Z&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>te(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:ne=>ne.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),a.jsx("button",{onClick:()=>te(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:ee?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ae?a.jsx(Eie,{template:ae,setTemplate:Q,onClose:()=>te(!1),showSuccess:t,showError:r}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ea,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),a.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),a.jsx("button",{onClick:()=>{O()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},Eie=({template:e,setTemplate:t,onClose:r,showSuccess:n,showError:s})=>{const[i,o]=U.useState(e),[l,c]=U.useState(!1),u=async()=>{try{c(!0),(await Pne({questions:i.questions,name:i.name})).success&&(n("Survey template updated successfully"),t(i),r())}catch(y){s(y.message||"Failed to update survey template")}finally{c(!1)}},f=()=>{const y={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,y]})},d=y=>{const v=i.questions.find(g=>g.type==="nps");if(v&&v.id===y){s("Cannot delete the NPS question (Q1)");return}o({...i,questions:i.questions.filter(g=>g.id!==y).map((g,b)=>({...g,order:b+1}))})},m=(y,v)=>{o({...i,questions:i.questions.map(g=>g.id===y?{...g,...v}:g)})},p=(y,v)=>{const g=[...i.questions],b=g.findIndex(P=>P.id===y);if(b===-1)return;const w=g.find(P=>P.type==="nps"),j=g.findIndex(P=>P.type==="nps");if(w&&w.id===y){s("NPS question must remain first");return}if(v==="up"&&b<=j+1){s("Cannot move question before NPS question");return}const N=v==="up"?b-1:b+1;if(N<0||N>=g.length)return;[g[b],g[N]]=[g[N],g[b]];const S=g.map((P,A)=>({...P,order:A+1}));o({...i,questions:S})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:i.name||"",onChange:y=>o({...i,name:y.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),a.jsxs("button",{onClick:f,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"Add Question"]})]}),a.jsx("div",{className:"space-y-4",children:i.questions.map((y,v)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",y.order]}),a.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&y.type!=="nps"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>p(y.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:a.jsx(jd,{className:"w-4 h-4 text-slate-500"})}),a.jsx("button",{onClick:()=>p(y.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:a.jsx(uU,{className:"w-4 h-4 text-slate-500"})})]}),y.type!=="nps"&&a.jsx("button",{onClick:()=>d(y.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:a.jsx(ir,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),a.jsxs("select",{value:y.type,onChange:g=>m(y.id,{type:g.target.value}),disabled:y.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[a.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),a.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),a.jsx("option",{value:"free_text",children:"Free Text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),a.jsx("input",{type:"text",value:y.text,onChange:g=>m(y.id,{text:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),y.type==="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Options (one per line)"}),a.jsx("textarea",{value:y.options?.join(`
`)||"",onChange:g=>m(y.id,{options:g.target.value.split(`
`).filter(b=>b.trim())}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",rows:4,placeholder:`Option 1
Option 2
Option 3`})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:y.required,onChange:g=>m(y.id,{required:g.target.checked}),disabled:y.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),a.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},y.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:u,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},Tie=({surveyId:e})=>{const[t,r]=U.useState(null),[n,s]=U.useState(!0),[i,o]=U.useState(!1),[l,c]=U.useState(!1),[u,f]=U.useState(null),[d,m]=U.useState({}),[p,y]=U.useState(null);U.useEffect(()=>{v()},[e]);const v=async()=>{try{s(!0);const w=await Ene(e);if(w.success&&w.data){r(w.data);const j={};w.data.templateSnapshot.forEach(P=>{P.type==="nps"?j[P.id]=null:(P.type,j[P.id]="")}),m(j);const S=new URLSearchParams(window.location.search).get("contact");S?y(S):w.data.recipients&&w.data.recipients.length>0&&y(w.data.recipients[0].contactId)}else f("Survey not found")}catch(w){f(w.message||"Failed to load survey")}finally{s(!1)}},g=(w,j)=>{m(N=>({...N,[w]:j}))},b=async()=>{if(!p){f("Contact information is missing");return}const w=t.templateSnapshot.find(j=>j.type==="nps");if(w&&(d[w.id]===null||d[w.id]===void 0)){f("Please answer the NPS question (required)");return}for(const j of t.templateSnapshot)if(j.required&&(!d[j.id]||d[j.id]==="")){f(`Please answer: ${j.text}`);return}try{o(!0),f(null);const j=Object.entries(d).filter(([N,S])=>S!==null&&S!=="").map(([N,S])=>({questionId:N,answer:S}));await Ine(e,{contactId:p,answers:j}),c(!0)}catch(j){f(j.message||"Failed to submit survey")}finally{o(!1)}};return n?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):u&&!t?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx(ea,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),a.jsx("p",{className:"text-slate-600",children:u})]})}):l?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[a.jsx(yn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),a.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(w=>w.type==="nps"),a.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),a.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),u&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:u})}),a.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((w,j)=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[w.text,w.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),w.type==="nps"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>a.jsx("button",{type:"button",onClick:()=>g(w.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${d[w.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[a.jsx("span",{children:"Not at all likely"}),a.jsx("span",{children:"Extremely likely"})]})]}),w.type==="multiple_choice"&&a.jsx("div",{className:"space-y-2",children:w.options?.map(N=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:w.id,value:N,checked:d[w.id]===N,onChange:S=>g(w.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-700",children:N})]},N))}),w.type==="free_text"&&a.jsx("textarea",{value:d[w.id]||"",onChange:N=>g(w.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},w.id))}),a.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:a.jsx("button",{onClick:b,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};var ey={};ey.version="0.18.5";var rM=1252,Oie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],$3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},z3=function(e){Oie.indexOf(e)!=-1&&(rM=$3[0]=e)};function Pie(){z3(1252)}var Ru=function(e){z3(e)};function H3(){Ru(1200),Pie()}function uI(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Iie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function nM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Fm=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Iie(e.slice(2)):t==254&&r==255?nM(e.slice(2)):t==65279?e.slice(1):e},xv=function(t){return String.fromCharCode(t)},dI=function(t){return String.fromCharCode(t)},Hx,Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Wx(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,s=e.charCodeAt(u++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Yf.charAt(i)+Yf.charAt(o)+Yf.charAt(l)+Yf.charAt(c);return t}function Nc(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Yf.indexOf(e.charAt(u++)),o=Yf.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Yf.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Yf.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var On=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),wf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function i0(e){return On?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function fI(e){return On?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var gc=function(t){return On?wf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function eb(e){if(typeof ArrayBuffer>"u")return gc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function v0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Die(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function W3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return W3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zi=On?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:wf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Lie(e){for(var t=[],r=0,n=e.length+250,s=i0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=i0(65535),n=65530)}return t.push(s.slice(0,r)),Zi(t)}var kl=/\u0000/g,Mm=/[\u0001-\u0006]/g;function op(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Bu(e,t){var r=""+e;return r.length>=t?r:$s("0",t-r.length)+r}function V3(e,t){var r=""+e;return r.length>=t?r:$s(" ",t-r.length)+r}function ty(e,t){var r=""+e;return r.length>=t?r:r+$s(" ",t-r.length)}function Fie(e,t){var r=""+Math.round(e);return r.length>=t?r:$s("0",t-r.length)+r}function Mie(e,t){var r=""+e;return r.length>=t?r:$s("0",t-r.length)+r}var hI=Math.pow(2,32);function Hh(e,t){if(e>hI||e<-hI)return Fie(e,t);var r=Math.round(e);return Mie(r,t)}function ry(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var pI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],JN=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Rie(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},mI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Bie={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ny(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,u=0,f=0,d=Math.floor(s);u<t&&(d=Math.floor(s),l=d*o+i,f=d*u+c,!(s-d<5e-8));)s=1/(s-d),i=o,o=l,c=u,u=f;if(f>t&&(u>t?(f=c,l=i):(f=u,l=o)),!r)return[0,n*l,f];var m=Math.floor(n*l/f);return[m,n*l-m*f,f]}function z0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Wie(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var aM=new Date(1899,11,31,0,0,0),Uie=aM.getTime(),qie=new Date(1900,2,1,0,0,0);function sM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=qie&&(r+=1440*60*1e3),(r-(Uie+(e.getTimezoneOffset()-aM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function G3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function $ie(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function zie(e){var t=e<0?12:11,r=G3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Hie(e){var t=G3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Vx(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=zie(e):t===10?r=e.toFixed(10).substr(0,12):r=Hie(e),G3($ie(r.toUpperCase()))}function oh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Vx(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return cu(14,sM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Wie(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Vie(e,t,r,n){var s="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return JN[r.m-1][1];case 5:return JN[r.m-1][0];default:return JN[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return pI[r.q][0];default:return pI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Bu(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Bu(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var f=u>0?Bu(c,u):"";return f}function Jf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var iM=/%/g;function Gie(e,t,r){var n=t.replace(iM,""),s=t.length-n.length;return cf(e,n,r*Math.pow(10,2*s))+$s("%",s)}function Kie(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return cf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function oM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+oM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var lM=/# (\?+)( ?)\/( ?)(\d+)/;function Xie(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?$s(" ",e[1].length+1+e[4].length):V3(o,e[1].length)+e[2]+"/"+e[3]+Bu(l,e[4].length))}function Yie(e,t,r){return r+(t===0?"":""+t)+$s(" ",e[1].length+2+e[4].length)}var cM=/^#*0*\.([0#]+)/,uM=/\).*[0#]/,dM=/\(###\) ###\\?-####/;function vl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function xI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function gI(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Jie(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Qie(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Yc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(uM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yc("n",n,r):"("+Yc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Kie(e,t,r);if(t.indexOf("%")!==-1)return Gie(e,t,r);if(t.indexOf("E")!==-1)return oM(t,r);if(t.charCodeAt(0)===36)return"$"+Yc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Hh(c,t.length);if(t.match(/^[#?]+$/))return s=Hh(r,0),s==="0"&&(s=""),s.length>t.length?s:vl(t.substr(0,t.length-s.length))+s;if(i=t.match(lM))return Xie(i,c,u);if(t.match(/^#+0+$/))return u+Hh(c,t.length-t.indexOf("0"));if(i=t.match(cM))return s=xI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+vl(i[1])).replace(/\.$/,"."+vl(i[1])).replace(/\.(\d*)$/,function(y,v){return"."+v+$s("0",vl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+xI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Jf(Hh(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yc(e,t,-r):Jf(""+(Math.floor(r)+Jie(r,i[1].length)))+"."+Bu(gI(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Yc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=op(Yc(e,t.replace(/[\\-]/g,""),r)),o=0,op(op(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(dM))return s=Yc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ny(c,Math.pow(10,o)-1,!1),s=""+u,f=cf("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=ty(l[2],o),f.length<i[4].length&&(f=vl(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ny(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?V3(l[1],o)+i[2]+"/"+i[3]+ty(l[2],o):$s(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Hh(r,0),t.length<=s.length?s:vl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,m=t.length-s.length-d;return vl(t.substr(0,d)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=gI(r,i[1].length),r<0?"-"+Yc(e,t,-r):Jf(Qie(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Bu(0,3-y.length):"")+y})+"."+Bu(o,i[1].length);switch(t){case"###,##0.00":return Yc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Jf(Hh(c,0));return p!=="0"?u+p:"";case"###,###.00":return Yc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Yc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Zie(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return cf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function eoe(e,t,r){var n=t.replace(iM,""),s=t.length-n.length;return cf(e,n,r*Math.pow(10,2*s))+$s("%",s)}function fM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+fM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function cd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(uM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cd("n",n,r):"("+cd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Zie(e,t,r);if(t.indexOf("%")!==-1)return eoe(e,t,r);if(t.indexOf("E")!==-1)return fM(t,r);if(t.charCodeAt(0)===36)return"$"+cd(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Bu(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:vl(t.substr(0,t.length-s.length))+s;if(i=t.match(lM))return Yie(i,c,u);if(t.match(/^#+0+$/))return u+Bu(c,t.length-t.indexOf("0"));if(i=t.match(cM))return s=(""+r).replace(/^([^\.]+)$/,"$1."+vl(i[1])).replace(/\.$/,"."+vl(i[1])),s=s.replace(/\.(\d*)$/,function(y,v){return"."+v+$s("0",vl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Jf(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cd(e,t,-r):Jf(""+r)+"."+$s("0",i[1].length);if(i=t.match(/^#,#*,#0/))return cd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=op(cd(e,t.replace(/[\\-]/g,""),r)),o=0,op(op(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(dM))return s=cd(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ny(c,Math.pow(10,o)-1,!1),s=""+u,f=cf("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=ty(l[2],o),f.length<i[4].length&&(f=vl(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ny(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?V3(l[1],o)+i[2]+"/"+i[3]+ty(l[2],o):$s(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:vl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,m=t.length-s.length-d;return vl(t.substr(0,d)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+cd(e,t,-r):Jf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Bu(0,3-y.length):"")+y})+"."+Bu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Jf(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return cd(e,t.slice(0,t.lastIndexOf(".")),r)+vl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function cf(e,t,r){return(r|0)===r?cd(e,t,r):Yc(e,t,r)}function toe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var hM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function em(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":ry(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(hM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function roe(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",u,f,d,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!ry(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(d=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=z0(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=z0(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(u==null&&(u=z0(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",o+=5,m="h"):(v.t="t",++o),u==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(hM)){if(u==null&&(u=z0(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",em(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,b=0,w;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",g<1&&(g=1);break;case"s":(w=s[o].v.match(/\.0+$/))&&(b=Math.max(b,w[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var j="",N;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Vie(s[o].t.charCodeAt(0),s[o].v,u,b),s[o].t="t";break;case"n":case"?":for(N=o+1;s[N]!=null&&((l=s[N].t)==="?"||l==="D"||(l===" "||l==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[o].v+=s[N].v,s[N]={v:"",t:";"},++N;j+=s[o].v,o=N-1;break;case"G":s[o].t="t",s[o].v=oh(t,r);break}var S="",P,A;if(j.length>0){j.charCodeAt(0)==40?(P=t<0&&j.charCodeAt(0)===45?-t:t,A=cf("n",j,P)):(P=t<0&&n>1?-t:t,A=cf("n",j,P),P<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),N=A.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var I=s.length;if(T===s.length&&A.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(N>=s[o].v.length-1?(N-=s[o].v.length,s[o].v=A.substr(N+1,s[o].v.length)):N<0?s[o].v="":(s[o].v=A.substr(0,N+1),N=-1),s[o].t="t",I=o);N>=0&&I<s.length&&(s[I].v=A.substr(0,N+1)+s[I].v)}else if(T!==s.length&&A.indexOf("E")===-1){for(N=A.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(f+1);f>=0;--f)N>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(S=A.charAt(N--)+S);s[o].v=S,s[o].t="t",I=o}for(N>=0&&I<s.length&&(s[I].v=A.substr(0,N+1)+s[I].v),N=A.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,f);f<s[o].v.length;++f)N<A.length&&(S+=A.charAt(N++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(P=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=cf(s[o].t,s[o].v,P),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var vI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function yI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function noe(e,t){var r=toe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(vI),l=r[1].match(vI);return yI(t,o)?[n,r[0]]:yI(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function cu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Qr)[e],n==null&&(n=r.table&&r.table[mI[e]]||Qr[mI[e]]),n==null&&(n=Bie[e]||"General");break}if(ry(n,0))return oh(t,r);t instanceof Date&&(t=sM(t,r.date1904));var s=noe(n,t);if(ry(s[1]))return oh(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return roe(s[1],t,r,s[0])}function uf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Qr[r]==null){t<0&&(t=r);continue}if(Qr[r]==e){t=r;break}}t<0&&(t=391)}return Qr[t]=e,t}function tb(e){for(var t=0;t!=392;++t)e[t]!==void 0&&uf(e[t],t)}function tm(){Qr=Rie()}var aoe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},pM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function soe(e){var t=typeof e=="number"?Qr[e]:e;return t=t.replace(pM,"(\\d+)"),new RegExp("^"+t+"$")}function ioe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(pM)||[]).forEach(function(d,m){var p=parseInt(r[m+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&s==-1&&i==-1?f:u+"T"+f}var ooe=(function(){var e={};e.version="1.2.0";function t(){for(var A=0,T=new Array(256),I=0;I!=256;++I)A=I,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,T[I]=A;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(A){var T=0,I=0,B=0,C=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)C[B]=A[B];for(B=0;B!=256;++B)for(I=A[B],T=256+B;T<4096;T+=256)I=C[T]=I>>>8^A[I&255];var E=[];for(B=1;B!=16;++B)E[B-1]=typeof Int32Array<"u"?C.subarray(B*256,B*256+256):C.slice(B*256,B*256+256);return E}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],u=s[4],f=s[5],d=s[6],m=s[7],p=s[8],y=s[9],v=s[10],g=s[11],b=s[12],w=s[13],j=s[14];function N(A,T){for(var I=T^-1,B=0,C=A.length;B<C;)I=I>>>8^r[(I^A.charCodeAt(B++))&255];return~I}function S(A,T){for(var I=T^-1,B=A.length-15,C=0;C<B;)I=j[A[C++]^I&255]^w[A[C++]^I>>8&255]^b[A[C++]^I>>16&255]^g[A[C++]^I>>>24]^v[A[C++]]^y[A[C++]]^p[A[C++]]^m[A[C++]]^d[A[C++]]^f[A[C++]]^u[A[C++]]^c[A[C++]]^l[A[C++]]^o[A[C++]]^i[A[C++]]^r[A[C++]];for(B+=15;C<B;)I=I>>>8^r[(I^A[C++])&255];return~I}function P(A,T){for(var I=T^-1,B=0,C=A.length,E=0,M=0;B<C;)E=A.charCodeAt(B++),E<128?I=I>>>8^r[(I^E)&255]:E<2048?(I=I>>>8^r[(I^(192|E>>6&31))&255],I=I>>>8^r[(I^(128|E&63))&255]):E>=55296&&E<57344?(E=(E&1023)+64,M=A.charCodeAt(B++)&1023,I=I>>>8^r[(I^(240|E>>8&7))&255],I=I>>>8^r[(I^(128|E>>2&63))&255],I=I>>>8^r[(I^(128|M>>6&15|(E&3)<<4))&255],I=I>>>8^r[(I^(128|M&63))&255]):(I=I>>>8^r[(I^(224|E>>12&15))&255],I=I>>>8^r[(I^(128|E>>6&63))&255],I=I>>>8^r[(I^(128|E&63))&255]);return~I}return e.table=r,e.bstr=N,e.buf=S,e.str=P,e})(),Hr=(function(){var t={};t.version="1.2.1";function r(re,me){for(var be=re.split("/"),_e=me.split("/"),Ee=0,Oe=0,Xe=Math.min(be.length,_e.length);Ee<Xe;++Ee){if(Oe=be[Ee].length-_e[Ee].length)return Oe;if(be[Ee]!=_e[Ee])return be[Ee]<_e[Ee]?-1:1}return be.length-_e.length}function n(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:n(re.slice(0,-1));var me=re.lastIndexOf("/");return me===-1?re:re.slice(0,me+1)}function s(re){if(re.charAt(re.length-1)=="/")return s(re.slice(0,-1));var me=re.lastIndexOf("/");return me===-1?re:re.slice(me+1)}function i(re,me){typeof me=="string"&&(me=new Date(me));var be=me.getHours();be=be<<6|me.getMinutes(),be=be<<5|me.getSeconds()>>>1,re.write_shift(2,be);var _e=me.getFullYear()-1980;_e=_e<<4|me.getMonth()+1,_e=_e<<5|me.getDate(),re.write_shift(2,_e)}function o(re){var me=re.read_shift(2)&65535,be=re.read_shift(2)&65535,_e=new Date,Ee=be&31;be>>>=5;var Oe=be&15;be>>>=4,_e.setMilliseconds(0),_e.setFullYear(be+1980),_e.setMonth(Oe-1),_e.setDate(Ee);var Xe=me&31;me>>>=5;var ct=me&63;return me>>>=6,_e.setHours(me),_e.setMinutes(ct),_e.setSeconds(Xe<<1),_e}function l(re){po(re,0);for(var me={},be=0;re.l<=re.length-4;){var _e=re.read_shift(2),Ee=re.read_shift(2),Oe=re.l+Ee,Xe={};_e===21589&&(be=re.read_shift(1),be&1&&(Xe.mtime=re.read_shift(4)),Ee>5&&(be&2&&(Xe.atime=re.read_shift(4)),be&4&&(Xe.ctime=re.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3))),re.l=Oe,me[_e]=Xe}return me}var c;function u(){return c||(c={})}function f(re,me){if(re[0]==80&&re[1]==75)return Yt(re,me);if((re[0]|32)==109&&(re[1]|32)==105)return Wn(re,me);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var be=3,_e=512,Ee=0,Oe=0,Xe=0,ct=0,Ve=0,Je=[],He=re.slice(0,512);po(He,0);var Le=d(He);switch(be=Le[0],be){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Le[1]==0)return Yt(re,me);default:throw new Error("Major Version: Expected 3 or 4 saw "+be)}_e!==512&&(He=re.slice(0,_e),po(He,28));var tt=re.slice(0,_e);m(He,be);var ht=He.read_shift(4,"i");if(be===3&&ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ht);He.l+=4,Xe=He.read_shift(4,"i"),He.l+=4,He.chk("00100000","Mini Stream Cutoff Size: "),ct=He.read_shift(4,"i"),Ee=He.read_shift(4,"i"),Ve=He.read_shift(4,"i"),Oe=He.read_shift(4,"i");for(var Pt=-1,Mt=0;Mt<109&&(Pt=He.read_shift(4,"i"),!(Pt<0));++Mt)Je[Mt]=Pt;var vr=p(re,_e);g(Ve,Oe,vr,_e,Je);var zr=w(vr,Xe,Je,_e);zr[Xe].name="!Directory",Ee>0&&ct!==M&&(zr[ct].name="!MiniFAT"),zr[Je[0]].name="!FAT",zr.fat_addrs=Je,zr.ssz=_e;var on={},Mn=[],ps=[],xn=[];j(Xe,zr,vr,Mn,Ee,on,ps,ct),y(ps,xn,Mn),Mn.shift();var wa={FileIndex:ps,FullPaths:xn};return me&&me.raw&&(wa.raw={header:tt,sectors:vr}),wa}function d(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(q,"Header Signature: "),re.l+=16;var me=re.read_shift(2,"u");return[re.read_shift(2,"u"),me]}function m(re,me){var be=9;switch(re.l+=2,be=re.read_shift(2)){case 9:if(me!=3)throw new Error("Sector Shift: Expected 9 saw "+be);break;case 12:if(me!=4)throw new Error("Sector Shift: Expected 12 saw "+be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+be)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function p(re,me){for(var be=Math.ceil(re.length/me)-1,_e=[],Ee=1;Ee<be;++Ee)_e[Ee-1]=re.slice(Ee*me,(Ee+1)*me);return _e[be-1]=re.slice(be*me),_e}function y(re,me,be){for(var _e=0,Ee=0,Oe=0,Xe=0,ct=0,Ve=be.length,Je=[],He=[];_e<Ve;++_e)Je[_e]=He[_e]=_e,me[_e]=be[_e];for(;ct<He.length;++ct)_e=He[ct],Ee=re[_e].L,Oe=re[_e].R,Xe=re[_e].C,Je[_e]===_e&&(Ee!==-1&&Je[Ee]!==Ee&&(Je[_e]=Je[Ee]),Oe!==-1&&Je[Oe]!==Oe&&(Je[_e]=Je[Oe])),Xe!==-1&&(Je[Xe]=_e),Ee!==-1&&_e!=Je[_e]&&(Je[Ee]=Je[_e],He.lastIndexOf(Ee)<ct&&He.push(Ee)),Oe!==-1&&_e!=Je[_e]&&(Je[Oe]=Je[_e],He.lastIndexOf(Oe)<ct&&He.push(Oe));for(_e=1;_e<Ve;++_e)Je[_e]===_e&&(Oe!==-1&&Je[Oe]!==Oe?Je[_e]=Je[Oe]:Ee!==-1&&Je[Ee]!==Ee&&(Je[_e]=Je[Ee]));for(_e=1;_e<Ve;++_e)if(re[_e].type!==0){if(ct=_e,ct!=Je[ct])do ct=Je[ct],me[_e]=me[ct]+"/"+me[_e];while(ct!==0&&Je[ct]!==-1&&ct!=Je[ct]);Je[_e]=-1}for(me[0]+="/",_e=1;_e<Ve;++_e)re[_e].type!==2&&(me[_e]+="/")}function v(re,me,be){for(var _e=re.start,Ee=re.size,Oe=[],Xe=_e;be&&Ee>0&&Xe>=0;)Oe.push(me.slice(Xe*E,Xe*E+E)),Ee-=E,Xe=L0(be,Xe*4);return Oe.length===0?Ft(0):Zi(Oe).slice(0,re.size)}function g(re,me,be,_e,Ee){var Oe=M;if(re===M){if(me!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var Xe=be[re],ct=(_e>>>2)-1;if(!Xe)return;for(var Ve=0;Ve<ct&&(Oe=L0(Xe,Ve*4))!==M;++Ve)Ee.push(Oe);g(L0(Xe,_e-4),me-1,be,_e,Ee)}}function b(re,me,be,_e,Ee){var Oe=[],Xe=[];Ee||(Ee=[]);var ct=_e-1,Ve=0,Je=0;for(Ve=me;Ve>=0;){Ee[Ve]=!0,Oe[Oe.length]=Ve,Xe.push(re[Ve]);var He=be[Math.floor(Ve*4/_e)];if(Je=Ve*4&ct,_e<4+Je)throw new Error("FAT boundary crossed: "+Ve+" 4 "+_e);if(!re[He])break;Ve=L0(re[He],Je)}return{nodes:Oe,data:OI([Xe])}}function w(re,me,be,_e){var Ee=re.length,Oe=[],Xe=[],ct=[],Ve=[],Je=_e-1,He=0,Le=0,tt=0,ht=0;for(He=0;He<Ee;++He)if(ct=[],tt=He+me,tt>=Ee&&(tt-=Ee),!Xe[tt]){Ve=[];var Pt=[];for(Le=tt;Le>=0;){Pt[Le]=!0,Xe[Le]=!0,ct[ct.length]=Le,Ve.push(re[Le]);var Mt=be[Math.floor(Le*4/_e)];if(ht=Le*4&Je,_e<4+ht)throw new Error("FAT boundary crossed: "+Le+" 4 "+_e);if(!re[Mt]||(Le=L0(re[Mt],ht),Pt[Le]))break}Oe[tt]={nodes:ct,data:OI([Ve])}}return Oe}function j(re,me,be,_e,Ee,Oe,Xe,ct){for(var Ve=0,Je=_e.length?2:0,He=me[re].data,Le=0,tt=0,ht;Le<He.length;Le+=128){var Pt=He.slice(Le,Le+128);po(Pt,64),tt=Pt.read_shift(2),ht=eS(Pt,0,tt-Je),_e.push(ht);var Mt={name:ht,type:Pt.read_shift(1),color:Pt.read_shift(1),L:Pt.read_shift(4,"i"),R:Pt.read_shift(4,"i"),C:Pt.read_shift(4,"i"),clsid:Pt.read_shift(16),state:Pt.read_shift(4,"i"),start:0,size:0},vr=Pt.read_shift(2)+Pt.read_shift(2)+Pt.read_shift(2)+Pt.read_shift(2);vr!==0&&(Mt.ct=N(Pt,Pt.l-8));var zr=Pt.read_shift(2)+Pt.read_shift(2)+Pt.read_shift(2)+Pt.read_shift(2);zr!==0&&(Mt.mt=N(Pt,Pt.l-8)),Mt.start=Pt.read_shift(4,"i"),Mt.size=Pt.read_shift(4,"i"),Mt.size<0&&Mt.start<0&&(Mt.size=Mt.type=0,Mt.start=M,Mt.name=""),Mt.type===5?(Ve=Mt.start,Ee>0&&Ve!==M&&(me[Ve].name="!StreamData")):Mt.size>=4096?(Mt.storage="fat",me[Mt.start]===void 0&&(me[Mt.start]=b(be,Mt.start,me.fat_addrs,me.ssz)),me[Mt.start].name=Mt.name,Mt.content=me[Mt.start].data.slice(0,Mt.size)):(Mt.storage="minifat",Mt.size<0?Mt.size=0:Ve!==M&&Mt.start!==M&&me[Ve]&&(Mt.content=v(Mt,me[Ve].data,(me[ct]||{}).data))),Mt.content&&po(Mt.content,0),Oe[ht]=Mt,Xe.push(Mt)}}function N(re,me){return new Date((mc(re,me+4)/1e7*Math.pow(2,32)+mc(re,me)/1e7-11644473600)*1e3)}function S(re,me){return u(),f(c.readFileSync(re),me)}function P(re,me){var be=me&&me.type;switch(be||On&&Buffer.isBuffer(re)&&(be="buffer"),be||"base64"){case"file":return S(re,me);case"base64":return f(gc(Nc(re)),me);case"binary":return f(gc(re),me)}return f(re,me)}function A(re,me){var be=me||{},_e=be.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=_e+"/",re.FileIndex[0]={name:_e,type:5}),be.CLSID&&(re.FileIndex[0].clsid=be.CLSID),T(re)}function T(re){var me="Sh33tJ5";if(!Hr.find(re,"/"+me)){var be=Ft(4);be[0]=55,be[1]=be[3]=50,be[2]=54,re.FileIndex.push({name:me,type:2,content:be,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+me),I(re)}}function I(re,me){A(re);for(var be=!1,_e=!1,Ee=re.FullPaths.length-1;Ee>=0;--Ee){var Oe=re.FileIndex[Ee];switch(Oe.type){case 0:_e?be=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(be=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(be=!0);break;default:be=!0;break}}if(!(!be&&!me)){var Xe=new Date(1987,1,19),ct=0,Ve=Object.create?Object.create(null):{},Je=[];for(Ee=0;Ee<re.FullPaths.length;++Ee)Ve[re.FullPaths[Ee]]=!0,re.FileIndex[Ee].type!==0&&Je.push([re.FullPaths[Ee],re.FileIndex[Ee]]);for(Ee=0;Ee<Je.length;++Ee){var He=n(Je[Ee][0]);_e=Ve[He],_e||(Je.push([He,{name:s(He).replace("/",""),type:1,clsid:Z,ct:Xe,mt:Xe,content:null}]),Ve[He]=!0)}for(Je.sort(function(ht,Pt){return r(ht[0],Pt[0])}),re.FullPaths=[],re.FileIndex=[],Ee=0;Ee<Je.length;++Ee)re.FullPaths[Ee]=Je[Ee][0],re.FileIndex[Ee]=Je[Ee][1];for(Ee=0;Ee<Je.length;++Ee){var Le=re.FileIndex[Ee],tt=re.FullPaths[Ee];if(Le.name=s(tt).replace("/",""),Le.L=Le.R=Le.C=-(Le.color=1),Le.size=Le.content?Le.content.length:0,Le.start=0,Le.clsid=Le.clsid||Z,Ee===0)Le.C=Je.length>1?1:-1,Le.size=0,Le.type=5;else if(tt.slice(-1)=="/"){for(ct=Ee+1;ct<Je.length&&n(re.FullPaths[ct])!=tt;++ct);for(Le.C=ct>=Je.length?-1:ct,ct=Ee+1;ct<Je.length&&n(re.FullPaths[ct])!=n(tt);++ct);Le.R=ct>=Je.length?-1:ct,Le.type=1}else n(re.FullPaths[Ee+1]||"")==n(tt)&&(Le.R=Ee+1),Le.type=2}}}function B(re,me){var be=me||{};if(be.fileType=="mad")return or(re,be);if(I(re),be.fileType==="zip")return Cr(re,be);var _e=(function(ht){for(var Pt=0,Mt=0,vr=0;vr<ht.FileIndex.length;++vr){var zr=ht.FileIndex[vr];if(zr.content){var on=zr.content.length;on>0&&(on<4096?Pt+=on+63>>6:Mt+=on+511>>9)}}for(var Mn=ht.FullPaths.length+3>>2,ps=Pt+7>>3,xn=Pt+127>>7,wa=ps+Mt+Mn+xn,Pn=wa+127>>7,pa=Pn<=109?0:Math.ceil((Pn-109)/127);wa+Pn+pa+127>>7>Pn;)pa=++Pn<=109?0:Math.ceil((Pn-109)/127);var sa=[1,pa,Pn,xn,Mn,Mt,Pt,0];return ht.FileIndex[0].size=Pt<<6,sa[7]=(ht.FileIndex[0].start=sa[0]+sa[1]+sa[2]+sa[3]+sa[4]+sa[5])+(sa[6]+7>>3),sa})(re),Ee=Ft(_e[7]<<9),Oe=0,Xe=0;{for(Oe=0;Oe<8;++Oe)Ee.write_shift(1,G[Oe]);for(Oe=0;Oe<8;++Oe)Ee.write_shift(2,0);for(Ee.write_shift(2,62),Ee.write_shift(2,3),Ee.write_shift(2,65534),Ee.write_shift(2,9),Ee.write_shift(2,6),Oe=0;Oe<3;++Oe)Ee.write_shift(2,0);for(Ee.write_shift(4,0),Ee.write_shift(4,_e[2]),Ee.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Ee.write_shift(4,0),Ee.write_shift(4,4096),Ee.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:M),Ee.write_shift(4,_e[3]),Ee.write_shift(-4,_e[1]?_e[0]-1:M),Ee.write_shift(4,_e[1]),Oe=0;Oe<109;++Oe)Ee.write_shift(-4,Oe<_e[2]?_e[1]+Oe:-1)}if(_e[1])for(Xe=0;Xe<_e[1];++Xe){for(;Oe<236+Xe*127;++Oe)Ee.write_shift(-4,Oe<_e[2]?_e[1]+Oe:-1);Ee.write_shift(-4,Xe===_e[1]-1?M:Xe+1)}var ct=function(ht){for(Xe+=ht;Oe<Xe-1;++Oe)Ee.write_shift(-4,Oe+1);ht&&(++Oe,Ee.write_shift(-4,M))};for(Xe=Oe=0,Xe+=_e[1];Oe<Xe;++Oe)Ee.write_shift(-4,te.DIFSECT);for(Xe+=_e[2];Oe<Xe;++Oe)Ee.write_shift(-4,te.FATSECT);ct(_e[3]),ct(_e[4]);for(var Ve=0,Je=0,He=re.FileIndex[0];Ve<re.FileIndex.length;++Ve)He=re.FileIndex[Ve],He.content&&(Je=He.content.length,!(Je<4096)&&(He.start=Xe,ct(Je+511>>9)));for(ct(_e[6]+7>>3);Ee.l&511;)Ee.write_shift(-4,te.ENDOFCHAIN);for(Xe=Oe=0,Ve=0;Ve<re.FileIndex.length;++Ve)He=re.FileIndex[Ve],He.content&&(Je=He.content.length,!(!Je||Je>=4096)&&(He.start=Xe,ct(Je+63>>6)));for(;Ee.l&511;)Ee.write_shift(-4,te.ENDOFCHAIN);for(Oe=0;Oe<_e[4]<<2;++Oe){var Le=re.FullPaths[Oe];if(!Le||Le.length===0){for(Ve=0;Ve<17;++Ve)Ee.write_shift(4,0);for(Ve=0;Ve<3;++Ve)Ee.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)Ee.write_shift(4,0);continue}He=re.FileIndex[Oe],Oe===0&&(He.start=He.size?He.start-1:M);var tt=Oe===0&&be.root||He.name;if(Je=2*(tt.length+1),Ee.write_shift(64,tt,"utf16le"),Ee.write_shift(2,Je),Ee.write_shift(1,He.type),Ee.write_shift(1,He.color),Ee.write_shift(-4,He.L),Ee.write_shift(-4,He.R),Ee.write_shift(-4,He.C),He.clsid)Ee.write_shift(16,He.clsid,"hex");else for(Ve=0;Ve<4;++Ve)Ee.write_shift(4,0);Ee.write_shift(4,He.state||0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,He.start),Ee.write_shift(4,He.size),Ee.write_shift(4,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(He=re.FileIndex[Oe],He.size>=4096)if(Ee.l=He.start+1<<9,On&&Buffer.isBuffer(He.content))He.content.copy(Ee,Ee.l,0,He.size),Ee.l+=He.size+511&-512;else{for(Ve=0;Ve<He.size;++Ve)Ee.write_shift(1,He.content[Ve]);for(;Ve&511;++Ve)Ee.write_shift(1,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(He=re.FileIndex[Oe],He.size>0&&He.size<4096)if(On&&Buffer.isBuffer(He.content))He.content.copy(Ee,Ee.l,0,He.size),Ee.l+=He.size+63&-64;else{for(Ve=0;Ve<He.size;++Ve)Ee.write_shift(1,He.content[Ve]);for(;Ve&63;++Ve)Ee.write_shift(1,0)}if(On)Ee.l=Ee.length;else for(;Ee.l<Ee.length;)Ee.write_shift(1,0);return Ee}function C(re,me){var be=re.FullPaths.map(function(Ve){return Ve.toUpperCase()}),_e=be.map(function(Ve){var Je=Ve.split("/");return Je[Je.length-(Ve.slice(-1)=="/"?2:1)]}),Ee=!1;me.charCodeAt(0)===47?(Ee=!0,me=be[0].slice(0,-1)+me):Ee=me.indexOf("/")!==-1;var Oe=me.toUpperCase(),Xe=Ee===!0?be.indexOf(Oe):_e.indexOf(Oe);if(Xe!==-1)return re.FileIndex[Xe];var ct=!Oe.match(Mm);for(Oe=Oe.replace(kl,""),ct&&(Oe=Oe.replace(Mm,"!")),Xe=0;Xe<be.length;++Xe)if((ct?be[Xe].replace(Mm,"!"):be[Xe]).replace(kl,"")==Oe||(ct?_e[Xe].replace(Mm,"!"):_e[Xe]).replace(kl,"")==Oe)return re.FileIndex[Xe];return null}var E=64,M=-2,q="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(re,me,be){u();var _e=B(re,be);c.writeFileSync(me,_e)}function Q(re){for(var me=new Array(re.length),be=0;be<re.length;++be)me[be]=String.fromCharCode(re[be]);return me.join("")}function ee(re,me){var be=B(re,me);switch(me&&me.type||"buffer"){case"file":return u(),c.writeFileSync(me.filename,be),be;case"binary":return typeof be=="string"?be:Q(be);case"base64":return Wx(typeof be=="string"?be:Q(be));case"buffer":if(On)return Buffer.isBuffer(be)?be:wf(be);case"array":return typeof be=="string"?gc(be):be}return be}var W;function O(re){try{var me=re.InflateRaw,be=new me;if(be._processChunk(new Uint8Array([3,0]),be._finishFlushFlag),be.bytesRead)W=re;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function z(re,me){if(!W)return bt(re,me);var be=W.InflateRaw,_e=new be,Ee=_e._processChunk(re.slice(re.l),_e._finishFlushFlag);return re.l+=_e.bytesRead,Ee}function H(re){return W?W.deflateRawSync(re):ut(re)}var R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(re){var me=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(me>>16|me>>8|me)&255}for(var ie=typeof Uint8Array<"u",ce=ie?new Uint8Array(256):[],De=0;De<256;++De)ce[De]=he(De);function ne(re,me){var be=ce[re&255];return me<=8?be>>>8-me:(be=be<<8|ce[re>>8&255],me<=16?be>>>16-me:(be=be<<8|ce[re>>16&255],be>>>24-me))}function Ue(re,me){var be=me&7,_e=me>>>3;return(re[_e]|(be<=6?0:re[_e+1]<<8))>>>be&3}function Ce(re,me){var be=me&7,_e=me>>>3;return(re[_e]|(be<=5?0:re[_e+1]<<8))>>>be&7}function de(re,me){var be=me&7,_e=me>>>3;return(re[_e]|(be<=4?0:re[_e+1]<<8))>>>be&15}function Y(re,me){var be=me&7,_e=me>>>3;return(re[_e]|(be<=3?0:re[_e+1]<<8))>>>be&31}function ve(re,me){var be=me&7,_e=me>>>3;return(re[_e]|(be<=1?0:re[_e+1]<<8))>>>be&127}function ye(re,me,be){var _e=me&7,Ee=me>>>3,Oe=(1<<be)-1,Xe=re[Ee]>>>_e;return be<8-_e||(Xe|=re[Ee+1]<<8-_e,be<16-_e)||(Xe|=re[Ee+2]<<16-_e,be<24-_e)||(Xe|=re[Ee+3]<<24-_e),Xe&Oe}function Ae(re,me,be){var _e=me&7,Ee=me>>>3;return _e<=5?re[Ee]|=(be&7)<<_e:(re[Ee]|=be<<_e&255,re[Ee+1]=(be&7)>>8-_e),me+3}function pe(re,me,be){var _e=me&7,Ee=me>>>3;return be=(be&1)<<_e,re[Ee]|=be,me+1}function ue(re,me,be){var _e=me&7,Ee=me>>>3;return be<<=_e,re[Ee]|=be&255,be>>>=8,re[Ee+1]=be,me+8}function Pe(re,me,be){var _e=me&7,Ee=me>>>3;return be<<=_e,re[Ee]|=be&255,be>>>=8,re[Ee+1]=be&255,re[Ee+2]=be>>>8,me+16}function Ne(re,me){var be=re.length,_e=2*be>me?2*be:me+5,Ee=0;if(be>=me)return re;if(On){var Oe=fI(_e);if(re.copy)re.copy(Oe);else for(;Ee<re.length;++Ee)Oe[Ee]=re[Ee];return Oe}else if(ie){var Xe=new Uint8Array(_e);if(Xe.set)Xe.set(re);else for(;Ee<be;++Ee)Xe[Ee]=re[Ee];return Xe}return re.length=_e,re}function Re(re){for(var me=new Array(re),be=0;be<re;++be)me[be]=0;return me}function nt(re,me,be){var _e=1,Ee=0,Oe=0,Xe=0,ct=0,Ve=re.length,Je=ie?new Uint16Array(32):Re(32);for(Oe=0;Oe<32;++Oe)Je[Oe]=0;for(Oe=Ve;Oe<be;++Oe)re[Oe]=0;Ve=re.length;var He=ie?new Uint16Array(Ve):Re(Ve);for(Oe=0;Oe<Ve;++Oe)Je[Ee=re[Oe]]++,_e<Ee&&(_e=Ee),He[Oe]=0;for(Je[0]=0,Oe=1;Oe<=_e;++Oe)Je[Oe+16]=ct=ct+Je[Oe-1]<<1;for(Oe=0;Oe<Ve;++Oe)ct=re[Oe],ct!=0&&(He[Oe]=Je[ct+16]++);var Le=0;for(Oe=0;Oe<Ve;++Oe)if(Le=re[Oe],Le!=0)for(ct=ne(He[Oe],_e)>>_e-Le,Xe=(1<<_e+4-Le)-1;Xe>=0;--Xe)me[ct|Xe<<Le]=Le&15|Oe<<4;return _e}var xt=ie?new Uint16Array(512):Re(512),kt=ie?new Uint16Array(32):Re(32);if(!ie){for(var Me=0;Me<512;++Me)xt[Me]=0;for(Me=0;Me<32;++Me)kt[Me]=0}(function(){for(var re=[],me=0;me<32;me++)re.push(5);nt(re,kt,32);var be=[];for(me=0;me<=143;me++)be.push(8);for(;me<=255;me++)be.push(9);for(;me<=279;me++)be.push(7);for(;me<=287;me++)be.push(8);nt(be,xt,288)})();var vt=(function(){for(var me=ie?new Uint8Array(32768):[],be=0,_e=0;be<le.length-1;++be)for(;_e<le[be+1];++_e)me[_e]=be;for(;_e<32768;++_e)me[_e]=29;var Ee=ie?new Uint8Array(259):[];for(be=0,_e=0;be<K.length-1;++be)for(;_e<K[be+1];++_e)Ee[_e]=be;function Oe(ct,Ve){for(var Je=0;Je<ct.length;){var He=Math.min(65535,ct.length-Je),Le=Je+He==ct.length;for(Ve.write_shift(1,+Le),Ve.write_shift(2,He),Ve.write_shift(2,~He&65535);He-- >0;)Ve[Ve.l++]=ct[Je++]}return Ve.l}function Xe(ct,Ve){for(var Je=0,He=0,Le=ie?new Uint16Array(32768):[];He<ct.length;){var tt=Math.min(65535,ct.length-He);if(tt<10){for(Je=Ae(Ve,Je,+(He+tt==ct.length)),Je&7&&(Je+=8-(Je&7)),Ve.l=Je/8|0,Ve.write_shift(2,tt),Ve.write_shift(2,~tt&65535);tt-- >0;)Ve[Ve.l++]=ct[He++];Je=Ve.l*8;continue}Je=Ae(Ve,Je,+(He+tt==ct.length)+2);for(var ht=0;tt-- >0;){var Pt=ct[He];ht=(ht<<5^Pt)&32767;var Mt=-1,vr=0;if((Mt=Le[ht])&&(Mt|=He&-32768,Mt>He&&(Mt-=32768),Mt<He))for(;ct[Mt+vr]==ct[He+vr]&&vr<250;)++vr;if(vr>2){Pt=Ee[vr],Pt<=22?Je=ue(Ve,Je,ce[Pt+1]>>1)-1:(ue(Ve,Je,3),Je+=5,ue(Ve,Je,ce[Pt-23]>>5),Je+=3);var zr=Pt<8?0:Pt-4>>2;zr>0&&(Pe(Ve,Je,vr-K[Pt]),Je+=zr),Pt=me[He-Mt],Je=ue(Ve,Je,ce[Pt]>>3),Je-=3;var on=Pt<4?0:Pt-2>>1;on>0&&(Pe(Ve,Je,He-Mt-le[Pt]),Je+=on);for(var Mn=0;Mn<vr;++Mn)Le[ht]=He&32767,ht=(ht<<5^ct[He])&32767,++He;tt-=vr-1}else Pt<=143?Pt=Pt+48:Je=pe(Ve,Je,1),Je=ue(Ve,Je,ce[Pt]),Le[ht]=He&32767,++He}Je=ue(Ve,Je,0)-1}return Ve.l=(Je+7)/8|0,Ve.l}return function(Ve,Je){return Ve.length<8?Oe(Ve,Je):Xe(Ve,Je)}})();function ut(re){var me=Ft(50+Math.floor(re.length*1.1)),be=vt(re,me);return me.slice(0,be)}var lt=ie?new Uint16Array(32768):Re(32768),pr=ie?new Uint16Array(32768):Re(32768),rr=ie?new Uint16Array(128):Re(128),ft=1,$t=1;function tr(re,me){var be=Y(re,me)+257;me+=5;var _e=Y(re,me)+1;me+=5;var Ee=de(re,me)+4;me+=4;for(var Oe=0,Xe=ie?new Uint8Array(19):Re(19),ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,Je=ie?new Uint8Array(8):Re(8),He=ie?new Uint8Array(8):Re(8),Le=Xe.length,tt=0;tt<Ee;++tt)Xe[R[tt]]=Oe=Ce(re,me),Ve<Oe&&(Ve=Oe),Je[Oe]++,me+=3;var ht=0;for(Je[0]=0,tt=1;tt<=Ve;++tt)He[tt]=ht=ht+Je[tt-1]<<1;for(tt=0;tt<Le;++tt)(ht=Xe[tt])!=0&&(ct[tt]=He[ht]++);var Pt=0;for(tt=0;tt<Le;++tt)if(Pt=Xe[tt],Pt!=0){ht=ce[ct[tt]]>>8-Pt;for(var Mt=(1<<7-Pt)-1;Mt>=0;--Mt)rr[ht|Mt<<Pt]=Pt&7|tt<<3}var vr=[];for(Ve=1;vr.length<be+_e;)switch(ht=rr[ve(re,me)],me+=ht&7,ht>>>=3){case 16:for(Oe=3+Ue(re,me),me+=2,ht=vr[vr.length-1];Oe-- >0;)vr.push(ht);break;case 17:for(Oe=3+Ce(re,me),me+=3;Oe-- >0;)vr.push(0);break;case 18:for(Oe=11+ve(re,me),me+=7;Oe-- >0;)vr.push(0);break;default:vr.push(ht),Ve<ht&&(Ve=ht);break}var zr=vr.slice(0,be),on=vr.slice(be);for(tt=be;tt<286;++tt)zr[tt]=0;for(tt=_e;tt<30;++tt)on[tt]=0;return ft=nt(zr,lt,286),$t=nt(on,pr,30),me}function $e(re,me){if(re[0]==3&&!(re[1]&3))return[i0(me),2];for(var be=0,_e=0,Ee=fI(me||1<<18),Oe=0,Xe=Ee.length>>>0,ct=0,Ve=0;(_e&1)==0;){if(_e=Ce(re,be),be+=3,_e>>>1)_e>>1==1?(ct=9,Ve=5):(be=tr(re,be),ct=ft,Ve=$t);else{be&7&&(be+=8-(be&7));var Je=re[be>>>3]|re[(be>>>3)+1]<<8;if(be+=32,Je>0)for(!me&&Xe<Oe+Je&&(Ee=Ne(Ee,Oe+Je),Xe=Ee.length);Je-- >0;)Ee[Oe++]=re[be>>>3],be+=8;continue}for(;;){!me&&Xe<Oe+32767&&(Ee=Ne(Ee,Oe+32767),Xe=Ee.length);var He=ye(re,be,ct),Le=_e>>>1==1?xt[He]:lt[He];if(be+=Le&15,Le>>>=4,(Le>>>8&255)===0)Ee[Oe++]=Le;else{if(Le==256)break;Le-=257;var tt=Le<8?0:Le-4>>2;tt>5&&(tt=0);var ht=Oe+K[Le];tt>0&&(ht+=ye(re,be,tt),be+=tt),He=ye(re,be,Ve),Le=_e>>>1==1?kt[He]:pr[He],be+=Le&15,Le>>>=4;var Pt=Le<4?0:Le-2>>1,Mt=le[Le];for(Pt>0&&(Mt+=ye(re,be,Pt),be+=Pt),!me&&Xe<ht&&(Ee=Ne(Ee,ht+100),Xe=Ee.length);Oe<ht;)Ee[Oe]=Ee[Oe-Mt],++Oe}}}return me?[Ee,be+7>>>3]:[Ee.slice(0,Oe),be+7>>>3]}function bt(re,me){var be=re.slice(re.l||0),_e=$e(be,me);return re.l+=_e[1],_e[0]}function jr(re,me){if(re)typeof console<"u"&&console.error(me);else throw new Error(me)}function Yt(re,me){var be=re;po(be,0);var _e=[],Ee=[],Oe={FileIndex:_e,FullPaths:Ee};A(Oe,{root:me.root});for(var Xe=be.length-4;(be[Xe]!=80||be[Xe+1]!=75||be[Xe+2]!=5||be[Xe+3]!=6)&&Xe>=0;)--Xe;be.l=Xe+4,be.l+=4;var ct=be.read_shift(2);be.l+=6;var Ve=be.read_shift(4);for(be.l=Ve,Xe=0;Xe<ct;++Xe){be.l+=20;var Je=be.read_shift(4),He=be.read_shift(4),Le=be.read_shift(2),tt=be.read_shift(2),ht=be.read_shift(2);be.l+=8;var Pt=be.read_shift(4),Mt=l(be.slice(be.l+Le,be.l+Le+tt));be.l+=Le+tt+ht;var vr=be.l;be.l=Pt+4,Fr(be,Je,He,Oe,Mt),be.l=vr}return Oe}function Fr(re,me,be,_e,Ee){re.l+=2;var Oe=re.read_shift(2),Xe=re.read_shift(2),ct=o(re);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=re.read_shift(4),Je=re.read_shift(4),He=re.read_shift(4),Le=re.read_shift(2),tt=re.read_shift(2),ht="",Pt=0;Pt<Le;++Pt)ht+=String.fromCharCode(re[re.l++]);if(tt){var Mt=l(re.slice(re.l,re.l+tt));(Mt[21589]||{}).mt&&(ct=Mt[21589].mt),((Ee||{})[21589]||{}).mt&&(ct=Ee[21589].mt)}re.l+=tt;var vr=re.slice(re.l,re.l+Je);switch(Xe){case 8:vr=z(re,He);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var zr=!1;Oe&8&&(Ve=re.read_shift(4),Ve==134695760&&(Ve=re.read_shift(4),zr=!0),Je=re.read_shift(4),He=re.read_shift(4)),Je!=me&&jr(zr,"Bad compressed size: "+me+" != "+Je),He!=be&&jr(zr,"Bad uncompressed size: "+be+" != "+He),fn(_e,ht,vr,{unsafe:!0,mt:ct})}function Cr(re,me){var be=me||{},_e=[],Ee=[],Oe=Ft(1),Xe=be.compression?8:0,ct=0,Ve=0,Je=0,He=0,Le=0,tt=re.FullPaths[0],ht=tt,Pt=re.FileIndex[0],Mt=[],vr=0;for(Ve=1;Ve<re.FullPaths.length;++Ve)if(ht=re.FullPaths[Ve].slice(tt.length),Pt=re.FileIndex[Ve],!(!Pt.size||!Pt.content||ht=="Sh33tJ5")){var zr=He,on=Ft(ht.length);for(Je=0;Je<ht.length;++Je)on.write_shift(1,ht.charCodeAt(Je)&127);on=on.slice(0,on.l),Mt[Le]=ooe.buf(Pt.content,0);var Mn=Pt.content;Xe==8&&(Mn=H(Mn)),Oe=Ft(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,ct),Oe.write_shift(2,Xe),Pt.mt?i(Oe,Pt.mt):Oe.write_shift(4,0),Oe.write_shift(-4,Mt[Le]),Oe.write_shift(4,Mn.length),Oe.write_shift(4,Pt.content.length),Oe.write_shift(2,on.length),Oe.write_shift(2,0),He+=Oe.length,_e.push(Oe),He+=on.length,_e.push(on),He+=Mn.length,_e.push(Mn),Oe=Ft(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,ct),Oe.write_shift(2,Xe),Oe.write_shift(4,0),Oe.write_shift(-4,Mt[Le]),Oe.write_shift(4,Mn.length),Oe.write_shift(4,Pt.content.length),Oe.write_shift(2,on.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,zr),vr+=Oe.l,Ee.push(Oe),vr+=on.length,Ee.push(on),++Le}return Oe=Ft(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,Le),Oe.write_shift(2,Le),Oe.write_shift(4,vr),Oe.write_shift(4,He),Oe.write_shift(2,0),Zi([Zi(_e),Zi(Ee),Oe])}var lr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ut(re,me){if(re.ctype)return re.ctype;var be=re.name||"",_e=be.match(/\.([^\.]+)$/);return _e&&lr[_e[1]]||me&&(_e=(be=me).match(/[\.\\]([^\.\\])+$/),_e&&lr[_e[1]])?lr[_e[1]]:"application/octet-stream"}function wr(re){for(var me=Wx(re),be=[],_e=0;_e<me.length;_e+=76)be.push(me.slice(_e,_e+76));return be.join(`\r
`)+`\r
`}function Er(re){var me=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Je){var He=Je.charCodeAt(0).toString(16).toUpperCase();return"="+(He.length==1?"0"+He:He)});me=me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),me.charAt(0)==`
`&&(me="=0D"+me.slice(1)),me=me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var be=[],_e=me.split(`\r
`),Ee=0;Ee<_e.length;++Ee){var Oe=_e[Ee];if(Oe.length==0){be.push("");continue}for(var Xe=0;Xe<Oe.length;){var ct=76,Ve=Oe.slice(Xe,Xe+ct);Ve.charAt(ct-1)=="="?ct--:Ve.charAt(ct-2)=="="?ct-=2:Ve.charAt(ct-3)=="="&&(ct-=3),Ve=Oe.slice(Xe,Xe+ct),Xe+=ct,Xe<Oe.length&&(Ve+="="),be.push(Ve)}}return be.join(`\r
`)}function Yr(re){for(var me=[],be=0;be<re.length;++be){for(var _e=re[be];be<=re.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+re[++be];me.push(_e)}for(var Ee=0;Ee<me.length;++Ee)me[Ee]=me[Ee].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return gc(me.join(`\r
`))}function sn(re,me,be){for(var _e="",Ee="",Oe="",Xe,ct=0;ct<10;++ct){var Ve=me[ct];if(!Ve||Ve.match(/^\s*$/))break;var Je=Ve.match(/^(.*?):\s*([^\s].*)$/);if(Je)switch(Je[1].toLowerCase()){case"content-location":_e=Je[2].trim();break;case"content-type":Oe=Je[2].trim();break;case"content-transfer-encoding":Ee=Je[2].trim();break}}switch(++ct,Ee.toLowerCase()){case"base64":Xe=gc(Nc(me.slice(ct).join("")));break;case"quoted-printable":Xe=Yr(me.slice(ct));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ee)}var He=fn(re,_e.slice(be.length),Xe,{unsafe:!0});Oe&&(He.ctype=Oe)}function Wn(re,me){if(Q(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var be=me&&me.root||"",_e=(On&&Buffer.isBuffer(re)?re.toString("binary"):Q(re)).split(`\r
`),Ee=0,Oe="";for(Ee=0;Ee<_e.length;++Ee)if(Oe=_e[Ee],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),be||(be=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,be.length)!=be))for(;be.length>0&&(be=be.slice(0,be.length-1),be=be.slice(0,be.lastIndexOf("/")+1),Oe.slice(0,be.length)!=be););var Xe=(_e[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var ct="--"+(Xe[1]||""),Ve=[],Je=[],He={FileIndex:Ve,FullPaths:Je};A(He);var Le,tt=0;for(Ee=0;Ee<_e.length;++Ee){var ht=_e[Ee];ht!==ct&&ht!==ct+"--"||(tt++&&sn(He,_e.slice(Le,Ee),be),Le=Ee)}return He}function or(re,me){var be=me||{},_e=be.boundary||"SheetJS";_e="------="+_e;for(var Ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Oe=re.FullPaths[0],Xe=Oe,ct=re.FileIndex[0],Ve=1;Ve<re.FullPaths.length;++Ve)if(Xe=re.FullPaths[Ve].slice(Oe.length),ct=re.FileIndex[Ve],!(!ct.size||!ct.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vr){return"_x"+vr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vr){return"_u"+vr.charCodeAt(0).toString(16)+"_"});for(var Je=ct.content,He=On&&Buffer.isBuffer(Je)?Je.toString("binary"):Q(Je),Le=0,tt=Math.min(1024,He.length),ht=0,Pt=0;Pt<=tt;++Pt)(ht=He.charCodeAt(Pt))>=32&&ht<128&&++Le;var Mt=Le>=tt*4/5;Ee.push(_e),Ee.push("Content-Location: "+(be.root||"file:///C:/SheetJS/")+Xe),Ee.push("Content-Transfer-Encoding: "+(Mt?"quoted-printable":"base64")),Ee.push("Content-Type: "+Ut(ct,Xe)),Ee.push(""),Ee.push(Mt?Er(He):wr(He))}return Ee.push(_e+`--\r
`),Ee.join(`\r
`)}function Vn(re){var me={};return A(me,re),me}function fn(re,me,be,_e){var Ee=_e&&_e.unsafe;Ee||A(re);var Oe=!Ee&&Hr.find(re,me);if(!Oe){var Xe=re.FullPaths[0];me.slice(0,Xe.length)==Xe?Xe=me:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+me).replace("//","/")),Oe={name:s(me),type:2},re.FileIndex.push(Oe),re.FullPaths.push(Xe),Ee||Hr.utils.cfb_gc(re)}return Oe.content=be,Oe.size=be?be.length:0,_e&&(_e.CLSID&&(Oe.clsid=_e.CLSID),_e.mt&&(Oe.mt=_e.mt),_e.ct&&(Oe.ct=_e.ct)),Oe}function Ke(re,me){A(re);var be=Hr.find(re,me);if(be){for(var _e=0;_e<re.FileIndex.length;++_e)if(re.FileIndex[_e]==be)return re.FileIndex.splice(_e,1),re.FullPaths.splice(_e,1),!0}return!1}function Nt(re,me,be){A(re);var _e=Hr.find(re,me);if(_e){for(var Ee=0;Ee<re.FileIndex.length;++Ee)if(re.FileIndex[Ee]==_e)return re.FileIndex[Ee].name=s(be),re.FullPaths[Ee]=be,!0}return!1}function Vt(re){I(re,!0)}return t.find=C,t.read=P,t.parse=f,t.write=ee,t.writeFile=ae,t.utils={cfb_new:Vn,cfb_add:fn,cfb_del:Ke,cfb_mov:Nt,cfb_gc:Vt,ReadShift:Xm,CheckField:FM,prep_blob:po,bconcat:Zi,use_zlib:O,_deflateRaw:ut,_inflateRaw:bt,consts:te},t})();function loe(e){return typeof e=="string"?eb(e):Array.isArray(e)?Die(e):e}function pg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=eb(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?gd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([loe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=v0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function coe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Hs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function bI(e,t){for(var r=[],n=Hs(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function rb(e){for(var t=[],r=Hs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function nb(e){for(var t=[],r=Hs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function uoe(e){for(var t=[],r=Hs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var ay=new Date(1899,11,30,0,0,0);function Ri(e,t){var r=e.getTime(),n=ay.getTime()+(e.getTimezoneOffset()-ay.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var mM=new Date,doe=ay.getTime()+(mM.getTimezoneOffset()-ay.getTimezoneOffset())*6e4,wI=mM.getTimezoneOffset();function ab(e){var t=new Date;return t.setTime(e*24*60*60*1e3+doe),t.getTimezoneOffset()!==wI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-wI)*6e4),t}function foe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var NI=new Date("2017-02-19T19:06:09.000Z"),xM=isNaN(NI.getFullYear())?new Date("2/19/17"):NI,hoe=xM.getFullYear()==2017;function ls(e,t){var r=new Date(e);if(hoe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(xM.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function lh(e,t){if(On&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return gd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return gd(nM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return gd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return gd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function cs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=cs(e[r]));return t}function $s(e,t){for(var r="";r.length<t;)r+=e;return r}function $u(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var poe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Bp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&poe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var moe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function gM(e){return e?e.content&&e.type?lh(e.content,!0):e.data?Fm(e.data):e.asNodeBuffer&&On?Fm(e.asNodeBuffer().toString("binary")):e.asBinary?Fm(e.asBinary()):e._data&&e._data.getContent?Fm(lh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function vM(e){if(!e)return null;if(e.data)return uI(e.data);if(e.asNodeBuffer&&On)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?uI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function xoe(e){return e&&e.name.slice(-4)===".bin"?vM(e):gM(e)}function Zc(e,t){for(var r=e.FullPaths||Hs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function K3(e,t){var r=Zc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function yi(e,t,r){if(!r)return xoe(K3(e,t));if(!t)return null;try{return yi(e,t)}catch{return null}}function vc(e,t,r){if(!r)return gM(K3(e,t));if(!t)return null;try{return vc(e,t)}catch{return null}}function goe(e,t,r){return vM(K3(e,t))}function jI(e){for(var t=e.FullPaths||Hs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function jn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return On?n=wf(r):n=Lie(r),Hr.utils.cfb_add(e,t,n)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function X3(){return Hr.utils.cfb_new()}function yM(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Rm(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ii=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,voe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,kI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,yoe=/<[^>]*>/g,Vo=ii.match(kI)?kI:yoe,boe=/<\w*:/,woe=/<(\/?)\w+:/;function an(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(voe),l=0,c="",u=0,f="",d="",m=1;if(o)for(u=0;u!=o.length;++u){for(d=o[u],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(f=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(m=(s=d.charCodeAt(i+1))==34||s==39?1:0,c=d.slice(i+1+m,d.length-m),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var p=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[p]&&f.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Pd(e){return e.replace(woe,"<$1")}var bM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Y3=rb(bM),na=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return bM[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),J3=/[&<>'"]/g,Noe=/[\u0000-\u0008\u000b-\u001f]/g;function Aa(e){var t=e+"";return t.replace(J3,function(r){return Y3[r]}).replace(Noe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function SI(e){return Aa(e).replace(/ /g,"_x0020_")}var wM=/[\u0000-\u001f]/g;function Q3(e){var t=e+"";return t.replace(J3,function(r){return Y3[r]}).replace(/\n/g,"<br/>").replace(wM,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function joe(e){var t=e+"";return t.replace(J3,function(r){return Y3[r]}).replace(wM,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var _I=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function koe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ss(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function QN(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function AI(e){var t=i0(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function CI(e){return wf(e,"binary").toString("utf8")}var gv="foo bar baz",Ua=On&&(CI(gv)==QN(gv)&&CI||AI(gv)==QN(gv)&&AI)||QN,gd=On?function(e){return wf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Gx=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),NM=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Soe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),_oe=/<\/?(?:vt:)?variant>/g,Aoe=/<(?:vt:)([^>]*)>([\s\S]*)</;function EI(e,t){var r=an(e),n=e.match(Soe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(_oe,"").match(Aoe);o&&s.push({v:Ua(o[2]),t:o[1]})}),s}var jM=/(^\s|\s$|\n)/;function mo(e,t){return"<"+e+(t.match(jM)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Kx(e){return Hs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ur(e,t,r){return"<"+e+(r!=null?Kx(r):"")+(t!=null?(t.match(jM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function ak(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Coe(e,t){switch(typeof e){case"string":var r=ur("vt:lpwstr",Aa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ur((e|0)==e?"vt:i4":"vt:r8",Aa(String(e)));case"boolean":return ur("vt:bool",e?"true":"false")}if(e instanceof Date)return ur("vt:filetime",ak(e));throw new Error("Unable to serialize "+e)}function Z3(e){if(On&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ua(v0(W3(e)));throw new Error("Bad input format: expected Buffer or string")}var Xx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Li={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},vh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],pc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Eoe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Toe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var TI=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},OI=On?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:wf(t)})):TI(e)}:TI,PI=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(rf(e,s)));return n.join("").replace(kl,"")},eS=On?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(kl,""):PI(e,t,r)}:PI,II=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},kM=On?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):II(e,t,r)}:II,DI=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Xh(e,s)));return n.join("")},mg=On?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):DI(t,r,n)}:DI,SM=function(e,t){var r=mc(e,t);return r>0?mg(e,t+4,t+4+r-1):""},_M=SM,AM=function(e,t){var r=mc(e,t);return r>0?mg(e,t+4,t+4+r-1):""},CM=AM,EM=function(e,t){var r=2*mc(e,t);return r>0?mg(e,t+4,t+4+r-1):""},TM=EM,OM=function(t,r){var n=mc(t,r);return n>0?eS(t,r+4,r+4+n):""},PM=OM,IM=function(e,t){var r=mc(e,t);return r>0?mg(e,t+4,t+4+r):""},DM=IM,LM=function(e,t){return Eoe(e,t)},sy=LM,tS=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};On&&(_M=function(t,r){if(!Buffer.isBuffer(t))return SM(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},CM=function(t,r){if(!Buffer.isBuffer(t))return AM(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},TM=function(t,r){if(!Buffer.isBuffer(t))return EM(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},PM=function(t,r){if(!Buffer.isBuffer(t))return OM(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},DM=function(t,r){if(!Buffer.isBuffer(t))return IM(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},sy=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):LM(t,r)},tS=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Xh=function(e,t){return e[t]},rf=function(e,t){return e[t+1]*256+e[t]},Ooe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},mc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},L0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Poe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Xm(e,t){var r="",n,s,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,On&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(rf(this,u)),u+=2;e*=2;break;case"utf8":r=mg(this,this.l,this.l+e);break;case"utf16le":e*=2,r=eS(this,this.l,this.l+e);break;case"wstr":return Xm.call(this,e,"dbcs");case"lpstr-ansi":r=_M(this,this.l),e=4+mc(this,this.l);break;case"lpstr-cp":r=CM(this,this.l),e=4+mc(this,this.l);break;case"lpwstr":r=TM(this,this.l),e=4+2*mc(this,this.l);break;case"lpp4":e=4+mc(this,this.l),r=PM(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+mc(this,this.l),r=DM(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Xh(this,this.l+e++))!==0;)i.push(xv(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=rf(this,this.l+e))!==0;)i.push(xv(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Xh(this,u),this.l=u+1,l=Xm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(xv(rf(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Xh(this,u),this.l=u+1,l=Xm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(xv(Xh(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Xh(this,this.l),this.l++,n;case 2:return n=(t==="i"?Ooe:rf)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?L0:Poe)(this,this.l),this.l+=4,n):(s=mc(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=sy(this,this.l):s=sy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=kM(this,this.l,e);break}}return this.l+=e,r}var Ioe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Doe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Loe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Foe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Loe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Ioe(this,t,this.l);break;case 8:if(n=8,r==="f"){Toe(this,t,this.l);break}case 16:break;case-4:n=4,Doe(this,t,this.l);break}return this.l+=n,this}function FM(e,t){var r=kM(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function po(e,t){e.l=t,e.read_shift=Xm,e.chk=FM,e.write_shift=Foe}function Wo(e,t){e.l+=t}function Ft(e){var t=i0(e);return po(t,0),t}function Nf(e,t,r){if(e){var n,s,i;po(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=tg[l]||tg[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=c,t(f,u,l))return}}}function Vl(){var e=[],t=On?256:2048,r=function(u){var f=Ft(u);return po(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},o=function(){return s(),Zi(e)},l=function(u){s(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Gt(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=tg[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&tS(r)&&e.push(r)}}function Ym(e,t,r){var n=cs(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function LI(e,t,r){var n=cs(e);return n.s=Ym(n.s,t.s,r),n.e=Ym(n.e,t.s,r),n}function Jm(e,t){if(e.cRel&&e.c<0)for(e=cs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=cs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=rn(e);return!e.cRel&&e.cRel!=null&&(r=Boe(r)),!e.rRel&&e.rRel!=null&&(r=Moe(r)),r}function ZN(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ps(e.s.c)+":"+(e.e.cRel?"":"$")+Ps(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+si(e.s.r)+":"+(e.e.rRel?"":"$")+si(e.e.r):Jm(e.s,t.biff)+":"+Jm(e.e,t.biff)}function rS(e){return parseInt(Roe(e),10)-1}function si(e){return""+(e+1)}function Moe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Roe(e){return e.replace(/\$(\d+)$/,"$1")}function nS(e){for(var t=Uoe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ps(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Boe(e){return e.replace(/^([A-Z])/,"$$$1")}function Uoe(e){return e.replace(/^\$([A-Z])/,"$1")}function qoe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Is(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function rn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Gl(e){var t=e.indexOf(":");return t==-1?{s:Is(e),e:Is(e)}:{s:Is(e.slice(0,t)),e:Is(e.slice(t+1))}}function bn(e,t){return typeof t>"u"||typeof t=="number"?bn(e.s,e.e):(typeof e!="string"&&(e=rn(e)),typeof t!="string"&&(t=rn(t)),e==t?e:e+":"+t)}function aa(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function FI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=cu(e.z,r?Ri(t):t)}catch{}try{return e.w=cu((e.XF||{}).numFmtId||(r?14:0),r?Ri(t):t)}catch{return""+t}}function gf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?jf[e.v]||e.v:t==null?FI(e,e.v):FI(e,t))}function y0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function MM(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Is(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=aa(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[d].length;++m)if(!(typeof t[d][m]>"u")){var p={v:t[d][m]},y=o+d,v=l+m;if(u.s.r>y&&(u.s.r=y),u.s.c>v&&(u.s.c=v),u.e.r<y&&(u.e.r=y),u.e.c<v&&(u.e.c=v),t[d][m]&&typeof t[d][m]=="object"&&!Array.isArray(t[d][m])&&!(t[d][m]instanceof Date))p=t[d][m];else if(Array.isArray(p.v)&&(p.f=t[d][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Qr[14],n.cellDates?(p.t="d",p.w=cu(p.z,Ri(p.v))):(p.t="n",p.v=Ri(p.v),p.w=cu(p.z,p.v))):p.t="s";if(s)i[y]||(i[y]=[]),i[y][v]&&i[y][v].z&&(p.z=i[y][v].z),i[y][v]=p;else{var g=rn({c:v,r:y});i[g]&&i[g].z&&(p.z=i[g].z),i[g]=p}}}return u.s.c<1e7&&(i["!ref"]=bn(u)),i}function rm(e,t){return MM(null,e,t)}function $oe(e){return e.read_shift(4,"i")}function zu(e,t){return t||(t=Ft(4)),t.write_shift(4,e),t}function Ho(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function eo(e,t){var r=!1;return t==null&&(r=!0,t=Ft(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function zoe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Hoe(e,t){return t||(t=Ft(4)),t.write_shift(2,0),t.write_shift(2,0),t}function aS(e,t){var r=e.l,n=e.read_shift(1),s=Ho(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(zoe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Woe(e,t){var r=!1;return t==null&&(r=!0,t=Ft(15+4*e.t.length)),t.write_shift(1,0),eo(e.t,t),r?t.slice(0,t.l):t}var Voe=aS;function Goe(e,t){var r=!1;return t==null&&(r=!0,t=Ft(23+4*e.t.length)),t.write_shift(1,1),eo(e.t,t),t.write_shift(4,1),Hoe({},t),r?t.slice(0,t.l):t}function fu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function yh(e,t){return t==null&&(t=Ft(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function bh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function wh(e,t){return t==null&&(t=Ft(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Koe=Ho,RM=eo;function sS(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function iy(e,t){var r=!1;return t==null&&(r=!0,t=Ft(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Xoe=Ho,sk=sS,iS=iy;function oS(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?sy([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):L0(t,0)>>2;return r?s/100:s}function BM(e,t){t==null&&(t=Ft(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function UM(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Yoe(e,t){return t||(t=Ft(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Nh=UM,nm=Yoe;function $o(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ch(e,t){return(t||Ft(8)).write_shift(8,e,"f")}function Joe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=Y0[s];u&&(t.rgb=Jx(u));break;case 2:t.rgb=Jx([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function oy(e,t){if(t||(t=Ft(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Qoe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Zoe(e,t){t||(t=Ft(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function qM(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function ele(e){return qM(e,1)}function tle(e){return qM(e,2)}var lS=2,Hl=3,vv=11,MI=12,ly=19,yv=64,rle=65,nle=71,ale=4108,sle=4126,Yi=80,$M=81,ile=[Yi,$M],ik={1:{n:"CodePage",t:lS},2:{n:"Category",t:Yi},3:{n:"PresentationFormat",t:Yi},4:{n:"ByteCount",t:Hl},5:{n:"LineCount",t:Hl},6:{n:"ParagraphCount",t:Hl},7:{n:"SlideCount",t:Hl},8:{n:"NoteCount",t:Hl},9:{n:"HiddenCount",t:Hl},10:{n:"MultimediaClipCount",t:Hl},11:{n:"ScaleCrop",t:vv},12:{n:"HeadingPairs",t:ale},13:{n:"TitlesOfParts",t:sle},14:{n:"Manager",t:Yi},15:{n:"Company",t:Yi},16:{n:"LinksUpToDate",t:vv},17:{n:"CharacterCount",t:Hl},19:{n:"SharedDoc",t:vv},22:{n:"HyperlinksChanged",t:vv},23:{n:"AppVersion",t:Hl,p:"version"},24:{n:"DigSig",t:rle},26:{n:"ContentType",t:Yi},27:{n:"ContentStatus",t:Yi},28:{n:"Language",t:Yi},29:{n:"Version",t:Yi},255:{},2147483648:{n:"Locale",t:ly},2147483651:{n:"Behavior",t:ly},1919054434:{}},ok={1:{n:"CodePage",t:lS},2:{n:"Title",t:Yi},3:{n:"Subject",t:Yi},4:{n:"Author",t:Yi},5:{n:"Keywords",t:Yi},6:{n:"Comments",t:Yi},7:{n:"Template",t:Yi},8:{n:"LastAuthor",t:Yi},9:{n:"RevNumber",t:Yi},10:{n:"EditTime",t:yv},11:{n:"LastPrinted",t:yv},12:{n:"CreatedDate",t:yv},13:{n:"ModifiedDate",t:yv},14:{n:"PageCount",t:Hl},15:{n:"WordCount",t:Hl},16:{n:"CharCount",t:Hl},17:{n:"Thumbnail",t:nle},18:{n:"Application",t:Yi},19:{n:"DocSecurity",t:Hl},255:{},2147483648:{n:"Locale",t:ly},2147483651:{n:"Behavior",t:ly},1919054434:{}},RI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ole=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function lle(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var cle=lle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Y0=cs(cle),jf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zM={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},lk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},bv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function cS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function ule(e){var t=cS();if(!e||!e.match)return t;var r={};if((e.match(Vo)||[]).forEach(function(n){var s=an(n);switch(s[0].replace(boe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[lk[s.ContentType]]!==void 0&&t[lk[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Li.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function HM(e,t){var r=uoe(lk),n=[],s;n[n.length]=ii,n[n.length]=ur("Types",null,{xmlns:Li.CT,"xmlns:xsd":Li.xsd,"xmlns:xsi":Li.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return ur("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=ur("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:bv[c][t.bookType]||bv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:bv[c][t.bookType]||bv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Fn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Yx(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Qm(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Vo)||[]).forEach(function(s){var i=an(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Rm(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function lp(e){var t=[ii,ur("Relationships",null,{xmlns:Li.RELS})];return Hs(e["!id"]).forEach(function(r){t[t.length]=ur("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function _a(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Fn.HLINK,Fn.XPATH,Fn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var dle="application/vnd.oasis.opendocument.spreadsheet";function fle(e,t){for(var r=Z3(e),n,s;n=Xx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=an(n[0],!1),s.path=="/"&&s.type!==dle)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function hle(e){var t=[ii];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function BI(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function ple(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function mle(e){var t=[ii];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(BI(e[r][0],e[r][1])),t.push(ple("",e[r][0]));return t.push(BI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function WM(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ey.version+"</meta:generator></office:meta></office:document-meta>"}var ou=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],xle=(function(){for(var e=new Array(ou.length),t=0;t<ou.length;++t){var r=ou[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function VM(e){var t={};e=Ua(e);for(var r=0;r<ou.length;++r){var n=ou[r],s=e.match(xle[r]);s!=null&&s.length>0&&(t[n[1]]=na(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ls(t[n[1]]))}return t}function ej(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Aa(t),n[n.length]=r?ur(e,t,r):mo(e,t))}function GM(e,t){var r=t||{},n=[ii,ur("cp:coreProperties",null,{"xmlns:cp":Li.CORE_PROPS,"xmlns:dc":Li.dc,"xmlns:dcterms":Li.dcterms,"xmlns:dcmitype":Li.dcmitype,"xmlns:xsi":Li.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&ej("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:ak(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&ej("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:ak(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=ou.length;++i){var o=ou[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&ej(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var J0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],KM=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function XM(e,t,r,n){var s=[];if(typeof e=="string")s=EI(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?EI(t,n).map(function(f){return f.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function gle(e,t,r){var n={};return t||(t={}),e=Ua(e),J0.forEach(function(s){var i=(e.match(Gx(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=na(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&XM(n.HeadingPairs,n.TitlesOfParts,t,r),t}function YM(e){var t=[],r=ur;return e||(e={}),e.Application="SheetJS",t[t.length]=ii,t[t.length]=ur("Properties",null,{xmlns:Li.EXT_PROPS,"xmlns:vt":Li.vt}),J0.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Aa(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Aa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var vle=/<[^>]+>[^<]*/g;function yle(e,t){var r={},n="",s=e.match(vle);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=an(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=na(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),f=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=na(f);break;case"bool":r[n]=ss(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=ls(f);break;case"cy":case"error":r[n]=na(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function JM(e){var t=[ii,ur("Properties",null,{xmlns:Li.CUST_PROPS,"xmlns:vt":Li.vt})];if(!e)return t.join("");var r=1;return Hs(e).forEach(function(s){++r,t[t.length]=ur("property",Coe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Aa(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ck={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},tj;function ble(e,t,r){tj||(tj=rb(ck)),t=tj[t]||t,e[t]=r}function wle(e,t){var r=[];return Hs(ck).map(function(n){for(var s=0;s<ou.length;++s)if(ou[s][1]==n)return ou[s];for(s=0;s<J0.length;++s)if(J0[s][1]==n)return J0[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];n[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(mo(ck[n[1]]||n[1],s))}}),ur("DocumentProperties",r.join(""),{xmlns:pc.o})}function Nle(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Hs(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<ou.length;++o)if(i==ou[o][1])return;for(o=0;o<J0.length;++o)if(i==J0[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(ur(SI(i),l,{"dt:dt":c}))}}),t&&Hs(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(ur(SI(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+pc.o+'">'+s.join("")+"</"+n+">"}function uS(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function jle(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Ft(8);return o.write_shift(4,n),o.write_shift(4,s),o}function QM(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function ZM(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function eR(e,t,r){return t===31?ZM(e):QM(e,t,r)}function uk(e,t,r){return eR(e,t,r===!1?0:4)}function kle(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return eR(e,t,0)}function Sle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(kl,""),e.l-s&2&&(e.l+=2)}return r}function _le(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(kl,"");return r}function Ale(e){var t=e.l,r=cy(e,$M);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=cy(e,Hl);return[r,n]}function Cle(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Ale(e));return r}function UI(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(kl,"").replace(Mm,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function tR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Ele(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function cy(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==MI&&n!==t&&ile.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===MI?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return QM(e,n,4).replace(kl,"");case 31:return ZM(e);case 64:return uS(e);case 65:return tR(e);case 71:return Ele(e);case 80:return uk(e,n,!i.raw).replace(kl,"");case 81:return kle(e,n).replace(kl,"");case 4108:return Cle(e);case 4126:case 4127:return n==4127?Sle(e):_le(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function qI(e,t){var r=Ft(4),n=Ft(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ft(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=jle(t);break;case 31:case 80:for(n=Ft(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zi([r,n])}function $I(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),d=e.read_shift(4);i[o]=[f,d+r]}i.sort(function(w,j){return w[1]-j[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var y=t[i[o][0]];if(m[y.n]=cy(e,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ru(l=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(i[o][0]===1){if(l=m.CodePage=cy(e,lS),Ru(l),c!==-1){var v=e.l;e.l=i[c][1],u=UI(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=UI(e,l)}else{var g=u[i[o][0]],b;switch(e[e.l]){case 65:e.l+=4,b=tR(e);break;case 30:e.l+=4,b=uk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,b=uk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,b=e.read_shift(4,"i");break;case 19:e.l+=4,b=e.read_shift(4);break;case 5:e.l+=4,b=e.read_shift(8,"f");break;case 11:e.l+=4,b=Zs(e,4);break;case 64:e.l+=4,b=ls(uS(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=b}}return e.l=r+n,m}var rR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Tle(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function zI(e,t,r){var n=Ft(8),s=[],i=[],o=8,l=0,c=Ft(8),u=Ft(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),o+=8+c.length,!t){u=Ft(8),u.write_shift(4,0),s.unshift(u);var f=[Ft(4)];for(f[0].write_shift(4,e.length),l=0;l<e.length;++l){var d=e[l][0];for(c=Ft(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=Zi(f),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(rR.indexOf(e[l][0])>-1||KM.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var y=r[p];if(y.p=="version"&&typeof m=="string"){var v=m.split(".");m=(+v[0]<<16)+(+v[1]||0)}c=qI(y.t,m)}else{var g=Tle(m);g==-1&&(g=31,m=String(m)),c=qI(g,m)}i.push(c),u=Ft(8),u.write_shift(4,t?p:2+l),s.push(u),o+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,b),b+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Zi([n].concat(s).concat(i))}function HI(e,t,r){var n=e.content;if(!n)return{};po(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),f=n.read_shift(16);if(f!==Hr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var d=$I(n,t),m={SystemIdentifier:u};for(var p in d)m[p]=d[p];if(m.FMTID=i,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var y;try{y=$I(n,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[i,o],m}function WI(e,t,r,n,s,i){var o=Ft(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=zI(e,r,n);if(l.push(c),s){var u=zI(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Zi(l)}function Uf(e,t){return e.read_shift(t),null}function Ole(e,t){t||(t=Ft(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Ple(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Zs(e,t){return e.read_shift(t)===1}function yl(e,t){return t||(t=Ft(2)),t.write_shift(2,+!!e),t}function bi(e){return e.read_shift(2,"u")}function eu(e,t){return t||(t=Ft(2)),t.write_shift(2,e),t}function nR(e,t){return Ple(e,t,bi)}function Ile(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function aR(e,t,r){return r||(r=Ft(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function xg(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function Dle(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Lle(e){var t=e.t||"",r=Ft(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ft(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Zi(s)}function uh(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function gg(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):uh(e,n,r)}function jh(e,t,r){if(r.biff>5)return gg(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function sR(e,t,r){return r||(r=Ft(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Fle(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Mle(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(kl,"");return n&&(e.l+=24),s}function Rle(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(kl,"");return r+o}function Ble(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Mle(e);case"0303000000000000c000000000000046":return Rle(e);default:throw new Error("Unsupported Moniker "+r)}}function wv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(kl,""):"";return r}function VI(e,t){t||(t=Ft(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Ule(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,u="",f,d;s&16&&(i=wv(e,r-e.l)),s&128&&(o=wv(e,r-e.l)),(s&257)===257&&(l=wv(e,r-e.l)),(s&257)===1&&(c=Ble(e,r-e.l)),s&8&&(u=wv(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(d=uS(e)),e.l=r;var m=o||l||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return f&&(p.guid=f),d&&(p.time=d),i&&(p.Tooltip=i),p}function qle(e){var t=Ft(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),VI(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&VI(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function iR(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function oR(e,t){var r=iR(e);return r[3]=0,r}function Id(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function dh(e,t,r,n){return n||(n=Ft(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function $le(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function zle(e,t,r){return t===0?"":jh(e,t,r)}function Hle(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function lR(e){var t=e.read_shift(2),r=oS(e);return[t,r]}function Wle(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=xg(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function sb(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function cR(e,t){return t||(t=Ft(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function uR(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Vle=uR;function dR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Gle(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Kle(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Oo(e){e.l+=2,e.l+=e.read_shift(2)}var Xle={0:Oo,4:Oo,5:Oo,6:Oo,7:Kle,8:Oo,9:Oo,10:Oo,11:Oo,12:Oo,13:Gle,14:Oo,15:Oo,16:Oo,17:Oo,18:Oo,19:Oo,20:Oo,21:dR};function Yle(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Xle[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Nv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function dS(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ft(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Jle(e,t){return t===0||e.read_shift(2),1200}function Qle(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=jh(e,0,r);return e.read_shift(t+n-e.l),s}function Zle(e,t){var r=!t||t.biff==8,n=Ft(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ece(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function tce(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=xg(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function rce(e,t){var r=!t||t.biff>=8?2:1,n=Ft(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function nce(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Dle(e));return i.Count=n,i.Unique=s,i}function ace(e,t){var r=Ft(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Lle(e[s]);var i=Zi([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function sce(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function ice(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function oce(e){var t=$le(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function lce(e){return e.read_shift(2),e.read_shift(4)}function GI(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function cce(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function uce(){var e=Ft(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function dce(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function fce(e){var t=Ft(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function hce(){}function pce(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=xg(e,0,r),n}function mce(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=Ft(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function xce(e){var t=Id(e);return t.isst=e.read_shift(4),t}function gce(e,t,r,n){var s=Ft(10);return dh(e,t,n,s),s.write_shift(4,r),s}function vce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Id(e);r.biff==2&&e.l++;var i=gg(e,n-e.l,r);return s.val=i,s}function yce(e,t,r,n,s){var i=!s||s.biff==8,o=Ft(8+ +i+(1+i)*r.length);return dh(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function bce(e,t,r){var n=e.read_shift(2),s=jh(e,0,r);return[n,s]}function wce(e,t,r,n){var s=r&&r.biff==5;n||(n=Ft(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var Nce=jh;function KI(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function jce(e,t){var r=t.biff==8||!t.biff?4:2,n=Ft(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function kce(e){var t=e.read_shift(2),r=e.read_shift(2),n=lR(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Sce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(lR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function _ce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Ace(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=ole[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function Cce(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Ace(e,t,n.fStyle,r),n}function XI(e,t,r,n){var s=r&&r.biff==5;n||(n=Ft(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Ece(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Tce(e){var t=Ft(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function YI(e,t,r){var n=Id(e);(r.biff==2||t==9)&&++e.l;var s=Ile(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Oce(e,t,r,n,s,i){var o=Ft(8);return dh(e,t,n,o),aR(r,i,o),o}function Pce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Id(e),s=$o(e);return n.val=s,n}function Ice(e,t,r,n){var s=Ft(14);return dh(e,t,n,s),ch(r,s),s}var JI=zle;function Dce(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=uh(e,i),l=[];n>e.l;)l.push(gg(e));return[i,s,o,l]}function QI(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Wle(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Lce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function ZI(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=uh(e,o,r);s&32&&(u=Lce[u.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var d=n==e.l||l===0||!(f>0)?[]:Y0e(e,f,r,l);return{chKey:i,Name:u,itab:c,rgce:d}}function fR(e,t,r){if(r.biff<8)return Fce(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Hle(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Fce(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=xg(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Mce(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=uh(e,n,r),o=uh(e,s,r);return[i,o]}function Rce(e,t,r){var n=uR(e);e.l++;var s=e.read_shift(1);return t-=8,[J0e(e,t,r),s,n]}function e8(e,t,r){var n=Vle(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,K0e(e,t,r)]}function Bce(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Uce(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=jh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function qce(e,t,r){return Uce(e,t,r)}function $ce(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(sb(e));return r}function zce(e){var t=Ft(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)cR(e[r],t);return t}function Hce(e,t,r){if(r&&r.biff<8)return Vce(e,t,r);var n=dR(e),s=Yle(e,t-22,n[1]);return{cmo:n,ft:s}}var Wce={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Vce(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Wce[n]||Wo)(e,t,r)),{cmo:[s,n,i],ft:o}}function Gce(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Fle(e,6,r);var l=e.read_shift(2);e.read_shift(2),bi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],d=uh(e,e.lens[u+1]-e.lens[u]-1);if(s+=d,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Kce(e,t){var r=sb(e);e.l+=16;var n=Ule(e,t-24);return[r,n]}function Xce(e){var t=Ft(24),r=Is(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Zi([t,qle(e[1])])}function Yce(e,t){e.read_shift(2);var r=sb(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(kl,""),[r,n]}function Jce(e){var t=e[1].Tooltip,r=Ft(10+2*(t.length+1));r.write_shift(2,2048);var n=Is(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Qce(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=RI[r]||r,r=e.read_shift(2),t[1]=RI[r]||r,t}function Zce(e){return e||(e=Ft(4)),e.write_shift(2,1),e.write_shift(2,1),e}function eue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(oR(e));return r}function tue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(oR(e));return r}function rue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function hR(e,t,r){if(!r.cellStyles)return Wo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function nue(e,t){var r=Ft(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function aue(e,t){var r={};return t<32||(e.l+=16,r.header=$o(e),r.footer=$o(e),e.l+=2),r}function sue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function iue(e){for(var t=Ft(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var oue=Id,lue=nR,cue=gg;function uue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function due(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Id(e);++e.l;var s=jh(e,t-7,r);return n.t="str",n.val=s,n}function fue(e){var t=Id(e);++e.l;var r=$o(e);return t.t="n",t.val=r,t}function hue(e,t,r){var n=Ft(15);return wg(n,e,t),n.write_shift(8,r,"f"),n}function pue(e){var t=Id(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function mue(e,t,r){var n=Ft(9);return wg(n,e,t),n.write_shift(2,r),n}function xue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function gue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function vue(e,t,r){var n=e.l+t,s=Id(e),i=e.read_shift(2),o=uh(e,i,r);return e.l=n,s.t="str",s.val=o,s}var yue=[2,3,48,49,131,139,140,245],dk=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=rb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],f=i0(1);switch(c.type){case"base64":f=gc(Nc(l));break;case"binary":f=gc(l);break;case"buffer":case"array":f=l;break}po(f,0);var d=f.read_shift(1),m=!!(d&136),p=!1,y=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var v=0,g=521;d==2&&(v=f.read_shift(2)),f.l+=3,d!=2&&(v=f.read_shift(4)),v>1048576&&(v=1e6),d!=2&&(g=f.read_shift(2));var b=f.read_shift(2),w=c.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(w=e[f[f.l]]),f.l+=1,f.l+=2),y&&(f.l+=36);for(var j=[],N={},S=Math.min(f.length,d==2?521:g-10-(p?264:0)),P=y?32:11;f.l<S&&f[f.l]!=13;)switch(N={},N.name=Hx.utils.decode(w,f.slice(f.l,f.l+P)).replace(/[\u0000\r\n].*$/g,""),f.l+=P,N.type=String.fromCharCode(f.read_shift(1)),d!=2&&!y&&(N.offset=f.read_shift(4)),N.len=f.read_shift(1),d==2&&(N.offset=f.read_shift(2)),N.dec=f.read_shift(1),N.name.length&&j.push(N),d!=2&&(f.l+=y?13:14),N.type){case"B":(!p||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(f[f.l]!==13&&(f.l=g-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=g;var A=0,T=0;for(u[0]=[],T=0;T!=j.length;++T)u[0][T]=j[T].name;for(;v-- >0;){if(f[f.l]===42){f.l+=b;continue}for(++f.l,u[++A]=[],T=0,T=0;T!=j.length;++T){var I=f.slice(f.l,f.l+j[T].len);f.l+=j[T].len,po(I,0);var B=Hx.utils.decode(w,I);switch(j[T].type){case"C":B.trim().length&&(u[A][T]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[A][T]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[A][T]=B;break;case"F":u[A][T]=parseFloat(B.trim());break;case"+":case"I":u[A][T]=y?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[A][T]=!0;break;case"N":case"F":u[A][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[A][T]="##MEMO##"+(y?parseInt(B.trim(),10):I.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[A][T]=+B||0);break;case"@":u[A][T]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[A][T]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[A][T]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][T]=-I.read_shift(-8,"f");break;case"B":if(p&&j[T].len==8){u[A][T]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[T].len;break;case"0":if(j[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[T].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=j,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var f=rm(r(l,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function s(l,c){try{return y0(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Ru(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Vl(),d=hy(l,{header:1,raw:!0,cellDates:!0}),m=d[0],p=d.slice(1),y=l["!cols"]||[],v=0,g=0,b=0,w=1;for(v=0;v<m.length;++v){if(((y[v]||{}).DBF||{}).name){m[v]=y[v].DBF.name,++b;continue}if(m[v]!=null){if(++b,typeof m[v]=="number"&&(m[v]=m[v].toString(10)),typeof m[v]!="string")throw new Error("DBF Invalid column name "+m[v]+" |"+typeof m[v]+"|");if(m.indexOf(m[v])!==v){for(g=0;g<1024;++g)if(m.indexOf(m[v]+"_"+g)==-1){m[v]+="_"+g;break}}}}var j=aa(l["!ref"]),N=[],S=[],P=[];for(v=0;v<=j.e.c-j.s.c;++v){var A="",T="",I=0,B=[];for(g=0;g<p.length;++g)p[g][v]!=null&&B.push(p[g][v]);if(B.length==0||m[v]==null){N[v]="?";continue}for(g=0;g<B.length;++g){switch(typeof B[g]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=B[g]instanceof Date?"D":"C";break;default:T="C"}I=Math.max(I,String(B[g]).length),A=A&&A!=T?"C":T}I>250&&(I=250),T=((y[v]||{}).DBF||{}).type,T=="C"&&y[v].DBF.len>I&&(I=y[v].DBF.len),A=="B"&&T=="N"&&(A="N",P[v]=y[v].DBF.dec,I=y[v].DBF.len),S[v]=A=="C"||T=="N"?I:i[A]||0,w+=S[v],N[v]=A}var C=f.next(32);for(C.write_shift(4,318902576),C.write_shift(4,p.length),C.write_shift(2,296+32*b),C.write_shift(2,w),v=0;v<4;++v)C.write_shift(4,0);for(C.write_shift(4,0|(+t[rM]||3)<<8),v=0,g=0;v<m.length;++v)if(m[v]!=null){var E=f.next(32),M=(m[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);E.write_shift(1,M,"sbcs"),E.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),E.write_shift(4,g),E.write_shift(1,S[v]||i[N[v]]||0),E.write_shift(1,P[v]||0),E.write_shift(1,2),E.write_shift(4,0),E.write_shift(1,0),E.write_shift(4,0),E.write_shift(4,0),g+=S[v]||i[N[v]]||0}var q=f.next(264);for(q.write_shift(4,13),v=0;v<65;++v)q.write_shift(4,0);for(v=0;v<p.length;++v){var G=f.next(w);for(G.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(N[g]){case"L":G.write_shift(1,p[v][g]==null?63:p[v][g]?84:70);break;case"B":G.write_shift(8,p[v][g]||0,"f");break;case"N":var Z="0";for(typeof p[v][g]=="number"&&(Z=p[v][g].toFixed(P[g]||0)),b=0;b<S[g]-Z.length;++b)G.write_shift(1,32);G.write_shift(1,Z,"sbcs");break;case"D":p[v][g]?(G.write_shift(4,("0000"+p[v][g].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(p[v][g].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+p[v][g].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var te=String(p[v][g]!=null?p[v][g]:"").slice(0,S[g]);for(G.write_shift(1,te,"sbcs"),b=0;b<S[g]-te.length;++b)G.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),pR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Hs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var y=e[p];return typeof y=="number"?dI(y):y},n=function(m,p,y){var v=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return v==59?m:dI(v)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(Nc(m),p);case"binary":return i(m,p);case"buffer":return i(On&&Buffer.isBuffer(m)?m.toString("binary"):v0(m),p);case"array":return i(lh(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var y=m.split(/[\n\r]+/),v=-1,g=-1,b=0,w=0,j=[],N=[],S=null,P={},A=[],T=[],I=[],B=0,C;for(+p.codepage>=0&&Ru(+p.codepage);b!==y.length;++b){B=0;var E=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),M=E.replace(/;;/g,"\0").split(";").map(function(R){return R.replace(/\u0000/g,";")}),q=M[0],G;if(E.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&N.push(E.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,te=!1,ae=!1,Q=!1,ee=-1,W=-1;for(w=1;w<M.length;++w)switch(M[w].charAt(0)){case"A":break;case"X":g=parseInt(M[w].slice(1))-1,te=!0;break;case"Y":for(v=parseInt(M[w].slice(1))-1,te||(g=0),C=j.length;C<=v;++C)j[C]=[];break;case"K":G=M[w].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN($u(G))?isNaN(Bp(G).getDate())||(G=ls(G)):(G=$u(G),S!==null&&em(S)&&(G=ab(G))),Z=!0;break;case"E":Q=!0;var O=cp(M[w].slice(1),{r:v,c:g});j[v][g]=[j[v][g],O];break;case"S":ae=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":ee=parseInt(M[w].slice(1))-1;break;case"C":W=parseInt(M[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+E)}if(Z&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=G:j[v][g]=G,S=null),ae){if(Q)throw new Error("SYLK shared formula cannot have own formula");var z=ee>-1&&j[ee][W];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=PR(z[1],{r:v-ee,c:g-W})}break;case"F":var H=0;for(w=1;w<M.length;++w)switch(M[w].charAt(0)){case"X":g=parseInt(M[w].slice(1))-1,++H;break;case"Y":for(v=parseInt(M[w].slice(1))-1,C=j.length;C<=v;++C)j[C]=[];break;case"M":B=parseInt(M[w].slice(1))/20;break;case"F":break;case"G":break;case"P":S=N[parseInt(M[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=M[w].slice(1).split(" "),C=parseInt(I[0],10);C<=parseInt(I[1],10);++C)B=parseInt(I[2],10),T[C-1]=B===0?{hidden:!0}:{wch:B},o0(T[C-1]);break;case"C":g=parseInt(M[w].slice(1))-1,T[g]||(T[g]={});break;case"R":v=parseInt(M[w].slice(1))-1,A[v]||(A[v]={}),B>0?(A[v].hpt=B,A[v].hpx=qp(B)):B===0&&(A[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+E)}H<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+E)}}return A.length>0&&(P["!rows"]=A),T.length>0&&(P["!cols"]=T),p&&p.sheetRows&&(j=j.slice(0,p.sheetRows)),[j,P]}function o(m,p){var y=s(m,p),v=y[0],g=y[1],b=rm(v,p);return Hs(g).forEach(function(w){b[w]=g[w]}),b}function l(m,p){return y0(o(m,p),p)}function c(m,p,y,v){var g="C;Y"+(y+1)+";X"+(v+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+gS(m.f,{r:y,c:v}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(m,p){p.forEach(function(y,v){var g="F;W"+(v+1)+" "+(v+1)+" ";y.hidden?g+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=Qx(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=Zx(y.wpx)),typeof y.wch=="number"&&(g+=Math.round(y.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function f(m,p){p.forEach(function(y,v){var g="F;";y.hidden?g+="M0;":y.hpt?g+="M"+20*y.hpt+";":y.hpx&&(g+="M"+20*eg(y.hpx)+";"),g.length>2&&m.push(g+"R"+(v+1))})}function d(m,p){var y=["ID;PWXL;N;E"],v=[],g=aa(m["!ref"]),b,w=Array.isArray(m),j=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&u(y,m["!cols"]),m["!rows"]&&f(y,m["!rows"]),y.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var S=g.s.c;S<=g.e.c;++S){var P=rn({r:N,c:S});b=w?(m[N]||[])[S]:m[P],!(!b||b.v==null&&(!b.f||b.F))&&v.push(c(b,m,N,S))}return y.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:d}})(),mR=(function(){function e(i,o){switch(o.type){case"base64":return t(Nc(i),o);case"binary":return t(i,o);case"buffer":return t(On&&Buffer.isBuffer(i)?i.toString("binary"):v0(i),o);case"array":return t(lh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,f=0,d=[];f!==l.length;++f){if(l[f].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var m=l[f].trim().split(","),p=m[0],y=m[1];++f;for(var v=l[f]||"";(v.match(/["]/g)||[]).length&1&&f<l.length-1;)v+=`
`+l[++f];switch(v=v.trim(),+p){case-1:if(v==="BOT"){d[++c]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?d[c][u]=!0:v==="FALSE"?d[c][u]=!1:isNaN($u(y))?isNaN(Bp(y).getDate())?d[c][u]=y:d[c][u]=ls(y):d[c][u]=$u(y),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),d[c][u++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function r(i,o){return rm(e(i,o),o)}function n(i,o){return y0(r(i,o),o)}var s=(function(){var i=function(c,u,f,d,m){c.push(u),c.push(f+","+d),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,u,f,d){c.push(u+","+f),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],f=aa(c["!ref"]),d,m=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){o(u,-1,0,"BOT");for(var y=f.s.c;y<=f.e.c;++y){var v=rn({r:p,c:y});if(d=m?(c[p]||[])[y]:c[v],!d){o(u,1,0,"");continue}switch(d.t){case"n":var g=d.w;!g&&d.v!=null&&(g=d.v),g==null?d.f&&!d.F?o(u,1,0,"="+d.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=cu(d.z||Qr[14],Ri(ls(d.v)))),o(u,0,d.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var b=`\r
`,w=u.join(b);return w}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),xR=(function(){function e(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,m){for(var p=d.split(`
`),y=-1,v=-1,g=0,b=[];g!==p.length;++g){var w=p[g].trim().split(":");if(w[0]==="cell"){var j=Is(w[1]);if(b.length<=j.r)for(y=b.length;y<=j.r;++y)b[y]||(b[y]=[]);switch(y=j.r,v=j.c,w[2]){case"t":b[y][v]=e(w[3]);break;case"v":b[y][v]=+w[3];break;case"vtf":var N=w[w.length-1];case"vtc":w[3]==="nl"?b[y][v]=!!+w[4]:b[y][v]=+w[4],w[2]=="vtf"&&(b[y][v]=[b[y][v],N])}}}return m&&m.sheetRows&&(b=b.slice(0,m.sheetRows)),b}function n(d,m){return rm(r(d,m),m)}function s(d,m){return y0(n(d,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var m=[],p=[],y,v="",g=Gl(d["!ref"]),b=Array.isArray(d),w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j)if(v=rn({r:w,c:j}),y=b?(d[w]||[])[j]:d[v],!(!y||y.v==null||y.t==="z")){switch(p=["cell",v,"t"],y.t){case"s":case"str":p.push(t(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=t(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var N=Ri(ls(y.v));p[2]="vtc",p[3]="nd",p[4]=""+N,p[5]=y.w||cu(y.z||Qr[14],N);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(d){return[i,o,l,o,u(d),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),Up=(function(){function e(f,d,m,p,y){y.raw?d[m][p]=f:f===""||(f==="TRUE"?d[m][p]=!0:f==="FALSE"?d[m][p]=!1:isNaN($u(f))?isNaN(Bp(f).getDate())?d[m][p]=f:d[m][p]=ls(f):d[m][p]=$u(f))}function t(f,d){var m=d||{},p=[];if(!f||f.length===0)return p;for(var y=f.split(/[\r\n]/),v=y.length-1;v>=0&&y[v].length===0;)--v;for(var g=10,b=0,w=0;w<=v;++w)b=y[w].indexOf(" "),b==-1?b=y[w].length:b++,g=Math.max(g,b);for(w=0;w<=v;++w){p[w]=[];var j=0;for(e(y[w].slice(0,g).trim(),p,w,j,m),j=1;j<=(y[w].length-g)/10+1;++j)e(y[w].slice(g+(j-1)*10,g+j*10).trim(),p,w,j,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var d={},m=!1,p=0,y=0;p<f.length;++p)(y=f.charCodeAt(p))==34?m=!m:!m&&y in r&&(d[y]=(d[y]||0)+1);y=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p]);if(!y.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p])}return y.sort(function(v,g){return v[0]-g[0]||n[v[1]]-n[g[1]]}),r[y.pop()[1]]||44}function i(f,d){var m=d||{},p="",y=m.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=s(f.slice(0,1024)):m&&m.FS?p=m.FS:p=s(f.slice(0,1024));var g=0,b=0,w=0,j=0,N=0,S=p.charCodeAt(0),P=!1,A=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var I=m.dateNF!=null?soe(m.dateNF):null;function B(){var C=f.slice(j,N),E={};if(C.charAt(0)=='"'&&C.charAt(C.length-1)=='"'&&(C=C.slice(1,-1).replace(/""/g,'"')),C.length===0)E.t="z";else if(m.raw)E.t="s",E.v=C;else if(C.trim().length===0)E.t="s",E.v=C;else if(C.charCodeAt(0)==61)C.charCodeAt(1)==34&&C.charCodeAt(C.length-1)==34?(E.t="s",E.v=C.slice(2,-1).replace(/""/g,'"')):Dfe(C)?(E.t="n",E.f=C.slice(1)):(E.t="s",E.v=C);else if(C=="TRUE")E.t="b",E.v=!0;else if(C=="FALSE")E.t="b",E.v=!1;else if(!isNaN(w=$u(C)))E.t="n",m.cellText!==!1&&(E.w=C),E.v=w;else if(!isNaN(Bp(C).getDate())||I&&C.match(I)){E.z=m.dateNF||Qr[14];var M=0;I&&C.match(I)&&(C=ioe(C,m.dateNF,C.match(I)||[]),M=1),m.cellDates?(E.t="d",E.v=ls(C,M)):(E.t="n",E.v=Ri(ls(C,M))),m.cellText!==!1&&(E.w=cu(E.z,E.v instanceof Date?Ri(E.v):E.v)),m.cellNF||delete E.z}else E.t="s",E.v=C;if(E.t=="z"||(m.dense?(y[g]||(y[g]=[]),y[g][b]=E):y[rn({c:b,r:g})]=E),j=N+1,T=f.charCodeAt(j),v.e.c<b&&(v.e.c=b),v.e.r<g&&(v.e.r=g),A==S)++b;else if(b=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;N<f.length;++N)switch(A=f.charCodeAt(N)){case 34:T===34&&(P=!P);break;case S:case 10:case 13:if(!P&&B())break e;break}return N-j>0&&B(),y["!ref"]=bn(v),y}function o(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,d):rm(t(f,d),d)}function l(f,d){var m="",p=d.type=="string"?[0,0,0,0]:SS(f,d);switch(d.type){case"base64":m=Nc(f);break;case"binary":m=f;break;case"buffer":d.codepage==65001?m=f.toString("utf8"):d.codepage&&typeof Hx<"u"||(m=On&&Buffer.isBuffer(f)?f.toString("binary"):v0(f));break;case"array":m=lh(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ua(m.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?m=Ua(m):d.type=="binary"&&typeof Hx<"u",m.slice(0,19)=="socialcalc:version:"?xR.to_sheet(d.type=="string"?m:Ua(m),d):o(m,d)}function c(f,d){return y0(l(f,d),d)}function u(f){for(var d=[],m=aa(f["!ref"]),p,y=Array.isArray(f),v=m.s.r;v<=m.e.r;++v){for(var g=[],b=m.s.c;b<=m.e.c;++b){var w=rn({r:v,c:b});if(p=y?(f[v]||[])[b]:f[w],!p||p.v==null){g.push("          ");continue}for(var j=(p.w||(gf(p),p.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(b===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}})();function bue(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=pR.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Up.to_workbook(e,t)}}var Q0=(function(){function e(O,z,H){if(O){po(O,O.l||0);for(var R=H.Enum||ee;O.l<O.length;){var K=O.read_shift(2),le=R[K]||R[65535],he=O.read_shift(2),ie=O.l+he,ce=le.f&&le.f(O,he,H);if(O.l=ie,z(ce,le,K))return}}}function t(O,z){switch(z.type){case"base64":return r(gc(Nc(O)),z);case"binary":return r(gc(O),z);case"buffer":case"array":return r(O,z)}throw"Unsupported type "+z.type}function r(O,z){if(!O)return O;var H=z||{},R=H.dense?[]:{},K="Sheet1",le="",he=0,ie={},ce=[],De=[],ne={s:{r:0,c:0},e:{r:0,c:0}},Ue=H.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)H.Enum=ee,e(O,function(ve,ye,Ae){switch(Ae){case 0:H.vers=ve,ve>=4096&&(H.qpro=!0);break;case 6:ne=ve;break;case 204:ve&&(le=ve);break;case 222:le=ve;break;case 15:case 51:H.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:Ae==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=H.dateNF||Qr[14],H.cellDates&&(ve[1].t="d",ve[1].v=ab(ve[1].v))),H.qpro&&ve[3]>he&&(R["!ref"]=bn(ne),ie[K]=R,ce.push(K),R=H.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},he=ve[3],K=le||"Sheet"+(he+1),le="");var pe=H.dense?(R[ve[0].r]||[])[ve[0].c]:R[rn(ve[0])];if(pe){pe.t=ve[1].t,pe.v=ve[1].v,ve[1].z!=null&&(pe.z=ve[1].z),ve[1].f!=null&&(pe.f=ve[1].f);break}H.dense?(R[ve[0].r]||(R[ve[0].r]=[]),R[ve[0].r][ve[0].c]=ve[1]):R[rn(ve[0])]=ve[1];break}},H);else if(O[2]==26||O[2]==14)H.Enum=W,O[2]==14&&(H.qpro=!0,O.l=0),e(O,function(ve,ye,Ae){switch(Ae){case 204:K=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>he&&(R["!ref"]=bn(ne),ie[K]=R,ce.push(K),R=H.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},he=ve[3],K="Sheet"+(he+1)),Ue>0&&ve[0].r>=Ue)break;H.dense?(R[ve[0].r]||(R[ve[0].r]=[]),R[ve[0].r][ve[0].c]=ve[1]):R[rn(ve[0])]=ve[1],ne.e.c<ve[0].c&&(ne.e.c=ve[0].c),ne.e.r<ve[0].r&&(ne.e.r=ve[0].r);break;case 27:ve[14e3]&&(De[ve[14e3][0]]=ve[14e3][1]);break;case 1537:De[ve[0]]=ve[1],ve[0]==he&&(K=ve[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(R["!ref"]=bn(ne),ie[le||K]=R,ce.push(le||K),!De.length)return{SheetNames:ce,Sheets:ie};for(var Ce={},de=[],Y=0;Y<De.length;++Y)ie[ce[Y]]?(de.push(De[Y]||ce[Y]),Ce[De[Y]]=ie[De[Y]]||ie[ce[Y]]):(de.push(De[Y]),Ce[De[Y]]={"!ref":"A1"});return{SheetNames:de,Sheets:Ce}}function n(O,z){var H=z||{};if(+H.codepage>=0&&Ru(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var R=Vl(),K=aa(O["!ref"]),le=Array.isArray(O),he=[];fr(R,0,i(1030)),fr(R,6,c(K));for(var ie=Math.min(K.e.r,8191),ce=K.s.r;ce<=ie;++ce)for(var De=si(ce),ne=K.s.c;ne<=K.e.c;++ne){ce===K.s.r&&(he[ne]=Ps(ne));var Ue=he[ne]+De,Ce=le?(O[ce]||[])[ne]:O[Ue];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")(Ce.v|0)==Ce.v&&Ce.v>=-32768&&Ce.v<=32767?fr(R,13,p(ce,ne,Ce.v)):fr(R,14,v(ce,ne,Ce.v));else{var de=gf(Ce);fr(R,15,d(ce,ne,de.slice(0,239)))}}return fr(R,1),R.end()}function s(O,z){var H=z||{};if(+H.codepage>=0&&Ru(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var R=Vl();fr(R,0,o(O));for(var K=0,le=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&fr(R,27,Q(O.SheetNames[K],le++));var he=0;for(K=0;K<O.SheetNames.length;++K){var ie=O.Sheets[O.SheetNames[K]];if(!(!ie||!ie["!ref"])){for(var ce=aa(ie["!ref"]),De=Array.isArray(ie),ne=[],Ue=Math.min(ce.e.r,8191),Ce=ce.s.r;Ce<=Ue;++Ce)for(var de=si(Ce),Y=ce.s.c;Y<=ce.e.c;++Y){Ce===ce.s.r&&(ne[Y]=Ps(Y));var ve=ne[Y]+de,ye=De?(ie[Ce]||[])[Y]:ie[ve];if(!(!ye||ye.t=="z"))if(ye.t=="n")fr(R,23,B(Ce,Y,he,ye.v));else{var Ae=gf(ye);fr(R,22,A(Ce,Y,he,Ae.slice(0,239)))}}++he}}return fr(R,1),R.end()}function i(O){var z=Ft(2);return z.write_shift(2,O),z}function o(O){var z=Ft(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var H=0,R=0,K=0,le=0;le<O.SheetNames.length;++le){var he=O.SheetNames[le],ie=O.Sheets[he];if(!(!ie||!ie["!ref"])){++K;var ce=Gl(ie["!ref"]);H<ce.e.r&&(H=ce.e.r),R<ce.e.c&&(R=ce.e.c)}}return H>8191&&(H=8191),z.write_shift(2,H),z.write_shift(1,K),z.write_shift(1,R),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function l(O,z,H){var R={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&H.qpro?(R.s.c=O.read_shift(1),O.l++,R.s.r=O.read_shift(2),R.e.c=O.read_shift(1),O.l++,R.e.r=O.read_shift(2),R):(R.s.c=O.read_shift(2),R.s.r=O.read_shift(2),z==12&&H.qpro&&(O.l+=2),R.e.c=O.read_shift(2),R.e.r=O.read_shift(2),z==12&&H.qpro&&(O.l+=2),R.s.c==65535&&(R.s.c=R.e.c=R.s.r=R.e.r=0),R)}function c(O){var z=Ft(8);return z.write_shift(2,O.s.c),z.write_shift(2,O.s.r),z.write_shift(2,O.e.c),z.write_shift(2,O.e.r),z}function u(O,z,H){var R=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(R[0].c=O.read_shift(1),R[3]=O.read_shift(1),R[0].r=O.read_shift(2),O.l+=2):(R[2]=O.read_shift(1),R[0].c=O.read_shift(2),R[0].r=O.read_shift(2)),R}function f(O,z,H){var R=O.l+z,K=u(O,z,H);if(K[1].t="s",H.vers==20768){O.l++;var le=O.read_shift(1);return K[1].v=O.read_shift(le,"utf8"),K}return H.qpro&&O.l++,K[1].v=O.read_shift(R-O.l,"cstr"),K}function d(O,z,H){var R=Ft(7+H.length);R.write_shift(1,255),R.write_shift(2,z),R.write_shift(2,O),R.write_shift(1,39);for(var K=0;K<R.length;++K){var le=H.charCodeAt(K);R.write_shift(1,le>=128?95:le)}return R.write_shift(1,0),R}function m(O,z,H){var R=u(O,z,H);return R[1].v=O.read_shift(2,"i"),R}function p(O,z,H){var R=Ft(7);return R.write_shift(1,255),R.write_shift(2,z),R.write_shift(2,O),R.write_shift(2,H,"i"),R}function y(O,z,H){var R=u(O,z,H);return R[1].v=O.read_shift(8,"f"),R}function v(O,z,H){var R=Ft(13);return R.write_shift(1,255),R.write_shift(2,z),R.write_shift(2,O),R.write_shift(8,H,"f"),R}function g(O,z,H){var R=O.l+z,K=u(O,z,H);if(K[1].v=O.read_shift(8,"f"),H.qpro)O.l=R;else{var le=O.read_shift(2);N(O.slice(O.l,O.l+le),K),O.l+=le}return K}function b(O,z,H){var R=z&32768;return z&=-32769,z=(R?O:0)+(z>=8192?z-16384:z),(R?"":"$")+(H?Ps(z):si(z))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(O,z){po(O,0);for(var H=[],R=0,K="",le="",he="",ie="";O.l<O.length;){var ce=O[O.l++];switch(ce){case 0:H.push(O.read_shift(8,"f"));break;case 1:le=b(z[0].c,O.read_shift(2),!0),K=b(z[0].r,O.read_shift(2),!1),H.push(le+K);break;case 2:{var De=b(z[0].c,O.read_shift(2),!0),ne=b(z[0].r,O.read_shift(2),!1);le=b(z[0].c,O.read_shift(2),!0),K=b(z[0].r,O.read_shift(2),!1),H.push(De+ne+":"+le+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(O.read_shift(2));break;case 6:{for(var Ue="";ce=O[O.l++];)Ue+=String.fromCharCode(ce);H.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:ie=H.pop(),he=H.pop(),H.push(["AND","OR"][ce-20]+"("+he+","+ie+")");break;default:if(ce<32&&j[ce])ie=H.pop(),he=H.pop(),H.push(he+j[ce]+ie);else if(w[ce]){if(R=w[ce][1],R==69&&(R=O[O.l++]),R>H.length){console.error("WK1 bad formula parse 0x"+ce.toString(16)+":|"+H.join("|")+"|");return}var Ce=H.slice(-R);H.length-=R,H.push(w[ce][0]+"("+Ce.join(",")+")")}else return ce<=7?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=24?console.error("WK1 unsupported op "+ce.toString(16)):ce<=30?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=115?console.error("WK1 unsupported function opcode "+ce.toString(16)):console.error("WK1 unrecognized opcode "+ce.toString(16))}}H.length==1?z[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function S(O){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=O.read_shift(2),z[3]=O[O.l++],z[0].c=O[O.l++],z}function P(O,z){var H=S(O);return H[1].t="s",H[1].v=O.read_shift(z-4,"cstr"),H}function A(O,z,H,R){var K=Ft(6+R.length);K.write_shift(2,O),K.write_shift(1,H),K.write_shift(1,z),K.write_shift(1,39);for(var le=0;le<R.length;++le){var he=R.charCodeAt(le);K.write_shift(1,he>=128?95:he)}return K.write_shift(1,0),K}function T(O,z){var H=S(O);H[1].v=O.read_shift(2);var R=H[1].v>>1;if(H[1].v&1)switch(R&7){case 0:R=(R>>3)*5e3;break;case 1:R=(R>>3)*500;break;case 2:R=(R>>3)/20;break;case 3:R=(R>>3)/200;break;case 4:R=(R>>3)/2e3;break;case 5:R=(R>>3)/2e4;break;case 6:R=(R>>3)/16;break;case 7:R=(R>>3)/64;break}return H[1].v=R,H}function I(O,z){var H=S(O),R=O.read_shift(4),K=O.read_shift(4),le=O.read_shift(2);if(le==65535)return R===0&&K===3221225472?(H[1].t="e",H[1].v=15):R===0&&K===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var he=le&32768;return le=(le&32767)-16446,H[1].v=(1-he*2)*(K*Math.pow(2,le+32)+R*Math.pow(2,le)),H}function B(O,z,H,R){var K=Ft(14);if(K.write_shift(2,O),K.write_shift(1,H),K.write_shift(1,z),R==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var le=0,he=0,ie=0,ce=0;return R<0&&(le=1,R=-R),he=Math.log2(R)|0,R/=Math.pow(2,he-31),ce=R>>>0,(ce&2147483648)==0&&(R/=2,++he,ce=R>>>0),R-=ce,ce|=2147483648,ce>>>=0,R*=Math.pow(2,32),ie=R>>>0,K.write_shift(4,ie),K.write_shift(4,ce),he+=16383+(le?32768:0),K.write_shift(2,he),K}function C(O,z){var H=I(O);return O.l+=z-14,H}function E(O,z){var H=S(O),R=O.read_shift(4);return H[1].v=R>>6,H}function M(O,z){var H=S(O),R=O.read_shift(8,"f");return H[1].v=R,H}function q(O,z){var H=M(O);return O.l+=z-10,H}function G(O,z){return O[O.l+z-1]==0?O.read_shift(z,"cstr"):""}function Z(O,z){var H=O[O.l++];H>z-1&&(H=z-1);for(var R="";R.length<H;)R+=String.fromCharCode(O[O.l++]);return R}function te(O,z,H){if(!(!H.qpro||z<21)){var R=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(z-21,"cstr");return[R,K]}}function ae(O,z){for(var H={},R=O.l+z;O.l<R;){var K=O.read_shift(2);if(K==14e3){for(H[K]=[0,""],H[K][0]=O.read_shift(2);O[O.l];)H[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return H}function Q(O,z){var H=Ft(5+O.length);H.write_shift(2,14e3),H.write_shift(2,z);for(var R=0;R<O.length;++R){var K=O.charCodeAt(R);H[H.l++]=K>127?95:K}return H[H.l++]=0,H}var ee={0:{n:"BOF",f:bi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:C},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:E},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function wue(e){var t={},r=e.match(Vo),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=an(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=$3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Nue=(function(){var e=Gx("t"),t=Gx("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:na(o[1])},c=i.match(t);return c&&(l.s=wue(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),jue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),kue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Sue=/<(?:\w+:)?r>/,_ue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function fS(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=na(Ua(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ua(e),r&&(n.h=Q3(n.t))):e.match(Sue)&&(n.r=Ua(e),n.t=na(Ua((e.replace(_ue,"").match(kue)||[]).join("").replace(Vo,""))),r&&(n.h=jue(Nue(n.r)))),n):{t:""}}var Aue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Cue=/<(?:\w+:)?(?:si|sstItem)>/g,Eue=/<\/(?:\w+:)?(?:si|sstItem)>/;function Tue(e,t){var r=[],n="";if(!e)return r;var s=e.match(Aue);if(s){n=s[2].replace(Cue,"").split(Eue);for(var i=0;i!=n.length;++i){var o=fS(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=an(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Oue=/^\s|\s$|[\t\n\r]/;function gR(e,t){if(!t.bookSST)return"";var r=[ii];r[r.length]=ur("sst",null,{xmlns:vh[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Oue)&&(i+=' xml:space="preserve"'),i+=">"+Aa(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Pue(e){return[e.read_shift(4),e.read_shift(4)]}function Iue(e,t){var r=[],n=!1;return Nf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Due(e,t){return t||(t=Ft(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Lue=Woe;function Fue(e){var t=Vl();Gt(t,159,Due(e));for(var r=0;r<e.length;++r)Gt(t,19,Lue(e[r]));return Gt(t,160),t.end()}function vR(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function df(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Mue(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=df(e,4),t.U=df(e,4),t.W=df(e,4),t}function Rue(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Bue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Rue(e));return t}function Uue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function que(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=df(e,4),t.U=df(e,4),t.W=df(e,4),t}function $ue(e){var t=que(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function yR(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function bR(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function zue(e){var t=df(e);switch(t.Minor){case 2:return[t.Minor,Hue(e)];case 3:return[t.Minor,Wue()];case 4:return[t.Minor,Vue(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Hue(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=yR(e,r),s=bR(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Wue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Vue(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Vo,function(i){var o=an(i);switch(Pd(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Gue(e,t){var r={},n=r.EncryptionVersionInfo=df(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=yR(e,s),t-=s,r.EncryptionVerifier=bR(e,t),r}function Kue(e){var t={},r=t.EncryptionVersionInfo=df(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function hS(e){var t=0,r,n=vR(e),s=n.length+1,i,o,l,c,u;for(r=i0(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var wR=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var f=o[u],d=0;d!=7;++d)f&64&&(l^=r[c]),f*=2,--c;return l};return function(o){for(var l=vR(o),c=i(l),u=l.length,f=i0(16),d=0;d!=16;++d)f[d]=0;var m,p,y;for((u&1)===1&&(m=c>>8,f[u]=s(e[0],m),--u,m=c&255,p=l[l.length-1],f[u]=s(p,m));u>0;)--u,m=c>>8,f[u]=s(l[u],m),--u,m=c&255,f[u]=s(l[u],m);for(u=15,y=15-l.length;y>0;)m=c>>8,f[u]=s(e[y],m),--u,--y,m=c&255,f[u]=s(l[u],m),--u,--y;return f}})(),Xue=function(e,t,r,n,s){s||(s=t),n||(n=wR(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},Yue=function(e){var t=0,r=wR(e);return function(n){var s=Xue("",n,t,r);return t=s[1],s[0]}};function Jue(e,t,r,n){var s={key:bi(e),verificationBytes:bi(e)};return r.password&&(s.verifier=hS(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Yue(r.password)),s}function Que(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Kue(e):n.Data=Gue(e,t),n}function Zue(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Que(e,t-2,n):Jue(e,r.biff>=8?t:t-2,r,n),n}var NR=(function(){function e(s,i){switch(i.type){case"base64":return t(Nc(s),i);case"binary":return t(s,i);case"buffer":return t(On&&Buffer.isBuffer(s)?s.toString("binary"):v0(s),i);case"array":return t(lh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,d){Array.isArray(l)&&(l[d]=[]);for(var m=/\\\w+\b/g,p=0,y,v=-1;y=m.exec(f);){switch(y[0]){case"\\cell":var g=f.slice(p,m.lastIndex-y[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var b={v:g,t:"s"};Array.isArray(l)?l[d][v]=b:l[rn({r:d,c:v})]=b}break}p=m.lastIndex}v>u.e.c&&(u.e.c=v)}),l["!ref"]=bn(u),l}function r(s,i){return y0(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=aa(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var d=rn({r:u,c:f});l=c?(s[u]||[])[f]:s[d],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(gf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function ede(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Jx(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function tde(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,u=s+i;switch(c=o/(u>1?2-u:u),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function rde(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function uy(e,t){if(t===0)return e;var r=tde(ede(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Jx(rde(r))}var jR=6,nde=15,ade=1,qo=jR;function Qx(e){return Math.floor((e+Math.round(128/qo)/256)*qo)}function Zx(e){return Math.floor((e-5)/qo*100+.5)/100}function dy(e){return Math.round((e*qo+5)/qo*256)/256}function rj(e){return dy(Zx(Qx(e)))}function pS(e){var t=Math.abs(e-rj(e)),r=qo;if(t>.005)for(qo=ade;qo<nde;++qo)Math.abs(e-rj(e))<=t&&(t=Math.abs(e-rj(e)),r=qo);qo=r}function o0(e){e.width?(e.wpx=Qx(e.width),e.wch=Zx(e.wpx),e.MDW=qo):e.wpx?(e.wch=Zx(e.wpx),e.width=dy(e.wch),e.MDW=qo):typeof e.wch=="number"&&(e.width=dy(e.wch),e.wpx=Qx(e.width),e.MDW=qo),e.customWidth&&delete e.customWidth}var sde=96,kR=sde;function eg(e){return e*96/kR}function qp(e){return e*kR/96}var ide={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ode(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(Vo)||[]).forEach(function(o){var l=an(o);switch(Pd(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=ss(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=ss(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function lde(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(Vo)||[]).forEach(function(o){var l=an(o);switch(Pd(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function cde(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(Vo)||[]).forEach(function(o){var l=an(o);switch(Pd(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ua(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?ss(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?ss(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?ss(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?ss(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?ss(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?ss(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?ss(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=$3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=ss(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=Y0[s.color.index];s.color.index==81&&(c=Y0[1]),c||(c=Y0[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=uy(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function ude(e,t,r){t.NumberFmt=[];for(var n=Hs(Qr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Qr[n[s]];var i=e[0].match(Vo);if(i)for(s=0;s<i.length;++s){var o=an(i[s]);switch(Pd(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=na(Ua(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}uf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function dde(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=ur("numFmt",null,{numFmtId:n,formatCode:Aa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=ur("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var jv=["numFmtId","fillId","fontId","borderId","xfId"],kv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function fde(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Vo)||[]).forEach(function(i){var o=an(i),l=0;switch(Pd(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<jv.length;++l)n[jv[l]]&&(n[jv[l]]=parseInt(n[jv[l]],10));for(l=0;l<kv.length;++l)n[kv[l]]&&(n[kv[l]]=ss(n[kv[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ss(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function hde(e){var t=[];return t[t.length]=ur("cellXfs",null),e.forEach(function(r){t[t.length]=ur("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=ur("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var pde=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=l.match(t))&&ude(d,f,u),(d=l.match(s))&&cde(d,f,c,u),(d=l.match(n))&&lde(d,f,c,u),(d=l.match(i))&&ode(d,f,c,u),(d=l.match(r))&&fde(d,f,u),f}})();function SR(e,t){var r=[ii,ur("styleSheet",null,{xmlns:vh[0],"xmlns:vt":Li.vt})],n;return e.SSF&&(n=dde(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=hde(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function mde(e,t){var r=e.read_shift(2),n=Ho(e);return[r,n]}function xde(e,t,r){r||(r=Ft(6+4*t.length)),r.write_shift(2,e),eo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function gde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Qoe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Joe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ho(e),n}function vde(e,t){t||(t=Ft(153)),t.write_shift(2,e.sz*20),Zoe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),oy(e.color,t);var n=0;return n=2,t.write_shift(1,n),eo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var yde=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],nj,bde=Wo;function t8(e,t){t||(t=Ft(84)),nj||(nj=rb(yde));var r=nj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(oy({auto:1},t),oy({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function wde(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function _R(e,t,r){r||(r=Ft(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Sm(e,t){return t||(t=Ft(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Nde=Wo;function jde(e,t){return t||(t=Ft(51)),t.write_shift(1,0),Sm(null,t),Sm(null,t),Sm(null,t),Sm(null,t),Sm(null,t),t.length>t.l?t.slice(0,t.l):t}function kde(e,t){return t||(t=Ft(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),iy(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Sde(e,t,r){var n=Ft(2052);return n.write_shift(4,e),iy(t,n),iy(r,n),n.length>n.l?n.slice(0,n.l):n}function _de(e,t,r){var n={};n.NumberFmt=[];for(var s in Qr)n.NumberFmt[s]=Qr[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Nf(e,function(c,u,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],uf(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=uy(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function Ade(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Gt(e,615,zu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Gt(e,44,xde(s,t[s]))}),Gt(e,616))}}function Cde(e){var t=1;Gt(e,611,zu(t)),Gt(e,43,vde({sz:12,color:{theme:1},name:"Calibri",family:2})),Gt(e,612)}function Ede(e){var t=2;Gt(e,603,zu(t)),Gt(e,45,t8({patternType:"none"})),Gt(e,45,t8({patternType:"gray125"})),Gt(e,604)}function Tde(e){var t=1;Gt(e,613,zu(t)),Gt(e,46,jde()),Gt(e,614)}function Ode(e){var t=1;Gt(e,626,zu(t)),Gt(e,47,_R({numFmtId:0},65535)),Gt(e,627)}function Pde(e,t){Gt(e,617,zu(t.length)),t.forEach(function(r){Gt(e,47,_R(r,0))}),Gt(e,618)}function Ide(e){var t=1;Gt(e,619,zu(t)),Gt(e,48,kde({xfId:0,name:"Normal"})),Gt(e,620)}function Dde(e){var t=0;Gt(e,505,zu(t)),Gt(e,506)}function Lde(e){var t=0;Gt(e,508,Sde(t,"TableStyleMedium9","PivotStyleMedium4")),Gt(e,509)}function Fde(e,t){var r=Vl();return Gt(r,278),Ade(r,e.SSF),Cde(r),Ede(r),Tde(r),Ode(r),Pde(r,t.cellXfs),Ide(r),Dde(r),Lde(r),Gt(r,279),r.end()}var Mde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Rde(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Vo)||[]).forEach(function(s){var i=an(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Mde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Bde(){}function Ude(){}var qde=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,$de=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,zde=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Hde(e,t,r){t.themeElements={};var n;[["clrScheme",qde,Rde],["fontScheme",$de,Bde],["fmtScheme",zde,Ude]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Wde=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function AR(e,t){(!e||e.length===0)&&(e=mS());var r,n={};if(!(r=e.match(Wde)))throw new Error("themeElements not found in theme");return Hde(r[0],n,t),n.raw=e,n}function mS(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ii];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Vde(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=yM(i,{type:"array"})}catch{return}var l=vc(o,"theme/theme/theme1.xml",!0);if(l)return AR(l,r)}}function Gde(e){return e.read_shift(4)}function Kde(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Xde(e,4);break;case 2:t.xclrValue=iR(e);break;case 3:t.xclrValue=Gde(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Xde(e,t){return Wo(e,t)}function Yde(e,t){return Wo(e,t)}function Jde(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Kde(e);break;case 6:n[1]=Yde(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Qde(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Jde(e,r-e.l));return{ixfe:n,ext:i}}function Zde(e,t){t.forEach(function(r){r[0]})}function efe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ho(e)}}function tfe(e){var t=Ft(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),eo(e.name,t),t.slice(0,t.l)}function rfe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function nfe(e){var t=Ft(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function afe(e,t){var r=Ft(8+2*t.length);return r.write_shift(4,e),eo(t,r),r.slice(0,r.l)}function sfe(e){return e.l+=4,e.read_shift(4)!=0}function ife(e,t){var r=Ft(8);return r.write_shift(4,e),r.write_shift(4,1),r}function ofe(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Nf(e,function(c,u,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(d){l==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):l==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function lfe(){var e=Vl();return Gt(e,332),Gt(e,334,zu(1)),Gt(e,335,tfe({name:"XLDAPR",version:12e4,flags:3496657072})),Gt(e,336),Gt(e,339,afe(1,"XLDAPR")),Gt(e,52),Gt(e,35,zu(514)),Gt(e,4096,zu(0)),Gt(e,4097,eu(1)),Gt(e,36),Gt(e,53),Gt(e,340),Gt(e,337,ife(1)),Gt(e,51,nfe([[1,0]])),Gt(e,338),Gt(e,333),e.end()}function cfe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(Vo,function(l){var c=an(l);switch(Pd(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function CR(){var e=[ii];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function ufe(e){var t=[];if(!e)return t;var r=1;return(e.match(Vo)||[]).forEach(function(n){var s=an(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function dfe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=rn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function ffe(e,t,r){var n=[];return Nf(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function hfe(e,t,r,n){if(!e)return e;var s=n||{},i=!1;Nf(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function pfe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var tp=1024;function ER(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ur("xml",null,{"xmlns:v":pc.v,"xmlns:o":pc.o,"xmlns:x":pc.x,"xmlns:mv":pc.mv}).replace(/\/>/,">"),ur("o:shapelayout",ur("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ur("v:shapetype",[ur("v:stroke",null,{joinstyle:"miter"}),ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];tp<e*1e3;)tp+=1e3;return t.forEach(function(i){var o=Is(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ur("v:fill",c,l),f={on:"t",obscured:"t"};++tp,s=s.concat(["<v:shape"+Kx({id:"_x0000_s"+tp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ur("v:shadow",null,f),ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),mo("x:AutoFill","False"),mo("x:Row",String(o.r)),mo("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function r8(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=Is(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=aa(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=bn(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(f.a==n[d].id){f.a=n[d].name||f.a;break}}i.c.push(f)})}function mfe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=an(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Is(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var d=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!d&&!!d[1]&&fS(d[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function TR(e){var t=[ii,ur("comments",null,{xmlns:vh[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=Aa(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(Aa(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(mo("t",Aa(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(mo("t",Aa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function xfe(e,t){var r=[],n=!1,s={},i=0;return e.replace(Vo,function(l,c){var u=an(l);switch(Pd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function gfe(e,t,r){var n=[ii,ur("ThreadedComments",null,{xmlns:Li.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(ur("threadedComment",mo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function vfe(e,t){var r=[],n=!1;return e.replace(Vo,function(i){var o=an(i);switch(Pd(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function yfe(e){var t=[ii,ur("personList",null,{xmlns:Li.TCMNT,"xmlns:x":vh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function bfe(e){var t={};t.iauthor=e.read_shift(4);var r=Nh(e);return t.rfx=r.s,t.ref=rn(r.s),e.l+=16,t}function wfe(e,t){return t==null&&(t=Ft(36)),t.write_shift(4,e[1].iauthor),nm(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Nfe=Ho;function jfe(e){return eo(e.slice(0,54))}function kfe(e,t){var r=[],n=[],s={},i=!1;return Nf(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Sfe(e){var t=Vl(),r=[];return Gt(t,628),Gt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Gt(t,632,jfe(s.a)))})}),Gt(t,631),Gt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Is(n[0]),e:Is(n[0])};Gt(t,635,wfe([i,s])),s.t&&s.t.length>0&&Gt(t,637,Goe(s)),Gt(t,636),delete s.iauthor})}),Gt(t,634),Gt(t,629),t.end()}var _fe="application/vnd.ms-office.vbaProject";function Afe(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Hr.write(t)}function Cfe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var OR=["xlsb","xlsm","xlam","biff8","xla"];function Efe(){return{"!type":"dialog"}}function Tfe(){return{"!type":"dialog"}}function Ofe(){return{"!type":"macro"}}function Pfe(){return{"!type":"macro"}}var cp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,c?u+=t.r:--u,s+(l?"":"$")+Ps(f)+(c?"":"$")+si(u)}return function(s,i){return t=i,s.replace(e,r)}})(),xS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,gS=(function(){return function(t,r){return t.replace(xS,function(n,s,i,o,l,c){var u=nS(o)-(i?0:r.c),f=rS(c)-(l?0:r.r),d=f==0?"":l?f+1:"["+f+"]",m=u==0?"":i?u+1:"["+u+"]";return s+"R"+d+"C"+m})}})();function PR(e,t){return e.replace(xS,function(r,n,s,i,o,l){return n+(s=="$"?s+i:Ps(nS(i)+t.c))+(o=="$"?o+l:si(rS(l)+t.r))})}function Ife(e,t,r){var n=Gl(t),s=n.s,i=Is(r),o={r:i.r-s.r,c:i.c-s.c};return PR(e,o)}function Dfe(e){return e.length!=1}function n8(e){return e.replace(/_xlfn\./g,"")}function gi(e){e.l+=1}function l0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function IR(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return DR(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=l0(e),l=l0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function DR(e){var t=l0(e),r=l0(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Lfe(e,t,r){if(r.biff<8)return DR(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=l0(e),o=l0(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function LR(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Ffe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=l0(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Ffe(e){var t=l0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Mfe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Rfe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Bfe(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Bfe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Ufe(e,t,r){var n=(e[e.l++]&96)>>5,s=IR(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function qfe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=IR(e,i,r);return[n,s,o]}function $fe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function zfe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Hfe(e,t,r){var n=(e[e.l++]&96)>>5,s=Lfe(e,t-1,r);return[n,s]}function Wfe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function a8(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Vfe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Gfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Kfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Xfe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Yfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function FR(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Jfe(e){return e.read_shift(2),FR(e)}function Qfe(e){return e.read_shift(2),FR(e)}function Zfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=LR(e,0,r);return[n,s]}function e0e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Rfe(e,0,r);return[n,s]}function t0e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=LR(e,0,r);return[n,s,i]}function r0e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[she[s],BR[s],n]}function n0e(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:a0e(e);return[s,(i[0]===0?BR:ahe)[i[1]]]}function a0e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function s0e(e,t,r){e.l+=r&&r.biff==2?3:4}function i0e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function o0e(e){return e.l++,jf[e.read_shift(1)]}function l0e(e){return e.l++,e.read_shift(2)}function c0e(e){return e.l++,e.read_shift(1)!==0}function u0e(e){return e.l++,$o(e)}function d0e(e,t,r){return e.l++,xg(e,t-1,r)}function f0e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Zs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=jf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=$o(e);break;case 2:r[1]=jh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function h0e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Nh:sb)(e));return s}function p0e(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=f0e(e,r.biff);return o}function m0e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function x0e(e,t,r){if(r.biff==5)return g0e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function g0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function v0e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function y0e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function b0e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function w0e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var N0e=Wo,j0e=Wo,k0e=Wo;function vg(e,t,r){return e.l+=2,[Mfe(e)]}function vS(e){return e.l+=6,[]}var S0e=vg,_0e=vS,A0e=vS,C0e=vg;function MR(e){return e.l+=2,[bi(e),e.read_shift(2)&1]}var E0e=vg,T0e=MR,O0e=vS,P0e=vg,I0e=vg,D0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function L0e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=D0e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function F0e(e){return e.l+=2,[e.read_shift(4)]}function M0e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function R0e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function B0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function U0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function q0e(e){return e.l+=4,[0,0]}var s8={1:{n:"PtgExp",f:i0e},2:{n:"PtgTbl",f:k0e},3:{n:"PtgAdd",f:gi},4:{n:"PtgSub",f:gi},5:{n:"PtgMul",f:gi},6:{n:"PtgDiv",f:gi},7:{n:"PtgPower",f:gi},8:{n:"PtgConcat",f:gi},9:{n:"PtgLt",f:gi},10:{n:"PtgLe",f:gi},11:{n:"PtgEq",f:gi},12:{n:"PtgGe",f:gi},13:{n:"PtgGt",f:gi},14:{n:"PtgNe",f:gi},15:{n:"PtgIsect",f:gi},16:{n:"PtgUnion",f:gi},17:{n:"PtgRange",f:gi},18:{n:"PtgUplus",f:gi},19:{n:"PtgUminus",f:gi},20:{n:"PtgPercent",f:gi},21:{n:"PtgParen",f:gi},22:{n:"PtgMissArg",f:gi},23:{n:"PtgStr",f:d0e},26:{n:"PtgSheet",f:M0e},27:{n:"PtgEndSheet",f:R0e},28:{n:"PtgErr",f:o0e},29:{n:"PtgBool",f:c0e},30:{n:"PtgInt",f:l0e},31:{n:"PtgNum",f:u0e},32:{n:"PtgArray",f:Wfe},33:{n:"PtgFunc",f:r0e},34:{n:"PtgFuncVar",f:n0e},35:{n:"PtgName",f:m0e},36:{n:"PtgRef",f:Zfe},37:{n:"PtgArea",f:Ufe},38:{n:"PtgMemArea",f:v0e},39:{n:"PtgMemErr",f:N0e},40:{n:"PtgMemNoMem",f:j0e},41:{n:"PtgMemFunc",f:y0e},42:{n:"PtgRefErr",f:b0e},43:{n:"PtgAreaErr",f:$fe},44:{n:"PtgRefN",f:e0e},45:{n:"PtgAreaN",f:Hfe},46:{n:"PtgMemAreaN",f:B0e},47:{n:"PtgMemNoMemN",f:U0e},57:{n:"PtgNameX",f:x0e},58:{n:"PtgRef3d",f:t0e},59:{n:"PtgArea3d",f:qfe},60:{n:"PtgRefErr3d",f:w0e},61:{n:"PtgAreaErr3d",f:zfe},255:{}},$0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},z0e={1:{n:"PtgElfLel",f:MR},2:{n:"PtgElfRw",f:P0e},3:{n:"PtgElfCol",f:S0e},6:{n:"PtgElfRwV",f:I0e},7:{n:"PtgElfColV",f:C0e},10:{n:"PtgElfRadical",f:E0e},11:{n:"PtgElfRadicalS",f:O0e},13:{n:"PtgElfColS",f:_0e},15:{n:"PtgElfColSV",f:A0e},16:{n:"PtgElfRadicalLel",f:T0e},25:{n:"PtgList",f:L0e},29:{n:"PtgSxName",f:F0e},255:{}},H0e={0:{n:"PtgAttrNoop",f:q0e},1:{n:"PtgAttrSemi",f:Yfe},2:{n:"PtgAttrIf",f:Kfe},4:{n:"PtgAttrChoose",f:Vfe},8:{n:"PtgAttrGoto",f:Gfe},16:{n:"PtgAttrSum",f:s0e},32:{n:"PtgAttrBaxcel",f:a8},33:{n:"PtgAttrBaxcel",f:a8},64:{n:"PtgAttrSpace",f:Jfe},65:{n:"PtgAttrSpaceSemi",f:Qfe},128:{n:"PtgAttrIfError",f:Xfe},255:{}};function yg(e,t,r,n){if(n.biff<8)return Wo(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=p0e(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=h0e(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Wo(e,t)),i}function bg(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=s8[i]||s8[$0e[i]],(i===24||i===25)&&(s=(i===24?z0e:H0e)[e[e.l+1]]),!s||!s.f?Wo(e,t):o.push([s.n,s.f(e,t,r)]);return o}function W0e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var V0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function G0e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function RR(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function i8(e,t,r){var n=RR(e,t,r);return n=="#REF"?n:G0e(n,r)}function Ro(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,u,f,d=0,m=0,p,y="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",b=0,w=e[0].length;b<w;++b){var j=e[0][b];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=$s(" ",e[0][v][1][1]);break;case 1:g=$s("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+g,v=-1}l.push(u+V0e[j[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Ym(j[1][1],o,s),l.push(Jm(f,i));break;case"PtgRefN":f=r?Ym(j[1][1],r,s):j[1][1],l.push(Jm(f,i));break;case"PtgRef3d":d=j[1][1],f=Ym(j[1][2],o,s),y=i8(n,d,s),l.push(y+"!"+Jm(f,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],S=j[1][1];N||(N=0),N&=127;var P=N==0?[]:l.slice(-N);l.length-=N,S==="User"&&(S=P.shift()),l.push(S+"("+P.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":p=LI(j[1][1],r?{s:r}:o,s),l.push(ZN(p,s));break;case"PtgArea":p=LI(j[1][1],o,s),l.push(ZN(p,s));break;case"PtgArea3d":d=j[1][1],p=j[1][2],y=i8(n,d,s),l.push(y+"!"+ZN(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=j[1][2];var A=(n.names||[])[m-1]||(n[0]||[])[m],T=A?A.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var I=j[1][1];m=j[1][2];var B;if(s.biff<=5)I<0&&(I=-I),n[I]&&(B=n[I][m]);else{var C="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][m]&&n[I][m].itab>0&&(C=n.SheetNames[n[I][m].itab-1]+"!"):C=n.SheetNames[m-1]+"!"),n[I]&&n[I][m])C+=n[I][m].Name;else if(n[0]&&n[0][m])C+=n[0][m].Name;else{var E=(RR(n,I,s)||"").split(";;");E[m-1]?C=E[m-1]:C+="SH33TJSERRX"}l.push(C);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var M="(",q=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:M=$s(" ",e[0][v][1][1])+M;break;case 3:M=$s("\r",e[0][v][1][1])+M;break;case 4:q=$s(" ",e[0][v][1][1])+q;break;case 5:q=$s("\r",e[0][v][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(M+l.pop()+q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:j[1][1],r:j[1][0]};var G={c:r.c,r:r.r};if(n.sharedf[rn(f)]){var Z=n.sharedf[rn(f)];l.push(Ro(Z,o,G,n,s))}else{var te=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(Ro(u[1],o,G,n,s)),te=!0;break}te||l.push(j[1])}break;case"PtgArray":l.push("{"+W0e(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&ae.indexOf(e[0][b][0])==-1){j=e[0][v];var Q=!0;switch(j[1][0]){case 4:Q=!1;case 0:g=$s(" ",j[1][1]);break;case 5:Q=!1;case 1:g=$s("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((Q?g:"")+l.pop()+(Q?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function K0e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Wo(e,t-2)];var l=bg(e,o,r);return t!==o+s&&(i=yg(e,t-o-s,l,r)),e.l=n,[l,i]}function X0e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Wo(e,t-2)];var l=bg(e,o,r);return t!==o+s&&(i=yg(e,t-o-s,l,r)),e.l=n,[l,i]}function Y0e(e,t,r,n){var s=e.l+t,i=bg(e,n,r),o;return s!==e.l&&(o=yg(e,s-e.l,i,r)),[i,o]}function J0e(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=bg(e,i,r);return i==65535?[[],Wo(e,t-2)]:(t!==i+2&&(s=yg(e,n-i-2,o,r)),[o,s])}function Q0e(e){var t;if(rf(e,e.l+6)!==65535)return[$o(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Z0e(e){if(e==null){var t=Ft(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return ch(e);return ch(0)}function aj(e,t,r){var n=e.l+t,s=Id(e);r.biff==2&&++e.l;var i=Q0e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=X0e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function ehe(e,t,r,n,s){var i=dh(t,r,s),o=Z0e(e.v),l=Ft(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Ft(e.bf.length),f=0;f<e.bf.length;++f)u[f]=e.bf[f];var d=Zi([i,o,l,u]);return d}function ib(e,t,r){var n=e.read_shift(4),s=bg(e,n,r),i=e.read_shift(4),o=i>0?yg(e,i,s,r):null;return[s,o]}var the=ib,ob=ib,rhe=ib,nhe=ib,ahe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},BR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},she={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function o8(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function ihe(e){var t="of:="+e.replace(xS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function sj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function ohe(e){return e.replace(/\./,"!")}var Zm={},up={},ex=typeof Map<"u";function yS(e,t,r){var n=0,s=e.length;if(r){if(ex?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ex?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(ex?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function lb(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(qo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Zx(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=dy(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Z0(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function b0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){uf(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function UR(e,t,r,n,s,i){try{n.cellNF&&(e.z=Qr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ls(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Qr[t]==null&&uf(aoe[t]||"General",t),e.t==="e")e.w=e.w||jf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Vx(e.v);else if(e.t==="d"){var o=Ri(e.v);(o|0)===o?e.w=o.toString(10):e.w=Vx(o)}else{if(e.v===void 0)return"";e.w=oh(e.v,up)}else e.t==="d"?e.w=cu(t,Ri(e.v),up):e.w=cu(t,e.v,up)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=uy(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=uy(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function lhe(e,t,r){if(e&&e["!ref"]){var n=aa(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function che(e,t){var r=aa(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=bn(r))}var uhe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,dhe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,fhe=/<(?:\w:)?hyperlink [^>]*>/mg,hhe=/"(\w*:\w*)"/,phe=/<(?:\w:)?col\b[^>]*[\/]?>/g,mhe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,xhe=/<(?:\w:)?pageMargins[^>]*\/>/g,qR=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ghe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,vhe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function yhe(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",d=e.match(dhe);d?(u=e.slice(0,d.index),f=e.slice(d.index+d[0].length)):u=f=e;var m=u.match(qR);m?bS(m[0],l,s,r):(m=u.match(ghe))&&whe(m[0],m[1]||"",l,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=u.slice(p,p+50).match(hhe);y&&che(l,y[1])}var v=u.match(vhe);v&&v[1]&&Dhe(v[1],s);var g=[];if(t.cellStyles){var b=u.match(phe);b&&Ehe(g,b)}d&&Mhe(d[1],l,t,c,i,o);var w=f.match(mhe);w&&(l["!autofilter"]=Ohe(w[0]));var j=[],N=f.match(uhe);if(N)for(p=0;p!=N.length;++p)j[p]=aa(N[p].slice(N[p].indexOf('"')+1));var S=f.match(fhe);S&&_he(l,S,n);var P=f.match(xhe);if(P&&(l["!margins"]=Ahe(an(P[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=bn(c)),t.sheetRows>0&&l["!ref"]){var A=aa(l["!ref"]);t.sheetRows<=+A.e.r&&(A.e.r=t.sheetRows-1,A.e.r>c.e.r&&(A.e.r=c.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>c.e.c&&(A.e.c=c.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),l["!fullref"]=l["!ref"],l["!ref"]=bn(A))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function bhe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+bn(e[r])+'"/>';return t+"</mergeCells>"}function bS(e,t,r,n){var s=an(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=na(Ua(s.codeName)))}function whe(e,t,r,n,s){bS(e.slice(0,e.indexOf(">")),r,n,s)}function Nhe(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=gd(Aa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+ur("outlinePr",null,u)}!i&&!l||(s[s.length]=ur("sheetPr",l,o))}var jhe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],khe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function She(e){var t={sheet:1};return jhe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),khe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=hS(e.password).toString(16).toUpperCase()),ur("sheetProtection",null,t)}function _he(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=an(Ua(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+na(i.location))):(i.Target="#"+na(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=aa(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var f=rn({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function Ahe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Che(e){return Z0(e),ur("pageMargins",null,e)}function Ehe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=an(t[n],!0);s.hidden&&(s.hidden=ss(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,pS(s.width)),o0(s);i<=o;)e[i++]=cs(s)}}function The(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=ur("col",null,lb(s,n)));return r[r.length]="</cols>",r.join("")}function Ohe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Phe(e,t,r,n){var s=typeof e.ref=="string"?e.ref:bn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Gl(s);o.s.r==o.e.r&&(o.e.r=Gl(t["!ref"]).e.r,s=bn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ur("autoFilter",null,{ref:s})}var Ihe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Dhe(e,t){t.Views||(t.Views=[{}]),(e.match(Ihe)||[]).forEach(function(r,n){var s=an(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),ss(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Lhe(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ur("sheetViews",ur("sheetView",null,s),{})}function Fhe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=jf[e.v];break;case"d":n&&n.cellDates?s=ls(e.v,-1).toISOString():(e=cs(e),e.t="n",s=""+(e.v=Ri(ls(e.v)))),typeof e.z>"u"&&(e.z=Qr[14]);break;default:s=e.v;break}var l=mo("v",Aa(s)),c={r:t},u=b0(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=mo("v",""+yS(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=ur("f",Aa(e.f),f)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),ur("c",l,c)}var Mhe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Gx("v"),o=Gx("f");return function(c,u,f,d,m,p){for(var y=0,v="",g=[],b=[],w=0,j=0,N=0,S="",P,A,T=0,I=0,B,C,E=0,M=0,q=Array.isArray(p.CellXf),G,Z=[],te=[],ae=Array.isArray(u),Q=[],ee={},W=!1,O=!!f.sheetStubs,z=c.split(t),H=0,R=z.length;H!=R;++H){v=z[H].trim();var K=v.length;if(K!==0){var le=0;e:for(y=0;y<K;++y)switch(v[y]){case">":if(v[y-1]!="/"){++y;break e}if(f&&f.cellStyles){if(A=an(v.slice(le,y),!0),T=A.r!=null?parseInt(A.r,10):T+1,I=-1,f.sheetRows&&f.sheetRows<T)continue;ee={},W=!1,A.ht&&(W=!0,ee.hpt=parseFloat(A.ht),ee.hpx=qp(ee.hpt)),A.hidden=="1"&&(W=!0,ee.hidden=!0),A.outlineLevel!=null&&(W=!0,ee.level=+A.outlineLevel),W&&(Q[T-1]=ee)}break;case"<":le=y;break}if(le>=y)break;if(A=an(v.slice(le,y),!0),T=A.r!=null?parseInt(A.r,10):T+1,I=-1,!(f.sheetRows&&f.sheetRows<T)){d.s.r>T-1&&(d.s.r=T-1),d.e.r<T-1&&(d.e.r=T-1),f&&f.cellStyles&&(ee={},W=!1,A.ht&&(W=!0,ee.hpt=parseFloat(A.ht),ee.hpx=qp(ee.hpt)),A.hidden=="1"&&(W=!0,ee.hidden=!0),A.outlineLevel!=null&&(W=!0,ee.level=+A.outlineLevel),W&&(Q[T-1]=ee)),g=v.slice(y).split(e);for(var he=0;he!=g.length&&g[he].trim().charAt(0)=="<";++he);for(g=g.slice(he),y=0;y!=g.length;++y)if(v=g[y].trim(),v.length!==0){if(b=v.match(r),w=y,j=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,b!=null&&b.length===2){for(w=0,S=b[1],j=0;j!=S.length&&!((N=S.charCodeAt(j)-64)<1||N>26);++j)w=26*w+N;--w,I=w}else++I;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,A=an(v.slice(0,j),!0),A.r||(A.r=rn({r:T-1,c:I})),S=v.slice(j),P={t:""},(b=S.match(i))!=null&&b[1]!==""&&(P.v=na(b[1])),f.cellFormula){if((b=S.match(o))!=null&&b[1]!==""){if(P.f=na(Ua(b[1])).replace(/\r\n/g,`
`),f.xlfn||(P.f=n8(P.f)),b[0].indexOf('t="array"')>-1)P.F=(S.match(s)||[])[1],P.F.indexOf(":")>-1&&Z.push([aa(P.F),P.F]);else if(b[0].indexOf('t="shared"')>-1){C=an(b[0]);var ie=na(Ua(b[1]));f.xlfn||(ie=n8(ie)),te[parseInt(C.si,10)]=[C,ie,A.r]}}else(b=S.match(/<f[^>]*\/>/))&&(C=an(b[0]),te[C.si]&&(P.f=Ife(te[C.si][1],te[C.si][2],A.r)));var ce=Is(A.r);for(j=0;j<Z.length;++j)ce.r>=Z[j][0].s.r&&ce.r<=Z[j][0].e.r&&ce.c>=Z[j][0].s.c&&ce.c<=Z[j][0].e.c&&(P.F=Z[j][1])}if(A.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(O)P.t="z";else continue;else P.t=A.t||"n";switch(d.s.c>I&&(d.s.c=I),d.e.c<I&&(d.e.c=I),P.t){case"n":if(P.v==""||P.v==null){if(!O)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!O)continue;P.t="z"}else B=Zm[parseInt(P.v,10)],P.v=B.t,P.r=B.r,f.cellHTML&&(P.h=B.h);break;case"str":P.t="s",P.v=P.v!=null?Ua(P.v):"",f.cellHTML&&(P.h=Q3(P.v));break;case"inlineStr":b=S.match(n),P.t="s",b!=null&&(B=fS(b[1]))?(P.v=B.t,f.cellHTML&&(P.h=B.h)):P.v="";break;case"b":P.v=ss(P.v);break;case"d":f.cellDates?P.v=ls(P.v,1):(P.v=Ri(ls(P.v,1)),P.t="n");break;case"e":(!f||f.cellText!==!1)&&(P.w=P.v),P.v=zM[P.v];break}if(E=M=0,G=null,q&&A.s!==void 0&&(G=p.CellXf[A.s],G!=null&&(G.numFmtId!=null&&(E=G.numFmtId),f.cellStyles&&G.fillId!=null&&(M=G.fillId))),UR(P,E,M,f,m,p),f.cellDates&&q&&P.t=="n"&&em(Qr[E])&&(P.t="d",P.v=ab(P.v)),A.cm&&f.xlmeta){var De=(f.xlmeta.Cell||[])[+A.cm-1];De&&De.type=="XLDAPR"&&(P.D=!0)}if(ae){var ne=Is(A.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=P}else u[A.r]=P}}}}Q.length>0&&(u["!rows"]=Q)}})();function Rhe(e,t,r,n){var s=[],i=[],o=aa(e["!ref"]),l="",c,u="",f=[],d=0,m=0,p=e["!rows"],y=Array.isArray(e),v={r:u},g,b=-1;for(m=o.s.c;m<=o.e.c;++m)f[m]=Ps(m);for(d=o.s.r;d<=o.e.r;++d){for(i=[],u=si(d),m=o.s.c;m<=o.e.c;++m){c=f[m]+u;var w=y?(e[d]||[])[m]:e[c];w!==void 0&&(l=Fhe(w,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[d])&&(v={r:u},p&&p[d]&&(g=p[d],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=eg(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=ur("row",i.join(""),v))}if(p)for(;d<p.length;++d)p&&p[d]&&(v={r:d+1},g=p[d],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=eg(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=ur("row","",v));return s.join("")}function $R(e,t,r,n){var s=[ii,ur("worksheet",null,{xmlns:vh[0],"xmlns:r":Li.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",f=aa(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=bn(f)}n||(n={}),c["!comments"]=[];var d=[];Nhe(c,r,e,t,s),s[s.length]=ur("dimension",null,{ref:u}),s[s.length]=Lhe(c,t,e,r),t.sheetFormat&&(s[s.length]=ur("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=The(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Rhe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=She(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Phe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=bhe(c["!merges"]));var m=-1,p,y=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(y=_a(n,-1,Aa(v[1].Target).replace(/#.*$/,""),Fn.HLINK),p["r:id"]="rId"+y),(m=v[1].Target.indexOf("#"))>-1&&(p.location=Aa(v[1].Target.slice(m+1))),v[1].Tooltip&&(p.tooltip=Aa(v[1].Tooltip)),s[s.length]=ur("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Che(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=mo("ignoredErrors",ur("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(y=_a(n,-1,"../drawings/drawing"+(e+1)+".xml",Fn.DRAW),s[s.length]=ur("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=d),c["!comments"].length>0&&(y=_a(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Fn.VML),s[s.length]=ur("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Bhe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Uhe(e,t,r){var n=Ft(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=eg(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var d=-1,m=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var y=Array.isArray(r)?(r[u.r]||[])[u.c]:r[rn(u)];y&&(d<0&&(d=p),m=p)}d<0||(++l,n.write_shift(4,d),n.write_shift(4,m))}var v=n.l;return n.l=c,n.write_shift(4,l),n.l=v,n.length>n.l?n.slice(0,n.l):n}function qhe(e,t,r,n){var s=Uhe(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Gt(e,0,s)}var $he=Nh,zhe=nm;function Hhe(){}function Whe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Koe(e),r}function Vhe(e,t,r){r==null&&(r=Ft(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return oy({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),RM(e,r),r.slice(0,r.l)}function Ghe(e){var t=fu(e);return[t]}function Khe(e,t,r){return r==null&&(r=Ft(8)),yh(t,r)}function Xhe(e){var t=bh(e);return[t]}function Yhe(e,t,r){return r==null&&(r=Ft(4)),wh(t,r)}function Jhe(e){var t=fu(e),r=e.read_shift(1);return[t,r,"b"]}function Qhe(e,t,r){return r==null&&(r=Ft(9)),yh(t,r),r.write_shift(1,e.v?1:0),r}function Zhe(e){var t=bh(e),r=e.read_shift(1);return[t,r,"b"]}function epe(e,t,r){return r==null&&(r=Ft(5)),wh(t,r),r.write_shift(1,e.v?1:0),r}function tpe(e){var t=fu(e),r=e.read_shift(1);return[t,r,"e"]}function rpe(e,t,r){return r==null&&(r=Ft(9)),yh(t,r),r.write_shift(1,e.v),r}function npe(e){var t=bh(e),r=e.read_shift(1);return[t,r,"e"]}function ape(e,t,r){return r==null&&(r=Ft(8)),wh(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function spe(e){var t=fu(e),r=e.read_shift(4);return[t,r,"s"]}function ipe(e,t,r){return r==null&&(r=Ft(12)),yh(t,r),r.write_shift(4,t.v),r}function ope(e){var t=bh(e),r=e.read_shift(4);return[t,r,"s"]}function lpe(e,t,r){return r==null&&(r=Ft(8)),wh(t,r),r.write_shift(4,t.v),r}function cpe(e){var t=fu(e),r=$o(e);return[t,r,"n"]}function upe(e,t,r){return r==null&&(r=Ft(16)),yh(t,r),ch(e.v,r),r}function zR(e){var t=bh(e),r=$o(e);return[t,r,"n"]}function dpe(e,t,r){return r==null&&(r=Ft(12)),wh(t,r),ch(e.v,r),r}function fpe(e){var t=fu(e),r=oS(e);return[t,r,"n"]}function hpe(e,t,r){return r==null&&(r=Ft(12)),yh(t,r),BM(e.v,r),r}function ppe(e){var t=bh(e),r=oS(e);return[t,r,"n"]}function mpe(e,t,r){return r==null&&(r=Ft(8)),wh(t,r),BM(e.v,r),r}function xpe(e){var t=fu(e),r=aS(e);return[t,r,"is"]}function gpe(e){var t=fu(e),r=Ho(e);return[t,r,"str"]}function vpe(e,t,r){return r==null&&(r=Ft(12+4*e.v.length)),yh(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ype(e){var t=bh(e),r=Ho(e);return[t,r,"str"]}function bpe(e,t,r){return r==null&&(r=Ft(8+4*e.v.length)),wh(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wpe(e,t,r){var n=e.l+t,s=fu(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function Npe(e,t,r){var n=e.l+t,s=fu(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function jpe(e,t,r){var n=e.l+t,s=fu(e);s.r=r["!row"];var i=$o(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function kpe(e,t,r){var n=e.l+t,s=fu(e);s.r=r["!row"];var i=Ho(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Ro(l,null,s,r.supbooks,r)}else e.l=n;return o}var Spe=Nh,_pe=nm;function Ape(e,t){return t==null&&(t=Ft(4)),t.write_shift(4,e),t}function Cpe(e,t){var r=e.l+t,n=Nh(e),s=sS(e),i=Ho(e),o=Ho(e),l=Ho(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function Epe(e,t){var r=Ft(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));nm({s:Is(e[0]),e:Is(e[0])},r),iS("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return eo(s||"",r),eo(e[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function Tpe(){}function Ope(e,t,r){var n=e.l+t,s=UM(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=the(e,n-e.l,r);o[1]=l}else e.l=n;return o}function Ppe(e,t,r){var n=e.l+t,s=Nh(e),i=[s];if(r.cellFormula){var o=nhe(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function Ipe(e,t,r){r==null&&(r=Ft(18));var n=lb(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var HR=["left","right","top","bottom","header","footer"];function Dpe(e){var t={};return HR.forEach(function(r){t[r]=$o(e)}),t}function Lpe(e,t){return t==null&&(t=Ft(48)),Z0(e),HR.forEach(function(r){ch(e[r],t)}),t}function Fpe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Mpe(e,t,r){r==null&&(r=Ft(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Rpe(e){var t=Ft(24);return t.write_shift(4,4),t.write_shift(4,1),nm(e,t),t}function Bpe(e,t){return t==null&&(t=Ft(66)),t.write_shift(2,e.password?hS(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Upe(){}function qpe(){}function $pe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,m=!1,p,y,v,g,b,w,j,N,S,P=[];l.biff=12,l["!row"]=0;var A=0,T=!1,I=[],B={},C=l.supbooks||s.supbooks||[[]];if(C.sharedf=B,C.arrayf=I,C.SheetNames=s.SheetNames||s.Sheets.map(function(ae){return ae.name}),!l.supbooks&&(l.supbooks=C,s.Names))for(var E=0;E<s.Names.length;++E)C[0][E+1]=s.Names[E];var M=[],q=[],G=!1;tg[16]={n:"BrtShortReal",f:zR};var Z;if(Nf(e,function(Q,ee,W){if(!m)switch(W){case 148:u=Q;break;case 0:p=Q,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),N=si(g=p.r),l["!row"]=p.r,(Q.hidden||Q.hpt||Q.level!=null)&&(Q.hpt&&(Q.hpx=qp(Q.hpt)),q[Q.r]=Q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:Q[2]},Q[2]){case"n":y.v=Q[1];break;case"s":j=Zm[Q[1]],y.v=j.t,y.r=j.r;break;case"b":y.v=!!Q[1];break;case"e":y.v=Q[1],l.cellText!==!1&&(y.w=jf[y.v]);break;case"str":y.t="s",y.v=Q[1];break;case"is":y.t="s",y.v=Q[1].t;break}if((v=o.CellXf[Q[0].iStyleRef])&&UR(y,v.numFmtId,null,l,i,o),b=Q[0].c==-1?b+1:Q[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Ps(b)+N]=y,l.cellFormula){for(T=!1,A=0;A<I.length;++A){var O=I[A];p.r>=O[0].s.r&&p.r<=O[0].e.r&&b>=O[0].s.c&&b<=O[0].e.c&&(y.F=bn(O[0]),T=!0)}!T&&Q.length>3&&(y.f=Q[3])}if(f.s.r>p.r&&(f.s.r=p.r),f.s.c>b&&(f.s.c=b),f.e.r<p.r&&(f.e.r=p.r),f.e.c<b&&(f.e.c=b),l.cellDates&&v&&y.t=="n"&&em(Qr[v.numFmtId])){var z=z0(y.v);z&&(y.t="d",y.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}Z&&(Z.type=="XLDAPR"&&(y.D=!0),Z=void 0);break;case 1:case 12:if(!l.sheetStubs||d)break;y={t:"z",v:void 0},b=Q[0].c==-1?b+1:Q[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Ps(b)+N]=y,f.s.r>p.r&&(f.s.r=p.r),f.s.c>b&&(f.s.c=b),f.e.r<p.r&&(f.e.r=p.r),f.e.c<b&&(f.e.c=b),Z&&(Z.type=="XLDAPR"&&(y.D=!0),Z=void 0);break;case 176:P.push(Q);break;case 49:Z=((l.xlmeta||{}).Cell||[])[Q-1];break;case 494:var H=n["!id"][Q.relId];for(H?(Q.Target=H.Target,Q.loc&&(Q.Target+="#"+Q.loc),Q.Rel=H):Q.relId==""&&(Q.Target="#"+Q.loc),g=Q.rfx.s.r;g<=Q.rfx.e.r;++g)for(b=Q.rfx.s.c;b<=Q.rfx.e.c;++b)l.dense?(c[g]||(c[g]=[]),c[g][b]||(c[g][b]={t:"z",v:void 0}),c[g][b].l=Q):(w=rn({c:b,r:g}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=Q);break;case 426:if(!l.cellFormula)break;I.push(Q),S=l.dense?c[g][b]:c[Ps(b)+N],S.f=Ro(Q[1],f,{r:p.r,c:b},C,l),S.F=bn(Q[0]);break;case 427:if(!l.cellFormula)break;B[rn(Q[0].s)]=Q[1],S=l.dense?c[g][b]:c[Ps(b)+N],S.f=Ro(Q[1],f,{r:p.r,c:b},C,l);break;case 60:if(!l.cellStyles)break;for(;Q.e>=Q.s;)M[Q.e--]={width:Q.w/256,hidden:!!(Q.flags&1),level:Q.level},G||(G=!0,pS(Q.w/256)),o0(M[Q.e+1]);break;case 161:c["!autofilter"]={ref:bn(Q)};break;case 476:c["!margins"]=Q;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),Q.name&&(s.Sheets[r].CodeName=Q.name),(Q.above||Q.left)&&(c["!outline"]={above:Q.above,left:Q.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),Q.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!ee.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=bn(u||f)),l.sheetRows&&c["!ref"]){var te=aa(c["!ref"]);l.sheetRows<=+te.e.r&&(te.e.r=l.sheetRows-1,te.e.r>f.e.r&&(te.e.r=f.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>f.e.c&&(te.e.c=f.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),c["!fullref"]=c["!ref"],c["!ref"]=bn(te))}return P.length>0&&(c["!merges"]=P),M.length>0&&(c["!cols"]=M),q.length>0&&(c["!rows"]=q),c}function zpe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=cs(t),t.z=t.z||Qr[14],t.v=Ri(ls(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=b0(s.cellXfs,t,s),t.l&&i["!links"].push([rn(c),t.l]),t.c&&i["!comments"].push([rn(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=yS(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Gt(e,18,lpe(t,c)):Gt(e,7,ipe(t,c))):(c.t="str",o?Gt(e,17,bpe(t,c)):Gt(e,6,vpe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Gt(e,13,mpe(t,c)):Gt(e,2,hpe(t,c)):o?Gt(e,16,dpe(t,c)):Gt(e,5,upe(t,c)),!0;case"b":return c.t="b",o?Gt(e,15,epe(t,c)):Gt(e,4,Qhe(t,c)),!0;case"e":return c.t="e",o?Gt(e,14,ape(t,c)):Gt(e,3,rpe(t,c)),!0}return o?Gt(e,12,Yhe(t,c)):Gt(e,1,Khe(t,c)),!0}function Hpe(e,t,r,n){var s=aa(t["!ref"]||"A1"),i,o="",l=[];Gt(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){o=si(f),qhe(e,t,s,f);var d=!1;if(f<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){f===s.s.r&&(l[m]=Ps(m)),i=l[m]+o;var p=c?(t[f]||[])[m]:t[i];if(!p){d=!1;continue}d=zpe(e,p,f,m,n,t,d)}}Gt(e,146)}function Wpe(e,t){!t||!t["!merges"]||(Gt(e,177,Ape(t["!merges"].length)),t["!merges"].forEach(function(r){Gt(e,176,_pe(r))}),Gt(e,178))}function Vpe(e,t){!t||!t["!cols"]||(Gt(e,390),t["!cols"].forEach(function(r,n){r&&Gt(e,60,Ipe(n,r))}),Gt(e,391))}function Gpe(e,t){!t||!t["!ref"]||(Gt(e,648),Gt(e,649,Rpe(aa(t["!ref"]))),Gt(e,650))}function Kpe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=_a(r,-1,n[1].Target.replace(/#.*$/,""),Fn.HLINK);Gt(e,494,Epe(n,s))}}),delete t["!links"]}function Xpe(e,t,r,n){if(t["!comments"].length>0){var s=_a(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Fn.VML);Gt(e,551,iS("rId"+s)),t["!legacy"]=s}}function Ype(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:bn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Gl(i);l.s.r==l.e.r&&(l.e.r=Gl(t["!ref"]).e.r,i=bn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Gt(e,161,nm(aa(i))),Gt(e,162)}}function Jpe(e,t,r){Gt(e,133),Gt(e,137,Mpe(t,r)),Gt(e,138),Gt(e,134)}function Qpe(e,t){t["!protect"]&&Gt(e,535,Bpe(t["!protect"]))}function Zpe(e,t,r,n){var s=Vl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=aa(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Gt(s,129),(r.vbaraw||o["!outline"])&&Gt(s,147,Vhe(l,o["!outline"])),Gt(s,148,zhe(c)),Jpe(s,o,r.Workbook),Vpe(s,o),Hpe(s,o,e,t),Qpe(s,o),Ype(s,o,r,e),Wpe(s,o),Kpe(s,o,n),o["!margins"]&&Gt(s,476,Lpe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Gpe(s,o),Xpe(s,o,e,n),Gt(s,130),s.end()}function eme(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=na((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function tme(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var m=eme(d);f.s.r=f.s.c=0,f.e.c=l,u=Ps(l),m[0].forEach(function(p,y){o[u+si(y)]={t:"n",v:p,z:m[1]},c=y}),f.e.r<c&&(f.e.r=c),++l}),l>0&&(o["!ref"]=bn(f)),o}function rme(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(qR);return l&&bS(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function nme(e,t){e.l+=10;var r=Ho(e);return{name:r}}function ame(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Nf(e,function(c,u,f){switch(f){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var wS=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],sme=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ime=[],ome=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function l8(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=ss(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function c8(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=ss(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function WR(e){c8(e.WBProps,wS),c8(e.CalcPr,ome),l8(e.WBView,sme),l8(e.Sheets,ime),up.date1904=ss(e.WBProps.date1904)}function lme(e){return!e.Workbook||!e.Workbook.WBProps?"false":ss(e.Workbook.WBProps.date1904)?"true":"false"}var cme="][*?/\\".split("");function VR(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return cme.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ume(e,t,r){e.forEach(function(n,s){VR(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function dme(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];ume(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)lhe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var fme=/<\w+:workbook/;function hme(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(Vo,function(c,u){var f=an(c);switch(Pd(f[0])){case"<?xml":break;case"<workbook":c.match(fme)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wS.forEach(function(d){if(f[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=ss(f[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(f[d[0]],10);break;default:r.WBProps[d[0]]=f[d[0]]}}),f.codeName&&(r.WBProps.CodeName=Ua(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=na(Ua(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ua(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),ss(f.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=na(Ua(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),vh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return WR(r),r}function GR(e){var t=[ii];t[t.length]=ur("workbook",null,{xmlns:vh[0],"xmlns:r":Li.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(wS.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=ur("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Aa(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=ur("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=ur("definedName",Aa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function pme(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=sk(e),r.name=Ho(e),r}function mme(e,t){return t||(t=Ft(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),iS(e.strRelID,t),eo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function xme(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Ho(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function gme(e,t){t||(t=Ft(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),RM(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function vme(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function yme(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Xoe(e),o=rhe(e,0,r),l=sS(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function bme(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],tg[16]={n:"BrtFRTArchID$",f:vme},Nf(e,function(c,u,f){switch(f){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ro(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,c]):o[0]=[f,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),WR(r),r.Names=i,r.supbooks=o,r}function wme(e,t){Gt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Gt(e,156,mme(s))}Gt(e,144)}function Nme(e,t){t||(t=Ft(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return eo("SheetJS",t),eo(ey.version,t),eo(ey.version,t),eo("7262",t),t.length>t.l?t.slice(0,t.l):t}function jme(e,t){t||(t=Ft(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function kme(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(Gt(e,135),Gt(e,158,jme(s)),Gt(e,136))}}function Sme(e,t){var r=Vl();return Gt(r,131),Gt(r,128,Nme()),Gt(r,153,gme(e.Workbook&&e.Workbook.WBProps||null)),kme(r,e),wme(r,e),Gt(r,132),r.end()}function _me(e,t,r){return t.slice(-4)===".bin"?bme(e,r):hme(e,r)}function Ame(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?$pe(e,n,r,s,i,o,l):yhe(e,n,r,s,i,o,l)}function Cme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?ame(e,n,r,s,i):rme(e,n,r,s,i)}function Eme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Ofe():Pfe()}function Tme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Efe():Tfe()}function Ome(e,t,r,n){return t.slice(-4)===".bin"?_de(e,r,n):pde(e,r,n)}function Pme(e,t,r){return AR(e,r)}function Ime(e,t,r){return t.slice(-4)===".bin"?Iue(e,r):Tue(e,r)}function Dme(e,t,r){return t.slice(-4)===".bin"?kfe(e,r):mfe(e,r)}function Lme(e,t,r){return t.slice(-4)===".bin"?ffe(e):ufe(e)}function Fme(e,t,r,n){return r.slice(-4)===".bin"?hfe(e,t,r,n):void 0}function Mme(e,t,r){return t.slice(-4)===".bin"?ofe(e,t,r):cfe(e,t,r)}function Rme(e,t,r){return(t.slice(-4)===".bin"?Sme:GR)(e)}function Bme(e,t,r,n,s){return(t.slice(-4)===".bin"?Zpe:$R)(e,r,n,s)}function Ume(e,t,r){return(t.slice(-4)===".bin"?Fde:SR)(e,r)}function qme(e,t,r){return(t.slice(-4)===".bin"?Fue:gR)(e,r)}function $me(e,t,r){return(t.slice(-4)===".bin"?Sfe:TR)(e)}function zme(e){return(e.slice(-4)===".bin"?lfe:CR)()}var KR=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,XR=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Eu(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(KR),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(XR),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Hme(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(KR),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(XR),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var tx;function Wme(e,t){var r=tx[e]||na(e);return r==="General"?oh(t):cu(r,t)}function Vme(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ss(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=ls(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[na(t)]=s}function Gme(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||jf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Vx(e.v):e.w=oh(e.v):e.w=Wme(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=tx[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&em(n)){var s=z0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Kme(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=ide[n.Pattern]||n.Pattern)}e[t.ID]=t}function Xme(e,t,r,n,s,i,o,l,c,u){var f="General",d=n.StyleID,m={};u=u||{};var p=[],y=0;for(d===void 0&&l&&(d=l.StyleID),d===void 0&&o&&(d=o.StyleID);i[d]!==void 0&&(i[d].nf&&(f=i[d].nf),i[d].Interior&&p.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ss(e);break;case"String":n.t="s",n.r=_I(na(e)),n.v=e.indexOf("<")>-1?na(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ls(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=na(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=zM[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=_I(t||e));break}if(Gme(n,f,u),u.cellFormula!==!1)if(n.Formula){var v=na(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=cp(v,s),delete n.Formula,n.ArrayRange=="RC"?n.F=cp("RC:RC",s):n.ArrayRange&&(n.F=cp(n.ArrayRange,s),c.push([aa(n.F),n.F]))}else for(y=0;y<c.length;++y)s.r>=c[y][0].s.r&&s.r<=c[y][0].e.r&&s.c>=c[y][0].s.c&&s.c<=c[y][0].e.c&&(n.F=c[y][1]);u.cellStyles&&(p.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Yme(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ij(e,t){var r=t||{};tm();var n=Fm(Z3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ua(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=cs(r);return o.type="string",Up.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ye){s.indexOf("<"+ye)>=0&&(i=!0)}),i)return Lxe(n,r);tx={"General Number":"General","General Date":Qr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Qr[15],"Short Date":Qr[14],"Long Time":Qr[19],"Medium Time":Qr[18],"Short Time":Qr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Qr[2],Standard:Qr[4],Percent:Qr[10],Scientific:Qr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,f={},d=[],m=r.dense?[]:{},p="",y={},v={},g=Eu('<Data ss:Type="String">'),b=0,w=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},P={},A="",T=0,I=[],B={},C={},E=0,M=[],q=[],G={},Z=[],te,ae=!1,Q=[],ee=[],W={},O=0,z=0,H={Sheets:[],WBProps:{date1904:!1}},R={};Xx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=Xx.exec(n);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Xme(n.slice(b,l.index),A,g,c[c.length-1][0]=="comment"?G:y,{c:w,r:j},S,Z[w],v,Q,r):(A="",g=Eu(l[0]),b=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(q.length>0&&(y.c=q),(!r.sheetRows||r.sheetRows>j)&&y.v!==void 0&&(r.dense?(m[j]||(m[j]=[]),m[j][w]=y):m[Ps(w)+si(j)]=y),y.HRef&&(y.l={Target:na(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(O=w+(parseInt(y.MergeAcross,10)|0),z=j+(parseInt(y.MergeDown,10)|0),I.push({s:{c:w,r:j},e:{c:O,r:z}})),!r.sheetStubs)y.MergeAcross?w=O+1:++w;else if(y.MergeAcross||y.MergeDown){for(var le=w;le<=O;++le)for(var he=j;he<=z;++he)(le>w||he>j)&&(r.dense?(m[he]||(m[he]=[]),m[he][le]={t:"z"}):m[Ps(le)+si(he)]={t:"z"});w=O+1}else++w;else y=Hme(l[0]),y.Index&&(w=+y.Index-1),w<N.s.c&&(N.s.c=w),w>N.e.c&&(N.e.c=w),l[0].slice(-2)==="/>"&&++w,q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),l[0].slice(-2)==="/>"&&(v=Eu(l[0]),v.Index&&(j=+v.Index-1)),w=0,++j):(v=Eu(l[0]),v.Index&&(j=+v.Index-1),W={},(v.AutoFitHeight=="0"||v.Height)&&(W.hpx=parseInt(v.Height,10),W.hpt=eg(W.hpx),ee[j]=W),v.Hidden=="1"&&(W.hidden=!0,ee[j]=W));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));d.push(p),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(m["!ref"]=bn(N),r.sheetRows&&r.sheetRows<=N.e.r&&(m["!fullref"]=m["!ref"],N.e.r=r.sheetRows-1,m["!ref"]=bn(N))),I.length&&(m["!merges"]=I),Z.length>0&&(m["!cols"]=Z),ee.length>0&&(m["!rows"]=ee),f[p]=m}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=w=0,c.push([l[3],!1]),u=Eu(l[0]),p=na(u.Name),m=r.dense?[]:{},I=[],Q=[],ee=[],R={name:p,Hidden:0},H.Sheets.push(R);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Z=[],ae=!1}break;case"style":l[1]==="/"?Kme(S,P,r):P=Eu(l[0]);break;case"numberformat":P.nf=na(Eu(l[0]).Format||"General"),tx[P.nf]&&(P.nf=tx[P.nf]);for(var ie=0;ie!=392&&Qr[ie]!=P.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(Qr[ie]==null){uf(P.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(te=Eu(l[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!ae&&te.wpx>10){ae=!0,qo=jR;for(var ce=0;ce<Z.length;++ce)Z[ce]&&o0(Z[ce])}ae&&o0(te),Z[te.Index-1||Z.length]=te;for(var De=0;De<+te.Span;++De)Z[Z.length]=cs(te);break;case"namedrange":if(l[1]==="/")break;H.Names||(H.Names=[]);var ne=an(l[0]),Ue={Name:ne.Name,Ref:cp(ne.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(Ue.Sheet=H.Sheets.length-1),H.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?A+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Eu(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?ble(B,K,n.slice(E,l.index)):E=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Yme(G),q.push(G)}else c.push([l[3],!1]),u=Eu(l[0]),G={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ce=Eu(l[0]);m["!autofilter"]={ref:cp(Ce.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return p8(n,r);var de=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:de=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:de=!1}break;case"excelworkbook":switch(l[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:de=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:de=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(E,l.index)){case"SheetHidden":R.Hidden=1;break;case"SheetVeryHidden":R.Hidden=2;break}else E=l.index+l[0].length;break;case"header":m["!margins"]||Z0(m["!margins"]={},"xlml"),isNaN(+an(l[0]).Margin)||(m["!margins"].header=+an(l[0]).Margin);break;case"footer":m["!margins"]||Z0(m["!margins"]={},"xlml"),isNaN(+an(l[0]).Margin)||(m["!margins"].footer=+an(l[0]).Margin);break;case"pagemargins":var Y=an(l[0]);m["!margins"]||Z0(m["!margins"]={},"xlml"),isNaN(+Y.Top)||(m["!margins"].top=+Y.Top),isNaN(+Y.Left)||(m["!margins"].left=+Y.Left),isNaN(+Y.Right)||(m["!margins"].right=+Y.Right),isNaN(+Y.Bottom)||(m["!margins"].bottom=+Y.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:de=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:de=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:de=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:de=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:de=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:de=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:de=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:de=!1}break;case"smarttags":break;default:de=!1;break}if(de||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Vme(C,K,M,n.slice(E,l.index)):(M=l,E=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=f),ve.SheetNames=d,ve.Workbook=H,ve.SSF=cs(Qr),ve.Props=B,ve.Custprops=C,ve}function fk(e,t){switch(jS(t=t||{}),t.type||"base64"){case"base64":return ij(Nc(e),t);case"binary":case"buffer":case"file":return ij(e,t);case"array":return ij(v0(e),t)}}function Jme(e,t){var r=[];return e.Props&&r.push(wle(e.Props,t)),e.Custprops&&r.push(Nle(e.Props,e.Custprops)),r.join("")}function Qme(){return""}function Zme(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(ur("NumberFormat",null,{"ss:Format":Aa(Qr[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(ur("Style",i.join(""),o))}),ur("Styles",r.join(""))}function YR(e){return ur("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+gS(e.Ref,{r:0,c:0})})}function exe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(YR(s)))}return ur("Names",r.join(""))}function txe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(YR(l)))}return i.join("")}function rxe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(ur("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(ur("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(ur("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ur("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(mo("ProtectContents","True")),e["!protect"].objects&&s.push(mo("ProtectObjects","True")),e["!protect"].scenarios&&s.push(mo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(mo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(mo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":ur("WorksheetOptions",s.join(""),{xmlns:pc.x})}function nxe(e){return e.map(function(t){var r=koe(t.t||""),n=ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ur("Comment",n,{"ss:Author":t.a})}).join("")}function axe(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Aa(gS(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Is(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Aa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Aa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],f=0;f!=u.length;++f)u[f].s.c!=o.c||u[f].s.r!=o.r||(u[f].e.c>u[f].s.c&&(l["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(l["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",m=String(e.v);break;case"b":d="Boolean",m=e.v?"1":"0";break;case"e":d="Error",m=jf[e.v];break;case"d":d="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Qr[14]);break;case"s":d="String",m=joe(e.v||"");break}var p=b0(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var y=e.v!=null?m:"",v=e.t=="z"?"":'<Data ss:Type="'+d+'">'+y+"</Data>";return(e.c||[]).length>0&&(v+=nxe(e.c)),ur("Cell",v,l)}function sxe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=qp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function ixe(e,t,r,n){if(!e["!ref"])return"";var s=aa(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,b){o0(g);var w=!!g.width,j=lb(b,g),N={"ss:Index":b+1};w&&(N["ss:Width"]=Qx(j.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(ur("Column",null,N))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var f=[sxe(u,(e["!rows"]||[])[u])],d=s.s.c;d<=s.e.c;++d){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>d)&&!(i[o].s.r>u)&&!(i[o].e.c<d)&&!(i[o].e.r<u)){(i[o].s.c!=d||i[o].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:d},y=rn(p),v=c?(e[u]||[])[d]:e[y];f.push(axe(v,y,e,t,r,n,p))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function oxe(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?txe(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?ixe(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(rxe(i,t,e,r)),n.join("")}function lxe(e,t){t||(t={}),e.SSF||(e.SSF=cs(Qr)),e.SSF&&(tm(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Jme(e,t)),r.push(Qme()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(ur("Worksheet",oxe(n,t,e),{"ss:Name":Aa(e.SheetNames[n])}));return r[2]=Zme(e,t),r[3]=exe(e),ii+ur("Workbook",r.join(""),{xmlns:pc.ss,"xmlns:o":pc.o,"xmlns:x":pc.x,"xmlns:ss":pc.ss,"xmlns:dt":pc.dt,"xmlns:html":pc.html})}function cxe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=ele(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=tle(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var uxe=[60,1084,2066,2165,2175];function dxe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=rf(r,r.l),u=hk[c],f=0;u!=null&&uxe.indexOf(c)>-1;)i=rf(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=hk[c=rf(r,r.l)];var d=Zi(o);po(d,0);var m=0;d.lens=[];for(var p=0;p<o.length;++p)d.lens.push(m),m+=o[p].length;if(d.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+d.length+" < "+n;return t.f(d,d.length,s)}function ld(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Qr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||jf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Vx(e.v):e.w=oh(e.v):e.w=cu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&em(Qr[n]||String(n))){var s=z0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Sv(e,t,r){return{v:e,ixfe:t,t:r}}function fxe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],u="",f={},d,m="",p,y,v,g,b={},w=[],j,N,S=[],P=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},I=function(ut){return ut<8?Y0[ut]:ut<64&&P[ut-8]||Y0[ut]},B=function(ut,lt,pr){var rr=lt.XF.data;if(!(!rr||!rr.patternType||!pr||!pr.cellStyles)){lt.s={},lt.s.patternType=rr.patternType;var ft;(ft=Jx(I(rr.icvFore)))&&(lt.s.fgColor={rgb:ft}),(ft=Jx(I(rr.icvBack)))&&(lt.s.bgColor={rgb:ft})}},C=function(ut,lt,pr){if(!(W>1)&&!(pr.sheetRows&&ut.r>=pr.sheetRows)){if(pr.cellStyles&&lt.XF&&lt.XF.data&&B(ut,lt,pr),delete lt.ixfe,delete lt.XF,d=ut,m=rn(ut),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ut.r<o.s.r&&(o.s.r=ut.r),ut.c<o.s.c&&(o.s.c=ut.c),ut.r+1>o.e.r&&(o.e.r=ut.r+1),ut.c+1>o.e.c&&(o.e.c=ut.c+1),pr.cellFormula&&lt.f){for(var rr=0;rr<w.length;++rr)if(!(w[rr][0].s.c>ut.c||w[rr][0].s.r>ut.r)&&!(w[rr][0].e.c<ut.c||w[rr][0].e.r<ut.r)){lt.F=bn(w[rr][0]),(w[rr][0].s.c!=ut.c||w[rr][0].s.r!=ut.r)&&delete lt.f,lt.f&&(lt.f=""+Ro(w[rr][1],o,ut,Q,E));break}}pr.dense?(s[ut.r]||(s[ut.r]=[]),s[ut.r][ut.c]=lt):s[m]=lt}},E={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(E.password=t.password);var M,q=[],G=[],Z=[],te=[],ae=!1,Q=[];Q.SheetNames=E.snames,Q.sharedf=E.sharedf,Q.arrayf=E.arrayf,Q.names=[],Q.XTI=[];var ee=0,W=0,O=0,z=[],H=[],R;E.codepage=1200,Ru(1200);for(var K=!1;e.l<e.length-1;){var le=e.l,he=e.read_shift(2);if(he===0&&ee===10)break;var ie=e.l===e.length?0:e.read_shift(2),ce=hk[he];if(ce&&ce.f){if(t.bookSheets&&ee===133&&he!==133)break;if(ee=he,ce.r===2||ce.r==12){var De=e.read_shift(2);if(ie-=2,!E.enc&&De!==he&&((De&255)<<8|De>>8)!==he)throw new Error("rt mismatch: "+De+"!="+he);ce.r==12&&(e.l+=10,ie-=10)}var ne={};if(he===10?ne=ce.f(e,ie,E):ne=dxe(he,ce,e,ie,E),W==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(he){case 34:r.opts.Date1904=A.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(E.enc||(e.l=0),E.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:E.lastuser=ne;break;case 66:var Ue=Number(ne);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}Ru(E.codepage=Ue),K=!0;break;case 317:E.rrtabid=ne;break;case 25:E.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:E.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(s["!type"]="dialog"),ne.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ne.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(ne);break;case 430:Q.push([ne]),Q[Q.length-1].XTI=[];break;case 35:case 547:Q[Q.length-1].push(ne);break;case 24:case 536:R={Name:ne.Name,Ref:Ro(ne.rgce,o,null,Q,E)},ne.itab>0&&(R.Sheet=ne.itab-1),Q.names.push(R),Q[0]||(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(H[ne.itab-1]={ref:bn(ne.rgce[0][0][1][2])});break;case 22:E.ExternCount=ne;break;case 23:Q.length==0&&(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].XTI=Q[Q.length-1].XTI.concat(ne),Q.XTI=Q.XTI.concat(ne);break;case 2196:if(E.biff<8)break;R!=null&&(R.Comment=ne[1]);break;case 18:s["!protect"]=ne;break;case 19:ne!==0&&E.WTF&&console.error("Password verifier: "+ne);break;case 133:i[ne.pos]=ne,E.snames.push(ne.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=bn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ce=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=bn(o),o.e.r=Ce}o.e.r++,o.e.c++}q.length>0&&(s["!merges"]=q),G.length>0&&(s["!objects"]=G),Z.length>0&&(s["!cols"]=Z),te.length>0&&(s["!rows"]=te),A.Sheets.push(T)}u===""?f=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(E.biff===8&&(E.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),E.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(E.biff=5,K=!0,Ru(E.codepage=28591)),E.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(E.biff=2),W++)break;if(s=t.dense?[]:{},E.biff<8&&!K&&(K=!0,Ru(E.codepage=t.codepage||1252)),E.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var de={pos:e.l-ie,name:u};i[de.pos]=de,E.snames.push(u)}else u=(i[le]||{name:""}).name;ne.dt==32&&(s["!type"]="chart"),ne.dt==64&&(s["!type"]="macro"),q=[],G=[],E.arrayf=w=[],Z=[],te=[],ae=!1,T={Hidden:(i[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ne.r]||[])[ne.c]:s[rn({c:ne.c,r:ne.r})])&&++ne.c,j={ixfe:ne.ixfe,XF:S[ne.ixfe]||{},v:ne.val,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t);break;case 5:case 517:j={ixfe:ne.ixfe,XF:S[ne.ixfe],v:ne.val,t:ne.t},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t);break;case 638:j={ixfe:ne.ixfe,XF:S[ne.ixfe],v:ne.rknum,t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t);break;case 189:for(var Y=ne.c;Y<=ne.C;++Y){var ve=ne.rkrec[Y-ne.c][0];j={ixfe:ve,XF:S[ve],v:ne.rkrec[Y-ne.c][1],t:"n"},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:Y,r:ne.r},j,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){l=ne;break}if(j=Sv(ne.val,ne.cell.ixfe,ne.tt),j.XF=S[j.ixfe],t.cellFormula){var ye=ne.formula;if(ye&&ye[0]&&ye[0][0]&&ye[0][0][0]=="PtgExp"){var Ae=ye[0][0][1][0],pe=ye[0][0][1][1],ue=rn({r:Ae,c:pe});b[ue]?j.f=""+Ro(ne.formula,o,ne.cell,Q,E):j.F=((t.dense?(s[Ae]||[])[pe]:s[ue])||{}).F}else j.f=""+Ro(ne.formula,o,ne.cell,Q,E)}O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C(ne.cell,j,t),l=ne}break;case 7:case 519:if(l)l.val=ne,j=Sv(ne,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+Ro(l.formula,o,l.cell,Q,E)),O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var Pe=rn(ne[0].s);if(p=t.dense?(s[ne[0].s.r]||[])[ne[0].s.c]:s[Pe],t.cellFormula&&p){if(!l||!Pe||!p)break;p.f=""+Ro(ne[1],o,ne[0],Q,E),p.F=bn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;b[rn(l.cell)]=ne[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[rn(l.cell)],(p||{}).f=""+Ro(ne[0],o,d,Q,E)}}break;case 253:j=Sv(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(j.h=c[ne.isst].h),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:ne.ixfe,XF:S[ne.ixfe],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t));break;case 190:if(t.sheetStubs)for(var Ne=ne.c;Ne<=ne.C;++Ne){var Re=ne.ixfe[Ne-ne.c];j={ixfe:Re,XF:S[Re],t:"z"},O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:Ne,r:ne.r},j,t)}break;case 214:case 516:case 4:j=Sv(ne.val,ne.ixfe,"s"),j.XF=S[j.ixfe],O>0&&(j.z=z[j.ixfe>>8&63]),ld(j,t,r.opts.Date1904),C({c:ne.c,r:ne.r},j,t);break;case 0:case 512:W===1&&(o=ne);break;case 252:c=ne;break;case 1054:if(E.biff==4){z[O++]=ne[1];for(var nt=0;nt<O+163&&Qr[nt]!=ne[1];++nt);nt>=163&&uf(ne[1],O+163)}else uf(ne[1],ne[0]);break;case 30:{z[O++]=ne;for(var xt=0;xt<O+163&&Qr[xt]!=ne;++xt);xt>=163&&uf(ne,O+163)}break;case 229:q=q.concat(ne);break;case 93:G[ne.cmo[0]]=E.lastobj=ne;break;case 438:E.lastobj.TxO=ne;break;case 127:E.lastobj.ImData=ne;break;case 440:for(g=ne[0].s.r;g<=ne[0].e.r;++g)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[rn({c:v,r:g})],p&&(p.l=ne[1]);break;case 2048:for(g=ne[0].s.r;g<=ne[0].e.r;++g)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[rn({c:v,r:g})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(E.biff<=5&&E.biff>=2)break;p=t.dense?(s[ne[0].r]||[])[ne[0].c]:s[rn(ne[0])];var kt=G[ne[2]];p||(t.dense?(s[ne[0].r]||(s[ne[0].r]=[]),p=s[ne[0].r][ne[0].c]={t:"z"}):p=s[rn(ne[0])]={t:"z"},o.e.r=Math.max(o.e.r,ne[0].r),o.s.r=Math.min(o.s.r,ne[0].r),o.e.c=Math.max(o.e.c,ne[0].c),o.s.c=Math.min(o.s.c,ne[0].c)),p.c||(p.c=[]),y={a:ne[1],t:kt.TxO.t},p.c.push(y)}break;case 2173:Zde(S[ne.ixfe],ne.ext);break;case 125:{if(!E.cellStyles)break;for(;ne.e>=ne.s;)Z[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},ae||(ae=!0,pS(ne.w/256)),o0(Z[ne.e+1])}break;case 520:{var Me={};ne.level!=null&&(te[ne.r]=Me,Me.level=ne.level),ne.hidden&&(te[ne.r]=Me,Me.hidden=!0),ne.hpt&&(te[ne.r]=Me,Me.hpt=ne.hpt,Me.hpx=qp(ne.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Z0(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=ne;break;case 161:s["!margins"]||Z0(s["!margins"]={}),s["!margins"].header=ne.header,s["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(A.Views[0].RTL=!0);break;case 146:P=ne;break;case 2198:M=ne;break;case 140:N=ne;break;case 442:u?T.CodeName=ne||T.name:A.WBProps.CodeName=ne||"ThisWorkbook";break}}else ce||console.error("Missing Info for XLS Record 0x"+he.toString(16)),e.l+=ie}return r.SheetNames=Hs(i).sort(function(vt,ut){return Number(vt)-Number(ut)}).map(function(vt){return i[vt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&H.forEach(function(vt,ut){r.Sheets[r.SheetNames[ut]]["!autofilter"]=vt}),r.Strings=c,r.SSF=cs(Qr),E.enc&&(r.Encryption=E.enc),M&&(r.Themes=M),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),Q.names.length>0&&(A.Names=Q.names),r.Workbook=A,r}var rx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function hxe(e,t,r){var n=Hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=HI(n,ik,rx.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Hr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=HI(o,ok,rx.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(XM(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function pxe(e,t){var r=[],n=[],s=[],i=0,o,l=bI(ik,"n"),c=bI(ok,"n");if(e.Props)for(o=Hs(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Hs(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<s.length;++i)rR.indexOf(s[i][0])>-1||KM.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);n.length&&Hr.utils.cfb_add(t,"/SummaryInformation",WI(n,rx.SI,c,ok)),(r.length||u.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",WI(r,rx.DSI,l,ik,u.length?u:null,rx.UDI))}function JR(e,t){t||(t={}),jS(t),H3(),t.codepage&&z3(t.codepage);var r,n;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),n=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=gc(Nc(e));break;case"binary":e=gc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}po(e,0),n={content:e}}var s,i;if(r&&cxe(r),t.bookProps&&!t.bookSheets)s={};else{var o=On?"buffer":"array";if(n&&n.content)s=fxe(n.content,t);else if((i=Hr.find(e,"PerfectOffice_MAIN"))&&i.content)s=Q0.to_workbook(i.content,(t.type=o,t));else if((i=Hr.find(e,"NativeContent_MAIN"))&&i.content)s=Q0.to_workbook(i.content,(t.type=o,t));else throw(i=Hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Afe(e))}var l={};return e.FullPaths&&hxe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function mxe(e,t){var r=t||{},n=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(n,s,QR(e,r)),r.biff==8&&(e.Props||e.Custprops)&&pxe(e,n),r.biff==8&&e.vbaraw&&Cfe(n,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var tg={0:{f:Bhe},1:{f:Ghe},2:{f:fpe},3:{f:tpe},4:{f:Jhe},5:{f:cpe},6:{f:gpe},7:{f:spe},8:{f:kpe},9:{f:jpe},10:{f:wpe},11:{f:Npe},12:{f:Xhe},13:{f:ppe},14:{f:npe},15:{f:Zhe},16:{f:zR},17:{f:ype},18:{f:ope},19:{f:aS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:yme},40:{},42:{},43:{f:gde},44:{f:mde},45:{f:bde},46:{f:Nde},47:{f:wde},48:{},49:{f:$oe},50:{},51:{f:rfe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:hR},62:{f:xpe},63:{f:dfe},64:{f:Upe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Wo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Fpe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Whe},148:{f:$he,p:16},151:{f:Tpe},152:{},153:{f:xme},154:{},155:{},156:{f:pme},157:{},158:{},159:{T:1,f:Pue},160:{T:-1},161:{T:1,f:Nh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Spe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:efe},336:{T:-1},337:{f:sfe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:sk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:fR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Ope},427:{f:Ppe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Dpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Hhe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Cpe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:sk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Nfe},633:{T:1},634:{T:-1},635:{T:1,f:bfe},636:{T:-1},637:{f:Voe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:nme},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:qpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},hk={6:{f:aj},10:{f:Uf},12:{f:bi},13:{f:bi},14:{f:Zs},15:{f:Zs},16:{f:$o},17:{f:Zs},18:{f:Zs},19:{f:bi},20:{f:JI},21:{f:JI},23:{f:fR},24:{f:ZI},25:{f:Zs},26:{},27:{},28:{f:qce},29:{},34:{f:Zs},35:{f:QI},38:{f:$o},39:{f:$o},40:{f:$o},41:{f:$o},42:{f:Zs},43:{f:Zs},47:{f:Zue},49:{f:pce},51:{f:bi},60:{},61:{f:cce},64:{f:Zs},65:{f:hce},66:{f:bi},77:{},80:{},81:{},82:{},85:{f:bi},89:{},90:{},91:{},92:{f:Qle},93:{f:Hce},94:{},95:{f:Zs},96:{},97:{},99:{f:Zs},125:{f:hR},128:{f:Ece},129:{f:ece},130:{f:bi},131:{f:Zs},132:{f:Zs},133:{f:tce},134:{},140:{f:Qce},141:{f:bi},144:{},146:{f:tue},151:{},152:{},153:{},154:{},155:{},156:{f:bi},157:{},158:{},160:{f:lue},161:{f:aue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Sce},190:{f:_ce},193:{f:Uf},197:{},198:{},199:{},200:{},201:{},202:{f:Zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:bi},220:{},221:{f:Zs},222:{},224:{f:Cce},225:{f:Jle},226:{f:Uf},227:{},229:{f:$ce},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:nce},253:{f:xce},255:{f:sce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:nR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Zs},353:{f:Uf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Dce},431:{f:Zs},432:{},433:{},434:{},437:{},438:{f:Gce},439:{f:Zs},440:{f:Kce},441:{},442:{f:gg},443:{},444:{f:bi},445:{},446:{},448:{f:Uf},449:{f:lce,r:2},450:{f:Uf},512:{f:KI},513:{f:oue},515:{f:Pce},516:{f:vce},517:{f:YI},519:{f:cue},520:{f:ice},523:{},545:{f:e8},549:{f:GI},566:{},574:{f:dce},638:{f:kce},659:{},1048:{},1054:{f:bce},1084:{},1212:{f:Rce},2048:{f:Yce},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Nv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Uf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:rue,r:12},2173:{f:Qde,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Mce,r:12},2197:{},2198:{f:Vde,r:12},2199:{},2200:{},2201:{},2202:{f:Bce,r:12},2203:{f:Uf},2204:{},2205:{},2206:{},2207:{},2211:{f:oce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:bi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:sue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:eue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:KI},1:{},2:{f:pue},3:{f:fue},4:{f:due},5:{f:YI},7:{f:xue},8:{},9:{f:Nv},11:{},22:{f:bi},30:{f:Nce},31:{},32:{},33:{f:e8},36:{},37:{f:GI},50:{f:gue},62:{},52:{},67:{},68:{f:bi},69:{},86:{},126:{},127:{f:uue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:vue},223:{},234:{},354:{},421:{},518:{f:aj},521:{f:Nv},536:{f:ZI},547:{f:QI},561:{},579:{},1030:{f:aj},1033:{f:Nv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function fr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&tS(r)&&e.push(r)}}function xxe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return fr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(f=e.next(4),f.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function wg(e,t,r){return e||(e=Ft(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function gxe(e,t,r,n){var s=Ft(9);return wg(s,e,t),aR(r,n||"b",s),s}function vxe(e,t,r){var n=Ft(8+2*r.length);return wg(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function yxe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Ri(ls(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?fr(e,2,mue(r,n,s)):fr(e,3,hue(r,n,s));return;case"b":case"e":fr(e,5,gxe(r,n,t.v,t.t));return;case"s":case"str":fr(e,4,vxe(r,n,(t.v||"").slice(0,255)));return}fr(e,1,wg(null,r,n))}function bxe(e,t,r,n){var s=Array.isArray(t),i=aa(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=bn(i)}for(var u=i.s.r;u<=i.e.r;++u){l=si(u);for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(c[f]=Ps(f)),o=c[f]+l;var d=s?(t[u]||[])[f]:t[o];d&&yxe(e,d,u,f)}}}function wxe(e,t){for(var r=t||{},n=Vl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return fr(n,r.biff==4?1033:r.biff==3?521:9,dS(e,16,r)),bxe(n,e.Sheets[e.SheetNames[s]],s,r),fr(n,10),n.end()}function Nxe(e,t,r){fr(e,49,mce({sz:12,name:"Arial"},r))}function jxe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&fr(e,1054,wce(s,t[s],r))})}function kxe(e,t){var r=Ft(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),fr(e,2151,r),r=Ft(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),cR(aa(t["!ref"]||"A1"),r),r.write_shift(4,4),fr(e,2152,r)}function Sxe(e,t){for(var r=0;r<16;++r)fr(e,224,XI({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){fr(e,224,XI(n,0,t))})}function _xe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];fr(e,440,Xce(n)),n[1].Tooltip&&fr(e,2048,Jce(n))}delete t["!links"]}function Axe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&fr(e,125,nue(lb(s,n),s))})}}function Cxe(e,t,r,n,s){var i=16+b0(s.cellXfs,t,s);if(t.v==null&&!t.bf){fr(e,513,dh(r,n,i));return}if(t.bf)fr(e,6,ehe(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Ri(ls(t.v)):t.v;fr(e,515,Ice(r,n,o,i));break;case"b":case"e":fr(e,517,Oce(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=yS(s.Strings,t.v,s.revStrings);fr(e,253,gce(r,n,l,i))}else fr(e,516,yce(r,n,(t.v||"").slice(0,255),i,s));break;default:fr(e,513,dh(r,n,i))}}function Exe(e,t,r){var n=Vl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,f,d="",m=[],p=aa(i["!ref"]||"A1"),y=u?65536:16384;if(p.e.c>255||p.e.r>=y){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}fr(n,2057,dS(r,16,t)),fr(n,13,eu(1)),fr(n,12,eu(100)),fr(n,15,yl(!0)),fr(n,17,yl(!1)),fr(n,16,ch(.001)),fr(n,95,yl(!0)),fr(n,42,yl(!1)),fr(n,43,yl(!1)),fr(n,130,eu(1)),fr(n,128,Tce()),fr(n,131,yl(!1)),fr(n,132,yl(!1)),u&&Axe(n,i["!cols"]),fr(n,512,jce(p,t)),u&&(i["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){d=si(v);for(var g=p.s.c;g<=p.e.c;++g){v===p.s.r&&(m[g]=Ps(g)),f=m[g]+d;var b=c?(i[v]||[])[g]:i[f];b&&(Cxe(n,b,v,g,t),u&&b.l&&i["!links"].push([f,b.l]))}}var w=l.CodeName||l.name||s;return u&&fr(n,574,fce((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&fr(n,229,zce(i["!merges"])),u&&_xe(n,i),fr(n,442,sR(w)),u&&kxe(n,i),fr(n,10),n.end()}function Txe(e,t,r){var n=Vl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(fr(n,2057,dS(e,5,r)),r.bookType=="xla"&&fr(n,135),fr(n,225,l?eu(1200):null),fr(n,193,Ole(2)),c&&fr(n,191),c&&fr(n,192),fr(n,226),fr(n,92,Zle("SheetJS",r)),fr(n,66,eu(l?1200:1252)),l&&fr(n,353,eu(0)),l&&fr(n,448),fr(n,317,iue(e.SheetNames.length)),l&&e.vbaraw&&fr(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";fr(n,442,sR(u))}fr(n,156,eu(17)),fr(n,25,yl(!1)),fr(n,18,yl(!1)),fr(n,19,eu(0)),l&&fr(n,431,yl(!1)),l&&fr(n,444,eu(0)),fr(n,61,uce()),fr(n,64,yl(!1)),fr(n,141,eu(0)),fr(n,34,yl(lme(e)=="true")),fr(n,14,yl(!0)),l&&fr(n,439,yl(!1)),fr(n,218,eu(0)),Nxe(n,e,r),jxe(n,e.SSF,r),Sxe(n,r),l&&fr(n,352,yl(!1));var f=n.end(),d=Vl();l&&fr(d,140,Zce()),l&&r.Strings&&xxe(d,252,ace(r.Strings)),fr(d,10);var m=d.end(),p=Vl(),y=0,v=0;for(v=0;v<e.SheetNames.length;++v)y+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=f.length+y+m.length;for(v=0;v<e.SheetNames.length;++v){var b=i[v]||{};fr(p,133,rce({pos:g,hs:b.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var w=p.end();if(y!=w.length)throw new Error("BS8 "+y+" != "+w.length);var j=[];return f.length&&j.push(f),w.length&&j.push(w),m.length&&j.push(m),Zi(j)}function Oxe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=cs(Qr)),e&&e.SSF&&(tm(),tb(e.SSF),r.revssf=nb(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,kS(r),r.cellXfs=[],b0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Exe(s,r,e);return n.unshift(Txe(e,n,r)),Zi(n)}function QR(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Gl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Oxe(e,t);case 4:case 3:case 2:return wxe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function u8(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=moe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,d=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(g!="<td"&&g!="<th")){var b=v.split(/<\/t[dh]>/i);for(l=0;l<b.length;++l){var w=b[l].trim();if(w.match(/<t[dh]/i)){for(var j=w,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var S=0;S<y.length;++S){var P=y[S];P.s.c==f&&P.s.r<u&&u<=P.e.r&&(f=P.e.c+1,S=-1)}var A=an(w.slice(0,w.indexOf(">")));m=A.colspan?+A.colspan:1,((d=+A.rowspan)>1||m>1)&&y.push({s:{r:u,c:f},e:{r:u+(d||1)-1,c:f+m-1}});var T=A.t||A["data-t"]||"";if(!j.length){f+=m;continue}if(j=NM(j),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!j.length){f+=m;continue}var I={t:"s",v:j};r.raw||!j.trim().length||T=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN($u(j))?isNaN(Bp(j).getDate())||(I={t:"d",v:ls(j)},r.cellDates||(I={t:"n",v:Ri(I.v)}),I.z=r.dateNF||Qr[14]):I={t:"n",v:$u(j)}),r.dense?(n[u]||(n[u]=[]),n[u][f]=I):n[rn({r:u,c:f})]=I,f+=m}}}}return n["!ref"]=bn(p),y.length&&(n["!merges"]=y),n}function Pxe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=rn({r,c:o}),d=n.dense?(e[r]||[])[o]:e[f],m=d&&d.v!=null&&(d.h||Q3(d.w||(gf(d),d.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+d.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+f,i.push(ur("td",m,p))}}var y="<tr>";return y+i.join("")+"</tr>"}var Ixe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Dxe="</body></html>";function Lxe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return y0(u8(r[0],t),t);var n=AS();return r.forEach(function(s,i){CS(n,u8(s,t),"Sheet"+(i+1))}),n}function Fxe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ZR(e,t){var r=t||{},n=r.header!=null?r.header:Ixe,s=r.footer!=null?r.footer:Dxe,i=[n],o=Gl(e["!ref"]);r.dense=Array.isArray(e),i.push(Fxe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Pxe(e,o,l,r));return i.push("</table>"+s),i.join("")}function e9(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Is(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Gl(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var d=[],m=0,p=e["!rows"]||(e["!rows"]=[]),y=0,v=0,g=0,b=0,w=0,j=0;for(e["!cols"]||(e["!cols"]=[]);y<l.length&&v<c;++y){var N=l[y];if(d8(N)){if(n.display)continue;p[v]={hidden:!0}}var S=N.children;for(g=b=0;g<S.length;++g){var P=S[g];if(!(n.display&&d8(P))){var A=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):NM(P.innerHTML),T=P.getAttribute("data-z")||P.getAttribute("z");for(m=0;m<d.length;++m){var I=d[m];I.s.c==b+i&&I.s.r<v+s&&v+s<=I.e.r&&(b=I.e.c+1-i,m=-1)}j=+P.getAttribute("colspan")||1,((w=+P.getAttribute("rowspan")||1)>1||j>1)&&d.push({s:{r:v+s,c:b+i},e:{r:v+s+(w||1)-1,c:b+i+(j||1)-1}});var B={t:"s",v:A},C=P.getAttribute("data-t")||P.getAttribute("t")||"";A!=null&&(A.length==0?B.t=C||"z":n.raw||A.trim().length==0||C=="s"||(A==="TRUE"?B={t:"b",v:!0}:A==="FALSE"?B={t:"b",v:!1}:isNaN($u(A))?isNaN(Bp(A).getDate())||(B={t:"d",v:ls(A)},n.cellDates||(B={t:"n",v:Ri(B.v)}),B.z=n.dateNF||Qr[14]):B={t:"n",v:$u(A)})),B.z===void 0&&T!=null&&(B.z=T);var E="",M=P.getElementsByTagName("A");if(M&&M.length)for(var q=0;q<M.length&&!(M[q].hasAttribute("href")&&(E=M[q].getAttribute("href"),E.charAt(0)!="#"));++q);E&&E.charAt(0)!="#"&&(B.l={Target:E}),n.dense?(e[v+s]||(e[v+s]=[]),e[v+s][b+i]=B):e[rn({c:b+i,r:v+s})]=B,u.e.c<b+i&&(u.e.c=b+i),b+=j}}++v}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,v-1+s),e["!ref"]=bn(u),v>=c&&(e["!fullref"]=bn((u.e.r=l.length-y+v-1+s,u))),e}function t9(e,t){var r=t||{},n=r.dense?[]:{};return e9(n,e,t)}function Mxe(e,t){return y0(t9(e,t),t)}function d8(e){var t="",r=Rxe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Rxe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Bxe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=na(t.replace(/<[^>]*>/g,""));return[r]}var f8={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function r9(e,t){var r=t||{},n=Z3(e),s=[],i,o,l={name:""},c="",u=0,f,d,m={},p=[],y=r.dense?[]:{},v,g,b={value:""},w="",j=0,N=[],S=-1,P=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,I={},B=[],C={},E=0,M=0,q=[],G=1,Z=1,te=[],ae={Names:[]},Q={},ee=["",""],W=[],O={},z="",H=0,R=!1,K=!1,le=0;for(Xx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Xx.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?y["!ref"]=bn(A):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(y["!fullref"]=y["!ref"],A.e.r=r.sheetRows-1,y["!ref"]=bn(A)),B.length&&(y["!merges"]=B),q.length&&(y["!rows"]=q),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),m[f.name]=y,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(f=an(v[0],!1),S=P=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,y=r.dense?[]:{},B=[],q=[],K=!0);break;case"table-row-group":v[1]==="/"?--T:++T;break;case"table-row":case"":if(v[1]==="/"){S+=G,G=1;break}if(d=an(v[0],!1),d.?S=d.-1:S==-1&&(S=0),G=+d["number-rows-repeated"]||1,G<10)for(le=0;le<G;++le)T>0&&(q[S+le]={level:T});P=-1;break;case"covered-table-cell":v[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(y[S]||(y[S]=[]),y[S][P]={t:"z"}):y[rn({r:S,c:P})]={t:"z"}),w="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++P,b=an(v[0],!1),Z=parseInt(b["number-columns-repeated"]||"1",10),g={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(g.f=o8(na(b.formula))),(b.||b["value-type"])=="string"&&(g.t="s",g.v=na(b["string-value"]||""),r.dense?(y[S]||(y[S]=[]),y[S][P]=g):y[rn({r:S,c:P})]=g),P+=Z-1;else if(v[1]!=="/"){++P,w="",j=0,N=[],Z=1;var he=G?S+G-1:S;if(P>A.e.c&&(A.e.c=P),P<A.s.c&&(A.s.c=P),S<A.s.r&&(A.s.r=S),he>A.e.r&&(A.e.r=he),b=an(v[0],!1),W=[],O={},g={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=na(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(E=parseInt(b["number-matrix-rows-spanned"],10)||0,M=parseInt(b["number-matrix-columns-spanned"],10)||0,C={s:{r:S,c:P},e:{r:S+E-1,c:P+M-1}},g.F=bn(C),te.push([C,g.F])),b.formula)g.f=o8(b.formula);else for(le=0;le<te.length;++le)S>=te[le][0].s.r&&S<=te[le][0].e.r&&P>=te[le][0].s.c&&P<=te[le][0].e.c&&(g.F=te[le][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(E=parseInt(b["number-rows-spanned"],10)||0,M=parseInt(b["number-columns-spanned"],10)||0,C={s:{r:S,c:P},e:{r:S+E-1,c:P+M-1}},B.push(C)),b["number-columns-repeated"]&&(Z=parseInt(b["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ss(b["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(b.value);break;case"percentage":g.t="n",g.v=parseFloat(b.value);break;case"currency":g.t="n",g.v=parseFloat(b.value);break;case"date":g.t="d",g.v=ls(b["date-value"]),r.cellDates||(g.t="n",g.v=Ri(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=foe(b["time-value"])/86400,r.cellDates&&(g.t="d",g.v=ab(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(b.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",b["string-value"]!=null&&(w=na(b["string-value"]),N=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(R=!1,g.t==="s"&&(g.v=w||"",N.length&&(g.R=N),R=j==0),Q.Target&&(g.l=Q),W.length>0&&(g.c=W,W=[]),w&&r.cellText!==!1&&(g.w=w),R&&(g.t="z",delete g.v),(!R||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<G;++ie){if(Z=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(y[S+ie]||(y[S+ie]=[]),y[S+ie][P]=ie==0?g:cs(g);--Z>0;)y[S+ie][P+Z]=cs(g);else for(y[rn({r:S+ie,c:P})]=g;--Z>0;)y[rn({r:S+ie,c:P+Z})]=cs(g);A.e.c<=P&&(A.e.c=P)}Z=parseInt(b["number-columns-repeated"]||"1",10),P+=Z-1,Z=0,g={},w="",N=[]}Q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;O.t=w,N.length&&(O.R=N),O.a=z,W.push(O)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);z="",H=0,w="",j=0,N=[];break;case"creator":v[1]==="/"?z=n.slice(H,v.index):H=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);w="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=an(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=an(v[0],!1),c+=f8[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=an(v[0],!1),c+=f8[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":o=an(v[0],!1),ee=sj(o["cell-range-address"]);var ce={Name:o.name,Ref:ee[0]+"!"+ee[1]};K&&(ce.Sheet=p.length),ae.Names.push(ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!b||!b["string-value"])){var De=Bxe(n.slice(j,v.index));w=(w.length>0?w+`
`:"")+De[0]}else an(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ee=sj(an(v[0])["target-range-address"]),m[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(Q=an(v[0],!1),!Q.href)break;Q.Target=na(Q.href),delete Q.href,Q.Target.charAt(0)=="#"&&Q.Target.indexOf(".")>-1?(ee=sj(Q.Target.slice(1)),Q.Target="#"+ee[0]+"!"+ee[1]):Q.Target.match(/^\.\.[\\\/]/)&&(Q.Target=Q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var ne={Sheets:m,SheetNames:p,Workbook:ae};return r.bookSheets&&delete ne.Sheets,ne}function h8(e,t){t=t||{},Zc(e,"META-INF/manifest.xml")&&fle(yi(e,"META-INF/manifest.xml"),t);var r=vc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=r9(Ua(r),t);return Zc(e,"meta.xml")&&(n.Props=VM(yi(e,"meta.xml"))),n}function p8(e,t){return r9(e,t)}var Uxe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Kx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ii+t}})(),m8=(function(){var e=function(i){return Aa(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Aa(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,f=0,d=Gl(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,y=Array.isArray(i);if(i["!cols"])for(f=0;f<=d.e.c;++f)c.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(u=0;u<d.s.r;++u)v=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=d.e.r;++u){for(v=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+v+`>
`),f=0;f<d.s.c;++f)c.push(t);for(;f<=d.e.c;++f){var b=!1,w={},j="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>f)&&!(m[p].s.r>u)&&!(m[p].e.c<f)&&!(m[p].e.r<u)){(m[p].s.c!=f||m[p].s.r!=u)&&(b=!0),w["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,w["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(b){c.push(r);continue}var N=rn({r:u,c:f}),S=y?(i[u]||[])[f]:i[N];if(S&&S.f&&(w["table:formula"]=Aa(ihe(S.f)),S.F&&S.F.slice(0,N.length)==N)){var P=Gl(S.F);w["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,w["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),w["office:value-type"]="float",w["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,w["office:value-type"]="string";break;case"d":j=S.w||ls(S.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=ls(S.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var A=e(j);if(S.l&&S.l.Target){var T=S.l.Target;T=T.charAt(0)=="#"?"#"+ohe(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),A=ur("text:a",A,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+ur("table:table-cell",ur("text:p",A,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;o0(d),d.ods=l;var m=u["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=c;var d=u["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ii],u=Kx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Kx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+f+`>
`),c.push(WM().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)c.push(n(o.Sheets[o.SheetNames[d]],o,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function n9(e,t){if(t.bookType=="fods")return m8(e,t);var r=X3(),n="",s=[],i=[];return n="mimetype",jn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",jn(r,n,m8(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",jn(r,n,Uxe(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",jn(r,n,ii+WM()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",jn(r,n,mle(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",jn(r,n,hle(s)),r}function fh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function pk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ua(v0(e))}function qxe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):gc(gd(e))}function $xe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function c0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function x8(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function zxe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Hxe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function rg(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Sa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function zs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ca(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=rg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=rg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function uo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(Sa(n*8+s.type)),s.type==2&&t.push(Sa(s.data.length)),t.push(s.data))})}),c0(t)}function NS(e,t){return e?.map(function(r){return t(r.data)})||[]}function Jc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=rg(e,n),i=ca(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:zs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ca(l.data),u=zs(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=zs(i[3][0].data)>>>0>0),r.push(o)}return r}function Wh(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Sa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Sa(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Sa(o.data.length)}],n[2].push({data:uo(o.meta),type:2})});var i=uo(n);t.push(Sa(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),c0(t)}function Wxe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=rg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[c0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var f=c0(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Qc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Wxe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return c0(t)}function Vh(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Sa(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return c0(t)}function Vxe(e,t,r,n){var s=fh(e),i=s.getUint32(4,!0),o=(n>1?12:8)+x8(i&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=x8(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var d;switch(e[2]){case 0:break;case 2:d={t:"n",v:u};break;case 3:d={t:"s",v:t[c]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(l>-1)d={t:"s",v:r[l]};else if(c>-1)d={t:"s",v:t[c]};else if(!isNaN(u))d={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return d}function Gxe(e,t,r){var n=fh(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(c=zxe(e,i),i+=16),s&2&&(u=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var d;switch(e[1]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t[l]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:d={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return d}function oj(e,t){var r=new Uint8Array(32),n=fh(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Hxe(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function lj(e,t){var r=new Uint8Array(32),n=fh(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function Kxe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Vxe(e,t,r,e[0]);case 5:return Gxe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Mo(e){var t=ca(e);return rg(t[1][0].data)}function g8(e,t){var r=ca(t.data),n=zs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ca(o.data),c=zs(l[1][0].data)>>>0;switch(n){case 1:i[c]=pk(l[3][0].data);break;case 8:{var u=e[Mo(l[9][0].data)][0],f=ca(u.data),d=e[Mo(f[1][0].data)][0],m=zs(d.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=ca(d.data);i[c]=p[3].map(function(y){return pk(y.data)}).join("")}break}}),i}function Xxe(e,t){var r,n,s,i,o,l,c,u,f,d,m,p,y,v,g=ca(e),b=zs(g[1][0].data)>>>0,w=zs(g[2][0].data)>>>0,j=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&zs(g[8][0].data)>0||!1,N,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)N=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((d=(f=g[4])==null?void 0:f[0])!=null&&d.data&&t!=1)N=(p=(m=g[4])==null?void 0:m[0])==null?void 0:p.data,S=(v=(y=g[3])==null?void 0:y[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=j?4:1,A=fh(N),T=[],I=0;I<N.length/2;++I){var B=A.getUint16(I*2,!0);B<65535&&T.push([I,B])}if(T.length!=w)throw"Expected ".concat(w," cells, found ").concat(T.length);var C=[];for(I=0;I<T.length-1;++I)C[T[I][0]]=S.subarray(T[I][1]*P,T[I+1][1]*P);return T.length>=1&&(C[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*P)),{R:b,cells:C}}function Yxe(e,t){var r,n=ca(t.data),s=(r=n?.[7])!=null&&r[0]?zs(n[7][0].data)>>>0>0?1:0:-1,i=NS(n[5],function(o){return Xxe(o,s)});return{nrows:zs(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function Jxe(e,t,r){var n,s=ca(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(zs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(zs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=bn(i);var o=ca(s[4][0].data),l=g8(e,e[Mo(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?g8(e,e[Mo(o[17][0].data)][0]):[],u=ca(o[3][0].data),f=0;u[1].forEach(function(d){var m=ca(d.data),p=e[Mo(m[2][0].data)][0],y=zs(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var v=Yxe(e,p);v.data.forEach(function(g,b){g.forEach(function(w,j){var N=rn({r:f+b,c:j}),S=Kxe(w,l,c);S&&(r[N]=S)})}),f+=v.nrows})}function Qxe(e,t){var r=ca(t.data),n={"!ref":"A1"},s=e[Mo(r[2][0].data)],i=zs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Jxe(e,s[0],n),n}function Zxe(e,t){var r,n=ca(t.data),s={name:(r=n[1])!=null&&r[0]?pk(n[1][0].data):"",sheets:[]},i=NS(n[2],Mo);return i.forEach(function(o){e[o].forEach(function(l){var c=zs(l.meta[1][0].data);c==6e3&&s.sheets.push(Qxe(e,l))})}),s}function ege(e,t){var r=AS(),n=ca(t.data),s=NS(n[1],Mo);if(s.forEach(function(i){e[i].forEach(function(o){var l=zs(o.meta[1][0].data);if(l==2){var c=Zxe(e,o);c.sheets.forEach(function(u,f){CS(r,u,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function cj(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Qc(c.content)}catch(d){return console.log("?? "+c.content.length+" "+(d.message||d))}var f;try{f=Jc(u)}catch(d){return console.log("## "+(d.message||d))}f.forEach(function(d){i[d.id]=d.messages,o.push(d.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&zs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var f=zs(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return ege(i,l)}function tge(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&zs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=fh(e[7][0].data),f=0,d=[],m=fh(e[4][0].data),p=0,y=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),m.setUint16(v*2,65535);continue}u.setUint16(v*2,f,!0),m.setUint16(v*2,p,!0);var g,b;switch(typeof t[v]){case"string":g=oj({t:"s",v:t[v]},r),b=lj({t:"s",v:t[v]},r);break;case"number":g=oj({t:"n",v:t[v]},r),b=lj({t:"n",v:t[v]},r);break;case"boolean":g=oj({t:"b",v:t[v]},r),b=lj({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}d.push(g),f+=g.length,y.push(b),p+=b.length,++c}for(e[2][0].data=Sa(c);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),m.setUint16(v*2,65535,!0);return e[6][0].data=c0(d),e[3][0].data=c0(y),c}function rge(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Gl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(bn(n)));var i=hy(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(z){return z.forEach(function(H){typeof H=="string"&&o.push(H)})});var l={},c=[],u=Hr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(z,H){return[z,u.FullPaths[H]]}).forEach(function(z){var H=z[0],R=z[1];if(H.type==2&&H.name.match(/\.iwa/)){var K=H.content,le=Qc(K),he=Jc(le);he.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:R,type:zs(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(z,H){return z-H});var f=c.filter(function(z){return z>1}).map(function(z){return[z,Sa(z)]});u.FileIndex.map(function(z,H){return[z,u.FullPaths[H]]}).forEach(function(z){var H=z[0];if(z[1],!!H.name.match(/\.iwa/)){var R=Jc(Qc(H.content));R.forEach(function(K){K.messages.forEach(function(le){f.forEach(function(he){K.messages.some(function(ie){return zs(ie.meta[1][0].data)!=11006&&$xe(ie.data,he[1])})&&l[he[0]].deps.push(K.id)})})})}});for(var d=Hr.find(u,l[1].location),m=Jc(Qc(d.content)),p,y=0;y<m.length;++y){var v=m[y];v.id==1&&(p=v)}var g=Mo(ca(p.messages[0].data)[1][0].data);for(d=Hr.find(u,l[g].location),m=Jc(Qc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=Mo(ca(p.messages[0].data)[2][0].data),d=Hr.find(u,l[g].location),m=Jc(Qc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=Mo(ca(p.messages[0].data)[2][0].data),d=Hr.find(u,l[g].location),m=Jc(Qc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);var b=ca(p.messages[0].data);{b[6][0].data=Sa(n.e.r+1),b[7][0].data=Sa(n.e.c+1);var w=Mo(b[46][0].data),j=Hr.find(u,l[w].location),N=Jc(Qc(j.content));{for(var S=0;S<N.length&&N[S].id!=w;++S);if(N[S].id!=w)throw"Bad ColumnRowUIDMapArchive";var P=ca(N[S].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var A=0;A<=n.e.c;++A){var T=[];T[1]=T[2]=[{type:0,data:Sa(A+420690)}],P[1].push({type:2,data:uo(T)}),P[2].push({type:0,data:Sa(A)}),P[3].push({type:0,data:Sa(A)})}P[4]=[],P[5]=[],P[6]=[];for(var I=0;I<=n.e.r;++I)T=[],T[1]=T[2]=[{type:0,data:Sa(I+726270)}],P[4].push({type:2,data:uo(T)}),P[5].push({type:0,data:Sa(I)}),P[6].push({type:0,data:Sa(I)});N[S].messages[0].data=uo(P)}j.content=Vh(Wh(N)),j.size=j.content.length,delete b[46];var B=ca(b[4][0].data);{B[7][0].data=Sa(n.e.r+1);var C=ca(B[1][0].data),E=Mo(C[2][0].data);j=Hr.find(u,l[E].location),N=Jc(Qc(j.content));{if(N[0].id!=E)throw"Bad HeaderStorageBucket";var M=ca(N[0].messages[0].data);for(I=0;I<i.length;++I){var q=ca(M[2][0].data);q[1][0].data=Sa(I),q[4][0].data=Sa(i[I].length),M[2][I]={type:M[2][0].type,data:uo(q)}}N[0].messages[0].data=uo(M)}j.content=Vh(Wh(N)),j.size=j.content.length;var G=Mo(B[2][0].data);j=Hr.find(u,l[G].location),N=Jc(Qc(j.content));{if(N[0].id!=G)throw"Bad HeaderStorageBucket";for(M=ca(N[0].messages[0].data),A=0;A<=n.e.c;++A)q=ca(M[2][0].data),q[1][0].data=Sa(A),q[4][0].data=Sa(n.e.r+1),M[2][A]={type:M[2][0].type,data:uo(q)};N[0].messages[0].data=uo(M)}j.content=Vh(Wh(N)),j.size=j.content.length;var Z=Mo(B[4][0].data);(function(){for(var z=Hr.find(u,l[Z].location),H=Jc(Qc(z.content)),R,K=0;K<H.length;++K){var le=H[K];le.id==Z&&(R=le)}var he=ca(R.messages[0].data);{he[3]=[];var ie=[];o.forEach(function(ne,Ue){ie[1]=[{type:0,data:Sa(Ue)}],ie[2]=[{type:0,data:Sa(1)}],ie[3]=[{type:2,data:qxe(ne)}],he[3].push({type:2,data:uo(ie)})})}R.messages[0].data=uo(he);var ce=Wh(H),De=Vh(ce);z.content=De,z.size=z.content.length})();var te=ca(B[3][0].data);{var ae=te[1][0];delete te[2];var Q=ca(ae.data);{var ee=Mo(Q[2][0].data);(function(){for(var z=Hr.find(u,l[ee].location),H=Jc(Qc(z.content)),R,K=0;K<H.length;++K){var le=H[K];le.id==ee&&(R=le)}var he=ca(R.messages[0].data);{delete he[6],delete te[7];var ie=new Uint8Array(he[5][0].data);he[5]=[];for(var ce=0,De=0;De<=n.e.r;++De){var ne=ca(ie);ce+=tge(ne,i[De],o),ne[1][0].data=Sa(De),he[5].push({data:uo(ne),type:2})}he[1]=[{type:0,data:Sa(n.e.c+1)}],he[2]=[{type:0,data:Sa(n.e.r+1)}],he[3]=[{type:0,data:Sa(ce)}],he[4]=[{type:0,data:Sa(n.e.r+1)}]}R.messages[0].data=uo(he);var Ue=Wh(H),Ce=Vh(Ue);z.content=Ce,z.size=z.content.length})()}ae.data=uo(Q)}B[3][0].data=uo(te)}b[4][0].data=uo(B)}p.messages[0].data=uo(b);var W=Wh(m),O=Vh(W);return d.content=O,d.size=d.content.length,u}function a9(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function jS(e){a9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function kS(e){a9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function nge(e){return Fn.WS.indexOf(e)>-1?"sheet":e==Fn.CS?"chart":e==Fn.DS?"dialog":e==Fn.MS?"macro":e&&e.length?e:"sheet"}function age(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,nge(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function sge(e,t,r,n,s,i,o,l,c,u,f,d){try{i[n]=Qm(vc(e,r,!0),t);var m=yi(e,t),p;switch(l){case"sheet":p=Ame(m,t,s,c,i[n],u,f,d);break;case"chart":if(p=Cme(m,t,s,c,i[n],u,f,d),!p||!p["!drawel"])break;var y=Rm(p["!drawel"].Target,t),v=Yx(y),g=pfe(vc(e,y,!0),Qm(vc(e,v,!0),y)),b=Rm(g,y),w=Yx(b);p=tme(vc(e,b,!0),b,c,Qm(vc(e,w,!0),b),u,p);break;case"macro":p=Eme(m,t,s,c,i[n],u,f,d);break;case"dialog":p=Tme(m,t,s,c,i[n],u,f,d);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var j=[];i&&i[n]&&Hs(i[n]).forEach(function(N){var S="";if(i[n][N].Type==Fn.CMNT){S=Rm(i[n][N].Target,t);var P=Dme(yi(e,S,!0),S,c);if(!P||!P.length)return;r8(p,P,!1)}i[n][N].Type==Fn.TCMNT&&(S=Rm(i[n][N].Target,t),j=j.concat(xfe(yi(e,S,!0),c)))}),j&&j.length&&r8(p,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function Kc(e){return e.charAt(0)=="/"?e.slice(1):e}function ige(e,t){if(tm(),t=t||{},jS(t),Zc(e,"META-INF/manifest.xml")||Zc(e,"objectdata.xml"))return h8(e,t);if(Zc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof cj<"u"){if(e.FileIndex)return cj(e);var r=Hr.utils.cfb_new();return jI(e).forEach(function(q){jn(r,q,goe(e,q))}),cj(r)}throw new Error("Unsupported NUMBERS file")}if(!Zc(e,"[Content_Types].xml"))throw Zc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=jI(e),s=ule(vc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",yi(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!yi(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Zm=[],s.sst)try{Zm=Ime(yi(e,Kc(s.sst)),s.sst,t)}catch(q){if(t.WTF)throw q}t.cellStyles&&s.themes.length&&(c=Pme(vc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Ome(yi(e,Kc(s.style)),s.style,c,t))}s.links.map(function(q){try{var G=Qm(vc(e,Yx(Kc(q))),q);return Fme(yi(e,Kc(q)),G,q,t)}catch{}});var f=_me(yi(e,Kc(s.workbooks[0])),s.workbooks[0],t),d={},m="";s.coreprops.length&&(m=yi(e,Kc(s.coreprops[0]),!0),m&&(d=VM(m)),s.extprops.length!==0&&(m=yi(e,Kc(s.extprops[0]),!0),m&&gle(m,d,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=vc(e,Kc(s.custprops[0]),!0),m&&(p=yle(m,t)));var y={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(G){return G.name}):d.Worksheets&&d.SheetNames.length>0&&(o=d.SheetNames),t.bookProps&&(y.Props=d,y.Custprops=p),t.bookSheets&&typeof o<"u"&&(y.SheetNames=o),t.bookSheets?y.SheetNames:t.bookProps))return y;o={};var v={};t.bookDeps&&s.calcchain&&(v=Lme(yi(e,Kc(s.calcchain)),s.calcchain));var g=0,b={},w,j;{var N=f.Sheets;d.Worksheets=N.length,d.SheetNames=[];for(var S=0;S!=N.length;++S)d.SheetNames[S]=N[S].name}var P=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Zc(e,T)||(T="xl/_rels/workbook."+P+".rels");var I=Qm(vc(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Mme(yi(e,Kc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=vfe(yi(e,Kc(s.people[0])),t)),I&&(I=age(I,f.Sheets));var B=yi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=d.Worksheets;++g){var C="sheet";if(I&&I[g]?(w="xl/"+I[g][1].replace(/[\/]?xl\//,""),Zc(e,w)||(w=I[g][1]),Zc(e,w)||(w=T.replace(/_rels\/.*$/,"")+I[g][1]),C=I[g][2]):(w="xl/worksheets/sheet"+(g+1-B)+"."+P,w=w.replace(/sheet0\./,"sheet.")),j=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(d.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var E=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==g&&(E=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==d.SheetNames[g].toLowerCase()&&(E=1);if(!E)continue e}}sge(e,w,j,d.SheetNames[g],g,b,o,C,t,f,c,u)}return y={Directory:s,Workbook:f,Props:d,Custprops:p,Deps:v,Sheets:o,SheetNames:d.SheetNames,Strings:Zm,Styles:u,Themes:c,SSF:cs(Qr)},t&&t.bookFiles&&(e.files?(y.keys=n,y.files=e.files):(y.keys=[],y.files={},e.FullPaths.forEach(function(q,G){q=q.replace(/^Root Entry[\/]/,""),y.keys.push(q),y.files[q]=e.FileIndex[G]}))),t&&t.bookVBA&&(s.vba.length>0?y.vbaraw=yi(e,Kc(s.vba[0]),!0):s.defaults&&s.defaults.bin===_fe&&(y.vbaraw=yi(e,"xl/vbaProject.bin",!0))),y}function oge(e,t){var r=t||{},n="Workbook",s=Hr.find(e,n);try{if(n="/!DataSpaces/Version",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Mue(s.content),n="/!DataSpaces/DataSpaceMap",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Bue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Uue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);$ue(s.content)}catch{}if(n="/EncryptionInfo",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=zue(s.content);if(n="/EncryptedPackage",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function lge(e,t){return t.bookType=="ods"?n9(e,t):t.bookType=="numbers"?rge(e,t):t.bookType=="xlsb"?cge(e,t):uge(e,t)}function cge(e,t){tp=1024,e&&!e.SSF&&(e.SSF=cs(Qr)),e&&e.SSF&&(tm(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ex?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=OR.indexOf(t.bookType)>-1,s=cS();kS(t=t||{});var i=X3(),o="",l=0;if(t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",jn(i,o,GM(e.Props,t)),s.coreprops.push(o),_a(t.rels,2,o,Fn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,jn(i,o,YM(e.Props)),s.extprops.push(o),_a(t.rels,3,o,Fn.EXT_PROPS),e.Custprops!==e.Props&&Hs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",jn(i,o,JM(e.Custprops)),s.custprops.push(o),_a(t.rels,4,o,Fn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},d=e.Sheets[e.SheetNames[l-1]],m=(d||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,jn(i,o,Bme(l-1,o,t,e,f)),s.sheets.push(o),_a(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Fn.WS[0]),d){var p=d["!comments"],y=!1,v="";p&&p.length>0&&(v="xl/comments"+l+"."+r,jn(i,v,$me(p,v)),s.comments.push(v),_a(f,-1,"../comments"+l+"."+r,Fn.CMNT),y=!0),d["!legacy"]&&y&&jn(i,"xl/drawings/vmlDrawing"+l+".vml",ER(l,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&jn(i,Yx(o),lp(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,jn(i,o,qme(t.Strings,o,t)),s.strs.push(o),_a(t.wbrels,-1,"sharedStrings."+r,Fn.SST)),o="xl/workbook."+r,jn(i,o,Rme(e,o)),s.workbooks.push(o),_a(t.rels,1,o,Fn.WB),o="xl/theme/theme1.xml",jn(i,o,mS(e.Themes,t)),s.themes.push(o),_a(t.wbrels,-1,"theme/theme1.xml",Fn.THEME),o="xl/styles."+r,jn(i,o,Ume(e,o,t)),s.styles.push(o),_a(t.wbrels,-1,"styles."+r,Fn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",jn(i,o,e.vbaraw),s.vba.push(o),_a(t.wbrels,-1,"vbaProject.bin",Fn.VBA)),o="xl/metadata."+r,jn(i,o,zme(o)),s.metadata.push(o),_a(t.wbrels,-1,"metadata."+r,Fn.XLMETA),jn(i,"[Content_Types].xml",HM(s,t)),jn(i,"_rels/.rels",lp(t.rels)),jn(i,"xl/_rels/workbook."+r+".rels",lp(t.wbrels)),delete t.revssf,delete t.ssf,i}function uge(e,t){tp=1024,e&&!e.SSF&&(e.SSF=cs(Qr)),e&&e.SSF&&(tm(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ex?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=OR.indexOf(t.bookType)>-1,s=cS();kS(t=t||{});var i=X3(),o="",l=0;if(t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",jn(i,o,GM(e.Props,t)),s.coreprops.push(o),_a(t.rels,2,o,Fn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,jn(i,o,YM(e.Props)),s.extprops.push(o),_a(t.rels,3,o,Fn.EXT_PROPS),e.Custprops!==e.Props&&Hs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",jn(i,o,JM(e.Custprops)),s.custprops.push(o),_a(t.rels,4,o,Fn.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,jn(i,o,$R(l-1,t,e,d)),s.sheets.push(o),_a(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Fn.WS[0]),m){var y=m["!comments"],v=!1,g="";if(y&&y.length>0){var b=!1;y.forEach(function(w){w[1].forEach(function(j){j.T==!0&&(b=!0)})}),b&&(g="xl/threadedComments/threadedComment"+l+"."+r,jn(i,g,gfe(y,f,t)),s.threadedcomments.push(g),_a(d,-1,"../threadedComments/threadedComment"+l+"."+r,Fn.TCMNT)),g="xl/comments"+l+"."+r,jn(i,g,TR(y)),s.comments.push(g),_a(d,-1,"../comments"+l+"."+r,Fn.CMNT),v=!0}m["!legacy"]&&v&&jn(i,"xl/drawings/vmlDrawing"+l+".vml",ER(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&jn(i,Yx(o),lp(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,jn(i,o,gR(t.Strings,t)),s.strs.push(o),_a(t.wbrels,-1,"sharedStrings."+r,Fn.SST)),o="xl/workbook."+r,jn(i,o,GR(e)),s.workbooks.push(o),_a(t.rels,1,o,Fn.WB),o="xl/theme/theme1.xml",jn(i,o,mS(e.Themes,t)),s.themes.push(o),_a(t.wbrels,-1,"theme/theme1.xml",Fn.THEME),o="xl/styles."+r,jn(i,o,SR(e,t)),s.styles.push(o),_a(t.wbrels,-1,"styles."+r,Fn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",jn(i,o,e.vbaraw),s.vba.push(o),_a(t.wbrels,-1,"vbaProject.bin",Fn.VBA)),o="xl/metadata."+r,jn(i,o,CR()),s.metadata.push(o),_a(t.wbrels,-1,"metadata."+r,Fn.XLMETA),f.length>1&&(o="xl/persons/person.xml",jn(i,o,yfe(f)),s.people.push(o),_a(t.wbrels,-1,"persons/person.xml",Fn.PEOPLE)),jn(i,"[Content_Types].xml",HM(s,t)),jn(i,"_rels/.rels",lp(t.rels)),jn(i,"xl/_rels/workbook."+r+".rels",lp(t.wbrels)),delete t.revssf,delete t.ssf,i}function SS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Nc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function dge(e,t){return Hr.find(e,"EncryptedPackage")?oge(e,t):JR(e,t)}function fge(e,t){var r,n=e,s=t||{};return s.type||(s.type=On&&Buffer.isBuffer(e)?"buffer":"base64"),r=yM(n,s),ige(r,s)}function s9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return fk(e.slice(r),t);default:break e}return Up.to_workbook(e,t)}function hge(e,t){var r="",n=SS(e,t);switch(t.type){case"base64":r=Nc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=lh(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ua(r)),t.type="binary",s9(r,t)}function pge(e,t){var r=e;return t.type=="base64"&&(r=Nc(r)),r=Hx.utils.decode(1200,r.slice(2),"str"),t.type="binary",s9(r,t)}function mge(e){return e.match(/[^\x00-\x7F]/)?gd(e):e}function uj(e,t,r,n){return n?(r.type="string",Up.to_workbook(e,r)):Up.to_workbook(t,r)}function fy(e,t){H3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return fy(new Uint8Array(e),(r=cs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),up={},r.dateNF&&(up.dateNF=r.dateNF),r.type||(r.type=On&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=On?"buffer":"binary",n=coe(e),typeof Uint8Array<"u"&&!On&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=mge(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=cs(r),r.type="array",fy(W3(n),r)}switch((s=SS(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return dge(Hr.read(n,r),r);break;case 9:if(s[1]<=8)return JR(n,r);break;case 60:return fk(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return bue(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return mR.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?fge(n,r):uj(e,n,r,i);case 239:return s[3]===60?fk(n,r):uj(e,n,r,i);case 255:if(s[1]===254)return pge(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Q0.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Q0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return dk.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return NR.to_workbook(n,r);break;case 10:case 13:case 32:return hge(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return yue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?dk.to_workbook(n,r):uj(e,n,r,i)}function i9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return pg(t.file,Hr.write(e,{type:On?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function xge(e,t){var r=cs(t||{}),n=lge(e,r);return gge(n,r)}function gge(e,t){var r={},n=On?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(eb(s))}return t.password&&typeof encrypt_agile<"u"?i9(encrypt_agile(s,t.password),t):t.type==="file"?pg(t.file,s):t.type=="string"?Ua(s):s}function vge(e,t){var r=t||{},n=mxe(e,r);return i9(n,r)}function ud(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Wx(gd(n));case"binary":return gd(n);case"string":return e;case"file":return pg(t.file,n,"utf8");case"buffer":return On?wf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ud(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function yge(e,t){switch(t.type){case"base64":return Wx(e);case"binary":return e;case"string":return e;case"file":return pg(t.file,e,"binary");case"buffer":return On?wf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function _v(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Wx(r):t.type=="string"?Ua(r):r;case"file":return pg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function o9(e,t){H3(),dme(e);var r=cs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=o9(e,r);return r.type="array",eb(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ud(lxe(e,r),r);case"slk":case"sylk":return ud(pR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ud(ZR(e.Sheets[e.SheetNames[s]],r),r);case"txt":return yge(l9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ud(_S(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ud(mR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return _v(dk.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ud(Up.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ud(NR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ud(xR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ud(n9(e,r),r);case"wk1":return _v(Q0.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return _v(Q0.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),_v(QR(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),vge(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return xge(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function bge(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function wge(e,t,r){var n={};return n.type="file",n.file=t,bge(n),o9(e,n)}function Nge(e,t,r,n,s,i,o,l){var c=si(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),d=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var y=o?e[r][p]:e[n[p]+c];if(y===void 0||y.t===void 0){if(u===void 0)continue;i[p]!=null&&(m[i[p]]=u);continue}var v=y.v;switch(y.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[p]!=null){if(v==null)if(y.t=="e"&&v===null)m[i[p]]=null;else if(u!==void 0)m[i[p]]=u;else if(f&&v===null)m[i[p]]=null;else continue;else m[i[p]]=f&&(y.t!=="n"||y.t==="n"&&l.rawNumbers!==!1)?v:gf(y,v,l);v!=null&&(d=!1)}}return{row:m,isempty:d}}function hy(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof f){case"string":c=aa(f);break;case"number":c=aa(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(s=0);var d=si(c.s.r),m=[],p=[],y=0,v=0,g=Array.isArray(e),b=c.s.r,w=0,j={};g&&!e[b]&&(e[b]=[]);var N=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(N[w]||{}).hidden)switch(m[w]=Ps(w),r=g?e[b][w]:e[m[w]+d],n){case 1:i[w]=w-c.s.c;break;case 2:i[w]=m[w];break;case 3:i[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=gf(r,null,u),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[w]=l}for(b=c.s.r+s;b<=c.e.r;++b)if(!(S[b]||{}).hidden){var P=Nge(e,c,b,m,n,i,g,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[y++]=P.row)}return p.length=y,p}var v8=/"/g;function jge(e,t,r,n,s,i,o,l){for(var c=!0,u=[],f="",d=si(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=l.dense?(e[r]||[])[m]:e[n[m]+d];if(p==null)f="";else if(p.v!=null){c=!1,f=""+(l.rawNumbers&&p.t=="n"?p.v:gf(p,null,l));for(var y=0,v=0;y!==f.length;++y)if((v=f.charCodeAt(y))===s||v===i||v===34||l.forceQuotes){f='"'+f.replace(v8,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(c=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(v8,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&c?null:u.join(o)}function _S(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=aa(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",d=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(d[y]=Ps(y));for(var v=0,g=s.s.r;g<=s.e.r;++g)(p[g]||{}).hidden||(f=jge(e,s,g,d,o,c,i,n),f!=null&&(n.strip&&(f=f.replace(u,"")),(f||n.blankrows!==!1)&&r.push((v++?l:"")+f)));return delete n.dense,r.join("")}function l9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=_S(e,t);return r}function kge(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=aa(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Ps(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=si(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function c9(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Is(n.origin):n.origin;o=c.r,l=c.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var d=aa(i["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),o==-1&&(o=d.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(v,g){Hs(v).forEach(function(b){(p=m.indexOf(b))==-1&&(m[p=m.length]=b);var w=v[b],j="z",N="",S=rn({c:l+p,r:o+g+s});u=ng(i,S),w&&typeof w=="object"&&!(w instanceof Date)?i[S]=w:(typeof w=="number"?j="n":typeof w=="boolean"?j="b":typeof w=="string"?j="s":w instanceof Date?(j="d",n.cellDates||(j="n",w=Ri(w)),N=n.dateNF||Qr[14]):w===null&&n.nullError&&(j="e",w=0),u?(u.t=j,u.v=w,delete u.w,delete u.R,N&&(u.z=N)):i[S]=u={t:j,v:w},N&&(u.z=N))})}),f.e.c=Math.max(f.e.c,l+m.length-1);var y=si(o);if(s)for(p=0;p<m.length;++p)i[Ps(p+l)+y]={t:"s",v:m[p]};return i["!ref"]=bn(f),i}function Sge(e,t){return c9(null,e,t)}function ng(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Is(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ng(e,rn(t)):ng(e,rn({r:t,c:r||0}))}function _ge(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function AS(){return{SheetNames:[],Sheets:{}}}function CS(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(VR(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Age(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=_ge(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Cge(e,t){return e.z=t,e}function u9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Ege(e,t,r){return u9(e,"#"+t,r)}function Tge(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Oge(e,t,r,n){for(var s=typeof t!="string"?t:aa(t),i=typeof t=="string"?t:bn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=ng(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var O0={encode_col:Ps,encode_row:si,encode_cell:rn,encode_range:bn,decode_col:nS,decode_row:rS,split_cell:qoe,decode_cell:Is,decode_range:Gl,format_cell:gf,sheet_add_aoa:MM,sheet_add_json:c9,sheet_add_dom:e9,aoa_to_sheet:rm,json_to_sheet:Sge,table_to_sheet:t9,table_to_book:Mxe,sheet_to_csv:_S,sheet_to_txt:l9,sheet_to_json:hy,sheet_to_html:ZR,sheet_to_formulae:kge,sheet_to_row_object_array:hy,sheet_get_cell:ng,book_new:AS,book_append_sheet:CS,book_set_sheet_visibility:Age,cell_set_number_format:Cge,cell_set_hyperlink:u9,cell_set_internal_link:Ege,cell_add_comment:Tge,sheet_set_array_formula:Oge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const nf={all:["tasks"],lists:()=>[...nf.all,"list"],list:e=>[...nf.lists(),e],details:()=>[...nf.all,"detail"],detail:e=>[...nf.details(),e]},Pge=(e,t,r)=>jc({queryKey:nf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const n=await Qy(e);return Array.isArray(n)?n:n?.data&&Array.isArray(n.data)||n?.success&&n?.data&&Array.isArray(n.data)?n.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:n=>n}),Ige=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async n=>{const s=await _7(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:nf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to create task")}})},Dge=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async({id:n,data:s})=>{const i=await Y1(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:nf.lists()}),e.invalidateQueries({queryKey:nf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to update task")}})},Lge=()=>{const e=ji(),{showSuccess:t,showError:r}=ba();return Al({mutationFn:async n=>(await A7(n),n),onSuccess:()=>{e.invalidateQueries({queryKey:nf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to delete task")}})},Bm={all:["projects"],lists:()=>[...Bm.all,"list"],list:e=>[...Bm.lists(),e],details:()=>[...Bm.all,"detail"],detail:e=>[...Bm.details(),e]},Fge=(e,t,r)=>jc({queryKey:Bm.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const n=await Qp(e);return Array.isArray(n)?n:n?.data&&Array.isArray(n.data)||n?.success&&n?.data&&Array.isArray(n.data)?n.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:n=>n}),Um={all:["users"],lists:()=>[...Um.all,"list"],list:e=>[...Um.lists(),{search:e}],details:()=>[...Um.all,"detail"],detail:e=>[...Um.details(),e]},Mge=e=>jc({queryKey:Um.list(e),queryFn:async()=>{const t=await Td(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),Rge=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:n,showInfo:s}=ba(),i=ji(),{data:o=[],isLoading:l,error:c}=Pge(),{data:u=[],isLoading:f}=Fge(),{data:d=[],isLoading:m}=Mge(),p=Dge(),y=Lge();Ige();const v=l||f||m,[g,b]=U.useState(""),[w,j]=U.useState("active"),[N,S]=U.useState("list"),[P,A]=U.useState("none"),[T,I]=U.useState(!1),[B,C]=U.useState("upload"),[E,M]=U.useState([]),[q,G]=U.useState([]),[Z,te]=U.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[ae,Q]=U.useState(!1),[ee,W]=U.useState(null),[O,z]=U.useState(null),[H,R]=U.useState(null),[K,le]=U.useState(null),[he,ie]=U.useState(null),[ce,De]=U.useState(null),[ne,Ue]=U.useState(!1),[Ce,de]=U.useState(!1),[Y,ve]=U.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[ye,Ae]=U.useState([]),[pe,ue]=U.useState(!1),[Pe,Ne]=U.useState(!1),[Re,nt]=U.useState(!1),[xt,kt]=U.useState(!1),[Me,vt]=U.useState(""),[ut,lt]=U.useState(""),[pr,rr]=U.useState(""),[ft,$t]=U.useState(null),[tr,$e]=U.useState(!1),[bt,jr]=U.useState(null),[Yt,Fr]=U.useState(null),[Cr,lr]=U.useState(!1),[Ut,wr]=U.useState(""),[Er,Yr]=U.useState(0),[sn,Wn]=U.useState([]),[or,Vn]=U.useState(!1),[fn,Ke]=U.useState([]),[Nt,Vt]=U.useState(!1),re=U.useRef(null),me=U.useRef(null),be=U.useRef(null),_e=qe=>{const It=qe.getFullYear(),Ct=qe.getMonth(),sr=qe.getDate();return`${It}-${String(Ct+1).padStart(2,"0")}-${String(sr).padStart(2,"0")}`},Ee=qe=>{if(!qe||!/^\d{4}-\d{2}-\d{2}$/.test(qe))return qe;const[It,Ct,sr]=qe.split("-").map(Number);return new Date(It,Ct-1,sr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Oe=qe=>{const It=new Date(qe),Ct=It.getDay(),sr=It.getDate()-Ct+(Ct===0?-6:1);return new Date(It.setDate(sr))},Xe=qe=>{const It=new Date(qe);It.setHours(0,0,0,0);const Ct=new Date(It);return Ct.setDate(It.getDate()+6),Ct.setHours(23,59,59,999),{start:It,end:Ct}},ct=qe=>{if(!qe||!/^\d{4}-\d{2}-\d{2}$/.test(qe))return null;const[It,Ct,sr]=qe.split("-").map(Number),Nr=new Date(It,Ct-1,sr),mr=Oe(Nr);return`${mr.getFullYear()}-${String(mr.getMonth()+1).padStart(2,"0")}-${String(mr.getDate()).padStart(2,"0")}`};U.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),n("Failed to load tasks"))},[c,n]),U.useEffect(()=>{ce&&!ne&&ve({title:ce.title,category:ce.category||"",description:ce.description||"",dueDate:ce.dueDate||"",priority:ce.priority||"Medium",status:ce.status||"Todo",assigneeId:ce.assigneeId,projectId:ce.projectId||""})},[ce,ne]),U.useEffect(()=>{if(!ce)return;let qe=!1;return(async()=>{try{const It=await X1(),Ct=Array.isArray(It?.data)?It.data:[];qe||Ke(Ct)}catch{qe||Ke([])}})(),()=>{qe=!0}},[ce?.id]),U.useEffect(()=>{if(!ne){Vt(!1);return}Y.category&&fn.includes(Y.category)?Vt(!1):Y.category&&!fn.includes(Y.category)&&Vt(!0)},[ne,Y.category,fn]);const Ve=async qe=>{if(o.find(Ct=>Ct.id===qe)){z(qe);try{await p.mutateAsync({id:qe,data:{archived:w==="active"}}),le(null)}catch{}finally{z(null)}}},Je=async qe=>{W(qe);try{await y.mutateAsync(qe),ie(null)}catch{}finally{W(null)}},He=()=>{ye.length===Ta.length?Ae([]):Ae(Ta.map(qe=>qe.id))},Le=async()=>{ue(!0);try{const qe=[...ye];await Promise.all(qe.map(It=>y.mutateAsync(It))),Ae([]),Ne(!1),r(`Successfully deleted ${qe.length} task${qe.length>1?"s":""}`)}catch(qe){n(qe.message||"Failed to delete tasks")}finally{ue(!1)}},tt=async()=>{if(!Me){n("Please select a project");return}kt(!0);try{const qe=[...ye];await Promise.all(qe.map(It=>p.mutateAsync({id:It,data:{projectId:Me==="__none__"?null:Me}}))),Ae([]),nt(!1),vt(""),r(`Assigned ${qe.length} task${qe.length>1?"s":""} to ${Me==="__none__"?"No project":u.find(It=>It.id===Me)?.title||"project"}`)}catch(qe){n(qe.message||"Failed to assign project")}finally{kt(!1)}},ht=()=>{const qe=new Date;qe.setDate(qe.getDate()+30);const It=qe.getDate(),Ct=qe.getMonth()+1,sr=qe.getFullYear(),Nr=`${It}-${Ct}-${sr}`,mr=O0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",Nr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),_r=O0.book_new();O0.book_append_sheet(_r,mr,"Tasks"),wge(_r,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},Pt=async()=>{if(!Z.title){n("Please map the required field: Title");return}if(q.length===0){n("No data to import");return}Q(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Z),console.log("[IMPORT] Parsed data rows:",q.length),console.log("[IMPORT] Sample parsed row:",q[0]);const qe=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!qe){n("Please log in to import tasks"),Q(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:q.length,columnMapping:Z,usersCount:d.length,currentUserId:qe});const It=q.map((nr,xr)=>{console.log(`[IMPORT] Processing row ${xr}:`,nr),console.log("[IMPORT] Column mapping:",Z);const Dt=String(nr[Z.title]||"").trim(),Ar=Z.category?String(nr[Z.category]||"").trim():"",Ht=String(nr[Z.dueDate]||"").trim(),Gn=Z.description?String(nr[Z.description]||"").trim():"",Rn=Z.priority?String(nr[Z.priority]||"").trim():"Medium",cn=Z.owner?String(nr[Z.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${xr}:`,{title:Dt,category:Ar,dueDateRaw:Ht,description:Gn,priorityRaw:Rn,ownerRaw:cn,rowKeys:Object.keys(nr),mappedTitleKey:Z.title,mappedDueDateKey:Z.dueDate});let er="";if(Ht&&Ht.toLowerCase().trim()==="ongoing")er="";else if(Ht)if(/^\d+$/.test(Ht)&&parseFloat(Ht)>25569){const $r=new Date(1900,0,1),Gr=parseFloat(Ht)-2,Wt=new Date($r.getTime()+Gr*24*60*60*1e3);isNaN(Wt.getTime())||(er=_e(Wt))}else{let $r=null;if(/^\d{4}-\d{2}-\d{2}$/.test(Ht))er=Ht,$r=new Date(0);else if(Ht.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(Ht)){const Gr=Ht.split("-").map(Wt=>Wt.trim());if(Gr.length===3){const Wt=parseInt(Gr[0],10),En=parseInt(Gr[1],10)-1,Kn=parseInt(Gr[2],10);!isNaN(Wt)&&!isNaN(En)&&!isNaN(Kn)&&Wt>=1&&Wt<=31&&En>=0&&En<=11&&($r=new Date(Kn,En,Wt),console.log(`[IMPORT] Parsed hyphen-separated date "${Ht}" as day-month-year -> ${_e($r)}`))}}else if(Ht.includes("/")){const Gr=Ht.split("/").map(Wt=>Wt.trim());if(Gr.length===3){const Wt=parseInt(Gr[0],10),En=parseInt(Gr[1],10)-1;let Kn=parseInt(Gr[2],10);Kn<100&&(Kn+=2e3),!isNaN(Wt)&&!isNaN(En)&&!isNaN(Kn)&&($r=new Date(Kn,En,Wt))}}else if(Ht.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const Gr=Ht.split("/"),Wt=parseInt(Gr[0],10)-1,En=parseInt(Gr[1],10),Kn=parseInt(Gr[2],10);!isNaN(En)&&!isNaN(Wt)&&!isNaN(Kn)&&($r=new Date(Kn,Wt,En))}else if(!$r||isNaN($r.getTime())){const Gr=Ht.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(Gr){const[,Wt,En,Kn]=Gr,ms=["january","february","march","april","may","june","july","august","september","october","november","december"],Be=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],gr=Wt.toLowerCase().trim();let Tr=-1;for(let kr=0;kr<ms.length;kr++)if(gr.startsWith(ms[kr])||gr.startsWith(Be[kr])){Tr=kr;break}if(Tr>=0){const kr=parseInt(En,10),Jr=parseInt(Kn,10);$r=new Date(Jr,Tr,kr),$r.getFullYear()!==Jr||$r.getMonth()!==Tr||$r.getDate()!==kr?(console.warn(`[IMPORT] Invalid date parsed from "${Ht}": year=${Jr}, month=${Tr}, day=${kr}`),$r=null):console.log(`[IMPORT] Successfully parsed date "${Ht}" -> ${_e($r)}`)}else console.warn(`[IMPORT] Could not match month name in "${Ht}"`)}}if(!$r||isNaN($r.getTime())){const Gr=new Date(Ht);if(!isNaN(Gr.getTime())){const Wt=Gr.getFullYear(),En=Gr.getMonth(),Kn=Gr.getDate();$r=new Date(Wt,En,Kn),console.log(`[IMPORT] Used fallback date parsing for "${Ht}" -> ${_e($r)}`)}}$r&&!isNaN($r.getTime())&&!er?(er=_e($r),console.log(`[IMPORT] Final dueDate for row ${xr}: "${Ht}" -> "${er}"`)):Ht&&!er&&console.error(`[IMPORT] Failed to parse date "${Ht}" for row ${xr}`)}const Na={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[Rn.toLowerCase()]||"Medium";let un=qe;if(cn&&d.length>0){const $r=cn.toLowerCase().trim(),Gr=d.find(Wt=>Wt.name.toLowerCase().trim()===$r||Wt.email.toLowerCase().trim()===$r||Wt.name.toLowerCase().trim().includes($r)||Wt.email.toLowerCase().trim().includes($r));Gr?(un=Gr.id,console.log(`[IMPORT] Matched owner "${cn}" to user:`,Gr.name,Gr.id)):console.warn(`[IMPORT] Could not match owner "${cn}", using current user`)}un||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),un=qe);const gn={title:Dt.trim(),category:Ar||void 0,dueDate:er||null,description:Gn.trim()||"",priority:Na,status:"Todo",assigneeId:un,_rowIndex:xr,_rawDate:Ht};return(!gn.title||!gn.assigneeId)&&console.error(`[IMPORT] Row ${xr} missing required fields:`,{hasTitle:!!gn.title,hasAssigneeId:!!gn.assigneeId,taskData:gn}),un||console.warn(`[IMPORT] Row ${xr}: No assigneeId found, using current user:`,{title:Dt,ownerRaw:cn,userId:qe}),console.log(`[IMPORT] Task data for row ${xr}:`,gn),gn}).filter(nr=>{const xr=nr.title&&nr.assigneeId;return xr?console.log("[IMPORT] Valid task:",{title:nr.title,dueDate:nr.dueDate||"Not set",assigneeId:nr.assigneeId,priority:nr.priority,status:nr.status}):console.error("[IMPORT] Filtered out invalid task:",{title:nr.title,dueDate:nr.dueDate,assigneeId:nr.assigneeId,rawDate:nr._rawDate,rowIndex:nr._rowIndex,fullTask:nr,missingFields:{title:!nr.title,assigneeId:!nr.assigneeId}}),xr}).map(({_rowIndex:nr,_rawDate:xr,...Dt})=>(Dt.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Dt),Dt.assigneeId=qe),Dt));if(console.log("[IMPORT] Final tasks to import:",It),console.log("[IMPORT] Tasks count:",It.length),It.length===0){const nr=q[0],xr=nr?String(nr[Z.title]||"").trim():"N/A",Dt=nr?String(nr[Z.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:q.length,columnMapping:Z,mappedTitle:Z.title,mappedDueDate:Z.dueDate,sampleRow:nr,sampleTitle:xr,sampleDate:Dt,sampleRowKeys:nr?Object.keys(nr):[],parsedData:q.slice(0,3)}),n(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Z.title}")
2. Due Date column is mapped correctly (current: "${Z.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${xr}", Date: "${Dt}"

Available columns: ${E.join(", ")}`),Q(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const Ct=It.map(({_rowIndex:nr,_rawDate:xr,...Dt})=>Dt);console.log("[IMPORT] Tasks to import count:",Ct.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(Ct,null,2)),console.log("[IMPORT] Sample task structure:",{title:Ct[0]?.title,dueDate:Ct[0]?.dueDate,assigneeId:Ct[0]?.assigneeId,priority:Ct[0]?.priority,status:Ct[0]?.status,description:Ct[0]?.description,hasProjectId:!!Ct[0]?.projectId});const sr=Ct.filter(nr=>!nr.title||!nr.assigneeId);if(sr.length>0){console.error("[IMPORT] Invalid tasks found:",sr),n(`Cannot import: ${sr.length} task(s) missing required fields (title or assigneeId)`),Q(!1);return}let Nr;try{Nr=await vne(Ct),console.log("[IMPORT] API call successful")}catch(nr){console.error("[IMPORT] API call failed:",nr),console.error("[IMPORT] Error details:",{message:nr.message,status:nr.status,code:nr.code,stack:nr.stack}),n(`Failed to import tasks: ${nr.message||"Unknown error"}`),Q(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(Nr,null,2)),console.log("[IMPORT] Response type:",typeof Nr),console.log("[IMPORT] Response keys:",Nr?Object.keys(Nr):"null");let mr={},_r=[];if(Nr)Nr.success&&Nr.data?(mr=Nr.data,_r=mr.created||[]):Nr.data&&Array.isArray(Nr.data.created)?(mr=Nr.data,_r=mr.created||[]):Nr.created&&Array.isArray(Nr.created)?(mr=Nr,_r=mr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),mr=Nr.data||Nr,_r=mr.created||mr.data?.created||[]),console.log("[IMPORT] Extracted importData:",mr),console.log("[IMPORT] Created tasks:",_r),console.log("[IMPORT] Created tasks count:",_r.length),console.log("[IMPORT] Created task IDs:",_r.map(nr=>nr?.id)),console.log("[IMPORT] Created task details:",_r.map(nr=>({id:nr.id,title:nr.title,assigneeId:nr.assigneeId})));else{console.error("[IMPORT] No response received from API"),n("No response received from server. Please check your connection."),Q(!1);return}const kn=mr.successful??_r.length??0,In=mr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:kn,failedCount:In,total:It.length,createdTasks:_r.length,createdTaskIds:_r.map(nr=>nr.id),errors:mr.errors}),_r&&_r.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",_r.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",_r),console.error("[IMPORT] Response structure:",Nr),console.error("[IMPORT] Import data:",mr)),In>0){const nr=mr.errors?.map(xr=>`Row ${xr.index+1}: ${xr.error}`).join(`
`)||"";n(`Imported ${kn} task(s), but ${In} failed.
${nr}`)}else r(`Successfully imported ${kn} task(s)`);G([]),M([]),te({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),re.current&&(re.current.value=""),I(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(qe){console.error("Import error:",qe),n(qe.message||"Failed to import tasks. Please check your data format.")}finally{Q(!1)}},Mt=qe=>{if(!qe||qe.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",qe),console.log("[IMPORT] Header detection - firstRow length:",qe.length),console.log("[IMPORT] Header detection - firstRow values:",qe.map((mr,_r)=>`[${_r}]: "${mr}"`));const It=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let Ct=0;const sr=qe.filter(mr=>mr&&String(mr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",sr);for(const mr of sr){const _r=String(mr).toLowerCase().trim();It.some(kn=>_r.includes(kn))&&(Ct++,console.log(`[IMPORT] Header detection - matched keyword in: "${mr}"`)),_r.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(Ct++,console.log(`[IMPORT] Header detection - matched pattern in: "${mr}"`))}const Nr=sr.length>0?Ct/sr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:qe,totalCells:qe.length,cellsToCheck:sr.length,matchCount:Ct,matchRatio:Nr,isHeader:Nr>=.4}),Nr>=.4},vr=async qe=>{const It=qe.target.files?.[0];if(It)try{const Ct=It.name.split(".").pop()?.toLowerCase();if(Ct==="csv"){const sr=new FileReader;sr.onload=Nr=>{try{const mr=new Uint8Array(Nr.target?.result),_r=fy(mr,{type:"array",sheetStubs:!0}),kn=_r.SheetNames[0],In=_r.Sheets[kn],nr=O0.decode_range(In["!ref"]||"A1"),xr=nr.e.c-nr.s.c+1;console.log("[IMPORT] CSV worksheet range:",In["!ref"]),console.log("[IMPORT] CSV number of columns from range:",xr);const Dt=O0.sheet_to_json(In,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Dt.length),console.log("[IMPORT] CSV first row length:",Dt[0]?.length),console.log("[IMPORT] CSV first row:",Dt[0]),Dt.length===0){n("File is empty");return}if(Dt[0]&&Dt[0].length<xr)for(console.log(`[IMPORT] CSV: Padding first row from ${Dt[0].length} to ${xr} columns`);Dt[0].length<xr;)Dt[0].push("");const Ar=Mt(Dt[0]);console.log("[IMPORT] CSV Header detection result:",Ar);let Ht,Gn;if(Ar?(Ht=Dt[0].map((er,Sn)=>String(er||"").trim()||`Column ${Sn+1}`),Gn=1,console.log("[IMPORT] CSV raw first row:",Dt[0]),console.log("[IMPORT] CSV processed headers:",Ht)):(Ht=Dt[0].map((er,Sn)=>`Column ${Sn+1}`),Gn=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Ht.length===0){n("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Ht),console.log("[IMPORT] CSV detected headers count:",Ht.length),console.log("[IMPORT] CSV detected headers array:",Ht),M(Ht),console.log("[IMPORT] CSV setDetectedColumns called with:",Ht);const Rn=[];for(let er=Gn;er<Dt.length;er++){const Sn={},Na=Dt[er]||[];for(;Na.length<Ht.length;)Na.push("");Ht.forEach((un,gn)=>{const $r=Na[gn];if(typeof $r=="number"&&$r>25569&&un.toLowerCase().includes("date")){const Gr=new Date(1900,0,1),Wt=$r-2,En=new Date(Gr.getTime()+Wt*24*60*60*1e3);Sn[un]=En.toISOString().split("T")[0]}else Sn[un]=$r!=null?String($r).trim():""}),Object.values(Sn).some(un=>un)&&Rn.push(Sn)}console.log("[IMPORT] CSV parsed rows:",Rn),console.log("[IMPORT] CSV parsed rows count:",Rn.length),G(Rn);const cn={title:Ht.find(er=>er.toLowerCase().includes("title")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("name")||!er.toLowerCase().includes("category")&&er.toLowerCase().includes("name"))||"",category:Ht.find(er=>er.toLowerCase().includes("category")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("cat"))||"",dueDate:Ht.find(er=>er.toLowerCase().includes("due")||er.toLowerCase().includes("date")&&!er.toLowerCase().includes("created")&&!er.toLowerCase().includes("updated"))||"",description:Ht.find(er=>er.toLowerCase().includes("description")||er.toLowerCase().includes("desc"))||"",priority:Ht.find(er=>er.toLowerCase().includes("priority")||er.toLowerCase().includes("prio"))||"",owner:Ht.find(er=>er.toLowerCase().includes("owner")||er.toLowerCase().includes("assignee")||er.toLowerCase().includes("assigned")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("owner"))||""};te(cn),C("mapping")}catch(mr){console.error("CSV parse error:",mr),n("Failed to parse CSV file: "+(mr.message||"Unknown error"))}},sr.readAsArrayBuffer(It)}else if(Ct==="xlsx"||Ct==="xls"){const sr=new FileReader;sr.onload=Nr=>{const mr=new Uint8Array(Nr.target?.result),_r=fy(mr,{type:"array"}),kn=_r.SheetNames[0],In=_r.Sheets[kn],nr=O0.decode_range(In["!ref"]||"A1"),xr=nr.e.c-nr.s.c+1;console.log("[IMPORT] Excel worksheet range:",In["!ref"]),console.log("[IMPORT] Excel number of columns from range:",xr);const Dt=O0.sheet_to_json(In,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Dt.length),console.log("[IMPORT] Excel first row length:",Dt[0]?.length),console.log("[IMPORT] Excel first row:",Dt[0]),Dt.length===0){n("File is empty");return}if(Dt[0]&&Dt[0].length<xr)for(console.log(`[IMPORT] Padding first row from ${Dt[0].length} to ${xr} columns`);Dt[0].length<xr;)Dt[0].push("");const Ar=Mt(Dt[0]);console.log("[IMPORT] Excel Header detection result:",Ar);let Ht,Gn;Ar?(Ht=Dt[0].map((er,Sn)=>String(er||"").trim()||`Column ${Sn+1}`),Gn=1,console.log("[IMPORT] Excel raw first row:",Dt[0]),console.log("[IMPORT] Excel processed headers:",Ht)):(Ht=Dt[0].map((er,Sn)=>`Column ${Sn+1}`),Gn=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",Ht),console.log("[IMPORT] Detected headers count:",Ht.length),console.log("[IMPORT] Detected headers array:",Ht),console.log("[IMPORT] Raw JSON data:",Dt),M(Ht),console.log("[IMPORT] setDetectedColumns called with:",Ht);const Rn=[];for(let er=Gn;er<Dt.length;er++){const Sn={},Na=Dt[er]||[];for(;Na.length<Ht.length;)Na.push("");Ht.forEach((un,gn)=>{const $r=Na[gn];if(typeof $r=="number"&&$r>25569&&un.toLowerCase().includes("date")){const Gr=new Date(1900,0,1),Wt=$r-2,En=new Date(Gr.getTime()+Wt*24*60*60*1e3),Kn=En.getFullYear(),ms=En.getMonth(),Be=En.getDate();Sn[un]=`${Kn}-${String(ms+1).padStart(2,"0")}-${String(Be).padStart(2,"0")}`}else Sn[un]=$r!=null?String($r).trim():""}),Object.values(Sn).some(un=>un)&&Rn.push(Sn)}console.log("[IMPORT] Parsed rows:",Rn),console.log("[IMPORT] Parsed rows count:",Rn.length),G(Rn);const cn={title:Ht.find(er=>er.toLowerCase().includes("title")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("name")||!er.toLowerCase().includes("category")&&er.toLowerCase().includes("name"))||"",category:Ht.find(er=>er.toLowerCase().includes("category")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("cat"))||"",dueDate:Ht.find(er=>er.toLowerCase().includes("due")||er.toLowerCase().includes("date")&&!er.toLowerCase().includes("created")&&!er.toLowerCase().includes("updated"))||"",description:Ht.find(er=>er.toLowerCase().includes("description")||er.toLowerCase().includes("desc"))||"",priority:Ht.find(er=>er.toLowerCase().includes("priority")||er.toLowerCase().includes("prio"))||"",owner:Ht.find(er=>er.toLowerCase().includes("owner")||er.toLowerCase().includes("assignee")||er.toLowerCase().includes("assigned")||er.toLowerCase().includes("task")&&er.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",cn),te(cn),C("mapping")},sr.readAsArrayBuffer(It)}else n("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(Ct){console.error("Error parsing file:",Ct),n("Failed to parse file: "+(Ct.message||"Unknown error"))}},zr=async(qe,It,Ct)=>{Ct.stopPropagation();const sr=It==="Done"?"Todo":"Done";R(qe);try{await p.mutateAsync({id:qe,data:{status:sr}}),ce?.id===qe&&De({...ce,status:sr})}catch{}finally{R(null)}},on=async()=>{if(ce){if(!Y.title.trim()){n("Task title is required");return}if(!Y.assigneeId){n("Assignee is required");return}de(!0);try{await p.mutateAsync({id:ce.id,data:{title:Y.title.trim(),category:Y.category.trim()||void 0,description:Y.description.trim()||"",dueDate:Y.dueDate||null,priority:Y.priority,status:Y.status,assigneeId:Y.assigneeId,projectId:Y.projectId||null}}),De({...ce,title:Y.title.trim(),category:Y.category.trim()||void 0,description:Y.description.trim()||"",dueDate:Y.dueDate||"",priority:Y.priority,status:Y.status,assigneeId:Y.assigneeId,projectId:Y.projectId||void 0}),Ue(!1)}catch{}finally{de(!1)}}},Mn=(qe,It=1200,Ct=1200,sr=.8)=>new Promise((Nr,mr)=>{const _r=new FileReader;_r.onload=kn=>{const In=new Image;In.onload=()=>{let nr=In.width,xr=In.height;nr>xr?nr>It&&(xr=xr*It/nr,nr=It):xr>Ct&&(nr=nr*Ct/xr,xr=Ct);const Dt=document.createElement("canvas");Dt.width=nr,Dt.height=xr;const Ar=Dt.getContext("2d");Ar?(Ar.drawImage(In,0,0,nr,xr),Nr(Dt.toDataURL("image/jpeg",sr))):mr(new Error("Canvas context not available"))},In.onerror=()=>mr(new Error("Failed to load image")),In.src=kn.target?.result},_r.onerror=()=>mr(new Error("Failed to read file")),_r.readAsDataURL(qe)}),ps=async qe=>{const It=qe.target.files?.[0];if(It){if(!It.type.startsWith("image/")){n("Please select an image file");return}if(It.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const Ct=await Mn(It,1200,1200,.8);rr(Ct),$t(It)}catch(Ct){n(Ct.message||"Failed to process image")}}},xn=qe=>{const It=qe.target.value,Ct=qe.target.selectionStart;lt(It),Yr(Ct);const sr=It.substring(0,Ct),Nr=sr.lastIndexOf("@");if(Nr!==-1){const mr=sr.substring(Nr+1),_r=Nr>0?sr[Nr-1]:" ";if((_r===" "||_r===`
`||Nr===0)&&!mr.includes(" ")&&!mr.includes(`
`)){wr(mr);const kn=d.filter(In=>In.name.toLowerCase().includes(mr.toLowerCase())||In.email.toLowerCase().includes(mr.toLowerCase()));Wn(kn.slice(0,5)),lr(!0);return}}lr(!1)},wa=qe=>{const Ct=ut.substring(0,Er).lastIndexOf("@"),sr=ut.substring(Er),mr=`${ut.substring(0,Ct)}@${qe.name} ${sr}`;if(lt(mr),lr(!1),be.current){be.current.focus();const _r=Ct+qe.name.length+2;be.current.setSelectionRange(_r,_r)}},Pn=qe=>{const It=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ct=[];let sr;for(;(sr=It.exec(qe))!==null;){const Nr=sr[1].trim(),mr=d.find(_r=>_r.name.toLowerCase()===Nr.toLowerCase());mr&&mr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Ct.push(mr.id)}return[...new Set(Ct)]},pa=qe=>{const It=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ct=[];let sr=0,Nr;for(;(Nr=It.exec(qe))!==null;){Nr.index>sr&&Ct.push(qe.substring(sr,Nr.index));const mr=Nr[1].trim(),_r=d.find(kn=>kn.name.toLowerCase()===mr.toLowerCase());_r?Ct.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",_r.name]},Nr.index)):Ct.push(`@${mr}`),sr=Nr.index+Nr[0].length}return sr<qe.length&&Ct.push(qe.substring(sr)),Ct.length>0?Ct:qe},sa=async()=>{if(ce){if(!ut.trim()&&!ft){n("Please enter a note or upload an image");return}$e(!0);try{const qe=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,It=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",Ct={id:`note_${Date.now()}`,userId:qe,userName:It,text:ut.trim(),imageUrl:pr||void 0,imageName:ft?.name||void 0,imageMimeType:ft?.type||void 0,createdAt:new Date().toISOString()},sr=[...ce.notes||[],Ct];await p.mutateAsync({id:ce.id,data:{notes:sr}}),De({...ce,notes:sr});const Nr=Pn(ut);for(const _r of Nr)try{await Mp({userId:_r,type:"mention",title:"You were mentioned in a task",message:`${It} mentioned you in task "${ce.title}"`,relatedId:ce.id,relatedType:"task",read:!1})}catch(kn){console.error("Failed to send notification:",kn)}lt(""),rr(""),$t(null),me.current&&(me.current.value="");const mr=Nr.length>0?`Note added and ${Nr.length} user(s) notified`:"Note added successfully";r(mr)}catch(qe){n(qe.message||"Failed to add note")}finally{$e(!1)}}},ma=async()=>{if(!(!ce||!t||!Yt))try{jr(Yt);const qe=ce.notes?.filter(It=>It.id!==Yt)||[];await p.mutateAsync({id:ce.id,data:{notes:qe}}),De({...ce,notes:qe}),r("Note deleted successfully"),Fr(null)}catch(qe){n(qe.message||"Failed to delete note")}finally{jr(null)}},Ws=()=>{De(null),Ue(!1),lt(""),rr(""),$t(null),lr(!1),Vn(!1),me.current&&(me.current.value="")};let Ta=o.filter(qe=>{if(w==="archived"){if(!qe.archived)return!1}else if(w==="week"){if(qe.archived)return!1}else if(qe.archived)return!1;return g.trim()?qe.title.toLowerCase().includes(g.toLowerCase()):!0});if(P==="dueDate")Ta=[...Ta].sort((qe,It)=>!qe.dueDate&&!It.dueDate?0:qe.dueDate?It.dueDate?(qe.dueDate||"").localeCompare(It.dueDate||""):-1:1);else if(P==="priority"){const qe={High:1,Medium:2,Low:3};Ta=[...Ta].sort((It,Ct)=>{const sr=qe[It.priority]||4,Nr=qe[Ct.priority]||4;return sr-Nr})}else P==="category"?Ta=[...Ta].sort((qe,It)=>{const Ct=(qe.category||"Uncategorized").toLowerCase(),sr=(It.category||"Uncategorized").toLowerCase();return Ct.localeCompare(sr)}):P==="owner"&&(Ta=[...Ta].sort((qe,It)=>{const Ct=d.find(Nr=>Nr.id===qe.assigneeId)?.name||"Unassigned",sr=d.find(Nr=>Nr.id===It.assigneeId)?.name||"Unassigned";return Ct.localeCompare(sr)}));return a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{j("active"),Ae([])},className:`text-sm font-bold pb-1 transition-all ${w==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{j("archived"),Ae([])},className:`text-sm font-bold pb-1 transition-all ${w==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(qe=>qe.archived).length,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{I(!0),C("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[a.jsx(K_,{className:"w-4 h-4"})," Bulk Import"]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx(vn,{className:"w-4 h-4"})," New Task"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:qe=>{b(qe.target.value),Ae([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:P,onChange:qe=>A(qe.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[a.jsx("option",{value:"none",children:"No Sort"}),a.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),a.jsx("option",{value:"priority",children:"Sort by Priority"}),a.jsx("option",{value:"category",children:"Sort by Category"}),a.jsx("option",{value:"owner",children:"Sort by Owner"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:a.jsx(xl,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${N==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(GB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${N==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(zB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{j(w==="week"?"active":"week"),Ae([])},className:`p-2 rounded-lg ${w==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:a.jsx(ha,{className:"w-4 h-4"})})]})]}),!v&&Ta.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Ta.length>0&&ye.length===Ta.length,onChange:He}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):Ta.length===0?a.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[a.jsx(Gv,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",w==="week"?"tasks":w," tasks found"]})]}):w==="week"?a.jsx("div",{className:"space-y-8",children:(()=>{const qe=Ta.filter(xr=>!ct(xr.dueDate)),It=Ta.filter(xr=>ct(xr.dueDate)),Ct={};It.forEach(xr=>{const Dt=ct(xr.dueDate);Ct[Dt]||(Ct[Dt]=[]),Ct[Dt].push(xr)});const sr=Object.keys(Ct).sort(),Nr=(()=>{const xr=Oe(new Date);return`${xr.getFullYear()}-${String(xr.getMonth()+1).padStart(2,"0")}-${String(xr.getDate()).padStart(2,"0")}`})(),mr=(()=>{const xr=Oe(new Date),Dt=new Date(xr);return Dt.setDate(xr.getDate()+7),`${Dt.getFullYear()}-${String(Dt.getMonth()+1).padStart(2,"0")}-${String(Dt.getDate()).padStart(2,"0")}`})(),_r=(xr,Dt)=>{const Ar=xr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Ht=Dt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Ar} - ${Ht}`},kn=xr=>{if(xr===Nr)return"This Week";if(xr===mr)return"Next Week";const[Dt,Ar,Ht]=xr.split("-").map(Number),Gn=new Date(Dt,Ar-1,Ht),{start:Rn,end:cn}=Xe(Gn);return`Week of ${_r(Rn,cn)}`},In=xr=>{const[Dt,Ar,Ht]=xr.split("-").map(Number);return Xe(new Date(Dt,Ar-1,Ht))};sr.forEach(xr=>{Ct[xr].sort((Dt,Ar)=>(Dt.dueDate||"").localeCompare(Ar.dueDate||""))});const nr=xr=>xr.length===0?null:N==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:xr.map(Dt=>{const Ar=ye.includes(Dt.id);return a.jsxs("div",{onClick:()=>De(Dt),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Ar?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:Ht=>Ht.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ar,onChange:()=>Ae(Ht=>Ar?Ht.filter(Gn=>Gn!==Dt.id):[...Ht,Dt.id])})}),a.jsx("button",{onClick:Ht=>zr(Dt.id,Dt.status,Ht),disabled:H===Dt.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:H===Dt.id?a.jsx(wt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Dt.status==="Done"?a.jsx(yn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(bd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Dt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Dt.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Dt.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Dt.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ht=>Ht.id===Dt.projectId)?.title||"General"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ha,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Dt.dueDate?Ee(Dt.dueDate):"Ongoing"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Dt.priority==="High"?"bg-red-50 text-red-600":Dt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Dt.priority}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[a.jsx(wl,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:d.find(Ht=>Ht.id===Dt.assigneeId)?.name||"Unassigned"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),De(Dt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(wd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),le(Dt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(pd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),ie(Dt)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]})]},Dt.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xr.map(Dt=>{const Ar=ye.includes(Dt.id);return a.jsxs("div",{onClick:()=>De(Dt),className:`bg-white p-6 rounded-3xl border ${Ar?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsx("div",{className:"absolute top-4 left-4",onClick:Ht=>Ht.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:`${Ar?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:Ar,onChange:()=>Ae(Ht=>Ar?Ht.filter(Gn=>Gn!==Dt.id):[...Ht,Dt.id])})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:`font-bold text-sm mb-3 ${Dt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Dt.title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[Dt.category&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Es,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Dt.category})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ht=>Ht.id===Dt.projectId)?.title||"General"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Dt.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ha,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ee(Dt.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Dt.priority==="High"?"bg-red-50 text-red-600":Dt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Dt.priority})]})]},Dt.id)})});return a.jsxs(a.Fragment,{children:[sr.map(xr=>{const Dt=Ct[xr];if(!Dt||Dt.length===0)return null;const Ar=In(xr),Ht=kn(xr);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:Ht}),a.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:_r(Ar.start,Ar.end)}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Dt.length,")"]})]}),nr(Dt)]},xr)}),qe.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",qe.length," tasks)"]})]}),nr(qe)]})]})})()}):N==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:Ta.map(qe=>{const It=ye.includes(qe.id);return a.jsxs("div",{onClick:()=>De(qe),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${qe.archived?"bg-slate-50/50":""} ${It?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:Ct=>Ct.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:It,onChange:()=>Ae(Ct=>It?Ct.filter(sr=>sr!==qe.id):[...Ct,qe.id])})}),a.jsx("button",{onClick:Ct=>zr(qe.id,qe.status,Ct),disabled:H===qe.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:H===qe.id?a.jsx(wt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):qe.status==="Done"?a.jsx(yn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(bd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${qe.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:qe.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[qe.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:qe.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ct=>Ct.id===qe.projectId)?.title||"General"}),a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ha,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:qe.dueDate?Ee(qe.dueDate):"Ongoing"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${qe.priority==="High"?"bg-red-50 text-red-600":qe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:qe.priority}),qe.assigneeId&&(()=>{const Ct=d.find(sr=>sr.id===qe.assigneeId);return Ct?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:Ct.name,children:[a.jsx(wl,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:Ct.name})]}):null})()]}),a.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),De(qe)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:a.jsx(wd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),le(qe)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:qe.archived?a.jsx(Kv,{className:"w-4 h-4"}):a.jsx(pd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),ie(qe)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},qe.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ta.map(qe=>{const It=ye.includes(qe.id);return a.jsxs("div",{onClick:()=>De(qe),className:`bg-white p-6 rounded-3xl border ${It?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:a.jsx(jl,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),De(qe)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:a.jsx(wd,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),le(qe)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:a.jsx(pd,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),ie(qe)},className:"p-1.5 text-slate-400 hover:text-red-500",children:a.jsx(Ur,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{onClick:Ct=>Ct.stopPropagation(),className:`${It?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:It,onChange:()=>Ae(Ct=>It?Ct.filter(sr=>sr!==qe.id):[...Ct,qe.id])})})]})]}),a.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${qe.status==="Done"?"line-through opacity-40":""}`,children:qe.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:qe.description}),qe.category&&a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[a.jsx(Es,{className:"w-3.5 h-3.5 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:qe.category})]})}),qe.assigneeId&&(()=>{const Ct=d.find(sr=>sr.id===qe.assigneeId);return Ct?a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[a.jsx(wl,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:Ct.name})]})}):null})(),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[qe.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ha,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ee(qe.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${qe.priority==="High"?"bg-red-50 text-red-600":qe.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:qe.priority})]})]},qe.id)})}),T&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(K_,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(ir,{className:"w-6 h-6 text-slate-400"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:B==="upload"?a.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(a0,{className:"w-4 h-4"})," Registry Data Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("button",{onClick:()=>re.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:a.jsx(UB,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),a.jsxs("button",{onClick:ht,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[a.jsx(H0,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),a.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),a.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",E.length," columns and ",q.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),a.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:a.jsx(Ka,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:a.jsx(Es,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:a.jsx(ha,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:a.jsx(a0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:a.jsx(Es,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:a.jsx(wl,{className:"w-4 h-4"})}].map(qe=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[a.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:qe.icon}),a.jsx("div",{children:a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[qe.label," ",qe.required&&a.jsx("span",{className:"text-red-500",children:"*"})]})})]}),a.jsx(ho,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),a.jsxs("select",{value:Z[qe.key]||"",onChange:It=>te({...Z,[qe.key]:It.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"-- Select Source Column --"}),E.map(It=>a.jsx("option",{value:It,children:It},It))]})]},qe.key))}),a.jsxs("div",{className:"flex gap-4 pt-6",children:[a.jsx("button",{onClick:()=>{C("upload"),G([]),M([]),te({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),re.current&&(re.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),a.jsx("button",{onClick:Pt,disabled:ae||!Z.title||!Z.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:ae?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),a.jsx("input",{ref:re,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:vr})]})}),K&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?a.jsx(Kv,{className:"w-6 h-6"}):a.jsx(pd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>le(null),disabled:O===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ve(K.id),disabled:O===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O===K.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),he&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:he.title}),he.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:he.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ie(null),disabled:ee===he.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Je(he.id),disabled:ee===he.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===he.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),ye.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:ye.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),nt(!0),vt("")},disabled:xt,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[a.jsx(Zf,{className:"w-3.5 h-3.5"}),"Assign to project"]}),a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),Ne(!0)},disabled:pe,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[pe?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ur,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>Ae([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),Re&&ye.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:a.jsx(Zf,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",ye.length," selected task",ye.length>1?"s":"","."]})]})]}),a.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),a.jsxs("select",{value:Me,onChange:qe=>vt(qe.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"Select project..."}),a.jsx("option",{value:"__none__",children:"None (General)"}),u.filter(qe=>!qe.archived).map(qe=>a.jsx("option",{value:qe.id,children:qe.title},qe.id))]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{nt(!1),vt("")},disabled:xt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:tt,disabled:xt||!Me,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:xt?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${ye.length} task${ye.length>1?"s":""}`})]})]})}),Pe&&ye.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",ye.length," Task",ye.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(qe=>ye.includes(qe.id)).slice(0,5).map(qe=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(jl,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:qe.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:u.find(It=>It.id===qe.projectId)?.title||"General"})]})]},qe.id)),ye.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",ye.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ne(!1),disabled:pe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Le,disabled:pe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:pe?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${ye.length} Task${ye.length>1?"s":""}`})]})]})}),ce&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Ws}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:Ws,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(jl,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[ne?a.jsx("input",{type:"text",value:Y.title,onChange:qe=>ve(It=>({...It,title:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:ce.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${ce.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":ce.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":ce.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:ce.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",ce.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:ne?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{Ue(!1),ve({title:ce.title,description:ce.description||"",dueDate:ce.dueDate||"",priority:ce.priority||"Medium",status:ce.status||"Todo",assigneeId:ce.assigneeId,projectId:ce.projectId||""})},disabled:Ce,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:on,disabled:Ce||!Y.title.trim()||!Y.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Ce?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>Ue(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),ne?a.jsxs("select",{value:Y.assigneeId,onChange:qe=>ve(It=>({...It,assigneeId:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),d.map(qe=>a.jsx("option",{value:qe.id,children:qe.name},qe.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:d.find(qe=>qe.id===ce.assigneeId)?.name?.charAt(0)||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.find(qe=>qe.id===ce.assigneeId)?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),ne?a.jsxs("select",{value:Y.projectId,onChange:qe=>ve(It=>({...It,projectId:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),u.filter(qe=>!qe.archived).map(qe=>a.jsx("option",{value:qe.id,children:qe.title},qe.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ce.projectId?u.find(qe=>qe.id===ce.projectId)?.title||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ka,{className:"w-4 h-4 text-indigo-500"})," Description"]}),ne?a.jsx("textarea",{rows:6,value:Y.description,onChange:qe=>ve(It=>({...It,description:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:ce.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3.5 h-3.5"})," Task Category"]}),ne?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:Nt?"__new__":Y.category||"",onChange:qe=>{const It=qe.target.value;It==="__new__"?(Vt(!0),ve(Ct=>({...Ct,category:""}))):(Vt(!1),ve(Ct=>({...Ct,category:It})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),fn.map(qe=>a.jsx("option",{value:qe,children:qe},qe)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),Nt&&a.jsx("input",{type:"text",value:Y.category,onChange:qe=>ve(It=>({...It,category:qe.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:ce.category?a.jsxs(a.Fragment,{children:[a.jsx(Es,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:ce.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),ne?a.jsx("input",{type:"date",value:Y.dueDate,onChange:qe=>ve(It=>({...It,dueDate:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ce.dueDate?Ee(ce.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),ne?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(qe=>a.jsx("button",{onClick:()=>ve(It=>({...It,priority:qe})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${Y.priority===qe?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:qe},qe))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${ce.priority==="High"?"bg-red-50 text-red-600":ce.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:ce.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),ne?a.jsxs("select",{value:Y.status,onChange:qe=>ve(It=>({...It,status:qe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[ce.status==="Done"?a.jsx(yn,{className:"w-5 h-5 text-emerald-500"}):ce.status==="In Progress"?a.jsx(Os,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(bd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:ce.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",ce.notes&&ce.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:ce.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:be,rows:3,value:ut,onChange:xn,onBlur:()=>{setTimeout(()=>lr(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),Cr&&sn.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(ax,{className:"w-3 h-3"}),"Mention User"]}),sn.map(qe=>a.jsxs("button",{onClick:()=>wa(qe),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:qe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:qe.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:qe.email})]})]},qe.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:pr?a.jsx(bl,{className:"w-4 h-4"}):a.jsx(Wu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:pr?ft?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:ps,className:"hidden"})]}),a.jsx("button",{onClick:sa,disabled:tr||!ut.trim()&&!ft,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:tr?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Send"]})})]}),pr&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:pr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{rr(""),$t(null),me.current&&(me.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(ir,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:ce.notes&&ce.notes.length>0?[...ce.notes].reverse().map(qe=>{const It=t?.role==="Admin"||qe.userId===t?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:qe.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:qe.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(qe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),It&&a.jsx("button",{onClick:()=>Fr(qe.id),disabled:bt===qe.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:bt===qe.id?a.jsx(wt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),qe.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:pa(qe.text)}),qe.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:qe.imageUrl,alt:qe.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ct=window.open();Ct&&Ct.document.write(`<img src="${qe.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},qe.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>Vn(!or),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(os,{className:`w-4 h-4 text-slate-400 transition-transform ${or?"rotate-90":""}`})]}),or&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:ce.createdAt?new Date(ce.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),ce.updatedAt&&ce.updatedAt!==ce.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ce.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),ce.notes&&ce.notes.map((qe,It)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[qe.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(qe.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},qe.id)),(!ce.notes||ce.notes.length===0)&&(!ce.updatedAt||ce.updatedAt===ce.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>{ie(ce),Ws()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ur,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:Ws,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(yn,{className:"w-5 h-5"})," Close"]})]})]})]}),Yt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(ea,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Fr(null),disabled:bt===Yt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ma,disabled:bt===Yt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:bt===Yt?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Ca(e){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(e)}var zo=Uint8Array,yc=Uint16Array,ES=Int32Array,cb=new zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ub=new zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mk=new zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d9=function(e,t){for(var r=new yc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new ES(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},f9=d9(cb,2),h9=f9.b,xk=f9.r;h9[28]=258,xk[258]=28;var p9=d9(ub,0),Bge=p9.b,y8=p9.r,gk=new yc(32768);for(var is=0;is<32768;++is){var qf=(is&43690)>>1|(is&21845)<<1;qf=(qf&52428)>>2|(qf&13107)<<2,qf=(qf&61680)>>4|(qf&3855)<<4,gk[is]=((qf&65280)>>8|(qf&255)<<8)>>1}var _d=(function(e,t,r){for(var n=e.length,s=0,i=new yc(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new yc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new yc(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var u=s<<4|e[s],f=t-e[s],d=o[e[s]-1]++<<f,m=d|(1<<f)-1;d<=m;++d)l[gk[d]>>c]=u}else for(l=new yc(n),s=0;s<n;++s)e[s]&&(l[s]=gk[o[e[s]-1]++]>>15-e[s]);return l}),u0=new zo(288);for(var is=0;is<144;++is)u0[is]=8;for(var is=144;is<256;++is)u0[is]=9;for(var is=256;is<280;++is)u0[is]=7;for(var is=280;is<288;++is)u0[is]=8;var ag=new zo(32);for(var is=0;is<32;++is)ag[is]=5;var Uge=_d(u0,9,0),qge=_d(u0,9,1),$ge=_d(ag,5,0),zge=_d(ag,5,1),dj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Tu=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},fj=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},TS=function(e){return(e+7)/8|0},m9=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new zo(e.subarray(t,r))},Hge=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Du=function(e,t,r){var n=new Error(t||Hge[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Du),!r)throw n;return n},Wge=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new zo(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new zo(s*3));var u=function(De){var ne=r.length;if(De>ne){var Ue=new zo(Math.max(ne*2,De));Ue.set(r),r=Ue}},f=t.f||0,d=t.p||0,m=t.b||0,p=t.l,y=t.d,v=t.m,g=t.n,b=s*8;do{if(!p){f=Tu(e,d,1);var w=Tu(e,d+1,3);if(d+=3,w)if(w==1)p=qge,y=zge,v=9,g=5;else if(w==2){var P=Tu(e,d,31)+257,A=Tu(e,d+10,15)+4,T=P+Tu(e,d+5,31)+1;d+=14;for(var I=new zo(T),B=new zo(19),C=0;C<A;++C)B[mk[C]]=Tu(e,d+C*3,7);d+=A*3;for(var E=dj(B),M=(1<<E)-1,q=_d(B,E,1),C=0;C<T;){var G=q[Tu(e,d,M)];d+=G&15;var j=G>>4;if(j<16)I[C++]=j;else{var Z=0,te=0;for(j==16?(te=3+Tu(e,d,3),d+=2,Z=I[C-1]):j==17?(te=3+Tu(e,d,7),d+=3):j==18&&(te=11+Tu(e,d,127),d+=7);te--;)I[C++]=Z}}var ae=I.subarray(0,P),Q=I.subarray(P);v=dj(ae),g=dj(Q),p=_d(ae,v,1),y=_d(Q,g,1)}else Du(1);else{var j=TS(d)+4,N=e[j-4]|e[j-3]<<8,S=j+N;if(S>s){c&&Du(0);break}l&&u(m+N),r.set(e.subarray(j,S),m),t.b=m+=N,t.p=d=S*8,t.f=f;continue}if(d>b){c&&Du(0);break}}l&&u(m+131072);for(var ee=(1<<v)-1,W=(1<<g)-1,O=d;;O=d){var Z=p[fj(e,d)&ee],z=Z>>4;if(d+=Z&15,d>b){c&&Du(0);break}if(Z||Du(2),z<256)r[m++]=z;else if(z==256){O=d,p=null;break}else{var H=z-254;if(z>264){var C=z-257,R=cb[C];H=Tu(e,d,(1<<R)-1)+h9[C],d+=R}var K=y[fj(e,d)&W],le=K>>4;K||Du(3),d+=K&15;var Q=Bge[le];if(le>3){var R=ub[le];Q+=fj(e,d)&(1<<R)-1,d+=R}if(d>b){c&&Du(0);break}l&&u(m+131072);var he=m+H;if(m<Q){var ie=i-Q,ce=Math.min(Q,he);for(ie+m<0&&Du(3);m<ce;++m)r[m]=n[ie+m]}for(;m<he;++m)r[m]=r[m-Q]}}t.l=p,t.p=O,t.b=m,t.f=f,p&&(f=1,t.m=v,t.d=y,t.n=g)}while(!f);return m!=r.length&&o?m9(r,0,m):r.subarray(0,m)},Yd=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},_m=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},hj=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:g9,l:0};if(s==1){var o=new zo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,P){return S.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,f=1,d=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=s-1;)l=r[r[u].f<r[d].f?u++:d++],c=r[u!=f&&r[u].f<r[d].f?u++:d++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new yc(m+1),y=vk(r[f-1],p,0);if(y>t){var n=0,v=0,g=y-t,b=1<<g;for(i.sort(function(P,A){return p[A.s]-p[P.s]||P.f-A.f});n<s;++n){var w=i[n].s;if(p[w]>t)v+=b-(1<<y-p[w]),p[w]=t;else break}for(v>>=g;v>0;){var j=i[n].s;p[j]<t?v-=1<<t-p[j]++-1:++n}for(;n>=0&&v;--n){var N=i[n].s;p[N]==t&&(--p[N],++v)}y=t}return{t:new zo(p),l:y}},vk=function(e,t,r){return e.s==-1?Math.max(vk(e.l,t,r+1),vk(e.r,t,r+1)):t[e.s]=r},b8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new yc(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},Am=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},x9=function(e,t,r){var n=r.length,s=TS(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},w8=function(e,t,r,n,s,i,o,l,c,u,f){Yd(t,f++,r),++s[256];for(var d=hj(s,15),m=d.t,p=d.l,y=hj(i,15),v=y.t,g=y.l,b=b8(m),w=b.c,j=b.n,N=b8(v),S=N.c,P=N.n,A=new yc(19),T=0;T<w.length;++T)++A[w[T]&31];for(var T=0;T<S.length;++T)++A[S[T]&31];for(var I=hj(A,7),B=I.t,C=I.l,E=19;E>4&&!B[mk[E-1]];--E);var M=u+5<<3,q=Am(s,u0)+Am(i,ag)+o,G=Am(s,m)+Am(i,v)+o+14+3*E+Am(A,B)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&M<=q&&M<=G)return x9(t,f,e.subarray(c,c+u));var Z,te,ae,Q;if(Yd(t,f,1+(G<q)),f+=2,G<q){Z=_d(m,p,0),te=m,ae=_d(v,g,0),Q=v;var ee=_d(B,C,0);Yd(t,f,j-257),Yd(t,f+5,P-1),Yd(t,f+10,E-4),f+=14;for(var T=0;T<E;++T)Yd(t,f+3*T,B[mk[T]]);f+=3*E;for(var W=[w,S],O=0;O<2;++O)for(var z=W[O],T=0;T<z.length;++T){var H=z[T]&31;Yd(t,f,ee[H]),f+=B[H],H>15&&(Yd(t,f,z[T]>>5&127),f+=z[T]>>12)}}else Z=Uge,te=u0,ae=$ge,Q=ag;for(var T=0;T<l;++T){var R=n[T];if(R>255){var H=R>>18&31;_m(t,f,Z[H+257]),f+=te[H+257],H>7&&(Yd(t,f,R>>23&31),f+=cb[H]);var K=R&31;_m(t,f,ae[K]),f+=Q[K],K>3&&(_m(t,f,R>>5&8191),f+=ub[K])}else _m(t,f,Z[R]),f+=te[R]}return _m(t,f,Z[256]),f+te[256]},Vge=new ES([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),g9=new zo(0),Gge=function(e,t,r,n,s,i){var o=i.z||e.length,l=new zo(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),u=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var d=Vge[t-1],m=d>>13,p=d&8191,y=(1<<r)-1,v=i.p||new yc(32768),g=i.h||new yc(y+1),b=Math.ceil(r/3),w=2*b,j=function(Ce){return(e[Ce]^e[Ce+1]<<b^e[Ce+2]<<w)&y},N=new ES(25e3),S=new yc(288),P=new yc(32),A=0,T=0,I=i.i||0,B=0,C=i.w||0,E=0;I+2<o;++I){var M=j(I),q=I&32767,G=g[M];if(v[q]=G,g[M]=q,C<=I){var Z=o-I;if((A>7e3||B>24576)&&(Z>423||!u)){f=w8(e,c,0,N,S,P,T,B,E,I-E,f),B=A=T=0,E=I;for(var te=0;te<286;++te)S[te]=0;for(var te=0;te<30;++te)P[te]=0}var ae=2,Q=0,ee=p,W=q-G&32767;if(Z>2&&M==j(I-W))for(var O=Math.min(m,Z)-1,z=Math.min(32767,I),H=Math.min(258,Z);W<=z&&--ee&&q!=G;){if(e[I+ae]==e[I+ae-W]){for(var R=0;R<H&&e[I+R]==e[I+R-W];++R);if(R>ae){if(ae=R,Q=W,R>O)break;for(var K=Math.min(W,R-2),le=0,te=0;te<K;++te){var he=I-W+te&32767,ie=v[he],ce=he-ie&32767;ce>le&&(le=ce,G=he)}}}q=G,G=v[q],W+=q-G&32767}if(Q){N[B++]=268435456|xk[ae]<<18|y8[Q];var De=xk[ae]&31,ne=y8[Q]&31;T+=cb[De]+ub[ne],++S[257+De],++P[ne],C=I+ae,++A}else N[B++]=e[I],++S[e[I]]}}for(I=Math.max(I,C);I<o;++I)N[B++]=e[I],++S[e[I]];f=w8(e,c,u,N,S,P,T,B,E,I-E,f),u||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=g,i.p=v,i.i=I,i.w=C)}else{for(var I=i.w||0;I<o+u;I+=65535){var Ue=I+65535;Ue>=o&&(c[f/8|0]=u,Ue=o),f=x9(c,f+1,e.subarray(I,Ue))}i.i=o}return m9(l,0,n+TS(f)+s)},v9=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Kge=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new zo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return Gge(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},y9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Xge=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=v9();s.p(t.dictionary),y9(e,2,s.d())}},Yge=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Du(6,"invalid zlib data"),(e[1]>>5&1)==1&&Du(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yk(e,t){t||(t={});var r=v9();r.p(e);var n=Kge(e,t,t.dictionary?6:2,4);return Xge(n,t),y9(n,n.length-4,r.d()),n}function Jge(e,t){return Wge(e.subarray(Yge(e),-4),{i:2},t,t)}var Qge=typeof TextDecoder<"u"&&new TextDecoder,Zge=0;try{Qge.decode(g9,{stream:!0}),Zge=1}catch{}var tn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function pj(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var qa={log:pj,warn:function(e){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):pj.call(null,arguments))},error:function(e){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):pj(e))}};function mj(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){D0(n.response,t,r)},n.onerror=function(){qa.error("could not download file")},n.send()}function N8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Av(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var nx,bk,D0=tn.saveAs||((typeof window>"u"?"undefined":Ca(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=tn.URL||tn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?N8(s.href)?mj(e,t,r):Av(s,s.target="_blank"):Av(s)):(s.href=n.createObjectURL(e),setTimeout((function(){n.revokeObjectURL(s.href)}),4e4),setTimeout((function(){Av(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(N8(e))mj(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout((function(){Av(n)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Ca(i)!=="object"&&(qa.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return mj(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(tn.HTMLElement)||tn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Ca(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},l.readAsDataURL(e)}else{var c=tn.URL||tn.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout((function(){c.revokeObjectURL(u)}),4e4)}});function b9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}function xj(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=Po(r,n,s,i,t[0],7,-680876936),i=Po(i,r,n,s,t[1],12,-389564586),s=Po(s,i,r,n,t[2],17,606105819),n=Po(n,s,i,r,t[3],22,-1044525330),r=Po(r,n,s,i,t[4],7,-176418897),i=Po(i,r,n,s,t[5],12,1200080426),s=Po(s,i,r,n,t[6],17,-1473231341),n=Po(n,s,i,r,t[7],22,-45705983),r=Po(r,n,s,i,t[8],7,1770035416),i=Po(i,r,n,s,t[9],12,-1958414417),s=Po(s,i,r,n,t[10],17,-42063),n=Po(n,s,i,r,t[11],22,-1990404162),r=Po(r,n,s,i,t[12],7,1804603682),i=Po(i,r,n,s,t[13],12,-40341101),s=Po(s,i,r,n,t[14],17,-1502002290),r=Io(r,n=Po(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Io(i,r,n,s,t[6],9,-1069501632),s=Io(s,i,r,n,t[11],14,643717713),n=Io(n,s,i,r,t[0],20,-373897302),r=Io(r,n,s,i,t[5],5,-701558691),i=Io(i,r,n,s,t[10],9,38016083),s=Io(s,i,r,n,t[15],14,-660478335),n=Io(n,s,i,r,t[4],20,-405537848),r=Io(r,n,s,i,t[9],5,568446438),i=Io(i,r,n,s,t[14],9,-1019803690),s=Io(s,i,r,n,t[3],14,-187363961),n=Io(n,s,i,r,t[8],20,1163531501),r=Io(r,n,s,i,t[13],5,-1444681467),i=Io(i,r,n,s,t[2],9,-51403784),s=Io(s,i,r,n,t[7],14,1735328473),r=Do(r,n=Io(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Do(i,r,n,s,t[8],11,-2022574463),s=Do(s,i,r,n,t[11],16,1839030562),n=Do(n,s,i,r,t[14],23,-35309556),r=Do(r,n,s,i,t[1],4,-1530992060),i=Do(i,r,n,s,t[4],11,1272893353),s=Do(s,i,r,n,t[7],16,-155497632),n=Do(n,s,i,r,t[10],23,-1094730640),r=Do(r,n,s,i,t[13],4,681279174),i=Do(i,r,n,s,t[0],11,-358537222),s=Do(s,i,r,n,t[3],16,-722521979),n=Do(n,s,i,r,t[6],23,76029189),r=Do(r,n,s,i,t[9],4,-640364487),i=Do(i,r,n,s,t[12],11,-421815835),s=Do(s,i,r,n,t[15],16,530742520),r=Lo(r,n=Do(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Lo(i,r,n,s,t[7],10,1126891415),s=Lo(s,i,r,n,t[14],15,-1416354905),n=Lo(n,s,i,r,t[5],21,-57434055),r=Lo(r,n,s,i,t[12],6,1700485571),i=Lo(i,r,n,s,t[3],10,-1894986606),s=Lo(s,i,r,n,t[10],15,-1051523),n=Lo(n,s,i,r,t[1],21,-2054922799),r=Lo(r,n,s,i,t[8],6,1873313359),i=Lo(i,r,n,s,t[15],10,-30611744),s=Lo(s,i,r,n,t[6],15,-1560198380),n=Lo(n,s,i,r,t[13],21,1309151649),r=Lo(r,n,s,i,t[4],6,-145523070),i=Lo(i,r,n,s,t[11],10,-1120210379),s=Lo(s,i,r,n,t[2],15,718787259),n=Lo(n,s,i,r,t[9],21,-343485551),e[0]=Qf(r,e[0]),e[1]=Qf(n,e[1]),e[2]=Qf(s,e[2]),e[3]=Qf(i,e[3])}function db(e,t,r,n,s,i){return t=Qf(Qf(t,e),Qf(n,i)),Qf(t<<s|t>>>32-s,r)}function Po(e,t,r,n,s,i,o){return db(t&r|~t&n,e,t,s,i,o)}function Io(e,t,r,n,s,i,o){return db(t&n|r&~n,e,t,s,i,o)}function Do(e,t,r,n,s,i,o){return db(t^r^n,e,t,s,i,o)}function Lo(e,t,r,n,s,i,o){return db(r^(t|~n),e,t,s,i,o)}function w9(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)xj(n,eve(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(xj(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,xj(n,s),n}function eve(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}nx=tn.atob.bind(tn),bk=tn.btoa.bind(tn);var j8="0123456789abcdef".split("");function tve(e){for(var t="",r=0;r<4;r++)t+=j8[e>>8*r+4&15]+j8[e>>8*r&15];return t}function rve(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function wk(e){return w9(e).map(rve).join("")}var nve=(function(e){for(var t=0;t<e.length;t++)e[t]=tve(e[t]);return e.join("")})(w9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qf(e,t){if(nve){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function Nk(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var f=l[c];u=(u+f+o.charCodeAt(c))%256,l[c]=l[u],l[u]=f}r=e,n=l}else l=n;var d=t.length,m=0,p=0,y="";for(c=0;c<d;c++)p=(p+(f=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=f,o=l[(l[m]+l[p])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}var k8={print:4,modify:8,copy:16,"annot-forms":32};function Yh(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(k8.perm!==void 0)throw new Error("Invalid permission: "+l);s+=k8[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=wk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Nk(this.encryptionKey,this.padding)}function Jh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function S8(e){if(Ca(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){tn.console&&qa.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function py(e){if(!(this instanceof py))return new py(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function N9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function F0(e,t,r,n,s){if(!(this instanceof F0))return new F0(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,N9.call(this,n,s)}function rp(e,t,r,n,s){if(!(this instanceof rp))return new rp(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,N9.call(this,n,s)}function en(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",f=null;Ca(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=S8;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(V){y=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var b=p.__private__.getPageFormat=function(V){return g[V]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},j=w.COMPAT;function N(){this.saveGraphicsState(),Y(new or(lt,0,0,-lt,0,no()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),u="n",j=w.ADVANCED}function S(){this.restoreGraphicsState(),u="S",j=w.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(V,we){if(V=="bold"&&we=="normal"||V=="bold"&&we==400||V=="normal"&&we=="italic"||V=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(V=we==400||we==="normal"?V==="italic"?"italic":"normal":we!=700&&we!=="bold"||V!=="normal"?(we==700?"bold":we)+""+V:"bold"),V};p.advancedAPI=function(V){var we=j===w.COMPAT;return we&&N.call(this),typeof V!="function"||(V(this),we&&S.call(this)),this},p.compatAPI=function(V){var we=j===w.ADVANCED;return we&&S.call(this),typeof V!="function"||(V(this),we&&N.call(this)),this},p.isAdvancedAPI=function(){return j===w.ADVANCED};var A,T=function(V){if(j!==w.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(V,we){var ze=t||we;if(isNaN(V)||isNaN(ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(ze).replace(/0+$/,"")};A=p.hpf=p.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,16)};var B=p.f2=p.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return I(V,2)},C=p.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return I(V,3)},E=p.scale=p.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return j===w.COMPAT?V*lt:j===w.ADVANCED?V:void 0},M=function(V){return j===w.COMPAT?no()-V:j===w.ADVANCED?V:void 0},q=function(V){return E(M(V))};p.__private__.setPrecision=p.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var G,Z="00000000000000000000000000000000",te=p.__private__.getFileId=function(){return Z},ae=p.__private__.setFileId=function(V){return Z=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Z.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),f!==null&&(gn=new Yh(f.userPermissions,f.userPassword,f.ownerPassword,Z)),Z};p.setFileId=function(V){return ae(V),this},p.getFileId=function(){return te()};var Q=p.__private__.convertDateToPDFDate=function(V){var we=V.getTimezoneOffset(),ze=we<0?"+":"-",Ze=Math.floor(Math.abs(we/60)),pt=Math.abs(we%60),Ot=[ze,H(Ze),"'",H(pt),"'"].join("");return["D:",V.getFullYear(),H(V.getMonth()+1),H(V.getDate()),H(V.getHours()),H(V.getMinutes()),H(V.getSeconds()),Ot].join("")},ee=p.__private__.convertPDFDateToDate=function(V){var we=parseInt(V.substr(2,4),10),ze=parseInt(V.substr(6,2),10)-1,Ze=parseInt(V.substr(8,2),10),pt=parseInt(V.substr(10,2),10),Ot=parseInt(V.substr(12,2),10),Kt=parseInt(V.substr(14,2),10);return new Date(we,ze,Ze,pt,Ot,Kt,0)},W=p.__private__.setCreationDate=function(V){var we;if(V===void 0&&(V=new Date),V instanceof Date)we=Q(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=V}return G=we},O=p.__private__.getCreationDate=function(V){var we=G;return V==="jsDate"&&(we=ee(G)),we};p.setCreationDate=function(V){return W(V),this},p.getCreationDate=function(V){return O(V)};var z,H=p.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},R=p.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},K=0,le=[],he=[],ie=0,ce=[],De=[],ne=!1,Ue=he,Ce=function(){K=0,ie=0,he=[],le=[],ce=[],be=Vt(),_e=Vt()};p.__private__.setCustomOutputDestination=function(V){ne=!0,Ue=V};var de=function(V){ne||(Ue=V)};p.__private__.resetCustomOutputDestination=function(){ne=!1,Ue=he};var Y=p.__private__.out=function(V){return V=V.toString(),ie+=V.length+1,Ue.push(V),Ue},ve=p.__private__.write=function(V){return Y(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},ye=p.__private__.getArrayBuffer=function(V){for(var we=V.length,ze=new ArrayBuffer(we),Ze=new Uint8Array(ze);we--;)Ze[we]=V.charCodeAt(we);return ze},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ae};var pe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(V){return pe=j===w.ADVANCED?V/lt:V,this};var ue,Pe=p.__private__.getFontSize=p.getFontSize=function(){return j===w.COMPAT?pe:pe*lt},Ne=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(V){return Ne=V,this},p.__private__.getR2L=p.getR2L=function(){return Ne};var Re,nt=p.__private__.setZoomMode=function(V){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))ue=V;else if(isNaN(V)){if(we.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');ue=V}else ue=parseInt(V,10)};p.__private__.getZoomMode=function(){return ue};var xt,kt=p.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Re=V};p.__private__.getPageMode=function(){return Re};var Me=p.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');xt=V};p.__private__.getLayoutMode=function(){return xt},p.__private__.setDisplayMode=p.setDisplayMode=function(V,we,ze){return nt(V),Me(we),kt(ze),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(V){if(Object.keys(vt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[V]},p.__private__.getDocumentProperties=function(){return vt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(V){for(var we in vt)vt.hasOwnProperty(we)&&V[we]&&(vt[we]=V[we]);return this},p.__private__.setDocumentProperty=function(V,we){if(Object.keys(vt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[V]=we};var ut,lt,pr,rr,ft,$t={},tr={},$e=[],bt={},jr={},Yt={},Fr={},Cr=null,lr=0,Ut=[],wr=new S8(p),Er=e.hotfixes||[],Yr={},sn={},Wn=[],or=function V(we,ze,Ze,pt,Ot,Kt){if(!(this instanceof V))return new V(we,ze,Ze,pt,Ot,Kt);isNaN(we)&&(we=1),isNaN(ze)&&(ze=0),isNaN(Ze)&&(Ze=0),isNaN(pt)&&(pt=1),isNaN(Ot)&&(Ot=0),isNaN(Kt)&&(Kt=0),this._matrix=[we,ze,Ze,pt,Ot,Kt]};Object.defineProperty(or.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(or.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(or.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(or.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(or.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(or.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(or.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(or.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(or.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(or.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(or.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(or.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(or.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(or.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(or.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(or.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),or.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(V)},or.prototype.multiply=function(V){var we=V.sx*this.sx+V.shy*this.shx,ze=V.sx*this.shy+V.shy*this.sy,Ze=V.shx*this.sx+V.sy*this.shx,pt=V.shx*this.shy+V.sy*this.sy,Ot=V.tx*this.sx+V.ty*this.shx+this.tx,Kt=V.tx*this.shy+V.ty*this.sy+this.ty;return new or(we,ze,Ze,pt,Ot,Kt)},or.prototype.decompose=function(){var V=this.sx,we=this.shy,ze=this.shx,Ze=this.sy,pt=this.tx,Ot=this.ty,Kt=Math.sqrt(V*V+we*we),br=(V/=Kt)*ze+(we/=Kt)*Ze;ze-=V*br,Ze-=we*br;var Rr=Math.sqrt(ze*ze+Ze*Ze);return br/=Rr,V*(Ze/=Rr)<we*(ze/=Rr)&&(V=-V,we=-we,br=-br,Kt=-Kt),{scale:new or(Kt,0,0,Rr,0,0),translate:new or(1,0,0,1,pt,Ot),rotate:new or(V,we,-we,V,0,0),skew:new or(1,0,br,1,0,0)}},or.prototype.toString=function(V){return this.join(" ")},or.prototype.inversed=function(){var V=this.sx,we=this.shy,ze=this.shx,Ze=this.sy,pt=this.tx,Ot=this.ty,Kt=1/(V*Ze-we*ze),br=Ze*Kt,Rr=-we*Kt,Kr=-ze*Kt,Zr=V*Kt;return new or(br,Rr,Kr,Zr,-br*pt-Kr*Ot,-Rr*pt-Zr*Ot)},or.prototype.applyToPoint=function(V){var we=V.x*this.sx+V.y*this.shx+this.tx,ze=V.x*this.shy+V.y*this.sy+this.ty;return new Yo(we,ze)},or.prototype.applyToRectangle=function(V){var we=this.applyToPoint(V),ze=this.applyToPoint(new Yo(V.x+V.w,V.y+V.h));return new Jo(we.x,we.y,ze.x-we.x,ze.y-we.y)},or.prototype.clone=function(){var V=this.sx,we=this.shy,ze=this.shx,Ze=this.sy,pt=this.tx,Ot=this.ty;return new or(V,we,ze,Ze,pt,Ot)},p.Matrix=or;var Vn=p.matrixMult=function(V,we){return we.multiply(V)},fn=new or(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=fn;var Ke=function(V,we){if(!jr[V]){var ze=(we instanceof F0?"Sh":"P")+(Object.keys(bt).length+1).toString(10);we.id=ze,jr[V]=ze,bt[ze]=we,wr.publish("addPattern",we)}};p.ShadingPattern=F0,p.TilingPattern=rp,p.addShadingPattern=function(V,we){return T("addShadingPattern()"),Ke(V,we),this},p.beginTilingPattern=function(V){T("beginTilingPattern()"),Xa(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},p.endTilingPattern=function(V,we){T("endTilingPattern()"),we.stream=De[z].join(`
`),Ke(V,we),wr.publish("endTilingPattern",we),Wn.pop().restore()};var Nt=p.__private__.newObject=function(){var V=Vt();return re(V,!0),V},Vt=p.__private__.newObjectDeferred=function(){return K++,le[K]=function(){return ie},K},re=function(V,we){return we=typeof we=="boolean"&&we,le[V]=ie,we&&Y(V+" 0 obj"),V},me=p.__private__.newAdditionalObject=function(){var V={objId:Vt(),content:""};return ce.push(V),V},be=Vt(),_e=Vt(),Ee=p.__private__.decodeColorString=function(V){var we=V.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var ze=parseFloat(we[0]);we=[ze,ze,ze,"r"]}for(var Ze="#",pt=0;pt<3;pt++)Ze+=("0"+Math.floor(255*parseFloat(we[pt])).toString(16)).slice(-2);return Ze},Oe=p.__private__.encodeColorString=function(V){var we;typeof V=="string"&&(V={ch1:V});var ze=V.ch1,Ze=V.ch2,pt=V.ch3,Ot=V.ch4,Kt=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ze=="string"&&ze.charAt(0)!=="#"){var br=new b9(ze);if(br.ok)ze=br.toHex();else if(!/^\d*\.?\d*$/.test(ze))throw new Error('Invalid color "'+ze+'" passed to jsPDF.encodeColorString.')}if(typeof ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ze)&&(ze="#"+ze[1]+ze[1]+ze[2]+ze[2]+ze[3]+ze[3]),typeof ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ze)){var Rr=parseInt(ze.substr(1),16);ze=Rr>>16&255,Ze=Rr>>8&255,pt=255&Rr}if(Ze===void 0||Ot===void 0&&ze===Ze&&Ze===pt)typeof ze=="string"?we=ze+" "+Kt[0]:V.precision===2?we=B(ze/255)+" "+Kt[0]:we=C(ze/255)+" "+Kt[0];else if(Ot===void 0||Ca(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return we=["1.","1.","1.",Kt[1]].join(" ");if(typeof ze=="string")we=[ze,Ze,pt,Kt[1]].join(" ");else switch(V.precision){case 2:we=[B(ze/255),B(Ze/255),B(pt/255),Kt[1]].join(" ");break;default:case 3:we=[C(ze/255),C(Ze/255),C(pt/255),Kt[1]].join(" ")}}else typeof ze=="string"?we=[ze,Ze,pt,Ot,Kt[2]].join(" "):V.precision===2?we=[B(ze),B(Ze),B(pt),B(Ot),Kt[2]].join(" "):we=[C(ze),C(Ze),C(pt),C(Ot),Kt[2]].join(" ");return we},Xe=p.__private__.getFilters=function(){return o},ct=p.__private__.putStream=function(V){var we=(V=V||{}).data||"",ze=V.filters||Xe(),Ze=V.alreadyAppliedFilters||[],pt=V.addLength1||!1,Ot=we.length,Kt=V.objectId,br=function(Vs){return Vs};if(f!==null&&Kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(br=gn.encryptor(Kt,0));var Rr={};ze===!0&&(ze=["FlateEncode"]);var Kr=V.additionalKeyValues||[],Zr=(Rr=en.API.processDataByFilters!==void 0?en.API.processDataByFilters(we,ze):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(Ze)?Ze.join(" "):Ze.toString());if(Rr.data.length!==0&&(Kr.push({key:"Length",value:Rr.data.length}),pt===!0&&Kr.push({key:"Length1",value:Ot})),Zr.length!=0)if(Zr.split("/").length-1==1)Kr.push({key:"Filter",value:Zr});else{Kr.push({key:"Filter",value:"["+Zr+"]"});for(var hn=0;hn<Kr.length;hn+=1)if(Kr[hn].key==="DecodeParms"){for(var Oa=[],za=0;za<Rr.reverseChain.split("/").length-1;za+=1)Oa.push("null");Oa.push(Kr[hn].value),Kr[hn].value="["+Oa.join(" ")+"]"}}Y("<<");for(var Ya=0;Ya<Kr.length;Ya++)Y("/"+Kr[Ya].key+" "+Kr[Ya].value);Y(">>"),Rr.data.length!==0&&(Y("stream"),Y(br(Rr.data)),Y("endstream"))},Ve=p.__private__.putPage=function(V){var we=V.number,ze=V.data,Ze=V.objId,pt=V.contentsObjId;re(Ze,!0),Y("<</Type /Page"),Y("/Parent "+V.rootDictionaryObjId+" 0 R"),Y("/Resources "+V.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(A(V.mediaBox.bottomLeftX))+" "+parseFloat(A(V.mediaBox.bottomLeftY))+" "+A(V.mediaBox.topRightX)+" "+A(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Y("/CropBox ["+A(V.cropBox.bottomLeftX)+" "+A(V.cropBox.bottomLeftY)+" "+A(V.cropBox.topRightX)+" "+A(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Y("/BleedBox ["+A(V.bleedBox.bottomLeftX)+" "+A(V.bleedBox.bottomLeftY)+" "+A(V.bleedBox.topRightX)+" "+A(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Y("/TrimBox ["+A(V.trimBox.bottomLeftX)+" "+A(V.trimBox.bottomLeftY)+" "+A(V.trimBox.topRightX)+" "+A(V.trimBox.topRightY)+"]"),V.artBox!==null&&Y("/ArtBox ["+A(V.artBox.bottomLeftX)+" "+A(V.artBox.bottomLeftY)+" "+A(V.artBox.topRightX)+" "+A(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Y("/UserUnit "+V.userUnit),wr.publish("putPage",{objId:Ze,pageContext:Ut[we],pageNumber:we,page:ze}),Y("/Contents "+pt+" 0 R"),Y(">>"),Y("endobj");var Ot=ze.join(`
`);return j===w.ADVANCED&&(Ot+=`
Q`),re(pt,!0),ct({data:Ot,filters:Xe(),objectId:pt}),Y("endobj"),Ze},Je=p.__private__.putPages=function(){var V,we,ze=[];for(V=1;V<=lr;V++)Ut[V].objId=Vt(),Ut[V].contentsObjId=Vt();for(V=1;V<=lr;V++)ze.push(Ve({number:V,data:De[V],objId:Ut[V].objId,contentsObjId:Ut[V].contentsObjId,mediaBox:Ut[V].mediaBox,cropBox:Ut[V].cropBox,bleedBox:Ut[V].bleedBox,trimBox:Ut[V].trimBox,artBox:Ut[V].artBox,userUnit:Ut[V].userUnit,rootDictionaryObjId:be,resourceDictionaryObjId:_e}));re(be,!0),Y("<</Type /Pages");var Ze="/Kids [";for(we=0;we<lr;we++)Ze+=ze[we]+" 0 R ";Y(Ze+"]"),Y("/Count "+lr),Y(">>"),Y("endobj"),wr.publish("postPutPages")},He=function(V){wr.publish("putFont",{font:V,out:Y,newObject:Nt,putStream:ct}),V.isAlreadyPutted!==!0&&(V.objectNumber=Nt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Jh(V.postScriptName)),Y("/Subtype /Type1"),typeof V.encoding=="string"&&Y("/Encoding /"+V.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Le=function(){for(var V in $t)$t.hasOwnProperty(V)&&(d===!1||d===!0&&m.hasOwnProperty(V))&&He($t[V])},tt=function(V){V.objectNumber=Nt();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[A(V.x),A(V.y),A(V.x+V.width),A(V.y+V.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var ze=V.pages[1].join(`
`);ct({data:ze,additionalKeyValues:we,objectId:V.objectNumber}),Y("endobj")},ht=function(){for(var V in Yr)Yr.hasOwnProperty(V)&&tt(Yr[V])},Pt=function(V,we){var ze,Ze=[],pt=1/(we-1);for(ze=0;ze<1;ze+=pt)Ze.push(ze);if(Ze.push(1),V[0].offset!=0){var Ot={offset:0,color:V[0].color};V.unshift(Ot)}if(V[V.length-1].offset!=1){var Kt={offset:1,color:V[V.length-1].color};V.push(Kt)}for(var br="",Rr=0,Kr=0;Kr<Ze.length;Kr++){for(ze=Ze[Kr];ze>V[Rr+1].offset;)Rr++;var Zr=V[Rr].offset,hn=(ze-Zr)/(V[Rr+1].offset-Zr),Oa=V[Rr].color,za=V[Rr+1].color;br+=R(Math.round((1-hn)*Oa[0]+hn*za[0]).toString(16))+R(Math.round((1-hn)*Oa[1]+hn*za[1]).toString(16))+R(Math.round((1-hn)*Oa[2]+hn*za[2]).toString(16))}return br.trim()},Mt=function(V,we){we||(we=21);var ze=Nt(),Ze=Pt(V.colors,we),pt=[];pt.push({key:"FunctionType",value:"0"}),pt.push({key:"Domain",value:"[0.0 1.0]"}),pt.push({key:"Size",value:"["+we+"]"}),pt.push({key:"BitsPerSample",value:"8"}),pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct({data:Ze,additionalKeyValues:pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ze}),Y("endobj"),V.objectNumber=Nt(),Y("<< /ShadingType "+V.type),Y("/ColorSpace /DeviceRGB");var Ot="/Coords ["+A(parseFloat(V.coords[0]))+" "+A(parseFloat(V.coords[1]))+" ";V.type===2?Ot+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3])):Ot+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3]))+" "+A(parseFloat(V.coords[4]))+" "+A(parseFloat(V.coords[5])),Y(Ot+="]"),V.matrix&&Y("/Matrix ["+V.matrix.toString()+"]"),Y("/Function "+ze+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},vr=function(V,we){var ze=Vt(),Ze=Nt();we.push({resourcesOid:ze,objectOid:Ze}),V.objectNumber=Ze;var pt=[];pt.push({key:"Type",value:"/Pattern"}),pt.push({key:"PatternType",value:"1"}),pt.push({key:"PaintType",value:"1"}),pt.push({key:"TilingType",value:"1"}),pt.push({key:"BBox",value:"["+V.boundingBox.map(A).join(" ")+"]"}),pt.push({key:"XStep",value:A(V.xStep)}),pt.push({key:"YStep",value:A(V.yStep)}),pt.push({key:"Resources",value:ze+" 0 R"}),V.matrix&&pt.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),ct({data:V.stream,additionalKeyValues:pt,objectId:V.objectNumber}),Y("endobj")},zr=function(V){var we;for(we in bt)bt.hasOwnProperty(we)&&(bt[we]instanceof F0?Mt(bt[we]):bt[we]instanceof rp&&vr(bt[we],V))},on=function(V){for(var we in V.objectNumber=Nt(),Y("<<"),V)switch(we){case"opacity":Y("/ca "+B(V[we]));break;case"stroke-opacity":Y("/CA "+B(V[we]))}Y(">>"),Y("endobj")},Mn=function(){var V;for(V in Yt)Yt.hasOwnProperty(V)&&on(Yt[V])},ps=function(){for(var V in Y("/XObject <<"),Yr)Yr.hasOwnProperty(V)&&Yr[V].objectNumber>=0&&Y("/"+V+" "+Yr[V].objectNumber+" 0 R");wr.publish("putXobjectDict"),Y(">>")},xn=function(){gn.oid=Nt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+gn.v),Y("/R "+gn.r),Y("/U <"+gn.toHexString(gn.U)+">"),Y("/O <"+gn.toHexString(gn.O)+">"),Y("/P "+gn.P),Y(">>"),Y("endobj")},wa=function(){for(var V in Y("/Font <<"),$t)$t.hasOwnProperty(V)&&(d===!1||d===!0&&m.hasOwnProperty(V))&&Y("/"+V+" "+$t[V].objectNumber+" 0 R");Y(">>")},Pn=function(){if(Object.keys(bt).length>0){for(var V in Y("/Shading <<"),bt)bt.hasOwnProperty(V)&&bt[V]instanceof F0&&bt[V].objectNumber>=0&&Y("/"+V+" "+bt[V].objectNumber+" 0 R");wr.publish("putShadingPatternDict"),Y(">>")}},pa=function(V){if(Object.keys(bt).length>0){for(var we in Y("/Pattern <<"),bt)bt.hasOwnProperty(we)&&bt[we]instanceof p.TilingPattern&&bt[we].objectNumber>=0&&bt[we].objectNumber<V&&Y("/"+we+" "+bt[we].objectNumber+" 0 R");wr.publish("putTilingPatternDict"),Y(">>")}},sa=function(){if(Object.keys(Yt).length>0){var V;for(V in Y("/ExtGState <<"),Yt)Yt.hasOwnProperty(V)&&Yt[V].objectNumber>=0&&Y("/"+V+" "+Yt[V].objectNumber+" 0 R");wr.publish("putGStateDict"),Y(">>")}},ma=function(V){re(V.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wa(),Pn(),pa(V.objectOid),sa(),ps(),Y(">>"),Y("endobj")},Ws=function(){var V=[];Le(),Mn(),ht(),zr(V),wr.publish("putResources"),V.forEach(ma),ma({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),wr.publish("postPutResources")},Ta=function(){wr.publish("putAdditionalObjects");for(var V=0;V<ce.length;V++){var we=ce[V];re(we.objId,!0),Y(we.content),Y("endobj")}wr.publish("postPutAdditionalObjects")},qe=function(V){tr[V.fontName]=tr[V.fontName]||{},tr[V.fontName][V.fontStyle]=V.id},It=function(V,we,ze,Ze,pt){var Ot={id:"F"+(Object.keys($t).length+1).toString(10),postScriptName:V,fontName:we,fontStyle:ze,encoding:Ze,isStandardFont:pt||!1,metadata:{}};return wr.publish("addFont",{font:Ot,instance:this}),$t[Ot.id]=Ot,qe(Ot),Ot.id},Ct=function(V){for(var we=0,ze=Ae.length;we<ze;we++){var Ze=It.call(this,V[we][0],V[we][1],V[we][2],Ae[we][3],!0);d===!1&&(m[Ze]=!0);var pt=V[we][0].split("-");qe({id:Ze,fontName:pt[0],fontStyle:pt[1]||""})}wr.publish("addFonts",{fonts:$t,dictionary:tr})},sr=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Ze){var we=Ze.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var ze="Error in function "+we.split(`
`)[0].split("<")[0]+": "+Ze.message;if(!tn.console)throw new Error(ze);tn.console.error(ze,Ze),tn.alert&&alert(ze)}},V.foo.bar=V,V.foo},Nr=function(V,we){var ze,Ze,pt,Ot,Kt,br,Rr,Kr,Zr;if(pt=(we=we||{}).sourceEncoding||"Unicode",Kt=we.outputEncoding,(we.autoencode||Kt)&&$t[ut].metadata&&$t[ut].metadata[pt]&&$t[ut].metadata[pt].encoding&&(Ot=$t[ut].metadata[pt].encoding,!Kt&&$t[ut].encoding&&(Kt=$t[ut].encoding),!Kt&&Ot.codePages&&(Kt=Ot.codePages[0]),typeof Kt=="string"&&(Kt=Ot[Kt]),Kt)){for(Rr=!1,br=[],ze=0,Ze=V.length;ze<Ze;ze++)(Kr=Kt[V.charCodeAt(ze)])?br.push(String.fromCharCode(Kr)):br.push(V[ze]),br[ze].charCodeAt(0)>>8&&(Rr=!0);V=br.join("")}for(ze=V.length;Rr===void 0&&ze!==0;)V.charCodeAt(ze-1)>>8&&(Rr=!0),ze--;if(!Rr)return V;for(br=we.noBOM?[]:[254,255],ze=0,Ze=V.length;ze<Ze;ze++){if((Zr=(Kr=V.charCodeAt(ze))>>8)>>8)throw new Error("Character at position "+ze+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");br.push(Zr),br.push(Kr-(Zr<<8))}return String.fromCharCode.apply(void 0,br)},mr=p.__private__.pdfEscape=p.pdfEscape=function(V,we){return Nr(V,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_r=p.__private__.beginPage=function(V){De[++lr]=[],Ut[lr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},nr(lr),de(De[z])},kn=function(V,we){var ze,Ze,pt;switch(r=we||r,typeof V=="string"&&(ze=b(V.toLowerCase()),Array.isArray(ze)&&(Ze=ze[0],pt=ze[1])),Array.isArray(V)&&(Ze=V[0]*lt,pt=V[1]*lt),isNaN(Ze)&&(Ze=s[0],pt=s[1]),(Ze>14400||pt>14400)&&(qa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ze=Math.min(14400,Ze),pt=Math.min(14400,pt)),s=[Ze,pt],r.substr(0,1)){case"l":pt>Ze&&(s=[pt,Ze]);break;case"p":Ze>pt&&(s=[pt,Ze])}_r(s),Yl(Ld),Y(gs),Tl!==0&&Y(Tl+" J"),Xo!==0&&Y(Xo+" j"),wr.publish("addPage",{pageNumber:lr})},In=function(V){V>0&&V<=lr&&(De.splice(V,1),Ut.splice(V,1),lr--,z>lr&&(z=lr),this.setPage(z))},nr=function(V){V>0&&V<=lr&&(z=V)},xr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return De.length-1},Dt=function(V,we,ze){var Ze,pt=void 0;return ze=ze||{},V=V!==void 0?V:$t[ut].fontName,we=we!==void 0?we:$t[ut].fontStyle,Ze=V.toLowerCase(),tr[Ze]!==void 0&&tr[Ze][we]!==void 0?pt=tr[Ze][we]:tr[V]!==void 0&&tr[V][we]!==void 0?pt=tr[V][we]:ze.disableWarning===!1&&qa.warn("Unable to look up font label for font '"+V+"', '"+we+"'. Refer to getFontList() for available fonts."),pt||ze.noFallback||(pt=tr.times[we])==null&&(pt=tr.times.normal),pt},Ar=p.__private__.putInfo=function(){var V=Nt(),we=function(Ze){return Ze};for(var ze in f!==null&&(we=gn.encryptor(V,0)),Y("<<"),Y("/Producer ("+mr(we("jsPDF "+en.version))+")"),vt)vt.hasOwnProperty(ze)&&vt[ze]&&Y("/"+ze.substr(0,1).toUpperCase()+ze.substr(1)+" ("+mr(we(vt[ze]))+")");Y("/CreationDate ("+mr(we(G))+")"),Y(">>"),Y("endobj")},Ht=p.__private__.putCatalog=function(V){var we=(V=V||{}).rootDictionaryObjId||be;switch(Nt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+we+" 0 R"),ue||(ue="fullwidth"),ue){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ze=""+ue;ze.substr(ze.length-1)==="%"&&(ue=parseInt(ue)/100),typeof ue=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+B(ue)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Re&&Y("/PageMode /"+Re),wr.publish("putCatalog"),Y(">>"),Y("endobj")},Gn=p.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(K+1)),Y("/Root "+K+" 0 R"),Y("/Info "+(K-1)+" 0 R"),f!==null&&Y("/Encrypt "+gn.oid+" 0 R"),Y("/ID [ <"+Z+"> <"+Z+"> ]"),Y(">>")},Rn=p.__private__.putHeader=function(){Y("%PDF-"+y),Y("%")},cn=p.__private__.putXRef=function(){var V="0000000000";Y("xref"),Y("0 "+(K+1)),Y("0000000000 65535 f ");for(var we=1;we<=K;we++)typeof le[we]=="function"?Y((V+le[we]()).slice(-10)+" 00000 n "):le[we]!==void 0?Y((V+le[we]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},er=p.__private__.buildDocument=function(){Ce(),de(he),wr.publish("buildDocument"),Rn(),Je(),Ta(),Ws(),f!==null&&xn(),Ar(),Ht();var V=ie;return cn(),Gn(),Y("startxref"),Y(""+V),Y("%%EOF"),de(De[z]),he.join(`
`)},Sn=p.__private__.getBlob=function(V){return new Blob([ye(V)],{type:"application/pdf"})},Na=p.output=p.__private__.output=sr((function(V,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",V){case void 0:return er();case"save":p.save(we.filename);break;case"arraybuffer":return ye(er());case"blob":return Sn(er());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Sn(er()))||void 0;qa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ze="",Ze=er();try{ze=bk(Ze)}catch{ze=bk(unescape(encodeURIComponent(Ze)))}return"data:application/pdf;filename="+we.filename+";base64,"+ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(pt=we.pdfObjectUrl,Ot="");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",br=tn.open();return br!==null&&br.document.write(Kt),br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',Kr=tn.open();if(Kr!==null){Kr.document.write(Rr);var Zr=this;Kr.document.documentElement.querySelector("#pdfViewer").onload=function(){Kr.document.title=we.filename,Kr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zr.output("bloburl"))}}return Kr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',Oa=tn.open();if(Oa!==null&&(Oa.document.write(hn),Oa.document.title=we.filename),Oa||typeof safari>"u")return Oa;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",we);default:return null}})),un=function(V){return Array.isArray(Er)===!0&&Er.indexOf(V)>-1};switch(n){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=un("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);lt=n}var gn=null;W(),ae();var $r=function(V){return f!==null?gn.encryptor(V,0):function(we){return we}},Gr=p.__private__.getPageInfo=p.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ut[V].objId,pageNumber:V,pageContext:Ut[V]}},Wt=p.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Ut)if(Ut[we].objId===V)break;return Gr(we)},En=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ut[z].objId,pageNumber:z,pageContext:Ut[z]}};p.addPage=function(){return kn.apply(this,arguments),this},p.setPage=function(){return nr.apply(this,arguments),de.call(this,De[z]),this},p.insertPage=function(V){return this.addPage(),this.movePage(z,V),this},p.movePage=function(V,we){var ze,Ze;if(V>we){ze=De[V],Ze=Ut[V];for(var pt=V;pt>we;pt--)De[pt]=De[pt-1],Ut[pt]=Ut[pt-1];De[we]=ze,Ut[we]=Ze,this.setPage(we)}else if(V<we){ze=De[V],Ze=Ut[V];for(var Ot=V;Ot<we;Ot++)De[Ot]=De[Ot+1],Ut[Ot]=Ut[Ot+1];De[we]=ze,Ut[we]=Ze,this.setPage(we)}return this},p.deletePage=function(){return In.apply(this,arguments),this},p.__private__.text=p.text=function(V,we,ze,Ze,pt){var Ot,Kt,br,Rr,Kr,Zr,hn,Oa,za,Ya=(Ze=Ze||{}).scope||this;if(typeof V=="number"&&typeof we=="number"&&(typeof ze=="string"||Array.isArray(ze))){var Vs=ze;ze=we,we=V,V=Vs}if(arguments[3]instanceof or?(T("The transform parameter of text() with a Matrix value"),za=pt):(br=arguments[4],Rr=arguments[5],Ca(hn=arguments[3])==="object"&&hn!==null||(typeof br=="string"&&(Rr=br,br=null),typeof hn=="string"&&(Rr=hn,hn=null),typeof hn=="number"&&(br=hn,hn=null),Ze={flags:hn,angle:br,align:Rr})),isNaN(we)||isNaN(ze)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Ya;var ys="",Qo=!1,li=typeof Ze.lineHeightFactor=="number"?Ze.lineHeightFactor:Sc,bs=Ya.internal.scaleFactor;function ao(Xn){return Xn=Xn.split("	").join(Array(Ze.TabLen||9).join(" ")),mr(Xn,hn)}function Ja(Xn){for(var Qn,xa=Xn.concat(),Za=[],al=xa.length;al--;)typeof(Qn=xa.shift())=="string"?Za.push(Qn):Array.isArray(Xn)&&(Qn.length===1||Qn[1]===void 0&&Qn[2]===void 0)?Za.push(Qn[0]):Za.push([Qn[0],Qn[1],Qn[2]]);return Za}function Tc(Xn,Qn){var xa;if(typeof Xn=="string")xa=Qn(Xn)[0];else if(Array.isArray(Xn)){for(var Za,al,Xu=Xn.concat(),Pc=[],Rd=Xu.length;Rd--;)typeof(Za=Xu.shift())=="string"?Pc.push(Qn(Za)[0]):Array.isArray(Za)&&typeof Za[0]=="string"&&(al=Qn(Za[0],Za[1],Za[2]),Pc.push([al[0],al[1],al[2]]));xa=Pc}return xa}var wn=!1,ds=!0;if(typeof V=="string")wn=!0;else if(Array.isArray(V)){var Pa=V.concat();Kt=[];for(var ws,pn=Pa.length;pn--;)(typeof(ws=Pa.shift())!="string"||Array.isArray(ws)&&typeof ws[0]!="string")&&(ds=!1);wn=ds}if(wn===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Ls=pe/Ya.internal.scaleFactor,Ia=Ls*(li-1);switch(Ze.baseline){case"bottom":ze-=Ia;break;case"top":ze+=Ls-Ia;break;case"hanging":ze+=Ls-2*Ia;break;case"middle":ze+=Ls/2-Ia}if((Zr=Ze.maxWidth||0)>0&&(typeof V=="string"?V=Ya.splitTextToSize(V,Zr):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce((function(Xn,Qn){return Xn.concat(Ya.splitTextToSize(Qn,Zr))}),[]))),Ot={text:V,x:we,y:ze,options:Ze,mutex:{pdfEscape:mr,activeFontKey:ut,fonts:$t,activeFontSize:pe}},wr.publish("preProcessText",Ot),V=Ot.text,br=(Ze=Ot.options).angle,!(za instanceof or)&&br&&typeof br=="number"){br*=Math.PI/180,Ze.rotationDirection===0&&(br=-br),j===w.ADVANCED&&(br=-br);var Ui=Math.cos(br),Ns=Math.sin(br);za=new or(Ui,Ns,-Ns,Ui,0,0)}else br&&br instanceof or&&(za=br);j!==w.ADVANCED||za||(za=fn),(Kr=Ze.charSpace||Cc)!==void 0&&(ys+=A(E(Kr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oa=Ze.horizontalScale)!==void 0&&(ys+=A(100*Oa)+` Tz
`),Ze.lang;var fa=-1,js=Ze.renderingMode!==void 0?Ze.renderingMode:Ze.stroke,qi=Ya.internal.getCurrentPageInfo().pageContext;switch(js){case 0:case!1:case"fill":fa=0;break;case 1:case!0:case"stroke":fa=1;break;case 2:case"fillThenStroke":fa=2;break;case 3:case"invisible":fa=3;break;case 4:case"fillAndAddForClipping":fa=4;break;case 5:case"strokeAndAddPathForClipping":fa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fa=6;break;case 7:case"addToPathForClipping":fa=7}var Pl=qi.usedRenderingMode!==void 0?qi.usedRenderingMode:-1;fa!==-1?ys+=fa+` Tr
`:Pl!==-1&&(ys+=`0 Tr
`),fa!==-1&&(qi.usedRenderingMode=fa),Rr=Ze.align||"left";var ci,Jl=pe*li,Fd=Ya.internal.pageSize.getWidth(),Oc=$t[ut];Kr=Ze.charSpace||Cc,Zr=Ze.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},Ze.flags);var Il=[],Ql=function(Xn){return Ya.getStringUnitWidth(Xn,{font:Oc,charSpace:Kr,fontSize:pe,doKerning:!1})*pe/bs};if(Object.prototype.toString.call(V)==="[object Array]"){var ui;Kt=Ja(V),Rr!=="left"&&(ci=Kt.map(Ql));var Fs,Zo=0;if(Rr==="right"){we-=ci[0],V=[],pn=Kt.length;for(var el=0;el<pn;el++)el===0?(Fs=ki(we),ui=ro(ze)):(Fs=E(Zo-ci[el]),ui=-Jl),V.push([Kt[el],Fs,ui]),Zo=ci[el]}else if(Rr==="center"){we-=ci[0]/2,V=[],pn=Kt.length;for(var bo=0;bo<pn;bo++)bo===0?(Fs=ki(we),ui=ro(ze)):(Fs=E((Zo-ci[bo])/2),ui=-Jl),V.push([Kt[bo],Fs,ui]),Zo=ci[bo]}else if(Rr==="left"){V=[],pn=Kt.length;for(var tl=0;tl<pn;tl++)V.push(Kt[tl])}else if(Rr==="justify"&&Oc.encoding==="Identity-H"){V=[],pn=Kt.length,Zr=Zr!==0?Zr:Fd;for(var di=0,_n=0;_n<pn;_n++)if(ui=_n===0?ro(ze):-Jl,Fs=_n===0?ki(we):di,_n<pn-1){var $i=E((Zr-ci[_n])/(Kt[_n].split(" ").length-1)),Qa=Kt[_n].split(" ");V.push([Qa[0]+" ",Fs,ui]),di=0;for(var Ms=1;Ms<Qa.length;Ms++){var rl=(Ql(Qa[Ms-1]+" "+Qa[Ms])-Ql(Qa[Ms]))*bs+$i;Ms==Qa.length-1?V.push([Qa[Ms],rl,0]):V.push([Qa[Ms]+" ",rl,0]),di-=rl}}else V.push([Kt[_n],Fs,ui]);V.push(["",di,0])}else{if(Rr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],pn=Kt.length,Zr=Zr!==0?Zr:Fd,_n=0;_n<pn;_n++)ui=_n===0?ro(ze):-Jl,Fs=_n===0?ki(we):0,_n<pn-1?Il.push(A(E((Zr-ci[_n])/(Kt[_n].split(" ").length-1)))):Il.push(0),V.push([Kt[_n],Fs,ui])}}var Md=typeof Ze.R2L=="boolean"?Ze.R2L:Ne;Md===!0&&(V=Tc(V,(function(Xn,Qn,xa){return[Xn.split("").reverse().join(""),Qn,xa]}))),Ot={text:V,x:we,y:ze,options:Ze,mutex:{pdfEscape:mr,activeFontKey:ut,fonts:$t,activeFontSize:pe}},wr.publish("postProcessText",Ot),V=Ot.text,Qo=Ot.mutex.isHex||!1;var Dl=$t[ut].encoding;Dl!=="WinAnsiEncoding"&&Dl!=="StandardEncoding"||(V=Tc(V,(function(Xn,Qn,xa){return[ao(Xn),Qn,xa]}))),Kt=Ja(V),V=[];for(var so,Zl,zi,Da=0,Si=1,nl=Array.isArray(Kt[0])?Si:Da,ec="",io=function(Xn,Qn,xa){var Za="";return xa instanceof or?(xa=typeof Ze.angle=="number"?Vn(xa,new or(1,0,0,1,Xn,Qn)):Vn(new or(1,0,0,1,Xn,Qn),xa),j===w.ADVANCED&&(xa=Vn(new or(1,0,0,-1,0,0),xa)),Za=xa.join(" ")+` Tm
`):Za=A(Xn)+" "+A(Qn)+` Td
`,Za},ks=0;ks<Kt.length;ks++){switch(ec="",nl){case Si:zi=(Qo?"<":"(")+Kt[ks][0]+(Qo?">":")"),so=parseFloat(Kt[ks][1]),Zl=parseFloat(Kt[ks][2]);break;case Da:zi=(Qo?"<":"(")+Kt[ks]+(Qo?">":")"),so=ki(we),Zl=ro(ze)}Il!==void 0&&Il[ks]!==void 0&&(ec=Il[ks]+` Tw
`),ks===0?V.push(ec+io(so,Zl,za)+zi):nl===Da?V.push(ec+zi):nl===Si&&V.push(ec+io(so,Zl,za)+zi)}V=nl===Da?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var fi=`BT
/`;return fi+=ut+" "+pe+` Tf
`,fi+=A(pe*li)+` TL
`,fi+=vs+`
`,fi+=ys,fi+=V,Y(fi+="ET"),m[ut]=!0,Ya};var Kn=p.__private__.clip=p.clip=function(V){return Y(V==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Kn("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Y("n"),this};var ms=p.__private__.isValidStyle=function(V){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(we=!0),we};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(V){return ms(V)&&(u=V),this};var Be=p.__private__.getStyle=p.getStyle=function(V){var we=u;switch(V){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=V}return we},gr=p.close=function(){return Y("h"),this};p.stroke=function(){return Y("S"),this},p.fill=function(V){return Tr("f",V),this},p.fillEvenOdd=function(V){return Tr("f*",V),this},p.fillStroke=function(V){return Tr("B",V),this},p.fillStrokeEvenOdd=function(V){return Tr("B*",V),this};var Tr=function(V,we){Ca(we)==="object"?$n(we,V):Y(V)},kr=function(V){V===null||j===w.ADVANCED&&V===void 0||(V=Be(V),Y(V))};function Jr(V,we,ze,Ze,pt){var Ot=new rp(we||this.boundingBox,ze||this.xStep,Ze||this.yStep,this.gState,pt||this.matrix);Ot.stream=this.stream;var Kt=V+"$$"+this.cloneIndex+++"$$";return Ke(Kt,Ot),Ot}var $n=function(V,we){var ze=jr[V.key],Ze=bt[ze];if(Ze instanceof F0)Y("q"),Y(xs(we)),Ze.gState&&p.setGState(Ze.gState),Y(V.matrix.toString()+" cm"),Y("/"+ze+" sh"),Y("Q");else if(Ze instanceof rp){var pt=new or(1,0,0,-1,0,no());V.matrix&&(pt=pt.multiply(V.matrix||fn),ze=Jr.call(Ze,V.key,V.boundingBox,V.xStep,V.yStep,pt).id),Y("q"),Y("/Pattern cs"),Y("/"+ze+" scn"),Ze.gState&&p.setGState(Ze.gState),Y(we),Y("Q")}},xs=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},us=p.moveTo=function(V,we){return Y(A(E(V))+" "+A(q(we))+" m"),this},Ds=p.lineTo=function(V,we){return Y(A(E(V))+" "+A(q(we))+" l"),this},oi=p.curveTo=function(V,we,ze,Ze,pt,Ot){return Y([A(E(V)),A(q(we)),A(E(ze)),A(q(Ze)),A(E(pt)),A(q(Ot)),"c"].join(" ")),this};p.__private__.line=p.line=function(V,we,ze,Ze,pt){if(isNaN(V)||isNaN(we)||isNaN(ze)||isNaN(Ze)||!ms(pt))throw new Error("Invalid arguments passed to jsPDF.line");return j===w.COMPAT?this.lines([[ze-V,Ze-we]],V,we,[1,1],pt||"S"):this.lines([[ze-V,Ze-we]],V,we,[1,1]).stroke()},p.__private__.lines=p.lines=function(V,we,ze,Ze,pt,Ot){var Kt,br,Rr,Kr,Zr,hn,Oa,za,Ya,Vs,ys,Qo;if(typeof V=="number"&&(Qo=ze,ze=we,we=V,V=Qo),Ze=Ze||[1,1],Ot=Ot||!1,isNaN(we)||isNaN(ze)||!Array.isArray(V)||!Array.isArray(Ze)||!ms(pt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(us(we,ze),Kt=Ze[0],br=Ze[1],Kr=V.length,Vs=we,ys=ze,Rr=0;Rr<Kr;Rr++)(Zr=V[Rr]).length===2?(Vs=Zr[0]*Kt+Vs,ys=Zr[1]*br+ys,Ds(Vs,ys)):(hn=Zr[0]*Kt+Vs,Oa=Zr[1]*br+ys,za=Zr[2]*Kt+Vs,Ya=Zr[3]*br+ys,Vs=Zr[4]*Kt+Vs,ys=Zr[5]*br+ys,oi(hn,Oa,za,Ya,Vs,ys));return Ot&&gr(),kr(pt),this},p.path=function(V){for(var we=0;we<V.length;we++){var ze=V[we],Ze=ze.c;switch(ze.op){case"m":us(Ze[0],Ze[1]);break;case"l":Ds(Ze[0],Ze[1]);break;case"c":oi.apply(this,Ze);break;case"h":gr()}}return this},p.__private__.rect=p.rect=function(V,we,ze,Ze,pt){if(isNaN(V)||isNaN(we)||isNaN(ze)||isNaN(Ze)||!ms(pt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===w.COMPAT&&(Ze=-Ze),Y([A(E(V)),A(q(we)),A(E(ze)),A(E(Ze)),"re"].join(" ")),kr(pt),this},p.__private__.triangle=p.triangle=function(V,we,ze,Ze,pt,Ot,Kt){if(isNaN(V)||isNaN(we)||isNaN(ze)||isNaN(Ze)||isNaN(pt)||isNaN(Ot)||!ms(Kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ze-V,Ze-we],[pt-ze,Ot-Ze],[V-pt,we-Ot]],V,we,[1,1],Kt,!0),this},p.__private__.roundedRect=p.roundedRect=function(V,we,ze,Ze,pt,Ot,Kt){if(isNaN(V)||isNaN(we)||isNaN(ze)||isNaN(Ze)||isNaN(pt)||isNaN(Ot)||!ms(Kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var br=4/3*(Math.SQRT2-1);return pt=Math.min(pt,.5*ze),Ot=Math.min(Ot,.5*Ze),this.lines([[ze-2*pt,0],[pt*br,0,pt,Ot-Ot*br,pt,Ot],[0,Ze-2*Ot],[0,Ot*br,-pt*br,Ot,-pt,Ot],[2*pt-ze,0],[-pt*br,0,-pt,-Ot*br,-pt,-Ot],[0,2*Ot-Ze],[0,-Ot*br,pt*br,-Ot,pt,-Ot]],V+pt,we,[1,1],Kt,!0),this},p.__private__.ellipse=p.ellipse=function(V,we,ze,Ze,pt){if(isNaN(V)||isNaN(we)||isNaN(ze)||isNaN(Ze)||!ms(pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*ze,Kt=4/3*(Math.SQRT2-1)*Ze;return us(V+ze,we),oi(V+ze,we-Kt,V+Ot,we-Ze,V,we-Ze),oi(V-Ot,we-Ze,V-ze,we-Kt,V-ze,we),oi(V-ze,we+Kt,V-Ot,we+Ze,V,we+Ze),oi(V+Ot,we+Ze,V+ze,we+Kt,V+ze,we),kr(pt),this},p.__private__.circle=p.circle=function(V,we,ze,Ze){if(isNaN(V)||isNaN(we)||isNaN(ze)||!ms(Ze))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,we,ze,ze,Ze)},p.setFont=function(V,we,ze){return ze&&(we=P(we,ze)),ut=Dt(V,we,{disableWarning:!1}),this};var kc=p.__private__.getFont=p.getFont=function(){return $t[Dt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var V,we,ze={};for(V in tr)if(tr.hasOwnProperty(V))for(we in ze[V]=[],tr[V])tr[V].hasOwnProperty(we)&&ze[V].push(we);return ze},p.addFont=function(V,we,ze,Ze,pt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?pt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(ze=P(ze,Ze)),pt=pt||"Identity-H",It.call(this,V,we,ze,pt)};var Sc,Ld=e.lineWidth||.200025,Cl=p.__private__.getLineWidth=p.getLineWidth=function(){return Ld},Yl=p.__private__.setLineWidth=p.setLineWidth=function(V){return Ld=V,Y(A(E(V))+" w"),this};p.__private__.setLineDash=en.API.setLineDash=en.API.setLineDashPattern=function(V,we){if(V=V||[],we=we||0,isNaN(we)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map((function(ze){return A(E(ze))})).join(" "),we=A(E(we)),Y("["+V+"] "+we+" d"),this};var _c=p.__private__.getLineHeight=p.getLineHeight=function(){return pe*Sc};p.__private__.getLineHeight=p.getLineHeight=function(){return pe*Sc};var hu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Sc=V),this},Go=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Sc};hu(e.lineHeight);var ki=p.__private__.getHorizontalCoordinate=function(V){return E(V)},ro=p.__private__.getVerticalCoordinate=function(V){return j===w.ADVANCED?V:Ut[z].mediaBox.topRightY-Ut[z].mediaBox.bottomLeftY-E(V)},Ac=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(V){return A(ki(V))},vo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(V){return A(ro(V))},gs=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ee(gs)},p.__private__.setStrokeColor=p.setDrawColor=function(V,we,ze,Ze){return gs=Oe({ch1:V,ch2:we,ch3:ze,ch4:Ze,pdfColorType:"draw",precision:2}),Y(gs),this};var El=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ee(El)},p.__private__.setFillColor=p.setFillColor=function(V,we,ze,Ze){return El=Oe({ch1:V,ch2:we,ch3:ze,ch4:Ze,pdfColorType:"fill",precision:2}),Y(El),this};var vs=e.textColor||"0 g",Ko=p.__private__.getTextColor=p.getTextColor=function(){return Ee(vs)};p.__private__.setTextColor=p.setTextColor=function(V,we,ze,Ze){return vs=Oe({ch1:V,ch2:we,ch3:ze,ch4:Ze,pdfColorType:"text",precision:3}),this};var Cc=e.charSpace,yo=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Cc||0)};p.__private__.setCharSpace=p.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cc=V,this};var Tl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(V){var we=p.CapJoinStyles[V];if(we===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=we,Y(we+" J"),this};var Xo=0;p.__private__.setLineJoin=p.setLineJoin=function(V){var we=p.CapJoinStyles[V];if(we===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xo=we,Y(we+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(A(E(V))+" M"),this},p.GState=py,p.setGState=function(V){(V=typeof V=="string"?Yt[Fr[V]]:pu(null,V)).equals(Cr)||(Y("/"+V.id+" gs"),Cr=V)};var pu=function(V,we){if(!V||!Fr[V]){var ze=!1;for(var Ze in Yt)if(Yt.hasOwnProperty(Ze)&&Yt[Ze].equals(we)){ze=!0;break}if(ze)we=Yt[Ze];else{var pt="GS"+(Object.keys(Yt).length+1).toString(10);Yt[pt]=we,we.id=pt}return V&&(Fr[V]=we.id),wr.publish("addGState",we),we}};p.addGState=function(V,we){return pu(V,we),this},p.saveGraphicsState=function(){return Y("q"),$e.push({key:ut,size:pe,color:vs}),this},p.restoreGraphicsState=function(){Y("Q");var V=$e.pop();return ut=V.key,pe=V.size,vs=V.color,Cr=null,this},p.setCurrentTransformationMatrix=function(V){return Y(V.toString()+" cm"),this},p.comment=function(V){return Y("#"+V),this};var Yo=function(V,we){var ze=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ze},set:function(Ot){isNaN(Ot)||(ze=parseFloat(Ot))}});var Ze=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ze},set:function(Ot){isNaN(Ot)||(Ze=parseFloat(Ot))}});var pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pt},set:function(Ot){pt=Ot.toString()}}),this},Jo=function(V,we,ze,Ze){Yo.call(this,V,we),this.type="rect";var pt=ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pt},set:function(Kt){isNaN(Kt)||(pt=parseFloat(Kt))}});var Ot=Ze||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(Kt){isNaN(Kt)||(Ot=parseFloat(Kt))}}),this},Ec=function(){this.page=lr,this.currentPage=z,this.pages=De.slice(0),this.pagesContext=Ut.slice(0),this.x=pr,this.y=rr,this.matrix=ft,this.width=Ol(z),this.height=no(z),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Ec.prototype.restore=function(){lr=this.page,z=this.currentPage,Ut=this.pagesContext,De=this.pages,pr=this.x,rr=this.y,ft=this.matrix,xu(z,this.width),kf(z,this.height),Ue=this.outputDestination};var Xa=function(V,we,ze,Ze,pt){Wn.push(new Ec),lr=z=0,De=[],pr=V,rr=we,ft=pt,_r([ze,Ze])},w0=function(V){if(sn[V])Wn.pop().restore();else{var we=new Ec,ze="Xo"+(Object.keys(Yr).length+1).toString(10);we.id=ze,sn[V]=ze,Yr[ze]=we,wr.publish("addFormObject",we),Wn.pop().restore()}};for(var mu in p.beginFormObject=function(V,we,ze,Ze,pt){return Xa(V,we,ze,Ze,pt),this},p.endFormObject=function(V){return w0(V),this},p.doFormObject=function(V,we){var ze=Yr[sn[V]];return Y("q"),Y(we.toString()+" cm"),Y("/"+ze.id+" Do"),Y("Q"),this},p.getFormObject=function(V){var we=Yr[sn[V]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},p.save=function(V,we){return V=V||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(D0(Sn(er()),V),typeof D0.unload=="function"&&tn.setTimeout&&setTimeout(D0.unload,911),this):new Promise((function(ze,Ze){try{var pt=D0(Sn(er()),V);typeof D0.unload=="function"&&tn.setTimeout&&setTimeout(D0.unload,911),ze(pt)}catch(Ot){Ze(Ot.message)}}))},en.API)en.API.hasOwnProperty(mu)&&(mu==="events"&&en.API.events.length?(function(V,we){var ze,Ze,pt;for(pt=we.length-1;pt!==-1;pt--)ze=we[pt][0],Ze=we[pt][1],V.subscribe.apply(V,[ze].concat(typeof Ze=="function"?[Ze]:Ze))})(wr,en.API.events):p[mu]=en.API[mu]);var Ol=p.getPageWidth=function(V){return(Ut[V=V||z].mediaBox.topRightX-Ut[V].mediaBox.bottomLeftX)/lt},xu=p.setPageWidth=function(V,we){Ut[V].mediaBox.topRightX=we*lt+Ut[V].mediaBox.bottomLeftX},no=p.getPageHeight=function(V){return(Ut[V=V||z].mediaBox.topRightY-Ut[V].mediaBox.bottomLeftY)/lt},kf=p.setPageHeight=function(V,we){Ut[V].mediaBox.topRightY=we*lt+Ut[V].mediaBox.bottomLeftY};return p.internal={pdfEscape:mr,getStyle:Be,getFont:kc,getFontSize:Pe,getCharSpace:yo,getTextColor:Ko,getLineHeight:_c,getLineHeightFactor:Go,getLineWidth:Cl,write:ve,getHorizontalCoordinate:ki,getVerticalCoordinate:ro,getCoordinateString:Ac,getVerticalCoordinateString:vo,collections:{},newObject:Nt,newAdditionalObject:me,newObjectDeferred:Vt,newObjectDeferredBegin:re,getFilters:Xe,putStream:ct,events:wr,scaleFactor:lt,pageSize:{getWidth:function(){return Ol(z)},setWidth:function(V){xu(z,V)},getHeight:function(){return no(z)},setHeight:function(V){kf(z,V)}},encryptionOptions:f,encryption:gn,getEncryptor:$r,output:Na,getNumberOfPages:xr,pages:De,out:Y,f2:B,f3:C,getPageInfo:Gr,getPageInfoByObjId:Wt,getCurrentPageInfo:En,getPDFVersion:v,Point:Yo,Rectangle:Jo,Matrix:or,hasHotfix:un},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ol(z)},set:function(V){xu(z,V)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return no(z)},set:function(V){kf(z,V)},enumerable:!0,configurable:!0}),Ct.call(p,Ae),ut="F1",kn(s,r),wr.publish("initialized"),p}Yh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Yh.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Yh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Yh.prototype.processOwnerPassword=function(e,t){return Nk(wk(t).substr(0,5),e)},Yh.prototype.encryptor=function(e,t){var r=wk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Nk(r,n)}},py.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ca(e)!==Ca(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},en.API={events:[]},en.version="2.5.2";var Us=en.API,OS=1,kh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(e){return e.toFixed(2)},$f=function(e){return e.toFixed(5)};Us.__acroform__={};var Xl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_8=function(e){return e*OS},dd=function(e){var t=new k9,r=Lr.internal.getHeight(e)||0,n=Lr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mn(n)),Number(mn(r))],t},ave=Us.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},sve=Us.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},ive=Us.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ei=Us.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ive(e,t-1)},ti=Us.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ave(e,t-1)},ri=Us.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sve(e,t-1)},ove=Us.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(mn(c.lowerLeft_X)),Number(mn(c.lowerLeft_Y)),Number(mn(c.upperRight_X)),Number(mn(c.upperRight_Y))]},lve=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=jk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+mn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=dd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},jk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(C){return C.split(`
`)})):s.map((function(C){return[C]}));var i=r,o=Lr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Lr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(C,E,M){if(C+1<s.length){var q=E+" "+s[C+1][0];return Cv(q,e,M).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,d=Cv("3",e,i).height,m=e.multiline?o-i:(o-d)/2,p=m+=2,y=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Cv(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var b="",w=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var N=!1;if(s[j].length!==1&&g!==s[j].length-1){if((d+2)*(w+2)+2>o)continue e;b+=s[j][g],N=!0,v=j,j--}else{b=(b+=s[j][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var S=parseInt(j),P=c(S,b,i),A=j>=s.length-1;if(P&&!A){b+=" ",g=0;continue}if(P||A){if(A)v=S;else if(e.multiline&&(d+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(d+2)*(w+2)+2>o)continue e;v=S}}for(var T="",I=y;I<=v;I++){var B=s[I];if(e.multiline){if(I===v){T+=B[g]+" ",g=(g+1)%B.length;continue}if(I===y){T+=B[B.length-1]+" ";continue}}T+=B[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,f=Cv(T,e,i).width,e.textAlign){case"right":u=l-f-2;break;case"center":u=(l-f)/2;break;default:u=2}t+=mn(u)+" "+mn(p)+` Td
`,t+="("+kh(T)+`) Tj
`,t+=-mn(u)+` 0 Td
`,p=-(i+2),f=0,y=N?v:v+1,w++,b=""}break}return n.text=t,n.fontSize=i,n},Cv=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},cve={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uve=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(n){return n.type===r.type&&n.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},dve=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Ca(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},fve=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Gu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(cve)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");OS=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new S9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&uve(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=ove(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Lr.createDefaultAppearanceStream(l),Ca(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=lve(l);c.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var d="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(d+="/"+m+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(s,l)),d+="/"+o+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,l)),d+="/"+o+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&dve(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},j9=Us.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Ca(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+kh(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gj=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+kh(n(e))+")"},vd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vd.prototype.toString=function(){return this.objId+" 0 R"},vd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},vd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:j9(s,this.objId,this.scope)}):s instanceof vd?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var k9=function(){vd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Xl(k9,vd);var S9=function(){vd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+kh(r(e))+")"}},set:function(r){e=r}})};Xl(S9,vd);var Gu=function e(){vd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ei(t,3)},set:function(b){b?this.F=ti(t,3):this.F=ri(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof my)return;i="FieldObject"+e.FieldNum++}var b=function(w){return w};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+kh(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/OS:u},set:function(b){u=b}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(b){f=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof my||this instanceof eh))return gj(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Qi?m:gj(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Qi?b:b.substr(0,1)==="("?Gh(b.substr(1,b.length-2)):Gh(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi?Gh(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Qi?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Qi?p:gj(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof Qi?b:b.substr(0,1)==="("?Gh(b.substr(1,b.length-2)):Gh(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi?Gh(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Qi?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,1)},set:function(b){b?this.Ff=ti(this.Ff,1):this.Ff=ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,2)},set:function(b){b?this.Ff=ti(this.Ff,2):this.Ff=ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,3)},set:function(b){b?this.Ff=ti(this.Ff,3):this.Ff=ri(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Xl(Gu,vd);var dp=function(){Gu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return j9(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u})(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,18)},set:function(r){r?this.Ff=ti(this.Ff,18):this.Ff=ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ti(this.Ff,19):this.Ff=ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,20)},set:function(r){r?(this.Ff=ti(this.Ff,20),t.sort()):this.Ff=ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,22)},set:function(r){r?this.Ff=ti(this.Ff,22):this.Ff=ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(r){r?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,27)},set:function(r){r?this.Ff=ti(this.Ff,27):this.Ff=ri(this.Ff,27)}}),this.hasAppearanceStream=!1};Xl(dp,Gu);var fp=function(){dp.call(this),this.fontName="helvetica",this.combo=!1};Xl(fp,dp);var hp=function(){fp.call(this),this.combo=!0};Xl(hp,fp);var Uv=function(){hp.call(this),this.edit=!0};Xl(Uv,hp);var Qi=function(){Gu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,15)},set:function(r){r?this.Ff=ti(this.Ff,15):this.Ff=ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,16)},set:function(r){r?this.Ff=ti(this.Ff,16):this.Ff=ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,17)},set:function(r){r?this.Ff=ti(this.Ff,17):this.Ff=ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(r){r?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+kh(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ca(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Xl(Qi,Gu);var qv=function(){Qi.call(this),this.pushButton=!0};Xl(qv,Qi);var pp=function(){Qi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Xl(pp,Qi);var my=function(){var e,t;Gu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+kh(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Ca(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xl(my,Gu),pp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},pp.prototype.createOption=function(e){var t=new my;return t.Parent=this,t.optionName=e,this.Kids.push(t),hve.call(this.scope,t),t};var $v=function(){Qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lr.CheckBox.createAppearanceStream()};Xl($v,Qi);var eh=function(){Gu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,13)},set:function(t){t?this.Ff=ti(this.Ff,13):this.Ff=ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,21)},set:function(t){t?this.Ff=ti(this.Ff,21):this.Ff=ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(t){t?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,24)},set:function(t){t?this.Ff=ti(this.Ff,24):this.Ff=ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,25)},set:function(t){t?this.Ff=ti(this.Ff,25):this.Ff=ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(t){t?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xl(eh,Gu);var zv=function(){eh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,14)},set:function(e){e?this.Ff=ti(this.Ff,14):this.Ff=ri(this.Ff,14)}}),this.password=!0};Xl(zv,eh);var Lr={CheckBox:{createAppearanceStream:function(){return{N:{On:Lr.CheckBox.YesNormal},D:{On:Lr.CheckBox.YesPushDown,Off:Lr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=jk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=dd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Lr.internal.getHeight(e),o=Lr.internal.getWidth(e),l=jk(e,e.caption);return s.push("1 g"),s.push("0 0 "+mn(o)+" "+mn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+mn(o-1)+" "+mn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+mn(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Lr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Lr.RadioButton.Circle.YesNormal,t.D[e]=Lr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=dd(e);t.scope=e.scope;var r=[],n=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Lr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+$f(Lr.internal.getWidth(e)/2)+" "+$f(Lr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=[],n=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Lr.internal.Bezier_C).toFixed(5)),o=Number((n*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$f(Lr.internal.getWidth(e)/2)+" "+$f(Lr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+$f(Lr.internal.getWidth(e)/2)+" "+$f(Lr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=[],n=Lr.internal.getWidth(e)<=Lr.internal.getHeight(e)?Lr.internal.getWidth(e)/4:Lr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$f(Lr.internal.getWidth(e)/2)+" "+$f(Lr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Lr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Lr.RadioButton.Cross.YesNormal,t.D[e]=Lr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=dd(e);t.scope=e.scope;var r=[],n=Lr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+mn(Lr.internal.getWidth(e)-2)+" "+mn(Lr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(n.x1.x)+" "+mn(n.x1.y)+" m"),r.push(mn(n.x2.x)+" "+mn(n.x2.y)+" l"),r.push(mn(n.x4.x)+" "+mn(n.x4.y)+" m"),r.push(mn(n.x3.x)+" "+mn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=Lr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mn(Lr.internal.getWidth(e)-2)+" "+mn(Lr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),n.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),n.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),n.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=dd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(e))+" "+mn(Lr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Lr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Lr.internal.getWidth(e),r=Lr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Lr.internal.getWidth=function(e){var t=0;return Ca(e)==="object"&&(t=_8(e.Rect[2])),t},Lr.internal.getHeight=function(e){var t=0;return Ca(e)==="object"&&(t=_8(e.Rect[3])),t};var hve=Us.addField=function(e){if(fve(this,e),!(e instanceof Gu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Us.AcroFormChoiceField=dp,Us.AcroFormListBox=fp,Us.AcroFormComboBox=hp,Us.AcroFormEditBox=Uv,Us.AcroFormButton=Qi,Us.AcroFormPushButton=qv,Us.AcroFormRadioButton=pp,Us.AcroFormCheckBox=$v,Us.AcroFormTextField=eh,Us.AcroFormPasswordField=zv,Us.AcroFormAppearance=Lr,Us.AcroForm={ChoiceField:dp,ListBox:fp,ComboBox:hp,EditBox:Uv,Button:Qi,PushButton:qv,RadioButton:pp,CheckBox:$v,TextField:eh,PasswordField:zv,Appearance:Lr},en.AcroForm={ChoiceField:dp,ListBox:fp,ComboBox:hp,EditBox:Uv,Button:Qi,PushButton:qv,RadioButton:pp,CheckBox:$v,TextField:eh,PasswordField:zv,Appearance:Lr};en.AcroForm;function _9(e){return e.reduce((function(t,r,n){return t[r]=n,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(C,E){var M,q,G,Z,te,ae=t;if((E=E||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(P(C))for(te in r)for(G=r[te],M=0;M<G.length;M+=1){for(Z=!0,q=0;q<G[M].length;q+=1)if(G[M][q]!==void 0&&G[M][q]!==C[q]){Z=!1;break}if(Z===!0){ae=te;break}}else for(te in r)for(G=r[te],M=0;M<G.length;M+=1){for(Z=!0,q=0;q<G[M].length;q+=1)if(G[M][q]!==void 0&&G[M][q]!==C.charCodeAt(q)){Z=!1;break}if(Z===!0){ae=te;break}}return ae===t&&E!==t&&(ae=E),ae},s=function C(E){for(var M=this.internal.write,q=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:E.width}),Z.push({key:"Height",value:E.height}),E.colorSpace===g.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===g.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var te="",ae=0,Q=E.transparency.length;ae<Q;ae++)te+=E.transparency[ae]+" "+E.transparency[ae]+" ";Z.push({key:"Mask",value:"["+te+"]"})}E.sMask!==void 0&&Z.push({key:"SMask",value:E.objectId+1+" 0 R"});var ee=E.filter!==void 0?["/"+E.filter]:void 0;if(q({data:E.data,additionalKeyValues:Z,alreadyAppliedFilters:ee,objectId:E.objectId}),M("endobj"),"sMask"in E&&E.sMask!==void 0){var W="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,O={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:W,data:E.sMask};"filter"in E&&(O.filter=E.filter),C.call(this,O)}if(E.colorSpace===g.INDEXED){var z=this.internal.newObject();q({data:T(new Uint8Array(E.palette)),objectId:z}),M("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var E in C)s.call(this,C[E])},o=function(){var C,E=this.internal.collections.addImage_images,M=this.internal.write;for(var q in E)M("/I"+(C=E[q]).index,C.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var C=this.internal.collections.addImage_images;return l.call(this),C},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(C){return typeof e["process"+C.toUpperCase()]=="function"},d=function(C){return Ca(C)==="object"&&C.nodeType===1},m=function(C,E){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var M=""+C.getAttribute("src");if(M.indexOf("data:image/")===0)return nx(unescape(M).split("base64,").pop());var q=e.loadFile(M,!0);if(q!==void 0)return q}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var G;switch(E){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return nx(C.toDataURL(G,1).split("base64,").pop())}},p=function(C){var E=this.internal.collections.addImage_images;if(E){for(var M in E)if(C===E[M].alias)return E[M]}},y=function(C,E,M){return C||E||(C=-96,E=-96),C<0&&(C=-1*M.width*72/C/this.internal.scaleFactor),E<0&&(E=-1*M.height*72/E/this.internal.scaleFactor),C===0&&(C=E*M.width/M.height),E===0&&(E=C*M.height/M.width),[C,E]},v=function(C,E,M,q,G,Z){var te=y.call(this,M,q,G),ae=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,ee=c.call(this);if(M=te[0],q=te[1],ee[G.index]=G,Z){Z*=Math.PI/180;var W=Math.cos(Z),O=Math.sin(Z),z=function(R){return R.toFixed(4)},H=[z(W),z(O),z(-1*O),z(W),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,ae(C),Q(E+q),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([ae(M),"0","0",ae(q),"0","0","cm"].join(" "))):this.internal.write([ae(M),"0","0",ae(q),ae(C),Q(E+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(C){var E,M,q=0;if(typeof C=="string")for(M=C.length,E=0;E<M;E++)q=(q<<5)-q+C.charCodeAt(E),q|=0;else if(P(C))for(M=C.byteLength/2,E=0;E<M;E++)q=(q<<5)-q+C[E],q|=0;return q},j=e.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var E=!0;return C.length===0&&(E=!1),C.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(E=!1),E},N=e.__addimage__.extractImageFromDataUrl=function(C){var E=(C=C||"").split("base64,"),M=null;if(E.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(q)&&(M={mimeType:q[1],charset:q[2],data:E[1]})}return M},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(C){return S()&&C instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(C){return S()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},A=e.__addimage__.binaryStringToUint8Array=function(C){for(var E=C.length,M=new Uint8Array(E),q=0;q<E;q++)M[q]=C.charCodeAt(q);return M},T=e.__addimage__.arrayBufferToBinaryString=function(C){for(var E="",M=P(C)?C:new Uint8Array(C),q=0;q<M.length;q+=8192)E+=String.fromCharCode.apply(null,M.subarray(q,q+8192));return E};e.addImage=function(){var C,E,M,q,G,Z,te,ae,Q;if(typeof arguments[1]=="number"?(E=t,M=arguments[1],q=arguments[2],G=arguments[3],Z=arguments[4],te=arguments[5],ae=arguments[6],Q=arguments[7]):(E=arguments[1],M=arguments[2],q=arguments[3],G=arguments[4],Z=arguments[5],te=arguments[6],ae=arguments[7],Q=arguments[8]),Ca(C=arguments[0])==="object"&&!d(C)&&"imageData"in C){var ee=C;C=ee.imageData,E=ee.format||E||t,M=ee.x||M||0,q=ee.y||q||0,G=ee.w||ee.width||G,Z=ee.h||ee.height||Z,te=ee.alias||te,ae=ee.compression||ae,Q=ee.rotation||ee.angle||Q}var W=this.internal.getFilters();if(ae===void 0&&W.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(M)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=I.call(this,C,E,te,ae);return v.call(this,M,q,G,Z,O,Q),this};var I=function(C,E,M,q){var G,Z,te;if(typeof C=="string"&&n(C)===t){C=unescape(C);var ae=B(C,!1);(ae!==""||(ae=e.loadFile(C,!0))!==void 0)&&(C=ae)}if(d(C)&&(C=m(C,E)),E=n(C,E),!f(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((te=M)==null||te.length===0)&&(M=(function(Q){return typeof Q=="string"||P(Q)?w(Q):P(Q.data)?w(Q.data):null})(C)),(G=p.call(this,M))||(S()&&(C instanceof Uint8Array||E==="RGBA"||(Z=C,C=A(C))),G=this["process"+E.toUpperCase()](C,u.call(this),M,(function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in e.image_compression?Q:b.NONE})(q),Z)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},B=e.__addimage__.convertBase64ToBinaryString=function(C,E){var M;E=typeof E!="boolean"||E;var q,G="";if(typeof C=="string"){q=(M=N(C))!==null?M.data:C;try{G=nx(q)}catch(Z){if(E)throw j(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(C){var E,M,q="";if(d(C)&&(C=m(C)),typeof C=="string"&&n(C)===t&&((q=B(C,!1))===""&&(q=e.loadFile(C)||""),C=q),M=n(C),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!S()||C instanceof Uint8Array||(C=A(C)),!(E=this["process"+M.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=M,E}})(en.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};en.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,d=0;d<u.length&&!f;d++)switch((n=u[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(b(n.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(b(w))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+j,n.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var P=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+s),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(u*f)}else l=c,o=u;return this.text(r,n,s,i),s+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(en.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},d=e.__arabicParser__.resolveLigatures=function(v){var g=0,b=r,w="",j=0;for(g=0;g<v.length;g+=1)b[v.charCodeAt(g)]!==void 0?(j++,typeof(b=b[v.charCodeAt(g)])=="number"&&(w+=String.fromCharCode(b),b=r,j=0),g===v.length-1&&(b=r,w+=v.charAt(g-(j-1)),g-=j-1,j=0)):(b=r,w+=v.charAt(g-j),g-=j,j=0);return w};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(v,g,b){return o(v)?i(v)===!1?-1:!u(v)||!o(g)&&!o(b)||!o(b)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:f(v)&&o(g)&&!l(g)&&o(b)&&u(b)?3:l(v)||!o(b)?1:2:-1},p=function(v){var g=0,b=0,w=0,j="",N="",S="",P=(v=v||"").split("\\s+"),A=[];for(g=0;g<P.length;g+=1){for(A.push(""),b=0;b<P[g].length;b+=1)j=P[g][b],N=P[g][b-1],S=P[g][b+1],o(j)?(w=m(j,N,S),A[g]+=w!==-1?String.fromCharCode(t[j.charCodeAt(0)][w]):j):A[g]+=j;A[g]=d(A[g])}return A.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var w=0;for(b=[],w=0;w<g.length;w+=1)Array.isArray(g[w])?b.push([p(g[w][0]),g[w][1],g[w][2]]):b.push([p(g[w])]);v=b}else v=p(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",y])})(en.API),en.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(en.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,N){return j.concat(g.splitTextToSize(N,b))}),[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(v=this.getStringUnitWidth(c[w],{font:d})*f)&&(p=v);return p!==0&&(y=c.length),{w:p/=m,h:Math.max((y*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,f,d,m){if(n.call(this),!f)throw new Error("No data for PDF table.");var p,y,v,g,b=[],w=[],j=[],N={},S={},P=[],A=[],T=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,B=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,C=m.margins||Object.assign({width:this.getPageWidth()},t),E=typeof m.padding=="number"?m.padding:3,M=m.headerBackgroundColor||"#c8c8c8",q=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=q,this.setFontSize(B),d==null)w=b=Object.keys(f[0]),j=b.map((function(){return"left"}));else if(Array.isArray(d)&&Ca(d[0])==="object")for(b=d.map((function(ee){return ee.name})),w=d.map((function(ee){return ee.prompt||ee.name||""})),j=d.map((function(ee){return ee.align||"left"})),p=0;p<d.length;p+=1)S[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(w=b=d,j=b.map((function(){return"left"})));if(T||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(N[g=b[p]]=f.map((function(ee){return ee[g]})),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=N[g],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)P.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,P)+E+E,P=[]}if(I){var G={};for(p=0;p<b.length;p+=1)G[b[p]]={},G[b[p]].text=w[p],G[b[p]].align=j[p];var Z=l.call(this,G,S);A=b.map((function(ee){return new i(c,u,S[ee],Z,G[ee].text,void 0,G[ee].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var te=d.reduce((function(ee,W){return ee[W.name]=W.align,ee}),{});for(p=0;p<f.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:f[p]},this);var ae=l.call(this,f[p],S);for(v=0;v<b.length;v+=1){var Q=f[p][b[v]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:v,data:Q},this),o.call(this,new i(c,u,S[b[v]],ae,Q,p+2,te[b[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map((function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[p]-f-f)}),this).map((function(p){return this.getLineHeightFactor()*p.length*d/m+f+f}),this).reduce((function(p,y){return Math.max(p,y)}),0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}})(en.API);var A9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kk=_9(C9),E9=[100,200,300,400,500,600,700,800,900],pve=_9(E9);function Sk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return A9[i=i||"normal"]?i:"normal"})(e.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof kk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function A8(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var mve={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function xve(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},mve,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=Sk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+E8(i)+"' and default family '"+n+"'.");if(o=(function(c,u){if(u[c])return u[c];var f=kk[c],d=f<=kk.normal?-1:1,m=A8(u,C9,f,d);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m})(i.stretch,o),o=(function(c,u){if(u[c])return u[c];for(var f=A9[c],d=0;d<f.length;++d)if(u[f[d]])return u[f[d]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=pve[c],d=A8(u,E9,f,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+E8(i)+"'.");return o}function T8(e){return e.trimLeft()}function gve(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function vve(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ev,O8,P8,vj=["times"];(function(e){var t,r,n,s,i,o,l,c,u,f=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var d=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=O;Object.defineProperty(this,"pdf",{get:function(){return z}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(de){H=!!de}});var R=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return R},set:function(de){R=!!de}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(de){isNaN(de)||(K=de)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(de){isNaN(de)||(le=de)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(de){var Y;typeof de=="number"?Y=[de,de,de,de]:((Y=new Array(4))[0]=de[0],Y[1]=de.length>=2?de[1]:Y[0],Y[2]=de.length>=3?de[2]:Y[0],Y[3]=de.length>=4?de[3]:Y[1]),u.margin=Y}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(de){he=de}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(de){ie=de}});var ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ce},set:function(de){ce=de}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(de){de instanceof f&&(u=de)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(de){u.path=de}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(de){De=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var Y;Y=m(de),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var Y=m(de);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var ne=null;function Ue(de,Y){if(ne===null){var ve=(function(ye){var Ae=[];return Object.keys(ye).forEach((function(pe){ye[pe].forEach((function(ue){var Pe=null;switch(ue){case"bold":Pe={family:pe,weight:"bold"};break;case"italic":Pe={family:pe,style:"italic"};break;case"bolditalic":Pe={family:pe,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:pe}}Pe!==null&&(Pe.ref={name:pe,style:ue},Ae.push(Pe))}))})),Ae})(de.getFontList());ne=(function(ye){for(var Ae={},pe=0;pe<ye.length;++pe){var ue=Sk(ye[pe]),Pe=ue.family,Ne=ue.stretch,Re=ue.style,nt=ue.weight;Ae[Pe]=Ae[Pe]||{},Ae[Pe][Ne]=Ae[Pe][Ne]||{},Ae[Pe][Ne][Re]=Ae[Pe][Ne][Re]||{},Ae[Pe][Ne][Re][nt]=ue}return Ae})(ve.concat(Y))}return ne}var Ce=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ce},set:function(de){ne=null,Ce=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var Y;if(this.ctx.font=de,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var ve=Y[1],ye=(Y[2],Y[3]),Ae=Y[4],pe=(Y[5],Y[6]),ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(ue==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:ue==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var Pe=(function(vt){var ut,lt,pr=[],rr=vt.trim();if(rr==="")return vj;if(rr in C8)return[C8[rr]];for(;rr!=="";){switch(lt=null,ut=(rr=T8(rr)).charAt(0)){case'"':case"'":lt=gve(rr.substring(1),ut);break;default:lt=vve(rr)}if(lt===null||(pr.push(lt[0]),(rr=T8(lt[1]))!==""&&rr.charAt(0)!==","))return vj;rr=rr.replace(/^,/,"")}return pr})(pe);if(this.fontFaces){var Ne=xve(Ue(this.pdf,this.fontFaces),Pe.map((function(vt){return{family:vt,stretch:"normal",weight:ye,style:ve}})));this.pdf.setFont(Ne.ref.name,Ne.ref.style)}else{var Re="";(ye==="bold"||parseInt(ye,10)>=700||ve==="bold")&&(Re="bold"),ve==="italic"&&(Re+="italic"),Re.length===0&&(Re="normal");for(var nt="",xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<Pe.length;kt++){if(this.pdf.internal.getFont(Pe[kt],Re,{noFallback:!0,disableWarning:!0})!==void 0){nt=Pe[kt];break}if(Re==="bolditalic"&&this.pdf.internal.getFont(Pe[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=Pe[kt],Re="bold";else if(this.pdf.internal.getFont(Pe[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=Pe[kt],Re="normal";break}}if(nt===""){for(var Me=0;Me<Pe.length;Me++)if(xt[Pe[Me]]){nt=xt[Pe[Me]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,Re)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};d.prototype.setLineDash=function(O){this.lineDash=O},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){N.call(this,"fill",!1)},d.prototype.stroke=function(){N.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(O,z){if(isNaN(O)||isNaN(z))throw qa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(O,z)},d.prototype.closePath=function(){var O=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Ca(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){O=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},d.prototype.lineTo=function(O,z){if(isNaN(O)||isNaN(z))throw qa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},d.prototype.quadraticCurveTo=function(O,z,H,R){if(isNaN(H)||isNaN(R)||isNaN(O)||isNaN(z))throw qa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(H,R)),le=this.ctx.transform.applyToPoint(new o(O,z));this.path.push({type:"qct",x1:le.x,y1:le.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},d.prototype.bezierCurveTo=function(O,z,H,R,K,le){if(isNaN(K)||isNaN(le)||isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R))throw qa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(K,le)),ie=this.ctx.transform.applyToPoint(new o(O,z)),ce=this.ctx.transform.applyToPoint(new o(H,R));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:ce.x,y2:ce.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},d.prototype.arc=function(O,z,H,R,K,le){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R)||isNaN(K))throw qa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(O,z));O=he.x,z=he.y;var ie=this.ctx.transform.applyToPoint(new o(0,H)),ce=this.ctx.transform.applyToPoint(new o(0,0));H=Math.sqrt(Math.pow(ie.x-ce.x,2)+Math.pow(ie.y-ce.y,2))}Math.abs(K-R)>=2*Math.PI&&(R=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:z,radius:H,startAngle:R,endAngle:K,counterclockwise:le})},d.prototype.arcTo=function(O,z,H,R,K){throw new Error("arcTo not implemented.")},d.prototype.rect=function(O,z,H,R){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R))throw qa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,z),this.lineTo(O+H,z),this.lineTo(O+H,z+R),this.lineTo(O,z+R),this.lineTo(O,z),this.lineTo(O+H,z),this.lineTo(O,z)},d.prototype.fillRect=function(O,z,H,R){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R))throw qa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,z,H,R),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},d.prototype.strokeRect=function(O,z,H,R){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R))throw qa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(O,z,H,R),this.stroke())},d.prototype.clearRect=function(O,z,H,R){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R))throw qa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,z,H,R))},d.prototype.save=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var R=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=R}},d.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(z),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var z,H,R,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))z=0,H=0,R=0,K=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(le!==null)z=parseInt(le[1]),H=parseInt(le[2]),R=parseInt(le[3]),K=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)z=parseInt(le[1]),H=parseInt(le[2]),R=parseInt(le[3]),K=parseFloat(le[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var he=new b9(O);O=he.ok?he.toHex():"#000000"}O.length===4?(z=O.substring(1,2),z+=z,H=O.substring(2,3),H+=H,R=O.substring(3,4),R+=R):(z=O.substring(1,3),H=O.substring(3,5),R=O.substring(5,7)),z=parseInt(z,16),H=parseInt(H,16),R=parseInt(R,16)}}return{r:z,g:H,b:R,a:K,style:O}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(O,z,H,R){if(isNaN(z)||isNaN(H)||typeof O!="string")throw qa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(R=isNaN(R)?void 0:R,!p.call(this)){var K=ae(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;E.call(this,{text:O,x:z,y:H,scale:le,angle:K,align:this.textAlign,maxWidth:R})}},d.prototype.strokeText=function(O,z,H,R){if(isNaN(z)||isNaN(H)||typeof O!="string")throw qa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){R=isNaN(R)?void 0:R;var K=ae(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;E.call(this,{text:O,x:z,y:H,scale:le,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:R})}},d.prototype.measureText=function(O){if(typeof O!="string")throw qa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,H=this.pdf.internal.scaleFactor,R=z.internal.getFontSize(),K=z.getStringUnitWidth(O)*R/z.internal.scaleFactor,le=function(he){var ie=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new le({width:K*=Math.round(96*H/72*1e4)/1e4})},d.prototype.scale=function(O,z){if(isNaN(O)||isNaN(z))throw qa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(O,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.rotate=function(O){if(isNaN(O))throw qa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.translate=function(O,z){if(isNaN(O)||isNaN(z))throw qa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,O,z);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.transform=function(O,z,H,R,K,le){if(isNaN(O)||isNaN(z)||isNaN(H)||isNaN(R)||isNaN(K)||isNaN(le))throw qa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(O,z,H,R,K,le);this.ctx.transform=this.ctx.transform.multiply(he)},d.prototype.setTransform=function(O,z,H,R,K,le){O=isNaN(O)?1:O,z=isNaN(z)?0:z,H=isNaN(H)?0:H,R=isNaN(R)?1:R,K=isNaN(K)?0:K,le=isNaN(le)?0:le,this.ctx.transform=new c(O,z,H,R,K,le)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(O,z,H,R,K,le,he,ie,ce){var De=this.pdf.getImageProperties(O),ne=1,Ue=1,Ce=1,de=1;R!==void 0&&ie!==void 0&&(Ce=ie/R,de=ce/K,ne=De.width/R*ie/R,Ue=De.height/K*ce/K),le===void 0&&(le=z,he=H,z=0,H=0),R!==void 0&&ie===void 0&&(ie=R,ce=K),R===void 0&&ie===void 0&&(ie=De.width,ce=De.height);for(var Y,ve=this.ctx.transform.decompose(),ye=ae(ve.rotate.shx),Ae=new c,pe=(Ae=(Ae=(Ae=Ae.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale)).applyToRectangle(new l(le-z*Ce,he-H*de,R*ne,K*Ue)),ue=g.call(this,pe),Pe=[],Ne=0;Ne<ue.length;Ne+=1)Pe.indexOf(ue[Ne])===-1&&Pe.push(ue[Ne]);if(j(Pe),this.autoPaging)for(var Re=Pe[0],nt=Pe[Pe.length-1],xt=Re;xt<nt+1;xt++){this.pdf.setPage(xt);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=xt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=xt===1?0:vt+(xt-2)*ut;if(this.ctx.clip_path.length!==0){var pr=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Y,this.posX+this.margin[3],-lt+Me+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=pr}var rr=JSON.parse(JSON.stringify(pe));rr=w([rr],this.posX+this.margin[3],-lt+Me+this.ctx.prevPageLastElemOffset)[0];var ft=(xt>Re||xt<nt)&&v.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,ut,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,ye),ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,ye)};var g=function(O,z,H){var R=[];z=z||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":R.push(Math.floor((O.y+K)/H)+1);break;case"arc":R.push(Math.floor((O.y+K-O.radius)/H)+1),R.push(Math.floor((O.y+K+O.radius)/H)+1);break;case"qct":var le=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);R.push(Math.floor((le.y+K)/H)+1),R.push(Math.floor((le.y+le.h+K)/H)+1);break;case"bct":var he=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);R.push(Math.floor((he.y+K)/H)+1),R.push(Math.floor((he.y+he.h+K)/H)+1);break;case"rect":R.push(Math.floor((O.y+K)/H)+1),R.push(Math.floor((O.y+O.h+K)/H)+1)}for(var ie=0;ie<R.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<R[ie];)b.call(this);return R},b=function(){var O=this.fillStyle,z=this.strokeStyle,H=this.font,R=this.lineCap,K=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=z,this.font=H,this.lineCap=R,this.lineWidth=K,this.lineJoin=le},w=function(O,z,H){for(var R=0;R<O.length;R++)switch(O[R].type){case"bct":O[R].x2+=z,O[R].y2+=H;case"qct":O[R].x1+=z,O[R].y1+=H;default:O[R].x+=z,O[R].y+=H}return O},j=function(O){return O.sort((function(z,H){return z-H}))},N=function(O,z){for(var H,R,K=this.fillStyle,le=this.strokeStyle,he=this.lineCap,ie=this.lineWidth,ce=Math.abs(ie*this.ctx.transform.scaleX),De=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Ce=[],de=0;de<Ue.length;de++)if(Ue[de].x!==void 0)for(var Y=g.call(this,Ue[de]),ve=0;ve<Y.length;ve+=1)Ce.indexOf(Y[ve])===-1&&Ce.push(Y[ve]);for(var ye=0;ye<Ce.length;ye++)for(;this.pdf.internal.getNumberOfPages()<Ce[ye];)b.call(this);if(j(Ce),this.autoPaging)for(var Ae=Ce[0],pe=Ce[Ce.length-1],ue=Ae;ue<pe+1;ue++){this.pdf.setPage(ue),this.fillStyle=K,this.strokeStyle=le,this.lineCap=he,this.lineWidth=ce,this.lineJoin=De;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=ue===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=ue===1?0:Re+(ue-2)*nt;if(this.ctx.clip_path.length!==0){var kt=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(H,this.posX+this.margin[3],-xt+Ne+this.ctx.prevPageLastElemOffset),S.call(this,O,!0),this.path=kt}if(R=JSON.parse(JSON.stringify(ne)),this.path=w(R,this.posX+this.margin[3],-xt+Ne+this.ctx.prevPageLastElemOffset),z===!1||ue===0){var Me=(ue>Ae||ue<pe)&&v.call(this);Me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,nt,null).clip().discardPath()),S.call(this,O,z),Me&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=ce,S.call(this,O,z),this.lineWidth=ie;this.path=ne},S=function(O,z){if((O!=="stroke"||z||!y.call(this))&&(O==="stroke"||z||!p.call(this))){for(var H,R,K=[],le=this.path,he=0;he<le.length;he++){var ie=le[he];switch(ie.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:ie,deltas:[],abs:[]});break;case"lt":var ce=K.length;if(le[he-1]&&!isNaN(le[he-1].x)&&(H=[ie.x-le[he-1].x,ie.y-le[he-1].y],ce>0)){for(;ce>=0;ce--)if(K[ce-1].close!==!0&&K[ce-1].begin!==!0){K[ce-1].deltas.push(H),K[ce-1].abs.push(ie);break}}break;case"bct":H=[ie.x1-le[he-1].x,ie.y1-le[he-1].y,ie.x2-le[he-1].x,ie.y2-le[he-1].y,ie.x-le[he-1].x,ie.y-le[he-1].y],K[K.length-1].deltas.push(H);break;case"qct":var De=le[he-1].x+2/3*(ie.x1-le[he-1].x),ne=le[he-1].y+2/3*(ie.y1-le[he-1].y),Ue=ie.x+2/3*(ie.x1-ie.x),Ce=ie.y+2/3*(ie.y1-ie.y),de=ie.x,Y=ie.y;H=[De-le[he-1].x,ne-le[he-1].y,Ue-le[he-1].x,Ce-le[he-1].y,de-le[he-1].x,Y-le[he-1].y],K[K.length-1].deltas.push(H);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(ie)}}R=z?null:O==="stroke"?"stroke":"fill";for(var ve=!1,ye=0;ye<K.length;ye++)if(K[ye].arc)for(var Ae=K[ye].abs,pe=0;pe<Ae.length;pe++){var ue=Ae[pe];ue.type==="arc"?T.call(this,ue.x,ue.y,ue.radius,ue.startAngle,ue.endAngle,ue.counterclockwise,void 0,z,!ve):M.call(this,ue.x,ue.y),ve=!0}else if(K[ye].close===!0)this.pdf.internal.out("h"),ve=!1;else if(K[ye].begin!==!0){var Pe=K[ye].start.x,Ne=K[ye].start.y;q.call(this,K[ye].deltas,Pe,Ne),ve=!0}R&&I.call(this,R),z&&B.call(this)}},P=function(O){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-H;case"top":return O+z-H;case"hanging":return O+z-2*H;case"middle":return O+z/2-H;case"ideographic":return O;default:return O}},A=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(z,H){this.colorStops.push([z,H])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(O,z,H,R,K,le,he,ie,ce){for(var De=Z.call(this,H,R,K,le),ne=0;ne<De.length;ne++){var Ue=De[ne];ne===0&&(ce?C.call(this,Ue.x1+O,Ue.y1+z):M.call(this,Ue.x1+O,Ue.y1+z)),G.call(this,O,z,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}ie?B.call(this):I.call(this,he)},I=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(O,z){this.pdf.internal.out(r(O)+" "+n(z)+" m")},E=function(O){var z;switch(O.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var H=this.pdf.getTextDimensions(O.text),R=P.call(this,O.y),K=A.call(this,R)-H.h,le=this.ctx.transform.applyToPoint(new o(O.x,R)),he=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var ce,De,ne,Ue=this.ctx.transform.applyToRectangle(new l(O.x,R,H.w,H.h)),Ce=ie.applyToRectangle(new l(O.x,K,H.w,H.h)),de=g.call(this,Ce),Y=[],ve=0;ve<de.length;ve+=1)Y.indexOf(de[ve])===-1&&Y.push(de[ve]);if(j(Y),this.autoPaging)for(var ye=Y[0],Ae=Y[Y.length-1],pe=ye;pe<Ae+1;pe++){this.pdf.setPage(pe);var ue=pe===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[2],Re=Ne-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],xt=nt-this.margin[3],kt=pe===1?0:Pe+(pe-2)*Re;if(this.ctx.clip_path.length!==0){var Me=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ce,this.posX+this.margin[3],-1*kt+ue),S.call(this,"fill",!0),this.path=Me}var vt=w([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-kt+ue+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale);var ut=this.autoPaging!=="text";if(ut||vt.y+vt.h<=Ne){if(ut||vt.y>=ue&&vt.x<=nt){var lt=ut?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||nt-vt.x)[0],pr=w([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-kt+ue+this.ctx.prevPageLastElemOffset)[0],rr=ut&&(pe>ye||pe<Ae)&&v.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,Re,null).clip().discardPath()),this.pdf.text(lt,pr.x,pr.y,{angle:O.angle,align:z,renderingMode:O.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else vt.y<Ne&&(this.ctx.prevPageLastElemOffset+=Ne-vt.y);O.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ne)}else O.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale),this.pdf.text(O.text,le.x+this.posX,le.y+this.posY,{angle:O.angle,align:z,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ne)},M=function(O,z,H,R){H=H||0,R=R||0,this.pdf.internal.out(r(O+H)+" "+n(z+R)+" l")},q=function(O,z,H){return this.pdf.lines(O,z,H,null,null)},G=function(O,z,H,R,K,le,he,ie){this.pdf.internal.out([t(s(H+O)),t(i(R+z)),t(s(K+O)),t(i(le+z)),t(s(he+O)),t(i(ie+z)),"c"].join(" "))},Z=function(O,z,H,R){for(var K=2*Math.PI,le=Math.PI/2;z>H;)z-=K;var he=Math.abs(H-z);he<K&&R&&(he=K-he);for(var ie=[],ce=R?-1:1,De=z;he>1e-5;){var ne=De+ce*Math.min(he,le);ie.push(te.call(this,O,De,ne)),he-=Math.abs(ne-De),De=ne}return ie},te=function(O,z,H){var R=(H-z)/2,K=O*Math.cos(R),le=O*Math.sin(R),he=K,ie=-le,ce=he*he+ie*ie,De=ce+he*K+ie*le,ne=4/3*(Math.sqrt(2*ce*De)-De)/(he*le-ie*K),Ue=he-ne*ie,Ce=ie+ne*he,de=Ue,Y=-Ce,ve=R+z,ye=Math.cos(ve),Ae=Math.sin(ve);return{x1:O*Math.cos(z),y1:O*Math.sin(z),x2:Ue*ye-Ce*Ae,y2:Ue*Ae+Ce*ye,x3:de*ye-Y*Ae,y3:de*Ae+Y*ye,x4:O*Math.cos(H),y4:O*Math.sin(H)}},ae=function(O){return 180*O/Math.PI},Q=function(O,z,H,R,K,le){var he=O+.5*(H-O),ie=z+.5*(R-z),ce=K+.5*(H-K),De=le+.5*(R-le),ne=Math.min(O,K,he,ce),Ue=Math.max(O,K,he,ce),Ce=Math.min(z,le,ie,De),de=Math.max(z,le,ie,De);return new l(ne,Ce,Ue-ne,de-Ce)},ee=function(O,z,H,R,K,le,he,ie){var ce,De,ne,Ue,Ce,de,Y,ve,ye,Ae,pe,ue,Pe,Ne,Re=H-O,nt=R-z,xt=K-H,kt=le-R,Me=he-K,vt=ie-le;for(De=0;De<41;De++)ye=(Y=(ne=O+(ce=De/40)*Re)+ce*((Ce=H+ce*xt)-ne))+ce*(Ce+ce*(K+ce*Me-Ce)-Y),Ae=(ve=(Ue=z+ce*nt)+ce*((de=R+ce*kt)-Ue))+ce*(de+ce*(le+ce*vt-de)-ve),De==0?(pe=ye,ue=Ae,Pe=ye,Ne=Ae):(pe=Math.min(pe,ye),ue=Math.min(ue,Ae),Pe=Math.max(Pe,ye),Ne=Math.max(Ne,Ae));return new l(Math.round(pe),Math.round(ue),Math.round(Pe-pe),Math.round(Ne-ue))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,z,H=(O=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:z}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(en.API),(function(e){var t=function(i){var o,l,c,u,f,d,m,p,y,v;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(v=f%85))/85)-(y=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)%85,l.push(d+33,m+33,p+33,y+33,v+33)):l.push(122);return(function(g,b){for(var w=b;w>0;w--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,f,d=String,m="length",p=255,y="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,f=(i+=o="uuuuu"[v](i[m]%5||5))[m];f>u;u+=5)l=52200625*(i[y](u)-33)+614125*(i[y](u+1)-33)+7225*(i[y](u+2)-33)+85*(i[y](u+3)-33)+(i[y](u+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return(function(b,w){for(var j=w;j>0;j--)b.pop()})(c,o[m]),d.fromCharCode.apply(d,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=yk(o)).reduce((function(c,u){return c+String.fromCharCode(u)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)})).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}})(en.API),(function(e){e.loadFile=function(t,r,n){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,f){var d=new XMLHttpRequest,m=0,p=function(y){var v=y.length,g=[],b=String.fromCharCode;for(m=0;m<v;m+=1)g.push(b(255&y.charCodeAt(m)));return g.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?f(p(this.responseText)):f(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)})(s,i,o)}catch{}return l})(t,r,n)},e.loadImageFile=e.loadFile})(en.API),(function(e){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):_j(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):_j(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var n=function(o){var l=Ca(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(u,f){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||d.appendChild(c(m,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",(function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft}),!0)),d})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],y=p.src.find((function(v){return v.format==="truetype"}));y&&c.addFont(y.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),l(this.prop.container,d)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then((function(){(o=o||en.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,(function(d){return c.updateProgress(null,u),d})).then(u,f).then((function(d){return c.updateProgress(1),d}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(u,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,en.getPageSize=function(o,l,c){if(Ca(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var p,y=0,v=0;if(m.hasOwnProperty(d))y=m[d][1]/f,v=m[d][0]/f;else try{y=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>y&&(p=v,v=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Sk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(en.API),en.API.addJS=function(e){return P8=e,this.internal.events.subscribe("postPutResources",(function(){Ev=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ev+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),O8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+P8+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Ev!==void 0&&O8!==void 0&&this.internal.out("/Names <</JavaScript "+Ev+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var d=r.internal.newObject();f.push(d);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])})(en.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(d){for(var m,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},g=4;g<y;g+=2){if(g+=p,t.indexOf(d.charCodeAt(g+1))!==-1){m=256*d.charCodeAt(g+5)+d.charCodeAt(g+6),v={width:256*d.charCodeAt(g+7)+d.charCodeAt(g+8),height:m,numcomponents:d.charCodeAt(g+9)};break}p=256*d.charCodeAt(g+2)+d.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:s}}return f}})(en.API);var Kh,Tv,I8,D8,L8,yve=(function(){var e,t,r;function n(i){var o,l,c,u,f,d,m,p,y,v,g,b,w,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var N,S;for(S=[],N=0;N<4;++N)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*f/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=d?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(w=0;0<=v?w<v:w>v;0<=v?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(g=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,g.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,g.slice(m+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(d,m,p,y){var v,g,b,w,j,N,S,P,A,T,I,B,C,E,M,q,G,Z,te,ae,Q,ee=Math.ceil((u.width-d)/p),W=Math.ceil((u.height-m)/y),O=u.width==ee&&u.height==W;for(E=o*ee,B=O?l:new Uint8Array(E*W),N=i.length,C=0,g=0;C<W&&c<N;){switch(i[c++]){case 0:for(w=G=0;G<E;w=G+=1)B[g++]=i[c++];break;case 1:for(w=Z=0;Z<E;w=Z+=1)v=i[c++],j=w<o?0:B[g-o],B[g++]=(v+j)%256;break;case 2:for(w=te=0;te<E;w=te+=1)v=i[c++],b=(w-w%o)/o,M=C&&B[(C-1)*E+b*o+w%o],B[g++]=(M+v)%256;break;case 3:for(w=ae=0;ae<E;w=ae+=1)v=i[c++],b=(w-w%o)/o,j=w<o?0:B[g-o],M=C&&B[(C-1)*E+b*o+w%o],B[g++]=(v+Math.floor((j+M)/2))%256;break;case 4:for(w=Q=0;Q<E;w=Q+=1)v=i[c++],b=(w-w%o)/o,j=w<o?0:B[g-o],C===0?M=q=0:(M=B[(C-1)*E+b*o+w%o],q=b&&B[(C-1)*E+(b-1)*o+w%o]),S=j+M-q,P=Math.abs(S-j),T=Math.abs(S-M),I=Math.abs(S-q),A=P<=T&&P<=I?j:T<=I?M:q,B[g++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var z=((m+C*y)*u.width+d)*o,H=C*E;for(w=0;w<ee;w+=1){for(var R=0;R<o;R+=1)l[z++]=B[H++];z+=(p-1)*o}}C++}}return i=Jge(i),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,u,f,d,m,p;for(l=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=d=0,m=l.length;d<m;o=d+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(p=f[i++])!=null?p:255;return u},n.prototype.copyToImageData=function(i,o){var l,c,u,f,d,m,p,y,v,g,b;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(u=i.data||i).length,d=v||o,f=m=0,c===1)for(;f<y;)p=v?4*o[f/4]:m,g=d[p++],u[f++]=g,u[f++]=g,u[f++]=g,u[f++]=l?d[p++]:255,m=p;else for(;f<y;)p=v?4*o[f/4]:m,u[f++]=d[p++],u[f++]=d[p++],u[f++]=d[p++],u[f++]=l?d[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(tn)==="[object Window]"){try{t=tn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,u,f,d,m,p;if(this.animation){for(p=[],l=f=0,d=(m=this.animation.frames).length;f<d;l=++f)o=m[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,p.push(o.image=e(c));return p}},n.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),u?.disposeOp===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,u,f,d,m=this;return l=0,d=this.animation,u=d.numFrames,c=d.frames,f=d.numPlays,(o=function(){var p,y;if(p=l++%u,y=c[p],m.renderFrame(i,p),u>1&&l/u<f)return m.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n})();function bve(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,f=[],d=0,m=null,p=0,y=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];d=e[t++]|e[t++]<<8,m=e[t++],(1&v)==0&&(m=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,N=e[t++],S=N>>6&1,P=1<<(7&N)+1,A=l,T=c,I=!1;N>>7&&(I=!0,A=t,T=P,t+=3*P);var B=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}f.push({x:g,y:b,width:w,height:j,has_local_palette:I,palette_offset:A,palette_size:T,data_offset:B,data_length:t-B,transparent_index:m,interlaced:!!S,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=f.length)throw new Error("Frame index out of range.");return f[E]},this.decodeAndBlitFrameBGRA=function(E,M){var q=this.frameInfo(E),G=q.width*q.height,Z=new Uint8Array(G);F8(e,q.data_offset,Z,G);var te=q.palette_offset,ae=q.transparent_index;ae===null&&(ae=256);var Q=q.width,ee=r-Q,W=Q,O=4*(q.y*r+q.x),z=4*((q.y+q.height)*r+q.x),H=O,R=4*ee;q.interlaced===!0&&(R+=4*r*7);for(var K=8,le=0,he=Z.length;le<he;++le){var ie=Z[le];if(W===0&&(W=Q,(H+=R)>=z&&(R=4*ee+4*r*(K-1),H=O+(Q+ee)*(K<<1),K>>=1)),ie===ae)H+=4;else{var ce=e[te+3*ie],De=e[te+3*ie+1],ne=e[te+3*ie+2];M[H++]=ne,M[H++]=De,M[H++]=ce,M[H++]=255}--W}},this.decodeAndBlitFrameRGBA=function(E,M){var q=this.frameInfo(E),G=q.width*q.height,Z=new Uint8Array(G);F8(e,q.data_offset,Z,G);var te=q.palette_offset,ae=q.transparent_index;ae===null&&(ae=256);var Q=q.width,ee=r-Q,W=Q,O=4*(q.y*r+q.x),z=4*((q.y+q.height)*r+q.x),H=O,R=4*ee;q.interlaced===!0&&(R+=4*r*7);for(var K=8,le=0,he=Z.length;le<he;++le){var ie=Z[le];if(W===0&&(W=Q,(H+=R)>=z&&(R=4*ee+4*r*(K-1),H=O+(Q+ee)*(K<<1),K>>=1)),ie===ae)H+=4;else{var ce=e[te+3*ie],De=e[te+3*ie+1],ne=e[te+3*ie+2];M[H++]=ce,M[H++]=De,M[H++]=ne,M[H++]=255}--W}}}function F8(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,u=(1<<c)-1,f=0,d=0,m=0,p=e[t++],y=new Int32Array(4096),v=null;;){for(;f<16&&p!==0;)d|=e[t++]<<f,f+=8,p===1?p=e[t++]:--p;if(f<c)break;var g=d&u;if(d>>=c,f-=c,g!==i){if(g===o)break;for(var b=g<l?g:v,w=0,j=b;j>i;)j=y[j]>>8,++w;var N=j;if(m+w+(b!==g?1:0)>n)return void qa.log("Warning, gif stream longer than expected.");r[m++]=N;var S=m+=w;for(b!==g&&(r[m++]=N),j=b;w--;)j=y[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(y[l++]=v<<8|N,l>=u+1&&c<12&&(++c,u=u<<1|1)),v=g}else l=o+1,u=(1<<(c=s+1))-1,v=null}return m!==n&&qa.log("Warning, gif stream shorter than expected."),r}function yj(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),d=new Array(65535),m=new Array(65535),p=new Array(64),y=new Array(64),v=[],g=0,b=7,w=new Array(64),j=new Array(64),N=new Array(64),S=new Array(256),P=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(O,z){for(var H=0,R=0,K=new Array,le=1;le<=16;le++){for(var he=1;he<=O[le];he++)K[z[R]]=[],K[z[R]][0]=H,K[z[R]][1]=le,R++,H++;H*=2}return K}function te(O){for(var z=O[0],H=O[1]-1;H>=0;)z&1<<H&&(g|=1<<b),H--,--b<0&&(g==255?(ae(255),ae(0)):ae(g),b=7,g=0)}function ae(O){v.push(O)}function Q(O){ae(O>>8&255),ae(255&O)}function ee(O,z,H,R,K){for(var le,he=K[0],ie=K[240],ce=(function(Ae,pe){var ue,Pe,Ne,Re,nt,xt,kt,Me,vt,ut,lt=0;for(vt=0;vt<8;++vt){ue=Ae[lt],Pe=Ae[lt+1],Ne=Ae[lt+2],Re=Ae[lt+3],nt=Ae[lt+4],xt=Ae[lt+5],kt=Ae[lt+6];var pr=ue+(Me=Ae[lt+7]),rr=ue-Me,ft=Pe+kt,$t=Pe-kt,tr=Ne+xt,$e=Ne-xt,bt=Re+nt,jr=Re-nt,Yt=pr+bt,Fr=pr-bt,Cr=ft+tr,lr=ft-tr;Ae[lt]=Yt+Cr,Ae[lt+4]=Yt-Cr;var Ut=.707106781*(lr+Fr);Ae[lt+2]=Fr+Ut,Ae[lt+6]=Fr-Ut;var wr=.382683433*((Yt=jr+$e)-(lr=$t+rr)),Er=.5411961*Yt+wr,Yr=1.306562965*lr+wr,sn=.707106781*(Cr=$e+$t),Wn=rr+sn,or=rr-sn;Ae[lt+5]=or+Er,Ae[lt+3]=or-Er,Ae[lt+1]=Wn+Yr,Ae[lt+7]=Wn-Yr,lt+=8}for(lt=0,vt=0;vt<8;++vt){ue=Ae[lt],Pe=Ae[lt+8],Ne=Ae[lt+16],Re=Ae[lt+24],nt=Ae[lt+32],xt=Ae[lt+40],kt=Ae[lt+48];var Vn=ue+(Me=Ae[lt+56]),fn=ue-Me,Ke=Pe+kt,Nt=Pe-kt,Vt=Ne+xt,re=Ne-xt,me=Re+nt,be=Re-nt,_e=Vn+me,Ee=Vn-me,Oe=Ke+Vt,Xe=Ke-Vt;Ae[lt]=_e+Oe,Ae[lt+32]=_e-Oe;var ct=.707106781*(Xe+Ee);Ae[lt+16]=Ee+ct,Ae[lt+48]=Ee-ct;var Ve=.382683433*((_e=be+re)-(Xe=Nt+fn)),Je=.5411961*_e+Ve,He=1.306562965*Xe+Ve,Le=.707106781*(Oe=re+Nt),tt=fn+Le,ht=fn-Le;Ae[lt+40]=ht+Je,Ae[lt+24]=ht-Je,Ae[lt+8]=tt+He,Ae[lt+56]=tt-He,lt++}for(vt=0;vt<64;++vt)ut=Ae[vt]*pe[vt],p[vt]=ut>0?ut+.5|0:ut-.5|0;return p})(O,z),De=0;De<64;++De)y[A[De]]=ce[De];var ne=y[0]-H;H=y[0],ne==0?te(R[0]):(te(R[m[le=32767+ne]]),te(d[le]));for(var Ue=63;Ue>0&&y[Ue]==0;)Ue--;if(Ue==0)return te(he),H;for(var Ce,de=1;de<=Ue;){for(var Y=de;y[de]==0&&de<=Ue;)++de;var ve=de-Y;if(ve>=16){Ce=ve>>4;for(var ye=1;ye<=Ce;++ye)te(ie);ve&=15}le=32767+y[de],te(K[(ve<<4)+m[le]]),te(d[le]),de++}return Ue!=63&&te(he),H}function W(O){O=Math.min(Math.max(O,1),100),i!=O&&((function(z){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],R=0;R<64;R++){var K=o((H[R]*z+50)/100);K=Math.min(Math.max(K,1),255),l[A[R]]=K}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var ie=o((le[he]*z+50)/100);ie=Math.min(Math.max(ie,1),255),c[A[he]]=ie}for(var ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,ne=0;ne<8;ne++)for(var Ue=0;Ue<8;Ue++)u[De]=1/(l[A[De]]*ce[ne]*ce[Ue]*8),f[De]=1/(c[A[De]]*ce[ne]*ce[Ue]*8),De++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,z){z&&W(z),v=new Array,g=0,b=7,Q(65496),Q(65504),Q(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),Q(1),Q(1),ae(0),ae(0),(function(){Q(65499),Q(132),ae(0);for(var Pe=0;Pe<64;Pe++)ae(l[Pe]);ae(1);for(var Ne=0;Ne<64;Ne++)ae(c[Ne])})(),(function(Pe,Ne){Q(65472),Q(17),ae(8),Q(Ne),Q(Pe),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)})(O.width,O.height),(function(){Q(65476),Q(418),ae(0);for(var Pe=0;Pe<16;Pe++)ae(T[Pe+1]);for(var Ne=0;Ne<=11;Ne++)ae(I[Ne]);ae(16);for(var Re=0;Re<16;Re++)ae(B[Re+1]);for(var nt=0;nt<=161;nt++)ae(C[nt]);ae(1);for(var xt=0;xt<16;xt++)ae(E[xt+1]);for(var kt=0;kt<=11;kt++)ae(M[kt]);ae(17);for(var Me=0;Me<16;Me++)ae(q[Me+1]);for(var vt=0;vt<=161;vt++)ae(G[vt])})(),Q(65498),Q(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var H=0,R=0,K=0;g=0,b=7,this.encode.displayName="_encode_";for(var le,he,ie,ce,De,ne,Ue,Ce,de,Y=O.data,ve=O.width,ye=O.height,Ae=4*ve,pe=0;pe<ye;){for(le=0;le<Ae;){for(De=Ae*pe+le,Ue=-1,Ce=0,de=0;de<64;de++)ne=De+(Ce=de>>3)*Ae+(Ue=4*(7&de)),pe+Ce>=ye&&(ne-=Ae*(pe+1+Ce-ye)),le+Ue>=Ae&&(ne-=le+Ue-Ae+4),he=Y[ne++],ie=Y[ne++],ce=Y[ne++],w[de]=(P[he]+P[ie+256>>0]+P[ce+512>>0]>>16)-128,j[de]=(P[he+768>>0]+P[ie+1024>>0]+P[ce+1280>>0]>>16)-128,N[de]=(P[he+1280>>0]+P[ie+1536>>0]+P[ce+1792>>0]>>16)-128;H=ee(w,u,H,t,n),R=ee(j,f,R,r,s),K=ee(N,f,K,r,s),le+=32}pe+=8}if(b>=0){var ue=[];ue[1]=b+1,ue[0]=(1<<b+1)-1,te(ue)}return Q(65497),new Uint8Array(v)},e=e||50,(function(){for(var O=String.fromCharCode,z=0;z<256;z++)S[z]=O(z)})(),t=Z(T,I),r=Z(E,M),n=Z(B,C),s=Z(q,G),(function(){for(var O=1,z=2,H=1;H<=15;H++){for(var R=O;R<z;R++)m[32767+R]=H,d[32767+R]=[],d[32767+R][1]=H,d[32767+R][0]=R;for(var K=-(z-1);K<=-O;K++)m[32767+K]=H,d[32767+K]=[],d[32767+K][1]=H,d[32767+K][0]=z-1+K;O<<=1,z<<=1}})(),(function(){for(var O=0;O<256;O++)P[O]=19595*O,P[O+256>>0]=38470*O,P[O+512>>0]=7471*O+32768,P[O+768>>0]=-11059*O,P[O+1024>>0]=-21709*O,P[O+1280>>0]=32768*O+8421375,P[O+1536>>0]=-27439*O,P[O+1792>>0]=-5329*O})(),W(e)}function Ou(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M8(e){function t(T){if(!T)throw Error("assert :P")}function r(T,I,B){for(var C=0;4>C;C++)if(T[I+C]!=B.charCodeAt(C))return!0;return!1}function n(T,I,B,C,E){for(var M=0;M<E;M++)T[I+M]=B[C+M]}function s(T,I,B,C){for(var E=0;E<C;E++)T[I+E]=B}function i(T){return new Int32Array(T)}function o(T,I){for(var B=[],C=0;C<T;C++)B.push(new I);return B}function l(T,I){var B=[];return(function C(E,M,q){for(var G=q[M],Z=0;Z<G&&(E.push(q.length>M+1?[]:new I),!(q.length<M+1));Z++)C(E[Z],M+1,q)})(B,0,T),B}var c=function(){var T=this;function I(_,F){for(var J=1<<F-1>>>0;_&J;)J>>>=1;return J?(_&J-1)+J:_}function B(_,F,J,oe,xe){t(!(oe%J));do _[F+(oe-=J)]=xe;while(0<oe)}function C(_,F,J,oe,xe){if(t(2328>=xe),512>=xe)var je=i(512);else if((je=i(xe))==null)return 0;return(function(Se,Te,Ie,Fe,Qe,gt){var dt,st,qt=Te,At=1<<Ie,Ye=i(16),et=i(16);for(t(Qe!=0),t(Fe!=null),t(Se!=null),t(0<Ie),st=0;st<Qe;++st){if(15<Fe[st])return 0;++Ye[Fe[st]]}if(Ye[0]==Qe)return 0;for(et[1]=0,dt=1;15>dt;++dt){if(Ye[dt]>1<<dt)return 0;et[dt+1]=et[dt]+Ye[dt]}for(st=0;st<Qe;++st)dt=Fe[st],0<Fe[st]&&(gt[et[dt]++]=st);if(et[15]==1)return(Fe=new E).g=0,Fe.value=gt[0],B(Se,qt,1,At,Fe),At;var Et,Tt=-1,Lt=At-1,yr=0,cr=1,qr=1,dr=1<<Ie;for(st=0,dt=1,Qe=2;dt<=Ie;++dt,Qe<<=1){if(cr+=qr<<=1,0>(qr-=Ye[dt]))return 0;for(;0<Ye[dt];--Ye[dt])(Fe=new E).g=dt,Fe.value=gt[st++],B(Se,qt+yr,Qe,dr,Fe),yr=I(yr,dt)}for(dt=Ie+1,Qe=2;15>=dt;++dt,Qe<<=1){if(cr+=qr<<=1,0>(qr-=Ye[dt]))return 0;for(;0<Ye[dt];--Ye[dt]){if(Fe=new E,(yr&Lt)!=Tt){for(qt+=dr,Et=1<<(Tt=dt)-Ie;15>Tt&&!(0>=(Et-=Ye[Tt]));)++Tt,Et<<=1;At+=dr=1<<(Et=Tt-Ie),Se[Te+(Tt=yr&Lt)].g=Et+Ie,Se[Te+Tt].value=qt-Te-Tt}Fe.g=dt-Ie,Fe.value=gt[st++],B(Se,qt+(yr>>Ie),Qe,dr,Fe),yr=I(yr,dt)}}return cr!=2*et[15]-1?0:At})(_,F,J,oe,xe,je)}function E(){this.value=this.g=0}function M(){this.value=this.g=0}function q(){this.G=o(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(pn,M)}function G(_,F,J,oe){t(_!=null),t(F!=null),t(2147483648>oe),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=F,_.pa=J,_.Jd=F,_.Yc=J+oe,_.Zc=4<=oe?J+oe-4+1:J,le(_)}function Z(_,F){for(var J=0;0<F--;)J|=ie(_,128)<<F;return J}function te(_,F){var J=Z(_,F);return he(_)?-J:J}function ae(_,F,J,oe){var xe,je=0;for(t(_!=null),t(F!=null),t(4294967288>oe),_.Sb=oe,_.Ra=0,_.u=0,_.h=0,4<oe&&(oe=4),xe=0;xe<oe;++xe)je+=F[J+xe]<<8*xe;_.Ra=je,_.bb=oe,_.oa=F,_.pa=J}function Q(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Ui-8>>>0,++_.bb,_.u-=8;H(_)&&(_.h=1,_.u=0)}function ee(_,F){if(t(0<=F),!_.h&&F<=Ia){var J=z(_)&Ls[F];return _.u+=F,Q(_),J}return _.h=1,_.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(_){return _.Ra>>>(_.u&Ui-1)>>>0}function H(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Ui}function R(_,F){_.u=F,_.h=H(_)}function K(_){_.u>=Ns&&(t(_.u>=Ns),Q(_))}function le(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function he(_){return Z(_,1)}function ie(_,F){var J=_.Ca;0>_.b&&le(_);var oe=_.b,xe=J*F>>>8,je=(_.I>>>oe>xe)+0;for(je?(J-=xe,_.I-=xe+1<<oe>>>0):J=xe+1,oe=J,xe=0;256<=oe;)xe+=8,oe>>=8;return oe=7^xe+fa[oe],_.b-=oe,_.Ca=(J<<oe)-1,je}function ce(_,F,J){_[F+0]=J>>24&255,_[F+1]=J>>16&255,_[F+2]=J>>8&255,_[F+3]=J>>0&255}function De(_,F){return _[F+0]<<0|_[F+1]<<8}function ne(_,F){return De(_,F)|_[F+2]<<16}function Ue(_,F){return De(_,F)|De(_,F+2)<<16}function Ce(_,F){var J=1<<F;return t(_!=null),t(0<F),_.X=i(J),_.X==null?0:(_.Mb=32-F,_.Xa=F,1)}function de(_,F){t(_!=null),t(F!=null),t(_.Xa==F.Xa),n(F.X,0,_.X,0,1<<F.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function ve(_,F,J,oe){t(J!=null),t(oe!=null);var xe=J[0],je=oe[0];return xe==0&&(xe=(_*je+F/2)/F),je==0&&(je=(F*xe+_/2)/_),0>=xe||0>=je?0:(J[0]=xe,oe[0]=je,1)}function ye(_,F){return _+(1<<F)-1>>>F}function Ae(_,F){return((4278255360&_)+(4278255360&F)>>>0&4278255360)+((16711935&_)+(16711935&F)>>>0&16711935)>>>0}function pe(_,F){T[F]=function(J,oe,xe,je,Se,Te,Ie){var Fe;for(Fe=0;Fe<Se;++Fe){var Qe=T[_](Te[Ie+Fe-1],xe,je+Fe);Te[Ie+Fe]=Ae(J[oe+Fe],Qe)}}}function ue(){this.ud=this.hd=this.jd=0}function Pe(_,F){return((4278124286&(_^F))>>>1)+(_&F)>>>0}function Ne(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Re(_,F){return Ne(_+(_-F+.5>>1))}function nt(_,F,J){return Math.abs(F-J)-Math.abs(_-J)}function xt(_,F,J,oe,xe,je,Se){for(oe=je[Se-1],J=0;J<xe;++J)je[Se+J]=oe=Ae(_[F+J],oe)}function kt(_,F,J,oe,xe){var je;for(je=0;je<J;++je){var Se=_[F+je],Te=Se>>8&255,Ie=16711935&(Ie=(Ie=16711935&Se)+((Te<<16)+Te));oe[xe+je]=(4278255360&Se)+Ie>>>0}}function Me(_,F){F.jd=_>>0&255,F.hd=_>>8&255,F.ud=_>>16&255}function vt(_,F,J,oe,xe,je){var Se;for(Se=0;Se<oe;++Se){var Te=F[J+Se],Ie=Te>>>8,Fe=Te,Qe=255&(Qe=(Qe=Te>>>16)+((_.jd<<24>>24)*(Ie<<24>>24)>>>5));Fe=255&(Fe=(Fe=Fe+((_.hd<<24>>24)*(Ie<<24>>24)>>>5))+((_.ud<<24>>24)*(Qe<<24>>24)>>>5)),xe[je+Se]=(4278255360&Te)+(Qe<<16)+Fe}}function ut(_,F,J,oe,xe){T[F]=function(je,Se,Te,Ie,Fe,Qe,gt,dt,st){for(Ie=gt;Ie<dt;++Ie)for(gt=0;gt<st;++gt)Fe[Qe++]=xe(Te[oe(je[Se++])])},T[_]=function(je,Se,Te,Ie,Fe,Qe,gt){var dt=8>>je.b,st=je.Ea,qt=je.K[0],At=je.w;if(8>dt)for(je=(1<<je.b)-1,At=(1<<dt)-1;Se<Te;++Se){var Ye,et=0;for(Ye=0;Ye<st;++Ye)Ye&je||(et=oe(Ie[Fe++])),Qe[gt++]=xe(qt[et&At]),et>>=dt}else T["VP8LMapColor"+J](Ie,Fe,qt,At,Qe,gt,Se,Te,st)}}function lt(_,F,J,oe,xe){for(J=F+J;F<J;){var je=_[F++];oe[xe++]=je>>16&255,oe[xe++]=je>>8&255,oe[xe++]=je>>0&255}}function pr(_,F,J,oe,xe){for(J=F+J;F<J;){var je=_[F++];oe[xe++]=je>>16&255,oe[xe++]=je>>8&255,oe[xe++]=je>>0&255,oe[xe++]=je>>24&255}}function rr(_,F,J,oe,xe){for(J=F+J;F<J;){var je=(Se=_[F++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;oe[xe++]=je,oe[xe++]=Se}}function ft(_,F,J,oe,xe){for(J=F+J;F<J;){var je=(Se=_[F++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;oe[xe++]=je,oe[xe++]=Se}}function $t(_,F,J,oe,xe){for(J=F+J;F<J;){var je=_[F++];oe[xe++]=je>>0&255,oe[xe++]=je>>8&255,oe[xe++]=je>>16&255}}function tr(_,F,J,oe,xe,je){if(je==0)for(J=F+J;F<J;)ce(oe,((je=_[F++])[0]>>24|je[1]>>8&65280|je[2]<<8&16711680|je[3]<<24)>>>0),xe+=32;else n(oe,xe,_,F,J)}function $e(_,F){T[F][0]=T[_+"0"],T[F][1]=T[_+"1"],T[F][2]=T[_+"2"],T[F][3]=T[_+"3"],T[F][4]=T[_+"4"],T[F][5]=T[_+"5"],T[F][6]=T[_+"6"],T[F][7]=T[_+"7"],T[F][8]=T[_+"8"],T[F][9]=T[_+"9"],T[F][10]=T[_+"10"],T[F][11]=T[_+"11"],T[F][12]=T[_+"12"],T[F][13]=T[_+"13"],T[F][14]=T[_+"0"],T[F][15]=T[_+"0"]}function bt(_){return _==vu||_==Ll||_==Qu||_==Dc}function jr(){this.eb=[],this.size=this.A=this.fb=0}function Yt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jr,this.f.kb=new Yt,this.sd=null}function Cr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ut(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function wr(_,F){var J=_.T,oe=F.ba.f.RGBA,xe=oe.eb,je=oe.fb+_.ka*oe.A,Se=Hi[F.ba.S],Te=_.y,Ie=_.O,Fe=_.f,Qe=_.N,gt=_.ea,dt=_.W,st=F.cc,qt=F.dc,At=F.Mc,Ye=F.Nc,et=_.ka,Et=_.ka+_.T,Tt=_.U,Lt=Tt+1>>1;for(et==0?Se(Te,Ie,null,null,Fe,Qe,gt,dt,Fe,Qe,gt,dt,xe,je,null,null,Tt):(Se(F.ec,F.fc,Te,Ie,st,qt,At,Ye,Fe,Qe,gt,dt,xe,je-oe.A,xe,je,Tt),++J);et+2<Et;et+=2)st=Fe,qt=Qe,At=gt,Ye=dt,Qe+=_.Rc,dt+=_.Rc,je+=2*oe.A,Se(Te,(Ie+=2*_.fa)-_.fa,Te,Ie,st,qt,At,Ye,Fe,Qe,gt,dt,xe,je-oe.A,xe,je,Tt);return Ie+=_.fa,_.j+Et<_.o?(n(F.ec,F.fc,Te,Ie,Tt),n(F.cc,F.dc,Fe,Qe,Lt),n(F.Mc,F.Nc,gt,dt,Lt),J--):1&Et||Se(Te,Ie,null,null,Fe,Qe,gt,dt,Fe,Qe,gt,dt,xe,je+oe.A,null,null,Tt),J}function Er(_,F,J){var oe=_.F,xe=[_.J];if(oe!=null){var je=_.U,Se=F.ba.S,Te=Se==qd||Se==Qu;F=F.ba.f.RGBA;var Ie=[0],Fe=_.ka;Ie[0]=_.T,_.Kb&&(Fe==0?--Ie[0]:(--Fe,xe[0]-=_.width),_.j+_.ka+_.T==_.o&&(Ie[0]=_.o-_.j-Fe));var Qe=F.eb;Fe=F.fb+Fe*F.A,_=Qn(oe,xe[0],_.width,je,Ie,Qe,Fe+(Te?0:3),F.A),t(J==Ie),_&&bt(Se)&&fi(Qe,Fe,Te,je,Ie,F.A)}return 0}function Yr(_){var F=_.ma,J=F.ba.S,oe=11>J,xe=J==Ic||J==Ju||J==qd||J==ia||J==12||bt(J);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!ds(F.Oa,_,xe?11:12))return 0;if(xe&&bt(J)&&Kt(),_.da)alert("todo:use_scaling");else{if(oe){if(F.Ib=Ut,_.Kb){if(J=_.U+1>>1,F.memory=i(_.U+2*J),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+_.U,F.Mc=F.cc,F.Nc=F.dc+J,F.Ib=wr,Kt()}}else alert("todo:EmitYUV");xe&&(F.Jb=Er,oe&&pt())}if(oe&&!Ks){for(_=0;256>_;++_)Xs[_]=89858*(_-128)+No>>nc,Ha[_]=-22014*(_-128)+No,jo[_]=-45773*(_-128),ga[_]=113618*(_-128)+No>>nc;for(_=Yn;_<oa;++_)F=76283*(_-16)+No>>nc,Cf[_-Yn]=li(F,255),Ef[_-Yn]=li(F+8>>4,15);Ks=1}return 1}function sn(_){var F=_.ma,J=_.U,oe=_.T;return t(!(1&_.ka)),0>=J||0>=oe?0:(J=F.Ib(_,F),F.Jb!=null&&F.Jb(_,F,J),F.Dc+=J,1)}function Wn(_){_.ma.memory=null}function or(_,F,J,oe){return ee(_,8)!=47?0:(F[0]=ee(_,14)+1,J[0]=ee(_,14)+1,oe[0]=ee(_,1),ee(_,3)!=0?0:!_.h)}function Vn(_,F){if(4>_)return _+1;var J=_-2>>1;return(2+(1&_)<<J)+ee(F,J)+1}function fn(_,F){return 120<F?F-120:1<=(J=((J=Fc[F-1])>>4)*_+(8-(15&J)))?J:1;var J}function Ke(_,F,J){var oe=z(J),xe=_[F+=255&oe].g-8;return 0<xe&&(R(J,J.u+8),oe=z(J),F+=_[F].value,F+=oe&(1<<xe)-1),R(J,J.u+_[F].g),_[F].value}function Nt(_,F,J){return J.g+=_.g,J.value+=_.value<<F>>>0,t(8>=J.g),_.g}function Vt(_,F,J){var oe=_.xc;return t((F=oe==0?0:_.vc[_.md*(J>>oe)+(F>>oe)])<_.Wb),_.Ya[F]}function re(_,F,J,oe){var xe=_.ab,je=_.c*F,Se=_.C;F=Se+F;var Te=J,Ie=oe;for(oe=_.Ta,J=_.Ua;0<xe--;){var Fe=_.gc[xe],Qe=Se,gt=F,dt=Te,st=Ie,qt=(Ie=oe,Te=J,Fe.Ea);switch(t(Qe<gt),t(gt<=Fe.nc),Fe.hc){case 2:Pl(dt,st,(gt-Qe)*qt,Ie,Te);break;case 0:var At=Qe,Ye=gt,et=Ie,Et=Te,Tt=(dr=Fe).Ea;At==0&&(js(dt,st,null,null,1,et,Et),xt(dt,st+1,0,0,Tt-1,et,Et+1),st+=Tt,Et+=Tt,++At);for(var Lt=1<<dr.b,yr=Lt-1,cr=ye(Tt,dr.b),qr=dr.K,dr=dr.w+(At>>dr.b)*cr;At<Ye;){var Bn=qr,zn=dr,Nn=1;for(qi(dt,st,et,Et-Tt,1,et,Et);Nn<Tt;){var dn=(Nn&~yr)+Lt;dn>Tt&&(dn=Tt),(0,Il[Bn[zn++]>>8&15])(dt,st+ +Nn,et,Et+Nn-Tt,dn-Nn,et,Et+Nn),Nn=dn}st+=Tt,Et+=Tt,++At&yr||(dr+=cr)}gt!=Fe.nc&&n(Ie,Te-qt,Ie,Te+(gt-Qe-1)*qt,qt);break;case 1:for(qt=dt,Ye=st,Tt=(dt=Fe.Ea)-(Et=dt&~(et=(st=1<<Fe.b)-1)),At=ye(dt,Fe.b),Lt=Fe.K,Fe=Fe.w+(Qe>>Fe.b)*At;Qe<gt;){for(yr=Lt,cr=Fe,qr=new ue,dr=Ye+Et,Bn=Ye+dt;Ye<dr;)Me(yr[cr++],qr),Ql(qr,qt,Ye,st,Ie,Te),Ye+=st,Te+=st;Ye<Bn&&(Me(yr[cr++],qr),Ql(qr,qt,Ye,Tt,Ie,Te),Ye+=Tt,Te+=Tt),++Qe&et||(Fe+=At)}break;case 3:if(dt==Ie&&st==Te&&0<Fe.b){for(Ye=Ie,dt=qt=Te+(gt-Qe)*qt-(Et=(gt-Qe)*ye(Fe.Ea,Fe.b)),st=Ie,et=Te,At=[],Et=(Tt=Et)-1;0<=Et;--Et)At[Et]=st[et+Et];for(Et=Tt-1;0<=Et;--Et)Ye[dt+Et]=At[Et];ci(Fe,Qe,gt,Ie,qt,Ie,Te)}else ci(Fe,Qe,gt,dt,st,Ie,Te)}Te=oe,Ie=J}Ie!=J&&n(oe,J,Te,Ie,je)}function me(_,F){var J=_.V,oe=_.Ba+_.c*_.C,xe=F-_.C;if(t(F<=_.l.o),t(16>=xe),0<xe){var je=_.l,Se=_.Ta,Te=_.Ua,Ie=je.width;if(re(_,xe,J,oe),xe=Te=[Te],t((J=_.C)<(oe=F)),t(je.v<je.va),oe>je.o&&(oe=je.o),J<je.j){var Fe=je.j-J;J=je.j,xe[0]+=Fe*Ie}if(J>=oe?J=0:(xe[0]+=4*je.v,je.ka=J-je.j,je.U=je.va-je.v,je.T=oe-J,J=1),J){if(Te=Te[0],11>(J=_.ca).S){var Qe=J.f.RGBA,gt=(oe=J.S,xe=je.U,je=je.T,Fe=Qe.eb,Qe.A),dt=je;for(Qe=Qe.fb+_.Ma*Qe.A;0<dt--;){var st=Se,qt=Te,At=xe,Ye=Fe,et=Qe;switch(oe){case Bd:ui(st,qt,At,Ye,et);break;case Ic:Fs(st,qt,At,Ye,et);break;case vu:Fs(st,qt,At,Ye,et),fi(Ye,et,0,At,1,0);break;case Ud:bo(st,qt,At,Ye,et);break;case Ju:tr(st,qt,At,Ye,et,1);break;case Ll:tr(st,qt,At,Ye,et,1),fi(Ye,et,0,At,1,0);break;case qd:tr(st,qt,At,Ye,et,0);break;case Qu:tr(st,qt,At,Ye,et,0),fi(Ye,et,1,At,1,0);break;case ia:Zo(st,qt,At,Ye,et);break;case Dc:Zo(st,qt,At,Ye,et),Xn(Ye,et,At,1,0);break;case gu:el(st,qt,At,Ye,et);break;default:t(0)}Te+=Ie,Qe+=gt}_.Ma+=je}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=J.height)}}_.C=F,t(_.C<=_.i)}function be(_){var F;if(0<_.ua)return 0;for(F=0;F<_.Wb;++F){var J=_.Ya[F].G,oe=_.Ya[F].H;if(0<J[1][oe[1]+0].g||0<J[2][oe[2]+0].g||0<J[3][oe[3]+0].g)return 0}return 1}function _e(_,F,J,oe,xe,je){if(_.Z!=0){var Se=_.qd,Te=_.rd;for(t(Ss[_.Z]!=null);F<J;++F)Ss[_.Z](Se,Te,oe,xe,oe,xe,je),Se=oe,Te=xe,xe+=je;_.qd=Se,_.rd=Te}}function Ee(_,F){var J=_.l.ma,oe=J.Z==0||J.Z==1?_.l.j:_.C;if(oe=_.C<oe?oe:_.C,t(F<=_.l.o),F>oe){var xe=_.l.width,je=J.ca,Se=J.tb+xe*oe,Te=_.V,Ie=_.Ba+_.c*oe,Fe=_.gc;t(_.ab==1),t(Fe[0].hc==3),Fd(Fe[0],oe,F,Te,Ie,je,Se),_e(J,oe,F,je,Se,xe)}_.C=_.Ma=F}function Oe(_,F,J,oe,xe,je,Se){var Te=_.$/oe,Ie=_.$%oe,Fe=_.m,Qe=_.s,gt=J+_.$,dt=gt;xe=J+oe*xe;var st=J+oe*je,qt=280+Qe.ua,At=_.Pb?Te:16777216,Ye=0<Qe.ua?Qe.Wa:null,et=Qe.wc,Et=gt<st?Vt(Qe,Ie,Te):null;t(_.C<je),t(st<=xe);var Tt=!1;e:for(;;){for(;Tt||gt<st;){var Lt=0;if(Te>=At){var yr=gt-J;t((At=_).Pb),At.wd=At.m,At.xd=yr,0<At.s.ua&&de(At.s.Wa,At.s.vb),At=Te+Sf}if(Ie&et||(Et=Vt(Qe,Ie,Te)),t(Et!=null),Et.Qb&&(F[gt]=Et.qb,Tt=!0),!Tt)if(K(Fe),Et.jc){Lt=Fe,yr=F;var cr=gt,qr=Et.pd[z(Lt)&pn-1];t(Et.jc),256>qr.g?(R(Lt,Lt.u+qr.g),yr[cr]=qr.value,Lt=0):(R(Lt,Lt.u+qr.g-256),t(256<=qr.value),Lt=qr.value),Lt==0&&(Tt=!0)}else Lt=Ke(Et.G[0],Et.H[0],Fe);if(Fe.h)break;if(Tt||256>Lt){if(!Tt)if(Et.nd)F[gt]=(Et.qb|Lt<<8)>>>0;else{if(K(Fe),Tt=Ke(Et.G[1],Et.H[1],Fe),K(Fe),yr=Ke(Et.G[2],Et.H[2],Fe),cr=Ke(Et.G[3],Et.H[3],Fe),Fe.h)break;F[gt]=(cr<<24|Tt<<16|Lt<<8|yr)>>>0}if(Tt=!1,++gt,++Ie>=oe&&(Ie=0,++Te,Se!=null&&Te<=je&&!(Te%16)&&Se(_,Te),Ye!=null))for(;dt<gt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt}else if(280>Lt){if(Lt=Vn(Lt-256,Fe),yr=Ke(Et.G[4],Et.H[4],Fe),K(Fe),yr=fn(oe,yr=Vn(yr,Fe)),Fe.h)break;if(gt-J<yr||xe-gt<Lt)break e;for(cr=0;cr<Lt;++cr)F[gt+cr]=F[gt+cr-yr];for(gt+=Lt,Ie+=Lt;Ie>=oe;)Ie-=oe,++Te,Se!=null&&Te<=je&&!(Te%16)&&Se(_,Te);if(t(gt<=xe),Ie&et&&(Et=Vt(Qe,Ie,Te)),Ye!=null)for(;dt<gt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt}else{if(!(Lt<qt))break e;for(Tt=Lt-280,t(Ye!=null);dt<gt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt;Lt=gt,t(!(Tt>>>(yr=Ye).Xa)),F[Lt]=yr.X[Tt],Tt=!0}Tt||t(Fe.h==H(Fe))}if(_.Pb&&Fe.h&&gt<xe)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&de(_.s.vb,_.s.Wa);else{if(Fe.h)break e;Se?.(_,Te>je?je:Te),_.a=0,_.$=gt-J}return 1}return _.a=3,0}function Xe(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var F=_.Wa;F!=null&&(F.X=null),_.vb=null,t(_!=null)}function ct(){var _=new w0;return _==null?null:(_.a=0,_.xb=wu,$e("Predictor","VP8LPredictors"),$e("Predictor","VP8LPredictors_C"),$e("PredictorAdd","VP8LPredictorsAdd"),$e("PredictorAdd","VP8LPredictorsAdd_C"),Pl=kt,Ql=vt,ui=lt,Fs=pr,Zo=rr,el=ft,bo=$t,T.VP8LMapColor32b=Jl,T.VP8LMapColor8b=Oc,_)}function Ve(_,F,J,oe,xe){var je=1,Se=[_],Te=[F],Ie=oe.m,Fe=oe.s,Qe=null,gt=0;e:for(;;){if(J)for(;je&&ee(Ie,1);){var dt=Se,st=Te,qt=oe,At=1,Ye=qt.m,et=qt.gc[qt.ab],Et=ee(Ye,2);if(qt.Oc&1<<Et)je=0;else{switch(qt.Oc|=1<<Et,et.hc=Et,et.Ea=dt[0],et.nc=st[0],et.K=[null],++qt.ab,t(4>=qt.ab),Et){case 0:case 1:et.b=ee(Ye,3)+2,At=Ve(ye(et.Ea,et.b),ye(et.nc,et.b),0,qt,et.K),et.K=et.K[0];break;case 3:var Tt,Lt=ee(Ye,8)+1,yr=16<Lt?0:4<Lt?1:2<Lt?2:3;if(dt[0]=ye(et.Ea,yr),et.b=yr,Tt=At=Ve(Lt,1,0,qt,et.K)){var cr,qr=Lt,dr=et,Bn=1<<(8>>dr.b),zn=i(Bn);if(zn==null)Tt=0;else{var Nn=dr.K[0],dn=dr.w;for(zn[0]=dr.K[0][0],cr=1;cr<1*qr;++cr)zn[cr]=Ae(Nn[dn+cr],zn[cr-1]);for(;cr<4*Bn;++cr)zn[cr]=0;dr.K[0]=null,dr.K[0]=zn,Tt=1}}At=Tt;break;case 2:break;default:t(0)}je=At}}if(Se=Se[0],Te=Te[0],je&&ee(Ie,1)&&!(je=1<=(gt=ee(Ie,4))&&11>=gt)){oe.a=3;break e}var ta;if(ta=je)t:{var Un,Xr,La,Ei=oe,es=Se,ts=Te,An=gt,pi=J,_s=Ei.m,Fa=Ei.s,As=[null],fs=1,Ys=0,ko=Mc[An];r:for(;;){if(pi&&ee(_s,1)){var Ma=ee(_s,3)+2,Wa=ye(es,Ma),Wi=ye(ts,Ma),sc=Wa*Wi;if(!Ve(Wa,Wi,0,Ei,As))break r;for(As=As[0],Fa.xc=Ma,Un=0;Un<sc;++Un){var ic=As[Un]>>8&65535;As[Un]=ic,ic>=fs&&(fs=ic+1)}}if(_s.h)break r;for(Xr=0;5>Xr;++Xr){var Zn=Lc[Xr];!Xr&&0<An&&(Zn+=1<<An),Ys<Zn&&(Ys=Zn)}var Ml=o(fs*ko,E),Tf=fs,j0=o(Tf,q);if(j0==null)var So=null;else t(65536>=Tf),So=j0;var _o=i(Ys);if(So==null||_o==null||Ml==null){Ei.a=1;break r}var Nu=Ml;for(Un=La=0;Un<fs;++Un){var Ao=So[Un],ll=Ao.G,oc=Ao.H,Co=0,Cs=1,rd=0;for(Xr=0;5>Xr;++Xr){Zn=Lc[Xr],ll[Xr]=Nu,oc[Xr]=La,!Xr&&0<An&&(Zn+=1<<An);a:{var cl,lc=Zn,nd=Ei,Rl=_o,Th=Nu,k0=La,ja=0,ul=nd.m,zd=ee(ul,1);if(s(Rl,0,0,lc),zd){var Hd=ee(ul,1)+1,Of=ee(ul,1),Pf=ee(ul,Of==0?1:8);Rl[Pf]=1,Hd==2&&(Rl[Pf=ee(ul,8)]=1);var Bl=1}else{var Ra=i(19),rs=ee(ul,4)+4;if(19<rs){nd.a=3;var Va=0;break a}for(cl=0;cl<rs;++cl)Ra[yu[cl]]=ee(ul,3);var ad=void 0,cc=void 0,ju=nd,sd=Ra,ns=lc,mi=Rl,Wd=0,dl=ju.m,oo=8,Vi=o(128,E);n:for(;C(Vi,0,7,sd,19);){if(ee(dl,1)){var D=2+2*ee(dl,3);if((ad=2+ee(dl,D))>ns)break n}else ad=ns;for(cc=0;cc<ns&&ad--;){K(dl);var fe=Vi[0+(127&z(dl))];R(dl,dl.u+fe.g);var ge=fe.value;if(16>ge)mi[cc++]=ge,ge!=0&&(oo=ge);else{var Ge=ge==16,it=ge-16,zt=N0[it],_t=ee(dl,Zu[it])+zt;if(cc+_t>ns)break n;for(var Qt=Ge?oo:0;0<_t--;)mi[cc++]=Qt}}Wd=1;break n}Wd||(ju.a=3),Bl=Wd}(Bl=Bl&&!ul.h)&&(ja=C(Th,k0,8,Rl,lc)),Bl&&ja!=0?Va=ja:(nd.a=3,Va=0)}if(Va==0)break r;if(Cs&&Sh[Xr]==1&&(Cs=Nu[La].g==0),Co+=Nu[La].g,La+=Va,3>=Xr){var Or,Cn=_o[0];for(Or=1;Or<Zn;++Or)_o[Or]>Cn&&(Cn=_o[Or]);rd+=Cn}}if(Ao.nd=Cs,Ao.Qb=0,Cs&&(Ao.qb=(ll[3][oc[3]+0].value<<24|ll[1][oc[1]+0].value<<16|ll[2][oc[2]+0].value)>>>0,Co==0&&256>ll[0][oc[0]+0].value&&(Ao.Qb=1,Ao.qb+=ll[0][oc[0]+0].value<<8)),Ao.jc=!Ao.Qb&&6>rd,Ao.jc){var ka,Hn=Ao;for(ka=0;ka<pn;++ka){var Js=ka,Ti=Hn.pd[Js],id=Hn.G[0][Hn.H[0]+Js];256<=id.value?(Ti.g=id.g+256,Ti.value=id.value):(Ti.g=0,Ti.value=0,Js>>=Nt(id,8,Ti),Js>>=Nt(Hn.G[1][Hn.H[1]+Js],16,Ti),Js>>=Nt(Hn.G[2][Hn.H[2]+Js],0,Ti),Nt(Hn.G[3][Hn.H[3]+Js],24,Ti))}}}Fa.vc=As,Fa.Wb=fs,Fa.Ya=So,Fa.yc=Ml,ta=1;break t}ta=0}if(!(je=ta)){oe.a=3;break e}if(0<gt){if(Fe.ua=1<<gt,!Ce(Fe.Wa,gt)){oe.a=1,je=0;break e}}else Fe.ua=0;var Oh=oe,Ph=Se,Ng=Te,Ih=Oh.s,Dh=Ih.xc;if(Oh.c=Ph,Oh.i=Ng,Ih.md=ye(Ph,Dh),Ih.wc=Dh==0?-1:(1<<Dh)-1,J){oe.xb=Fl;break e}if((Qe=i(Se*Te))==null){oe.a=1,je=0;break e}je=(je=Oe(oe,Qe,0,Se,Te,Te,null))&&!Ie.h;break e}return je?(xe!=null?xe[0]=Qe:(t(Qe==null),t(J)),oe.$=0,J||Xe(Fe)):Xe(Fe),je}function Je(_,F){var J=_.c*_.i,oe=J+F+16*F;return t(_.c<=F),_.V=i(oe),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+J+F,1)}function He(_,F){var J=_.C,oe=F-J,xe=_.V,je=_.Ba+_.c*J;for(t(F<=_.l.o);0<oe;){var Se=16<oe?16:oe,Te=_.l.ma,Ie=_.l.width,Fe=Ie*Se,Qe=Te.ca,gt=Te.tb+Ie*J,dt=_.Ta,st=_.Ua;re(_,Se,xe,je),xa(dt,st,Qe,gt,Fe),_e(Te,J,J+Se,Qe,gt,Ie),oe-=Se,xe+=Se*_.c,J+=Se}t(J==F),_.C=_.Ma=F}function Le(){this.ub=this.yd=this.td=this.Rb=0}function tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ht(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pt(){this.Yb=(function(){var _=[];return(function F(J,oe,xe){for(var je=xe[oe],Se=0;Se<je&&(J.push(xe.length>oe+1?[]:0),!(xe.length<oe+1));Se++)F(J[Se],oe+1,xe)})(_,0,[3,11]),_})()}function Mt(){this.jb=i(3),this.Wc=l([4,8],Pt),this.Xc=l([4,17],Pt)}function vr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function zr(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function Mn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ps(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xn(){this.uc=this.M=this.Nb=0,this.wa=Array(new zr),this.Y=0,this.ya=Array(new ps),this.aa=0,this.l=new pa}function wa(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Pn(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Le,this.Kc=new tt,this.ed=new vr,this.Qa=new ht,this.Ic=this.$c=this.Aa=0,this.D=new xn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,Mn),this.Pa=new Mt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wa),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new zr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ps),this.L=this.aa=0,this.gd=l([4,2],zr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function pa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sa(){var _=new Pn;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Bc||(Bc=qe)),_}function ma(_,F,J){return _.a==0&&(_.a=F,_.sc=J,_.cb=0),0}function Ws(_,F,J){return 3<=J&&_[F+0]==157&&_[F+1]==1&&_[F+2]==42}function Ta(_,F){if(_==null)return 0;if(_.a=0,_.sc="OK",F==null)return ma(_,2,"null VP8Io passed to VP8GetHeaders()");var J=F.data,oe=F.w,xe=F.ha;if(4>xe)return ma(_,7,"Truncated header.");var je=J[oe+0]|J[oe+1]<<8|J[oe+2]<<16,Se=_.Od;if(Se.Rb=!(1&je),Se.td=je>>1&7,Se.yd=je>>4&1,Se.ub=je>>5,3<Se.td)return ma(_,3,"Incorrect keyframe parameters.");if(!Se.yd)return ma(_,4,"Frame not displayable.");oe+=3,xe-=3;var Te=_.Kc;if(Se.Rb){if(7>xe)return ma(_,7,"cannot parse picture header");if(!Ws(J,oe,xe))return ma(_,3,"Bad code word");Te.c=16383&(J[oe+4]<<8|J[oe+3]),Te.Td=J[oe+4]>>6,Te.i=16383&(J[oe+6]<<8|J[oe+5]),Te.Ud=J[oe+6]>>6,oe+=7,xe-=7,_.za=Te.c+15>>4,_.Ub=Te.i+15>>4,F.width=Te.c,F.height=Te.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,s((je=_.Pa).jb,0,255,je.jb.length),t((je=_.Qa)!=null),je.Cb=0,je.Bb=0,je.Fb=1,s(je.Zb,0,0,je.Zb.length),s(je.Lb,0,0,je.Lb)}if(Se.ub>xe)return ma(_,7,"bad partition length");G(je=_.m,J,oe,Se.ub),oe+=Se.ub,xe-=Se.ub,Se.Rb&&(Te.Ld=he(je),Te.Kd=he(je)),Te=_.Qa;var Ie,Fe=_.Pa;if(t(je!=null),t(Te!=null),Te.Cb=he(je),Te.Cb){if(Te.Bb=he(je),he(je)){for(Te.Fb=he(je),Ie=0;4>Ie;++Ie)Te.Zb[Ie]=he(je)?te(je,7):0;for(Ie=0;4>Ie;++Ie)Te.Lb[Ie]=he(je)?te(je,6):0}if(Te.Bb)for(Ie=0;3>Ie;++Ie)Fe.jb[Ie]=he(je)?Z(je,8):255}else Te.Bb=0;if(je.Ka)return ma(_,3,"cannot parse segment header");if((Te=_.ed).zd=he(je),Te.Tb=Z(je,6),Te.wb=Z(je,3),Te.Pc=he(je),Te.Pc&&he(je)){for(Fe=0;4>Fe;++Fe)he(je)&&(Te.vd[Fe]=te(je,6));for(Fe=0;4>Fe;++Fe)he(je)&&(Te.od[Fe]=te(je,6))}if(_.L=Te.Tb==0?0:Te.zd?1:2,je.Ka)return ma(_,3,"cannot parse filter header");var Qe=xe;if(xe=Ie=oe,oe=Ie+Qe,Te=Qe,_.Xb=(1<<Z(_.m,2))-1,Qe<3*(Fe=_.Xb))J=7;else{for(Ie+=3*Fe,Te-=3*Fe,Qe=0;Qe<Fe;++Qe){var gt=J[xe+0]|J[xe+1]<<8|J[xe+2]<<16;gt>Te&&(gt=Te),G(_.Jc[+Qe],J,Ie,gt),Ie+=gt,Te-=gt,xe+=3}G(_.Jc[+Fe],J,Ie,Te),J=Ie<oe?0:5}if(J!=0)return ma(_,J,"cannot parse partitions");for(J=Z(Ie=_.m,7),xe=he(Ie)?te(Ie,4):0,oe=he(Ie)?te(Ie,4):0,Te=he(Ie)?te(Ie,4):0,Fe=he(Ie)?te(Ie,4):0,Ie=he(Ie)?te(Ie,4):0,Qe=_.Qa,gt=0;4>gt;++gt){if(Qe.Cb){var dt=Qe.Zb[gt];Qe.Fb||(dt+=J)}else{if(0<gt){_.pb[gt]=_.pb[0];continue}dt=J}var st=_.pb[gt];st.Sc[0]=Rc[li(dt+xe,127)],st.Sc[1]=il[li(dt+0,127)],st.Eb[0]=2*Rc[li(dt+oe,127)],st.Eb[1]=101581*il[li(dt+Te,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=Rc[li(dt+Fe,117)],st.Qc[1]=il[li(dt+Ie,127)],st.lc=dt+Ie}if(!Se.Rb)return ma(_,4,"Not a key frame.");for(he(je),Se=_.Pa,J=0;4>J;++J){for(xe=0;8>xe;++xe)for(oe=0;3>oe;++oe)for(Te=0;11>Te;++Te)Fe=ie(je,sm[J][xe][oe][Te])?Z(je,8):bu[J][xe][oe][Te],Se.Wc[J][xe].Yb[oe][Te]=Fe;for(xe=0;17>xe;++xe)Se.Xc[J][xe]=Se.Wc[J][td[xe]]}return _.kc=he(je),_.kc&&(_.Bd=Z(je,8)),_.cb=1}function qe(_,F,J,oe,xe,je,Se){var Te=F[xe].Yb[J];for(J=0;16>xe;++xe){if(!ie(_,Te[J+0]))return xe;for(;!ie(_,Te[J+1]);)if(Te=F[++xe].Yb[0],J=0,xe==16)return 16;var Ie=F[xe+1].Yb;if(ie(_,Te[J+2])){var Fe=_,Qe=0;if(ie(Fe,(dt=Te)[(gt=J)+3]))if(ie(Fe,dt[gt+6])){for(Te=0,gt=2*(Qe=ie(Fe,dt[gt+8]))+(dt=ie(Fe,dt[gt+9+Qe])),Qe=0,dt=_f[gt];dt[Te];++Te)Qe+=Qe+ie(Fe,dt[Te]);Qe+=3+(8<<gt)}else ie(Fe,dt[gt+7])?(Qe=7+2*ie(Fe,165),Qe+=ie(Fe,145)):Qe=5+ie(Fe,159);else Qe=ie(Fe,dt[gt+4])?3+ie(Fe,dt[gt+5]):2;Te=Ie[2]}else Qe=1,Te=Ie[1];Ie=Se+ed[xe],0>(Fe=_).b&&le(Fe);var gt,dt=Fe.b,st=(gt=Fe.Ca>>1)-(Fe.I>>dt)>>31;--Fe.b,Fe.Ca+=st,Fe.Ca|=1,Fe.I-=(gt+1&st)<<dt,je[Ie]=((Qe^st)-st)*oe[(0<xe)+0]}return 16}function It(_){var F=_.rb[_.sb-1];F.la=0,F.Na=0,s(_.zc,0,0,_.zc.length),_.ja=0}function Ct(_,F){if(_==null)return 0;if(F==null)return ma(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Ta(_,F))return 0;if(t(_.cb),F.ac==null||F.ac(F)){F.ob&&(_.L=0);var J=ol[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=F.v-J>>4,_.zb=F.j-J>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=F.o+15+J>>4,_.Hb=F.va+15+J>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var oe=_.ed;for(J=0;4>J;++J){var xe;if(_.Qa.Cb){var je=_.Qa.Lb[J];_.Qa.Fb||(je+=oe.Tb)}else je=oe.Tb;for(xe=0;1>=xe;++xe){var Se=_.gd[J][xe],Te=je;if(oe.Pc&&(Te+=oe.vd[0],xe&&(Te+=oe.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Ie=Te;0<oe.wb&&(Ie=4<oe.wb?Ie>>2:Ie>>1)>9-oe.wb&&(Ie=9-oe.wb),1>Ie&&(Ie=1),Se.dd=Ie,Se.tc=2*Te+Ie,Se.ld=40<=Te?2:15<=Te?1:0}else Se.tc=0;Se.La=xe}}}J=0}else ma(_,6,"Frame setup failed"),J=_.a;if(J=J==0){if(J){_.$c=0,0<_.Aa||(_.Ic=Ci);e:{J=_.Ic,oe=4*(Ie=_.za);var Fe=32*Ie,Qe=Ie+1,gt=0<_.L?Ie*(0<_.Aa?2:1):0,dt=(_.Aa==2?2:1)*Ie;if((Se=oe+832+(xe=3*(16*J+ol[_.L])/2*Fe)+(je=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=Se)J=0;else{if(Se>_.Vb){if(_.Vb=0,_.Ec=i(Se),_.Fc=0,_.Ec==null){J=ma(_,1,"no memory during frame initialization.");break e}_.Vb=Se}Se=_.Ec,Te=_.Fc,_.Ac=Se,_.Bc=Te,Te+=oe,_.Gd=o(Fe,wa),_.Hd=0,_.rb=o(Qe+1,on),_.sb=1,_.wa=gt?o(gt,zr):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=Ie),t(!0),_.oc=Se,_.pc=Te,Te+=832,_.ya=o(dt,ps),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=Ie),_.R=16*Ie,_.B=8*Ie,Ie=(Fe=ol[_.L])*_.R,Fe=Fe/2*_.B,_.sa=Se,_.ta=Te+Ie,_.qa=_.sa,_.ra=_.ta+16*J*_.R+Fe,_.Ha=_.qa,_.Ia=_.ra+8*J*_.B+Fe,_.$c=0,Te+=xe,_.mb=je?Se:null,_.nb=je?Te:null,t(Te+je<=_.Fc+_.Vb),It(_),s(_.Ac,_.Bc,0,oe),J=1}}if(J){if(F.ka=0,F.y=_.sa,F.O=_.ta,F.f=_.qa,F.N=_.ra,F.ea=_.Ha,F.Vd=_.Ia,F.fa=_.R,F.Rc=_.B,F.F=null,F.J=0,!Rd){for(J=-255;255>=J;++J)Za[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)al[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)Xu[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)Pc[255+J]=0>J?0:255<J?255:J;Rd=1}tl=Ar,di=In,$i=nr,Qa=xr,Ms=Dt,_n=kn,rl=El,Md=vs,Dl=yo,so=Tl,Zl=Ko,zi=Cc,Da=Xo,Si=pu,nl=Go,ec=ki,io=ro,ks=Ac,hi[0]=ms,hi[1]=Gn,hi[2]=En,hi[3]=Kn,hi[4]=Be,hi[5]=Tr,hi[6]=gr,hi[7]=kr,hi[8]=$n,hi[9]=Jr,_i[0]=un,_i[1]=cn,_i[2]=er,_i[3]=Sn,_i[4]=gn,_i[5]=$r,_i[6]=Gr,Ai[0]=oi,Ai[1]=Rn,Ai[2]=xs,Ai[3]=us,Ai[4]=Sc,Ai[5]=kc,Ai[6]=Ld,J=1}else J=0}J&&(J=(function(st,qt){for(st.M=0;st.M<st.Va;++st.M){var At,Ye=st.Jc[st.M&st.Xb],et=st.m,Et=st;for(At=0;At<Et.za;++At){var Tt=et,Lt=Et,yr=Lt.Ac,cr=Lt.Bc+4*At,qr=Lt.zc,dr=Lt.ya[Lt.aa+At];if(Lt.Qa.Bb?dr.$b=ie(Tt,Lt.Pa.jb[0])?2+ie(Tt,Lt.Pa.jb[2]):ie(Tt,Lt.Pa.jb[1]):dr.$b=0,Lt.kc&&(dr.Ad=ie(Tt,Lt.Bd)),dr.Za=!ie(Tt,145)+0,dr.Za){var Bn=dr.Ob,zn=0;for(Lt=0;4>Lt;++Lt){var Nn,dn=qr[0+Lt];for(Nn=0;4>Nn;++Nn){dn=am[yr[cr+Nn]][dn];for(var ta=_h[ie(Tt,dn[0])];0<ta;)ta=_h[2*ta+ie(Tt,dn[ta])];dn=-ta,yr[cr+Nn]=dn}n(Bn,zn,yr,cr,4),zn+=4,qr[0+Lt]=dn}}else dn=ie(Tt,156)?ie(Tt,128)?1:3:ie(Tt,163)?2:0,dr.Ob[0]=dn,s(yr,cr,dn,4),s(qr,0,dn,4);dr.Dd=ie(Tt,142)?ie(Tt,114)?ie(Tt,183)?1:3:2:0}if(Et.m.Ka)return ma(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(Et=Ye,Tt=(et=st).rb[et.sb-1],yr=et.rb[et.sb+et.ja],At=et.ya[et.aa+et.ja],cr=et.kc?At.Ad:0)Tt.la=yr.la=0,At.Za||(Tt.Na=yr.Na=0),At.Hc=0,At.Gc=0,At.ia=0;else{var Un,Xr;if(Tt=yr,yr=Et,cr=et.Pa.Xc,qr=et.ya[et.aa+et.ja],dr=et.pb[qr.$b],Lt=qr.ad,Bn=0,zn=et.rb[et.sb-1],dn=Nn=0,s(Lt,Bn,0,384),qr.Za)var La=0,Ei=cr[3];else{ta=i(16);var es=Tt.Na+zn.Na;if(es=Bc(yr,cr[1],es,dr.Eb,0,ta,0),Tt.Na=zn.Na=(0<es)+0,1<es)tl(ta,0,Lt,Bn);else{var ts=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)Lt[Bn+ta]=ts}La=1,Ei=cr[0]}var An=15&Tt.la,pi=15&zn.la;for(ta=0;4>ta;++ta){var _s=1&pi;for(ts=Xr=0;4>ts;++ts)An=An>>1|(_s=(es=Bc(yr,Ei,es=_s+(1&An),dr.Sc,La,Lt,Bn))>La)<<7,Xr=Xr<<2|(3<es?3:1<es?2:Lt[Bn+0]!=0),Bn+=16;An>>=4,pi=pi>>1|_s<<7,Nn=(Nn<<8|Xr)>>>0}for(Ei=An,La=pi>>4,Un=0;4>Un;Un+=2){for(Xr=0,An=Tt.la>>4+Un,pi=zn.la>>4+Un,ta=0;2>ta;++ta){for(_s=1&pi,ts=0;2>ts;++ts)es=_s+(1&An),An=An>>1|(_s=0<(es=Bc(yr,cr[2],es,dr.Qc,0,Lt,Bn)))<<3,Xr=Xr<<2|(3<es?3:1<es?2:Lt[Bn+0]!=0),Bn+=16;An>>=2,pi=pi>>1|_s<<5}dn|=Xr<<4*Un,Ei|=An<<4<<Un,La|=(240&pi)<<Un}Tt.la=Ei,zn.la=La,qr.Hc=Nn,qr.Gc=dn,qr.ia=43690&dn?0:dr.ia,cr=!(Nn|dn)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[At.$b][At.Za],et.wa[et.Y+et.ja].La|=!cr),Et.Ka)return ma(st,7,"Premature end-of-file encountered.")}if(It(st),et=qt,Et=1,At=(Ye=st).D,Tt=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)e:{if(At.M=Ye.M,At.uc=Tt,Tc(Ye,At),Et=1,At=(Xr=Ye.D).Nb,Tt=(dn=ol[Ye.L])*Ye.R,yr=dn/2*Ye.B,ta=16*At*Ye.R,ts=8*At*Ye.B,cr=Ye.sa,qr=Ye.ta-Tt+ta,dr=Ye.qa,Lt=Ye.ra-yr+ts,Bn=Ye.Ha,zn=Ye.Ia-yr+ts,pi=(An=Xr.M)==0,Nn=An>=Ye.Va-1,Ye.Aa==2&&Tc(Ye,Xr),Xr.uc)for(_s=(es=Ye).D.M,t(es.D.uc),Xr=es.yb;Xr<es.Hb;++Xr){La=Xr,Ei=_s;var Fa=(As=(Zn=es).D).Nb;Un=Zn.R;var As=As.wa[As.Y+La],fs=Zn.sa,Ys=Zn.ta+16*Fa*Un+16*La,ko=As.dd,Ma=As.tc;if(Ma!=0)if(t(3<=Ma),Zn.L==1)0<La&&ec(fs,Ys,Un,Ma+4),As.La&&ks(fs,Ys,Un,Ma),0<Ei&&nl(fs,Ys,Un,Ma+4),As.La&&io(fs,Ys,Un,Ma);else{var Wa=Zn.B,Wi=Zn.qa,sc=Zn.ra+8*Fa*Wa+8*La,ic=Zn.Ha,Zn=Zn.Ia+8*Fa*Wa+8*La;Fa=As.ld,0<La&&(Md(fs,Ys,Un,Ma+4,ko,Fa),so(Wi,sc,ic,Zn,Wa,Ma+4,ko,Fa)),As.La&&(zi(fs,Ys,Un,Ma,ko,Fa),Si(Wi,sc,ic,Zn,Wa,Ma,ko,Fa)),0<Ei&&(rl(fs,Ys,Un,Ma+4,ko,Fa),Dl(Wi,sc,ic,Zn,Wa,Ma+4,ko,Fa)),As.La&&(Zl(fs,Ys,Un,Ma,ko,Fa),Da(Wi,sc,ic,Zn,Wa,Ma,ko,Fa))}}if(Ye.ia&&alert("todo:DitherRow"),et.put!=null){if(Xr=16*An,An=16*(An+1),pi?(et.y=Ye.sa,et.O=Ye.ta+ta,et.f=Ye.qa,et.N=Ye.ra+ts,et.ea=Ye.Ha,et.W=Ye.Ia+ts):(Xr-=dn,et.y=cr,et.O=qr,et.f=dr,et.N=Lt,et.ea=Bn,et.W=zn),Nn||(An-=dn),An>et.o&&(An=et.o),et.F=null,et.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&Xr<An&&(et.J=kf(Ye,et,Xr,An-Xr),et.F=Ye.mb,et.F==null&&et.F.length==0)){Et=ma(Ye,3,"Could not decode alpha data.");break e}Xr<et.j&&(dn=et.j-Xr,Xr=et.j,t(!(1&dn)),et.O+=Ye.R*dn,et.N+=Ye.B*(dn>>1),et.W+=Ye.B*(dn>>1),et.F!=null&&(et.J+=et.width*dn)),Xr<An&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=Xr-et.j,et.U=et.va-et.v,et.T=An-Xr,Et=et.put(et))}At+1!=Ye.Ic||Nn||(n(Ye.sa,Ye.ta-Tt,cr,qr+16*Ye.R,Tt),n(Ye.qa,Ye.ra-yr,dr,Lt+8*Ye.B,yr),n(Ye.Ha,Ye.Ia-yr,Bn,zn+8*Ye.B,yr))}if(!Et)return ma(st,6,"Output aborted.")}return 1})(_,F)),F.bc!=null&&F.bc(F),J&=1}return J?(_.cb=0,J):0}function sr(_,F,J,oe,xe){xe=_[F+J+32*oe]+(xe>>3),_[F+J+32*oe]=-256&xe?0>xe?0:255:xe}function Nr(_,F,J,oe,xe,je){sr(_,F,0,J,oe+xe),sr(_,F,1,J,oe+je),sr(_,F,2,J,oe-je),sr(_,F,3,J,oe-xe)}function mr(_){return(20091*_>>16)+_}function _r(_,F,J,oe){var xe,je=0,Se=i(16);for(xe=0;4>xe;++xe){var Te=_[F+0]+_[F+8],Ie=_[F+0]-_[F+8],Fe=(35468*_[F+4]>>16)-mr(_[F+12]),Qe=mr(_[F+4])+(35468*_[F+12]>>16);Se[je+0]=Te+Qe,Se[je+1]=Ie+Fe,Se[je+2]=Ie-Fe,Se[je+3]=Te-Qe,je+=4,F++}for(xe=je=0;4>xe;++xe)Te=(_=Se[je+0]+4)+Se[je+8],Ie=_-Se[je+8],Fe=(35468*Se[je+4]>>16)-mr(Se[je+12]),sr(J,oe,0,0,Te+(Qe=mr(Se[je+4])+(35468*Se[je+12]>>16))),sr(J,oe,1,0,Ie+Fe),sr(J,oe,2,0,Ie-Fe),sr(J,oe,3,0,Te-Qe),je++,oe+=32}function kn(_,F,J,oe){var xe=_[F+0]+4,je=35468*_[F+4]>>16,Se=mr(_[F+4]),Te=35468*_[F+1]>>16;Nr(J,oe,0,xe+Se,_=mr(_[F+1]),Te),Nr(J,oe,1,xe+je,_,Te),Nr(J,oe,2,xe-je,_,Te),Nr(J,oe,3,xe-Se,_,Te)}function In(_,F,J,oe,xe){_r(_,F,J,oe),xe&&_r(_,F+16,J,oe+4)}function nr(_,F,J,oe){di(_,F+0,J,oe,1),di(_,F+32,J,oe+128,1)}function xr(_,F,J,oe){var xe;for(_=_[F+0]+4,xe=0;4>xe;++xe)for(F=0;4>F;++F)sr(J,oe,F,xe,_)}function Dt(_,F,J,oe){_[F+0]&&Qa(_,F+0,J,oe),_[F+16]&&Qa(_,F+16,J,oe+4),_[F+32]&&Qa(_,F+32,J,oe+128),_[F+48]&&Qa(_,F+48,J,oe+128+4)}function Ar(_,F,J,oe){var xe,je=i(16);for(xe=0;4>xe;++xe){var Se=_[F+0+xe]+_[F+12+xe],Te=_[F+4+xe]+_[F+8+xe],Ie=_[F+4+xe]-_[F+8+xe],Fe=_[F+0+xe]-_[F+12+xe];je[0+xe]=Se+Te,je[8+xe]=Se-Te,je[4+xe]=Fe+Ie,je[12+xe]=Fe-Ie}for(xe=0;4>xe;++xe)Se=(_=je[0+4*xe]+3)+je[3+4*xe],Te=je[1+4*xe]+je[2+4*xe],Ie=je[1+4*xe]-je[2+4*xe],Fe=_-je[3+4*xe],J[oe+0]=Se+Te>>3,J[oe+16]=Fe+Ie>>3,J[oe+32]=Se-Te>>3,J[oe+48]=Fe-Ie>>3,oe+=64}function Ht(_,F,J){var oe,xe=F-32,je=Gs,Se=255-_[xe-1];for(oe=0;oe<J;++oe){var Te,Ie=je,Fe=Se+_[F-1];for(Te=0;Te<J;++Te)_[F+Te]=Ie[Fe+_[xe+Te]];F+=32}}function Gn(_,F){Ht(_,F,4)}function Rn(_,F){Ht(_,F,8)}function cn(_,F){Ht(_,F,16)}function er(_,F){var J;for(J=0;16>J;++J)n(_,F+32*J,_,F-32,16)}function Sn(_,F){var J;for(J=16;0<J;--J)s(_,F,_[F-1],16),F+=32}function Na(_,F,J){var oe;for(oe=0;16>oe;++oe)s(F,J+32*oe,_,16)}function un(_,F){var J,oe=16;for(J=0;16>J;++J)oe+=_[F-1+32*J]+_[F+J-32];Na(oe>>5,_,F)}function gn(_,F){var J,oe=8;for(J=0;16>J;++J)oe+=_[F-1+32*J];Na(oe>>4,_,F)}function $r(_,F){var J,oe=8;for(J=0;16>J;++J)oe+=_[F+J-32];Na(oe>>4,_,F)}function Gr(_,F){Na(128,_,F)}function Wt(_,F,J){return _+2*F+J+2>>2}function En(_,F){var J,oe=F-32;for(oe=new Uint8Array([Wt(_[oe-1],_[oe+0],_[oe+1]),Wt(_[oe+0],_[oe+1],_[oe+2]),Wt(_[oe+1],_[oe+2],_[oe+3]),Wt(_[oe+2],_[oe+3],_[oe+4])]),J=0;4>J;++J)n(_,F+32*J,oe,0,oe.length)}function Kn(_,F){var J=_[F-1],oe=_[F-1+32],xe=_[F-1+64],je=_[F-1+96];ce(_,F+0,16843009*Wt(_[F-1-32],J,oe)),ce(_,F+32,16843009*Wt(J,oe,xe)),ce(_,F+64,16843009*Wt(oe,xe,je)),ce(_,F+96,16843009*Wt(xe,je,je))}function ms(_,F){var J,oe=4;for(J=0;4>J;++J)oe+=_[F+J-32]+_[F-1+32*J];for(oe>>=3,J=0;4>J;++J)s(_,F+32*J,oe,4)}function Be(_,F){var J=_[F-1+0],oe=_[F-1+32],xe=_[F-1+64],je=_[F-1-32],Se=_[F+0-32],Te=_[F+1-32],Ie=_[F+2-32],Fe=_[F+3-32];_[F+0+96]=Wt(oe,xe,_[F-1+96]),_[F+1+96]=_[F+0+64]=Wt(J,oe,xe),_[F+2+96]=_[F+1+64]=_[F+0+32]=Wt(je,J,oe),_[F+3+96]=_[F+2+64]=_[F+1+32]=_[F+0+0]=Wt(Se,je,J),_[F+3+64]=_[F+2+32]=_[F+1+0]=Wt(Te,Se,je),_[F+3+32]=_[F+2+0]=Wt(Ie,Te,Se),_[F+3+0]=Wt(Fe,Ie,Te)}function gr(_,F){var J=_[F+1-32],oe=_[F+2-32],xe=_[F+3-32],je=_[F+4-32],Se=_[F+5-32],Te=_[F+6-32],Ie=_[F+7-32];_[F+0+0]=Wt(_[F+0-32],J,oe),_[F+1+0]=_[F+0+32]=Wt(J,oe,xe),_[F+2+0]=_[F+1+32]=_[F+0+64]=Wt(oe,xe,je),_[F+3+0]=_[F+2+32]=_[F+1+64]=_[F+0+96]=Wt(xe,je,Se),_[F+3+32]=_[F+2+64]=_[F+1+96]=Wt(je,Se,Te),_[F+3+64]=_[F+2+96]=Wt(Se,Te,Ie),_[F+3+96]=Wt(Te,Ie,Ie)}function Tr(_,F){var J=_[F-1+0],oe=_[F-1+32],xe=_[F-1+64],je=_[F-1-32],Se=_[F+0-32],Te=_[F+1-32],Ie=_[F+2-32],Fe=_[F+3-32];_[F+0+0]=_[F+1+64]=je+Se+1>>1,_[F+1+0]=_[F+2+64]=Se+Te+1>>1,_[F+2+0]=_[F+3+64]=Te+Ie+1>>1,_[F+3+0]=Ie+Fe+1>>1,_[F+0+96]=Wt(xe,oe,J),_[F+0+64]=Wt(oe,J,je),_[F+0+32]=_[F+1+96]=Wt(J,je,Se),_[F+1+32]=_[F+2+96]=Wt(je,Se,Te),_[F+2+32]=_[F+3+96]=Wt(Se,Te,Ie),_[F+3+32]=Wt(Te,Ie,Fe)}function kr(_,F){var J=_[F+0-32],oe=_[F+1-32],xe=_[F+2-32],je=_[F+3-32],Se=_[F+4-32],Te=_[F+5-32],Ie=_[F+6-32],Fe=_[F+7-32];_[F+0+0]=J+oe+1>>1,_[F+1+0]=_[F+0+64]=oe+xe+1>>1,_[F+2+0]=_[F+1+64]=xe+je+1>>1,_[F+3+0]=_[F+2+64]=je+Se+1>>1,_[F+0+32]=Wt(J,oe,xe),_[F+1+32]=_[F+0+96]=Wt(oe,xe,je),_[F+2+32]=_[F+1+96]=Wt(xe,je,Se),_[F+3+32]=_[F+2+96]=Wt(je,Se,Te),_[F+3+64]=Wt(Se,Te,Ie),_[F+3+96]=Wt(Te,Ie,Fe)}function Jr(_,F){var J=_[F-1+0],oe=_[F-1+32],xe=_[F-1+64],je=_[F-1+96];_[F+0+0]=J+oe+1>>1,_[F+2+0]=_[F+0+32]=oe+xe+1>>1,_[F+2+32]=_[F+0+64]=xe+je+1>>1,_[F+1+0]=Wt(J,oe,xe),_[F+3+0]=_[F+1+32]=Wt(oe,xe,je),_[F+3+32]=_[F+1+64]=Wt(xe,je,je),_[F+3+64]=_[F+2+64]=_[F+0+96]=_[F+1+96]=_[F+2+96]=_[F+3+96]=je}function $n(_,F){var J=_[F-1+0],oe=_[F-1+32],xe=_[F-1+64],je=_[F-1+96],Se=_[F-1-32],Te=_[F+0-32],Ie=_[F+1-32],Fe=_[F+2-32];_[F+0+0]=_[F+2+32]=J+Se+1>>1,_[F+0+32]=_[F+2+64]=oe+J+1>>1,_[F+0+64]=_[F+2+96]=xe+oe+1>>1,_[F+0+96]=je+xe+1>>1,_[F+3+0]=Wt(Te,Ie,Fe),_[F+2+0]=Wt(Se,Te,Ie),_[F+1+0]=_[F+3+32]=Wt(J,Se,Te),_[F+1+32]=_[F+3+64]=Wt(oe,J,Se),_[F+1+64]=_[F+3+96]=Wt(xe,oe,J),_[F+1+96]=Wt(je,xe,oe)}function xs(_,F){var J;for(J=0;8>J;++J)n(_,F+32*J,_,F-32,8)}function us(_,F){var J;for(J=0;8>J;++J)s(_,F,_[F-1],8),F+=32}function Ds(_,F,J){var oe;for(oe=0;8>oe;++oe)s(F,J+32*oe,_,8)}function oi(_,F){var J,oe=8;for(J=0;8>J;++J)oe+=_[F+J-32]+_[F-1+32*J];Ds(oe>>4,_,F)}function kc(_,F){var J,oe=4;for(J=0;8>J;++J)oe+=_[F+J-32];Ds(oe>>3,_,F)}function Sc(_,F){var J,oe=4;for(J=0;8>J;++J)oe+=_[F-1+32*J];Ds(oe>>3,_,F)}function Ld(_,F){Ds(128,_,F)}function Cl(_,F,J){var oe=_[F-J],xe=_[F+0],je=3*(xe-oe)+sl[1020+_[F-2*J]-_[F+J]],Se=Yu[112+(je+4>>3)];_[F-J]=Gs[255+oe+Yu[112+(je+3>>3)]],_[F+0]=Gs[255+xe-Se]}function Yl(_,F,J,oe){var xe=_[F+0],je=_[F+J];return wo[255+_[F-2*J]-_[F-J]]>oe||wo[255+je-xe]>oe}function _c(_,F,J,oe){return 4*wo[255+_[F-J]-_[F+0]]+wo[255+_[F-2*J]-_[F+J]]<=oe}function hu(_,F,J,oe,xe){var je=_[F-3*J],Se=_[F-2*J],Te=_[F-J],Ie=_[F+0],Fe=_[F+J],Qe=_[F+2*J],gt=_[F+3*J];return 4*wo[255+Te-Ie]+wo[255+Se-Fe]>oe?0:wo[255+_[F-4*J]-je]<=xe&&wo[255+je-Se]<=xe&&wo[255+Se-Te]<=xe&&wo[255+gt-Qe]<=xe&&wo[255+Qe-Fe]<=xe&&wo[255+Fe-Ie]<=xe}function Go(_,F,J,oe){var xe=2*oe+1;for(oe=0;16>oe;++oe)_c(_,F+oe,J,xe)&&Cl(_,F+oe,J)}function ki(_,F,J,oe){var xe=2*oe+1;for(oe=0;16>oe;++oe)_c(_,F+oe*J,1,xe)&&Cl(_,F+oe*J,1)}function ro(_,F,J,oe){var xe;for(xe=3;0<xe;--xe)Go(_,F+=4*J,J,oe)}function Ac(_,F,J,oe){var xe;for(xe=3;0<xe;--xe)ki(_,F+=4,J,oe)}function vo(_,F,J,oe,xe,je,Se,Te){for(je=2*je+1;0<xe--;){if(hu(_,F,J,je,Se))if(Yl(_,F,J,Te))Cl(_,F,J);else{var Ie=_,Fe=F,Qe=J,gt=Ie[Fe-2*Qe],dt=Ie[Fe-Qe],st=Ie[Fe+0],qt=Ie[Fe+Qe],At=Ie[Fe+2*Qe],Ye=27*(Et=sl[1020+3*(st-dt)+sl[1020+gt-qt]])+63>>7,et=18*Et+63>>7,Et=9*Et+63>>7;Ie[Fe-3*Qe]=Gs[255+Ie[Fe-3*Qe]+Et],Ie[Fe-2*Qe]=Gs[255+gt+et],Ie[Fe-Qe]=Gs[255+dt+Ye],Ie[Fe+0]=Gs[255+st-Ye],Ie[Fe+Qe]=Gs[255+qt-et],Ie[Fe+2*Qe]=Gs[255+At-Et]}F+=oe}}function gs(_,F,J,oe,xe,je,Se,Te){for(je=2*je+1;0<xe--;){if(hu(_,F,J,je,Se))if(Yl(_,F,J,Te))Cl(_,F,J);else{var Ie=_,Fe=F,Qe=J,gt=Ie[Fe-Qe],dt=Ie[Fe+0],st=Ie[Fe+Qe],qt=Yu[112+((At=3*(dt-gt))+4>>3)],At=Yu[112+(At+3>>3)],Ye=qt+1>>1;Ie[Fe-2*Qe]=Gs[255+Ie[Fe-2*Qe]+Ye],Ie[Fe-Qe]=Gs[255+gt+At],Ie[Fe+0]=Gs[255+dt-qt],Ie[Fe+Qe]=Gs[255+st-Ye]}F+=oe}}function El(_,F,J,oe,xe,je){vo(_,F,J,1,16,oe,xe,je)}function vs(_,F,J,oe,xe,je){vo(_,F,1,J,16,oe,xe,je)}function Ko(_,F,J,oe,xe,je){var Se;for(Se=3;0<Se;--Se)gs(_,F+=4*J,J,1,16,oe,xe,je)}function Cc(_,F,J,oe,xe,je){var Se;for(Se=3;0<Se;--Se)gs(_,F+=4,1,J,16,oe,xe,je)}function yo(_,F,J,oe,xe,je,Se,Te){vo(_,F,xe,1,8,je,Se,Te),vo(J,oe,xe,1,8,je,Se,Te)}function Tl(_,F,J,oe,xe,je,Se,Te){vo(_,F,1,xe,8,je,Se,Te),vo(J,oe,1,xe,8,je,Se,Te)}function Xo(_,F,J,oe,xe,je,Se,Te){gs(_,F+4*xe,xe,1,8,je,Se,Te),gs(J,oe+4*xe,xe,1,8,je,Se,Te)}function pu(_,F,J,oe,xe,je,Se,Te){gs(_,F+4,1,xe,8,je,Se,Te),gs(J,oe+4,1,xe,8,je,Se,Te)}function Yo(){this.ba=new Fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ec(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xa(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new E}function w0(){this.xb=this.a=0,this.l=new pa,this.ca=new Fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xa,this.ab=0,this.gc=o(4,Ec),this.Oc=0}function mu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ol(_,F,J,oe,xe,je,Se){for(_=_==null?0:_[F+0],F=0;F<Se;++F)xe[je+F]=_+J[oe+F]&255,_=xe[je+F]}function xu(_,F,J,oe,xe,je,Se){var Te;if(_==null)Ol(null,null,J,oe,xe,je,Se);else for(Te=0;Te<Se;++Te)xe[je+Te]=_[F+Te]+J[oe+Te]&255}function no(_,F,J,oe,xe,je,Se){if(_==null)Ol(null,null,J,oe,xe,je,Se);else{var Te,Ie=_[F+0],Fe=Ie,Qe=Ie;for(Te=0;Te<Se;++Te)Fe=Qe+(Ie=_[F+Te])-Fe,Qe=J[oe+Te]+(-256&Fe?0>Fe?0:255:Fe)&255,Fe=Ie,xe[je+Te]=Qe}}function kf(_,F,J,oe){var xe=F.width,je=F.o;if(t(_!=null&&F!=null),0>J||0>=oe||J+oe>je)return null;if(!_.Cc){if(_.ga==null){var Se;if(_.ga=new mu,(Se=_.ga==null)||(Se=F.width*F.o,t(_.Gb.length==0),_.Gb=i(Se),_.Uc=0,_.Gb==null?Se=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,Se=1),Se=!Se),!Se){Se=_.ga;var Te=_.Fa,Ie=_.P,Fe=_.qc,Qe=_.mb,gt=_.nb,dt=Ie+1,st=Fe-1,qt=Se.l;if(t(Te!=null&&Qe!=null&&F!=null),Ss[0]=null,Ss[1]=Ol,Ss[2]=xu,Ss[3]=no,Se.ca=Qe,Se.tb=gt,Se.c=F.width,Se.i=F.height,t(0<Se.c&&0<Se.i),1>=Fe)F=0;else if(Se.$a=Te[Ie+0]>>0&3,Se.Z=Te[Ie+0]>>2&3,Se.Lc=Te[Ie+0]>>4&3,Ie=Te[Ie+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Ie)F=0;else if(qt.put=sn,qt.ac=Yr,qt.bc=Wn,qt.ma=Se,qt.width=F.width,qt.height=F.height,qt.Da=F.Da,qt.v=F.v,qt.va=F.va,qt.j=F.j,qt.o=F.o,Se.$a)e:{t(Se.$a==1),F=ct();t:for(;;){if(F==null){F=0;break e}if(t(Se!=null),Se.mc=F,F.c=Se.c,F.i=Se.i,F.l=Se.l,F.l.ma=Se,F.l.width=Se.c,F.l.height=Se.i,F.a=0,ae(F.m,Te,dt,st),!Ve(Se.c,Se.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&be(F.s)?(Se.ic=1,Te=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Te),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(Se.ic=0,F=Je(F,Se.c)),!F))break t;F=1;break e}Se.mc=null,F=0}else F=st>=Se.c*Se.i;Se=!F}if(Se)return null;_.ga.Lc!=1?_.Ga=0:oe=je-J}t(_.ga!=null),t(J+oe<=je);e:{if(F=(Te=_.ga).c,je=Te.l.o,Te.$a==0){if(dt=_.rc,st=_.Vc,qt=_.Fa,Ie=_.P+1+J*F,Fe=_.mb,Qe=_.nb+J*F,t(Ie<=_.P+_.qc),Te.Z!=0)for(t(Ss[Te.Z]!=null),Se=0;Se<oe;++Se)Ss[Te.Z](dt,st,qt,Ie,Fe,Qe,F),dt=Fe,st=Qe,Qe+=F,Ie+=F;else for(Se=0;Se<oe;++Se)n(Fe,Qe,qt,Ie,F),dt=Fe,st=Qe,Qe+=F,Ie+=F;_.rc=dt,_.Vc=st}else{if(t(Te.mc!=null),F=J+oe,t((Se=Te.mc)!=null),t(F<=Se.i),Se.C>=F)F=1;else if(Te.ic||pt(),Te.ic){Te=Se.V,dt=Se.Ba,st=Se.c;var At=Se.i,Ye=(qt=1,Ie=Se.$/st,Fe=Se.$%st,Qe=Se.m,gt=Se.s,Se.$),et=st*At,Et=st*F,Tt=gt.wc,Lt=Ye<Et?Vt(gt,Fe,Ie):null;t(Ye<=et),t(F<=At),t(be(gt));t:for(;;){for(;!Qe.h&&Ye<Et;){if(Fe&Tt||(Lt=Vt(gt,Fe,Ie)),t(Lt!=null),K(Qe),256>(At=Ke(Lt.G[0],Lt.H[0],Qe)))Te[dt+Ye]=At,++Ye,++Fe>=st&&(Fe=0,++Ie<=F&&!(Ie%16)&&Ee(Se,Ie));else{if(!(280>At)){qt=0;break t}At=Vn(At-256,Qe);var yr,cr=Ke(Lt.G[4],Lt.H[4],Qe);if(K(Qe),!(Ye>=(cr=fn(st,cr=Vn(cr,Qe)))&&et-Ye>=At)){qt=0;break t}for(yr=0;yr<At;++yr)Te[dt+Ye+yr]=Te[dt+Ye+yr-cr];for(Ye+=At,Fe+=At;Fe>=st;)Fe-=st,++Ie<=F&&!(Ie%16)&&Ee(Se,Ie);Ye<Et&&Fe&Tt&&(Lt=Vt(gt,Fe,Ie))}t(Qe.h==H(Qe))}Ee(Se,Ie>F?F:Ie);break t}!qt||Qe.h&&Ye<et?(qt=0,Se.a=Qe.h?5:3):Se.$=Ye,F=qt}else F=Oe(Se,Se.V,Se.Ba,Se.c,Se.i,F,He);if(!F){oe=0;break e}}J+oe>=je&&(_.Cc=1),oe=1}if(!oe)return null;if(_.Cc&&((oe=_.ga)!=null&&(oe.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+J*xe}function V(_,F,J,oe,xe,je){for(;0<xe--;){var Se,Te=_,Ie=F+(J?1:0),Fe=_,Qe=F+(J?0:3);for(Se=0;Se<oe;++Se){var gt=Fe[Qe+4*Se];gt!=255&&(gt*=32897,Te[Ie+4*Se+0]=Te[Ie+4*Se+0]*gt>>23,Te[Ie+4*Se+1]=Te[Ie+4*Se+1]*gt>>23,Te[Ie+4*Se+2]=Te[Ie+4*Se+2]*gt>>23)}F+=je}}function we(_,F,J,oe,xe){for(;0<oe--;){var je;for(je=0;je<J;++je){var Se=_[F+2*je+0],Te=15&(Fe=_[F+2*je+1]),Ie=4369*Te,Fe=(240&Fe|Fe>>4)*Ie>>16;_[F+2*je+0]=(240&Se|Se>>4)*Ie>>16&240|(15&Se|Se<<4)*Ie>>16>>4&15,_[F+2*je+1]=240&Fe|Te}F+=xe}}function ze(_,F,J,oe,xe,je,Se,Te){var Ie,Fe,Qe=255;for(Fe=0;Fe<xe;++Fe){for(Ie=0;Ie<oe;++Ie){var gt=_[F+Ie];je[Se+4*Ie]=gt,Qe&=gt}F+=J,Se+=Te}return Qe!=255}function Ze(_,F,J,oe,xe){var je;for(je=0;je<xe;++je)J[oe+je]=_[F+je]>>8}function pt(){fi=V,Xn=we,Qn=ze,xa=Ze}function Ot(_,F,J){T[_]=function(oe,xe,je,Se,Te,Ie,Fe,Qe,gt,dt,st,qt,At,Ye,et,Et,Tt){var Lt,yr=Tt-1>>1,cr=Te[Ie+0]|Fe[Qe+0]<<16,qr=gt[dt+0]|st[qt+0]<<16;t(oe!=null);var dr=3*cr+qr+131074>>2;for(F(oe[xe+0],255&dr,dr>>16,At,Ye),je!=null&&(dr=3*qr+cr+131074>>2,F(je[Se+0],255&dr,dr>>16,et,Et)),Lt=1;Lt<=yr;++Lt){var Bn=Te[Ie+Lt]|Fe[Qe+Lt]<<16,zn=gt[dt+Lt]|st[qt+Lt]<<16,Nn=cr+Bn+qr+zn+524296,dn=Nn+2*(Bn+qr)>>3;dr=dn+cr>>1,cr=(Nn=Nn+2*(cr+zn)>>3)+Bn>>1,F(oe[xe+2*Lt-1],255&dr,dr>>16,At,Ye+(2*Lt-1)*J),F(oe[xe+2*Lt-0],255&cr,cr>>16,At,Ye+(2*Lt-0)*J),je!=null&&(dr=Nn+qr>>1,cr=dn+zn>>1,F(je[Se+2*Lt-1],255&dr,dr>>16,et,Et+(2*Lt-1)*J),F(je[Se+2*Lt+0],255&cr,cr>>16,et,Et+(2*Lt+0)*J)),cr=Bn,qr=zn}1&Tt||(dr=3*cr+qr+131074>>2,F(oe[xe+Tt-1],255&dr,dr>>16,At,Ye+(Tt-1)*J),je!=null&&(dr=3*qr+cr+131074>>2,F(je[Se+Tt-1],255&dr,dr>>16,et,Et+(Tt-1)*J)))}}function Kt(){Hi[Bd]=Ah,Hi[Ic]=Uc,Hi[Ud]=Ch,Hi[Ju]=tc,Hi[qd]=rc,Hi[ia]=qc,Hi[gu]=Af,Hi[vu]=Uc,Hi[Ll]=tc,Hi[Qu]=rc,Hi[Dc]=qc}function br(_){return _&-16384?0>_?0:255:_>>ac}function Rr(_,F){return br((19077*_>>8)+(26149*F>>8)-14234)}function Kr(_,F,J){return br((19077*_>>8)-(6419*F>>8)-(13320*J>>8)+8708)}function Zr(_,F){return br((19077*_>>8)+(33050*F>>8)-17685)}function hn(_,F,J,oe,xe){oe[xe+0]=Rr(_,J),oe[xe+1]=Kr(_,F,J),oe[xe+2]=Zr(_,F)}function Oa(_,F,J,oe,xe){oe[xe+0]=Zr(_,F),oe[xe+1]=Kr(_,F,J),oe[xe+2]=Rr(_,J)}function za(_,F,J,oe,xe){var je=Kr(_,F,J);F=je<<3&224|Zr(_,F)>>3,oe[xe+0]=248&Rr(_,J)|je>>5,oe[xe+1]=F}function Ya(_,F,J,oe,xe){var je=240&Zr(_,F)|15;oe[xe+0]=240&Rr(_,J)|Kr(_,F,J)>>4,oe[xe+1]=je}function Vs(_,F,J,oe,xe){oe[xe+0]=255,hn(_,F,J,oe,xe+1)}function ys(_,F,J,oe,xe){Oa(_,F,J,oe,xe),oe[xe+3]=255}function Qo(_,F,J,oe,xe){hn(_,F,J,oe,xe),oe[xe+3]=255}function li(_,F){return 0>_?0:_>F?F:_}function bs(_,F,J){T[_]=function(oe,xe,je,Se,Te,Ie,Fe,Qe,gt){for(var dt=Qe+(-2&gt)*J;Qe!=dt;)F(oe[xe+0],je[Se+0],Te[Ie+0],Fe,Qe),F(oe[xe+1],je[Se+0],Te[Ie+0],Fe,Qe+J),xe+=2,++Se,++Ie,Qe+=2*J;1&gt&&F(oe[xe+0],je[Se+0],Te[Ie+0],Fe,Qe)}}function ao(_,F,J){return J==0?_==0?F==0?6:5:F==0?4:0:J}function Ja(_,F,J,oe,xe){switch(_>>>30){case 3:di(F,J,oe,xe,0);break;case 2:_n(F,J,oe,xe);break;case 1:Qa(F,J,oe,xe)}}function Tc(_,F){var J,oe,xe=F.M,je=F.Nb,Se=_.oc,Te=_.pc+40,Ie=_.oc,Fe=_.pc+584,Qe=_.oc,gt=_.pc+600;for(J=0;16>J;++J)Se[Te+32*J-1]=129;for(J=0;8>J;++J)Ie[Fe+32*J-1]=129,Qe[gt+32*J-1]=129;for(0<xe?Se[Te-1-32]=Ie[Fe-1-32]=Qe[gt-1-32]=129:(s(Se,Te-32-1,127,21),s(Ie,Fe-32-1,127,9),s(Qe,gt-32-1,127,9)),oe=0;oe<_.za;++oe){var dt=F.ya[F.aa+oe];if(0<oe){for(J=-1;16>J;++J)n(Se,Te+32*J-4,Se,Te+32*J+12,4);for(J=-1;8>J;++J)n(Ie,Fe+32*J-4,Ie,Fe+32*J+4,4),n(Qe,gt+32*J-4,Qe,gt+32*J+4,4)}var st=_.Gd,qt=_.Hd+oe,At=dt.ad,Ye=dt.Hc;if(0<xe&&(n(Se,Te-32,st[qt].y,0,16),n(Ie,Fe-32,st[qt].f,0,8),n(Qe,gt-32,st[qt].ea,0,8)),dt.Za){var et=Se,Et=Te-32+16;for(0<xe&&(oe>=_.za-1?s(et,Et,st[qt].y[15],4):n(et,Et,st[qt+1].y,0,4)),J=0;4>J;J++)et[Et+128+J]=et[Et+256+J]=et[Et+384+J]=et[Et+0+J];for(J=0;16>J;++J,Ye<<=2)et=Se,Et=Te+$c[J],hi[dt.Ob[J]](et,Et),Ja(Ye,At,16*+J,et,Et)}else if(et=ao(oe,xe,dt.Ob[0]),_i[et](Se,Te),Ye!=0)for(J=0;16>J;++J,Ye<<=2)Ja(Ye,At,16*+J,Se,Te+$c[J]);for(J=dt.Gc,et=ao(oe,xe,dt.Dd),Ai[et](Ie,Fe),Ai[et](Qe,gt),Ye=At,et=Ie,Et=Fe,255&(dt=J>>0)&&(170&dt?$i(Ye,256,et,Et):Ms(Ye,256,et,Et)),dt=Qe,Ye=gt,255&(J>>=8)&&(170&J?$i(At,320,dt,Ye):Ms(At,320,dt,Ye)),xe<_.Ub-1&&(n(st[qt].y,0,Se,Te+480,16),n(st[qt].f,0,Ie,Fe+224,8),n(st[qt].ea,0,Qe,gt+224,8)),J=8*je*_.B,st=_.sa,qt=_.ta+16*oe+16*je*_.R,At=_.qa,dt=_.ra+8*oe+J,Ye=_.Ha,et=_.Ia+8*oe+J,J=0;16>J;++J)n(st,qt+J*_.R,Se,Te+32*J,16);for(J=0;8>J;++J)n(At,dt+J*_.B,Ie,Fe+32*J,8),n(Ye,et+J*_.B,Qe,gt+32*J,8)}}function wn(_,F,J,oe,xe,je,Se,Te,Ie){var Fe=[0],Qe=[0],gt=0,dt=Ie!=null?Ie.kd:0,st=Ie??new Jo;if(_==null||12>J)return 7;st.data=_,st.w=F,st.ha=J,F=[F],J=[J],st.gb=[st.gb];e:{var qt=F,At=J,Ye=st.gb;if(t(_!=null),t(At!=null),t(Ye!=null),Ye[0]=0,12<=At[0]&&!r(_,qt[0],"RIFF")){if(r(_,qt[0]+8,"WEBP")){Ye=3;break e}var et=Ue(_,qt[0]+4);if(12>et||4294967286<et){Ye=3;break e}if(dt&&et>At[0]-8){Ye=7;break e}Ye[0]=et,qt[0]+=12,At[0]-=12}Ye=0}if(Ye!=0)return Ye;for(et=0<st.gb[0],J=J[0];;){e:{var Et=_;At=F,Ye=J;var Tt=Fe,Lt=Qe,yr=qt=[0];if((dr=gt=[gt])[0]=0,8>Ye[0])Ye=7;else{if(!r(Et,At[0],"VP8X")){if(Ue(Et,At[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var cr=Ue(Et,At[0]+8),qr=1+ne(Et,At[0]+12);if(2147483648<=qr*(Et=1+ne(Et,At[0]+15))){Ye=3;break e}yr!=null&&(yr[0]=cr),Tt!=null&&(Tt[0]=qr),Lt!=null&&(Lt[0]=Et),At[0]+=18,Ye[0]-=18,dr[0]=1}Ye=0}}if(gt=gt[0],qt=qt[0],Ye!=0)return Ye;if(At=!!(2&qt),!et&&gt)return 3;if(je!=null&&(je[0]=!!(16&qt)),Se!=null&&(Se[0]=At),Te!=null&&(Te[0]=0),Se=Fe[0],qt=Qe[0],gt&&At&&Ie==null){Ye=0;break}if(4>J){Ye=7;break}if(et&&gt||!et&&!gt&&!r(_,F[0],"ALPH")){J=[J],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];e:{cr=_,Ye=F,et=J;var dr=st.gb;Tt=st.na,Lt=st.P,yr=st.Sa,qr=22,t(cr!=null),t(et!=null),Et=Ye[0];var Bn=et[0];for(t(Tt!=null),t(yr!=null),Tt[0]=null,Lt[0]=null,yr[0]=0;;){if(Ye[0]=Et,et[0]=Bn,8>Bn){Ye=7;break e}var zn=Ue(cr,Et+4);if(4294967286<zn){Ye=3;break e}var Nn=8+zn+1&-2;if(qr+=Nn,0<dr&&qr>dr){Ye=3;break e}if(!r(cr,Et,"VP8 ")||!r(cr,Et,"VP8L")){Ye=0;break e}if(Bn[0]<Nn){Ye=7;break e}r(cr,Et,"ALPH")||(Tt[0]=cr,Lt[0]=Et+8,yr[0]=zn),Et+=Nn,Bn-=Nn}}if(J=J[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],Ye!=0)break}J=[J],st.Ja=[st.Ja],st.xa=[st.xa];e:if(dr=_,Ye=F,et=J,Tt=st.gb[0],Lt=st.Ja,yr=st.xa,cr=Ye[0],Et=!r(dr,cr,"VP8 "),qr=!r(dr,cr,"VP8L"),t(dr!=null),t(et!=null),t(Lt!=null),t(yr!=null),8>et[0])Ye=7;else{if(Et||qr){if(dr=Ue(dr,cr+4),12<=Tt&&dr>Tt-12){Ye=3;break e}if(dt&&dr>et[0]-8){Ye=7;break e}Lt[0]=dr,Ye[0]+=8,et[0]-=8,yr[0]=qr}else yr[0]=5<=et[0]&&dr[cr+0]==47&&!(dr[cr+4]>>5),Lt[0]=et[0];Ye=0}if(J=J[0],st.Ja=st.Ja[0],st.xa=st.xa[0],F=F[0],Ye!=0)break;if(4294967286<st.Ja)return 3;if(Te==null||At||(Te[0]=st.xa?2:1),Se=[Se],qt=[qt],st.xa){if(5>J){Ye=7;break}Te=Se,dt=qt,At=je,_==null||5>J?_=0:5<=J&&_[F+0]==47&&!(_[F+4]>>5)?(et=[0],dr=[0],Tt=[0],ae(Lt=new O,_,F,J),or(Lt,et,dr,Tt)?(Te!=null&&(Te[0]=et[0]),dt!=null&&(dt[0]=dr[0]),At!=null&&(At[0]=Tt[0]),_=1):_=0):_=0}else{if(10>J){Ye=7;break}Te=qt,_==null||10>J||!Ws(_,F+3,J-3)?_=0:(dt=_[F+0]|_[F+1]<<8|_[F+2]<<16,At=16383&(_[F+7]<<8|_[F+6]),_=16383&(_[F+9]<<8|_[F+8]),1&dt||3<(dt>>1&7)||!(dt>>4&1)||dt>>5>=st.Ja||!At||!_?_=0:(Se&&(Se[0]=At),Te&&(Te[0]=_),_=1))}if(!_||(Se=Se[0],qt=qt[0],gt&&(Fe[0]!=Se||Qe[0]!=qt)))return 3;Ie!=null&&(Ie[0]=st,Ie.offset=F-Ie.w,t(4294967286>F-Ie.w),t(Ie.offset==Ie.ha-J));break}return Ye==0||Ye==7&&gt&&Ie==null?(je!=null&&(je[0]|=st.na!=null&&0<st.na.length),oe!=null&&(oe[0]=Se),xe!=null&&(xe[0]=qt),0):Ye}function ds(_,F,J){var oe=F.width,xe=F.height,je=0,Se=0,Te=oe,Ie=xe;if(F.Da=_!=null&&0<_.Da,F.Da&&(Te=_.cd,Ie=_.bd,je=_.v,Se=_.j,11>J||(je&=-2,Se&=-2),0>je||0>Se||0>=Te||0>=Ie||je+Te>oe||Se+Ie>xe))return 0;if(F.v=je,F.j=Se,F.va=je+Te,F.o=Se+Ie,F.U=Te,F.T=Ie,F.da=_!=null&&0<_.da,F.da){if(!ve(Te,Ie,J=[_.ib],je=[_.hb]))return 0;F.ib=J[0],F.hb=je[0]}return F.ob=_!=null&&_.ob,F.Kb=_==null||!_.Sd,F.da&&(F.ob=F.ib<3*oe/4&&F.hb<3*xe/4,F.Kb=0),1}function Pa(_){if(_==null)return 2;if(11>_.S){var F=_.f.RGBA;F.fb+=(_.height-1)*F.A,F.A=-F.A}else F=_.f.kb,_=_.height,F.O+=(_-1)*F.fa,F.fa=-F.fa,F.N+=(_-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(_-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(_-1)*F.lb,F.lb=-F.lb);return 0}function ws(_,F,J,oe){if(oe==null||0>=_||0>=F)return 2;if(J!=null){if(J.Da){var xe=J.cd,je=J.bd,Se=-2&J.v,Te=-2&J.j;if(0>Se||0>Te||0>=xe||0>=je||Se+xe>_||Te+je>F)return 2;_=xe,F=je}if(J.da){if(!ve(_,F,xe=[J.ib],je=[J.hb]))return 2;_=xe[0],F=je[0]}}oe.width=_,oe.height=F;e:{var Ie=oe.width,Fe=oe.height;if(_=oe.S,0>=Ie||0>=Fe||!(_>=Bd&&13>_))_=2;else{if(0>=oe.Rd&&oe.sd==null){Se=je=xe=F=0;var Qe=(Te=Ie*$d[_])*Fe;if(11>_||(je=(Fe+1)/2*(F=(Ie+1)/2),_==12&&(Se=(xe=Ie)*Fe)),(Fe=i(Qe+2*je+Se))==null){_=1;break e}oe.sd=Fe,11>_?((Ie=oe.f.RGBA).eb=Fe,Ie.fb=0,Ie.A=Te,Ie.size=Qe):((Ie=oe.f.kb).y=Fe,Ie.O=0,Ie.fa=Te,Ie.Fd=Qe,Ie.f=Fe,Ie.N=0+Qe,Ie.Ab=F,Ie.Cd=je,Ie.ea=Fe,Ie.W=0+Qe+je,Ie.Db=F,Ie.Ed=je,_==12&&(Ie.F=Fe,Ie.J=0+Qe+2*je),Ie.Tc=Se,Ie.lb=xe)}if(F=1,xe=oe.S,je=oe.width,Se=oe.height,xe>=Bd&&13>xe)if(11>xe)_=oe.f.RGBA,F&=(Te=Math.abs(_.A))*(Se-1)+je<=_.size,F&=Te>=je*$d[xe],F&=_.eb!=null;else{_=oe.f.kb,Te=(je+1)/2,Qe=(Se+1)/2,Ie=Math.abs(_.fa),Fe=Math.abs(_.Ab);var gt=Math.abs(_.Db),dt=Math.abs(_.lb),st=dt*(Se-1)+je;F&=Ie*(Se-1)+je<=_.Fd,F&=Fe*(Qe-1)+Te<=_.Cd,F=(F&=gt*(Qe-1)+Te<=_.Ed)&Ie>=je&Fe>=Te&gt>=Te,F&=_.y!=null,F&=_.f!=null,F&=_.ea!=null,xe==12&&(F&=dt>=je,F&=st<=_.Tc,F&=_.F!=null)}else F=0;_=F?0:2}}return _!=0||J!=null&&J.fd&&(_=Pa(oe)),_}var pn=64,Ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ia=24,Ui=32,Ns=8,fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(_){return _},T.Predictor2=function(_,F,J){return F[J+0]},T.Predictor3=function(_,F,J){return F[J+1]},T.Predictor4=function(_,F,J){return F[J-1]},T.Predictor5=function(_,F,J){return Pe(Pe(_,F[J+1]),F[J+0])},T.Predictor6=function(_,F,J){return Pe(_,F[J-1])},T.Predictor7=function(_,F,J){return Pe(_,F[J+0])},T.Predictor8=function(_,F,J){return Pe(F[J-1],F[J+0])},T.Predictor9=function(_,F,J){return Pe(F[J+0],F[J+1])},T.Predictor10=function(_,F,J){return Pe(Pe(_,F[J-1]),Pe(F[J+0],F[J+1]))},T.Predictor11=function(_,F,J){var oe=F[J+0];return 0>=nt(oe>>24&255,_>>24&255,(F=F[J-1])>>24&255)+nt(oe>>16&255,_>>16&255,F>>16&255)+nt(oe>>8&255,_>>8&255,F>>8&255)+nt(255&oe,255&_,255&F)?oe:_},T.Predictor12=function(_,F,J){var oe=F[J+0];return(Ne((_>>24&255)+(oe>>24&255)-((F=F[J-1])>>24&255))<<24|Ne((_>>16&255)+(oe>>16&255)-(F>>16&255))<<16|Ne((_>>8&255)+(oe>>8&255)-(F>>8&255))<<8|Ne((255&_)+(255&oe)-(255&F)))>>>0},T.Predictor13=function(_,F,J){var oe=F[J-1];return(Re((_=Pe(_,F[J+0]))>>24&255,oe>>24&255)<<24|Re(_>>16&255,oe>>16&255)<<16|Re(_>>8&255,oe>>8&255)<<8|Re(_>>0&255,oe>>0&255))>>>0};var js=T.PredictorAdd0;T.PredictorAdd1=xt,pe("Predictor2","PredictorAdd2"),pe("Predictor3","PredictorAdd3"),pe("Predictor4","PredictorAdd4"),pe("Predictor5","PredictorAdd5"),pe("Predictor6","PredictorAdd6"),pe("Predictor7","PredictorAdd7"),pe("Predictor8","PredictorAdd8"),pe("Predictor9","PredictorAdd9"),pe("Predictor10","PredictorAdd10"),pe("Predictor11","PredictorAdd11"),pe("Predictor12","PredictorAdd12"),pe("Predictor13","PredictorAdd13");var qi=T.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",(function(_){return _>>8&255}),(function(_){return _})),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(_){return _}),(function(_){return _>>8&255}));var Pl,ci=T.ColorIndexInverseTransform,Jl=T.MapARGB,Fd=T.VP8LColorIndexInverseTransformAlpha,Oc=T.MapAlpha,Il=T.VP8LPredictorsAdd=[];Il.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Ql,ui,Fs,Zo,el,bo,tl,di,_n,$i,Qa,Ms,rl,Md,Dl,so,Zl,zi,Da,Si,nl,ec,io,ks,fi,Xn,Qn,xa,Za=i(511),al=i(2041),Xu=i(225),Pc=i(767),Rd=0,sl=al,Yu=Xu,Gs=Pc,wo=Za,Bd=0,Ic=1,Ud=2,Ju=3,qd=4,ia=5,gu=6,vu=7,Ll=8,Qu=9,Dc=10,Zu=[2,3,7],N0=[3,3,11],Lc=[280,256,256,256,40],Sh=[0,1,1,1,0],yu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Sf=8,Rc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],il=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bc=null,_f=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ed=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_h=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],am=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],td=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_i=[],hi=[],Ai=[],Fl=1,wu=2,Ss=[],Hi=[];Ot("UpsampleRgbLinePair",hn,3),Ot("UpsampleBgrLinePair",Oa,3),Ot("UpsampleRgbaLinePair",Qo,4),Ot("UpsampleBgraLinePair",ys,4),Ot("UpsampleArgbLinePair",Vs,4),Ot("UpsampleRgba4444LinePair",Ya,2),Ot("UpsampleRgb565LinePair",za,2);var Ah=T.UpsampleRgbLinePair,Ch=T.UpsampleBgrLinePair,Uc=T.UpsampleRgbaLinePair,tc=T.UpsampleBgraLinePair,rc=T.UpsampleArgbLinePair,qc=T.UpsampleRgba4444LinePair,Af=T.UpsampleRgb565LinePair,nc=16,No=1<<nc-1,Yn=-227,oa=482,ac=6,Ks=0,Xs=i(256),ga=i(256),jo=i(256),Ha=i(256),Cf=i(oa-Yn),Ef=i(oa-Yn);bs("YuvToRgbRow",hn,3),bs("YuvToBgrRow",Oa,3),bs("YuvToRgbaRow",Qo,4),bs("YuvToBgraRow",ys,4),bs("YuvToArgbRow",Vs,4),bs("YuvToRgba4444Row",Ya,2),bs("YuvToRgb565Row",za,2);var $c=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ol=[0,2,8],Eh=[8,7,6,4,4,2,2,2,1,1,1,1],Ci=1;this.WebPDecodeRGBA=function(_,F,J,oe,xe){var je=Ic,Se=new Yo,Te=new Fr;Se.ba=Te,Te.S=je,Te.width=[Te.width],Te.height=[Te.height];var Ie=Te.width,Fe=Te.height,Qe=new Cr;if(Qe==null||_==null)var gt=2;else t(Qe!=null),gt=wn(_,F,J,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(gt!=0?Ie=0:(Ie!=null&&(Ie[0]=Qe.width[0]),Fe!=null&&(Fe[0]=Qe.height[0]),Ie=1),Ie){Te.width=Te.width[0],Te.height=Te.height[0],oe!=null&&(oe[0]=Te.width),xe!=null&&(xe[0]=Te.height);e:{if(oe=new pa,(xe=new Jo).data=_,xe.w=F,xe.ha=J,xe.kd=1,F=[0],t(xe!=null),((_=wn(xe.data,xe.w,xe.ha,null,null,null,F,null,xe))==0||_==7)&&F[0]&&(_=4),(F=_)==0){if(t(Se!=null),oe.data=xe.data,oe.w=xe.w+xe.offset,oe.ha=xe.ha-xe.offset,oe.put=sn,oe.ac=Yr,oe.bc=Wn,oe.ma=Se,xe.xa){if((_=ct())==null){Se=1;break e}if((function(dt,st){var qt=[0],At=[0],Ye=[0];t:for(;;){if(dt==null)return 0;if(st==null)return dt.a=2,0;if(dt.l=st,dt.a=0,ae(dt.m,st.data,st.w,st.ha),!or(dt.m,qt,At,Ye)){dt.a=3;break t}if(dt.xb=wu,st.width=qt[0],st.height=At[0],!Ve(qt[0],At[0],1,dt,null))break t;return 1}return t(dt.a!=0),0})(_,oe)){if(oe=(F=ws(oe.width,oe.height,Se.Oa,Se.ba))==0){t:{oe=_;r:for(;;){if(oe==null){oe=0;break t}if(t(oe.s.yc!=null),t(oe.s.Ya!=null),t(0<oe.s.Wb),t((J=oe.l)!=null),t((xe=J.ma)!=null),oe.xb!=0){if(oe.ca=xe.ba,oe.tb=xe.tb,t(oe.ca!=null),!ds(xe.Oa,J,Ju)){oe.a=2;break r}if(!Je(oe,J.width)||J.da)break r;if((J.da||bt(oe.ca.S))&&pt(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&pt()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!Ce(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Oe(oe,oe.V,oe.Ba,oe.c,oe.i,J.o,me))break r;xe.Dc=oe.Ma,oe=1;break t}t(oe.a!=0),oe=0}oe=!oe}oe&&(F=_.a)}else F=_.a}else{if((_=new sa)==null){Se=1;break e}if(_.Fa=xe.na,_.P=xe.P,_.qc=xe.Sa,Ta(_,oe)){if((F=ws(oe.width,oe.height,Se.Oa,Se.ba))==0){if(_.Aa=0,J=Se.Oa,t((xe=_)!=null),J!=null){if(0<(Ie=0>(Ie=J.Md)?0:100<Ie?255:255*Ie/100)){for(Fe=Qe=0;4>Fe;++Fe)12>(gt=xe.pb[Fe]).lc&&(gt.ia=Ie*Eh[0>gt.lc?0:gt.lc]>>3),Qe|=gt.ia;Qe&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=J.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}Ct(_,oe)||(F=_.a)}}else F=_.a}F==0&&Se.Oa!=null&&Se.Oa.fd&&(F=Pa(Se.ba))}Se=F}je=Se!=0?null:11>je?Te.f.RGBA.eb:Te.f.kb.y}else je=null;return je};var $d=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,I){for(var B="",C=0;C<4;C++)B+=String.fromCharCode(T[I++]);return B}function f(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16)>>>0}function d(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16|T[I+3]<<24)>>>0}new c;var m=[0],p=[0],y=[],v=new c,g=e,b=(function(T,I){var B={},C=0,E=!1,M=0,q=0;if(B.frames=[],!(function(z,H,R,K){for(var le=0;le<K;le++)if(z[H+le]!=R.charCodeAt(le))return!0;return!1})(T,I,"RIFF",4)){var G,Z;for(d(T,I+=4),I+=8;I<T.length;){var te=u(T,I),ae=d(T,I+=4);I+=4;var Q=ae+(1&ae);switch(te){case"VP8 ":case"VP8L":B.frames[C]===void 0&&(B.frames[C]={}),(O=B.frames[C]).src_off=E?q:I-8,O.src_size=M+ae+8,C++,E&&(E=!1,M=0,q=0);break;case"VP8X":(O=B.header={}).feature_flags=T[I];var ee=I+4;O.canvas_width=1+f(T,ee),ee+=3,O.canvas_height=1+f(T,ee),ee+=3;break;case"ALPH":E=!0,M=Q+8,q=I-8;break;case"ANIM":(O=B.header).bgcolor=d(T,I),ee=I+4,O.loop_count=(G=T)[(Z=ee)+0]<<0|G[Z+1]<<8,ee+=2;break;case"ANMF":var W,O;(O=B.frames[C]={}).offset_x=2*f(T,I),I+=3,O.offset_y=2*f(T,I),I+=3,O.width=1+f(T,I),I+=3,O.height=1+f(T,I),I+=3,O.duration=f(T,I),I+=3,W=T[I++],O.dispose=1&W,O.blend=W>>1&1}te!="ANMF"&&(I+=Q)}return B}})(g,0);b.response=g,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,j=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],p=[w.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var S=j[0],P=v.WebPDecodeRGBA(g,S.src_off,S.src_size,p,m);S.rgba=P,S.imgwidth=p[0],S.imgheight=m[0];for(var A=0;A<p[0]*m[0]*4;A++)y[A]=P[A];return this.width=p,this.height=m,this.data=y,this}(function(e){var t=function(){return typeof yk=="function"},r=function(m,p,y,v){var g=4,b=o;switch(v){case e.image_compression.FAST:g=1,b=i;break;case e.image_compression.MEDIUM:g=6,b=l;break;case e.image_compression.SLOW:g=9,b=c}m=n(m,p,y,b);var w=yk(m,{level:g});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(m,p,y,v){for(var g,b,w,j=m.length/p,N=new Uint8Array(m.length+j),S=f(),P=0;P<j;P+=1){if(w=P*p,g=m.subarray(w,w+p),v)N.set(v(g,y,b),w+P);else{for(var A,T=S.length,I=[];A<T;A+=1)I[A]=S[A](g,y,b);var B=d(I.concat());N.set(I[B],w+P)}b=g}return N},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var y,v=[],g=m.length;v[0]=1;for(var b=0;b<g;b+=1)y=m[b-p]||0,v[b+1]=m[b]-y+256&255;return v},o=function(m,p,y){var v,g=[],b=m.length;g[0]=2;for(var w=0;w<b;w+=1)v=y&&y[w]||0,g[w+1]=m[w]-v+256&255;return g},l=function(m,p,y){var v,g,b=[],w=m.length;b[0]=3;for(var j=0;j<w;j+=1)v=m[j-p]||0,g=y&&y[j]||0,b[j+1]=m[j]+256-(v+g>>>1)&255;return b},c=function(m,p,y){var v,g,b,w,j=[],N=m.length;j[0]=4;for(var S=0;S<N;S+=1)v=m[S-p]||0,g=y&&y[S]||0,b=y&&y[S-p]||0,w=u(v,g,b),j[S+1]=m[S]-w+256&255;return j},u=function(m,p,y){if(m===p&&p===y)return m;var v=Math.abs(p-y),g=Math.abs(m-y),b=Math.abs(m+p-y-y);return v<=g&&v<=b?m:g<=b?p:y},f=function(){return[s,i,o,l,c]},d=function(m){var p=m.map((function(y){return y.reduce((function(v,g){return v+Math.abs(g)}),0)}));return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,y,v){var g,b,w,j,N,S,P,A,T,I,B,C,E,M,q,G=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(w=new yve(m)).imgData,b=w.bits,g=w.colorSpace,N=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){T=(A=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,B=new Uint8Array(T*w.colors),I=new Uint8Array(T);var te,ae=w.pixelBitlength-w.bits;for(M=0,q=0;M<T;M++){for(E=A[M],te=0;te<ae;)B[q++]=E>>>te&255,te+=w.bits;I[M]=E>>>te&255}}if(w.bits===16){T=(A=new Uint32Array(w.decodePixels().buffer)).length,B=new Uint8Array(T*(32/w.pixelBitlength)*w.colors),I=new Uint8Array(T*(32/w.pixelBitlength)),C=w.colors>1,M=0,q=0;for(var Q=0;M<T;)E=A[M++],B[q++]=E>>>0&255,C&&(B[q++]=E>>>16&255,E=A[M++],B[q++]=E>>>0&255),I[Q++]=E>>>16&255;b=8}v!==e.image_compression.NONE&&t()?(m=r(B,w.width*w.colors,w.colors,v),P=r(I,w.width,1,v)):(m=B,P=I,G=void 0)}if(w.colorType===3&&(g=this.color_spaces.INDEXED,S=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,W=0;for(M=0,T=ee.length;M<T;++M)W+=ee[M];if((W/=255)===T-1&&ee.indexOf(0)!==-1)j=[ee.indexOf(0)];else if(W!==T){for(A=w.decodePixels(),I=new Uint8Array(A.length),M=0,T=A.length;M<T;M++)I[M]=ee[A[M]];P=r(I,w.width,1)}}var O=(function(z){var H;switch(z){case e.image_compression.FAST:H=11;break;case e.image_compression.MEDIUM:H=13;break;case e.image_compression.SLOW:H=14;break;default:H=12}return H})(v);return G===this.decode.FLATE_DECODE&&(Z="/Predictor "+O+" "),Z+="/Colors "+N+" /BitsPerComponent "+b+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:y,data:m,index:p,filter:G,decodeParameters:Z,transparency:j,palette:S,sMask:P,predictor:O,width:w.width,height:w.height,bitsPerComponent:b,colorSpace:g}}}})(en.API),(function(e){e.processGIF89A=function(t,r,n,s){var i=new bve(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},f=new yj(100).encode(u,100);return e.processJPEG.call(this,f,r,n,s)},e.processGIF87A=e.processGIF89A})(en.API),Ou.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ou.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){qa.log("bit decode error:"+r)}},Ou.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ou.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ou.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ou.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=u}this.pos+=e}},Ou.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Ou.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Ou.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},Ou.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,s){var i=new Ou(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new yj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}})(en.API),M8.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,s){var i=new M8(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new yj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}})(en.API),en.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,u=0;u<s;u+=4){var f=n[u],d=n[u+1],m=n[u+2],p=n[u+3];i[l++]=f,i[l++]=d,i[l++]=m,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},en.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Kh=en.API,Tv=Kh.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,d=t.doKerning!==!1,m=0,p=e.length,y=0,v=l[0]||c,g=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=d&&Ca(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/f:0,g.push((l[n]||v)/c+m)),y=n;return g},I8=Kh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Kh.processArabic&&(e=Kh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:Tv.apply(this,arguments).reduce((function(i,o){return i+o}),0)},D8=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},L8=function(e,t,r){r||(r={});var n,s,i,o,l,c,u,f=[],d=[f],m=r.textIndent||0,p=0,y=0,v=e.split(" "),g=Tv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),w=[];v.map((function(N){(N=N.split(/\s*\n/)).length>1?w=w.concat(N.map((function(S,P){return(P&&S.length?`
`:"")+S}))):w.push(N[0])})),v=w,c=I8.apply(this,[b,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(n=v[i],c&&n[0]==`
`&&(n=n.substr(1),j=1),m+p+(y=(s=Tv.apply(this,[n,r])).reduce((function(N,S){return N+S}),0))>t||j){if(y>t){for(l=D8.apply(this,[n,s,t-(m+p),t]),f.push(l.shift()),f=[l.pop()];l.length;)d.push([l.shift()]);y=s.slice(n.length-(f[0]?f[0].length:0)).reduce((function(N,S){return N+S}),0)}else f=[n];d.push(f),m=y+c,p=g}else f.push(n),m+=p+y,p=g}return u=c?function(N,S){return(S?b:"")+N.join(" ")}:function(N){return N.join(" ")},d.map(u)},Kh.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(L8.apply(this,[n[l],o,i]));return u},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=e.__fontmetrics__.compress=function(d){var m,p,y,v,g=["{"];for(var b in d){if(m=d[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=i(b).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(y=i(m).slice(3),v="-"):(y=i(m).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(Ca(m)!=="object")throw new Error("Don't know what to do with value type "+Ca(m)+".");y=o(m)}g.push(p+y)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,y,v,g={},b=1,w=g,j=[],N="",S="",P=d.length-1,A=1;A<P;A+=1)(v=d[A])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(j.push([w,y]),w={},y=void 0):v=="}"?((p=j.pop())[0][p[1]]=w,y=void 0,w=p[0]):v=="-"?b=-1:y===void 0?r.hasOwnProperty(v)?(N+=r[v],y=parseInt(N,16)*b,b=1,N=""):N+=v:r.hasOwnProperty(v)?(S+=r[v],w[y]=parseInt(S,16)*b,b=1,y=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(d){var m=d.font,p=f.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var y=u.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(en.API),(function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(nx(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])})(en),(function(e){function t(){return(tn.canvg?Promise.resolve(tn.canvg):_j(()=>import("./index.es-DqgLEBTq.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}en.API.addSvgAsImage=function(r,n,s,i,o,l,c,u){if(isNaN(n)||isNaN(s))throw qa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw qa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then((function(y){return y.fromString(d,r,m)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(y){return y.render(m)})).then((function(){p.addImage(f.toDataURL("image/jpeg",1),n,s,i,o,c,u)}))}})(),en.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},en.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,f=0,d=0;function m(y,v){var g,b=!1;for(g=0;g<y.length;g+=1)y[g]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(d=0;d<p;d+=1)r[l[d]].value=r[l[d]].defaultValue,r[l[d]].explicitSet=!1}if(Ca(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(en.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],d=0,m=i.length;d<m;++d){if(l=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(d),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(u[4-l.length],l)}return f.join("")},n=function(i){var o,l,c,u,f,d,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,m=(l=Object.keys(i).sort((function(p,y){return p-y}))).length;d<m;d++)o=l[d],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var d=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<m.length;y++)p+=String.fromCharCode(m[y]);var v=u();f({data:p,addLength1:!0,objectId:v}),c("endobj");var g=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Jh(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Jh(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Jh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var d=l.metadata.rawData,m="",p=0;p<d.length;p++)m+=String.fromCharCode(d[p]);var y=u();f({data:m,addLength1:!0,objectId:y}),c("endobj");var v=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Jh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Jh(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,u=i.y,f=i.options||{},d=i.mutex||{},m=d.pdfEscape,p=d.activeFontKey,y=d.fonts,v=p,g="",b=0,w="",j=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:l,x:c,y:u,options:f,mutex:d};for(w=l,v=p,Array.isArray(l)&&(w=l[0]),b=0;b<w.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[w[b].charCodeAt(0)]),o||w[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?g+=w[b]:g+="";var N="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?N=m(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(N=r(g,y[v])),d.isHex=!0,{text:N,x:c,y:u,options:f,mutex:d}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([s(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(s(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(en),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(en.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,u,f,d=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,j=0;this.__bidiEngine__={};var N=function(C){var E=C.charCodeAt(),M=E>>8,q=v[M];return q!==void 0?d[256*q+(255&E)]:M===252||M===253?"AL":b.test(M)?"L":M===8?"R":"N"},S=function(C){for(var E,M=0;M<C.length;M++){if((E=N(C.charAt(M)))==="L")return!1;if(E==="R")return!0}return!1},P=function(C,E,M,q){var G,Z,te,ae,Q=E[q];switch(Q){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Q="AN");break;case"AL":w=!0,Q="R";break;case"WS":Q="N";break;case"CS":q<1||q+1>=E.length||(G=M[q-1])!=="EN"&&G!=="AN"||(Z=E[q+1])!=="EN"&&Z!=="AN"?Q="N":w&&(Z="AN"),Q=Z===G?Z:"N";break;case"ES":Q=(G=q>0?M[q-1]:"B")==="EN"&&q+1<E.length&&E[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&M[q-1]==="EN"){Q="EN";break}if(w){Q="N";break}for(te=q+1,ae=E.length;te<ae&&E[te]==="ET";)te++;Q=te<ae&&E[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ae=E.length,te=q+1;te<ae&&E[te]==="NSM";)te++;if(te<ae){var ee=C[q],W=ee>=1425&&ee<=2303||ee===64286;if(G=E[te],W&&(G==="R"||G==="AL")){Q="R";break}}}Q=q<1||(G=E[q-1])==="B"?"N":M[q-1];break;case"B":w=!1,s=!0,Q=j;break;case"S":i=!0,Q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Q="N"}return Q},A=function(C,E,M){var q=C.split("");return M&&T(q,M,{hiLevel:j}),q.reverse(),E&&E.reverse(),q.join("")},T=function(C,E,M){var q,G,Z,te,ae,Q=-1,ee=C.length,W=0,O=[],z=j?p:m,H=[];for(w=!1,s=!1,i=!1,G=0;G<ee;G++)H[G]=N(C[G]);for(Z=0;Z<ee;Z++){if(ae=W,O[Z]=P(C,H,O,Z),q=240&(W=z[ae][y[O[Z]]]),W&=15,E[Z]=te=z[W][5],q>0)if(q===16){for(G=Q;G<Z;G++)E[G]=1;Q=-1}else Q=-1;if(z[W][6])Q===-1&&(Q=Z);else if(Q>-1){for(G=Q;G<Z;G++)E[G]=te;Q=-1}H[Z]==="B"&&(E[Z]=0),M.hiLevel|=te}i&&(function(R,K,le){for(var he=0;he<le;he++)if(R[he]==="S"){K[he]=j;for(var ie=he-1;ie>=0&&R[ie]==="WS";ie--)K[ie]=j}})(H,E,ee)},I=function(C,E,M,q,G){if(!(G.hiLevel<C)){if(C===1&&j===1&&!s)return E.reverse(),void(M&&M.reverse());for(var Z,te,ae,Q,ee=E.length,W=0;W<ee;){if(q[W]>=C){for(ae=W+1;ae<ee&&q[ae]>=C;)ae++;for(Q=W,te=ae-1;Q<te;Q++,te--)Z=E[Q],E[Q]=E[te],E[te]=Z,M&&(Z=M[Q],M[Q]=M[te],M[te]=Z);W=ae}W++}}},B=function(C,E,M){var q=C.split(""),G={hiLevel:j};return M||(M=[]),T(q,M,G),(function(Z,te,ae){if(ae.hiLevel!==0&&f)for(var Q,ee=0;ee<Z.length;ee++)te[ee]===1&&(Q=g.indexOf(Z[ee]))>=0&&(Z[ee]=g[Q+1])})(q,M,G),I(2,q,E,M,G),I(1,q,E,M,G),q.join("")};return this.__bidiEngine__.doBidiReorder=function(C,E,M){if((function(G,Z){if(Z)for(var te=0;te<G.length;te++)Z[te]=te;l===void 0&&(l=S(G)),u===void 0&&(u=S(G))})(C,E),o||!c||u)if(o&&c&&l^u)j=l?1:0,C=A(C,E,M);else if(!o&&c&&u)j=l?1:0,C=B(C,E,M),C=A(C,E);else if(!o||l||c||u){if(o&&!c&&l^u)C=A(C,E),l?(j=0,C=B(C,E,M)):(j=1,C=B(C,E,M),C=A(C,E));else if(o&&l&&!c&&u)j=1,C=B(C,E,M),C=A(C,E);else if(!o&&!c&&l^u){var q=f;l?(j=1,C=B(C,E,M),j=0,f=!1,C=B(C,E,M),f=q):(j=0,C=B(C,E,M),C=A(C,E),j=1,f=!1,C=B(C,E,M),f=q,C=A(C,E))}}else j=0,C=B(C,E,M);else j=l?1:0,C=B(C,E,M);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,c=C.isOutputVisual,l=C.isInputRtl,u=C.isOutputRtl,f=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text,i=(n.x,n.y,n.options||{}),o=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(en),en.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new d0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Lve(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new wve(this.contents),this.head=new jve(this),this.name=new Cve(this),this.cmap=new T9(this),this.toUnicode={},this.hhea=new kve(this),this.maxp=new Eve(this),this.hmtx=new Tve(this),this.post=new _ve(this),this.os2=new Sve(this),this.loca=new Dve(this),this.glyf=new Ove(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Ku,d0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e})(),wve=(function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,u,f,d,m,p,y,v;for(v in p=Object.keys(r).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),o=Math.floor(d/c),f=16*p-d,(s=new d0).writeInt(this.scalarType),s.writeShort(p),s.writeShort(d),s.writeShort(o),s.writeShort(f),i=16*p,u=s.pos+i,l=null,y=[],r)for(m=r[v],s.writeString(v),s.writeInt(e(m)),s.writeInt(u),s.writeInt(m.length),y=y.concat(m),v==="head"&&(l=u),u+=m.length;u%4;)y.push(0),u++;return s.write(y),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=O9.call(r);r.length%4;)r.push(0);for(i=new d0(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t})(),Nve={}.hasOwnProperty,Dd=function(e,t){for(var r in t)Nve.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Ku=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var jve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new d0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t})(),R8=(function(){function e(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b,w,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),u=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),f=(function(){var N,S;for(S=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var N,S;for(S=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)S.push(t.readUInt16());return S})(),c=b=0,j=i.length;b<j;c=++b)for(g=i[c],n=w=y=v[c];y<=g?w<=g:w>=g;n=y<=g?++w:--w)f[c]===0?o=n+u[c]:(o=l[f[c]/2+(n-y)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=d}return e.encode=function(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b,w,j,N,S,P,A,T,I,B,C,E,M,q,G,Z,te,ae,Q,ee,W,O,z,H,R,K,le,he,ie,ce,De,ne;switch(q=new d0,o=Object.keys(t).sort((function(Ue,Ce){return Ue-Ce})),r){case"macroman":for(v=0,g=(function(){var Ue=[];for(y=0;y<256;++y)Ue.push(0);return Ue})(),w={0:0},i={},G=0,Q=o.length;G<Q;G++)w[ie=t[s=o[G]]]==null&&(w[ie]=++v),i[s]={old:t[s],new:w[t[s]]},g[s]=w[t[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(g),{charMap:i,subtable:q.data,maxGlyphID:v+1};case"unicode":for(E=[],d=[],j=0,w={},n={},b=u=null,Z=0,ee=o.length;Z<ee;Z++)w[S=t[s=o[Z]]]==null&&(w[S]=++j),n[s]={old:S,new:w[S]},l=w[S]-s,b!=null&&l===u||(b&&d.push(b),E.push(s),u=l),b=s;for(b&&d.push(b),d.push(65535),E.push(65535),B=2*(I=E.length),T=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,A=2*I-T,c=[],P=[],p=[],y=te=0,W=E.length;te<W;y=++te){if(C=E[y],f=d[y],C===65535){c.push(0),P.push(0);break}if(C-(M=n[C].new)>=32768)for(c.push(0),P.push(2*(p.length+I-y)),s=ae=C;C<=f?ae<=f:ae>=f;s=C<=f?++ae:--ae)p.push(n[s].new);else c.push(M-C),P.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*I+2*p.length),q.writeUInt16(0),q.writeUInt16(B),q.writeUInt16(T),q.writeUInt16(m),q.writeUInt16(A),le=0,O=d.length;le<O;le++)s=d[le],q.writeUInt16(s);for(q.writeUInt16(0),he=0,z=E.length;he<z;he++)s=E[he],q.writeUInt16(s);for(ce=0,H=c.length;ce<H;ce++)l=c[ce],q.writeUInt16(l);for(De=0,R=P.length;De<R;De++)N=P[De],q.writeUInt16(N);for(ne=0,K=p.length;ne<K;ne++)v=p[ne],q.writeUInt16(v);return{charMap:n,subtable:q.data,maxGlyphID:j+1}}},e})(),T9=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new R8(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=R8.encode(r,n),(i=new d0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),kve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),Sve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s})(),this.charRange=(function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),_ve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t})(),Ave=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Cve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,u,f,d,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=d=0,m=s.length;d<m;o=++d)i=s[o],r.pos=i.offset,f=r.readString(i.length),l=new Ave(f,i),u[p=i.nameID]==null&&(u[p]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),Eve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),Tve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,d;for(d=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)d.push(r.readInt16());return d})(),this.widths=(function(){var f,d,m,p;for(p=[],f=0,d=(m=this.metrics).length;f<d;f++)o=m[f],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],u=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)u.push(this.widths.push(s));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),O9=[].slice,Ove=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,u,f,d,m;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new d0(n.read(i))).readShort(),f=c.readShort(),m=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[r]=l===-1?new Ive(c,f,m,u,d):new Pve(c,l,f,m,u,d),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),Pve=(function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Ive=(function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new d0(O9.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Dve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Dd(t,Ku),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var f=new Array(4*s.length),d=0;d<s.length;++d)f[4*d+3]=255&s[d],f[4*d+2]=(65280&s[d])>>8,f[4*d+1]=(16711680&s[d])>>16,f[4*d]=(4278190080&s[d])>>24;return f},t})(),Lve=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b;for(s in n=T9.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},b=n.charMap)p[(c=b[s]).old]=c.new;for(y in m=n.maxGlyphID,o)y in p||(p[y]=m++);return f=(function(w){var j,N;for(j in N={},w)N[w[j]]=j;return N})(p),d=Object.keys(f).sort((function(w,j){return w-j})),v=(function(){var w,j,N;for(N=[],w=0,j=d.length;w<j;w++)l=d[w],N.push(f[l]);return N})(),i=this.font.glyf.encode(o,v,p),u=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();en.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const Fve=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:n,showInfo:s}=ba(),[i,o]=U.useState([]),[l,c]=U.useState([]),[u,f]=U.useState(null),[d,m]=U.useState(!0),[p,y]=U.useState(!1),[v,g]=U.useState(!1),[b,w]=U.useState([]),[j,N]=U.useState(!1),[S,P]=U.useState(!1),[A,T]=U.useState(!1),[I,B]=U.useState(!1),[C,E]=U.useState([]),[M,q]=U.useState(null),[G,Z]=U.useState({description:"",quantity:1,rate:0}),[te,ae]=U.useState(!1),[Q,ee]=U.useState(!1),[W,O]=U.useState(wi),z=U.useCallback(async()=>{m(!0);try{const Ce=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,de=await C7(Ce),Y=de?.data||de||[];o(Array.isArray(Y)?Y:[]);try{const ve=await Od();c(ve?.data||ve||[])}catch{c([])}}catch(Ce){n(Ce.message||"Failed to load invoices")}finally{m(!1)}},[t,n]);U.useEffect(()=>{z()},[z]),U.useEffect(()=>{const Ce=()=>z();return window.addEventListener("refresh-invoices",Ce),()=>window.removeEventListener("refresh-invoices",Ce)},[z]);const H=Ce=>l.find(de=>de.id===Ce),R=Ce=>{switch(Ce){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Ce=>Ce.status!=="Paid").reduce((Ce,de)=>Ce+(de.amount||0),0),awaitingPayment:i.filter(Ce=>Ce.status!=="Paid").reduce((Ce,de)=>Ce+(de.amount||0),0),paidThisMonth:i.filter(Ce=>Ce.status==="Paid").reduce((Ce,de)=>Ce+(de.amount||0),0)},le=()=>{b.length===i.length?w([]):w(i.map(Ce=>Ce.id))},he=async()=>{const Ce=[...b];if(Ce.length!==0){N(!0),s(`Processing payment status for ${Ce.length} items...`);try{await Promise.all(Ce.map(de=>fv(de,{status:"Paid"}))),o(de=>de.map(Y=>Ce.includes(Y.id)?{...Y,status:"Paid"}:Y)),r(`Successfully marked ${Ce.length} invoices as paid`),w([]),z()}catch{n("Bulk update failed. Some items may not have been updated.")}finally{N(!1)}}},ie=async()=>{[...b].length!==0&&T(!0)},ce=async()=>{const Ce=[...b];if(Ce.length!==0){N(!0),T(!1),s(`Executing batch deletion for ${Ce.length} registry entries...`);try{await Promise.all(Ce.map(de=>BP(de))),o(de=>de.filter(Y=>!Ce.includes(Y.id))),r(`Successfully removed ${Ce.length} invoices from registry`),w([]),z()}catch{n("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{N(!1)}}};U.useEffect(()=>{if(u){const Ce=u.lineItems||u.items||[];E(Ce),B(!1),q(null),Z({description:"",quantity:1,rate:0}),O(u.currency||wi),ee(!1)}},[u]);const De=async()=>{if(u){y(!0);try{await fv(u.id,{items:C,lineItems:C}),o(Ce=>Ce.map(de=>de.id===u.id?{...de,items:C,lineItems:C}:de)),f({...u,items:C,lineItems:C}),B(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ce){console.error("Failed to save breakdown:",Ce),n(Ce.message||"Failed to save breakdown")}finally{y(!1)}}},ne=async()=>{if(u){y(!0);try{await fv(u.id,{status:"Paid"}),o(Ce=>Ce.map(de=>de.id===u.id?{...de,status:"Paid"}:de)),f({...u,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ce){console.error("Failed to update invoice:",Ce),n(Ce.message||"Failed to update invoice")}finally{y(!1)}}},Ue=async()=>{if(u){g(!0);try{await BP(u.id),o(Ce=>Ce.filter(de=>de.id!==u.id)),f(null),P(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ce){console.error("Failed to delete invoice:",Ce),n(Ce.message||"Failed to delete invoice")}finally{g(!1)}}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(vn,{className:"w-4 h-4"})," Create Invoice"]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:a.jsx(ff,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:a.jsx(Os,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:a.jsx(yn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Ce,de)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl ${Ce.bg} ${Ce.color} flex items-center justify-center`,children:at.cloneElement(Ce.icon,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Ce.label}),a.jsx("h3",{className:"text-xl font-black text-slate-900",children:Ce.value})]})]},de))}),a.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[a.jsx("th",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&b.length===i.length,onChange:le})}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-right"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-50",children:d?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center",children:a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Ce=>{const de=b.includes(Ce.id);return a.jsxs("tr",{onClick:()=>f(Ce),className:`group transition-colors cursor-pointer ${de?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-6 py-4",onClick:Y=>Y.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:de,onChange:()=>w(Y=>de?Y.filter(ve=>ve!==Ce.id):[...Y,Ce.id])})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ce.number}),a.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Ce.id.substring(0,8)]})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ni,{src:H(Ce.companyId)?.logo,fallbackText:H(Ce.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:H(Ce.companyId)?.name||"Unknown Partner"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm font-bold text-slate-900",children:tf(Ce.amount,Ce.currency)})}),a.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Ce.dueDate}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${R(Ce.status)}`,children:Ce.status})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx(os,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Ce.id)})})]})})}),b.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:b.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ce=>{Ce.stopPropagation(),he()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(yn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),a.jsxs("button",{onClick:Ce=>{Ce.stopPropagation(),ie()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ur,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>w([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),u&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>f(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:a.jsx(Ka,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:u.number}),a.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${R(u.status)}`,children:u.status})]}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[a.jsx(ni,{src:H(u.companyId)?.logo,fallbackText:H(u.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:H(u.companyId)?.name||"Unknown Company"}),a.jsx("p",{className:"text-xs text-slate-500",children:H(u.companyId)?.website||""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),Q?a.jsx("button",{onClick:async()=>{y(!0);try{await fv(u.id,{currency:W}),o(Ce=>Ce.map(de=>de.id===u.id?{...de,currency:W}:de)),f({...u,currency:W}),ee(!1),r("Currency updated successfully!")}catch(Ce){n(Ce.message||"Failed to update currency")}finally{y(!1)}},disabled:p,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:a.jsx(Mi,{className:"w-3 h-3"})}):a.jsx("button",{onClick:()=>ee(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:a.jsx(bc,{className:"w-3 h-3"})})]}),Q?a.jsx("select",{value:W,onChange:Ce=>O(Ce.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Rp.map(Ce=>a.jsxs("option",{value:Ce.code,children:[Ce.code," (",Ce.symbol,")"]},Ce.code))}):a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:tf(u.amount,u.currency)})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:u.dueDate})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),a.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:u.description||"No additional strategic description provided for this statement."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),I?a.jsxs("button",{onClick:De,disabled:p,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[a.jsx(Mi,{className:"w-3 h-3"})," ",p?"Saving...":"Save"]}):a.jsxs("button",{onClick:()=>B(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[a.jsx(bc,{className:"w-3 h-3"})," Edit"]})]}),a.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[C.map(Ce=>a.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:Ce.description}),a.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Ce.quantity," @ ",Jd(u.currency),Ce.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:tf(Ce.amount,u.currency)})]},Ce.id)),C.length===0&&a.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[u.status!=="Paid"&&a.jsxs("button",{onClick:ne,disabled:p,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[p?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(yn,{className:"w-4 h-4"})," Confirm Receipt"]}),a.jsx("button",{onClick:()=>P(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:a.jsx(Ur,{className:"w-5 h-5"})})]})]})]}),S&&u&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Ur,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),a.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>P(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:Ue,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),A&&b.length>0&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>T(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Ur,{className:"w-8 h-8"})}),a.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",b.length," Invoice",b.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",b.length," invoice",b.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>T(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:ce,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${b.length} Invoice${b.length>1?"s":""}`})]})]})})]})]})},Mve=()=>a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),a.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(Uu,{className:"w-4 h-4"})," Invite Member"]})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),a.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),a.jsx("div",{className:"divide-y divide-slate-100",children:Rv.map(e=>a.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ni,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&a.jsx(vy,{className:"w-4 h-4 text-indigo-600"})]}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[a.jsx(ai,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),a.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:a.jsx(aD,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),Rve=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:n=1,circularCrop:s=!0})=>{const[i,o]=U.useState({x:0,y:0}),[l,c]=U.useState(.5),[u,f]=U.useState(!1),[d,m]=U.useState({x:0,y:0}),[p,y]=U.useState(!1),[v,g]=U.useState(!1),b=U.useRef(null),w=U.useRef(null),j=U.useRef(300),N=U.useCallback(()=>{if(!w.current||!b.current)return null;const B=w.current.getBoundingClientRect(),C=j.current,E=B.width/2,M=B.height/2,q=b.current.getBoundingClientRect(),G=q.left-B.left,Z=q.top-B.top,te=(E-C/2-G-i.x)/l,ae=(M-C/2-Z-i.y)/l,Q=C/l;return{x:Math.max(0,te*(b.current.naturalWidth/b.current.width)),y:Math.max(0,ae*(b.current.naturalHeight/b.current.height)),width:Math.min(b.current.naturalWidth,Q*(b.current.naturalWidth/b.current.width)),height:Math.min(b.current.naturalHeight,Q*(b.current.naturalHeight/b.current.height))}},[i,l]),S=U.useCallback(async()=>{if(b.current){y(!0);try{const I=N();if(!I)throw new Error("Failed to calculate crop area");const B=b.current,C=document.createElement("canvas"),E=C.getContext("2d");if(!E)throw new Error("Failed to create canvas context");const M=Math.min(I.width,I.height);C.width=M,C.height=M,s&&(E.beginPath(),E.arc(M/2,M/2,M/2,0,2*Math.PI),E.clip()),E.drawImage(B,I.x,I.y,I.width,I.height,0,0,M,M);const q=C.toDataURL("image/jpeg",.9);t(q)}catch(I){console.error("Error cropping image:",I)}finally{y(!1)}}},[N,s,t]),P=U.useCallback(I=>{I.preventDefault(),f(!0),m({x:I.clientX-i.x,y:I.clientY-i.y})},[i]),A=U.useCallback(I=>{if(!u||!w.current||!b.current)return;const B=w.current,C=b.current,E=B.getBoundingClientRect(),M=C.getBoundingClientRect(),q=I.clientX-d.x,G=I.clientY-d.y,Z=M.width*l,te=M.height*l,ae=Math.max(0,(Z-E.width)/2),Q=Math.max(0,(te-E.height)/2);l<=1?o({x:q,y:G}):o({x:Math.max(-ae,Math.min(ae,q)),y:Math.max(-Q,Math.min(Q,G))})},[u,d,l]),T=U.useCallback(()=>{f(!1)},[]);return U.useEffect(()=>{if(u)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",T)}},[u,A,T]),U.useEffect(()=>{if(w.current){const B=w.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},[]),a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),a.jsx("button",{onClick:r,disabled:p,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{ref:w,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:u?"grabbing":"grab"},children:[a.jsx("img",{ref:b,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),w.current&&b.current){const B=w.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},draggable:!1}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:P,style:{pointerEvents:p?"none":"auto",cursor:u?"grabbing":"grab"},children:[a.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:n.toString()}}),a.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),a.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:I=>{const B=parseFloat(I.target.value);c(B),B<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:p}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[a.jsx("span",{children:"30%"}),a.jsx("span",{children:"300%"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:r,disabled:p,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:p||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ad,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},Bve=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=U.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=U.useState(null),[l,c]=U.useState(!1),[u,f]=U.useState(!1),[d,m]=U.useState(!1),[p,y]=U.useState(!1),[v,g]=U.useState(!1),[b,w]=U.useState(!1);U.useEffect(()=>{j(),N()},[]);const j=async()=>{c(!0);try{const I=await Dne("default");I.success&&I.data&&s(I.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},N=async()=>{m(!0);try{const I=await Fne("default");I.success&&I.data&&o(I.data)}catch(I){console.error("Failed to load retention stats:",I)}finally{m(!1)}},S=async()=>{f(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await Lne("default",{...n,updatedBy:I})).success&&(t("Retention policy updated successfully"),await N())}catch(I){r(I.message||"Failed to update retention policy")}finally{f(!1)}},P=async()=>{y(!0);try{const I=await Mne("default",50);I.success&&(t(`Archive completed: ${I.data.archived} emails archived`),await N())}catch(I){r(I.message||"Failed to trigger archive")}finally{y(!1)}},A=async()=>{g(!0);try{const I=await Rne("default",50);I.success&&(t(`Cleanup completed: ${I.data.deleted} emails deleted`),await N())}catch(I){r(I.message||"Failed to trigger cleanup")}finally{g(!1)}},T=async()=>{w(!0);try{const I=await Bne("default",{format:"csv"});if(typeof I=="string"){const B=new Blob([I],{type:"text/csv"}),C=window.URL.createObjectURL(B),E=document.createElement("a");E.href=C,E.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(C),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(I){r(I.message||"Failed to export archived emails")}finally{w(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(nD,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?a.jsx("div",{className:"p-8 text-center",children:a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),a.jsx("input",{type:"number",min:"1",max:"20",value:n.retentionYears,onChange:I=>s({...n,retentionYears:parseInt(I.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),a.jsx("input",{type:"number",min:"0",max:n.retentionYears,value:n.coldStorageYears,onChange:I=>s({...n,coldStorageYears:parseInt(I.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),a.jsx("button",{onClick:()=>s({...n,archiveEnabled:!n.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),a.jsx("button",{onClick:()=>s({...n,autoCleanupEnabled:!n.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsx("button",{onClick:S,disabled:u,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:u?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(pd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),d?a.jsx("div",{className:"p-8 text-center",children:a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Nd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:P,disabled:p,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[p?a.jsx(wt,{className:"w-5 h-5 animate-spin text-indigo-600"}):a.jsx(pd,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),a.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),a.jsxs("button",{onClick:A,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?a.jsx(wt,{className:"w-5 h-5 animate-spin text-red-600"}):a.jsx(cU,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),a.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),a.jsxs("button",{onClick:T,disabled:b,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[b?a.jsx(wt,{className:"w-5 h-5 animate-spin text-green-600"}):a.jsx(H0,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),a.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},Uve=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=U.useState([]),[i,o]=U.useState(!1),[l,c]=U.useState(!1),[u,f]=U.useState(null),[d,m]=U.useState({name:"",content:"",isDefault:!1}),[p,y]=U.useState(!1),[v,g]=U.useState(null),[b,w]=U.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});U.useEffect(()=>{j(),N()},[]);const j=async()=>{o(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I)return;const B=await B7(I);s(B.data||[])}catch(I){console.error("Failed to load signatures:",I)}finally{o(!1)}},N=()=>{try{const I=localStorage.getItem("user_display_preferences");I&&w(JSON.parse(I))}catch(I){console.error("Failed to load display preferences:",I)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(b)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},P=async()=>{if(!d.name||!d.content){r("Name and content are required");return}y(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I){r("Please log in to save signature");return}u?(await Pae(u.id,{userId:I,...d}),t("Signature updated successfully")):(await Oae({userId:I,...d}),t("Signature created successfully")),c(!1),f(null),m({name:"",content:"",isDefault:!1}),await j()}catch(I){r(I.message||"Failed to save signature")}finally{y(!1)}},A=async I=>{if(confirm("Are you sure you want to delete this signature?")){g(I);try{const B=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Iae(I,B),t("Signature deleted successfully"),await j()}catch(B){r(B.message||"Failed to delete signature")}finally{g(null)}}},T=I=>{I?(f(I),m({name:I.name||"",content:I.content||"",isDefault:I.isDefault||!1})):(f(null),m({name:"",content:"",isDefault:!1})),c(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(Ka,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),a.jsxs("button",{onClick:()=>T(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"Add Signature"]})]}),i?a.jsx("div",{className:"p-8 text-center",children:a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(Ka,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),a.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):a.jsx("div",{className:"space-y-3",children:n.map(I=>a.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-slate-900",children:I.name}),I.isDefault&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),a.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I.content}})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>T(I),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:a.jsx(bc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>A(I.id),disabled:v===I.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===I.id?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4"})})]})]})},I.id))})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Tj,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(I=>a.jsx("button",{onClick:()=>w({...b,layout:I}),className:`p-4 rounded-xl border-2 transition-all ${b.layout===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(I=>a.jsx("button",{onClick:()=>w({...b,density:I}),className:`p-4 rounded-xl border-2 transition-all ${b.density===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),a.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(wd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),a.jsxs("select",{value:b.emailFormat,onChange:I=>w({...b,emailFormat:I.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),a.jsx("option",{value:"plain",children:"Plain Text"}),a.jsx("option",{value:"rich",children:"Rich Text"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),a.jsx("button",{onClick:()=>w({...b,showPreview:!b.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${b.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${b.showPreview?"translate-x-6":"translate-x-0"}`})})]}),b.showPreview&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),a.jsx("input",{type:"number",min:"1",max:"10",value:b.previewLines,onChange:I=>w({...b,previewLines:parseInt(I.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:u?"Edit Signature":"Create Signature"}),a.jsx("button",{onClick:()=>{c(!1),f(null),m({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),a.jsx("input",{type:"text",value:d.name,onChange:I=>m({...d,name:I.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),a.jsx("textarea",{value:d.content,onChange:I=>m({...d,content:I.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),a.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),a.jsx("button",{onClick:()=>m({...d,isDefault:!d.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${d.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${d.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>{c(!1),f(null),m({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:p||!d.name||!d.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),u?"Update":"Create"," Signature"]})})]})]})})]})},qve=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:n}=ba(),[s,i]=U.useState("profile"),[o,l]=U.useState(Yg),[c,u]=U.useState(!1),[f,d]=U.useState([]),[m,p]=U.useState(""),[y,v]=U.useState(!1),[g,b]=U.useState(!1),[w,j]=U.useState(!1),[N,S]=U.useState(null),[P,A]=U.useState(!1),[T,I]=U.useState(!1),[B,C]=U.useState([]),[E,M]=U.useState(!1),[q,G]=U.useState(""),[Z,te]=U.useState(!1),[ae,Q]=U.useState(null),[ee,W]=U.useState(null),[O,z]=U.useState(null),[H,R]=U.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:mm(),language:"English"}),[K,le]=U.useState(!1),[he,ie]=U.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[ce,De]=U.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:mm(),language:"English"}),[ne,Ue]=U.useState(!1),[Ce,de]=U.useState(null),[Y,ve]=U.useState(""),[ye,Ae]=U.useState(!1),[pe,ue]=U.useState(!1),[Pe,Ne]=U.useState(""),Re=U.useRef(null),nt=(ft,$t)=>{l(tr=>tr.map($e=>$e.id===ft?{...$e,[$t]:!$e[$t]}:$e))};U.useEffect(()=>{s==="connections"&&(async()=>{const $t=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if($t)try{const tr=await L3($t);j(tr.connected||!1),S(tr.userEmail||null)}catch{j(!1)}})()},[s,e]);const xt=async()=>{M(!0);try{const ft=await Td(q||void 0);C(ft.data||[])}catch{C([])}finally{M(!1)}};U.useEffect(()=>{s==="users"&&xt()},[s,q]),U.useEffect(()=>{(async()=>{if(s==="notifications")try{const $t=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!$t)return;const $e=(await kne($t)).data||[];if($e.length>0){const bt=Yg.map(jr=>$e.find(Fr=>Fr.id===jr.id)||jr);l(bt)}else l(Yg)}catch($t){console.error("[SETTINGS] Failed to load notification preferences:",$t),l(Yg)}})()},[s,e]);const kt=async()=>{A(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,$t=await M7(ft);$t.authUrl&&(window.location.href=$t.authUrl)}catch{n("Failed to connect Google Calendar"),A(!1)}},Me=async()=>{I(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await dae(ft),j(!1),S(null),r("Google account disconnected successfully")}catch{n("Failed to disconnect Google account")}finally{I(!1)}};U.useEffect(()=>{(async()=>{let $t=e||JSON.parse(localStorage.getItem("user_data")||"null");if($t){const tr=mm();De({name:$t.name||"",email:$t.email||"",avatar:$t.avatar||"",phone:$t.phone||"",jobTitle:$t.jobTitle||"",department:$t.department||"",bio:$t.bio||"",timezone:$t.timezone||tr,language:$t.language||"English"}),ve($t.avatar||"")}})()},[e]);const vt=(ft,$t=400,tr=400,$e=.8)=>new Promise((bt,jr)=>{if(ft.size>5242880){jr(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const Fr=new FileReader;Fr.onload=Cr=>{const lr=new Image;lr.onload=()=>{let Ut=lr.width,wr=lr.height;Ut>wr?Ut>$t&&(wr=wr*$t/Ut,Ut=$t):wr>tr&&(Ut=Ut*tr/wr,wr=tr);const Er=document.createElement("canvas");Er.width=Ut,Er.height=wr;const Yr=Er.getContext("2d");if(!Yr){jr(new Error("Failed to create canvas context"));return}Yr.drawImage(lr,0,0,Ut,wr);const sn=Er.toDataURL("image/jpeg",$e);if(sn.length>9e5)if($e>.5){vt(ft,$t,tr,$e-.1).then(bt).catch(jr);return}else{jr(new Error("Image is too large even after compression. Please use a smaller image."));return}bt(sn)},lr.onerror=()=>jr(new Error("Failed to load image")),lr.src=Cr.target?.result},Fr.onerror=()=>jr(new Error("Failed to read file")),Fr.readAsDataURL(ft)}),ut=async ft=>{const $t=ft.target.files?.[0];if($t){if(!$t.type.startsWith("image/")){n("Please select a valid image file.");return}de(null);try{const tr=new FileReader;tr.onload=$e=>{const bt=$e.target?.result;Ne(bt),ue(!0)},tr.onerror=()=>{n("Failed to read image file.")},tr.readAsDataURL($t)}catch(tr){const $e=tr.message||"Failed to load image. Please try a different image.";n($e),de($e),Re.current&&(Re.current.value="")}}},lt=async ft=>{ue(!1),Ae(!0);try{const tr=await(await fetch(ft)).blob(),$e=new File([tr],"cropped-image.jpg",{type:"image/jpeg"}),bt=await vt($e,400,400,.8);ve(bt),De(jr=>({...jr,avatar:bt})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch($t){const tr=$t.message||"Failed to process cropped image.";n(tr),de(tr)}finally{Ae(!1),Re.current&&(Re.current.value="")}},pr=()=>{ue(!1),Ne(""),Re.current&&(Re.current.value="")},rr=async()=>{if(!ce.name.trim()){de("Full name is required.");return}Ue(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,$t=await hne(ft,ce),tr=$t.data||$t;localStorage.setItem("user_data",JSON.stringify(tr)),t(tr),r("Profile updated successfully!"),de(null)}catch{n("Failed to update profile.")}finally{Ue(!1)}};return a.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&a.jsxs("button",{onClick:rr,disabled:ne,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[ne?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:a.jsx(wl,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:a.jsx(gy,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:a.jsx(oD,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:a.jsx(Ej,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:a.jsx(e0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:a.jsx(nD,{className:"w-4 h-4"})}].map(ft=>a.jsxs("button",{onClick:()=>i(ft.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===ft.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[ft.icon,ft.label]},ft.id))}),a.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Ce&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Ce}),a.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(ni,{src:Y,alt:ce.name||"User",fallbackText:ce.name||ce.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),ye&&a.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:a.jsx(wt,{className:"w-6 h-6 text-white animate-spin"})}),a.jsx("button",{onClick:()=>Re.current?.click(),disabled:ye,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:a.jsx(Wu,{className:"w-6 h-6"})}),a.jsx("input",{ref:Re,type:"file",accept:"image/*",onChange:ut,className:"hidden",disabled:ye})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900",children:ce.name||"Set Name"}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[ce.jobTitle||"No Title","  ",ce.department||"No Dept"]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:ce.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:ce.name,onChange:ft=>De({...ce,name:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(su,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:ce.jobTitle,onChange:ft=>De({...ce,jobTitle:ft.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:ce.department,onChange:ft=>De({...ce,department:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:ce.phone,onChange:ft=>De({...ce,phone:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),a.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:ce.bio,onChange:ft=>De({...ce,bio:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(G_,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:ce.timezone,onChange:ft=>De({...ce,timezone:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:$m.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),a.jsx("select",{value:ce.language,onChange:ft=>De({...ce,language:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Y_.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]})]})]}),s==="notifications"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),a.jsx("div",{className:"space-y-4",children:o.map(ft=>a.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:ft.label}),a.jsx("p",{className:"text-xs text-slate-500",children:ft.description})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),a.jsx("button",{onClick:()=>nt(ft.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${ft.inApp?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ft.inApp?"translate-x-5":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),a.jsx("button",{onClick:()=>nt(ft.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${ft.email?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ft.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},ft.id))}),a.jsx("div",{className:"pt-4 border-t border-slate-100",children:a.jsxs("button",{onClick:async()=>{try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ft){n("Please log in to save preferences.");return}await Sne(ft,o),r("Notification preferences saved successfully!")}catch(ft){console.error("[SETTINGS] Failed to save notification preferences:",ft),n(ft.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[a.jsx(Mi,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:a.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),a.jsx("div",{className:"p-6",children:w?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(yn,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),N&&a.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:N})]})]}),a.jsx("button",{onClick:Me,disabled:T,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:T?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(ha,{className:"w-4 h-4 text-blue-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:a.jsx(ai,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ix,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsx("li",{children:" View and manage calendar events"}),a.jsx("li",{children:" Create, view, and manage files in Google Drive"}),a.jsx("li",{children:" Create and edit documents in Google Docs"}),a.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(Ej,{className:"w-8 h-8 text-slate-400"})}),a.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),a.jsx("button",{onClick:kt,disabled:P,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:P?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(ha,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(ai,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),a.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(ix,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),a.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[a.jsx("li",{children:" Your data is encrypted and securely stored"}),a.jsx("li",{children:" We only request the minimum permissions needed"}),a.jsx("li",{children:" You can disconnect at any time"}),a.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),a.jsxs("button",{onClick:()=>{Q(null),R({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:mm(),language:"English"}),te(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[a.jsx(Uu,{className:"w-4 h-4"})," Add User"]})]}),a.jsx("div",{className:"p-4 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:q,onChange:ft=>G(ft.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:E?a.jsx("div",{className:"p-8 text-center",children:a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):B.map(ft=>a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ni,{src:ft.avatar,alt:ft.name||"",fallbackText:ft.name||ft.email||"U",className:"w-10 h-10 border",isAvatar:!0}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900 text-sm",children:ft.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[ft.email,"  ",a.jsx("span",{className:"font-bold text-indigo-600",children:ft.role})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{Q(ft),R({email:ft.email,name:ft.name,role:ft.role||"User",jobTitle:ft.jobTitle||"",department:ft.department||"",phone:ft.phone||"",bio:ft.bio||"",timezone:ft.timezone||mm(),language:ft.language||"English"}),te(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:a.jsx(bc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>z(ft),className:"p-2 text-slate-400 hover:text-red-600",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},ft.id))})]}),s==="preferences"&&a.jsx(Uve,{currentUser:e,showSuccess:r,showError:n}),s==="workspace"&&a.jsx(Bve,{currentUser:e,showSuccess:r,showError:n})]})]}),Z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:ae?"Edit User":"Add New User"}),a.jsx("button",{onClick:()=>te(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:H.name,onChange:ft=>R({...H,name:ft.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),a.jsx("input",{type:"email",value:H.email,onChange:ft=>R({...H,email:ft.target.value}),placeholder:"Email Address",disabled:!!ae,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),a.jsxs("select",{value:H.role,onChange:ft=>R({...H,role:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),a.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),a.jsx("option",{value:"Admin",children:"Admin - Full access"}),a.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[H.role==="Viewer"&&"Read-only access to shared inbox",H.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",H.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",H.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(su,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:H.jobTitle,onChange:ft=>R({...H,jobTitle:ft.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:H.department,onChange:ft=>R({...H,department:ft.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:H.phone,onChange:ft=>R({...H,phone:ft.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:H.bio,onChange:ft=>R({...H,bio:ft.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(G_,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:H.timezone,onChange:ft=>R({...H,timezone:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:$m.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),a.jsx("select",{value:H.language,onChange:ft=>R({...H,language:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Y_.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{le(!0);try{ae?await cne(ae.id,H):await lne(H),te(!1),xt(),r(ae?"User updated successfully!":"User created successfully!")}catch(ft){n(ft.message||"Failed to save user")}finally{le(!1)}},disabled:K||!H.name||!H.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),ae?"Updating...":"Creating..."]}):ae?"Update":"Invite"})]})]})}),O&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:O.name}),a.jsx("p",{className:"text-xs text-slate-500",children:O.email}),O.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:O.role})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>z(null),disabled:ee===O.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:async()=>{W(O.id);try{await fne(O.id),await xt(),z(null),r("User deleted successfully")}catch(ft){n(ft.message||"Failed to delete user")}finally{W(null)}},disabled:ee===O.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===O.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),pe&&Pe&&a.jsx(Rve,{imageSrc:Pe,onCrop:lt,onCancel:pr,aspectRatio:1,circularCrop:!0})]})},$ve=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),n=e?.role==="Admin",[s,i]=U.useState("companies"),[o,l]=U.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,u]=U.useState({groups:[],totalDuplicates:0}),[f,d]=U.useState({groups:[],totalDuplicates:0}),[m,p]=U.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[y,v]=U.useState({mismatches:[],count:0}),[g,b]=U.useState(null),[w,j]=U.useState(!1),[N,S]=U.useState({}),P=U.useCallback(async()=>{l(te=>({...te,companies:!0}));try{const te=await iae(),ae=te?.data??te;u({groups:ae.groups||[],totalDuplicates:ae.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),u({groups:[],totalDuplicates:0})}finally{l(te=>({...te,companies:!1}))}},[r]),A=U.useCallback(async()=>{l(te=>({...te,contacts:!0}));try{const te=await oae(),ae=te?.data??te;d({groups:ae.groups||[],totalDuplicates:ae.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),d({groups:[],totalDuplicates:0})}finally{l(te=>({...te,contacts:!1}))}},[r]),T=U.useCallback(async()=>{l(te=>({...te,incomplete:!0}));try{const te=await lae(),ae=te?.data??te;p({companies:ae.companies||[],contacts:ae.contacts||[],deals:ae.deals||[],projects:ae.projects||[],invoices:ae.invoices||[]})}catch{r("Failed to load incomplete records"),p({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(te=>({...te,incomplete:!1}))}},[r]),I=U.useCallback(async()=>{l(te=>({...te,mismatches:!0}));try{const te=await cae(),ae=te?.data??te;v({mismatches:ae.mismatches||[],count:ae.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(te=>({...te,mismatches:!1}))}},[r]);U.useEffect(()=>{n&&(s==="companies"?P():s==="contacts"?A():s==="incomplete"?T():s==="mismatches"&&I())},[n,s,P,A,T,I]);const B=()=>{s==="companies"?P():s==="contacts"?A():s==="incomplete"?T():I()},C=(te,ae,Q,ee,W,O)=>{b({open:!0,type:te,primaryId:ae,secondaryId:Q,primaryName:ee,secondaryName:W,groupKey:O})},E=()=>{w||b(null)},M=async()=>{if(g){j(!0);try{g.type==="company"?(await aae(g.primaryId,g.secondaryId),t("Companies merged successfully"),P()):(await sae(g.primaryId,g.secondaryId),t("Contacts merged successfully"),A()),b(null)}catch(te){r(te?.message||"Merge failed")}finally{j(!1)}}},q=te=>{S(ae=>({...ae,[te]:!ae[te]}))};if(!n)return a.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[a.jsx(iU,{className:"w-12 h-12 text-amber-600 mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const G=[{id:"companies",label:"Duplicate Companies",icon:a.jsx(yd,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:a.jsx(wl,{className:"w-4 h-4"}),count:f.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:a.jsx($B,{className:"w-4 h-4"}),count:m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:a.jsx(W0,{className:"w-4 h-4"}),count:y.count}],Z=o[s];return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),a.jsxs("button",{onClick:B,disabled:Z,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Z?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Nd,{className:"w-4 h-4"}),"Refresh"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:G.map(te=>a.jsxs("button",{onClick:()=>i(te.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===te.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[te.icon,te.label,te.count!=null&&te.count>0&&a.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===te.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:te.count})]},te.id))}),a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Z&&a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx(wt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Z&&s==="companies"&&a.jsx("div",{className:"p-6",children:c.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):a.jsx("ul",{className:"space-y-4",children:c.groups.map(te=>{const ae=`company-${te.domain}`,Q=N[ae]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>q(ae),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:te.domain}),a.jsxs("span",{className:"text-sm text-slate-500",children:[te.count," companies"]}),Q?a.jsx(xl,{className:"w-5 h-5"}):a.jsx(os,{className:"w-5 h-5"})]}),Q&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:te.companies.map((ee,W)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),ee.industry&&a.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",ee.industry,")"]})]}),te.companies.length>=2&&a.jsx("div",{className:"flex gap-2",children:te.companies.filter(O=>O.id!==ee.id).map(O=>a.jsxs("button",{onClick:()=>C("company",ee.id,O.id,ee.name||ee.id,O.name||O.id,ae),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(Mv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},O.id))})]},ee.id))})]},ae)})})}),!Z&&s==="contacts"&&a.jsx("div",{className:"p-6",children:f.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):a.jsx("ul",{className:"space-y-4",children:f.groups.map(te=>{const ae=`contact-${te.email}`,Q=N[ae]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>q(ae),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:te.email}),a.jsxs("span",{className:"text-sm text-slate-500",children:[te.count," contacts"]}),Q?a.jsx(xl,{className:"w-5 h-5"}):a.jsx(os,{className:"w-5 h-5"})]}),Q&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:te.contacts.map(ee=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),a.jsx("span",{className:"text-slate-500 text-sm ml-2",children:ee.email})]}),te.contacts.filter(W=>W.id!==ee.id).map(W=>a.jsxs("button",{onClick:()=>C("contact",ee.id,W.id,ee.name||ee.id,W.name||W.id,ae),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(Mv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},W.id))]},ee.id))})]},ae)})})}),!Z&&s==="incomplete"&&a.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:m.companies,recordLabel:te=>te.name||te.id},{key:"contacts",label:"Contacts",items:m.contacts,recordLabel:te=>te.name||te.email||te.id},{key:"deals",label:"Deals",items:m.deals,recordLabel:te=>te.name||te.title||te.id},{key:"projects",label:"Projects",items:m.projects,recordLabel:te=>te.name||te.title||te.id},{key:"invoices",label:"Invoices",items:m.invoices,recordLabel:te=>te.id}].map(({key:te,label:ae,items:Q,recordLabel:ee})=>Q.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:ae}),a.jsx("ul",{className:"space-y-2",children:Q.map(W=>a.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(ea,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-900",children:ee(W.record)}),a.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((O,z)=>a.jsx("li",{children:O},z))})]})]},W.record.id))})]},te)),m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length===0&&a.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Z&&s==="mismatches"&&a.jsx("div",{className:"p-6",children:y.mismatches.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):a.jsx("ul",{className:"space-y-3",children:y.mismatches.map((te,ae)=>a.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(ea,{className:"w-5 h-5 text-amber-600 shrink-0"}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("p",{className:"font-medium text-slate-900",children:[te.contact?.name," (",te.contact?.email,")"]}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",a.jsx("strong",{children:te.contactDomain}),"  Company domain: ",a.jsx("strong",{children:te.companyDomain})," (",te.company?.name,")"]})]})]},ae))})})]}),g&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:E}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),a.jsx("button",{onClick:E,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:w,children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",a.jsx("strong",{children:g.secondaryName})," into ",a.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:E,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:w,children:"Cancel"}),a.jsxs("button",{onClick:M,disabled:w,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[w?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsx(Mv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},zve=({currentUser:e,onNavigate:t,onNewEvent:r})=>{const{showError:n,showSuccess:s}=ba(),[i,o]=U.useState(new Date),[l,c]=U.useState("daily"),[u,f]=U.useState([]),[d,m]=U.useState([]),[p,y]=U.useState([]),[v,g]=U.useState([]),[b,w]=U.useState([]),[j,N]=U.useState(!1),[S,P]=U.useState(!1),[A,T]=U.useState(null),[I,B]=U.useState(!1),[C,E]=U.useState(!1),[M,q]=U.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[G,Z]=U.useState([]),[te,ae]=U.useState(!1),[Q,ee]=U.useState(""),[W,O]=U.useState(""),[z,H]=U.useState(null),[R,K]=U.useState(!1),[le,he]=U.useState(null),[ie,ce]=U.useState(null),[De,ne]=U.useState(!1),[Ue,Ce]=U.useState(""),[de,Y]=U.useState(0),[ve,ye]=U.useState([]),[Ae,pe]=U.useState(!1),[ue,Pe]=U.useState(null),[Ne,Re]=U.useState(!0),[nt,xt]=U.useState(!0),kt=U.useRef(null),Me=U.useRef(null),vt=Array.from({length:24},(re,me)=>me),ut=U.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),lt=U.useMemo(()=>{const re=i.getFullYear(),me=String(i.getMonth()+1).padStart(2,"0"),be=String(i.getDate()).padStart(2,"0");return`${re}-${me}-${be}`},[i]);U.useEffect(()=>{(async()=>{if(e?.id)try{const me=await L3(e.id);N(me.connected||!1)}catch{N(!1)}})()},[e]);const pr=re=>re.filter(me=>{if(me.recurringEventId){const be=(me.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Oe=>be.includes(Oe)))return!1}return!0});U.useEffect(()=>{(async()=>{P(!0);const me=new Date(i),be=new Date(i);if(l==="monthly")me.setDate(1),me.setHours(0,0,0,0),be.setMonth(be.getMonth()+1),be.setDate(0),be.setHours(23,59,59,999);else if(l==="weekly"){const Ve=new Date(i),Je=Ve.getDay(),He=Ve.getDate()-Je+(Je===0?-6:1),Le=new Date(Ve.setDate(He));me.setTime(Le.getTime()),me.setHours(0,0,0,0);const tt=new Date(Le);tt.setDate(Le.getDate()+6),be.setTime(tt.getTime()),be.setHours(23,59,59,999)}else me.setHours(0,0,0,0),be.setHours(23,59,59,999);const _e=Ve=>{const Je=Ve.getFullYear(),He=String(Ve.getMonth()+1).padStart(2,"0"),Le=String(Ve.getDate()).padStart(2,"0");return`${Je}-${He}-${Le}`},Ee=_e(me),Oe=_e(be),Xe=[];if(j&&e?.id)try{const Je=(await uae(Ee,Oe,e.id)).data||[],He=pr(Je);Xe.push(...He)}catch(Ve){console.warn("[Schedule] Failed to fetch Google Calendar events:",Ve.message)}if(e?.id)try{const Ve=await Bv(e.id,void 0,Ee,Oe);if(Ve.success&&Ve.data){const Je=Ve.data.map(He=>({id:He.id,title:He.title,description:He.description||"",start:He.start,end:He.end,type:He.type||"meeting",location:He.location||"",participants:He.participants||[],color:He.color||"#4f46e5",isAllDay:He.isAllDay||!1,source:"firestore",googleEventId:He.googleEventId||null,htmlLink:He.htmlLink||null,relatedEntity:He.relatedEntity||null}));Xe.push(...Je)}}catch(Ve){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Ve.message)}const ct=new Map;Xe.forEach(Ve=>{const Je=Ve.googleEventId||Ve.id;ct.has(Je)||ct.set(Je,Ve)}),f(Array.from(ct.values()));try{const Ve=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ve){y([]),m([]);return}const Je=await Qy(Ve),Le=(Array.isArray(Je?.data||Je)?Je?.data||Je:[]).filter(ht=>{const Pt=ht.dueDate&&ht.dueDate!==null&&ht.dueDate!==void 0&&String(ht.dueDate).trim()!==""&&String(ht.dueDate).trim().toLowerCase()!=="ongoing";return!ht.archived&&Pt});y(Le);const tt=Le.filter(ht=>ht.dueDate===lt);m(tt)}catch{y([]),m([])}try{const[Ve,Je,He]=await Promise.all([Qp(e?.id),Td(),X1()]);g(Array.isArray(Ve?.data||Ve)?Ve?.data||Ve:[]),w(Array.isArray(Je?.data||Je)?Je?.data||Je:[]),Z(Array.isArray(He?.data)?He.data:[])}catch{g([]),w([]),Z([])}P(!1)})()},[lt,j,e,l,i]);const rr=()=>{const re=new Date(i);l==="daily"?re.setDate(re.getDate()-1):l==="weekly"?re.setDate(re.getDate()-7):re.setMonth(re.getMonth()-1),o(re)},ft=()=>{const re=new Date(i);l==="daily"?re.setDate(re.getDate()+1):l==="weekly"?re.setDate(re.getDate()+7):re.setMonth(re.getMonth()+1),o(re)},$t=()=>{const re=new Date;return i.toDateString()===re.toDateString()},tr=re=>{let me=new Date(re.start),be=new Date(re.end);const _e=new Date(i);_e.setHours(0,0,0,0);const Ee=(me.getTime()-_e.getTime())/(1e3*60),Oe=(be.getTime()-me.getTime())/(1e3*60),Xe=Ee*(80/60)+20,ct=Oe*(80/60);return{top:Xe,height:Math.max(ct,50)}},$e=re=>{try{return new Date(re).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return re}},bt=re=>{switch(re){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},jr=re=>{const me=new Date(re),be=me.getDay(),_e=me.getDate()-be+(be===0?-6:1);return new Date(me.setDate(_e))},Yt=re=>{const me=jr(re);return Array.from({length:7},(be,_e)=>{const Ee=new Date(me);return Ee.setDate(me.getDate()+_e),Ee})},Fr=re=>{const me=re.getFullYear(),be=re.getMonth(),_e=new Date(me,be,1),Ee=new Date(me,be+1,0),Oe=new Date(_e);Oe.setDate(Oe.getDate()-Oe.getDay());const Xe=[],ct=new Date(Oe);for(;(ct<=Ee||Xe.length<42)&&(Xe.push(new Date(ct)),ct.setDate(ct.getDate()+1),!(Xe.length>=42)););return Xe},Cr=re=>{const me=re.getFullYear(),be=String(re.getMonth()+1).padStart(2,"0"),_e=String(re.getDate()).padStart(2,"0");return`${me}-${be}-${_e}`},lr=re=>p.filter(me=>me.dueDate===re),Ut=re=>{Cr(re);const me=new Date(re);me.setHours(0,0,0,0);const be=new Date(re);return be.setHours(23,59,59,999),u.filter(_e=>{const Ee=new Date(_e.start),Oe=_e.end?new Date(_e.end):Ee;return Ee<=be&&Oe>=me})},wr=re=>{if(!re||!/^\d{4}-\d{2}-\d{2}$/.test(re))return re;const[me,be,_e]=re.split("-").map(Number);return new Date(me,be-1,_e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};U.useEffect(()=>{A&&!I&&q({title:A.title,category:A.category||"",description:A.description||"",dueDate:A.dueDate||"",priority:A.priority||"Medium",status:A.status||"Todo",assigneeId:A.assigneeId,projectId:A.projectId||""})},[A,I]),U.useEffect(()=>{if(!I){ae(!1);return}A?.category&&!G.includes(A.category)?ae(!0):M.category&&G.includes(M.category)?ae(!1):M.category&&!G.includes(M.category)&&ae(!0)},[I,M.category,G]),U.useEffect(()=>{if(!A)return;let re=!1;return(async()=>{try{const me=await X1(),be=Array.isArray(me?.data)?me.data:[];re||Z(be)}catch{re||Z([])}})(),()=>{re=!0}},[A?.id]);const Er=()=>{T(null),B(!1),ee(""),O(""),H(null),ne(!1),pe(!1),Me.current&&(Me.current.value="")},Yr=async()=>{if(A){if(!M.title.trim()){n("Task title is required");return}if(!M.assigneeId){n("Assignee is required");return}E(!0);try{await Y1(A.id,{title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||null,priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||null}),y(re=>re.map(me=>me.id===A.id?{...me,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0}:me)),T({...A,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0,updatedAt:new Date().toISOString()}),B(!1),s("Task updated successfully")}catch(re){n(re.message||"Failed to update task")}finally{E(!1)}}},sn=(re,me=1200,be=1200,_e=.8)=>new Promise((Ee,Oe)=>{const Xe=new FileReader;Xe.onload=ct=>{const Ve=new Image;Ve.onload=()=>{let Je=Ve.width,He=Ve.height;Je>He?Je>me&&(He=He*me/Je,Je=me):He>be&&(Je=Je*be/He,He=be);const Le=document.createElement("canvas");Le.width=Je,Le.height=He;const tt=Le.getContext("2d");tt?(tt.drawImage(Ve,0,0,Je,He),Ee(Le.toDataURL("image/jpeg",_e))):Oe(new Error("Canvas context not available"))},Ve.onerror=()=>Oe(new Error("Failed to load image")),Ve.src=ct.target?.result},Xe.onerror=()=>Oe(new Error("Failed to read file")),Xe.readAsDataURL(re)}),Wn=async re=>{const me=re.target.files?.[0];if(me){if(!me.type.startsWith("image/")){n("Please select an image file");return}if(me.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const be=await sn(me,1200,1200,.8);O(be),H(me)}catch(be){n(be.message||"Failed to process image")}}},or=re=>{const me=re.target.value,be=re.target.selectionStart;ee(me),Y(be);const _e=me.substring(0,be),Ee=_e.lastIndexOf("@");if(Ee!==-1){const Oe=_e.substring(Ee+1),Xe=Ee>0?_e[Ee-1]:" ";if((Xe===" "||Xe===`
`||Ee===0)&&!Oe.includes(" ")&&!Oe.includes(`
`)){Ce(Oe);const ct=b.filter(Ve=>Ve.name.toLowerCase().includes(Oe.toLowerCase())||Ve.email.toLowerCase().includes(Oe.toLowerCase()));ye(ct.slice(0,5)),ne(!0);return}}ne(!1)},Vn=re=>{const be=Q.substring(0,de).lastIndexOf("@"),_e=Q.substring(de),Oe=`${Q.substring(0,be)}@${re.name} ${_e}`;if(ee(Oe),ne(!1),kt.current){kt.current.focus();const Xe=be+re.name.length+2;kt.current.setSelectionRange(Xe,Xe)}},fn=re=>{const me=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,be=[];let _e;for(;(_e=me.exec(re))!==null;){const Ee=_e[1].trim(),Oe=b.find(Xe=>Xe.name.toLowerCase()===Ee.toLowerCase());Oe&&Oe.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&be.push(Oe.id)}return[...new Set(be)]},Ke=re=>{const me=[],be=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let _e=0,Ee,Oe=0;for(;(Ee=be.exec(re))!==null;){Ee.index>_e&&me.push(re.substring(_e,Ee.index));const Xe=Ee[1].trim();b.find(Ve=>Ve.name.toLowerCase()===Xe.toLowerCase())?me.push(a.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Xe]},Oe++)):me.push(`@${Xe}`),_e=be.lastIndex}return _e<re.length&&me.push(re.substring(_e)),me.length>0?me:re},Nt=async()=>{if(A){if(!Q.trim()&&!z){n("Please add a note or attach an image");return}K(!0);try{const re=JSON.parse(localStorage.getItem("user_data")||"{}"),me={id:`note_${Date.now()}`,userId:re.id,userName:re.name||"Unknown User",text:Q.trim(),createdAt:new Date().toISOString()};W&&z&&(me.imageUrl=W,me.imageName=z.name,me.imageMimeType=z.type);const be=[...A.notes||[],me];await Y1(A.id,{notes:be});const _e=fn(Q);if(_e.length>0)for(const Ee of _e)try{await Mp({userId:Ee,notificationType:"task-mention",title:"You were mentioned in a task",message:`${re.name||"Someone"} mentioned you in task: "${A.title}"`,link:`/?tab=tasks&task=${A.id}`})}catch(Oe){console.error("Failed to send mention notification:",Oe)}T({...A,notes:be}),y(Ee=>Ee.map(Oe=>Oe.id===A.id?{...Oe,notes:be}:Oe)),ee(""),O(""),H(null),Me.current&&(Me.current.value=""),s("Note added successfully")}catch(re){n(re.message||"Failed to add note")}finally{K(!1)}}},Vt=()=>{if(l==="daily")return a.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[vt.map(re=>{const me=re*80+20;return a.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${me}px`},children:[a.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:re===0?"12 AM":re===12?"12 PM":re>12?`${re-12} PM`:`${re} AM`}),a.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),a.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},re)}),Ne&&u.map(re=>{const me=tr(re);return a.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${me.top}px`,height:`${me.height}px`},children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:re.title}),a.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:a.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.jsx(Os,{className:"w-3 h-3 text-indigo-400"})," ",$e(re.start)," - ",$e(re.end)]})})]}),re.htmlLink&&a.jsx("a",{href:re.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:a.jsx(Di,{className:"w-3.5 h-3.5"})})]})]},re.id)}),!S&&(Ne&&u.length===0||!Ne&&(!nt||d.length===0))&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[a.jsx(ha,{className:"w-16 h-16 text-slate-200 mb-4"}),a.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const re=Yt(i),me=new Date;return me.setHours(0,0,0,0),a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((be,_e)=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:be})},be))}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:re.map((be,_e)=>{const Ee=Cr(be),Oe=nt?lr(Ee):[],Xe=Ne?Ut(be):[];let ct=[],Ve=[];nt&&Ne?Oe.length>0&&Xe.length>0?(ct=Oe.slice(0,1),Ve=Xe.slice(0,1)):Oe.length>0?ct=Oe.slice(0,2):Xe.length>0&&(Ve=Xe.slice(0,2)):nt?ct=Oe.slice(0,2):Ne&&(Ve=Xe.slice(0,2));const Je=[...Oe,...Xe],He=be.toDateString()===me.toDateString(),Le=be.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(be)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${He?"bg-indigo-50 border-indigo-300":Le?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-xs font-black mb-2 ${He?"text-indigo-600":Le?"text-slate-900":"text-slate-400"}`,children:be.getDate()}),a.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[nt&&ct.map(tt=>a.jsx("div",{onClick:ht=>{ht.stopPropagation(),T(tt)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${tt.priority==="High"?"bg-red-100 text-red-700":tt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:tt.title,children:tt.title},tt.id)),Ne&&Ve.map(tt=>a.jsx("div",{onClick:ht=>{ht.stopPropagation(),tt.htmlLink&&window.open(tt.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:tt.title,children:tt.title},tt.id)),ct.length+Ve.length<Je.length&&a.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",Je.length-(ct.length+Ve.length)," more"]})]})]},_e)})})]})}if(l==="monthly"){const re=Fr(i),me=new Date;me.setHours(0,0,0,0);const be=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:be.map(_e=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:_e})},_e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:re.map((_e,Ee)=>{const Oe=Cr(_e),Xe=nt?lr(Oe):[],ct=Ne?Ut(_e):[];let Ve=[],Je=[];nt&&Ne?Xe.length>0&&ct.length>0?(Ve=Xe.slice(0,1),Je=ct.slice(0,1)):Xe.length>0?Ve=Xe.slice(0,1):ct.length>0&&(Je=ct.slice(0,1)):nt?Ve=Xe.slice(0,1):Ne&&(Je=ct.slice(0,1));const He=[...Xe,...ct],Le=_e.toDateString()===me.toDateString(),tt=_e.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(_e)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${Le?"bg-indigo-50 border-indigo-300":tt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-[10px] font-black mb-1 ${Le?"text-indigo-600":tt?"text-slate-900":"text-slate-400"}`,children:_e.getDate()}),a.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[nt&&Ve.map(ht=>a.jsx("div",{onClick:Pt=>{Pt.stopPropagation(),T(ht)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${ht.priority==="High"?"bg-red-100 text-red-700":ht.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:ht.title,children:ht.title},ht.id)),Ne&&Je.map(ht=>a.jsx("div",{onClick:Pt=>{Pt.stopPropagation(),ht.htmlLink&&window.open(ht.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:ht.title,children:ht.title},ht.id)),Ve.length+Je.length<He.length&&a.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",He.length-(Ve.length+Je.length)]})]})]},Ee)})})]})}};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const re=new Date(i);re.setMonth(re.getMonth()-1),o(re)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:a.jsx(Aj,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>{const re=new Date(i);re.setMonth(re.getMonth()+1),o(re)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:a.jsx(os,{className:"w-4 h-4"})})]}):l==="weekly"?a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const re=Yt(i),me=re[0],be=re[6];return`${me.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${be.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[a.jsx(Os,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:ut})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:Ne,onChange:re=>Re(re.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ne?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ne&&a.jsx(Ad,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:nt,onChange:re=>xt(re.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${nt?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:nt&&a.jsx(Ad,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(re=>a.jsx("button",{onClick:()=>c(re),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===re?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:re},re))}),a.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:rr,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(Aj,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${$t()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),a.jsx("button",{onClick:ft,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(os,{className:"w-5 h-5"})})]}),a.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"New Entry"]})]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[a.jsx(Os,{className:"w-3 h-3 text-slate-500"}),a.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:ut})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[S&&a.jsx(wt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${j?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:j?"Google Workspace Connected":"Google Disconnected"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&nt&&d.length>0&&a.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(yn,{className:"w-3 h-3"})," Today's Deliverables"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:d.map(re=>a.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:re.status==="Done"?a.jsx(yn,{className:"w-4 h-4 text-emerald-500"}):a.jsx(bd,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-xs font-bold truncate ${re.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:re.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${bt(re.priority)}`,children:re.priority})})]})]},re.id))})]}),Vt()]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx(Ji,{className:"w-8 h-8 text-indigo-400 mb-6"}),a.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),a.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),a.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:a.jsx(a0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),A&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Er}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:Er,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(yn,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[I?a.jsx("input",{type:"text",value:M.title,onChange:re=>q(me=>({...me,title:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:A.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${A.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":A.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":A.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:A.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",A.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:I?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{B(!1),q({title:A.title,category:A.category||"",description:A.description||"",dueDate:A.dueDate||"",priority:A.priority||"Medium",status:A.status||"Todo",assigneeId:A.assigneeId,projectId:A.projectId||""})},disabled:C,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Yr,disabled:C||!M.title.trim()||!M.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:C?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),I?a.jsxs("select",{value:M.assigneeId,onChange:re=>q(me=>({...me,assigneeId:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),b.map(re=>a.jsx("option",{value:re.id,children:re.name},re.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:b.find(re=>re.id===A.assigneeId)?.name?.charAt(0)||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:b.find(re=>re.id===A.assigneeId)?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),I?a.jsxs("select",{value:M.projectId,onChange:re=>q(me=>({...me,projectId:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),v.filter(re=>!re.archived).map(re=>a.jsx("option",{value:re.id,children:re.title},re.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:A.projectId?v.find(re=>re.id===A.projectId)?.title||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ka,{className:"w-4 h-4 text-indigo-500"})," Description"]}),I?a.jsx("textarea",{rows:6,value:M.description,onChange:re=>q(me=>({...me,description:re.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:A.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3.5 h-3.5"})," Task Category"]}),I?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:te?"__new__":M.category||"",onChange:re=>{const me=re.target.value;me==="__new__"?(ae(!0),q(be=>({...be,category:""}))):(ae(!1),q(be=>({...be,category:me})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),G.map(re=>a.jsx("option",{value:re,children:re},re)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),te&&a.jsx("input",{type:"text",value:M.category,onChange:re=>q(me=>({...me,category:re.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:A.category?a.jsxs(a.Fragment,{children:[a.jsx(Es,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:A.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),I?a.jsx("input",{type:"date",value:M.dueDate,onChange:re=>q(me=>({...me,dueDate:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:A.dueDate?wr(A.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),I?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(re=>a.jsx("button",{onClick:()=>q(me=>({...me,priority:re})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${M.priority===re?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:re},re))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${A.priority==="High"?"bg-red-50 text-red-600":A.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:A.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),I?a.jsxs("select",{value:M.status,onChange:re=>q(me=>({...me,status:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[A.status==="Done"?a.jsx(yn,{className:"w-5 h-5 text-emerald-500"}):A.status==="In Progress"?a.jsx(Os,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(bd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:A.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",A.notes&&A.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:A.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:kt,rows:3,value:Q,onChange:or,onBlur:()=>{setTimeout(()=>ne(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),De&&ve.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(ax,{className:"w-3 h-3"}),"Mention User"]}),ve.map(re=>a.jsxs("button",{onClick:()=>Vn(re),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:re.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:re.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:re.email})]})]},re.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:W?a.jsx(bl,{className:"w-4 h-4"}):a.jsx(Wu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:W?z?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:Me,type:"file",accept:"image/*",onChange:Wn,className:"hidden"})]}),a.jsx("button",{onClick:Nt,disabled:R||!Q.trim()&&!z,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:R?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Send"]})})]}),W&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:W,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{O(""),H(null),Me.current&&(Me.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(ir,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:A.notes&&A.notes.length>0?[...A.notes].reverse().map(re=>{const me=e?.role==="Admin"||re.userId===e?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:re.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:re.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(re.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),me&&a.jsx("button",{onClick:()=>ce(re.id),disabled:le===re.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:le===re.id?a.jsx(wt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),re.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Ke(re.text)}),re.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:re.imageUrl,alt:re.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const be=window.open();be&&be.document.write(`<img src="${re.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},re.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>pe(!Ae),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(os,{className:`w-4 h-4 text-slate-400 transition-transform ${Ae?"rotate-90":""}`})]}),Ae&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:A.createdAt?new Date(A.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),A.updatedAt&&A.updatedAt!==A.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(A.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),A.notes&&A.notes.map((re,me)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[re.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(re.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},re.id)),(!A.notes||A.notes.length===0)&&(!A.updatedAt||A.updatedAt===A.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[a.jsx("button",{onClick:()=>{Pe(A),Er()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ur,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:Er,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(yn,{className:"w-5 h-5"})," Close"]})]})]})]}),ue&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Pe(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(ue)try{await A7(ue.id),y(re=>re.filter(me=>me.id!==ue.id)),m(re=>re.filter(me=>me.id!==ue.id)),Pe(null),T(null),s("Task deleted successfully")}catch(re){n(re.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},Hve=()=>{const{showSuccess:e}=ba(),[t,r]=U.useState(null),[n,s]=U.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:a.jsx(ai,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:a.jsx(rD,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:a.jsx(W0,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[a.jsx(vy,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=n.includes(l.id),u=t===l.id;return a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&a.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),a.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?a.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):a.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),a.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[a.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:u||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:u?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):c?a.jsxs(a.Fragment,{children:["Connected ",a.jsx(yn,{className:"w-4 h-4"})]}):l.isComingSoon?a.jsx(a.Fragment,{children:"Development in Progress"}):a.jsxs(a.Fragment,{children:["Connect ",l.name," ",a.jsx(ho,{className:"w-4 h-4"})]})}),a.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",a.jsx(Di,{className:"w-3 h-3"})]})]})]},l.id)})}),a.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:a.jsx(Xv,{className:"w-6 h-6 text-indigo-400"})}),a.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",a.jsx("br",{}),a.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),a.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),a.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:a.jsx(Xv,{className:"w-full h-full text-indigo-600"})})]})]})};const{entries:P9,setPrototypeOf:B8,isFrozen:Wve,getPrototypeOf:Vve,getOwnPropertyDescriptor:Gve}=Object;let{freeze:Sl,seal:uu,create:_k}=Object,{apply:Ak,construct:Ck}=typeof Reflect<"u"&&Reflect;Sl||(Sl=function(t){return t});uu||(uu=function(t){return t});Ak||(Ak=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return t.apply(r,s)});Ck||(Ck=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new t(...n)});const Ov=_l(Array.prototype.forEach),Kve=_l(Array.prototype.lastIndexOf),U8=_l(Array.prototype.pop),Cm=_l(Array.prototype.push),Xve=_l(Array.prototype.splice),Hv=_l(String.prototype.toLowerCase),bj=_l(String.prototype.toString),wj=_l(String.prototype.match),Em=_l(String.prototype.replace),Yve=_l(String.prototype.indexOf),Jve=_l(String.prototype.trim),Iu=_l(Object.prototype.hasOwnProperty),ml=_l(RegExp.prototype.test),Tm=Qve(TypeError);function _l(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return Ak(e,t,n)}}function Qve(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ck(e,r)}}function Ln(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hv;B8&&B8(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(Wve(t)||(t[n]=i),s=i)}e[s]=!0}return e}function Zve(e){for(let t=0;t<e.length;t++)Iu(e,t)||(e[t]=null);return e}function fd(e){const t=_k(null);for(const[r,n]of P9(e))Iu(e,r)&&(Array.isArray(n)?t[r]=Zve(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=fd(n):t[r]=n);return t}function Om(e,t){for(;e!==null;){const n=Gve(e,t);if(n){if(n.get)return _l(n.get);if(typeof n.value=="function")return _l(n.value)}e=Vve(e)}function r(){return null}return r}const q8=Sl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Nj=Sl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jj=Sl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),e1e=Sl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kj=Sl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),t1e=Sl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$8=Sl(["#text"]),z8=Sl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Sj=Sl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H8=Sl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pv=Sl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),r1e=uu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),n1e=uu(/<%[\w\W]*|[\w\W]*%>/gm),a1e=uu(/\$\{[\w\W]*/gm),s1e=uu(/^data-[\-\w.\u00B7-\uFFFF]+$/),i1e=uu(/^aria-[\-\w]+$/),I9=uu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),o1e=uu(/^(?:\w+script|data):/i),l1e=uu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),D9=uu(/^html$/i),c1e=uu(/^[a-z][.\w]*(-[.\w]+)+$/i);var W8=Object.freeze({__proto__:null,ARIA_ATTR:i1e,ATTR_WHITESPACE:l1e,CUSTOM_ELEMENT:c1e,DATA_ATTR:s1e,DOCTYPE_NAME:D9,ERB_EXPR:n1e,IS_ALLOWED_URI:I9,IS_SCRIPT_OR_DATA:o1e,MUSTACHE_EXPR:r1e,TMPLIT_EXPR:a1e});const Pm={element:1,text:3,progressingInstruction:7,comment:8,document:9},u1e=function(){return typeof window>"u"?null:window},d1e=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},V8=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function L9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u1e();const t=He=>L9(He);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Pm.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:m,trustedTypes:p}=e,y=c.prototype,v=Om(y,"cloneNode"),g=Om(y,"remove"),b=Om(y,"nextSibling"),w=Om(y,"childNodes"),j=Om(y,"parentNode");if(typeof o=="function"){const He=r.createElement("template");He.content&&He.content.ownerDocument&&(r=He.content.ownerDocument)}let N,S="";const{implementation:P,createNodeIterator:A,createDocumentFragment:T,getElementsByTagName:I}=r,{importNode:B}=n;let C=V8();t.isSupported=typeof P9=="function"&&typeof j=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:M,TMPLIT_EXPR:q,DATA_ATTR:G,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:ae,CUSTOM_ELEMENT:Q}=W8;let{IS_ALLOWED_URI:ee}=W8,W=null;const O=Ln({},[...q8,...Nj,...jj,...kj,...$8]);let z=null;const H=Ln({},[...z8,...Sj,...H8,...Pv]);let R=Object.seal(_k(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,le=null;const he=Object.seal(_k(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,ce=!0,De=!1,ne=!0,Ue=!1,Ce=!0,de=!1,Y=!1,ve=!1,ye=!1,Ae=!1,pe=!1,ue=!0,Pe=!1;const Ne="user-content-";let Re=!0,nt=!1,xt={},kt=null;const Me=Ln({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let vt=null;const ut=Ln({},["audio","video","img","source","image","track"]);let lt=null;const pr=Ln({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),rr="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",$t="http://www.w3.org/1999/xhtml";let tr=$t,$e=!1,bt=null;const jr=Ln({},[rr,ft,$t],bj);let Yt=Ln({},["mi","mo","mn","ms","mtext"]),Fr=Ln({},["annotation-xml"]);const Cr=Ln({},["title","style","font","a","script"]);let lr=null;const Ut=["application/xhtml+xml","text/html"],wr="text/html";let Er=null,Yr=null;const sn=r.createElement("form"),Wn=function(Le){return Le instanceof RegExp||Le instanceof Function},or=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Yr&&Yr===Le)){if((!Le||typeof Le!="object")&&(Le={}),Le=fd(Le),lr=Ut.indexOf(Le.PARSER_MEDIA_TYPE)===-1?wr:Le.PARSER_MEDIA_TYPE,Er=lr==="application/xhtml+xml"?bj:Hv,W=Iu(Le,"ALLOWED_TAGS")?Ln({},Le.ALLOWED_TAGS,Er):O,z=Iu(Le,"ALLOWED_ATTR")?Ln({},Le.ALLOWED_ATTR,Er):H,bt=Iu(Le,"ALLOWED_NAMESPACES")?Ln({},Le.ALLOWED_NAMESPACES,bj):jr,lt=Iu(Le,"ADD_URI_SAFE_ATTR")?Ln(fd(pr),Le.ADD_URI_SAFE_ATTR,Er):pr,vt=Iu(Le,"ADD_DATA_URI_TAGS")?Ln(fd(ut),Le.ADD_DATA_URI_TAGS,Er):ut,kt=Iu(Le,"FORBID_CONTENTS")?Ln({},Le.FORBID_CONTENTS,Er):Me,K=Iu(Le,"FORBID_TAGS")?Ln({},Le.FORBID_TAGS,Er):fd({}),le=Iu(Le,"FORBID_ATTR")?Ln({},Le.FORBID_ATTR,Er):fd({}),xt=Iu(Le,"USE_PROFILES")?Le.USE_PROFILES:!1,ie=Le.ALLOW_ARIA_ATTR!==!1,ce=Le.ALLOW_DATA_ATTR!==!1,De=Le.ALLOW_UNKNOWN_PROTOCOLS||!1,ne=Le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ue=Le.SAFE_FOR_TEMPLATES||!1,Ce=Le.SAFE_FOR_XML!==!1,de=Le.WHOLE_DOCUMENT||!1,ye=Le.RETURN_DOM||!1,Ae=Le.RETURN_DOM_FRAGMENT||!1,pe=Le.RETURN_TRUSTED_TYPE||!1,ve=Le.FORCE_BODY||!1,ue=Le.SANITIZE_DOM!==!1,Pe=Le.SANITIZE_NAMED_PROPS||!1,Re=Le.KEEP_CONTENT!==!1,nt=Le.IN_PLACE||!1,ee=Le.ALLOWED_URI_REGEXP||I9,tr=Le.NAMESPACE||$t,Yt=Le.MATHML_TEXT_INTEGRATION_POINTS||Yt,Fr=Le.HTML_INTEGRATION_POINTS||Fr,R=Le.CUSTOM_ELEMENT_HANDLING||{},Le.CUSTOM_ELEMENT_HANDLING&&Wn(Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(R.tagNameCheck=Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&Wn(Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(R.attributeNameCheck=Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&typeof Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(R.allowCustomizedBuiltInElements=Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(ce=!1),Ae&&(ye=!0),xt&&(W=Ln({},$8),z=[],xt.html===!0&&(Ln(W,q8),Ln(z,z8)),xt.svg===!0&&(Ln(W,Nj),Ln(z,Sj),Ln(z,Pv)),xt.svgFilters===!0&&(Ln(W,jj),Ln(z,Sj),Ln(z,Pv)),xt.mathMl===!0&&(Ln(W,kj),Ln(z,H8),Ln(z,Pv))),Le.ADD_TAGS&&(typeof Le.ADD_TAGS=="function"?he.tagCheck=Le.ADD_TAGS:(W===O&&(W=fd(W)),Ln(W,Le.ADD_TAGS,Er))),Le.ADD_ATTR&&(typeof Le.ADD_ATTR=="function"?he.attributeCheck=Le.ADD_ATTR:(z===H&&(z=fd(z)),Ln(z,Le.ADD_ATTR,Er))),Le.ADD_URI_SAFE_ATTR&&Ln(lt,Le.ADD_URI_SAFE_ATTR,Er),Le.FORBID_CONTENTS&&(kt===Me&&(kt=fd(kt)),Ln(kt,Le.FORBID_CONTENTS,Er)),Le.ADD_FORBID_CONTENTS&&(kt===Me&&(kt=fd(kt)),Ln(kt,Le.ADD_FORBID_CONTENTS,Er)),Re&&(W["#text"]=!0),de&&Ln(W,["html","head","body"]),W.table&&(Ln(W,["tbody"]),delete K.tbody),Le.TRUSTED_TYPES_POLICY){if(typeof Le.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tm('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tm('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Le.TRUSTED_TYPES_POLICY,S=N.createHTML("")}else N===void 0&&(N=d1e(p,s)),N!==null&&typeof S=="string"&&(S=N.createHTML(""));Sl&&Sl(Le),Yr=Le}},Vn=Ln({},[...Nj,...jj,...e1e]),fn=Ln({},[...kj,...t1e]),Ke=function(Le){let tt=j(Le);(!tt||!tt.tagName)&&(tt={namespaceURI:tr,tagName:"template"});const ht=Hv(Le.tagName),Pt=Hv(tt.tagName);return bt[Le.namespaceURI]?Le.namespaceURI===ft?tt.namespaceURI===$t?ht==="svg":tt.namespaceURI===rr?ht==="svg"&&(Pt==="annotation-xml"||Yt[Pt]):!!Vn[ht]:Le.namespaceURI===rr?tt.namespaceURI===$t?ht==="math":tt.namespaceURI===ft?ht==="math"&&Fr[Pt]:!!fn[ht]:Le.namespaceURI===$t?tt.namespaceURI===ft&&!Fr[Pt]||tt.namespaceURI===rr&&!Yt[Pt]?!1:!fn[ht]&&(Cr[ht]||!Vn[ht]):!!(lr==="application/xhtml+xml"&&bt[Le.namespaceURI]):!1},Nt=function(Le){Cm(t.removed,{element:Le});try{j(Le).removeChild(Le)}catch{g(Le)}},Vt=function(Le,tt){try{Cm(t.removed,{attribute:tt.getAttributeNode(Le),from:tt})}catch{Cm(t.removed,{attribute:null,from:tt})}if(tt.removeAttribute(Le),Le==="is")if(ye||Ae)try{Nt(tt)}catch{}else try{tt.setAttribute(Le,"")}catch{}},re=function(Le){let tt=null,ht=null;if(ve)Le="<remove></remove>"+Le;else{const vr=wj(Le,/^[\r\n\t ]+/);ht=vr&&vr[0]}lr==="application/xhtml+xml"&&tr===$t&&(Le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Le+"</body></html>");const Pt=N?N.createHTML(Le):Le;if(tr===$t)try{tt=new m().parseFromString(Pt,lr)}catch{}if(!tt||!tt.documentElement){tt=P.createDocument(tr,"template",null);try{tt.documentElement.innerHTML=$e?S:Pt}catch{}}const Mt=tt.body||tt.documentElement;return Le&&ht&&Mt.insertBefore(r.createTextNode(ht),Mt.childNodes[0]||null),tr===$t?I.call(tt,de?"html":"body")[0]:de?tt.documentElement:Mt},me=function(Le){return A.call(Le.ownerDocument||Le,Le,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},be=function(Le){return Le instanceof d&&(typeof Le.nodeName!="string"||typeof Le.textContent!="string"||typeof Le.removeChild!="function"||!(Le.attributes instanceof f)||typeof Le.removeAttribute!="function"||typeof Le.setAttribute!="function"||typeof Le.namespaceURI!="string"||typeof Le.insertBefore!="function"||typeof Le.hasChildNodes!="function")},_e=function(Le){return typeof l=="function"&&Le instanceof l};function Ee(He,Le,tt){Ov(He,ht=>{ht.call(t,Le,tt,Yr)})}const Oe=function(Le){let tt=null;if(Ee(C.beforeSanitizeElements,Le,null),be(Le))return Nt(Le),!0;const ht=Er(Le.nodeName);if(Ee(C.uponSanitizeElement,Le,{tagName:ht,allowedTags:W}),Ce&&Le.hasChildNodes()&&!_e(Le.firstElementChild)&&ml(/<[/\w!]/g,Le.innerHTML)&&ml(/<[/\w!]/g,Le.textContent)||Le.nodeType===Pm.progressingInstruction||Ce&&Le.nodeType===Pm.comment&&ml(/<[/\w]/g,Le.data))return Nt(Le),!0;if(!(he.tagCheck instanceof Function&&he.tagCheck(ht))&&(!W[ht]||K[ht])){if(!K[ht]&&ct(ht)&&(R.tagNameCheck instanceof RegExp&&ml(R.tagNameCheck,ht)||R.tagNameCheck instanceof Function&&R.tagNameCheck(ht)))return!1;if(Re&&!kt[ht]){const Pt=j(Le)||Le.parentNode,Mt=w(Le)||Le.childNodes;if(Mt&&Pt){const vr=Mt.length;for(let zr=vr-1;zr>=0;--zr){const on=v(Mt[zr],!0);on.__removalCount=(Le.__removalCount||0)+1,Pt.insertBefore(on,b(Le))}}}return Nt(Le),!0}return Le instanceof c&&!Ke(Le)||(ht==="noscript"||ht==="noembed"||ht==="noframes")&&ml(/<\/no(script|embed|frames)/i,Le.innerHTML)?(Nt(Le),!0):(Ue&&Le.nodeType===Pm.text&&(tt=Le.textContent,Ov([E,M,q],Pt=>{tt=Em(tt,Pt," ")}),Le.textContent!==tt&&(Cm(t.removed,{element:Le.cloneNode()}),Le.textContent=tt)),Ee(C.afterSanitizeElements,Le,null),!1)},Xe=function(Le,tt,ht){if(ue&&(tt==="id"||tt==="name")&&(ht in r||ht in sn))return!1;if(!(ce&&!le[tt]&&ml(G,tt))){if(!(ie&&ml(Z,tt))){if(!(he.attributeCheck instanceof Function&&he.attributeCheck(tt,Le))){if(!z[tt]||le[tt]){if(!(ct(Le)&&(R.tagNameCheck instanceof RegExp&&ml(R.tagNameCheck,Le)||R.tagNameCheck instanceof Function&&R.tagNameCheck(Le))&&(R.attributeNameCheck instanceof RegExp&&ml(R.attributeNameCheck,tt)||R.attributeNameCheck instanceof Function&&R.attributeNameCheck(tt,Le))||tt==="is"&&R.allowCustomizedBuiltInElements&&(R.tagNameCheck instanceof RegExp&&ml(R.tagNameCheck,ht)||R.tagNameCheck instanceof Function&&R.tagNameCheck(ht))))return!1}else if(!lt[tt]){if(!ml(ee,Em(ht,ae,""))){if(!((tt==="src"||tt==="xlink:href"||tt==="href")&&Le!=="script"&&Yve(ht,"data:")===0&&vt[Le])){if(!(De&&!ml(te,Em(ht,ae,"")))){if(ht)return!1}}}}}}}return!0},ct=function(Le){return Le!=="annotation-xml"&&wj(Le,Q)},Ve=function(Le){Ee(C.beforeSanitizeAttributes,Le,null);const{attributes:tt}=Le;if(!tt||be(Le))return;const ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let Pt=tt.length;for(;Pt--;){const Mt=tt[Pt],{name:vr,namespaceURI:zr,value:on}=Mt,Mn=Er(vr),ps=on;let xn=vr==="value"?ps:Jve(ps);if(ht.attrName=Mn,ht.attrValue=xn,ht.keepAttr=!0,ht.forceKeepAttr=void 0,Ee(C.uponSanitizeAttribute,Le,ht),xn=ht.attrValue,Pe&&(Mn==="id"||Mn==="name")&&(Vt(vr,Le),xn=Ne+xn),Ce&&ml(/((--!?|])>)|<\/(style|title|textarea)/i,xn)){Vt(vr,Le);continue}if(Mn==="attributename"&&wj(xn,"href")){Vt(vr,Le);continue}if(ht.forceKeepAttr)continue;if(!ht.keepAttr){Vt(vr,Le);continue}if(!ne&&ml(/\/>/i,xn)){Vt(vr,Le);continue}Ue&&Ov([E,M,q],Pn=>{xn=Em(xn,Pn," ")});const wa=Er(Le.nodeName);if(!Xe(wa,Mn,xn)){Vt(vr,Le);continue}if(N&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!zr)switch(p.getAttributeType(wa,Mn)){case"TrustedHTML":{xn=N.createHTML(xn);break}case"TrustedScriptURL":{xn=N.createScriptURL(xn);break}}if(xn!==ps)try{zr?Le.setAttributeNS(zr,vr,xn):Le.setAttribute(vr,xn),be(Le)?Nt(Le):U8(t.removed)}catch{Vt(vr,Le)}}Ee(C.afterSanitizeAttributes,Le,null)},Je=function He(Le){let tt=null;const ht=me(Le);for(Ee(C.beforeSanitizeShadowDOM,Le,null);tt=ht.nextNode();)Ee(C.uponSanitizeShadowNode,tt,null),Oe(tt),Ve(tt),tt.content instanceof i&&He(tt.content);Ee(C.afterSanitizeShadowDOM,Le,null)};return t.sanitize=function(He){let Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tt=null,ht=null,Pt=null,Mt=null;if($e=!He,$e&&(He="<!-->"),typeof He!="string"&&!_e(He))if(typeof He.toString=="function"){if(He=He.toString(),typeof He!="string")throw Tm("dirty is not a string, aborting")}else throw Tm("toString is not a function");if(!t.isSupported)return He;if(Y||or(Le),t.removed=[],typeof He=="string"&&(nt=!1),nt){if(He.nodeName){const on=Er(He.nodeName);if(!W[on]||K[on])throw Tm("root node is forbidden and cannot be sanitized in-place")}}else if(He instanceof l)tt=re("<!---->"),ht=tt.ownerDocument.importNode(He,!0),ht.nodeType===Pm.element&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?tt=ht:tt.appendChild(ht);else{if(!ye&&!Ue&&!de&&He.indexOf("<")===-1)return N&&pe?N.createHTML(He):He;if(tt=re(He),!tt)return ye?null:pe?S:""}tt&&ve&&Nt(tt.firstChild);const vr=me(nt?He:tt);for(;Pt=vr.nextNode();)Oe(Pt),Ve(Pt),Pt.content instanceof i&&Je(Pt.content);if(nt)return He;if(ye){if(Ae)for(Mt=T.call(tt.ownerDocument);tt.firstChild;)Mt.appendChild(tt.firstChild);else Mt=tt;return(z.shadowroot||z.shadowrootmode)&&(Mt=B.call(n,Mt,!0)),Mt}let zr=de?tt.outerHTML:tt.innerHTML;return de&&W["!doctype"]&&tt.ownerDocument&&tt.ownerDocument.doctype&&tt.ownerDocument.doctype.name&&ml(D9,tt.ownerDocument.doctype.name)&&(zr="<!DOCTYPE "+tt.ownerDocument.doctype.name+`>
`+zr),Ue&&Ov([E,M,q],on=>{zr=Em(zr,on," ")}),N&&pe?N.createHTML(zr):zr},t.setConfig=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};or(He),Y=!0},t.clearConfig=function(){Yr=null,Y=!1},t.isValidAttribute=function(He,Le,tt){Yr||or({});const ht=Er(He),Pt=Er(Le);return Xe(ht,Pt,tt)},t.addHook=function(He,Le){typeof Le=="function"&&Cm(C[He],Le)},t.removeHook=function(He,Le){if(Le!==void 0){const tt=Kve(C[He],Le);return tt===-1?void 0:Xve(C[He],tt,1)[0]}return U8(C[He])},t.removeHooks=function(He){C[He]=[]},t.removeAllHooks=function(){C=V8()},t}var G8=L9(),Wv={exports:{}};var f1e=Wv.exports,K8;function h1e(){return K8||(K8=1,(function(e,t){(function(n,s){e.exports=s()})(typeof self<"u"?self:f1e,function(){return(function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),u=s(46),f=s(47),d=s(48),m=s(49),p=s(12),y=s(32),v=s(33),g=s(31),b=s(1),w={Scope:b.Scope,create:b.create,find:b.find,query:b.query,register:b.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:d.default,Scroll:c.default,Block:f.default,Inline:u.default,Text:m.default,Attributor:{Attribute:p.default,Class:y.default,Style:v.default,Store:g.default}};n.default=w}),(function(r,n,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var j in w)w.hasOwnProperty(j)&&(b[j]=w[j])};return function(b,w){g(b,w);function j(){this.constructor=b}b.prototype=w===null?Object.create(w):(j.prototype=w.prototype,new j)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=(function(g){i(b,g);function b(w){var j=this;return w="[Parchment] "+w,j=g.call(this,w)||this,j.message=w,j.name=j.constructor.name,j}return b})(Error);n.ParchmentError=o;var l={},c={},u={},f={};n.DATA_KEY="__blot";var d;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function m(g,b){var w=y(g);if(w==null)throw new o("Unable to create "+g+" blot");var j=w,N=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(b);return new j(N,b)}n.create=m;function p(g,b){return b===void 0&&(b=!1),g==null?null:g[n.DATA_KEY]!=null?g[n.DATA_KEY].blot:b?p(g.parentNode,b):null}n.find=p;function y(g,b){b===void 0&&(b=d.ANY);var w;if(typeof g=="string")w=f[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)w=f.text;else if(typeof g=="number")g&d.LEVEL&d.BLOCK?w=f.block:g&d.LEVEL&d.INLINE&&(w=f.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var N in j)if(w=c[j[N]],w)break;w=w||u[g.tagName]}return w==null?null:b&d.LEVEL&w.scope&&b&d.TYPE&w.scope?w:null}n.query=y;function v(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];if(g.length>1)return g.map(function(N){return v(N)});var w=g[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new o("Invalid definition");if(w.blotName==="abstract")throw new o("Cannot register abstract class");if(f[w.blotName||w.attrName]=w,typeof w.keyName=="string")l[w.keyName]=w;else if(w.className!=null&&(c[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(N){return N.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var j=Array.isArray(w.tagName)?w.tagName:[w.tagName];j.forEach(function(N){(u[N]==null||w.className==null)&&(u[N]=w)})}return w}n.register=v}),(function(r,n,s){var i=s(51),o=s(11),l=s(3),c=s(20),u="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,m){var p={};return d.length===0?this:(p.insert=d,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,m){if(d<=0)return this;var p={retain:d};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},f.prototype.push=function(d){var m=this.ops.length,p=this.ops[m-1];if(d=l(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(d),this;if(o(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this}}return m===this.ops.length?this.ops.push(d):this.ops.splice(m,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var m=[],p=[];return this.forEach(function(y){var v=d(y)?m:p;v.push(y)}),[m,p]},f.prototype.reduce=function(d,m){return this.ops.reduce(d,m)},f.prototype.changeLength=function(){return this.reduce(function(d,m){return m.insert?d+c.length(m):m.delete?d-m.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,m){return d+c.length(m)},0)},f.prototype.slice=function(d,m){d=d||0,typeof m!="number"&&(m=1/0);for(var p=[],y=c.iterator(this.ops),v=0;v<m&&y.hasNext();){var g;v<d?g=y.next(d-v):(g=y.next(m-v),p.push(g)),v+=c.length(g)}return new f(p)},f.prototype.compose=function(d){var m=c.iterator(this.ops),p=c.iterator(d.ops),y=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;m.peekType()==="insert"&&m.peekLength()<=g;)g-=m.peekLength(),y.push(m.next());v.retain-g>0&&p.next(v.retain-g)}for(var b=new f(y);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")b.push(p.next());else if(m.peekType()==="delete")b.push(m.next());else{var w=Math.min(m.peekLength(),p.peekLength()),j=m.next(w),N=p.next(w);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=w:S.insert=j.insert;var P=c.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(P&&(S.attributes=P),b.push(S),!p.hasNext()&&o(b.ops[b.ops.length-1],S)){var A=new f(m.rest());return b.concat(A).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&b.push(N)}return b.chop()},f.prototype.concat=function(d){var m=new f(this.ops.slice());return d.ops.length>0&&(m.push(d.ops[0]),m.ops=m.ops.concat(d.ops.slice(1))),m},f.prototype.diff=function(d,m){if(this.ops===d.ops)return new f;var p=[this,d].map(function(w){return w.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:u;var N=w===d?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),y=new f,v=i(p[0],p[1],m),g=c.iterator(this.ops),b=c.iterator(d.ops);return v.forEach(function(w){for(var j=w[1].length;j>0;){var N=0;switch(w[0]){case i.INSERT:N=Math.min(b.peekLength(),j),y.push(b.next(N));break;case i.DELETE:N=Math.min(j,g.peekLength()),g.next(N),y.delete(N);break;case i.EQUAL:N=Math.min(g.peekLength(),b.peekLength(),j);var S=g.next(N),P=b.next(N);o(S.insert,P.insert)?y.retain(N,c.attributes.diff(S.attributes,P.attributes)):y.push(P).delete(N);break}j-=N}}),y.chop()},f.prototype.eachLine=function(d,m){m=m||`
`;for(var p=c.iterator(this.ops),y=new f,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var g=p.peek(),b=c.length(g)-p.peekLength(),w=typeof g.insert=="string"?g.insert.indexOf(m,b)-b:-1;if(w<0)y.push(p.next());else if(w>0)y.push(p.next(w));else{if(d(y,p.next(1).attributes||{},v)===!1)return;v+=1,y=new f}}y.length()>0&&d(y,{},v)},f.prototype.transform=function(d,m){if(m=!!m,typeof d=="number")return this.transformPosition(d,m);for(var p=c.iterator(this.ops),y=c.iterator(d.ops),v=new f;p.hasNext()||y.hasNext();)if(p.peekType()==="insert"&&(m||y.peekType()!=="insert"))v.retain(c.length(p.next()));else if(y.peekType()==="insert")v.push(y.next());else{var g=Math.min(p.peekLength(),y.peekLength()),b=p.next(g),w=y.next(g);if(b.delete)continue;w.delete?v.push(w):v.retain(g,c.attributes.transform(b.attributes,w.attributes,m))}return v.chop()},f.prototype.transformPosition=function(d,m){m=!!m;for(var p=c.iterator(this.ops),y=0;p.hasNext()&&y<=d;){var v=p.peekLength(),g=p.peekType();if(p.next(),g==="delete"){d-=Math.min(v,d-y);continue}else g==="insert"&&(y<d||!m)&&(d+=v);y+=v}return d},r.exports=f}),(function(r,n){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},u=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var y=s.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&s.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!y&&!v)return!1;var g;for(g in p);return typeof g>"u"||s.call(p,g)},f=function(p,y){o&&y.name==="__proto__"?o(p,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):p[y.name]=y.newValue},d=function(p,y){if(y==="__proto__")if(s.call(p,y)){if(l)return l(p,y).value}else return;return p[y]};r.exports=function m(){var p,y,v,g,b,w,j=arguments[0],N=1,S=arguments.length,P=!1;for(typeof j=="boolean"&&(P=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(p=arguments[N],p!=null)for(y in p)v=d(j,y),g=d(p,y),j!==g&&(P&&g&&(u(g)||(b=c(g)))?(b?(b=!1,w=v&&c(v)?v:[]):w=v&&u(v)?v:{},f(j,{name:y,newValue:m(P,w,g)})):typeof g<"u"&&f(j,{name:y,newValue:g}));return j}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=(function(){function C(E,M){for(var q=0;q<M.length;q++){var G=M[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(E,G.key,G)}}return function(E,M,q){return M&&C(E.prototype,M),q&&C(E,q),E}})(),o=function C(E,M,q){E===null&&(E=Function.prototype);var G=Object.getOwnPropertyDescriptor(E,M);if(G===void 0){var Z=Object.getPrototypeOf(E);return Z===null?void 0:C(Z,M,q)}else{if("value"in G)return G.value;var te=G.get;return te===void 0?void 0:te.call(q)}},l=s(3),c=j(l),u=s(2),f=j(u),d=s(0),m=j(d),p=s(16),y=j(p),v=s(6),g=j(v),b=s(7),w=j(b);function j(C){return C&&C.__esModule?C:{default:C}}function N(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function S(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function P(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var A=1,T=(function(C){P(E,C);function E(){return N(this,E),S(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return i(E,[{key:"attach",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(q,G){var Z=m.default.query(q,m.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,G)}},{key:"formatAt",value:function(q,G,Z,te){this.format(Z,te)}},{key:"insertAt",value:function(q,G,Z){if(typeof G=="string"&&G.endsWith(`
`)){var te=m.default.create(I.blotName);this.parent.insertBefore(te,q===0?this:this.next),te.insertAt(0,G.slice(0,-1))}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,q,G,Z)}}]),E})(m.default.Embed);T.scope=m.default.Scope.BLOCK_BLOT;var I=(function(C){P(E,C);function E(M){N(this,E);var q=S(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M));return q.cache={},q}return i(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(q,G){return G.length()===0?q:q.insert(G.value(),B(G))},new f.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(q,G){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,q,G),this.cache={}}},{key:"formatAt",value:function(q,G,Z,te){G<=0||(m.default.query(Z,m.default.Scope.BLOCK)?q+G===this.length()&&this.format(Z,te):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,q,Math.min(G,this.length()-q-1),Z,te),this.cache={})}},{key:"insertAt",value:function(q,G,Z){if(Z!=null)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,q,G,Z);if(G.length!==0){var te=G.split(`
`),ae=te.shift();ae.length>0&&(q<this.length()-1||this.children.tail==null?o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(q,this.length()-1),ae):this.children.tail.insertAt(this.children.tail.length(),ae),this.cache={});var Q=this;te.reduce(function(ee,W){return Q=Q.split(ee,!0),Q.insertAt(0,W),W.length},q+ae.length)}}},{key:"insertBefore",value:function(q,G){var Z=this.children.head;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,q,G),Z instanceof y.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(q,G){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,q,G),this.cache={}}},{key:"optimize",value:function(q){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,q),this.cache={}}},{key:"path",value:function(q){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,q,!0)}},{key:"removeChild",value:function(q){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,q),this.cache={}}},{key:"split",value:function(q){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(q===0||q>=this.length()-A)){var Z=this.clone();return q===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var te=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,q,G);return this.cache={},te}}}]),E})(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[g.default,m.default.Embed,w.default];function B(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C==null||(typeof C.formats=="function"&&(E=(0,c.default)(E,C.formats())),C.parent==null||C.parent.blotName=="scroll"||C.parent.statics.scope!==C.statics.scope)?E:B(C.parent,E)}n.bubbleFormats=B,n.BlockEmbed=T,n.default=I}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},o=(function(){function Q(ee,W){var O=[],z=!0,H=!1,R=void 0;try{for(var K=ee[Symbol.iterator](),le;!(z=(le=K.next()).done)&&(O.push(le.value),!(W&&O.length===W));z=!0);}catch(he){H=!0,R=he}finally{try{!z&&K.return&&K.return()}finally{if(H)throw R}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Q(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function Q(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&Q(ee.prototype,W),O&&Q(ee,O),ee}})();s(50);var c=s(2),u=B(c),f=s(14),d=B(f),m=s(8),p=B(m),y=s(9),v=B(y),g=s(0),b=B(g),w=s(15),j=B(w),N=s(3),S=B(N),P=s(10),A=B(P),T=s(34),I=B(T);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function C(Q,ee,W){return ee in Q?Object.defineProperty(Q,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):Q[ee]=W,Q}function E(Q,ee){if(!(Q instanceof ee))throw new TypeError("Cannot call a class as a function")}var M=(0,A.default)("quill"),q=(function(){l(Q,null,[{key:"debug",value:function(W){W===!0&&(W="log"),A.default.level(W)}},{key:"find",value:function(W){return W.__quill||b.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&M.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,O){var z=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var R=W.attrName||W.blotName;typeof R=="string"?this.register("formats/"+R,W,O):Object.keys(W).forEach(function(K){z.register(K,W[K],O)})}else this.imports[W]!=null&&!H&&M.warn("Overwriting "+W+" with",O),this.imports[W]=O,(W.startsWith("blots/")||W.startsWith("formats/"))&&O.blotName!=="abstract"?b.default.register(O):W.startsWith("modules")&&typeof O.register=="function"&&O.register()}}]);function Q(ee){var W=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,Q),this.options=G(ee,O),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",ee);this.options.debug&&Q.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=b.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(R){R===p.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(R,K){var le=W.selection.lastRange,he=le&&le.length===0?le.index:void 0;Z.call(W,function(){return W.editor.update(null,K,he)},R)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(Q,[{key:"addContainer",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var z=W;W=document.createElement("div"),W.classList.add(z)}return this.container.insertBefore(W,O),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,O,z){var H=this,R=te(W,O,z),K=o(R,4);return W=K[0],O=K[1],z=K[3],Z.call(this,function(){return H.editor.deleteText(W,O)},z,W,-1*O)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,O){var z=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Z.call(this,function(){var R=z.getSelection(!0),K=new u.default;if(R==null)return K;if(b.default.query(W,b.default.Scope.BLOCK))K=z.editor.formatLine(R.index,R.length,C({},W,O));else{if(R.length===0)return z.selection.format(W,O),K;K=z.editor.formatText(R.index,R.length,C({},W,O))}return z.setSelection(R,p.default.sources.SILENT),K},H)}},{key:"formatLine",value:function(W,O,z,H,R){var K=this,le=void 0,he=te(W,O,z,H,R),ie=o(he,4);return W=ie[0],O=ie[1],le=ie[2],R=ie[3],Z.call(this,function(){return K.editor.formatLine(W,O,le)},R,W,0)}},{key:"formatText",value:function(W,O,z,H,R){var K=this,le=void 0,he=te(W,O,z,H,R),ie=o(he,4);return W=ie[0],O=ie[1],le=ie[2],R=ie[3],Z.call(this,function(){return K.editor.formatText(W,O,le)},R,W,0)}},{key:"getBounds",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof W=="number"?z=this.selection.getBounds(W,O):z=this.selection.getBounds(W.index,W.length);var H=this.container.getBoundingClientRect();return{bottom:z.bottom-H.top,height:z.height,left:z.left-H.left,right:z.right-H.left,top:z.top-H.top,width:z.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=te(W,O),H=o(z,2);return W=H[0],O=H[1],this.editor.getContents(W,O)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,O):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,O)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,z=te(W,O),H=o(z,2);return W=H[0],O=H[1],this.editor.getText(W,O)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,O,z){var H=this,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Q.sources.API;return Z.call(this,function(){return H.editor.insertEmbed(W,O,z)},R,W)}},{key:"insertText",value:function(W,O,z,H,R){var K=this,le=void 0,he=te(W,0,z,H,R),ie=o(he,4);return W=ie[0],le=ie[2],R=ie[3],Z.call(this,function(){return K.editor.insertText(W,O,le)},R,W,O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,O,z){this.clipboard.dangerouslyPasteHTML(W,O,z)}},{key:"removeFormat",value:function(W,O,z){var H=this,R=te(W,O,z),K=o(R,4);return W=K[0],O=K[1],z=K[3],Z.call(this,function(){return H.editor.removeFormat(W,O)},z,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){W=new u.default(W);var H=O.getLength(),R=O.editor.deleteText(0,H),K=O.editor.applyDelta(W),le=K.ops[K.ops.length-1];le!=null&&typeof le.insert=="string"&&le.insert[le.insert.length-1]===`
`&&(O.editor.deleteText(O.getLength()-1,1),K.delete(1));var he=R.compose(K);return he},z)}},{key:"setSelection",value:function(W,O,z){if(W==null)this.selection.setRange(null,O||Q.sources.API);else{var H=te(W,O,z),R=o(H,4);W=R[0],O=R[1],z=R[3],this.selection.setRange(new w.Range(W,O),z),z!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,z=new u.default().insert(W);return this.setContents(z,O)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,O=this.scroll.update(W);return this.selection.update(W),O}},{key:"updateContents",value:function(W){var O=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){return W=new u.default(W),O.editor.applyDelta(W,z)},z,!0)}}]),Q})();q.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},q.events=p.default.events,q.sources=p.default.sources,q.version="1.3.7",q.imports={delta:u.default,parchment:b.default,"core/module":v.default,"core/theme":I.default};function G(Q,ee){if(ee=(0,S.default)(!0,{container:Q,modules:{clipboard:!0,keyboard:!0,history:!0}},ee),!ee.theme||ee.theme===q.DEFAULTS.theme)ee.theme=I.default;else if(ee.theme=q.import("themes/"+ee.theme),ee.theme==null)throw new Error("Invalid theme "+ee.theme+". Did you register it?");var W=(0,S.default)(!0,{},ee.theme.DEFAULTS);[W,ee].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(R){H.modules[R]===!0&&(H.modules[R]={})})});var O=Object.keys(W.modules).concat(Object.keys(ee.modules)),z=O.reduce(function(H,R){var K=q.import("modules/"+R);return K==null?M.error("Cannot load "+R+" module. Are you sure you registered it?"):H[R]=K.DEFAULTS||{},H},{});return ee.modules!=null&&ee.modules.toolbar&&ee.modules.toolbar.constructor!==Object&&(ee.modules.toolbar={container:ee.modules.toolbar}),ee=(0,S.default)(!0,{},q.DEFAULTS,{modules:z},W,ee),["bounds","container","scrollingContainer"].forEach(function(H){typeof ee[H]=="string"&&(ee[H]=document.querySelector(ee[H]))}),ee.modules=Object.keys(ee.modules).reduce(function(H,R){return ee.modules[R]&&(H[R]=ee.modules[R]),H},{}),ee}function Z(Q,ee,W,O){if(this.options.strict&&!this.isEnabled()&&ee===p.default.sources.USER)return new u.default;var z=W==null?null:this.getSelection(),H=this.editor.delta,R=Q();if(z!=null&&(W===!0&&(W=z.index),O==null?z=ae(z,R,ee):O!==0&&(z=ae(z,W,O,ee)),this.setSelection(z,p.default.sources.SILENT)),R.length()>0){var K,le=[p.default.events.TEXT_CHANGE,R,H,ee];if((K=this.emitter).emit.apply(K,[p.default.events.EDITOR_CHANGE].concat(le)),ee!==p.default.sources.SILENT){var he;(he=this.emitter).emit.apply(he,le)}}return R}function te(Q,ee,W,O,z){var H={};return typeof Q.index=="number"&&typeof Q.length=="number"?typeof ee!="number"?(z=O,O=W,W=ee,ee=Q.length,Q=Q.index):(ee=Q.length,Q=Q.index):typeof ee!="number"&&(z=O,O=W,W=ee,ee=0),(typeof W>"u"?"undefined":i(W))==="object"?(H=W,z=O):typeof W=="string"&&(O!=null?H[W]=O:z=W),z=z||p.default.sources.API,[Q,ee,H,z]}function ae(Q,ee,W,O){if(Q==null)return null;var z=void 0,H=void 0;if(ee instanceof u.default){var R=[Q.index,Q.index+Q.length].map(function(ie){return ee.transformPosition(ie,O!==p.default.sources.USER)}),K=o(R,2);z=K[0],H=K[1]}else{var le=[Q.index,Q.index+Q.length].map(function(ie){return ie<ee||ie===ee&&O===p.default.sources.USER?ie:W>=0?ie+W:Math.max(ee,ie+W)}),he=o(le,2);z=he[0],H=he[1]}return new w.Range(z,H-z)}n.expandConfig=G,n.overload=te,n.default=q}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=s(7),c=d(l),u=s(0),f=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function p(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var v=(function(g){y(b,g);function b(){return m(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"formatAt",value:function(j,N,S,P){if(b.compare(this.statics.blotName,S)<0&&f.default.query(S,f.default.Scope.BLOT)){var A=this.isolate(j,N);P&&A.wrap(S,P)}else o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,j,N,S,P)}},{key:"optimize",value:function(j){if(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,j),this.parent instanceof b&&b.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=b.order.indexOf(j),P=b.order.indexOf(N);return S>=0||P>=0?S-P:j===N?0:j<N?-1:1}}]),b})(f.default.Inline);v.allowedChildren=[v,f.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default.Text);n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function w(j,N){for(var S=0;S<N.length;S++){var P=N[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(j,P.key,P)}}return function(j,N,S){return N&&w(j.prototype,N),S&&w(j,S),j}})(),o=function w(j,N,S){j===null&&(j=Function.prototype);var P=Object.getOwnPropertyDescriptor(j,N);if(P===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:w(A,N,S)}else{if("value"in P)return P.value;var T=P.get;return T===void 0?void 0:T.call(S)}},l=s(54),c=d(l),u=s(10),f=d(u);function d(w){return w&&w.__esModule?w:{default:w}}function m(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")}function p(w,j){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:w}function y(w,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);w.prototype=Object.create(j&&j.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(w,j):w.__proto__=j)}var v=(0,f.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(w){document.addEventListener(w,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(P){if(P.__quill&&P.__quill.emitter){var A;(A=P.__quill.emitter).handleDOM.apply(A,N)}})})});var b=(function(w){y(j,w);function j(){m(this,j);var N=p(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var P=arguments.length,A=Array(P>1?P-1:0),T=1;T<P;T++)A[T-1]=arguments[T];(this.listeners[S.type]||[]).forEach(function(I){var B=I.node,C=I.handler;(S.target===B||B.contains(S.target))&&C.apply(void 0,[S].concat(A))})}},{key:"listenDOM",value:function(S,P,A){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:P,handler:A})}}]),j})(c.default);b.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources={API:"api",SILENT:"silent",USER:"user"},n.default=b}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=u};o.DEFAULTS={},n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(u){if(i.indexOf(u)<=i.indexOf(o)){for(var f,d=arguments.length,m=Array(d>1?d-1:0),p=1;p<d;p++)m[p-1]=arguments[p];(f=console)[u].apply(f,m)}}function c(u){return i.reduce(function(f,d){return f[d]=l.bind(console,d,u),f},{})}l.level=c.level=function(u){o=u},n.default=c}),(function(r,n,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(m,p,y){return y||(y={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?y.strict?m===p:m==p:d(m,p,y)};function u(m){return m==null}function f(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function d(m,p,y){var v,g;if(u(m)||u(p)||m.prototype!==p.prototype)return!1;if(l(m))return l(p)?(m=i.call(m),p=i.call(p),c(m,p,y)):!1;if(f(m)){if(!f(p)||m.length!==p.length)return!1;for(v=0;v<m.length;v++)if(m[v]!==p[v])return!1;return!0}try{var b=o(m),w=o(p)}catch{return!1}if(b.length!=w.length)return!1;for(b.sort(),w.sort(),v=b.length-1;v>=0;v--)if(b[v]!=w[v])return!1;for(v=b.length-1;v>=0;v--)if(g=b[v],!c(m[g],p[g],y))return!1;return typeof m==typeof p}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,u,f){f===void 0&&(f={}),this.attrName=c,this.keyName=u;var d=i.Scope.TYPE&i.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&i.Scope.LEVEL|d:this.scope=i.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},l.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},l.prototype.canAdd=function(c,u){var f=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},l})();n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=(function(){function T(I,B){var C=[],E=!0,M=!1,q=void 0;try{for(var G=I[Symbol.iterator](),Z;!(E=(Z=G.next()).done)&&(C.push(Z.value),!(B&&C.length===B));E=!0);}catch(te){M=!0,q=te}finally{try{!E&&G.return&&G.return()}finally{if(M)throw q}}return C}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,B){for(var C=0;C<B.length;C++){var E=B[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,B,C){return B&&T(I.prototype,B),C&&T(I,C),I}})(),l=function T(I,B,C){I===null&&(I=Function.prototype);var E=Object.getOwnPropertyDescriptor(I,B);if(E===void 0){var M=Object.getPrototypeOf(I);return M===null?void 0:T(M,B,C)}else{if("value"in E)return E.value;var q=E.get;return q===void 0?void 0:q.call(C)}},c=s(2),u=w(c),f=s(0),d=w(f),m=s(4),p=w(m),y=s(6),v=w(y),g=s(7),b=w(g);function w(T){return T&&T.__esModule?T:{default:T}}function j(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}function N(T,I){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:T}function S(T,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);T.prototype=Object.create(I&&I.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(T,I):T.__proto__=I)}var P=(function(T){S(I,T);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(v.default);P.blotName="code",P.tagName="CODE";var A=(function(T){S(I,T);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var C=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(M,q){return M.insert(q).insert(`
`,C.formats())},new u.default)}},{key:"format",value:function(C,E){if(!(C===this.statics.blotName&&E)){var M=this.descendant(b.default,this.length()-1),q=i(M,1),G=q[0];G?.deleteAt(G.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,C,E)}}},{key:"formatAt",value:function(C,E,M,q){if(E!==0&&!(d.default.query(M,d.default.Scope.BLOCK)==null||M===this.statics.blotName&&q===this.statics.formats(this.domNode))){var G=this.newlineIndex(C);if(!(G<0||G>=C+E)){var Z=this.newlineIndex(C,!0)+1,te=G-Z+1,ae=this.isolate(Z,te),Q=ae.next;ae.format(M,q),Q instanceof I&&Q.formatAt(0,C-Z+E-te,M,q)}}}},{key:"insertAt",value:function(C,E,M){if(M==null){var q=this.descendant(b.default,C),G=i(q,2),Z=G[0],te=G[1];Z.insertAt(te,E)}}},{key:"length",value:function(){var C=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?C:C+1}},{key:"newlineIndex",value:function(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,C).lastIndexOf(`
`);var M=this.domNode.textContent.slice(C).indexOf(`
`);return M>-1?C+M:-1}},{key:"optimize",value:function(C){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,C);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(C),E.moveChildren(this),E.remove())}},{key:"replace",value:function(C){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,C),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var M=d.default.find(E);M==null?E.parentNode.removeChild(E):M instanceof d.default.Embed?M.remove():M.unwrap()})}}],[{key:"create",value:function(C){var E=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,C);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),I})(p.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",n.Code=P,n.default=A}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},o=(function(){function Q(ee,W){var O=[],z=!0,H=!1,R=void 0;try{for(var K=ee[Symbol.iterator](),le;!(z=(le=K.next()).done)&&(O.push(le.value),!(W&&O.length===W));z=!0);}catch(he){H=!0,R=he}finally{try{!z&&K.return&&K.return()}finally{if(H)throw R}}return O}return function(ee,W){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Q(ee,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function Q(ee,W){for(var O=0;O<W.length;O++){var z=W[O];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ee,z.key,z)}}return function(ee,W,O){return W&&Q(ee.prototype,W),O&&Q(ee,O),ee}})(),c=s(2),u=E(c),f=s(20),d=E(f),m=s(0),p=E(m),y=s(13),v=E(y),g=s(24),b=E(g),w=s(4),j=E(w),N=s(16),S=E(N),P=s(21),A=E(P),T=s(11),I=E(T),B=s(3),C=E(B);function E(Q){return Q&&Q.__esModule?Q:{default:Q}}function M(Q,ee,W){return ee in Q?Object.defineProperty(Q,ee,{value:W,enumerable:!0,configurable:!0,writable:!0}):Q[ee]=W,Q}function q(Q,ee){if(!(Q instanceof ee))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,Z=(function(){function Q(ee){q(this,Q),this.scroll=ee,this.delta=this.getDelta()}return l(Q,[{key:"applyDelta",value:function(W){var O=this,z=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),W=ae(W),W.reduce(function(R,K){var le=K.retain||K.delete||K.insert.length||1,he=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var ie=K.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),R>=H&&!ie.endsWith(`
`)&&(z=!0),O.scroll.insertAt(R,ie);var ce=O.scroll.line(R),De=o(ce,2),ne=De[0],Ue=De[1],Ce=(0,C.default)({},(0,w.bubbleFormats)(ne));if(ne instanceof j.default){var de=ne.descendant(p.default.Leaf,Ue),Y=o(de,1),ve=Y[0];Ce=(0,C.default)(Ce,(0,w.bubbleFormats)(ve))}he=d.default.attributes.diff(Ce,he)||{}}else if(i(K.insert)==="object"){var ye=Object.keys(K.insert)[0];if(ye==null)return R;O.scroll.insertAt(R,ye,K.insert[ye])}H+=le}return Object.keys(he).forEach(function(Ae){O.scroll.formatAt(R,le,Ae,he[Ae])}),R+le},0),W.reduce(function(R,K){return typeof K.delete=="number"?(O.scroll.deleteAt(R,K.delete),R):R+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,O){return this.scroll.deleteAt(W,O),this.update(new u.default().retain(W).delete(O))}},{key:"formatLine",value:function(W,O){var z=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(R){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[R])){var K=z.scroll.lines(W,Math.max(O,1)),le=O;K.forEach(function(he){var ie=he.length();if(!(he instanceof v.default))he.format(R,H[R]);else{var ce=W-he.offset(z.scroll),De=he.newlineIndex(ce+le)-ce+1;he.formatAt(ce,De,R,H[R])}le-=ie})}}),this.scroll.optimize(),this.update(new u.default().retain(W).retain(O,(0,A.default)(H)))}},{key:"formatText",value:function(W,O){var z=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(R){z.scroll.formatAt(W,O,R,H[R])}),this.update(new u.default().retain(W).retain(O,(0,A.default)(H)))}},{key:"getContents",value:function(W,O){return this.delta.slice(W,W+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,O){return W.concat(O.delta())},new u.default)}},{key:"getFormat",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],H=[];O===0?this.scroll.path(W).forEach(function(K){var le=o(K,1),he=le[0];he instanceof j.default?z.push(he):he instanceof p.default.Leaf&&H.push(he)}):(z=this.scroll.lines(W,O),H=this.scroll.descendants(p.default.Leaf,W,O));var R=[z,H].map(function(K){if(K.length===0)return{};for(var le=(0,w.bubbleFormats)(K.shift());Object.keys(le).length>0;){var he=K.shift();if(he==null)return le;le=te((0,w.bubbleFormats)(he),le)}return le});return C.default.apply(C.default,R)}},{key:"getText",value:function(W,O){return this.getContents(W,O).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(W,O,z){return this.scroll.insertAt(W,O,z),this.update(new u.default().retain(W).insert(M({},O,z)))}},{key:"insertText",value:function(W,O){var z=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,O),Object.keys(H).forEach(function(R){z.scroll.formatAt(W,O.length,R,H[R])}),this.update(new u.default().retain(W).insert(O,(0,A.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==j.default.blotName||W.children.length>1?!1:W.children.head instanceof S.default}},{key:"removeFormat",value:function(W,O){var z=this.getText(W,O),H=this.scroll.line(W+O),R=o(H,2),K=R[0],le=R[1],he=0,ie=new u.default;K!=null&&(K instanceof v.default?he=K.newlineIndex(le)-le+1:he=K.length()-le,ie=K.delta().slice(le,le+he-1).insert(`
`));var ce=this.getContents(W,O+he),De=ce.diff(new u.default().insert(z).concat(ie)),ne=new u.default().retain(W).concat(De);return this.applyDelta(ne)}},{key:"update",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(O.length===1&&O[0].type==="characterData"&&O[0].target.data.match(G)&&p.default.find(O[0].target)){var R=p.default.find(O[0].target),K=(0,w.bubbleFormats)(R),le=R.offset(this.scroll),he=O[0].oldValue.replace(b.default.CONTENTS,""),ie=new u.default().insert(he),ce=new u.default().insert(R.value()),De=new u.default().retain(le).concat(ie.diff(ce,z));W=De.reduce(function(ne,Ue){return Ue.insert?ne.insert(Ue.insert,K):ne.push(Ue)},new u.default),this.delta=H.compose(W)}else this.delta=this.getDelta(),(!W||!(0,I.default)(H.compose(W),this.delta))&&(W=H.diff(this.delta,z));return W}}]),Q})();function te(Q,ee){return Object.keys(ee).reduce(function(W,O){return Q[O]==null||(ee[O]===Q[O]?W[O]=ee[O]:Array.isArray(ee[O])?ee[O].indexOf(Q[O])<0&&(W[O]=ee[O].concat([Q[O]])):W[O]=[ee[O],Q[O]]),W},{})}function ae(Q){return Q.reduce(function(ee,W){if(W.insert===1){var O=(0,A.default)(W.attributes);return delete O.image,ee.insert({image:W.attributes.image},O)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,A.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var z=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ee.insert(z,W.attributes)}return ee.push(W)},new u.default)}n.default=Z}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=(function(){function T(I,B){var C=[],E=!0,M=!1,q=void 0;try{for(var G=I[Symbol.iterator](),Z;!(E=(Z=G.next()).done)&&(C.push(Z.value),!(B&&C.length===B));E=!0);}catch(te){M=!0,q=te}finally{try{!E&&G.return&&G.return()}finally{if(M)throw q}}return C}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,B){for(var C=0;C<B.length;C++){var E=B[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,B,C){return B&&T(I.prototype,B),C&&T(I,C),I}})(),l=s(0),c=b(l),u=s(21),f=b(u),d=s(11),m=b(d),p=s(8),y=b(p),v=s(10),g=b(v);function b(T){return T&&T.__esModule?T:{default:T}}function w(T){if(Array.isArray(T)){for(var I=0,B=Array(T.length);I<T.length;I++)B[I]=T[I];return B}else return Array.from(T)}function j(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,g.default)("quill:selection"),S=function T(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,T),this.index=I,this.length=B},P=(function(){function T(I,B){var C=this;j(this,T),this.emitter=B,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){C.mouseDown||setTimeout(C.update.bind(C,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(E,M){E===y.default.events.TEXT_CHANGE&&M.length()>0&&C.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(C.hasFocus()){var E=C.getNativeRange();E!=null&&E.start.node!==C.cursor.textNode&&C.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{C.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(E,M){if(M.range){var q=M.range,G=q.startNode,Z=q.startOffset,te=q.endNode,ae=q.endOffset;C.setNativeRange(G,Z,te,ae)}}),this.update(y.default.sources.SILENT)}return o(T,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var C=B.cursor.restore();if(!C)return;setTimeout(function(){B.setNativeRange(C.startNode,C.startOffset,C.endNode,C.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,C){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||c.default.query(B,c.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var M=c.default.find(E.start.node,!1);if(M==null)return;if(M instanceof c.default.Leaf){var q=M.split(E.start.offset);M.parent.insertBefore(this.cursor,q)}else M.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(B,C),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();B=Math.min(B,E-1),C=Math.min(B+C,E-1)-B;var M=void 0,q=this.scroll.leaf(B),G=i(q,2),Z=G[0],te=G[1];if(Z==null)return null;var ae=Z.position(te,!0),Q=i(ae,2);M=Q[0],te=Q[1];var ee=document.createRange();if(C>0){ee.setStart(M,te);var W=this.scroll.leaf(B+C),O=i(W,2);if(Z=O[0],te=O[1],Z==null)return null;var z=Z.position(te,!0),H=i(z,2);return M=H[0],te=H[1],ee.setEnd(M,te),ee.getBoundingClientRect()}else{var R="left",K=void 0;return M instanceof Text?(te<M.data.length?(ee.setStart(M,te),ee.setEnd(M,te+1)):(ee.setStart(M,te-1),ee.setEnd(M,te),R="right"),K=ee.getBoundingClientRect()):(K=Z.domNode.getBoundingClientRect(),te>0&&(R="right")),{bottom:K.top+K.height,height:K.height,left:K[R],right:K[R],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var C=B.getRangeAt(0);if(C==null)return null;var E=this.normalizeNative(C);return N.info("getNativeRange",E),E}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var C=this.normalizedToRange(B);return[C,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var C=this,E=[[B.start.node,B.start.offset]];B.native.collapsed||E.push([B.end.node,B.end.offset]);var M=E.map(function(Z){var te=i(Z,2),ae=te[0],Q=te[1],ee=c.default.find(ae,!0),W=ee.offset(C.scroll);return Q===0?W:ee instanceof c.default.Container?W+ee.length():W+ee.index(ae,Q)}),q=Math.min(Math.max.apply(Math,w(M)),this.scroll.length()-1),G=Math.min.apply(Math,[q].concat(w(M)));return new S(G,q-G)}},{key:"normalizeNative",value:function(B){if(!A(this.root,B.startContainer)||!B.collapsed&&!A(this.root,B.endContainer))return null;var C={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[C.start,C.end].forEach(function(E){for(var M=E.node,q=E.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>q)M=M.childNodes[q],q=0;else if(M.childNodes.length===q)M=M.lastChild,q=M instanceof Text?M.data.length:M.childNodes.length+1;else break;E.node=M,E.offset=q}),C}},{key:"rangeToNative",value:function(B){var C=this,E=B.collapsed?[B.index]:[B.index,B.index+B.length],M=[],q=this.scroll.length();return E.forEach(function(G,Z){G=Math.min(q-1,G);var te=void 0,ae=C.scroll.leaf(G),Q=i(ae,2),ee=Q[0],W=Q[1],O=ee.position(W,Z!==0),z=i(O,2);te=z[0],W=z[1],M.push(te,W)}),M.length<2&&(M=M.concat(M)),M}},{key:"scrollIntoView",value:function(B){var C=this.lastRange;if(C!=null){var E=this.getBounds(C.index,C.length);if(E!=null){var M=this.scroll.length()-1,q=this.scroll.line(Math.min(C.index,M)),G=i(q,1),Z=G[0],te=Z;if(C.length>0){var ae=this.scroll.line(Math.min(C.index+C.length,M)),Q=i(ae,1);te=Q[0]}if(!(Z==null||te==null)){var ee=B.getBoundingClientRect();E.top<ee.top?B.scrollTop-=ee.top-E.top:E.bottom>ee.bottom&&(B.scrollTop+=E.bottom-ee.bottom)}}}}},{key:"setNativeRange",value:function(B,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C,q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",B,C,E,M),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||E.parentNode==null))){var G=document.getSelection();if(G!=null)if(B!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||q||B!==Z.startContainer||C!==Z.startOffset||E!==Z.endContainer||M!==Z.endOffset){B.tagName=="BR"&&(C=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),E.tagName=="BR"&&(M=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var te=document.createRange();te.setStart(B,C),te.setEnd(E,M),G.removeAllRanges(),G.addRange(te)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof C=="string"&&(E=C,C=!1),N.info("setRange",B),B!=null){var M=this.rangeToNative(B);this.setNativeRange.apply(this,w(M).concat([C]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,C=this.lastRange,E=this.getRange(),M=i(E,2),q=M[0],G=M[1];if(this.lastRange=q,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(C,this.lastRange)){var Z;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var te=[y.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(C),B];if((Z=this.emitter).emit.apply(Z,[y.default.events.EDITOR_CHANGE].concat(te)),B!==y.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,te)}}}}]),T})();function A(T,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),T.contains(I)}n.Range=S,n.default=P}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(0),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(b,w){b.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,b,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);p.blotName="break",p.tagName="BR",n.default=p}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),u=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.build(),y}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=f(y);p.insertBefore(v,p.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},m.prototype.deleteAt=function(p,y){if(p===0&&y===this.length())return this.remove();this.children.forEachAt(p,y,function(v,g,b){v.deleteAt(g,b)})},m.prototype.descendant=function(p,y){var v=this.children.find(y),g=v[0],b=v[1];return p.blotName==null&&p(g)||p.blotName!=null&&g instanceof p?[g,b]:g instanceof m?g.descendant(p,b):[null,-1]},m.prototype.descendants=function(p,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],b=v;return this.children.forEachAt(y,v,function(w,j,N){(p.blotName==null&&p(w)||p.blotName!=null&&w instanceof p)&&g.push(w),w instanceof m&&(g=g.concat(w.descendants(p,j,b))),b-=N}),g},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},m.prototype.formatAt=function(p,y,v,g){this.children.forEachAt(p,y,function(b,w,j){b.formatAt(w,j,v,g)})},m.prototype.insertAt=function(p,y,v){var g=this.children.find(p),b=g[0],w=g[1];if(b)b.insertAt(w,y,v);else{var j=v==null?c.create("text",y):c.create(y,v);this.appendChild(j)}},m.prototype.insertBefore=function(p,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new c.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,y)},m.prototype.length=function(){return this.children.reduce(function(p,y){return p+y.length()},0)},m.prototype.moveChildren=function(p,y){this.children.forEach(function(v){p.insertBefore(v,y)})},m.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var y=c.create(this.statics.defaultChild);this.appendChild(y),y.optimize(p)}else this.remove()},m.prototype.path=function(p,y){y===void 0&&(y=!1);var v=this.children.find(p,y),g=v[0],b=v[1],w=[[this,p]];return g instanceof m?w.concat(g.path(b,y)):(g!=null&&w.push([g,b]),w)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),d.prototype.replace.call(this,p)},m.prototype.split=function(p,y){if(y===void 0&&(y=!1),!y){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(g,b,w){g=g.split(b,y),v.appendChild(g)}),v},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,y){var v=this,g=[],b=[];p.forEach(function(w){w.target===v.domNode&&w.type==="childList"&&(g.push.apply(g,w.addedNodes),b.push.apply(b,w.removedNodes))}),b.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(w);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(w){return w.parentNode==v.domNode}).sort(function(w,j){return w===j?0:w.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var j=null;w.nextSibling!=null&&(j=c.find(w.nextSibling));var N=f(w);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},m})(l.default);function f(d){var m=c.find(d);if(m==null)try{m=c.create(d)}catch{m=c.create(c.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){m.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(m.domNode,d),m.attach()}return m}n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),u=s(1),f=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.attributes=new l.default(y.domNode),y}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,y){var v=u.query(p);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==y)&&this.replaceWith(p,y)},m.prototype.formats=function(){var p=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(p[this.statics.blotName]=y),p},m.prototype.replaceWith=function(p,y){var v=d.prototype.replaceWith.call(this,p,y);return this.attributes.copy(v),v},m.prototype.update=function(p,y){var v=this;d.prototype.update.call(this,p,y),p.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,y){var v=d.prototype.wrap.call(this,p,y);return v instanceof m&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},m})(c.default);n.default=f}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,m){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},f.prototype.position=function(d,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f})(o.default);n.default=c}),(function(r,n,s){var i=s(11),o=s(3),l={attributes:{compose:function(u,f,d){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var m=o(!0,{},f);d||(m=Object.keys(m).reduce(function(y,v){return m[v]!=null&&(y[v]=m[v]),y},{}));for(var p in u)u[p]!==void 0&&f[p]===void 0&&(m[p]=u[p]);return Object.keys(m).length>0?m:void 0},diff:function(u,f){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var d=Object.keys(u).concat(Object.keys(f)).reduce(function(m,p){return i(u[p],f[p])||(m[p]=f[p]===void 0?null:f[p]),m},{});return Object.keys(d).length>0?d:void 0},transform:function(u,f,d){if(typeof u!="object")return f;if(typeof f=="object"){if(!d)return f;var m=Object.keys(f).reduce(function(p,y){return u[y]===void 0&&(p[y]=f[y]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var f=this.ops[this.index];if(f){var d=this.offset,m=l.length(f);if(u>=m-d?(u=m-d,this.index+=1,this.offset=0):this.offset+=u,typeof f.delete=="number")return{delete:u};var p={};return f.attributes&&(p.attributes=f.attributes),typeof f.retain=="number"?p.retain=u:typeof f.insert=="string"?p.insert=f.insert.substr(d,u):p.insert=f.insert,p}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,f=this.index,d=this.next(),m=this.ops.slice(this.index);return this.offset=u,this.index=f,[d].concat(m)}else return[]},r.exports=l}),(function(r,n){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(v,g,b,w,j){typeof g=="object"&&(b=g.depth,w=g.prototype,j=g.includeNonEnumerable,g=g.circular);var N=[],S=[],P=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof b>"u"&&(b=1/0);function A(T,I){if(T===null)return null;if(I===0)return T;var B,C;if(typeof T!="object")return T;if(i(T,o))B=new o;else if(i(T,l))B=new l;else if(i(T,c))B=new c(function(ee,W){T.then(function(O){ee(A(O,I-1))},function(O){W(A(O,I-1))})});else if(u.__isArray(T))B=[];else if(u.__isRegExp(T))B=new RegExp(T.source,y(T)),T.lastIndex&&(B.lastIndex=T.lastIndex);else if(u.__isDate(T))B=new Date(T.getTime());else{if(P&&Buffer.isBuffer(T))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(T.length):B=new Buffer(T.length),T.copy(B),B;i(T,Error)?B=Object.create(T):typeof w>"u"?(C=Object.getPrototypeOf(T),B=Object.create(C)):(B=Object.create(w),C=w)}if(g){var E=N.indexOf(T);if(E!=-1)return S[E];N.push(T),S.push(B)}i(T,o)&&T.forEach(function(ee,W){var O=A(W,I-1),z=A(ee,I-1);B.set(O,z)}),i(T,l)&&T.forEach(function(ee){var W=A(ee,I-1);B.add(W)});for(var M in T){var q;C&&(q=Object.getOwnPropertyDescriptor(C,M)),!(q&&q.set==null)&&(B[M]=A(T[M],I-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(T),M=0;M<G.length;M++){var Z=G[M],te=Object.getOwnPropertyDescriptor(T,Z);te&&!te.enumerable&&!j||(B[Z]=A(T[Z],I-1),te.enumerable||Object.defineProperty(B,Z,{enumerable:!1}))}if(j)for(var ae=Object.getOwnPropertyNames(T),M=0;M<ae.length;M++){var Q=ae[M],te=Object.getOwnPropertyDescriptor(T,Q);te&&te.enumerable||(B[Q]=A(T[Q],I-1),Object.defineProperty(B,Q,{enumerable:!1}))}return B}return A(v,b)}u.clonePrototype=function(g){if(g===null)return null;var b=function(){};return b.prototype=g,new b};function f(v){return Object.prototype.toString.call(v)}u.__objToStr=f;function d(v){return typeof v=="object"&&f(v)==="[object Date]"}u.__isDate=d;function m(v){return typeof v=="object"&&f(v)==="[object Array]"}u.__isArray=m;function p(v){return typeof v=="object"&&f(v)==="[object RegExp]"}u.__isRegExp=p;function y(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return u.__getRegExpFlags=y,u})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function B(C,E){var M=[],q=!0,G=!1,Z=void 0;try{for(var te=C[Symbol.iterator](),ae;!(q=(ae=te.next()).done)&&(M.push(ae.value),!(E&&M.length===E));q=!0);}catch(Q){G=!0,Z=Q}finally{try{!q&&te.return&&te.return()}finally{if(G)throw Z}}return M}return function(C,E){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return B(C,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function B(C,E){for(var M=0;M<E.length;M++){var q=E[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(C,q.key,q)}}return function(C,E,M){return E&&B(C.prototype,E),M&&B(C,M),C}})(),l=function B(C,E,M){C===null&&(C=Function.prototype);var q=Object.getOwnPropertyDescriptor(C,E);if(q===void 0){var G=Object.getPrototypeOf(C);return G===null?void 0:B(G,E,M)}else{if("value"in q)return q.value;var Z=q.get;return Z===void 0?void 0:Z.call(M)}},c=s(0),u=N(c),f=s(8),d=N(f),m=s(4),p=N(m),y=s(16),v=N(y),g=s(13),b=N(g),w=s(25),j=N(w);function N(B){return B&&B.__esModule?B:{default:B}}function S(B,C){if(!(B instanceof C))throw new TypeError("Cannot call a class as a function")}function P(B,C){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:B}function A(B,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);B.prototype=Object.create(C&&C.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(B,C):B.__proto__=C)}function T(B){return B instanceof p.default||B instanceof m.BlockEmbed}var I=(function(B){A(C,B);function C(E,M){S(this,C);var q=P(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,E));return q.emitter=M.emitter,Array.isArray(M.whitelist)&&(q.whitelist=M.whitelist.reduce(function(G,Z){return G[Z]=!0,G},{})),q.domNode.addEventListener("DOMNodeInserted",function(){}),q.optimize(),q.enable(),q}return o(C,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(M,q){var G=this.line(M),Z=i(G,2),te=Z[0],ae=Z[1],Q=this.line(M+q),ee=i(Q,1),W=ee[0];if(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,M,q),W!=null&&te!==W&&ae>0){if(te instanceof m.BlockEmbed||W instanceof m.BlockEmbed){this.optimize();return}if(te instanceof b.default){var O=te.newlineIndex(te.length(),!0);if(O>-1&&(te=te.split(O+1),te===W)){this.optimize();return}}else if(W instanceof b.default){var z=W.newlineIndex(0);z>-1&&W.split(z+1)}var H=W.children.head instanceof v.default?null:W.children.head;te.moveChildren(W,H),te.remove()}this.optimize()}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)}},{key:"formatAt",value:function(M,q,G,Z){this.whitelist!=null&&!this.whitelist[G]||(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,M,q,G,Z),this.optimize())}},{key:"insertAt",value:function(M,q,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[q])){if(M>=this.length())if(G==null||u.default.query(q,u.default.Scope.BLOCK)==null){var Z=u.default.create(this.statics.defaultChild);this.appendChild(Z),G==null&&q.endsWith(`
`)&&(q=q.slice(0,-1)),Z.insertAt(0,q,G)}else{var te=u.default.create(q,G);this.appendChild(te)}else l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,M,q,G);this.optimize()}}},{key:"insertBefore",value:function(M,q){if(M.statics.scope===u.default.Scope.INLINE_BLOT){var G=u.default.create(this.statics.defaultChild);G.appendChild(M),M=G}l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,M,q)}},{key:"leaf",value:function(M){return this.path(M).pop()||[null,-1]}},{key:"line",value:function(M){return M===this.length()?this.line(M-1):this.descendant(T,M)}},{key:"lines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function Z(te,ae,Q){var ee=[],W=Q;return te.children.forEachAt(ae,Q,function(O,z,H){T(O)?ee.push(O):O instanceof u.default.Container&&(ee=ee.concat(Z(O,z,W))),W-=H}),ee};return G(this,M,q)}},{key:"optimize",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,M,q),M.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,M,q))}},{key:"path",value:function(M){return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,M).slice(1)}},{key:"update",value:function(M){if(this.batch!==!0){var q=d.default.sources.USER;typeof M=="string"&&(q=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,q,M),l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,q,M)}}}]),C})(u.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,m.BlockEmbed,j.default],n.default=I}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(le,he){var ie=[],ce=!0,De=!1,ne=void 0;try{for(var Ue=le[Symbol.iterator](),Ce;!(ce=(Ce=Ue.next()).done)&&(ie.push(Ce.value),!(he&&ie.length===he));ce=!0);}catch(de){De=!0,ne=de}finally{try{!ce&&Ue.return&&Ue.return()}finally{if(De)throw ne}}return ie}return function(le,he){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return K(le,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(le,he){for(var ie=0;ie<he.length;ie++){var ce=he[ie];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(le,ce.key,ce)}}return function(le,he,ie){return he&&K(le.prototype,he),ie&&K(le,ie),le}})(),c=s(21),u=B(c),f=s(11),d=B(f),m=s(3),p=B(m),y=s(2),v=B(y),g=s(20),b=B(g),w=s(0),j=B(w),N=s(5),S=B(N),P=s(10),A=B(P),T=s(9),I=B(T);function B(K){return K&&K.__esModule?K:{default:K}}function C(K,le,he){return le in K?Object.defineProperty(K,le,{value:he,enumerable:!0,configurable:!0,writable:!0}):K[le]=he,K}function E(K,le){if(!(K instanceof le))throw new TypeError("Cannot call a class as a function")}function M(K,le){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le&&(typeof le=="object"||typeof le=="function")?le:K}function q(K,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof le);K.prototype=Object.create(le&&le.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),le&&(Object.setPrototypeOf?Object.setPrototypeOf(K,le):K.__proto__=le)}var G=(0,A.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",te=(function(K){q(le,K),l(le,null,[{key:"match",value:function(ie,ce){return ce=R(ce),["altKey","ctrlKey","metaKey","shiftKey"].some(function(De){return!!ce[De]!==ie[De]&&ce[De]!==null})?!1:ce.key===(ie.which||ie.keyCode)}}]);function le(he,ie){E(this,le);var ce=M(this,(le.__proto__||Object.getPrototypeOf(le)).call(this,he,ie));return ce.bindings={},Object.keys(ce.options.bindings).forEach(function(De){De==="list autofill"&&he.scroll.whitelist!=null&&!he.scroll.whitelist.list||ce.options.bindings[De]&&ce.addBinding(ce.options.bindings[De])}),ce.addBinding({key:le.keys.ENTER,shiftKey:null},O),ce.addBinding({key:le.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ce.addBinding({key:le.keys.BACKSPACE},{collapsed:!0},Q),ce.addBinding({key:le.keys.DELETE},{collapsed:!0},ee)):(ce.addBinding({key:le.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Q),ce.addBinding({key:le.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ee)),ce.addBinding({key:le.keys.BACKSPACE},{collapsed:!1},W),ce.addBinding({key:le.keys.DELETE},{collapsed:!1},W),ce.addBinding({key:le.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Q),ce.listen(),ce}return l(le,[{key:"addBinding",value:function(ie){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=R(ie);if(ne==null||ne.key==null)return G.warn("Attempted to add invalid keyboard binding",ne);typeof ce=="function"&&(ce={handler:ce}),typeof De=="function"&&(De={handler:De}),ne=(0,p.default)(ne,ce,De),this.bindings[ne.key]=this.bindings[ne.key]||[],this.bindings[ne.key].push(ne)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(ce){if(!ce.defaultPrevented){var De=ce.which||ce.keyCode,ne=(ie.bindings[De]||[]).filter(function(ut){return le.match(ce,ut)});if(ne.length!==0){var Ue=ie.quill.getSelection();if(!(Ue==null||!ie.quill.hasFocus())){var Ce=ie.quill.getLine(Ue.index),de=o(Ce,2),Y=de[0],ve=de[1],ye=ie.quill.getLeaf(Ue.index),Ae=o(ye,2),pe=Ae[0],ue=Ae[1],Pe=Ue.length===0?[pe,ue]:ie.quill.getLeaf(Ue.index+Ue.length),Ne=o(Pe,2),Re=Ne[0],nt=Ne[1],xt=pe instanceof j.default.Text?pe.value().slice(0,ue):"",kt=Re instanceof j.default.Text?Re.value().slice(nt):"",Me={collapsed:Ue.length===0,empty:Ue.length===0&&Y.length()<=1,format:ie.quill.getFormat(Ue),offset:ve,prefix:xt,suffix:kt},vt=ne.some(function(ut){if(ut.collapsed!=null&&ut.collapsed!==Me.collapsed||ut.empty!=null&&ut.empty!==Me.empty||ut.offset!=null&&ut.offset!==Me.offset)return!1;if(Array.isArray(ut.format)){if(ut.format.every(function(lt){return Me.format[lt]==null}))return!1}else if(i(ut.format)==="object"&&!Object.keys(ut.format).every(function(lt){return ut.format[lt]===!0?Me.format[lt]!=null:ut.format[lt]===!1?Me.format[lt]==null:(0,d.default)(ut.format[lt],Me.format[lt])}))return!1;return ut.prefix!=null&&!ut.prefix.test(Me.prefix)||ut.suffix!=null&&!ut.suffix.test(Me.suffix)?!1:ut.handler.call(ie,Ue,Me)!==!0});vt&&ce.preventDefault()}}}})}}]),le})(I.default);te.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},te.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:te.keys.TAB,format:["blockquote","indent","list"],handler:function(le,he){if(he.collapsed&&he.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:te.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(le,he){if(he.collapsed&&he.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:te.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(le,he){he.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):he.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:te.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(le){this.quill.deleteText(le.index-1,1,S.default.sources.USER)}},tab:{key:te.keys.TAB,handler:function(le){this.quill.history.cutoff();var he=new v.default().retain(le.index).delete(le.length).insert("	");this.quill.updateContents(he,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(le.index+1,S.default.sources.SILENT)}},"list empty enter":{key:te.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(le,he){this.quill.format("list",!1,S.default.sources.USER),he.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:te.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(le){var he=this.quill.getLine(le.index),ie=o(he,2),ce=ie[0],De=ie[1],ne=(0,p.default)({},ce.formats(),{list:"checked"}),Ue=new v.default().retain(le.index).insert(`
`,ne).retain(ce.length()-De-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(le.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:te.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(le,he){var ie=this.quill.getLine(le.index),ce=o(ie,2),De=ce[0],ne=ce[1],Ue=new v.default().retain(le.index).insert(`
`,he.format).retain(De.length()-ne-1).retain(1,{header:null});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(le.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(le,he){var ie=he.prefix.length,ce=this.quill.getLine(le.index),De=o(ce,2),ne=De[0],Ue=De[1];if(Ue>ie)return!0;var Ce=void 0;switch(he.prefix.trim()){case"[]":case"[ ]":Ce="unchecked";break;case"[x]":Ce="checked";break;case"-":case"*":Ce="bullet";break;default:Ce="ordered"}this.quill.insertText(le.index," ",S.default.sources.USER),this.quill.history.cutoff();var de=new v.default().retain(le.index-Ue).delete(ie+1).retain(ne.length()-2-Ue).retain(1,{list:Ce});this.quill.updateContents(de,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(le.index-ie,S.default.sources.SILENT)}},"code exit":{key:te.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(le){var he=this.quill.getLine(le.index),ie=o(he,2),ce=ie[0],De=ie[1],ne=new v.default().retain(le.index+ce.length()-De-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ne,S.default.sources.USER)}},"embed left":ae(te.keys.LEFT,!1),"embed left shift":ae(te.keys.LEFT,!0),"embed right":ae(te.keys.RIGHT,!1),"embed right shift":ae(te.keys.RIGHT,!0)}};function ae(K,le){var he,ie=K===te.keys.LEFT?"prefix":"suffix";return he={key:K,shiftKey:le,altKey:null},C(he,ie,/^$/),C(he,"handler",function(De){var ne=De.index;K===te.keys.RIGHT&&(ne+=De.length+1);var Ue=this.quill.getLeaf(ne),Ce=o(Ue,1),de=Ce[0];return de instanceof j.default.Embed?(K===te.keys.LEFT?le?this.quill.setSelection(De.index-1,De.length+1,S.default.sources.USER):this.quill.setSelection(De.index-1,S.default.sources.USER):le?this.quill.setSelection(De.index,De.length+1,S.default.sources.USER):this.quill.setSelection(De.index+De.length+1,S.default.sources.USER),!1):!0}),he}function Q(K,le){if(!(K.index===0||this.quill.getLength()<=1)){var he=this.quill.getLine(K.index),ie=o(he,1),ce=ie[0],De={};if(le.offset===0){var ne=this.quill.getLine(K.index-1),Ue=o(ne,1),Ce=Ue[0];if(Ce!=null&&Ce.length()>1){var de=ce.formats(),Y=this.quill.getFormat(K.index-1,1);De=b.default.attributes.diff(de,Y)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(le.prefix)?2:1;this.quill.deleteText(K.index-ve,ve,S.default.sources.USER),Object.keys(De).length>0&&this.quill.formatLine(K.index-ve,ve,De,S.default.sources.USER),this.quill.focus()}}function ee(K,le){var he=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(le.suffix)?2:1;if(!(K.index>=this.quill.getLength()-he)){var ie={},ce=0,De=this.quill.getLine(K.index),ne=o(De,1),Ue=ne[0];if(le.offset>=Ue.length()-1){var Ce=this.quill.getLine(K.index+1),de=o(Ce,1),Y=de[0];if(Y){var ve=Ue.formats(),ye=this.quill.getFormat(K.index,1);ie=b.default.attributes.diff(ve,ye)||{},ce=Y.length()}}this.quill.deleteText(K.index,he,S.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(K.index+ce-1,he,ie,S.default.sources.USER)}}function W(K){var le=this.quill.getLines(K),he={};if(le.length>1){var ie=le[0].formats(),ce=le[le.length-1].formats();he=b.default.attributes.diff(ce,ie)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(he).length>0&&this.quill.formatLine(K.index,1,he,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function O(K,le){var he=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var ie=Object.keys(le.format).reduce(function(ce,De){return j.default.query(De,j.default.Scope.BLOCK)&&!Array.isArray(le.format[De])&&(ce[De]=le.format[De]),ce},{});this.quill.insertText(K.index,`
`,ie,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(le.format).forEach(function(ce){ie[ce]==null&&(Array.isArray(le.format[ce])||ce!=="link"&&he.quill.format(ce,le.format[ce],S.default.sources.USER))})}function z(K){return{key:te.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(he){var ie=j.default.query("code-block"),ce=he.index,De=he.length,ne=this.quill.scroll.descendant(ie,ce),Ue=o(ne,2),Ce=Ue[0],de=Ue[1];if(Ce!=null){var Y=this.quill.getIndex(Ce),ve=Ce.newlineIndex(de,!0)+1,ye=Ce.newlineIndex(Y+de+De),Ae=Ce.domNode.textContent.slice(ve,ye).split(`
`);de=0,Ae.forEach(function(pe,ue){K?(Ce.insertAt(ve+de,ie.TAB),de+=ie.TAB.length,ue===0?ce+=ie.TAB.length:De+=ie.TAB.length):pe.startsWith(ie.TAB)&&(Ce.deleteAt(ve+de,ie.TAB.length),de-=ie.TAB.length,ue===0?ce-=ie.TAB.length:De-=ie.TAB.length),de+=pe.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ce,De,S.default.sources.SILENT)}}}}function H(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(he,ie){this.quill.format(K,!ie.format[K],S.default.sources.USER)}}}function R(K){if(typeof K=="string"||typeof K=="number")return R({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,u.default)(K,!1)),typeof K.key=="string")if(te.keys[K.key.toUpperCase()]!=null)K.key=te.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Z]=K.shortKey,delete K.shortKey),K}n.default=te,n.SHORTKEY=Z}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function b(w,j){var N=[],S=!0,P=!1,A=void 0;try{for(var T=w[Symbol.iterator](),I;!(S=(I=T.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(B){P=!0,A=B}finally{try{!S&&T.return&&T.return()}finally{if(P)throw A}}return N}return function(w,j){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return b(w,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var P=Object.getPrototypeOf(w);return P===null?void 0:b(P,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),c=s(0),u=m(c),f=s(7),d=m(f);function m(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function y(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function v(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var g=(function(b){v(w,b),l(w,null,[{key:"value",value:function(){}}]);function w(j,N){p(this,w);var S=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(w.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,S);for(var P=this,A=0;P!=null&&P.statics.scope!==u.default.Scope.BLOCK_BLOT;)A+=P.offset(P.parent),P=P.parent;P!=null&&(this._length=w.CONTENTS.length,P.optimize(),P.formatAt(A,w.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),P=void 0,A=void 0,T=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];P=I[0],A=I[1],T=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var B=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof d.default?(P=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=w.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var C=[A,T].map(function(M){return Math.max(0,Math.min(P.data.length,M-1))}),E=i(C,2);return A=E[0],T=E[1],{startNode:P,startOffset:A,endNode:P,endOffset:T}}}}},{key:"update",value:function(N,S){var P=this;if(N.some(function(T){return T.type==="characterData"&&T.target===P.textNode})){var A=this.restore();A&&(S.range=A)}}},{key:"value",value:function(){return""}}]),w})(u.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",n.default=g}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=u(i),l=s(4),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);p.allowedChildren=[c.default,l.BlockEmbed,p],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=s(0),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function m(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=(function(g){m(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(j){var N=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),b})(c.default.Attributor.Style),y=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new p("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=p,n.ColorClass=y,n.ColorStyle=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=(function(){function v(g,b){for(var w=0;w<b.length;w++){var j=b[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,w){return b&&v(g.prototype,b),w&&v(g,w),g}})(),o=function v(g,b,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,b,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(6),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function d(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(w,j){if(w!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(w){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return w=this.sanitize(w),j.setAttribute("href",w),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return y(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),g})(c.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,g){var b=document.createElement("a");b.href=v;var w=b.href.slice(0,b.href.indexOf(":"));return g.indexOf(w)>-1}n.default=p,n.sanitize=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),l=s(23),c=d(l),u=s(107),f=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}var p=0;function y(g,b){g.setAttribute(b,g.getAttribute(b)!=="true")}var v=(function(){function g(b){var w=this;m(this,g),this.select=b,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:w.togglePicker();break;case c.default.keys.ESCAPE:w.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),w.hasAttribute("value")&&N.setAttribute("data-value",w.getAttribute("value")),w.textContent&&N.setAttribute("data-label",w.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=f.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=w.buildItem(N);j.appendChild(S),N.selected===!0&&w.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(j){w.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(w!==N&&(N?.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),g})();n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=G(i),l=s(5),c=G(l),u=s(4),f=G(u),d=s(16),m=G(d),p=s(25),y=G(p),v=s(24),g=G(v),b=s(35),w=G(b),j=s(6),N=G(j),S=s(22),P=G(S),A=s(7),T=G(A),I=s(55),B=G(I),C=s(42),E=G(C),M=s(23),q=G(M);function G(Z){return Z&&Z.__esModule?Z:{default:Z}}c.default.register({"blots/block":f.default,"blots/block/embed":u.BlockEmbed,"blots/break":m.default,"blots/container":y.default,"blots/cursor":g.default,"blots/embed":w.default,"blots/inline":N.default,"blots/scroll":P.default,"blots/text":T.default,"modules/clipboard":B.default,"modules/history":E.default,"modules/keyboard":q.default}),o.default.register(f.default,m.default,g.default,N.default,P.default,T.default),n.default=c.default}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,u){var f=this.isolate(c,u);f.remove()},l.prototype.formatAt=function(c,u,f,d){var m=this.isolate(c,u);if(i.query(f,i.Scope.BLOT)!=null&&d)m.wrap(f,d);else if(i.query(f,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);m.wrap(p),p.format(f,d)}},l.prototype.insertAt=function(c,u,f){var d=f==null?i.create("text",u):i.create(u,f),m=this.split(c);this.parent.insertBefore(d,m)},l.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,u),u!=null&&(f=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},l.prototype.isolate=function(c,u){var f=this.split(c);return f.split(u),f},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return f.replace(this),f},l.prototype.split=function(c,u){return c===0?this:this.next},l.prototype.update=function(c,u){},l.prototype.wrap=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l})();n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),u=(function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,m){m?d.add(this.domNode,m)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var m=i.default.keys(this.domNode),p=o.default.keys(this.domNode),y=l.default.keys(this.domNode);m.concat(p).concat(y).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(d.attributes[g.attrName]=g)})},f.prototype.copy=function(d){var m=this;Object.keys(this.attributes).forEach(function(p){var y=m.attributes[p].value(m.domNode);d.format(p,y)})},f.prototype.move=function(d){var m=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=d.attributes[p].value(d.domNode),m},{})},f})();n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u,f){var d=u.getAttribute("class")||"";return d.split(/\s+/).filter(function(m){return m.indexOf(f+"-")===0})}var c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,m){return this.canAdd(d,m)?(this.remove(d),d.classList.add(this.keyName+"-"+m),!0):!1},f.prototype.remove=function(d){var m=l(d,this.keyName);m.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var m=l(d,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},f})(o.default);n.default=c}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u){var f=u.split("-"),d=f.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return f[0]+d}var c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},f.prototype.add=function(d,m){return this.canAdd(d,m)?(d.style[l(this.keyName)]=m,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var m=d.style[l(this.keyName)];return this.canAdd(d,m)?m:""},f})(o.default);n.default=c}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function c(u,f){for(var d=0;d<f.length;d++){var m=f[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}})();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(u,f){o(this,c),this.quill=u,this.options=f,this.modules={}}return i(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var P=Object.getPrototypeOf(w);return P===null?void 0:b(P,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=d(l),u=s(7),f=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function p(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function y(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var v="\uFEFF",g=(function(b){y(w,b);function w(j){m(this,w);var N=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(w,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,P=void 0,A=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof f.default){var T=this.prev.length();this.prev.insertAt(T,A),S={startNode:this.prev.domNode,startOffset:T+A.length}}else P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this),S={startNode:P,startOffset:A.length};else N===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,A),S={startNode:this.next.domNode,startOffset:A.length}):(P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this.next),S={startNode:P,startOffset:A.length}));return N.data=v,S}},{key:"update",value:function(N,S){var P=this;N.forEach(function(A){if(A.type==="characterData"&&(A.target===P.leftGuard||A.target===P.rightGuard)){var T=P.restore(A.target);T&&(S.range=T)}})}}]),w})(c.default.Embed);n.default=g}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",c),f=new o.default.Attributor.Class("align","ql-align",c),d=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=u,n.AlignClass=f,n.AlignStyle=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=f}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",c),f=new o.default.Attributor.Class("direction","ql-direction",c),d=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=u,n.DirectionClass=f,n.DirectionStyle=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=(function(){function b(w,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,j,N){return j&&b(w.prototype,j),N&&b(w,N),w}})(),o=function b(w,j,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,j);if(S===void 0){var P=Object.getPrototypeOf(w);return P===null?void 0:b(P,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=u(l);function u(b){return b&&b.__esModule?b:{default:b}}function f(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function m(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var p={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new c.default.Attributor.Class("font","ql-font",p),v=(function(b){m(w,b);function w(){return f(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(N){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),w})(c.default.Attributor.Style),g=new v("font","font-family",p);n.FontStyle=g,n.FontClass=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var i=s(0),o=l(i);function l(f){return f&&f.__esModule?f:{default:f}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=u}),(function(r,n,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=(function(){function j(N,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,P){return S&&j(N.prototype,S),P&&j(N,P),N}})(),o=s(0),l=m(o),c=s(5),u=m(c),f=s(9),d=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function p(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function y(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=(function(j){v(N,j);function N(S,P){p(this,N);var A=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,P));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(u.default.events.EDITOR_CHANGE,function(T,I,B,C){T!==u.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||C===u.default.sources.USER?A.record(I,B):A.transform(I))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return i(N,[{key:"change",value:function(P,A){if(this.stack[P].length!==0){var T=this.stack[P].pop();this.stack[A].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[P],u.default.sources.USER),this.ignoreChange=!1;var I=w(T[P]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(P,A){if(P.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(A),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var B=this.stack.undo.pop();T=T.compose(B.undo),P=B.redo.compose(P)}else this.lastRecorded=I;this.stack.undo.push({redo:P,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(P){this.stack.undo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N})(d.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function b(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function w(j){var N=j.reduce(function(P,A){return P+=A.delete||0,P},0),S=j.length()-N;return b(j)&&(S-=1),S}n.default=g,n.getLastChangeIndex=w}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=(function(){function O(z,H){for(var R=0;R<H.length;R++){var K=H[R];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(z,K.key,K)}}return function(z,H,R){return H&&O(z.prototype,H),R&&O(z,R),z}})(),o=function O(z,H,R){z===null&&(z=Function.prototype);var K=Object.getOwnPropertyDescriptor(z,H);if(K===void 0){var le=Object.getPrototypeOf(z);return le===null?void 0:O(le,H,R)}else{if("value"in K)return K.value;var he=K.get;return he===void 0?void 0:he.call(R)}},l=s(3),c=I(l),u=s(2),f=I(u),d=s(8),m=I(d),p=s(23),y=I(p),v=s(34),g=I(v),b=s(59),w=I(b),j=s(60),N=I(j),S=s(28),P=I(S),A=s(61),T=I(A);function I(O){return O&&O.__esModule?O:{default:O}}function B(O,z){if(!(O instanceof z))throw new TypeError("Cannot call a class as a function")}function C(O,z){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:O}function E(O,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);O.prototype=Object.create(z&&z.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(O,z):O.__proto__=z)}var M=[!1,"center","right","justify"],q=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],Z=["1","2","3",!1],te=["small",!1,"large","huge"],ae=(function(O){E(z,O);function z(H,R){B(this,z);var K=C(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,H,R)),le=function he(ie){if(!document.body.contains(H.root))return document.body.removeEventListener("click",he);K.tooltip!=null&&!K.tooltip.root.contains(ie.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(ce){ce.container.contains(ie.target)||ce.close()})};return H.emitter.listenDOM("click",document.body,le),K}return i(z,[{key:"addModule",value:function(R){var K=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,R);return R==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(R,K){R.forEach(function(le){var he=le.getAttribute("class")||"";he.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),K[ie]!=null))if(ie==="direction")le.innerHTML=K[ie][""]+K[ie].rtl;else if(typeof K[ie]=="string")le.innerHTML=K[ie];else{var ce=le.value||"";ce!=null&&K[ie][ce]&&(le.innerHTML=K[ie][ce])}})})}},{key:"buildPickers",value:function(R,K){var le=this;this.pickers=R.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&W(ie,M),new N.default(ie,K.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var ce=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&W(ie,q,ce==="background"?"#ffffff":"#000000"),new w.default(ie,K[ce])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?W(ie,G):ie.classList.contains("ql-header")?W(ie,Z):ie.classList.contains("ql-size")&&W(ie,te)),new P.default(ie)});var he=function(){le.pickers.forEach(function(ce){ce.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,he)}}]),z})(g.default);ae.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var R=new FileReader;R.onload=function(K){var le=z.quill.getSelection(!0);z.quill.updateContents(new f.default().retain(le.index).delete(le.length).insert({image:K.target.result}),m.default.sources.USER),z.quill.setSelection(le.index+1,m.default.sources.SILENT),H.value=""},R.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Q=(function(O){E(z,O);function z(H,R){B(this,z);var K=C(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,H,R));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(z,[{key:"listen",value:function(){var R=this;this.textbox.addEventListener("keydown",function(K){y.default.match(K,"enter")?(R.save(),K.preventDefault()):y.default.match(K,"escape")&&(R.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:R!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+R)||""),this.root.setAttribute("data-mode",R)}},{key:"restoreFocus",value:function(){var R=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=R}},{key:"save",value:function(){var R=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",R,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",R,m.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":R=ee(R);case"formula":{if(!R)break;var le=this.quill.getSelection(!0);if(le!=null){var he=le.index+le.length;this.quill.insertEmbed(he,this.root.getAttribute("data-mode"),R,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(he+1," ",m.default.sources.USER),this.quill.setSelection(he+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(T.default);function ee(O){var z=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":O}function W(O,z){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(R){var K=document.createElement("option");R===H?K.setAttribute("selected","selected"):K.setAttribute("value",R),O.appendChild(K)})}n.BaseTooltip=Q,n.default=ae}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,u=this.iterator();c=u();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,u=this.head;u!=null;){if(u===l)return c;c+=u.length(),u=u.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var u,f=this.iterator();u=f();){var d=u.length();if(l<d||c&&l===d&&(u.next==null||u.next.length()!==0))return[u,l];l-=d}return[null,0]},o.prototype.forEach=function(l){for(var c,u=this.iterator();c=u();)l(c)},o.prototype.forEachAt=function(l,c,u){if(!(c<=0))for(var f=this.find(l),d=f[0],m=f[1],p,y=l-m,v=this.iterator(d);(p=v())&&y<l+c;){var g=p.length();l>y?u(p,l-y,Math.min(c,y+g-l)):u(p,0,Math.min(g,l+c-y)),y+=g}},o.prototype.map=function(l){return this.reduce(function(c,u){return c.push(l(u)),c},[])},o.prototype.reduce=function(l,c){for(var u,f=this.iterator();u=f();)c=l(c,u);return c},o})();n.default=i}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,f=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,c),y.attach(),y}return m.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,y){this.update(),p===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,p,y)},m.prototype.formatAt=function(p,y,v,g){this.update(),d.prototype.formatAt.call(this,p,y,v,g)},m.prototype.insertAt=function(p,y,v){this.update(),d.prototype.insertAt.call(this,p,y,v)},m.prototype.optimize=function(p,y){var v=this;p===void 0&&(p=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)p.push(g.pop());for(var b=function(S,P){P===void 0&&(P=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),P&&b(S.parent))},w=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(w),S.optimize(y))},j=p,N=0;j.length>0;N+=1){if(N>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var P=l.find(S.target,!0);P!=null&&(P.domNode===S.target&&(S.type==="childList"?(b(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(A){var T=l.find(A,!1);b(T,!1),T instanceof o.default&&T.children.forEach(function(I){b(I,!1)})})):S.type==="attributes"&&b(P.prev)),b(P))}),this.children.forEach(w),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)p.push(g.pop())}},m.prototype.update=function(p,y){var v=this;y===void 0&&(y={}),p=p||this.observer.takeRecords(),p.map(function(g){var b=l.find(g.target,!0);return b==null?null:b.domNode[l.DATA_KEY].mutations==null?(b.domNode[l.DATA_KEY].mutations=[g],b):(b.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],y)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,y),this.optimize(p,y)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);n.default=f}),(function(r,n,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){f(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1);function c(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var m in f)if(f[m]!==d[m])return!1;return!0}var u=(function(f){i(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(m){if(m.tagName!==d.tagName)return f.formats.call(this,m)},d.prototype.format=function(m,p){var y=this;m===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(d.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):f.prototype.format.call(this,m,p)},d.prototype.formatAt=function(m,p,y,v){if(this.formats()[y]!=null||l.query(y,l.Scope.ATTRIBUTE)){var g=this.isolate(m,p);g.format(y,v)}else f.prototype.formatAt.call(this,m,p,y,v)},d.prototype.optimize=function(m){f.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&c(p,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d})(o.default);n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(d){var m=l.query(f.blotName).tagName;if(d.tagName!==m)return u.formats.call(this,d)},f.prototype.format=function(d,m){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!m?this.replaceWith(f.blotName):u.prototype.format.call(this,d,m))},f.prototype.formatAt=function(d,m,p,y){l.query(p,l.Scope.BLOCK)!=null?this.format(p,y):u.prototype.formatAt.call(this,d,m,p,y)},f.prototype.insertAt=function(d,m,p){if(p==null||l.query(m,l.Scope.INLINE)!=null)u.prototype.insertAt.call(this,d,m,p);else{var y=this.split(d),v=l.create(m,p);y.parent.insertBefore(v,y)}},f.prototype.update=function(d,m){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,d,m)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f})(o.default);n.default=c}),(function(r,n,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)f.hasOwnProperty(d)&&(u[d]=f[d])};return function(u,f){c(u,f);function d(){this.constructor=u}u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=(function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(f){},u.prototype.format=function(f,d){c.prototype.formatAt.call(this,0,this.length(),f,d)},u.prototype.formatAt=function(f,d,m,p){f===0&&d===this.length()?this.format(m,p):c.prototype.formatAt.call(this,f,d,m,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(o.default);n.default=l}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(u){i(f,u);function f(d){var m=u.call(this,d)||this;return m.text=m.statics.value(m.domNode),m}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var m=d.data;return m.normalize&&(m=m.normalize()),m},f.prototype.deleteAt=function(d,m){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+m)},f.prototype.index=function(d,m){return this.domNode===d?m:-1},f.prototype.insertAt=function(d,m,p){p==null?(this.text=this.text.slice(0,d)+m+this.text.slice(d),this.domNode.data=this.text):u.prototype.insertAt.call(this,d,m,p)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){u.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,m){return[this.domNode,d]},f.prototype.split=function(d,m){if(m===void 0&&(m=!1),!m){if(d===0)return this;if(d===this.length())return this.next}var p=l.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},f.prototype.update=function(d,m){var p=this;d.some(function(y){return y.type==="characterData"&&y.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f})(o.default);n.default=c}),(function(r,n,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=l.length;var f=u.indexOf(l,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),f=u.length>>>0,d=arguments[1],m,p=0;p<f;p++)if(m=u[p],c.call(d,m,p,u))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,n){var s=-1,i=1,o=0;function l(N,S,P){if(N==S)return N?[[o,N]]:[];(P<0||N.length<P)&&(P=null);var A=d(N,S),T=N.substring(0,A);N=N.substring(A),S=S.substring(A),A=m(N,S);var I=N.substring(N.length-A);N=N.substring(0,N.length-A),S=S.substring(0,S.length-A);var B=c(N,S);return T&&B.unshift([o,T]),I&&B.push([o,I]),y(B),P!=null&&(B=b(B,P)),B=w(B),B}function c(N,S){var P;if(!N)return[[i,S]];if(!S)return[[s,N]];var A=N.length>S.length?N:S,T=N.length>S.length?S:N,I=A.indexOf(T);if(I!=-1)return P=[[i,A.substring(0,I)],[o,T],[i,A.substring(I+T.length)]],N.length>S.length&&(P[0][0]=P[2][0]=s),P;if(T.length==1)return[[s,N],[i,S]];var B=p(N,S);if(B){var C=B[0],E=B[1],M=B[2],q=B[3],G=B[4],Z=l(C,M),te=l(E,q);return Z.concat([[o,G]],te)}return u(N,S)}function u(N,S){for(var P=N.length,A=S.length,T=Math.ceil((P+A)/2),I=T,B=2*T,C=new Array(B),E=new Array(B),M=0;M<B;M++)C[M]=-1,E[M]=-1;C[I+1]=0,E[I+1]=0;for(var q=P-A,G=q%2!=0,Z=0,te=0,ae=0,Q=0,ee=0;ee<T;ee++){for(var W=-ee+Z;W<=ee-te;W+=2){var O=I+W,z;W==-ee||W!=ee&&C[O-1]<C[O+1]?z=C[O+1]:z=C[O-1]+1;for(var H=z-W;z<P&&H<A&&N.charAt(z)==S.charAt(H);)z++,H++;if(C[O]=z,z>P)te+=2;else if(H>A)Z+=2;else if(G){var R=I+q-W;if(R>=0&&R<B&&E[R]!=-1){var K=P-E[R];if(z>=K)return f(N,S,z,H)}}}for(var le=-ee+ae;le<=ee-Q;le+=2){var R=I+le,K;le==-ee||le!=ee&&E[R-1]<E[R+1]?K=E[R+1]:K=E[R-1]+1;for(var he=K-le;K<P&&he<A&&N.charAt(P-K-1)==S.charAt(A-he-1);)K++,he++;if(E[R]=K,K>P)Q+=2;else if(he>A)ae+=2;else if(!G){var O=I+q-le;if(O>=0&&O<B&&C[O]!=-1){var z=C[O],H=I+z-O;if(K=P-K,z>=K)return f(N,S,z,H)}}}}return[[s,N],[i,S]]}function f(N,S,P,A){var T=N.substring(0,P),I=S.substring(0,A),B=N.substring(P),C=S.substring(A),E=l(T,I),M=l(B,C);return E.concat(M)}function d(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var P=0,A=Math.min(N.length,S.length),T=A,I=0;P<T;)N.substring(I,T)==S.substring(I,T)?(P=T,I=P):A=T,T=Math.floor((A-P)/2+P);return T}function m(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var P=0,A=Math.min(N.length,S.length),T=A,I=0;P<T;)N.substring(N.length-T,N.length-I)==S.substring(S.length-T,S.length-I)?(P=T,I=P):A=T,T=Math.floor((A-P)/2+P);return T}function p(N,S){var P=N.length>S.length?N:S,A=N.length>S.length?S:N;if(P.length<4||A.length*2<P.length)return null;function T(te,ae,Q){for(var ee=te.substring(Q,Q+Math.floor(te.length/4)),W=-1,O="",z,H,R,K;(W=ae.indexOf(ee,W+1))!=-1;){var le=d(te.substring(Q),ae.substring(W)),he=m(te.substring(0,Q),ae.substring(0,W));O.length<he+le&&(O=ae.substring(W-he,W)+ae.substring(W,W+le),z=te.substring(0,Q-he),H=te.substring(Q+le),R=ae.substring(0,W-he),K=ae.substring(W+le))}return O.length*2>=te.length?[z,H,R,K,O]:null}var I=T(P,A,Math.ceil(P.length/4)),B=T(P,A,Math.ceil(P.length/2)),C;if(!I&&!B)return null;B?I?C=I[4].length>B[4].length?I:B:C=B:C=I;var E,M,q,G;N.length>S.length?(E=C[0],M=C[1],q=C[2],G=C[3]):(q=C[0],G=C[1],E=C[2],M=C[3]);var Z=C[4];return[E,M,q,G,Z]}function y(N){N.push([o,""]);for(var S=0,P=0,A=0,T="",I="",B;S<N.length;)switch(N[S][0]){case i:A++,I+=N[S][1],S++;break;case s:P++,T+=N[S][1],S++;break;case o:P+A>1?(P!==0&&A!==0&&(B=d(I,T),B!==0&&(S-P-A>0&&N[S-P-A-1][0]==o?N[S-P-A-1][1]+=I.substring(0,B):(N.splice(0,0,[o,I.substring(0,B)]),S++),I=I.substring(B),T=T.substring(B)),B=m(I,T),B!==0&&(N[S][1]=I.substring(I.length-B)+N[S][1],I=I.substring(0,I.length-B),T=T.substring(0,T.length-B))),P===0?N.splice(S-A,P+A,[i,I]):A===0?N.splice(S-P,P+A,[s,T]):N.splice(S-P-A,P+A,[s,T],[i,I]),S=S-P-A+(P?1:0)+(A?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,A=0,P=0,T="",I="";break}N[N.length-1][1]===""&&N.pop();var C=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),C=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),C=!0)),S++;C&&y(N)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(N,S){if(S===0)return[o,N];for(var P=0,A=0;A<N.length;A++){var T=N[A];if(T[0]===s||T[0]===o){var I=P+T[1].length;if(S===I)return[A+1,N];if(S<I){N=N.slice();var B=S-P,C=[T[0],T[1].slice(0,B)],E=[T[0],T[1].slice(B)];return N.splice(A,1,C,E),[A+1,N]}else P=I}}throw new Error("cursor_pos is out of bounds!")}function b(N,S){var P=g(N,S),A=P[1],T=P[0],I=A[T],B=A[T+1];if(I==null)return N;if(I[0]!==o)return N;if(B!=null&&I[1]+B[1]===B[1]+I[1])return A.splice(T,2,B,I),j(A,T,2);if(B!=null&&B[1].indexOf(I[1])===0){A.splice(T,2,[B[0],I[1]],[0,I[1]]);var C=B[1].slice(I[1].length);return C.length>0&&A.splice(T+2,0,[B[0],C]),j(A,T,3)}else return N}function w(N){for(var S=!1,P=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},A=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},T=2;T<N.length;T+=1)N[T-2][0]===o&&A(N[T-2][1])&&N[T-1][0]===s&&P(N[T-1][1])&&N[T][0]===i&&P(N[T][1])&&(S=!0,N[T-1][1]=N[T-2][1].slice(-1)+N[T-1][1],N[T][1]=N[T-2][1].slice(-1)+N[T][1],N[T-2][1]=N[T-2][1].slice(0,-1));if(!S)return N;for(var I=[],T=0;T<N.length;T+=1)N[T][1].length>0&&I.push(N[T]);return I}function j(N,S,P){for(var A=S+P-1;A>=0&&A>=S-1;A--)if(A+1<N.length){var T=N[A],I=N[A+1];T[0]===I[1]&&N.splice(A,2,[T[0],T[1]+I[1]])}return N}}),(function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:s,n.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,n){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";n=r.exports=s?i:o,n.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,n){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(u,f,d){this.fn=u,this.context=f,this.once=d||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],d,m;if(this._eventsCount===0)return f;for(m in d=this._events)s.call(d,m)&&f.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},c.prototype.listeners=function(f,d){var m=i?i+f:f,p=this._events[m];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,g=new Array(v);y<v;y++)g[y]=p[y].fn;return g},c.prototype.emit=function(f,d,m,p,y,v){var g=i?i+f:f;if(!this._events[g])return!1;var b=this._events[g],w=arguments.length,j,N;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,m),!0;case 4:return b.fn.call(b.context,d,m,p),!0;case 5:return b.fn.call(b.context,d,m,p,y),!0;case 6:return b.fn.call(b.context,d,m,p,y,v),!0}for(N=1,j=new Array(w-1);N<w;N++)j[N-1]=arguments[N];b.fn.apply(b.context,j)}else{var S=b.length,P;for(N=0;N<S;N++)switch(b[N].once&&this.removeListener(f,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,d);break;case 3:b[N].fn.call(b[N].context,d,m);break;case 4:b[N].fn.call(b[N].context,d,m,p);break;default:if(!j)for(P=1,j=new Array(w-1);P<w;P++)j[P-1]=arguments[P];b[N].fn.apply(b[N].context,j)}}return!0},c.prototype.on=function(f,d,m){var p=new l(d,m||this),y=i?i+f:f;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.once=function(f,d,m){var p=new l(d,m||this,!0),y=i?i+f:f;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.removeListener=function(f,d,m,p){var y=i?i+f:f;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!m||v.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var g=0,b=[],w=v.length;g<w;g++)(v[g].fn!==d||p&&!v[g].once||m&&v[g].context!==m)&&b.push(v[g]);b.length?this._events[y]=b.length===1?b[0]:b:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},c.prototype.removeAllListeners=function(f){var d;return f?(d=i?i+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},o=(function(){function ye(Ae,pe){var ue=[],Pe=!0,Ne=!1,Re=void 0;try{for(var nt=Ae[Symbol.iterator](),xt;!(Pe=(xt=nt.next()).done)&&(ue.push(xt.value),!(pe&&ue.length===pe));Pe=!0);}catch(kt){Ne=!0,Re=kt}finally{try{!Pe&&nt.return&&nt.return()}finally{if(Ne)throw Re}}return ue}return function(Ae,pe){if(Array.isArray(Ae))return Ae;if(Symbol.iterator in Object(Ae))return ye(Ae,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function ye(Ae,pe){for(var ue=0;ue<pe.length;ue++){var Pe=pe[ue];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Ae,Pe.key,Pe)}}return function(Ae,pe,ue){return pe&&ye(Ae.prototype,pe),ue&&ye(Ae,ue),Ae}})(),c=s(3),u=E(c),f=s(2),d=E(f),m=s(0),p=E(m),y=s(5),v=E(y),g=s(10),b=E(g),w=s(9),j=E(w),N=s(36),S=s(37),P=s(13),A=E(P),T=s(26),I=s(38),B=s(39),C=s(40);function E(ye){return ye&&ye.__esModule?ye:{default:ye}}function M(ye,Ae,pe){return Ae in ye?Object.defineProperty(ye,Ae,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ye[Ae]=pe,ye}function q(ye,Ae){if(!(ye instanceof Ae))throw new TypeError("Cannot call a class as a function")}function G(ye,Ae){if(!ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:ye}function Z(ye,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);ye.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ye,Ae):ye.__proto__=Ae)}var te=(0,b.default)("quill:clipboard"),ae="__ql-matcher",Q=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,Ce],["br",De],[Node.ELEMENT_NODE,Ce],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Y],["li",Ue],["b",he.bind(he,"bold")],["i",he.bind(he,"italic")],["style",ne]],ee=[N.AlignAttribute,I.DirectionAttribute].reduce(function(ye,Ae){return ye[Ae.keyName]=Ae,ye},{}),W=[N.AlignStyle,S.BackgroundStyle,T.ColorStyle,I.DirectionStyle,B.FontStyle,C.SizeStyle].reduce(function(ye,Ae){return ye[Ae.keyName]=Ae,ye},{}),O=(function(ye){Z(Ae,ye);function Ae(pe,ue){q(this,Ae);var Pe=G(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this,pe,ue));return Pe.quill.root.addEventListener("paste",Pe.onPaste.bind(Pe)),Pe.container=Pe.quill.addContainer("ql-clipboard"),Pe.container.setAttribute("contenteditable",!0),Pe.container.setAttribute("tabindex",-1),Pe.matchers=[],Q.concat(Pe.options.matchers).forEach(function(Ne){var Re=o(Ne,2),nt=Re[0],xt=Re[1];!ue.matchVisual&&xt===de||Pe.addMatcher(nt,xt)}),Pe}return l(Ae,[{key:"addMatcher",value:function(ue,Pe){this.matchers.push([ue,Pe])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var Pe=this.quill.getFormat(this.quill.selection.savedRange.index);if(Pe[A.default.blotName]){var Ne=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ne,M({},A.default.blotName,Pe[A.default.blotName]))}var Re=this.prepareMatching(),nt=o(Re,2),xt=nt[0],kt=nt[1],Me=le(this.container,xt,kt);return R(Me,`
`)&&Me.ops[Me.ops.length-1].attributes==null&&(Me=Me.compose(new d.default().retain(Me.length()-1).delete(1))),te.log("convert",this.container.innerHTML,Me),this.container.innerHTML="",Me}},{key:"dangerouslyPasteHTML",value:function(ue,Pe){var Ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),Pe),this.quill.setSelection(0,v.default.sources.SILENT);else{var Re=this.convert(Pe);this.quill.updateContents(new d.default().retain(ue).concat(Re),Ne),this.quill.setSelection(ue+Re.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var Pe=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var Ne=this.quill.getSelection(),Re=new d.default().retain(Ne.index),nt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Re=Re.concat(Pe.convert()).delete(Ne.length),Pe.quill.updateContents(Re,v.default.sources.USER),Pe.quill.setSelection(Re.length()-Ne.length,v.default.sources.SILENT),Pe.quill.scrollingContainer.scrollTop=nt,Pe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,Pe=[],Ne=[];return this.matchers.forEach(function(Re){var nt=o(Re,2),xt=nt[0],kt=nt[1];switch(xt){case Node.TEXT_NODE:Ne.push(kt);break;case Node.ELEMENT_NODE:Pe.push(kt);break;default:[].forEach.call(ue.container.querySelectorAll(xt),function(Me){Me[ae]=Me[ae]||[],Me[ae].push(kt)});break}}),[Pe,Ne]}}]),Ae})(j.default);O.DEFAULTS={matchers:[],matchVisual:!0};function z(ye,Ae,pe){return(typeof Ae>"u"?"undefined":i(Ae))==="object"?Object.keys(Ae).reduce(function(ue,Pe){return z(ue,Pe,Ae[Pe])},ye):ye.reduce(function(ue,Pe){return Pe.attributes&&Pe.attributes[Ae]?ue.push(Pe):ue.insert(Pe.insert,(0,u.default)({},M({},Ae,pe),Pe.attributes))},new d.default)}function H(ye){if(ye.nodeType!==Node.ELEMENT_NODE)return{};var Ae="__ql-computed-style";return ye[Ae]||(ye[Ae]=window.getComputedStyle(ye))}function R(ye,Ae){for(var pe="",ue=ye.ops.length-1;ue>=0&&pe.length<Ae.length;--ue){var Pe=ye.ops[ue];if(typeof Pe.insert!="string")break;pe=Pe.insert+pe}return pe.slice(-1*Ae.length)===Ae}function K(ye){if(ye.childNodes.length===0)return!1;var Ae=H(ye);return["block","list-item"].indexOf(Ae.display)>-1}function le(ye,Ae,pe){return ye.nodeType===ye.TEXT_NODE?pe.reduce(function(ue,Pe){return Pe(ye,ue)},new d.default):ye.nodeType===ye.ELEMENT_NODE?[].reduce.call(ye.childNodes||[],function(ue,Pe){var Ne=le(Pe,Ae,pe);return Pe.nodeType===ye.ELEMENT_NODE&&(Ne=Ae.reduce(function(Re,nt){return nt(Pe,Re)},Ne),Ne=(Pe[ae]||[]).reduce(function(Re,nt){return nt(Pe,Re)},Ne)),ue.concat(Ne)},new d.default):new d.default}function he(ye,Ae,pe){return z(pe,ye,!0)}function ie(ye,Ae){var pe=p.default.Attributor.Attribute.keys(ye),ue=p.default.Attributor.Class.keys(ye),Pe=p.default.Attributor.Style.keys(ye),Ne={};return pe.concat(ue).concat(Pe).forEach(function(Re){var nt=p.default.query(Re,p.default.Scope.ATTRIBUTE);nt!=null&&(Ne[nt.attrName]=nt.value(ye),Ne[nt.attrName])||(nt=ee[Re],nt!=null&&(nt.attrName===Re||nt.keyName===Re)&&(Ne[nt.attrName]=nt.value(ye)||void 0),nt=W[Re],nt!=null&&(nt.attrName===Re||nt.keyName===Re)&&(nt=W[Re],Ne[nt.attrName]=nt.value(ye)||void 0))}),Object.keys(Ne).length>0&&(Ae=z(Ae,Ne)),Ae}function ce(ye,Ae){var pe=p.default.query(ye);if(pe==null)return Ae;if(pe.prototype instanceof p.default.Embed){var ue={},Pe=pe.value(ye);Pe!=null&&(ue[pe.blotName]=Pe,Ae=new d.default().insert(ue,pe.formats(ye)))}else typeof pe.formats=="function"&&(Ae=z(Ae,pe.blotName,pe.formats(ye)));return Ae}function De(ye,Ae){return R(Ae,`
`)||Ae.insert(`
`),Ae}function ne(){return new d.default}function Ue(ye,Ae){var pe=p.default.query(ye);if(pe==null||pe.blotName!=="list-item"||!R(Ae,`
`))return Ae;for(var ue=-1,Pe=ye.parentNode;!Pe.classList.contains("ql-clipboard");)(p.default.query(Pe)||{}).blotName==="list"&&(ue+=1),Pe=Pe.parentNode;return ue<=0?Ae:Ae.compose(new d.default().retain(Ae.length()-1).retain(1,{indent:ue}))}function Ce(ye,Ae){return R(Ae,`
`)||(K(ye)||Ae.length()>0&&ye.nextSibling&&K(ye.nextSibling))&&Ae.insert(`
`),Ae}function de(ye,Ae){if(K(ye)&&ye.nextElementSibling!=null&&!R(Ae,`

`)){var pe=ye.offsetHeight+parseFloat(H(ye).marginTop)+parseFloat(H(ye).marginBottom);ye.nextElementSibling.offsetTop>ye.offsetTop+pe*1.5&&Ae.insert(`
`)}return Ae}function Y(ye,Ae){var pe={},ue=ye.style||{};return ue.fontStyle&&H(ye).fontStyle==="italic"&&(pe.italic=!0),ue.fontWeight&&(H(ye).fontWeight.startsWith("bold")||parseInt(H(ye).fontWeight)>=700)&&(pe.bold=!0),Object.keys(pe).length>0&&(Ae=z(Ae,pe)),parseFloat(ue.textIndent||0)>0&&(Ae=new d.default().insert("	").concat(Ae)),Ae}function ve(ye,Ae){var pe=ye.data;if(ye.parentNode.tagName==="O:P")return Ae.insert(pe.trim());if(pe.trim().length===0&&ye.parentNode.classList.contains("ql-clipboard"))return Ae;if(!H(ye.parentNode).whiteSpace.startsWith("pre")){var ue=function(Ne,Re){return Re=Re.replace(/[^\u00a0]/g,""),Re.length<1&&Ne?" ":Re};pe=pe.replace(/\r\n/g," ").replace(/\n/g," "),pe=pe.replace(/\s\s+/g,ue.bind(ue,!0)),(ye.previousSibling==null&&K(ye.parentNode)||ye.previousSibling!=null&&K(ye.previousSibling))&&(pe=pe.replace(/^\s+/,ue.bind(ue,!1))),(ye.nextSibling==null&&K(ye.parentNode)||ye.nextSibling!=null&&K(ye.nextSibling))&&(pe=pe.replace(/\s+$/,ue.bind(ue,!1)))}return Ae.insert(pe)}n.default=O,n.matchAttributor=ie,n.matchBlot=ce,n.matchNewline=Ce,n.matchSpacing=de,n.matchText=ve}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(6),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,b),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);p.blotName="bold",p.tagName=["STRONG","B"],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=(function(){function C(E,M){var q=[],G=!0,Z=!1,te=void 0;try{for(var ae=E[Symbol.iterator](),Q;!(G=(Q=ae.next()).done)&&(q.push(Q.value),!(M&&q.length===M));G=!0);}catch(ee){Z=!0,te=ee}finally{try{!G&&ae.return&&ae.return()}finally{if(Z)throw te}}return q}return function(E,M){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return C(E,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function C(E,M){for(var q=0;q<M.length;q++){var G=M[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(E,G.key,G)}}return function(E,M,q){return M&&C(E.prototype,M),q&&C(E,q),E}})(),l=s(2),c=b(l),u=s(0),f=b(u),d=s(5),m=b(d),p=s(10),y=b(p),v=s(9),g=b(v);function b(C){return C&&C.__esModule?C:{default:C}}function w(C,E,M){return E in C?Object.defineProperty(C,E,{value:M,enumerable:!0,configurable:!0,writable:!0}):C[E]=M,C}function j(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function N(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function S(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var P=(0,y.default)("quill:toolbar"),A=(function(C){S(E,C);function E(M,q){j(this,E);var G=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M,q));if(Array.isArray(G.options.container)){var Z=document.createElement("div");I(Z,G.options.container),M.container.parentNode.insertBefore(Z,M.container),G.container=Z}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var te;return te=P.error("Container required for toolbar",G.options),N(G,te)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(ae){G.addHandler(ae,G.options.handlers[ae])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(ae){G.attach(ae)}),G.quill.on(m.default.events.EDITOR_CHANGE,function(ae,Q){ae===m.default.events.SELECTION_CHANGE&&G.update(Q)}),G.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var ae=G.quill.selection.getRange(),Q=i(ae,1),ee=Q[0];G.update(ee)}),G}return o(E,[{key:"addHandler",value:function(q,G){this.handlers[q]=G}},{key:"attach",value:function(q){var G=this,Z=[].find.call(q.classList,function(ae){return ae.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),q.tagName==="BUTTON"&&q.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){P.warn("ignoring attaching to disabled format",Z,q);return}if(f.default.query(Z)==null){P.warn("ignoring attaching to nonexistent format",Z,q);return}}var te=q.tagName==="SELECT"?"change":"click";q.addEventListener(te,function(ae){var Q=void 0;if(q.tagName==="SELECT"){if(q.selectedIndex<0)return;var ee=q.options[q.selectedIndex];ee.hasAttribute("selected")?Q=!1:Q=ee.value||!1}else q.classList.contains("ql-active")?Q=!1:Q=q.value||!q.hasAttribute("value"),ae.preventDefault();G.quill.focus();var W=G.quill.selection.getRange(),O=i(W,1),z=O[0];if(G.handlers[Z]!=null)G.handlers[Z].call(G,Q);else if(f.default.query(Z).prototype instanceof f.default.Embed){if(Q=prompt("Enter "+Z),!Q)return;G.quill.updateContents(new c.default().retain(z.index).delete(z.length).insert(w({},Z,Q)),m.default.sources.USER)}else G.quill.format(Z,Q,m.default.sources.USER);G.update(z)}),this.controls.push([Z,q])}}},{key:"update",value:function(q){var G=q==null?{}:this.quill.getFormat(q);this.controls.forEach(function(Z){var te=i(Z,2),ae=te[0],Q=te[1];if(Q.tagName==="SELECT"){var ee=void 0;if(q==null)ee=null;else if(G[ae]==null)ee=Q.querySelector("option[selected]");else if(!Array.isArray(G[ae])){var W=G[ae];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),ee=Q.querySelector('option[value="'+W+'"]')}ee==null?(Q.value="",Q.selectedIndex=-1):ee.selected=!0}else if(q==null)Q.classList.remove("ql-active");else if(Q.hasAttribute("value")){var O=G[ae]===Q.getAttribute("value")||G[ae]!=null&&G[ae].toString()===Q.getAttribute("value")||G[ae]==null&&!Q.getAttribute("value");Q.classList.toggle("ql-active",O)}else Q.classList.toggle("ql-active",G[ae]!=null)})}}]),E})(g.default);A.DEFAULTS={};function T(C,E,M){var q=document.createElement("button");q.setAttribute("type","button"),q.classList.add("ql-"+E),M!=null&&(q.value=M),C.appendChild(q)}function I(C,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(M){var q=document.createElement("span");q.classList.add("ql-formats"),M.forEach(function(G){if(typeof G=="string")T(q,G);else{var Z=Object.keys(G)[0],te=G[Z];Array.isArray(te)?B(q,Z,te):T(q,Z,te)}}),C.appendChild(q)})}function B(C,E,M){var q=document.createElement("select");q.classList.add("ql-"+E),M.forEach(function(G){var Z=document.createElement("option");G!==!1?Z.setAttribute("value",G):Z.setAttribute("selected","selected"),q.appendChild(Z)}),C.appendChild(q)}A.DEFAULTS={container:null,handlers:{clean:function(){var E=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var q=this.quill.getFormat();Object.keys(q).forEach(function(G){f.default.query(G,f.default.Scope.INLINE)!=null&&E.quill.format(G,!1)})}else this.quill.removeFormat(M,m.default.sources.USER)},direction:function(E){var M=this.quill.getFormat().align;E==="rtl"&&M==null?this.quill.format("align","right",m.default.sources.USER):!E&&M==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",E,m.default.sources.USER)},indent:function(E){var M=this.quill.getSelection(),q=this.quill.getFormat(M),G=parseInt(q.indent||0);if(E==="+1"||E==="-1"){var Z=E==="+1"?1:-1;q.direction==="rtl"&&(Z*=-1),this.quill.format("indent",G+Z,m.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,m.default.sources.USER)},list:function(E){var M=this.quill.getSelection(),q=this.quill.getFormat(M);E==="check"?q.list==="checked"||q.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",E,m.default.sources.USER)}}},n.default=A,n.addControls=I}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(28),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){f(this,v);var w=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.label.innerHTML=b,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),w}return i(v,[{key:"buildItem",value:function(b){var w=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,b);return w.style.backgroundColor=b.getAttribute("value")||"",w}},{key:"selectItem",value:function(b,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,w);var j=this.label.querySelector(".ql-color-label"),N=b&&b.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v})(c.default);n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(28),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){f(this,v);var w=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=b[j.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return i(v,[{key:"selectItem",value:function(b,w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,w),b=b||this.defaultItem,this.label.innerHTML=b.innerHTML}}]),v})(c.default);n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function c(u,f){for(var d=0;d<f.length;d++){var m=f[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}})();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(u,f){var d=this;o(this,c),this.quill=u,this.boundsContainer=f||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,m=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>p.right&&(v=p.right-y.right,this.root.style.left=d+v+"px"),y.left<p.left&&(v=p.left-y.left,this.root.style.left=d+v+"px"),y.bottom>p.bottom){var g=y.bottom-y.top,b=f.bottom-f.top+g;this.root.style.top=m-b+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();n.default=l}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function B(C,E){var M=[],q=!0,G=!1,Z=void 0;try{for(var te=C[Symbol.iterator](),ae;!(q=(ae=te.next()).done)&&(M.push(ae.value),!(E&&M.length===E));q=!0);}catch(Q){G=!0,Z=Q}finally{try{!q&&te.return&&te.return()}finally{if(G)throw Z}}return M}return function(C,E){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return B(C,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function B(C,E,M){C===null&&(C=Function.prototype);var q=Object.getOwnPropertyDescriptor(C,E);if(q===void 0){var G=Object.getPrototypeOf(C);return G===null?void 0:B(G,E,M)}else{if("value"in q)return q.value;var Z=q.get;return Z===void 0?void 0:Z.call(M)}},l=(function(){function B(C,E){for(var M=0;M<E.length;M++){var q=E[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(C,q.key,q)}}return function(C,E,M){return E&&B(C.prototype,E),M&&B(C,M),C}})(),c=s(3),u=j(c),f=s(8),d=j(f),m=s(43),p=j(m),y=s(27),v=j(y),g=s(15),b=s(41),w=j(b);function j(B){return B&&B.__esModule?B:{default:B}}function N(B,C){if(!(B instanceof C))throw new TypeError("Cannot call a class as a function")}function S(B,C){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:B}function P(B,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);B.prototype=Object.create(C&&C.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(B,C):B.__proto__=C)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=(function(B){P(C,B);function C(E,M){N(this,C),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=A);var q=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,E,M));return q.quill.container.classList.add("ql-snow"),q}return l(C,[{key:"extendToolbar",value:function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),w.default),this.tooltip=new I(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(q,G){M.handlers.link.call(M,!G.format.link)})}}]),C})(p.default);T.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){if(C){var E=this.quill.getSelection();if(E==null||E.length==0)return;var M=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var q=this.quill.theme.tooltip;q.edit("link",M)}else this.quill.format("link",!1)}}}}});var I=(function(B){P(C,B);function C(E,M){N(this,C);var q=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,E,M));return q.preview=q.root.querySelector("a.ql-preview"),q}return l(C,[{key:"listen",value:function(){var M=this;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(q){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),q.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(q){if(M.linkRange!=null){var G=M.linkRange;M.restoreFocus(),M.quill.formatText(G,"link",!1,d.default.sources.USER),delete M.linkRange}q.preventDefault(),M.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(q,G,Z){if(q!=null){if(q.length===0&&Z===d.default.sources.USER){var te=M.quill.scroll.descendant(v.default,q.index),ae=i(te,2),Q=ae[0],ee=ae[1];if(Q!=null){M.linkRange=new g.Range(q.index-ee,Q.length());var W=v.default.formats(Q.domNode);M.preview.textContent=W,M.preview.setAttribute("href",W),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})}},{key:"show",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),C})(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=T}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(29),o=Pe(i),l=s(36),c=s(38),u=s(64),f=s(65),d=Pe(f),m=s(66),p=Pe(m),y=s(67),v=Pe(y),g=s(37),b=s(26),w=s(39),j=s(40),N=s(56),S=Pe(N),P=s(68),A=Pe(P),T=s(27),I=Pe(T),B=s(69),C=Pe(B),E=s(70),M=Pe(E),q=s(71),G=Pe(q),Z=s(72),te=Pe(Z),ae=s(73),Q=Pe(ae),ee=s(13),W=Pe(ee),O=s(74),z=Pe(O),H=s(75),R=Pe(H),K=s(57),le=Pe(K),he=s(41),ie=Pe(he),ce=s(28),De=Pe(ce),ne=s(59),Ue=Pe(ne),Ce=s(60),de=Pe(Ce),Y=s(61),ve=Pe(Y),ye=s(108),Ae=Pe(ye),pe=s(62),ue=Pe(pe);function Pe(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":b.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":b.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":b.ColorStyle,"formats/font":w.FontClass,"formats/size":j.SizeClass,"formats/blockquote":d.default,"formats/code-block":W.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":ee.Code,"formats/italic":A.default,"formats/link":I.default,"formats/script":C.default,"formats/strike":M.default,"formats/underline":G.default,"formats/image":te.default,"formats/video":Q.default,"formats/list/item":y.ListItem,"modules/formula":z.default,"modules/syntax":R.default,"modules/toolbar":le.default,"themes/bubble":Ae.default,"themes/snow":ue.default,"ui/icons":ie.default,"ui/picker":De.default,"ui/icon-picker":de.default,"ui/color-picker":Ue.default,"ui/tooltip":ve.default},!0),n.default=o.default}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=(function(){function v(g,b){for(var w=0;w<b.length;w++){var j=b[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,w){return b&&v(g.prototype,b),w&&v(g,w),g}})(),o=function v(g,b,w){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,b,w)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function d(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(w,j){if(j==="+1"||j==="-1"){var N=this.value(w)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(w),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,w,j)}},{key:"canAdd",value:function(w,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,w,parseInt(j))}},{key:"value",value:function(w){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w))||void 0}}]),g})(c.default.Attributor.Class),y=new p("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(4),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function p(y,v){for(var g=0;g<v.length;g++){var b=v[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,g){return v&&p(y.prototype,v),g&&p(y,g),y}})(),o=s(4),l=c(o);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function f(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function d(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=(function(p){d(y,p);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),y})(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],n.default=m}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=(function(){function N(S,P){for(var A=0;A<P.length;A++){var T=P[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,T.key,T)}}return function(S,P,A){return P&&N(S.prototype,P),A&&N(S,A),S}})(),o=function N(S,P,A){S===null&&(S=Function.prototype);var T=Object.getOwnPropertyDescriptor(S,P);if(T===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,P,A)}else{if("value"in T)return T.value;var B=T.get;return B===void 0?void 0:B.call(A)}},l=s(0),c=p(l),u=s(4),f=p(u),d=s(25),m=p(d);function p(N){return N&&N.__esModule?N:{default:N}}function y(N,S,P){return S in N?Object.defineProperty(N,S,{value:P,enumerable:!0,configurable:!0,writable:!0}):N[S]=P,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function b(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var w=(function(N){b(S,N);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(A,T){A===j.blotName&&!T?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,A,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,T){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,T),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,A,T))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,A)}}]),S})(f.default);w.blotName="list-item",w.tagName="LI";var j=(function(N){b(S,N),i(S,null,[{key:"create",value:function(A){var T=A==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,T);return(A==="checked"||A==="unchecked")&&I.setAttribute("data-checked",A==="checked"),I}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(P){v(this,S);var A=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P)),T=function(B){if(B.target.parentNode===P){var C=A.statics.formats(P),E=c.default.find(B.target);C==="checked"?E.format("list","unchecked"):C==="unchecked"&&E.format("list","checked")}};return P.addEventListener("touchstart",T),P.addEventListener("mousedown",T),A}return i(S,[{key:"format",value:function(A,T){this.children.length>0&&this.children.tail.format(A,T)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,T){if(A instanceof w)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,A,T);else{var I=T==null?this.length():T.offset(this),B=this.split(I);B.parent.insertBefore(A,B)}}},{key:"optimize",value:function(A){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,A);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var T=c.default.create(this.statics.defaultChild);A.moveChildren(T),this.appendChild(T)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,A)}}]),S})(m.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[w],n.ListItem=w,n.default=j}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(56),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(6),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(b){return b==="super"?document.createElement("sup"):b==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b)}},{key:"formats",value:function(b){if(b.tagName==="SUB")return"sub";if(b.tagName==="SUP")return"super"}}]),v})(c.default);p.blotName="script",p.tagName=["SUB","SUP"],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="strike",d.tagName="S",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="underline",d.tagName="U",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=s(0),c=f(l),u=s(27);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["alt","height","width"],v=(function(g){p(b,g);function b(){return d(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,N){y.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return y.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,u.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(c.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,w){for(var j=0;j<w.length;j++){var N=w[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,j){return w&&g(b.prototype,w),j&&g(b,j),b}})(),o=function g(b,w,j){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,w,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=s(4),c=s(27),u=f(c);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["height","width"],v=(function(g){p(b,g);function b(){return d(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,N){y.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return y.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return u.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=(function(){function j(N,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,P){return S&&j(N.prototype,S),P&&j(N,P),N}})(),o=function j(N,S,P){N===null&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,S);if(A===void 0){var T=Object.getPrototypeOf(N);return T===null?void 0:j(T,S,P)}else{if("value"in A)return A.value;var I=A.get;return I===void 0?void 0:I.call(P)}},l=s(35),c=p(l),u=s(5),f=p(u),d=s(9),m=p(d);function p(j){return j&&j.__esModule?j:{default:j}}function y(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function g(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var b=(function(j){g(N,j);function N(){return y(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(P){var A=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,P);return typeof P=="string"&&(window.katex.render(P,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",P)),A}},{key:"value",value:function(P){return P.getAttribute("data-value")}}]),N})(c.default);b.blotName="formula",b.className="ql-formula",b.tagName="SPAN";var w=(function(j){g(N,j),i(N,null,[{key:"register",value:function(){f.default.register(b,!0)}}]);function N(){y(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N})(m.default);n.FormulaBlot=b,n.default=w}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=(function(){function P(A,T){for(var I=0;I<T.length;I++){var B=T[I];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(A,B.key,B)}}return function(A,T,I){return T&&P(A.prototype,T),I&&P(A,I),A}})(),o=function P(A,T,I){A===null&&(A=Function.prototype);var B=Object.getOwnPropertyDescriptor(A,T);if(B===void 0){var C=Object.getPrototypeOf(A);return C===null?void 0:P(C,T,I)}else{if("value"in B)return B.value;var E=B.get;return E===void 0?void 0:E.call(I)}},l=s(0),c=v(l),u=s(5),f=v(u),d=s(9),m=v(d),p=s(13),y=v(p);function v(P){return P&&P.__esModule?P:{default:P}}function g(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function b(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function w(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var j=(function(P){w(A,P);function A(){return g(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),A})(y.default);j.className="ql-syntax";var N=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(P){w(A,P),i(A,null,[{key:"register",value:function(){f.default.register(N,!0),f.default.register(j,!0)}}]);function A(T,I){g(this,A);var B=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,I));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var C=null;return B.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(C),C=setTimeout(function(){B.highlight(),C=null},B.options.interval)}),B.highlight(),B}return i(A,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(C){C.highlight(I.options.highlight)}),this.quill.update(f.default.sources.SILENT),B!=null&&this.quill.setSelection(B,f.default.sources.SILENT)}}}]),A})(m.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(P){var A=window.hljs.highlightAuto(P);return A.value}})(),interval:1e3},n.CodeBlock=j,n.CodeToken=N,n.default=S}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function A(T,I,B){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,I);if(C===void 0){var E=Object.getPrototypeOf(T);return E===null?void 0:A(E,I,B)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(B)}},o=(function(){function A(T,I){for(var B=0;B<I.length;B++){var C=I[B];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,I,B){return I&&A(T.prototype,I),B&&A(T,B),T}})(),l=s(3),c=g(l),u=s(8),f=g(u),d=s(43),m=g(d),p=s(15),y=s(41),v=g(y);function g(A){return A&&A.__esModule?A:{default:A}}function b(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function w(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function j(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(A){j(T,A);function T(I,B){b(this,T),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=N);var C=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,B));return C.quill.container.classList.add("ql-bubble"),C}return o(T,[{key:"extendToolbar",value:function(B){this.tooltip=new P(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),v.default)}}]),T})(m.default);S.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var P=(function(A){j(T,A);function T(I,B){b(this,T);var C=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,B));return C.quill.on(f.default.events.EDITOR_CHANGE,function(E,M,q,G){if(E===f.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&G===f.default.sources.USER){C.show(),C.root.style.left="0px",C.root.style.width="",C.root.style.width=C.root.offsetWidth+"px";var Z=C.quill.getLines(M.index,M.length);if(Z.length===1)C.position(C.quill.getBounds(M));else{var te=Z[Z.length-1],ae=C.quill.getIndex(te),Q=Math.min(te.length()-1,M.index+M.length-ae),ee=C.quill.getBounds(new p.Range(ae,Q));C.position(ee)}}else document.activeElement!==C.textbox&&C.quill.hasFocus()&&C.hide()}),C}return o(T,[{key:"listen",value:function(){var B=this;i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var C=B.quill.getSelection();C!=null&&B.position(B.quill.getBounds(C))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var C=i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,B),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",C===0)return C;E.style.marginLeft=-1*C-E.offsetWidth/2+"px"}}]),T})(d.BaseTooltip);P.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=P,n.default=S}),(function(r,n,s){r.exports=s(63)})]).default})})(Wv)),Wv.exports}var Pu,X8;function p1e(){if(X8)return Pu;X8=1;var e=Pu&&Pu.__extends||(function(){var f=function(d,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var v in y)y.hasOwnProperty(v)&&(p[v]=y[v])},f(d,m)};return function(d,m){f(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})(),t=Pu&&Pu.__assign||function(){return t=Object.assign||function(f){for(var d,m=1,p=arguments.length;m<p;m++){d=arguments[m];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},t.apply(this,arguments)},r=Pu&&Pu.__spreadArrays||function(){for(var f=0,d=0,m=arguments.length;d<m;d++)f+=arguments[d].length;for(var p=Array(f),y=0,d=0;d<m;d++)for(var v=arguments[d],g=0,b=v.length;g<b;g++,y++)p[y]=v[g];return p},n=Pu&&Pu.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},s=n(xy()),i=n(Q8()),o=n(KL()),l=n(h1e()),c=(function(f){e(d,f);function d(m){var p=f.call(this,m)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(v,g,b,w){var j,N,S,P;v==="text-change"?(N=(j=p).onEditorChangeText)===null||N===void 0||N.call(j,p.editor.root.innerHTML,g,w,p.unprivilegedEditor):v==="selection-change"&&((P=(S=p).onEditorChangeSelection)===null||P===void 0||P.call(S,g,w,p.unprivilegedEditor))};var y=p.isControlled()?m.value:m.defaultValue;return p.value=y??"",p}return d.prototype.validateProps=function(m){var p;if(s.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(m.children)){var y=s.default.Children.only(m.children);if(((p=y)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},d.prototype.shouldComponentUpdate=function(m,p){var y=this,v;if(this.validateProps(m),!this.editor||this.state.generation!==p.generation)return!0;if("value"in m){var g=this.getEditorContents(),b=(v=m.value,v??"");this.isEqualValue(b,g)||this.setEditorContents(this.editor,b)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),r(this.cleanProps,this.dirtyProps).some(function(w){return!o.default(m[w],y.props[w])})},d.prototype.shouldComponentRegenerate=function(m){var p=this;return this.dirtyProps.some(function(y){return!o.default(m[y],p.props[y])})},d.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},d.prototype.componentWillUnmount=function(){this.destroyEditor()},d.prototype.componentDidUpdate=function(m,p){var y=this;if(this.editor&&this.shouldComponentRegenerate(m)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var b=this.regenerationSnapshot,v=b.delta,w=b.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),u(function(){return y.setEditorSelection(j,w)})}},d.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},d.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},d.prototype.isControlled=function(){return"value"in this.props},d.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},d.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},d.prototype.createEditor=function(m,p){var y=new l.default(m,p);return p.tabIndex!=null&&this.setEditorTabIndex(y,p.tabIndex),this.hookEditor(y),y},d.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},d.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},d.prototype.getEditorContents=function(){return this.value},d.prototype.getEditorSelection=function(){return this.selection},d.prototype.isDelta=function(m){return m&&m.ops},d.prototype.isEqualValue=function(m,p){return this.isDelta(m)&&this.isDelta(p)?o.default(m.ops,p.ops):o.default(m,p)},d.prototype.setEditorContents=function(m,p){var y=this;this.value=p;var v=this.getEditorSelection();typeof p=="string"?m.setContents(m.clipboard.convert(p)):m.setContents(p),u(function(){return y.setEditorSelection(m,v)})},d.prototype.setEditorSelection=function(m,p){if(this.selection=p,p){var y=m.getLength();p.index=Math.max(0,Math.min(p.index,y-1)),p.length=Math.max(0,Math.min(p.length,y-1-p.index)),m.setSelection(p)}},d.prototype.setEditorTabIndex=function(m,p){var y,v;!((v=(y=m)===null||y===void 0?void 0:y.scroll)===null||v===void 0)&&v.domNode&&(m.scroll.domNode.tabIndex=p)},d.prototype.setEditorReadOnly=function(m,p){p?m.disable():m.enable()},d.prototype.makeUnprivilegedEditor=function(m){var p=m;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},d.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=i.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},d.prototype.renderEditingArea=function(){var m=this,p=this.props,y=p.children,v=p.preserveWhitespace,g=this.state.generation,b={key:g,ref:function(w){m.editingArea=w}};return s.default.Children.count(y)?s.default.cloneElement(s.default.Children.only(y),b):v?s.default.createElement("pre",t({},b)):s.default.createElement("div",t({},b))},d.prototype.render=function(){var m;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},d.prototype.onEditorChangeText=function(m,p,y,v){var g,b;if(this.editor){var w=this.isDelta(this.value)?v.getContents():v.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=w,(b=(g=this.props).onChange)===null||b===void 0||b.call(g,m,p,y,v))}},d.prototype.onEditorChangeSelection=function(m,p,y){var v,g,b,w,j,N;if(this.editor){var S=this.getEditorSelection(),P=!S&&m,A=S&&!m;o.default(m,S)||(this.selection=m,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,m,p,y),P?(w=(b=this.props).onFocus)===null||w===void 0||w.call(b,m,p,y):A&&((N=(j=this.props).onBlur)===null||N===void 0||N.call(j,S,p,y)))}},d.prototype.focus=function(){this.editor&&this.editor.focus()},d.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},d.displayName="React Quill",d.Quill=l.default,d.defaultProps={theme:"snow",modules:{},readOnly:!1},d})(s.default.Component);function u(f){Promise.resolve().then(f)}return Pu=c,Pu}var m1e=p1e();const x1e=Ea(m1e),Bs={all:["shared-inbox"],emails:()=>[...Bs.all,"emails"],emailsList:(e,t)=>[...Bs.emails(),e,t],senders:(e,t)=>[...Bs.all,"senders",e,t]},g1e=(e,t,r)=>{const n=t?.limit||50;return aie({queryKey:Bs.emailsList(e||"",t),queryFn:async({pageParam:s=0})=>{if(!e)return{data:[],hasMore:!1,total:0,page:0};const i={...t,page:s,limit:n},o=await R7(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[];return{data:c,hasMore:o?.hasMore??c.length===n,total:o?.total??c.length,page:s}},getNextPageParam:(s,i)=>{if(s.hasMore)return i.length},initialPageParam:0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,placeholderData:s=>s})},v1e=(e,t)=>jc({queryKey:Bs.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await vae(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),y1e=()=>{const e=ji();return Al({mutationFn:async({userId:t,accountEmail:r,scopeHours:n,scopeDays:s})=>await fae(t,r,n,s),onSuccess:()=>{e.invalidateQueries({queryKey:Bs.emails()})}})},b1e=({isOpen:e,onClose:t,userId:r,emailId:n,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:u,showError:f}=ba(),[d,m]=U.useState(!1),[p,y]=U.useState(!1),[v,g]=U.useState([]),[b,w]=U.useState(!1),[j,N]=U.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});U.useEffect(()=>{if(!e)return;const A=new Date;A.setDate(A.getDate()+1),A.setHours(10,0,0,0);const T=new Date(A);T.setHours(11,0,0,0);let I=A.toISOString().substring(0,16),B=T.toISOString().substring(0,16);if(l?.date||l?.time)try{const C=l.date||"tomorrow",E=l.time||"10:00 AM";let M=new Date;if(C.toLowerCase().includes("tomorrow"))M.setDate(M.getDate()+1);else if(!C.toLowerCase().includes("today")){const G=C.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(G){const[,Z,te,ae]=G;M=new Date(parseInt(ae)<100?2e3+parseInt(ae):parseInt(ae),parseInt(Z)-1,parseInt(te))}}const q=E.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(q){let G=parseInt(q[1]);const Z=q[2]?parseInt(q[2]):0,te=q[3]?.toLowerCase();te==="pm"&&G!==12&&(G+=12),te==="am"&&G===12&&(G=0),M.setHours(G,Z,0,0),I=M.toISOString().substring(0,16);const ae=new Date(M);ae.setHours(ae.getHours()+1),B=ae.toISOString().substring(0,16)}}catch(C){console.warn("Failed to parse extracted date/time:",C)}N({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:I,end:B,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){f("Please set date/time and add participants to check availability");return}y(!0);try{const A=new Date(j.start).toISOString().split("T")[0],T=new Date(j.end).toISOString().split("T")[0],I=await lse(r,j.participants,A,T);I.success&&I.data&&(g(I.data),w(!0))}catch(A){f(A.message||"Failed to check availability")}finally{y(!1)}},P=async A=>{if(A.preventDefault(),!j.title||!j.start||!j.end){f("Please fill in all required fields");return}if(!n){f("Email ID is required to create meeting");return}m(!0);try{(await ose({userId:r,emailId:n,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(u("Meeting created successfully!"),c?.(),t())}catch(T){f(T.message||"Failed to create meeting")}finally{m(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(ha,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&a.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ea,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),a.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&a.jsxs("p",{children:["Date: ",l.date]}),l.time&&a.jsxs("p",{children:["Time: ",l.time]}),l.location&&a.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),a.jsxs("form",{onSubmit:P,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:A=>N({...j,title:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Os,{className:"w-3 h-3"})," Start Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:A=>N({...j,start:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Os,{className:"w-3 h-3"})," End Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:A=>N({...j,end:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(iD,{className:"w-3 h-3"})," Location"]}),a.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:A=>N({...j,location:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(e0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&a.jsx("button",{type:"button",onClick:S,disabled:p||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Checking...":"Check Availability"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((A,T)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[A,a.jsx("button",{type:"button",onClick:()=>N({...j,participants:j.participants.filter((I,B)=>B!==T)}),className:"hover:text-indigo-900",children:a.jsx(ir,{className:"w-3 h-3"})})]},T)),a.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:A=>{if(A.key==="Enter"&&A.currentTarget.value.trim()){A.preventDefault();const T=A.currentTarget.value.trim();j.participants.includes(T)||N({...j,participants:[...j.participants,T]}),A.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),b&&v.length>0&&a.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((A,T)=>a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-medium",children:A.userId}),A.busySlots&&A.busySlots.length>0?a.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",A.busySlots.length," conflict(s)"]}):a.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},T))]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:A=>N({...j,description:A.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:A=>N({...j,createInGoogleCalendar:A.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),a.jsx("button",{type:"button",onClick:P,disabled:d||!j.title||!j.start||!j.end||!n,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ad,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},w1e={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},F9=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Xc=(e,t)=>{const r=F9(e);return(w1e[t]||[]).includes(r)},N1e=e=>F9(e)==="Admin",Vv=at.forwardRef((e,t)=>a.jsx(x1e,{...e,ref:t}));Vv.displayName="QuillEditor";function Y8({content:e,highlightTerm:t}){const r=U.useRef(null),n=e||"No content",s=/<[a-z][\s\S]*>/i.test(n);if(U.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(u=>{u.forEach(f=>{if(f.isIntersecting){const d=f.target,m=d.getAttribute("data-src");m&&(d.src=m,d.removeAttribute("data-src"),d.loading="lazy",c.unobserve(d))}})},{rootMargin:"50px"});return l.forEach(u=>c.observe(u)),()=>{l.forEach(u=>c.unobserve(u))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),f=(s?n.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():n).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),d=G8.sanitize(f,{ALLOWED_TAGS:["mark","br"]});return a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:d}})}const i=s?G8.sanitize(n,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,u,f)=>`<img${c}data-src="${u}" loading="lazy"${f}>`)),a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:n}})}const M9=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),n=ji(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=Xc(o,"shared-inbox:add-note"),c=Xc(o,"shared-inbox:assign-email"),u=Xc(o,"shared-inbox:send-email"),f=Xc(o,"shared-inbox:reply-email"),d=Xc(o,"shared-inbox:forward-email"),m=Xc(o,"shared-inbox:star-email"),p=Xc(o,"shared-inbox:archive-email"),y=Xc(o,"shared-inbox:delete-email"),v=Xc(o,"shared-inbox:update-metadata");Xc(o,"shared-inbox:manage-accounts");const g=Xc(o,"shared-inbox:sync-emails"),b=(D,fe="An error occurred")=>D?typeof D=="string"?D:typeof D=="object"?typeof D.message=="string"&&D.message?D.message:D.error&&typeof D.error=="object"&&typeof D.error.message=="string"&&D.error.message?D.error.message:fe:fe:fe,w=D=>!D||typeof D!="string"?"":D.replace(/\n/g,"<br/>"),j=async(D,fe)=>{try{return await D()}catch(ge){const Ge=b(ge,"An error occurred");return fe&&fe(Ge),null}},[N,S]=U.useState(null),[P,A]=U.useState(!1),[T,I]=U.useState(!1),B=U.useRef(!1),C=U.useRef(null),E=U.useRef(null),[M,q]=U.useState(""),[G,Z]=U.useState(null),[te,ae]=U.useState(""),[Q,ee]=U.useState(""),[W,O]=U.useState("contains"),[z,H]=U.useState(void 0),[R,K]=U.useState(""),[le,he]=U.useState(""),[ie,ce]=U.useState(void 0),[De,ne]=U.useState(void 0),[Ue,Ce]=U.useState(""),[de,Y]=U.useState(!1),[ve,ye]=U.useState(!1),{data:Ae=[]}=v1e(i,de?150:void 0),[pe,ue]=U.useState([]),[Pe,Ne]=U.useState(!1),[Re,nt]=U.useState(""),[xt,kt]=U.useState(!1),[Me,vt]=U.useState([]),[ut,lt]=U.useState([]),[pr,rr]=U.useState(!1),[ft,$t]=U.useState(""),[tr,$e]=U.useState(null),[bt,jr]=U.useState(null),[Yt,Fr]=U.useState(null),[Cr,lr]=U.useState("list"),[Ut,wr]=U.useState(new Set),[Er,Yr]=U.useState(new Set),[sn,Wn]=U.useState({}),[or,Vn]=U.useState(""),[fn,Ke]=U.useState(""),[Nt,Vt]=U.useState(null),[re,me]=U.useState(!1),[be,_e]=U.useState(null),[Ee,Oe]=U.useState(null),[Xe,ct]=U.useState([]),[Ve,Je]=U.useState(null),[He,Le]=U.useState(!1),tt=U.useRef(null),ht=U.useRef(null),[Pt,Mt]=U.useState(!1),[vr,zr]=U.useState([]),[on,Mn]=U.useState(null),[ps,xn]=U.useState(!1),[wa,Pn]=U.useState(""),[pa,sa]=U.useState([]),[ma,Ws]=U.useState(!1),[Ta,qe]=U.useState(""),[It,Ct]=U.useState(0),[sr,Nr]=U.useState([]),[mr,_r]=U.useState(null),[kn,In]=U.useState([]),[nr,xr]=U.useState(!1),[Dt,Ar]=U.useState(""),Ht=U.useRef(null),[Gn,Rn]=U.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[cn,er]=U.useState(null),[Sn,Na]=U.useState({}),[un,gn]=U.useState([]),[$r,Gr]=U.useState(!1),[Wt,En]=U.useState(null),[Kn,ms]=U.useState(!1),[Be,gr]=U.useState(null),[Tr,kr]=U.useState([]),[Jr,$n]=U.useState(null),[xs,us]=U.useState(!1),[Ds,oi]=U.useState([]),[kc,Sc]=U.useState(""),[Ld,Cl]=U.useState(!1),Yl=U.useRef(null),_c=U.useRef(null),[hu,Go]=U.useState("domain"),[ki,ro]=U.useState(""),[Ac,vo]=U.useState(""),[gs,El]=U.useState([]),[vs,Ko]=U.useState(!1),[Cc,yo]=U.useState(!1),[Tl,Xo]=U.useState(""),[pu,Yo]=U.useState(!1),[Jo,Ec]=U.useState(""),[Xa,w0]=U.useState(null),[mu,Ol]=U.useState(!1),[xu,no]=U.useState([]),[kf,V]=U.useState(!1),[we,ze]=U.useState(!1),[Ze,pt]=U.useState(!1),[Ot,Kt]=U.useState(null),[br,Rr]=U.useState(null),[Kr,Zr]=U.useState([]),[hn,Oa]=U.useState(""),[za,Ya]=U.useState(!1),[Vs,ys]=U.useState(!1),[Qo,li]=U.useState(!1),[bs,ao]=U.useState(!1),[Ja,Tc]=U.useState("compose"),[wn,ds]=U.useState([]),[Pa,ws]=U.useState([]),[pn,Ls]=U.useState([]),[Ia,Ui]=U.useState(""),[Ns,fa]=U.useState(""),[js,qi]=U.useState(""),[Pl,ci]=U.useState(""),[Jl,Fd]=U.useState([]),[Oc,Il]=U.useState([]),[Ql,ui]=U.useState(!1),[Fs,Zo]=U.useState(!1),[el,bo]=U.useState(!1),[tl,di]=U.useState(""),[_n,$i]=U.useState(""),[Qa,Ms]=U.useState(""),[rl,Md]=U.useState([]),[Dl,so]=U.useState(!1),[Zl,zi]=U.useState(0),[Da,Si]=U.useState([]),nl=U.useRef(null),[ec,io]=U.useState(!1),[ks,fi]=U.useState([]),[Xn,Qn]=U.useState(!1),[xa,Za]=U.useState(""),[al,Xu]=U.useState(null),[Pc,Rd]=U.useState([]),[sl,Yu]=U.useState([]),[Gs,wo]=U.useState([]),[Bd,Ic]=U.useState([]),[Ud,Ju]=U.useState({contacts:[],companies:[]}),[qd,ia]=U.useState(!1),[gu,vu]=U.useState([]),[Ll,Qu]=U.useState([]),[Dc,Zu]=U.useState([]),[N0,Lc]=U.useState(!1),[Sh,yu]=U.useState(!1),[Fc,Mc]=U.useState(null),[Sf,Rc]=U.useState(!1),[il,Bc]=U.useState(!1),[_f,ed]=U.useState(null),[_h,bu]=U.useState(!1),[am,sm]=U.useState(null),[td,_i]=U.useState(!1),[hi,Ai]=U.useState(null),[Fl,wu]=U.useState(!1),[Ss,Hi]=U.useState({}),[Ah,Ch]=U.useState(!1),[Uc,tc]=U.useState(!1),[rc,qc]=U.useState(""),[Af,nc]=U.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[No,Yn]=U.useState([]),[oa,ac]=U.useState(!1),[Ks,Xs]=U.useState(!1),[ga,jo]=U.useState(new Set),[Ha,Cf]=U.useState(!1),[Ef,$c]=U.useState(!1),[ol,Eh]=U.useState("date"),[Ci,$d]=U.useState("desc"),[_,F]=U.useState(!1),[J,oe]=U.useState(null),xe=U.useRef(null),je=U.useRef(null),Se=U.useRef(null),Te=U.useRef(null),Ie=U.useCallback(D=>{const fe={searchText:""};if(!D||typeof D!="string")return fe;const ge=[];let Ge="",it=!1;for(let _t=0;_t<D.length;_t++){const Qt=D[_t];if(Qt==='"'){it=!it;continue}if(!it&&(Qt===" "||Qt==="	")){Ge&&(ge.push(Ge),Ge="");continue}Ge+=Qt}Ge&&ge.push(Ge);const zt=[];for(const _t of ge){const Qt=_t.match(/^from:(.+)$/i);if(Qt){fe.from=Qt[1].trim();continue}const Or=_t.match(/^subject:(.+)$/i);if(Or){fe.subject=Or[1].trim();continue}if(/^has:attachment$/i.test(_t)){fe.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(_t)||/^-has:attachment$/i.test(_t)){fe.hasAttachment=!1;continue}if(/^is:read$/i.test(_t)){fe.isRead=!0;continue}if(/^is:unread$/i.test(_t)){fe.isRead=!1;continue}if(/^is:starred$/i.test(_t)){fe.isStarred=!0;continue}if(/^is:unstarred$/i.test(_t)){fe.isStarred=!1;continue}zt.push(_t)}return fe.searchText=zt.join(" ").trim(),fe},[]),Fe=U.useMemo(()=>{const D=Ie(M),fe={};D.searchText&&(fe.search=D.searchText),Ue&&(fe.status=Ue);const ge=D.from??te;ge&&(fe.from=ge);const Ge=D.subject??Q;Ge&&(fe.subject=Ge,fe.subjectOperator=W);const it=D.hasAttachment!==void 0?D.hasAttachment:z;it!==void 0&&(fe.hasAttachment=it),R&&(fe.dateFrom=R),le&&(fe.dateTo=le),Wt&&(fe.labelId=Wt);const zt=D.isRead!==void 0?D.isRead:ie;zt!==void 0&&(fe.isRead=zt);const _t=D.isStarred!==void 0?D.isStarred:De;return _t!==void 0&&(fe.isStarred=_t),fe},[M,Ue,te,Q,W,z,R,le,Wt,ie,De,Ie]),{data:Qe,isLoading:gt,isFetchingNextPage:dt,hasNextPage:st,fetchNextPage:qt,error:At,refetch:Ye}=g1e(i,Object.keys(Fe).length>0?Fe:void 0,{staleTime:30*1e3,refetchInterval:60*1e3}),et=U.useMemo(()=>Qe?.pages?Qe.pages.flatMap(ge=>ge.data||[]).filter((ge,Ge,it)=>ge.id&&Ge===it.findIndex(zt=>zt.id===ge.id)):[],[Qe]);Qe?.pages[0]?.total??et.length;const Et=y1e(),Tt=U.useCallback(()=>{!dt&&st&&i&&(console.log("[INBOX] Loading more emails - hasMore:",st,"loadingMore:",dt),qt())},[dt,st,qt,i]);U.useEffect(()=>{if(At){const D=At?.message||"Failed to load inbox";Fr(D),(D.toLowerCase().includes("google")||D.toLowerCase().includes("connected"))&&Z(!1)}else Fr(null)},[At]),U.useEffect(()=>{const D=Yl.current,fe=_c.current;if(!D||!fe||!st||dt)return;let ge=null,Ge=null;try{ge=new IntersectionObserver(it=>{it[0].isIntersecting&&st&&!dt&&(console.log("[INBOX] IntersectionObserver triggered - loading more"),Tt())},{threshold:.1,rootMargin:"300px",root:fe}),ge.observe(D)}catch(it){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",it)}return Ge=()=>{if(dt||!st)return;const it=fe,zt=D;if(!it||!zt)return;const _t=it.getBoundingClientRect(),Qt=zt.getBoundingClientRect(),Or=_t.bottom-Qt.top;Or<500&&Or>-100&&(console.log("[INBOX] Scroll handler triggered - loading more"),Tt())},fe.addEventListener("scroll",Ge,{passive:!0}),()=>{ge&&ge.disconnect(),Ge&&fe&&fe.removeEventListener("scroll",Ge)}},[st,dt,Tt,Cr,et.length]);const Lt=U.useCallback(async()=>{if(i)try{const D=await L3(i),fe=D?.connected===!0||D?.data?.connected===!0;Z(fe)}catch{Z(!1)}},[i]),yr=U.useCallback(async()=>{if(i){Ya(!0);try{const D=await Rae(i),fe=D?.data??D??[];Zr(Array.isArray(fe)?fe:[])}catch(D){console.error("[INBOX] Failed to load excluded domains:",D),r(b(D,"Failed to load excluded domains")),Zr([])}finally{Ya(!1)}}},[i,r]),cr=U.useCallback(async()=>{if(!(!i||!hn.trim())){ys(!0);try{await Bae(i,hn.trim()),Oa(""),await yr(),t("Domain added to exclusion list"),Ye()}catch(D){console.error("[INBOX] Failed to add excluded domain:",D),r(b(D,"Failed to add excluded domain"))}finally{ys(!1)}}},[i,hn,yr,Ye,t,r]),qr=U.useCallback(async D=>{if(i)try{await Uae(i,D),await yr(),t("Domain removed from exclusion list"),Ye()}catch(fe){console.error("[INBOX] Failed to remove excluded domain:",fe),r(b(fe,"Failed to remove excluded domain"))}},[i,yr,Ye,t,r]),dr=U.useCallback(async()=>{if(i)try{const D=await hae(i),fe=D?.data??D??[],ge=Array.isArray(fe)?fe.filter((Ge,it,zt)=>{const _t=(Ge.email||"").toLowerCase();return zt.findIndex(Qt=>(Qt.email||"").toLowerCase()===_t&&Qt.userId===Ge.userId)===it}):[];vt(ge),Z(ge.length>0),ge.length>0&&!js&&qi(ge[0].email)}catch(D){console.error("[INBOX] Failed to load connected accounts:",D),vt([]),Z(!1)}},[i]),Bn=async()=>{if(i)try{const D=await M7(i),fe=D?.authUrl||D?.data?.authUrl;fe?window.location.href=fe:r("Failed to get authorization URL")}catch(D){r(D?.message||"Failed to connect account")}},zn=async D=>{if(i){$e(D);try{await pae(i,D),t(`Disconnected ${D}`),await dr(),await Ye()}catch(fe){r(fe?.message||"Failed to disconnect account")}finally{$e(null)}}},Nn=U.useCallback(async()=>{if(i)try{const D=await mae(i),fe=D?.data??D??[];lt(Array.isArray(fe)?fe:[])}catch(D){console.error("[INBOX] Failed to load filtered accounts:",D),lt([])}},[i]),dn=async D=>{if(i){jr(D);try{await xae(i,D),await Nn(),await n.invalidateQueries({queryKey:Bs.emails()}),await Ye(),t(`Emails from ${D} will be hidden`)}catch(fe){r(fe?.message||"Failed to filter account")}finally{jr(null)}}},ta=async(D,fe)=>{if(i){jr(fe);try{await gae(i,D),await Nn(),await n.invalidateQueries({queryKey:Bs.emails()}),await Ye(),t(`Emails from ${fe} will now be visible`)}catch(ge){r(ge?.message||"Failed to unfilter account")}finally{jr(null)}}};U.useEffect(()=>{if(!i){Z(!1);return}Lt(),dr(),yr(),Nn()},[i,Lt,dr,yr,Nn]),U.useEffect(()=>{Me.length>0&&!js&&qi(Me[0].email)},[Me]),U.useEffect(()=>{try{const D=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(D){const fe=JSON.parse(D);Array.isArray(fe)&&ue(fe)}}catch{}},[]),U.useEffect(()=>{if(pe.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(pe))}catch{}},[pe]),U.useEffect(()=>{i&&(async()=>{try{const fe=await Td(),ge=fe?.data??fe??[];sa(Array.isArray(ge)?ge:[])}catch(fe){const ge=fe?.message||"Failed to load users";console.error("Failed to load users:",ge)}})()},[i]),U.useEffect(()=>{const D=fe=>{Ht.current&&!Ht.current.contains(fe.target)&&xr(!1)};if(nr)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[nr]),U.useEffect(()=>{i&&(async()=>{try{const fe=await Jp(),ge=fe?.data??fe??[];Il(Array.isArray(ge)?ge:[])}catch(fe){console.error("Failed to load contacts:",fe?.message)}})()},[i]);const Un=U.useCallback(async(D=!1)=>{if(i&&!($r&&!D))try{Gr(!0);const fe=await Jae(i),ge=fe?.labels??fe?.data;gn(Array.isArray(ge)?ge:[])}catch(fe){console.error("Error fetching labels:",fe),gn([])}finally{Gr(!1)}},[i]);U.useEffect(()=>{i&&G&&Un()},[i,G,Un]),U.useEffect(()=>{Kn&&Be&&i&&Un(!0)},[Kn,Be,i,Un]),U.useEffect(()=>{i&&bs&&(async()=>{if(i)try{const fe=await B7(i),ge=fe?.data??fe??[];Fd(Array.isArray(ge)?ge:[]);const Ge=ge.find(it=>it.isDefault);Ge&&ci(Ge.content||"")}catch(fe){console.error("Failed to load signatures:",fe?.message)}})()},[i,bs]);const Xr=async()=>{if(i){A(!0),Fr(null);try{await Et.mutateAsync({userId:i,scopeHours:24}),t("Synced new mail from last 24 hours")}catch(D){const fe=D?.message||"Sync failed";r(fe),Fr(fe)}finally{A(!1)}}},La=U.useRef(Et),Ei=U.useRef(n);U.useEffect(()=>{La.current=Et,Ei.current=n},[Et,n]),U.useEffect(()=>{if(!i||!g){C.current&&(clearTimeout(C.current),C.current=null),E.current&&(clearInterval(E.current),E.current=null);return}C.current&&(clearTimeout(C.current),C.current=null),E.current&&(clearInterval(E.current),E.current=null);const D=()=>{if(B.current){console.log("[INBOX] Background sync already in progress, skipping...");return}B.current=!0,La.current.mutate({userId:i,scopeDays:90},{onSuccess:()=>{B.current=!1},onError:fe=>{console.log("[INBOX] Background sync failed:",fe?.message||"Unknown error"),B.current=!1}})};return C.current=setTimeout(()=>{D(),C.current=null},5e3),E.current=setInterval(()=>{D()},1500*1e3),()=>{C.current&&(clearTimeout(C.current),C.current=null),E.current&&(clearInterval(E.current),E.current=null),B.current=!1}},[i,g]);const es=async D=>{if(i){ia(!0);try{const fe=await Vae(D);Ju(fe?.data||{contacts:[],companies:[]})}catch(fe){console.error("Failed to load suggested links:",fe),Ju({contacts:[],companies:[]})}finally{ia(!1)}}},ts=async D=>{if(i){Lc(!0);try{const[fe,ge,Ge]=await Promise.all([Kae(D).catch(()=>({success:!0,data:[]})),Xae(D).catch(()=>({success:!0,data:[]})),Yae(D).catch(()=>({success:!0,data:[]}))]);vu(fe?.data||[]),Qu(ge?.data||[]),Zu(Ge?.data||[])}catch(fe){console.error("Failed to load related items:",fe),vu([]),Qu([]),Zu([])}finally{Lc(!1)}}};U.useEffect(()=>{(async()=>{if(i)try{const[fe,ge,Ge,it]=await Promise.all([Od().catch(()=>({data:[]})),Jy(i).catch(()=>({data:[]})),Qp(i).catch(()=>({data:[]})),F7({userId:i}).catch(()=>({data:[]}))]);Rd(fe?.data||[]),Yu(ge?.data||[]),wo(Ge?.data||[]),Ic(it?.data||[])}catch(fe){console.error("Failed to load CRM data:",fe)}})()},[i]);const An=async(D,fe)=>{if(!(!N?.id||!i)){Bc(!0);try{const ge=N.id;let Ge;switch(D){case"contact":await qae({emailId:ge,contactId:fe,userId:i}),Ge="contactId";break;case"company":await $ae({emailId:ge,companyId:fe,userId:i}),Ge="companyId";break;case"deal":await zae({emailId:ge,dealId:fe,userId:i}),Ge="dealId";break;case"project":await Hae({emailId:ge,projectId:fe,userId:i}),Ge="projectId";break;case"contract":await Wae({emailId:ge,contractId:fe,userId:i}),Ge="contractId";break;default:throw new Error(`Unknown link type: ${D}`)}t(`Email linked to ${D} successfully`),S(it=>it?{...it,linkedRecords:{...it.linkedRecords||{},[Ge]:fe}}:null),ts(ge),yu(!1),Mc(null)}catch(ge){r(ge?.message||`Failed to link email to ${D}`)}finally{Bc(!1)}}},pi=async D=>{if(!(!N?.id||!i))try{const fe=await Gae({emailId:N.id,userId:i,title:D.title||N.subject||"Task from Email",description:D.description||N.body||"",dueDate:D.dueDate,priority:D.priority||"Medium",projectId:D.projectId,assigneeId:D.assigneeId});t("Task created successfully"),Rc(!1),ts(N.id)}catch(fe){r(fe?.message||"Failed to create task")}},_s=async D=>{if(!i)return;S(null),kr([]),$n(null),Oe(null),ct([]),Je(null),I(!0);const fe=!D.isRead;fe&&(n.setQueriesData({queryKey:Bs.emails()},ge=>{if(!ge?.pages)return ge;const Ge=ge.pages.map(it=>{const zt=it.data.map(_t=>_t.id===D.id?{..._t,isRead:!0}:_t);return{...it,data:zt}});return{...ge,pages:Ge}}),n.invalidateQueries({queryKey:Bs.emails()}));try{const ge=await yae(D.id,i),Ge=ge?.data??ge??{},it={...D,...Ge,body:Ge.body??D.lastMessage,gmailThreadId:Ge.gmailThreadId??D.gmailThreadId,isRead:!0};S(it),fe&&Fa(D.id,!0,!0).catch(zt=>{console.error("[INBOX] Failed to mark email as read:",zt?.message),n.setQueryData(Bs.emailsList(i||"",Fe),_t=>_t?.pages?{..._t,pages:_t.pages.map(Qt=>({...Qt,data:Qt.data.map(Or=>Or.id===D.id?{...Or,isRead:!1}:Or)}))}:_t)}),D.id&&(es(D.id),ts(D.id));try{const zt=await Nae(D.id),_t=zt?.data??zt??[];Wn(Qt=>({...Qt,[D.id]:_t.map(Or=>({id:Or.id,userId:Or.userId,userName:Or.userName,message:Or.message,timestamp:Or.createdAt,imageUrl:Or.imageUrl,imageName:Or.imageName,markedFor:Or.markedFor||[]}))}))}catch(zt){const _t=zt?.message||"Failed to load notes";console.error("Failed to load notes:",_t),Wn(Qt=>({...Qt,[D.id]:[]}))}if(i)try{V(!0);const zt=await Bv(i,D.id);zt.success&&zt.data?no(zt.data):no([])}catch(zt){console.error("Failed to load calendar events:",zt.message),no([])}finally{V(!1)}}catch(ge){r(ge?.message||"Could not load email")}finally{I(!1)}},Fa=async(D,fe,ge=!1)=>{if(i)try{await VP(D,fe,i),n.setQueriesData({queryKey:Bs.emails()},Ge=>{if(!Ge?.pages)return Ge;const it=Ge.pages.map(zt=>({...zt,data:zt.data.map(_t=>_t.id===D?{..._t,isRead:fe,syncStatus:{..._t.syncStatus||{},readStatus:"pending"}}:_t)}));return{...Ge,pages:it}}),N?.id===D&&S(Ge=>Ge?{...Ge,isRead:fe,syncStatus:{...Ge.syncStatus||{},readStatus:"pending"}}:null),ge||t(fe?"Marked as read":"Marked as unread")}catch(Ge){ge?console.error("[INBOX] Failed to mark email as read:",Ge?.message):(r(Ge?.message||"Update failed"),Ye())}},As=async(D,fe)=>{try{await bae(D,fe),n.setQueryData(Bs.emailsList(i||"",Fe),ge=>ge?.pages?{...ge,pages:ge.pages.map(Ge=>({...Ge,data:Ge.data.map(it=>it.id===D?{...it,isStarred:fe,syncStatus:{...it.syncStatus||{},starredStatus:"pending"}}:it)}))}:ge),N?.id===D&&S(ge=>ge?{...ge,isStarred:fe,syncStatus:{...ge.syncStatus||{},starredStatus:"pending"}}:null),t(fe?"Starred":"Unstarred")}catch(ge){r(ge?.message||"Update failed"),Ye()}},fs=D=>{if(!D)return null;switch(D){case"synced":return a.jsx(yn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return a.jsx(Os,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return a.jsx(ea,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},Ys=async(D,fe=[],ge=[],Ge=!1,it)=>{try{if(await Zae(D,{addLabelIds:fe,removeLabelIds:ge,trackAccuracy:Ge,suggestionId:it}),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D){const _t=[...N.labels||[]];fe.forEach(Qt=>{_t.includes(Qt)||_t.push(Qt)}),ge.forEach(Qt=>{const Or=_t.indexOf(Qt);Or>-1&&_t.splice(Or,1)}),S({...N,labels:_t,syncStatus:{...N.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(zt){r(zt?.message||"Failed to update labels")}},ko=async(D,fe)=>{try{await ese(D,fe),await Ys(D,[],[fe])}catch(ge){r(ge?.message||"Failed to remove label")}},Ma=async(D,fe)=>{if(i){Yo(!0);try{await Qae({userId:i,accountEmail:fe,labelName:D,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await Un(),Xo(""),yo(!1)}catch(ge){r(ge?.message||"Failed to create label")}finally{Yo(!1)}}},Wa=async(D,fe)=>{if(i)try{await pv(D,{userId:i,...fe}),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D&&S(ge=>ge?{...ge,...fe}:null),t("Email updated")}catch(ge){r(ge?.message||"Update failed")}},Wi=()=>{Cf(!Ha),jo(new Set)},sc=D=>{jo(fe=>{const ge=new Set(fe);return ge.has(D)?ge.delete(D):ge.add(D),ge})},ic=()=>{ga.size===mi.length?jo(new Set):jo(new Set(mi.map(D=>D.id)))},Zn=async()=>{if(!(!i||ga.size===0)){$c(!0);try{await Promise.all(Array.from(ga).map(D=>VP(D,!0,i))),n.invalidateQueries({queryKey:Bs.emails()}),t(`${ga.size} email(s) marked as read`),jo(new Set)}catch(D){r(D?.message||"Failed to mark emails as read")}finally{$c(!1)}}},Ml=async D=>{if(i)try{await GP(D,i),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D&&S(fe=>fe?{...fe,threadStatus:"archived"}:null),t("Email archived")}catch(fe){r(fe?.message||"Failed to archive email")}},Tf=async D=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await KP(D,i),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D&&S(null),t("Email deleted")}catch(fe){r(fe?.message||"Failed to delete email")}},j0=async D=>{if(i)try{await Dae(D,i),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D&&S(fe=>fe?{...fe,threadStatus:"active"}:null),t("Email restored")}catch(fe){r(fe?.message||"Failed to restore email")}},So=async D=>{if(i)try{await pv(D,{userId:i,threadStatus:"resolved"}),n.invalidateQueries({queryKey:Bs.emails()}),N?.id===D&&S(fe=>fe?{...fe,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(fe){r(fe?.message||"Failed to resolve conversation")}},_o=async()=>{if(!(!i||ga.size===0)){$c(!0);try{await Promise.all(Array.from(ga).map(D=>GP(D,i))),n.invalidateQueries({queryKey:Bs.emails()}),t(`${ga.size} email(s) archived`),jo(new Set)}catch(D){r(D?.message||"Failed to archive emails")}finally{$c(!1)}}},Nu=async()=>{if(!(!i||ga.size===0)&&confirm(`Are you sure you want to delete ${ga.size} email(s)? This action cannot be undone.`)){$c(!0);try{await Promise.all(Array.from(ga).map(fe=>KP(fe,i)));const D=Array.from(ga);n.invalidateQueries({queryKey:Bs.emails()}),N&&ga.has(N.id)&&S(null),t(`${D.length} email(s) deleted`),jo(new Set)}catch(D){r(D?.message||"Failed to delete emails")}finally{$c(!1)}}},Ao=async(D,fe,ge,Ge)=>{if(!i)return;const it=`${D}-${fe}-view`;Na(zt=>({...zt,[it]:!0}));try{const zt=await XP(D,fe,i),_t=window.URL.createObjectURL(zt);er({isOpen:!0,emailId:D,attachmentId:fe,filename:ge,mimeType:Ge,url:_t})}catch(zt){r(zt?.message||"Failed to load attachment")}finally{Na(zt=>({...zt,[it]:!1}))}},ll=async(D,fe,ge)=>{if(!i)return;const Ge=`${D}-${fe}-download`;Na(it=>({...it,[Ge]:!0}));try{const it=await XP(D,fe,i),zt=window.URL.createObjectURL(it),_t=document.createElement("a");_t.href=zt,_t.download=ge,document.body.appendChild(_t),_t.click(),window.URL.revokeObjectURL(zt),document.body.removeChild(_t),t("Attachment downloaded")}catch(it){r(it?.message||"Failed to download attachment")}finally{Na(it=>({...it,[Ge]:!1}))}},oc=D=>{if(D===0)return"0 Bytes";const fe=1024,ge=["Bytes","KB","MB","GB"],Ge=Math.floor(Math.log(D)/Math.log(fe));return Math.round(D/Math.pow(fe,Ge)*100)/100+" "+ge[Ge]},Co=D=>D.startsWith("image/"),Cs=D=>D==="application/pdf",rd=D=>{const fe=D.target.files;if(!fe||fe.length===0)return;const ge=25*1024*1024,Ge=[];Array.from(fe).forEach(it=>{if(it.size>ge){r(`File "${it.name}" is too large. Maximum size is 25MB.`);return}const zt=`${Date.now()}-${Math.random()}`;let _t;it.type.startsWith("image/")&&(_t=URL.createObjectURL(it)),Ge.push({file:it,preview:_t,id:zt})}),Si([...Da,...Ge]),nl.current&&(nl.current.value="")},cl=async(D,fe)=>{if(i){Qn(!0);try{const ge=await use(i,js||void 0,void 0,D||xa,fe),Ge=ge?.data||ge||{};fi(fe?it=>[...it,...Ge.files||[]]:Ge.files||[]),Xu(Ge.nextPageToken||null)}catch(ge){const Ge=ge?.message||"Failed to load Drive files";Ge.includes("not connected")||ge?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${js||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Ge),fe||fi([])}finally{Qn(!1)}}},lc=async D=>{if(!(!i||!bs))try{const fe=Ja!=="compose"&&N?.id?N.id:`draft_${Date.now()}`;if(Ja==="compose"){const ge={id:`drive_${D.id}`,file:new dc([],D.name,{type:D.mimeType}),isDriveFile:!0,driveFileId:D.id,driveWebViewLink:D.webViewLink,driveIconLink:D.iconLink,preview:D.thumbnailLink||D.iconLink};Si([...Da,ge]),io(!1),t("Drive file added")}else await JP({userId:i,emailId:N.id,fileId:D.id,fileName:D.name,fileMimeType:D.mimeType,webViewLink:D.webViewLink,webContentLink:D.webContentLink,iconLink:D.iconLink}),io(!1),t("Drive file attached"),N&&_s(N)}catch(fe){r(fe?.message||"Failed to attach Drive file")}},nd=D=>{const fe=Da.find(ge=>ge.id===D);fe?.preview&&URL.revokeObjectURL(fe.preview),Hi(ge=>{const Ge={...ge};return delete Ge[D],Ge}),Si(Da.filter(ge=>ge.id!==D))},Rl=async()=>{if(!i||!js||!Ia||!Ns){r("Please fill in subject and message to save draft");return}Ch(!0);try{await Lae({userId:i,accountEmail:js||Me[0]?.email,to:wn.length>0?wn:void 0,cc:Pa.length>0?Pa:void 0,bcc:pn.length>0?pn:void 0,subject:Ia,body:Ns}),t("Draft saved to Gmail")}catch(D){const fe=b(D,"Failed to save draft");r(fe)}finally{Ch(!1)}},Th=async()=>{if(!(!i||!js)){ac(!0);try{const D=await Fae(i,js||Me[0]?.email),fe=D?.data||D||[];Yn(Array.isArray(fe)?fe:[])}catch(D){const fe=b(D,"Failed to load drafts");r(fe),Yn([])}finally{ac(!1)}}};U.useEffect(()=>()=>{Da.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)})},[Da]),U.useEffect(()=>{!bs&&Da.length>0&&(Da.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)}),Si([]))},[bs,Da]);const k0=(D,fe=1200,ge=1200,Ge=.8)=>new Promise((it,zt)=>{const _t=new FileReader;_t.onload=Qt=>{const Or=new Image;Or.onload=()=>{let Cn=Or.width,ka=Or.height;Cn>ka?Cn>fe&&(ka=ka*fe/Cn,Cn=fe):ka>ge&&(Cn=Cn*ge/ka,ka=ge);const Hn=document.createElement("canvas");Hn.width=Cn,Hn.height=ka;const Js=Hn.getContext("2d");Js?(Js.drawImage(Or,0,0,Cn,ka),it(Hn.toDataURL("image/jpeg",Ge))):zt(new Error("Canvas context not available"))},Or.onerror=zt,Or.src=Qt.target?.result},_t.onerror=zt,_t.readAsDataURL(D)}),ja=async D=>{const fe=D.target.files?.[0];if(fe){if(!fe.type.startsWith("image/")){r("Please select an image file");return}if(fe.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const ge=await k0(fe,1200,1200,.8);Ke(ge),Vt(fe)}catch(ge){r(ge.message||"Failed to process image")}}},ul=D=>{const fe=document.createElement("div");fe.innerHTML=D;const ge=fe.textContent||fe.innerText||"",Ge=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,it=[];let zt;for(;(zt=Ge.exec(ge))!==null;){const _t=zt[1].trim(),Qt=pa.find(Or=>Or.name.toLowerCase()===_t.toLowerCase());Qt&&Qt.id!==i&&it.push(Qt.id)}return[...new Set(it)]},zd=U.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),Hd=["header","bold","italic","underline","strike","list","bullet","link"],Of=U.useCallback((D,fe,ge,Ge)=>{if(Vn(D),je.current=Ge,ge==="user"){const it=Ge.getSelection(!0);if(it){const _t=Ge.getText().substring(0,it.index),Qt=_t.lastIndexOf("@");if(Qt!==-1){const Or=_t.substring(Qt+1),Cn=Qt>0?_t[Qt-1]:" ";if(Cn===" "||Cn===`
`||Qt===0)if(!Or.includes(" ")&&!Or.includes(`
`)&&Or.length<50){_r(Qt),qe(Or);const ka=pa.filter(Hn=>Hn.name?.toLowerCase().includes(Or.toLowerCase())||Hn.email?.toLowerCase().includes(Or.toLowerCase()));Nr(ka),Ws(ka.length>0)}else Ws(!1),_r(null);else Ws(!1),_r(null)}else Ws(!1),_r(null)}}},[pa]),Pf=U.useCallback(D=>{const fe=je.current;if(!fe){console.error("[INBOX] Quill editor not available");return}fe.focus();const ge=fe.getText();let Ge=mr;if((Ge===null||Ge<0)&&(Ge=ge.lastIndexOf("@")),Ge===-1){console.error("[INBOX] Could not find @ symbol for mention"),Ws(!1),_r(null);return}const it=ge.substring(Ge+1),zt=it.indexOf(" "),_t=it.indexOf(`
`);let Qt=it.length;zt!==-1&&(Qt=Math.min(Qt,zt)),_t!==-1&&(Qt=Math.min(Qt,_t));const Or=Ge,Cn=Ge+1+Qt,ka=Cn-Or;console.log("[INBOX] Inserting mention:",{atIndex:Ge,deleteStartIndex:Or,deleteEndIndex:Cn,deleteLength:ka,textAfterAt:it.substring(0,Qt),mentionText:`@${D.name} `}),fe.setSelection(Or,ka,"api"),fe.deleteText(Or,ka,"api");const Hn=`@${D.name} `;fe.insertText(Or,Hn,"api"),fe.formatText(Or,Hn.length-1,{bold:!0,color:"#4338ca"},"api");const Js=Or+Hn.length;fe.setSelection(Js,0,"api");const Ti=fe.root.innerHTML;Vn(Ti),Ws(!1),_r(null)},[mr]),Bl=async()=>{if(!N||!or.trim()&&!Nt||!i||!s){!or.trim()&&!Nt&&r("Please enter a note or upload an image");return}me(!0);try{const D=N.id,fe=s.name||s.email||"You",ge=document.createElement("div");ge.innerHTML=or;const it=(ge.textContent||ge.innerText||"").trim()?or.trim():"",zt={emailId:D,userId:i,userName:fe,message:it};if(kn.length>0&&(zt.markedFor=kn),fn&&fn.trim()){if(fn.length>75e4){r("Image is too large. Please use a smaller image."),me(!1);return}zt.imageUrl=fn,Nt?.name&&(zt.imageName=Nt.name)}const _t=await wae(zt),Qt=_t?.data||{};if(!Qt.id&&!Qt.emailId)throw console.error("[INBOX] Invalid note response:",_t),new Error("Invalid response from server. Note was not created.");const Or={id:Qt.id||`thread-${Date.now()}`,userId:i,userName:fe,message:it,timestamp:Qt.createdAt||new Date().toISOString(),imageUrl:fn||void 0,imageName:Nt?.name||void 0,markedFor:Qt.markedFor||[]};Wn(Hn=>({...Hn,[D]:[Or,...Hn[D]||[]]}));const Cn=ul(it);if(Cn.length>0)for(const Hn of Cn)try{await Mp({userId:Hn,type:"mention",title:"You were mentioned in an email note",message:`${fe} mentioned you in a note on email: "${N.subject||"Untitled"}"`,link:`/?tab=inbox&email=${D}`,read:!1})}catch(Js){const Ti=Js?.message||"Failed to send notification";console.error("Failed to send notification:",Ti)}Vn(""),Ke(""),Vt(null),In([]),Se.current&&(Se.current.value=""),je.current&&je.current.setText("");const ka=_t?.message||(Cn.length>0?`Note added and ${Cn.length} user(s) notified`:"Internal note added");t(ka)}catch(D){const fe=b(D,"Failed to add note");console.error("[INBOX] Error adding note:",fe),r(fe)}finally{me(!1)}},Ra=async(D,fe)=>{if(!(!i||!s)){_e(fe);try{await jae(fe,i),Wn(ge=>({...ge,[D]:(ge[D]||[]).filter(Ge=>Ge.id!==fe)})),t("Note deleted")}catch(ge){const Ge=b(ge,"Failed to delete note");r(Ge)}finally{_e(null)}}},rs=async D=>{if(!(!N||!i)){Le(!0),ct([]),Je(null),Oe(null);try{const fe=await kae(N.id,i,D),ge=fe?.data??fe??{};if(ge.variations&&Array.isArray(ge.variations)&&ge.variations.length>0)ct(ge.variations),Je(0),Oe(w(ge.variations[0].draft)),t(`Generated ${ge.variations.length} draft variations`);else{let Ge=ge.draft;(!Ge||typeof Ge!="string")&&(Ge=`Hi ${N.sender||"there"},

Thank you for your email regarding "${N.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),Oe(w(Ge)),ct([{style:"default",description:"AI-generated draft",draft:Ge,confidence:75}]),Je(0),t("AI draft generated")}}catch(fe){const ge=b(fe,"Failed to generate draft");Le(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",ge),r(ge)},0)}finally{Le(!1)}}},Va=async()=>{if(!i||!Ia||wn.length===0){r("Please enter a subject and recipient to generate AI draft");return}wu(!0),Ai(null);try{const fe=`Hi ${wn[0].split("@")[0]},

${Ia?`Regarding: ${Ia}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(ge=>setTimeout(ge,1e3)),Ai(w(fe)),t("AI draft generated")}catch(D){const fe=b(D,"Failed to generate draft");r(fe)}finally{wu(!1)}},ad=()=>{if(!Ee)return;let D="";try{if(ht.current&&typeof ht.current.getText=="function")D=ht.current.getText();else{const fe=document.createElement("div");fe.innerHTML=Ee,D=fe.textContent||fe.innerText||""}}catch(fe){const ge=document.createElement("div");ge.innerHTML=Ee||"",D=ge.textContent||ge.innerText||"";const Ge=fe?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Ge)}navigator.clipboard.writeText(D).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(fe=>{try{const ge=document.createElement("textarea");ge.value=D,document.body.appendChild(ge),ge.select(),document.execCommand("copy"),document.body.removeChild(ge),t("Draft copied to clipboard!")}catch(ge){const Ge=ge?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Ge),r("Failed to copy draft. Please select and copy manually.")}})},cc=()=>{!Ee||!i||!N||(Pn(""),xn(!0))},ju=async()=>{if(!wa||!wa.trim()||!Ee||!i||!N){r("Please enter a template name");return}try{const D=typeof Ee=="string"?Ee:String(Ee||"");await Sae({name:wa.trim(),content:D,userId:i,category:"email-response"}),t("Template saved successfully!"),xn(!1),Pn(""),sd()}catch(D){const fe=b(D,"Failed to save template");console.error("[INBOX] Error saving template:",fe),r(fe)}},sd=async()=>{if(i)try{const D=await _ae(i),fe=D?.data??D??[];zr(Array.isArray(fe)?fe:[])}catch(D){const fe=D?.message||"Failed to load templates";console.error("Failed to load templates:",fe)}};U.useEffect(()=>{i&&sd()},[i]),U.useEffect(()=>{i&&bs&&sd()},[i,bs]);const ns=(D,fe=100)=>{if(!D)return"";let ge=D.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(ge=ge.replace(/https?:\/\/[^\s]+/g,"").trim(),ge=ge.replace(/\s+/g," ").trim(),ge.length<=fe)return ge;const Ge=ge.substring(0,fe),it=Ge.lastIndexOf(" ");return it>fe*.7?Ge.substring(0,it)+"...":Ge+"..."},mi=U.useMemo(()=>{let fe=[...et.filter((ge,Ge,it)=>ge.id&&Ge===it.findIndex(zt=>zt.id===ge.id))];return Ue==="archived"?fe=fe.filter(ge=>ge.threadStatus==="archived"):Ue&&Ue!=="archived"?fe=fe.filter(ge=>ge.status===Ue):Ue||(fe=fe.filter(ge=>ge.threadStatus!=="archived")),Wt&&(fe=fe.filter(ge=>(ge.labels||[]).includes(Wt))),_&&i&&(fe=fe.filter(ge=>ge.owner===i)),J&&(fe=fe.filter(ge=>ge.owner===J)),fe.sort((ge,Ge)=>{let it=0;switch(ol){case"date":const zt=parseInt(ge.internalDate||"0")||0;it=(parseInt(Ge.internalDate||"0")||0)-zt;break;case"sender":const Qt=(ge.sender||ge.email||"").toLowerCase(),Or=(Ge.sender||Ge.email||"").toLowerCase();it=Qt.localeCompare(Or);break;case"subject":const Cn=(ge.subject||"").toLowerCase(),ka=(Ge.subject||"").toLowerCase();it=Cn.localeCompare(ka);break;case"unread":if(ge.isRead===Ge.isRead){const Hn=parseInt(ge.internalDate||"0")||0;it=(parseInt(Ge.internalDate||"0")||0)-Hn}else it=ge.isRead?1:-1;break}return Ci==="asc"?-it:it}),fe},[et,Wt,_,J,i,ol,Ci]);U.useEffect(()=>{N?.id&&(mi.some(fe=>fe.id===N.id)||(S(null),kr([]),$n(null),Oe(null),ct([]),Je(null),no([]),Wn(fe=>{const ge={...fe};return delete ge[N.id],ge})))},[mi,N?.id]);const Wd=mi.filter(D=>!D.isRead).length,dl=U.useMemo(()=>{if(Cr==="list")return null;const D=new Map;mi.forEach(ge=>{const Ge=ge.gmailThreadId||ge.id;D.has(Ge)||D.set(Ge,[]),D.get(Ge).push(ge)});const fe=Array.from(D.entries()).map(([ge,Ge])=>{const it=[...Ge].sort((zt,_t)=>{const Qt=parseInt(zt.internalDate||"0")||0;return(parseInt(_t.internalDate||"0")||0)-Qt});return{threadId:ge,emails:it,latestEmail:it[0],unreadCount:it.filter(zt=>!zt.isRead).length}});return fe.sort((ge,Ge)=>{let it=0;const zt=ge.latestEmail,_t=Ge.latestEmail;switch(ol){case"date":const Qt=parseInt(zt.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-Qt;break;case"sender":const Cn=(zt.sender||zt.email||"").toLowerCase(),ka=(_t.sender||_t.email||"").toLowerCase();it=Cn.localeCompare(ka);break;case"subject":const Hn=(zt.subject||"").toLowerCase(),Js=(_t.subject||"").toLowerCase();it=Hn.localeCompare(Js);break;case"unread":if(ge.unreadCount>0&&Ge.unreadCount===0)it=-1;else if(ge.unreadCount===0&&Ge.unreadCount>0)it=1;else if(ge.unreadCount===Ge.unreadCount){const Ti=parseInt(zt.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-Ti}else it=Ge.unreadCount-ge.unreadCount;break}return Ci==="asc"?-it:it}),fe},[mi,Cr,ol,Ci]),oo=D=>{wr(fe=>{const ge=new Set(fe);return ge.has(D)?ge.delete(D):ge.add(D),ge})},Vi=D=>{Yr(fe=>{const ge=new Set(fe);return ge.has(D)?ge.delete(D):ge.add(D),ge})};return i?a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),Wt&&a.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",un.find(D=>D.id===Wt)?.name||Wt]})]}),a.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",Wd," unread",Wt&&`  ${mi.length} email${mi.length!==1?"s":""} with label`]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[un.length>0&&a.jsx("div",{className:"relative",children:a.jsxs("select",{value:Wt||"",onChange:D=>{const fe=D.target.value||null;En(fe);const ge=document.querySelector(".overflow-y-auto");ge&&(ge.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[a.jsx("option",{value:"",children:"All Labels"}),un.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})}),a.jsxs("button",{onClick:()=>lr(Cr==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Cr==="threads"?"Switch to list view":"Switch to threaded view",children:[a.jsx(xo,{className:"w-4 h-4"}),Cr==="threads"?"Threads":"List"]}),g&&a.jsxs("button",{onClick:Xr,disabled:P,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[P?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Nd,{className:"w-4 h-4"}),P?"Syncing":"Sync from Gmail"]}),Me.length>0&&a.jsxs("button",{onClick:()=>rr(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${Me.length} connected account${Me.length!==1?"s":""}`,children:[a.jsx(yn,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),a.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:Me.length})]})]})]}),G===!1&&Me.length===0&&a.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[a.jsx(ea,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),a.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),a.jsxs("button",{onClick:Bn,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),a.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:M,onChange:D=>q(D.target.value),onKeyDown:D=>D.key==="Enter"&&Ye(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),a.jsxs("button",{type:"button",onClick:()=>Y(D=>!D),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${de?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[a.jsx(sx,{className:"w-4 h-4"}),"Filters",(te||Q||z!==void 0||R||le||ie!==void 0||De!==void 0||Ue||Wt)&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),de&&a.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[a.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),a.jsx("input",{type:"text",placeholder:"email or name",value:te,onChange:D=>{ae(D.target.value),ye(!0)},onFocus:()=>ye(!0),onBlur:()=>setTimeout(()=>ye(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),ve&&Ae.length>0&&a.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ae.filter(D=>!te||[D.email,D.name].some(fe=>fe?.toLowerCase().includes(te.toLowerCase()))).slice(0,20).map(D=>a.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:fe=>{fe.preventDefault(),ae(D.email||D.name),ye(!1)},children:[a.jsx("span",{className:"font-medium text-slate-800",children:D.name||D.email}),D.email!==D.name&&a.jsx("span",{className:"text-xs text-slate-500",children:D.email})]},D.email))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ie===void 0?"":String(ie),onChange:D=>ce(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"false",children:"Unread"}),a.jsx("option",{value:"true",children:"Read"})]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:R,onChange:D=>K(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(ha,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:le,onChange:D=>he(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(ha,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"",value:Q,onChange:D=>ee(D.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),a.jsxs("div",{className:"relative w-32",children:[a.jsxs("select",{value:W,onChange:D=>O(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[a.jsx("option",{value:"contains",children:"contains"}),a.jsx("option",{value:"equals",children:"equals"}),a.jsx("option",{value:"starts",children:"starts with"}),a.jsx("option",{value:"ends",children:"ends with"})]}),a.jsx(xl,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:z===void 0?"":String(z),onChange:D=>H(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Has attachment"}),a.jsx("option",{value:"false",children:"No attachment"})]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Ue,onChange:D=>Ce(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"assigned",children:"Assigned to me"})]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:De===void 0?"":String(De),onChange:D=>ne(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Starred"}),a.jsx("option",{value:"false",children:"Not starred"})]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),un.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Wt||"",onChange:D=>En(D.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"All labels"}),un.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:_,onChange:D=>{F(D.target.checked),D.target.checked&&oe(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),a.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:J||"",onChange:D=>{const fe=D.target.value||null;oe(fe),fe&&F(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any team member"}),pa.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx(xl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>Ye(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),a.jsx("button",{type:"button",onClick:()=>{ae(""),ee(""),O("contains"),H(void 0),K(""),he(""),ce(void 0),ne(void 0),Ce(""),En(null),F(!1),oe(null),q(""),Ye()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),a.jsxs("button",{type:"button",onClick:()=>Ne(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(W_,{className:"w-4 h-4"}),"Save search"]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>kt(D=>!D),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(W_,{className:"w-4 h-4"}),"Saved (",pe.length,")"]}),xt&&a.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:pe.length===0?a.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):pe.map(D=>a.jsxs("div",{className:"flex items-center group",children:[a.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{q(D.filters.search??""),ae(D.filters.from??""),ee(D.filters.subject??""),O(D.filters.subjectOperator??"contains"),H(D.filters.hasAttachment),K(D.filters.dateFrom??""),he(D.filters.dateTo??""),ce(D.filters.isRead),ne(D.filters.isStarred),Ce(D.filters.status??""),En(D.filters.labelId??null),kt(!1),Ye()},children:D.name}),a.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{ue(fe=>fe.filter(ge=>ge.id!==D.id)),kt(!1)},title:"Delete saved search",children:""})]},D.id))})]}),a.jsxs("button",{type:"button",onClick:()=>{Cl(!0),i&&YP(i).then(D=>{const fe=D?.data??D??[];oi(Array.isArray(fe)?fe:[])}).catch(()=>oi([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[a.jsx(sx,{className:"w-4 h-4"}),"Categorization rules"]}),a.jsx("button",{type:"button",onClick:()=>{Ko(!0),i&&sse(i).then(D=>{const fe=D?.data??D??[];El(Array.isArray(fe)?fe:[])}).catch(()=>El([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),a.jsxs("button",{type:"button",onClick:()=>{li(!0),Kr.length===0&&yr()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[a.jsx(Gg,{className:"w-4 h-4"}),"Excluded Domains ",Kr.length>0&&`(${Kr.length})`]})]})]}),(M||te||Q||z!==void 0||R||le||ie!==void 0||De!==void 0||Ue||Wt)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),M&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',M.length>20?M.slice(0,20)+"":M,'"',a.jsx("button",{type:"button",onClick:()=>q(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Wt&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",un.find(D=>D.id===Wt)?.name||Wt,a.jsx("button",{type:"button",onClick:()=>En(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),te&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",te,a.jsx("button",{type:"button",onClick:()=>ae(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Q&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",a.jsx("button",{type:"button",onClick:()=>ee(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),z!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[z?"Has attachment":"No attachment",a.jsx("button",{type:"button",onClick:()=>H(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ue&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",Ue,a.jsx("button",{type:"button",onClick:()=>Ce(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ie!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[ie?"Read":"Unread",a.jsx("button",{type:"button",onClick:()=>ce(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),De!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[De?"Starred":"Not starred",a.jsx("button",{type:"button",onClick:()=>ne(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(R||le)&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",R&&le?`${R}  ${le}`:R||le,a.jsx("button",{type:"button",onClick:()=>{K(""),he("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{Ce(Ue==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${Ue==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.jsx(Kg,{className:"w-4 h-4 inline mr-1.5"}),Ue==="archived"?"Show Active":"Show Archived"]}),Ue==="archived"&&a.jsxs("span",{className:"text-sm text-slate-500",children:[mi.length," archived email(s)"]})]}),(Ha||ga.size>0)&&a.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:ic,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:ga.size===mi.length?"Deselect all":"Select all"}),a.jsxs("span",{className:"text-sm text-indigo-600",children:[ga.size," selected"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Zn,disabled:Ef||ga.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),a.jsx("button",{type:"button",onClick:_o,disabled:Ef||ga.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),a.jsx("button",{type:"button",onClick:Nu,disabled:Ef||ga.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),a.jsx("button",{type:"button",onClick:Wi,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[a.jsx("div",{className:"flex items-center gap-2",children:!Ha&&a.jsxs("button",{type:"button",onClick:Wi,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[a.jsx(jl,{className:"w-4 h-4"}),"Select"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),a.jsxs("select",{value:ol,onChange:D=>Eh(D.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"sender",children:"Sender"}),a.jsx("option",{value:"subject",children:"Subject"}),a.jsx("option",{value:"unread",children:"Unread"})]}),a.jsx("button",{type:"button",onClick:()=>$d(Ci==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:Ci==="asc"?"Ascending":"Descending",children:Ci==="asc"?a.jsx(DB,{className:"w-4 h-4"}):a.jsx(xl,{className:"w-4 h-4"})})]})]}),Pe&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{Ne(!1),nt("")},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:D=>D.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),a.jsx("input",{type:"text",placeholder:"Search name",value:Re,onChange:D=>nt(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>{Ne(!1),nt("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>{const D=Re.trim()||"Saved search",fe={search:M||void 0,status:Ue||void 0,from:te||void 0,subject:Q||void 0,subjectOperator:W,hasAttachment:z,dateFrom:R||void 0,dateTo:le||void 0,labelId:Wt||void 0,isRead:ie,isStarred:De},ge={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:D,filters:fe};ue(Ge=>[...Ge,ge]),Ne(!1),nt("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),Ld&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Cl(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),a.jsx("button",{type:"button",onClick:async()=>{if(i){Ol(!0);try{const fe=(await rse(i,30))?.data;w0(fe)}catch(D){console.error("Failed to load accuracy stats:",D)}finally{Ol(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:mu,children:mu?"Loading...":"View accuracy stats"})]}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),Xa&&a.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",Xa.periodDays," days)"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),a.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[Xa.summary.accuracyRate,"%"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[Xa.summary.accepted," accepted / ",Xa.summary.accepted+Xa.summary.rejected+Xa.summary.changed," resolved"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),a.jsx("p",{className:"text-lg font-semibold text-slate-700",children:Xa.summary.total}),a.jsxs("p",{className:"text-xs text-slate-400",children:[Xa.summary.pending," pending"]})]})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Xa.bySource.domain.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Xa.bySource.domain.accepted,"/",Xa.bySource.domain.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Xa.bySource.keyword.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Xa.bySource.keyword.accepted,"/",Xa.bySource.keyword.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Xa.bySource.ai.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Xa.bySource.ai.accepted,"/",Xa.bySource.ai.total]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.jsxs("select",{value:hu,onChange:D=>Go(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"domain",children:"Sender domain"}),a.jsx("option",{value:"keyword",children:"Keyword"})]}),a.jsx("input",{type:"text",placeholder:hu==="domain"?"e.g. company.com":"e.g. invoice",value:ki,onChange:D=>ro(D.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),a.jsxs("select",{value:Ac,onChange:D=>vo(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Select label"}),un.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx("button",{type:"button",disabled:!ki.trim()||!Ac||!i,onClick:async()=>{if(!(!i||!ki.trim()||!Ac))try{await nse({userId:i,type:hu,value:ki.trim(),labelId:Ac,labelName:un.find(ge=>ge.id===Ac)?.name});const D=await YP(i),fe=D?.data??D??[];oi(Array.isArray(fe)?fe:[]),ro(""),vo(""),t("Rule added")}catch(D){r(D?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:Ds.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):Ds.map(D=>a.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[a.jsxs("span",{className:"text-slate-700",children:[a.jsx("span",{className:"font-medium",children:D.type==="domain"?"Domain":"Keyword"}),a.jsxs("span",{className:"text-slate-500",children:[' "',D.value,'"  ']}),a.jsx("span",{className:"text-indigo-600",children:D.labelName||D.labelId})]}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await ase(D.id,i),oi(fe=>fe.filter(ge=>ge.id!==D.id)),t("Rule removed")}catch(fe){r(fe?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:a.jsx(ir,{className:"w-4 h-4"})})]},D.id))}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>Cl(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),Qo&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>li(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:a.jsx(Gg,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),a.jsx("button",{type:"button",onClick:()=>li(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from these domains will not sync or appear in your shared inbox"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:hn,onChange:D=>Oa(D.target.value),onKeyDown:D=>{D.key==="Enter"&&hn.trim()&&cr()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),a.jsx("button",{type:"button",onClick:cr,disabled:!hn.trim()||Vs,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:Vs?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Add"]})})]}),za?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(wt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Kr.length===0?a.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[a.jsx(Gg,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):a.jsx("div",{className:"space-y-2",children:Kr.map(D=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Gg,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.domain})]}),a.jsx("button",{type:"button",onClick:()=>qr(D.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:a.jsx(Ur,{className:"w-4 h-4"})})]},D.id))})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>li(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),vs&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Ko(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:gs.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):gs.map((D,fe)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[a.jsx("span",{className:"flex-1 text-slate-700 truncate",children:D.labelName||D.labelId}),a.jsx("input",{type:"text",placeholder:"View name",value:D.viewName??"",onChange:ge=>{const Ge=[...gs];Ge[fe]={...Ge[fe],viewName:ge.target.value},El(Ge)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),a.jsx("button",{type:"button",onClick:()=>El(ge=>ge.filter((Ge,it)=>it!==fe)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:a.jsx(ir,{className:"w-4 h-4"})})]},D.labelId||fe))}),a.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:a.jsxs("select",{value:"",onChange:D=>{const fe=D.target.value;if(!fe||gs.some(Ge=>Ge.labelId===fe))return;const ge=un.find(Ge=>Ge.id===fe);El(Ge=>[...Ge,{labelId:fe,labelName:ge?.name,viewName:ge?.name??"",sortOrder:Ge.length}]),D.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Add label to mapping"}),un.filter(D=>!gs.some(fe=>fe.labelId===D.id)).map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>Ko(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await ise({userId:i,mappings:gs}),t("Folder mapping saved"),Ko(!1)}catch(D){r(D?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),Yt&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:Yt}),a.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[a.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${N?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:gt?a.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((D,fe)=>a.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),a.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},fe))}):mi.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(ai,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium",children:Wt?"No emails with this label":"No emails yet"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:Wt?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync new mail (24 hrs)" to pull in recent inbox.'}),Wt&&a.jsx("button",{onClick:()=>En(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!Wt&&a.jsx("button",{onClick:Xr,disabled:P,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:P?"Syncing":"Sync from Gmail"})]}):Cr==="threads"&&dl?a.jsxs("ul",{ref:_c,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[dl.map(D=>{const fe=Ut.has(D.threadId),ge=D.latestEmail,Ge=D.emails.length>1;return a.jsxs("li",{children:[a.jsxs("div",{className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 ${N?.id===ge.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[Ha&&a.jsx("input",{type:"checkbox",checked:ga.has(ge.id),onChange:()=>sc(ge.id),onClick:it=>it.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(ni,{src:void 0,alt:ge.sender||ge.email||"",fallbackText:ge.sender||ge.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Ge&&a.jsx("div",{role:"button",tabIndex:0,onClick:it=>{it.stopPropagation(),oo(D.threadId)},onKeyDown:it=>{(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),it.stopPropagation(),oo(D.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:fe?a.jsx(xl,{className:"w-4 h-4 text-slate-500"}):a.jsx(os,{className:"w-4 h-4 text-slate-500"})}),a.jsx("button",{type:"button",onClick:()=>!Ha&&(Ge?oo(D.threadId):_s(ge)),className:"flex-1 min-w-0 text-left",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${D.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:ge.subject||"(No subject)"}),ge.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(G0,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),ge.syncStatus?.starredStatus&&fs(ge.syncStatus.starredStatus)]}),ge.attachments&&ge.attachments.length>0&&a.jsx(Uh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${ge.attachments.length} attachment(s)`}),ge.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ge.priority==="high"?"bg-red-100 text-red-700":ge.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:ge.priority==="high"?"High":ge.priority==="low"?"Low":"Medium"}),ge.threadStatus&&ge.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ge.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":ge.threadStatus==="pending"?"bg-amber-100 text-amber-700":ge.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:ge.threadStatus.charAt(0).toUpperCase()+ge.threadStatus.slice(1)}),ge.owner&&pa.find(it=>it.id===ge.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:pa.find(it=>it.id===ge.owner)?.name||"Assigned"}),Ge&&a.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:D.emails.length})]}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[ge.sender||ge.email,Ge&&`  ${D.emails.length} messages`]}),(()=>{const it=new Set;D.emails.forEach(_t=>{_t.participants&&Array.isArray(_t.participants)&&_t.participants.forEach(Qt=>it.add(Qt.toLowerCase())),_t.to&&Array.isArray(_t.to)&&_t.to.forEach(Qt=>it.add(Qt.toLowerCase())),_t.cc&&Array.isArray(_t.cc)&&_t.cc.forEach(Qt=>it.add(Qt.toLowerCase()))});const zt=Array.from(it).slice(0,5);return zt.length>0?a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[a.jsx("span",{className:"text-slate-500",children:"To: "}),zt.map((_t,Qt)=>a.jsxs("span",{children:[_t.split("@")[0],Qt<zt.length-1&&", "]},_t)),it.size>5&&` +${it.size-5} more`]}):null})(),(ge.accountEmail||ge.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[ge.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",ge.accountOwnerName]}),ge.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:ge.accountEmail})]}),ge.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:ns(ge.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:ge.timestamp}),D.unreadCount>0&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!Ha&&a.jsx(os,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),fe&&Ge&&a.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:D.emails.map((it,zt)=>{const _t=Er.has(it.id);return a.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[a.jsxs("button",{type:"button",onClick:()=>Vi(it.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${N?.id===it.id?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Qt=>{Qt.stopPropagation(),Vi(it.id)},children:_t?a.jsx(xl,{className:"w-3 h-3 text-slate-500"}):a.jsx(os,{className:"w-3 h-3 text-slate-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`text-xs font-medium ${it.isRead?"text-slate-600":"text-slate-900"}`,children:it.sender||it.email}),!it.isRead&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(it.to?.length>0||it.cc?.length>0)&&a.jsxs("span",{className:"text-xs text-slate-400",children:[it.to?.length>0&&`To: ${it.to.slice(0,2).map(Qt=>Qt.split("@")[0]).join(", ")}${it.to.length>2?"...":""}`,it.cc?.length>0&&` CC: ${it.cc.slice(0,2).map(Qt=>Qt.split("@")[0]).join(", ")}${it.cc.length>2?"...":""}`]})]}),it.lastMessage&&!_t&&a.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:ns(it.lastMessage,100)})]}),a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:it.timestamp})]}),_t&&a.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[a.jsx("span",{className:"font-medium",children:it.sender||it.email}),a.jsx("span",{className:"text-slate-400",children:""}),a.jsx("span",{children:it.timestamp})]}),a.jsx("button",{type:"button",onClick:()=>_s(it),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),a.jsx("div",{className:"text-xs text-slate-700 mt-2",children:a.jsx(Y8,{content:it.lastMessage||"No content"})}),(it.to?.length>0||it.cc?.length>0||it.bcc?.length>0)&&a.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[it.to?.length>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",it.to.join(", ")]}),it.cc?.length>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"CC:"})," ",it.cc.join(", ")]}),it.bcc?.length>0&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"BCC:"})," ",it.bcc.join(", ")]})]})]})]},it.id)})})]},D.threadId)}),st&&a.jsx("li",{className:"px-4 py-3",ref:Yl,children:dt?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(wt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("div",{className:"h-1"})})]},`threads-${Wt||"all"}`):a.jsxs("ul",{ref:_c,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[mi.map(D=>a.jsx("li",{children:a.jsxs("div",{className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 ${N?.id===D.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[Ha&&a.jsx("input",{type:"checkbox",checked:ga.has(D.id),onChange:()=>sc(D.id),onClick:fe=>fe.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(ni,{src:void 0,alt:D.sender||D.email||"",fallbackText:D.sender||D.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),a.jsx("button",{type:"button",onClick:()=>!Ha&&_s(D),className:"flex-1 min-w-0 text-left",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${D.isRead?"text-slate-600":"text-slate-900"}`,children:D.subject||"(No subject)"}),D.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(G0,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),D.syncStatus?.starredStatus&&fs(D.syncStatus.starredStatus)]}),D.attachments&&D.attachments.length>0&&a.jsx(Uh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${D.attachments.length} attachment(s)`}),D.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.priority==="high"?"bg-red-100 text-red-700":D.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:D.priority==="high"?"High":D.priority==="low"?"Low":"Medium"}),D.threadStatus&&D.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":D.threadStatus==="pending"?"bg-amber-100 text-amber-700":D.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:D.threadStatus.charAt(0).toUpperCase()+D.threadStatus.slice(1)}),D.owner&&pa.find(fe=>fe.id===D.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:pa.find(fe=>fe.id===D.owner)?.name||"Assigned"}),D.labels&&D.labels.length>0&&a.jsxs(a.Fragment,{children:[D.labels.slice(0,3).map(fe=>{const ge=un.find(Ge=>Ge.id===fe);return ge?a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:ge.name,children:ge.name},fe):null}),D.labels.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",D.labels.length-3]})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:D.sender||D.email}),(D.accountEmail||D.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[D.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",D.accountOwnerName]}),D.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:D.accountEmail})]}),D.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:ns(D.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:D.timestamp}),!D.isRead&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!Ha&&a.jsx(os,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},D.id)),Cr==="list"&&st&&a.jsx("li",{ref:Yl,className:"px-4 py-3",children:dt?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(wt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("div",{className:"h-1"})})]},`list-${Wt||"all"}`)}),a.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:T?a.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:a.jsx(wt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):N?a.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[a.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:N.subject||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"break-words",children:N.sender||N.email}),a.jsx("span",{children:""}),a.jsx("span",{children:N.timestamp}),N.senderClassification&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${N.senderClassification==="internal"?"bg-slate-100 text-slate-700":N.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:N.senderClassification==="internal"?"Internal":N.senderClassification==="system"?"System":"Customer"})]}),(N.accountEmail||N.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[N.accountOwnerName&&a.jsxs("span",{children:["Synced via ",a.jsx("span",{className:"font-medium text-slate-600",children:N.accountOwnerName})]}),N.accountEmail&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:N.accountEmail})]})]})}),N.linkedRecords&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.linkedRecords.contactId&&(()=>{const D=Oc.find(fe=>fe.id===N.linkedRecords?.contactId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[a.jsx(wl,{className:"w-3 h-3"}),D.name]}):null})(),N.linkedRecords.companyId&&(()=>{const D=Pc.find(fe=>fe.id===N.linkedRecords?.companyId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[a.jsx(yd,{className:"w-3 h-3"}),D.name]}):null})(),N.linkedRecords.dealId&&(()=>{const D=sl.find(fe=>fe.id===N.linkedRecords?.dealId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[a.jsx(su,{className:"w-3 h-3"}),D.title||D.name]}):null})(),N.linkedRecords.projectId&&(()=>{const D=Gs.find(fe=>fe.id===N.linkedRecords?.projectId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[a.jsx(Zf,{className:"w-3 h-3"}),D.title||D.name]}):null})(),N.linkedRecords.contractId&&(()=>{const D=Bd.find(fe=>fe.id===N.linkedRecords?.contractId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[a.jsx(Ka,{className:"w-3 h-3"}),D.title]}):null})()]}),qd?a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[a.jsx(wt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(Ud.contacts.length>0||Ud.companies.length>0)&&a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),Ud.contacts.map(D=>a.jsxs("button",{onClick:()=>An("contact",D.id),disabled:il,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[a.jsx(wl,{className:"w-3 h-3"}),D.name,a.jsx(vn,{className:"w-3 h-3"})]},D.id)),Ud.companies.map(D=>a.jsxs("button",{onClick:()=>An("company",D.id),disabled:il,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[a.jsx(yd,{className:"w-3 h-3"}),D.name,a.jsx(vn,{className:"w-3 h-3"})]},D.id))]}),a.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",onClick:()=>{Mc("contact"),yu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),a.jsxs("button",{type:"button",onClick:()=>{Mc("company"),yu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),a.jsxs("button",{type:"button",onClick:()=>{Mc("deal"),yu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),a.jsxs("button",{type:"button",onClick:()=>{Mc("project"),yu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),a.jsxs("button",{type:"button",onClick:()=>{Mc("contract"),yu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),a.jsxs("button",{type:"button",onClick:()=>Rc(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(jl,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),N.labels&&N.labels.length>0&&a.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:N.labels.map(D=>{const fe=un.find(ge=>ge.id===D);return fe?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[200px]",children:fe.name}),a.jsx("button",{type:"button",onClick:()=>ko(N.id,D),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:a.jsx(ir,{className:"w-3 h-3"})})]},D):null})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",disabled:xs||!i,onClick:async()=>{if(!(!N?.id||!i)){us(!0),kr([]);try{const fe=(await tse({emailId:N.id,userId:i,useAi:!0,availableLabels:un.map(ge=>({id:ge.id,name:ge.name}))}))?.data;fe?.suggestedLabels?.length&&(kr(fe.suggestedLabels),$n(fe.suggestionId||null))}catch{kr([])}finally{us(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[xs?a.jsx(wt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):a.jsx(Ji,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),Tr.length>0&&a.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),Tr.map((D,fe)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:D.labelName}),a.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",D.source,")"]}),D.labelId&&a.jsx("button",{type:"button",onClick:()=>{Ys(N.id,[D.labelId],[],!0,Jr||void 0),kr(ge=>ge.filter((Ge,it)=>it!==fe))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:a.jsx(vn,{className:"w-3 h-3"})})]},D.labelId||fe))]}),a.jsx("div",{className:"mt-1",children:a.jsxs("button",{type:"button",onClick:()=>{gr(N.id),ms(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[a.jsx(vn,{className:"w-3 h-3"}),N.labels&&N.labels.length>0?"Manage Labels":"Add Labels"]})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(N.customTags||[]).map((D,fe)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[D,a.jsx("button",{type:"button",onClick:()=>{const ge=(N.customTags||[]).filter((Ge,it)=>it!==fe);pv(N.id,{userId:i,customTags:ge}).then(()=>{S(Ge=>Ge?{...Ge,customTags:ge}:null)}).catch(()=>{})},className:"hover:text-red-600",children:a.jsx(ir,{className:"w-3 h-3"})})]},fe)),a.jsx("input",{type:"text",placeholder:"Add tag",value:kc,onChange:D=>Sc(D.target.value),onKeyDown:D=>{if(D.key==="Enter"&&kc.trim()){const ge=[...N.customTags||[],kc.trim()];pv(N.id,{userId:i,customTags:ge}).then(()=>{S(Ge=>Ge?{...Ge,customTags:ge}:null),Sc("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("select",{value:N.priority||"medium",onChange:D=>Wa(N.id,{priority:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]}),a.jsxs("select",{value:N.threadStatus||"active",onChange:D=>Wa(N.id,{threadStatus:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"archived",children:"Archived"})]}),c&&a.jsxs("select",{value:N.owner||"",onChange:D=>Wa(N.id,{owner:D.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[a.jsx("option",{value:"",children:"Unassigned"}),pa.map(D=>a.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),m&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>As(N.id,!N.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:N.isStarred?"Unstar":"Star",children:N.isStarred?a.jsx(G0,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):a.jsx(lU,{className:"w-4 h-4"})}),N.syncStatus?.starredStatus&&a.jsx("div",{className:"flex-shrink-0",children:fs(N.syncStatus.starredStatus)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Fa(N.id,!N.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:N.isRead?"Mark unread":"Mark read"}),N.syncStatus?.readStatus&&a.jsx("div",{className:"flex-shrink-0",children:fs(N.syncStatus.readStatus)})]}),p&&a.jsx(a.Fragment,{children:N.threadStatus==="archived"?a.jsxs("button",{type:"button",onClick:()=>j0(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[a.jsx(Kg,{className:"w-3 h-3"}),"Restore"]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>Ml(N.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[a.jsx(Kg,{className:"w-3 h-3"}),"Archive"]}),N.threadStatus!=="resolved"&&v&&a.jsxs("button",{type:"button",onClick:()=>So(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[a.jsx(yn,{className:"w-3 h-3"}),"Resolve"]})]})}),y&&a.jsxs("button",{type:"button",onClick:()=>Tf(N.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[a.jsx(Ur,{className:"w-3 h-3"}),"Delete"]}),f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{Tc("reply"),ds([N.email]),ws([]),Ls([]),Ui(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),fa(""),qi(N.accountEmail||Me[0]?.email||""),Zo(!1),bo(!1),ao(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(nu,{className:"w-3 h-3"}),"Reply"]}),a.jsx("button",{type:"button",onClick:()=>{Tc("replyAll");const D=(N.accountEmail||"").toLowerCase(),fe=[N.email,...N.to||[],...N.cc||[]].filter((ge,Ge,it)=>{const zt=ge.toLowerCase();return it.findIndex(_t=>_t.toLowerCase()===zt)===Ge&&zt!==D});ds([N.email]),ws(fe.filter(ge=>ge.toLowerCase()!==N.email.toLowerCase())),Ls([]),Ui(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),fa(""),qi(N.accountEmail||Me[0]?.email||""),Zo(!0),bo(!1),ao(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),d&&a.jsx("button",{type:"button",onClick:()=>{Tc("forward"),ds([]),ws([]),Ls([]),Ui(N.subject?.startsWith("Fwd:")||N.subject?.startsWith("Fw:")?N.subject:`Fwd: ${N.subject||""}`);const D=N.body||N.lastMessage||"";fa(`

--- Forwarded message ---
From: ${N.sender||N.email}
Date: ${N.timestamp}
Subject: ${N.subject}
To: ${N.to?.join(", ")||N.email}

${D}`),qi(N.accountEmail||Me[0]?.email||""),Zo(!1),bo(!1),ao(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),a.jsxs("button",{type:"button",onClick:async()=>{if(!(!i||!N.id)){ze(!0);try{if((await cse(i,N.id,!0)).success&&(t("Meeting created successfully!"),N.id)){const fe=await Bv(i,N.id);fe.success&&fe.data&&no(fe.data)}}catch(D){r(D.message||"Failed to create meeting")}finally{ze(!1)}}},disabled:we||!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Create meeting from email (auto-extract details)",children:[we?a.jsx(wt,{className:"w-3 h-3 animate-spin"}):a.jsx(ha,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),a.jsx("div",{className:"prose prose-slate max-w-none break-words",children:a.jsx(Y8,{content:N.body||N.lastMessage||"No content",highlightTerm:Ie(M).searchText||void 0})})]}),(gu.length>0||Ll.length>0||Dc.length>0)&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),a.jsxs("div",{className:"space-y-3",children:[gu.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(jl,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",gu.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:gu.map(D=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:D.title}),D.status&&a.jsx("span",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]}),Ll.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zf,{className:"w-4 h-4 text-amber-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Ll.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:Ll.map(D=>a.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:D.title||D.name}),D.status&&a.jsx("span",{className:"text-xs text-amber-600",children:D.status})]},D.id))})]}),Dc.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ka,{className:"w-4 h-4 text-red-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",Dc.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:Dc.map(D=>a.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:D.title}),D.status&&a.jsx("span",{className:"text-xs text-red-600",children:D.status})]},D.id))})]})]})]}),xu.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ha,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",xu.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:xu.map(D=>a.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:D.title}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Os,{className:"w-3 h-3"}),a.jsxs("span",{children:[new Date(D.start).toLocaleString()," - ",new Date(D.end).toLocaleString()]})]}),D.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(iD,{className:"w-3 h-3"}),a.jsx("span",{children:D.location})]}),D.participants&&D.participants.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(wl,{className:"w-3 h-3"}),a.jsx("span",{children:D.participants.join(", ")})]})]})]}),D.htmlLink&&a.jsx("a",{href:D.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:a.jsx(Di,{className:"w-4 h-4"})})]})},D.id))})]}),N.attachments&&N.attachments.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Uh,{className:"w-4 h-4 text-slate-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",N.attachments.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.attachments.map((D,fe)=>{const ge=D.isDriveFile||D.driveFileId;return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${ge?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[ge&&D.iconUrl?a.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Co(D.mimeType)?"bg-blue-50 text-blue-600":Cs(D.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Co(D.mimeType)?a.jsx(bl,{className:"w-4 h-4"}):Cs(D.mimeType)?a.jsx(dc,{className:"w-4 h-4"}):a.jsx(Uh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.filename}),ge&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:ge?"Google Drive file":`${oc(D.size)}  ${D.mimeType}`})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[ge&&D.previewUrl&&a.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(Di,{className:"w-4 h-4"})}),!ge&&(Co(D.mimeType)||Cs(D.mimeType))&&a.jsx("button",{onClick:()=>Ao(N.id,D.attachmentId,D.filename,D.mimeType),disabled:Sn[`${N.id}-${D.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:Sn[`${N.id}-${D.attachmentId}-view`]?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(wd,{className:"w-4 h-4"})}),!ge&&a.jsx("button",{onClick:()=>ll(N.id,D.attachmentId,D.filename),disabled:Sn[`${N.id}-${D.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:Sn[`${N.id}-${D.attachmentId}-download`]?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(H0,{className:"w-4 h-4"})}),ge&&D.downloadUrl&&a.jsx("a",{href:D.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:a.jsx(H0,{className:"w-4 h-4"})})]})]},D.attachmentId||fe)})})]}),N.attachments&&N.attachments.some(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation")))&&a.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(dc,{className:"w-4 h-4 text-blue-500"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),a.jsx("div",{className:"space-y-4",children:N.attachments.filter(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation"))).map((D,fe)=>{const ge=D.previewUrl?.replace("/edit","/preview")||D.previewUrl;return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[D.iconUrl&&a.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.filename}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),D.previewUrl&&a.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:a.jsx(Di,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:a.jsx("iframe",{src:ge,className:"absolute top-0 left-0 w-full h-full border-0",title:D.filename,allow:"fullscreen"})})]},D.attachmentId||fe)})})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Xe.length>0&&a.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>rs(),fe=>{})},disabled:He,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:He?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nd,{className:"w-3 h-3"}),"Regenerate"]})}),!Ee&&a.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>rs(),fe=>{})},disabled:He,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:He?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ji,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),Xe.length>1&&a.jsxs("div",{className:"mb-3 space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Xe.map((D,fe)=>a.jsxs("button",{type:"button",onClick:()=>{Je(fe),Oe(w(D.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Ve===fe?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:D.style}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[D.confidence,"%"]})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:D.description}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full ${D.confidence>=80?"bg-green-500":D.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${D.confidence}%`}})})]},fe))})]}),Ee?a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[Xe.length>1&&Ve!==null&&a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[Xe[Ve].style," Variation"]}),a.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",Xe[Ve].description,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Xe[Ve].confidence,"%"]})]})]}),a.jsx("div",{className:"quill-wrapper",children:a.jsx(Vv,{ref:D=>{tt.current=D,D&&(ht.current=D.getEditor())},theme:"snow",value:Ee,onChange:D=>Oe(D),modules:zd,formats:Hd,placeholder:"Edit your draft..."})}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{type:"button",onClick:ad,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(nu,{className:"w-3 h-3"}),"Copy to Clipboard"]}),a.jsxs("button",{type:"button",onClick:cc,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[a.jsx(vn,{className:"w-3 h-3"}),"Save as Template"]}),a.jsx("button",{type:"button",onClick:()=>{Mt(!0),sd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),a.jsx("button",{type:"button",onClick:()=>{Oe(null),ct([]),Je(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),a.jsx("button",{type:"button",onClick:()=>{Mt(!0),sd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",N?.id&&sn[N.id]&&sn[N.id].length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:sn[N.id].length})]}),l&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",style:{position:"relative"},children:[a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),a.jsx(Vv,{ref:D=>{xe.current=D,D&&(je.current=D.getEditor())},theme:"snow",value:or,onChange:Of,onBlur:()=>{setTimeout(()=>{ma||_r(null)},200)},modules:zd,formats:Hd,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),ma&&sr.length>0&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:D=>{D.preventDefault()},children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(ax,{className:"w-3 h-3"}),"Mention User"]}),sr.map(D=>a.jsxs("button",{type:"button",onMouseDown:fe=>{fe.preventDefault(),fe.stopPropagation(),Pf(D)},onClick:fe=>{fe.preventDefault(),fe.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:D.name?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]})]},D.id))]})})]}),a.jsxs("div",{className:"relative",ref:Ht,children:[a.jsxs("button",{type:"button",onClick:()=>xr(!nr),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${kn.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Uu,{className:`w-4 h-4 ${kn.length>0?"text-indigo-600":"text-slate-400"}`}),a.jsx("span",{className:`font-medium ${kn.length>0?"text-indigo-900":"text-slate-600"}`,children:kn.length>0?`Marked for ${kn.length} team member${kn.length>1?"s":""}`:"Mark for team member"})]}),kn.length>0&&a.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),In([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:a.jsx(ir,{className:"w-3 h-3 text-indigo-600"})})]}),nr&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[a.jsx(Uu,{className:"w-3 h-3"}),"Select Team Members"]}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:Dt,onChange:D=>Ar(D.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),pa.filter(D=>D.id!==i&&(Dt===""||D.name?.toLowerCase().includes(Dt.toLowerCase())||D.email?.toLowerCase().includes(Dt.toLowerCase()))).map(D=>{const fe=kn.includes(D.id);return a.jsxs("button",{type:"button",onClick:()=>{In(fe?ge=>ge.filter(Ge=>Ge!==D.id):ge=>[...ge,D.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${fe?"bg-indigo-50":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${fe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:D.name?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]}),fe&&a.jsx(yn,{className:"w-4 h-4 text-indigo-600"})]},D.id)})]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:fn?a.jsx(bl,{className:"w-4 h-4"}):a.jsx(Wu,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:fn?Nt?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:Se,type:"file",accept:"image/*",onChange:ja,className:"hidden"})]}),a.jsx("button",{onClick:Bl,disabled:re||!or.trim()&&!Nt,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:re?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),"Send"]})})]}),fn&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:fn,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{Ke(""),Vt(null),Se.current&&(Se.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(ir,{className:"w-4 h-4"})})]})]}),!l&&a.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:a.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:sn[N?.id]&&sn[N.id]?.length>0?sn[N.id].map(D=>{const fe=Xc(o,"shared-inbox:delete-note")&&(N1e(o)||D.userId===i);return a.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(D.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:D.userName?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:D.userName}),(D.markedFor||[]).length>0&&a.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[a.jsx(Uu,{className:"w-2.5 h-2.5"}),"Marked"]})]}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(D.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(D.markedFor||[]).length>0&&a.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",pa.filter(ge=>(D.markedFor||[]).includes(ge.id)).map(ge=>ge.name).join(", ")||"Unknown"]})]})]}),fe&&a.jsx("button",{onClick:()=>N?.id&&Ra(N.id,D.id),disabled:be===D.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:be===D.id?a.jsx(wt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Ur,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),D.message&&a.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D.message}}),D.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsxs("button",{type:"button",onClick:()=>Rn({isOpen:!0,imageUrl:D.imageUrl,imageName:D.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[a.jsx(bl,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),a.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:D.imageName||"View Attachment"})]})})]},D.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(ai,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Gn.isOpen&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Rn({isOpen:!1,imageUrl:"",imageName:void 0}),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>Rn({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(ir,{className:"w-6 h-6"})}),a.jsx("img",{src:Gn.imageUrl,alt:Gn.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:D=>D.stopPropagation()}),Gn.imageName&&a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:a.jsx("p",{className:"text-sm font-medium text-slate-900",children:Gn.imageName})})]})}),ps&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{xn(!1),Pn("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),a.jsx("button",{onClick:()=>{xn(!1),Pn("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:wa,onChange:D=>Pn(D.target.value),onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),ju())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[a.jsx("button",{onClick:()=>{xn(!1),Pn("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:ju,disabled:!wa||!wa.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),Pt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Mt(!1),children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),a.jsx("button",{onClick:()=>Mt(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:vr.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ji,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):a.jsx("div",{className:"space-y-3",children:vr.map(D=>a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),N&&D.content&&(Oe(D.content),Mt(!1),t("Template loaded"))},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:D.name}),a.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[D.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(D.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),N&&D.content&&(Oe(D.content),Mt(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),a.jsx("button",{onClick:async fe=>{fe.preventDefault(),fe.stopPropagation(),ed(D.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(Ur,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},D.id))})})]})}),_f&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>ed(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(ea,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>ed(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{const D=_f;ed(null);try{await Aae(D,i),t("Template deleted"),sd()}catch(fe){const ge=fe?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",ge),r(ge)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),ec&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>io(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(dc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),a.jsx("button",{onClick:()=>io(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:xa,onChange:D=>Za(D.target.value),onKeyDown:D=>{D.key==="Enter"&&cl(xa)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),a.jsx("button",{onClick:()=>cl(xa),disabled:Xn,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Xn?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Xn&&ks.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ks.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(dc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):a.jsx("div",{className:"space-y-2",children:ks.map(D=>a.jsxs("button",{onClick:()=>lc(D),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[D.iconLink?a.jsx("img",{src:D.iconLink,alt:D.name,className:"w-8 h-8"}):a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(dc,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[D.size?oc(D.size):"Drive file","  ",D.mimeType||"Unknown type"]})]}),a.jsx("button",{onClick:fe=>{fe.stopPropagation(),D.webViewLink&&window.open(D.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:a.jsx(Di,{className:"w-4 h-4 text-slate-400"})})]},D.id))}),al&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{onClick:()=>cl(xa,al),disabled:Xn,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Xn?"Loading...":"Load More"})})]})]})})]}),_h&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>bu(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:a.jsx(ea,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>bu(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{bu(!1),ao(!1),ds([]),ws([]),Ls([]),Ui(""),fa(""),di(""),$i(""),Ms("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),bs&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{bu(!0)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Ja==="compose"?"Compose Email":Ja==="reply"?"Reply":Ja==="replyAll"?"Reply All":"Forward"}),a.jsx("button",{onClick:()=>{bu(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Me.length>1&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),a.jsx("select",{value:js,onChange:D=>qi(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:Me.filter((D,fe,ge)=>ge.findIndex(Ge=>Ge.email===D.email&&Ge.userId===D.userId)===fe).map((D,fe)=>a.jsxs("option",{value:D.email,children:[D.email," ",D.isCurrentUser?"(You)":`(${D.ownerName})`]},`${D.email}-${D.userId}-${fe}`))})]}),Me.length===0&&a.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No Gmail accounts connected. Please connect a Gmail account to send emails."}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[wn.map((D,fe)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>ds(wn.filter((ge,Ge)=>Ge!==fe)),className:"hover:text-indigo-900",children:a.jsx(ir,{className:"w-3 h-3"})})]},fe)),a.jsx("input",{type:"text",value:tl,onChange:D=>{const fe=D.target.value;if(di(fe),fe.length>0){const ge=Oc.filter(Ge=>Ge.email?.toLowerCase().includes(fe.toLowerCase())||Ge.name?.toLowerCase().includes(fe.toLowerCase())).slice(0,5);Md(ge),so(!0)}else so(!1)},onKeyDown:D=>{if(D.key==="Enter"&&tl.trim()){D.preventDefault();const fe=tl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!wn.includes(fe)&&(ds([...wn,fe]),di(""),so(!1))}else if(D.key==="Backspace"&&tl===""&&wn.length>0)ds(wn.slice(0,-1));else if(D.key==="ArrowDown"&&Dl)D.preventDefault(),zi(fe=>Math.min(fe+1,rl.length-1));else if(D.key==="ArrowUp"&&Dl)D.preventDefault(),zi(fe=>Math.max(fe-1,0));else if(D.key==="Enter"&&Dl&&rl[Zl]){D.preventDefault();const fe=rl[Zl];fe.email&&!wn.includes(fe.email)&&(ds([...wn,fe.email]),di(""),so(!1))}else if(D.key===","||D.key===";"){D.preventDefault();const fe=tl.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!wn.includes(fe)&&(ds([...wn,fe]),di(""),so(!1))}},onBlur:()=>{const D=tl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!wn.includes(D)&&(ds([...wn,D]),di(""),so(!1))},placeholder:wn.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),Dl&&rl.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:rl.map((D,fe)=>a.jsxs("button",{type:"button",onClick:()=>{D.email&&!wn.includes(D.email)&&(ds([...wn,D.email]),di(""),so(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${fe===Zl?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"font-medium text-slate-900",children:D.name}),a.jsx("div",{className:"text-xs text-slate-500",children:D.email})]},D.id))})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),a.jsxs("button",{type:"button",onClick:()=>Zo(!Fs),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Fs?"Hide":"Show"," Cc"]})]}),Fs&&a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Pa.map((D,fe)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>ws(Pa.filter((ge,Ge)=>Ge!==fe)),className:"hover:text-slate-900",children:a.jsx(ir,{className:"w-3 h-3"})})]},fe)),a.jsx("input",{type:"text",value:_n,onChange:D=>{$i(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&_n.trim()){D.preventDefault();const fe=_n.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!Pa.includes(fe)&&(ws([...Pa,fe]),$i(""))}else if(D.key==="Backspace"&&_n===""&&Pa.length>0)ws(Pa.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const fe=_n.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!Pa.includes(fe)&&(ws([...Pa,fe]),$i(""))}},onBlur:()=>{const D=_n.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!Pa.includes(D)&&(ws([...Pa,D]),$i(""))},placeholder:Pa.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),a.jsxs("button",{type:"button",onClick:()=>bo(!el),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[el?"Hide":"Show"," Bcc"]})]}),el&&a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[pn.map((D,fe)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>Ls(pn.filter((ge,Ge)=>Ge!==fe)),className:"hover:text-slate-900",children:a.jsx(ir,{className:"w-3 h-3"})})]},fe)),a.jsx("input",{type:"text",value:Qa,onChange:D=>{Ms(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&Qa.trim()){D.preventDefault();const fe=Qa.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!pn.includes(fe)&&(Ls([...pn,fe]),Ms(""))}else if(D.key==="Backspace"&&Qa===""&&pn.length>0)Ls(pn.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const fe=Qa.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe)&&!pn.includes(fe)&&(Ls([...pn,fe]),Ms(""))}},onBlur:()=>{const D=Qa.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!pn.includes(D)&&(Ls([...pn,D]),Ms(""))},placeholder:pn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ia,onChange:D=>Ui(D.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),vr.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:am||"",onChange:D=>{const fe=D.target.value||null;if(sm(fe),fe){const ge=vr.find(Ge=>Ge.id===fe);ge?.content&&(fa(ge.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No template"}),vr.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx("button",{type:"button",onClick:()=>Mt(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:a.jsx(Ji,{className:"w-4 h-4"})})]})]}),Ja==="compose"&&a.jsxs("div",{children:[a.jsxs("button",{type:"button",onClick:()=>{_i(!td),!td&&!hi&&Ia&&wn.length>0&&Va()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[a.jsx(Ji,{className:"w-4 h-4"}),td?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),td&&a.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:Fl?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):hi?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),a.jsx("button",{type:"button",onClick:Va,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),a.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:hi}})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{fa(hi||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),a.jsx("button",{type:"button",onClick:()=>{const D=hi?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(D),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):a.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Jl.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),a.jsxs("select",{value:Jl.find(D=>D.content===Pl)?.id||"",onChange:D=>{const fe=Jl.find(ge=>ge.id===D.target.value);ci(fe?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No signature"}),Jl.map(D=>a.jsxs("option",{value:D.id,children:[D.name," ",D.isDefault?"(Default)":""]},D.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),a.jsx(Vv,{ref:D=>{Te.current=D},theme:"snow",value:Ns,onChange:D=>{fa(D)},modules:zd,formats:Hd,placeholder:"Compose your message..."})]}),Pl&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Pl}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:a.jsx(Uh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),a.jsx("input",{ref:nl,type:"file",multiple:!0,onChange:rd,className:"hidden"})]}),a.jsxs("button",{type:"button",onClick:()=>{io(!0),Za(""),cl()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(dc,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),Da.length>0&&a.jsx("div",{className:"mt-3 space-y-2",children:Da.map(D=>a.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${D.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[D.isDriveFile&&D.driveIconLink?a.jsx("img",{src:D.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Co(D.file.type)?"bg-blue-50 text-blue-600":Cs(D.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Co(D.file.type)?a.jsx(bl,{className:"w-4 h-4"}):Cs(D.file.type)?a.jsx(dc,{className:"w-4 h-4"}):a.jsx(Uh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.file.name}),D.isDriveFile&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:D.isDriveFile?"Google Drive file":`${oc(D.file.size)}  ${D.file.type}`}),Ss[D.id]!==void 0&&Ss[D.id]<100&&a.jsxs("div",{className:"flex-1 max-w-[100px]",children:[a.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${Ss[D.id]}%`}})}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[Ss[D.id],"%"]})]})]})]}),D.isDriveFile&&D.driveWebViewLink&&a.jsx("a",{href:D.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(Di,{className:"w-4 h-4"})}),D.preview&&!D.isDriveFile&&a.jsx("button",{type:"button",onClick:()=>{er({isOpen:!0,emailId:"",attachmentId:D.id,filename:D.file.name,mimeType:D.file.type,url:D.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:a.jsx(wd,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>nd(D.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:a.jsx(ir,{className:"w-4 h-4"})})]},D.id))})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{bu(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Ja==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{Xs(!0),await Th()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[a.jsx(dc,{className:"w-4 h-4"}),"Load Drafts"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Rl,disabled:Ah||!Ia||!Ns,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ah?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dc,{className:"w-4 h-4"}),"Save Draft"]})}),Ja==="compose"&&a.jsxs("button",{type:"button",onClick:()=>{if(!wn.length||!Ia||!Ns){r("Please fill in all required fields (To, Subject, Message)");return}tc(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[a.jsx(Os,{className:"w-4 h-4"}),"Schedule"]}),Ja==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{if(!i||wn.length===0||!Ia||!Ns){r("Please fill in all required fields (To, Subject, Message)");return}const D=Ns.replace(/<[^>]+>/g," ").toLowerCase(),fe=`${Ia} ${D}`,ge=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Ge;for(const Or of ge){const Cn=fe.match(Or);if(Cn){Ge=Cn[0];break}}const it=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let zt;for(const Or of it){const Cn=fe.match(Or);if(Cn){zt=Cn[0];break}}const _t=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Qt;for(const Or of _t){const Cn=fe.match(Or);if(Cn&&Cn[1]){Qt=Cn[1].trim();break}}Kt({title:Ia,date:Ge,time:zt,location:Qt,participants:wn,description:Ns.substring(0,500)}),Rr(null),pt(!0)},disabled:we||!i||wn.length===0||!Ia,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[we?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(ha,{className:"w-4 h-4"}),"Schedule Meeting"]}),u?a.jsx("button",{type:"button",onClick:async()=>{if(!i||wn.length===0||!Ia||!Ns){r("Please fill in all required fields (To, Subject, Message)");return}ui(!0);try{let D=Ns;Pl&&(D+=`<br><br>${Pl}`);const fe=await Promise.all(Da.filter(Ge=>!Ge.isDriveFile).map(async Ge=>new Promise((it,zt)=>{const _t=new FileReader;_t.onload=()=>{const Qt=_t.result.split(",")[1];it({filename:Ge.file.name,content:Qt,type:Ge.file.type})},_t.onerror=zt,_t.readAsDataURL(Ge.file)}))),ge=Da.filter(Ge=>Ge.isDriveFile&&Ge.driveWebViewLink);if(ge.length>0&&Ja==="compose"){let Ge='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';ge.forEach(it=>{Ge+=`<li style="margin-bottom: 4px;"><a href="${it.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${it.file.name}</a></li>`}),Ge+="</ul></div>",D+=Ge}if(Ja==="reply"||Ja==="replyAll")await Eae({emailId:N?.id||"",userId:i,accountEmail:js||Me[0]?.email,body:D,replyAll:Ja==="replyAll",attachments:fe.length>0?fe:void 0}),t("Reply sent successfully");else if(Ja==="forward")await Tae({emailId:N?.id||"",userId:i,accountEmail:js||Me[0]?.email,to:wn,cc:Pa.length>0?Pa:void 0,bcc:pn.length>0?pn:void 0,body:D,attachments:fe.length>0?fe:void 0}),t("Email forwarded successfully");else{const it=(await Cae({userId:i,accountEmail:js||Me[0]?.email,to:wn,cc:Pa.length>0?Pa:void 0,bcc:pn.length>0?pn:void 0,subject:Ia,body:D,attachments:fe.length>0?fe:void 0}))?.data?.id;if(it){const zt=Da.filter(_t=>_t.isDriveFile&&_t.driveFileId);for(const _t of zt)try{await JP({userId:i,emailId:it,fileId:_t.driveFileId,fileName:_t.file.name,fileMimeType:_t.file.type,webViewLink:_t.driveWebViewLink,webContentLink:void 0,iconLink:_t.driveIconLink})}catch(Qt){console.error("Failed to attach Drive file:",Qt)}}t("Email sent successfully")}Da.forEach(Ge=>{Ge.preview&&URL.revokeObjectURL(Ge.preview)}),ao(!1),ds([]),ws([]),Ls([]),Ui(""),fa(""),Si([]),di(""),$i(""),Ms(""),io(!1),await Ye()}catch(D){const fe=b(D,"Failed to send email");r(fe)}finally{ui(!1)}},disabled:Ql||wn.length===0||!Ia||!Ns||Me.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ql?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-4 h-4"}),Ja==="reply"||Ja==="replyAll"?"Send Reply":Ja==="forward"?"Forward":"Send"]})}):a.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[a.jsx(nu,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),cn?.isOpen&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(Co(cn.mimeType)||Cs(cn.mimeType))&&a.jsx(bl,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:cn.filename})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{cn.url&&window.URL.revokeObjectURL(cn.url),er(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>{N&&cn.url&&ll(cn.emailId,cn.attachmentId,cn.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[a.jsx(H0,{className:"w-4 h-4"}),"Download"]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:cn.url?Co(cn.mimeType)?a.jsx("img",{src:cn.url,alt:cn.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):Cs(cn.mimeType)?a.jsx("iframe",{src:cn.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:cn.filename}):a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(dc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),a.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),a.jsx("button",{onClick:()=>{N&&ll(cn.emailId,cn.attachmentId,cn.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),Kn&&Be&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ms(!1),gr(null)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),a.jsx("button",{onClick:()=>{ms(!1),gr(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Me.length>0&&a.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:a.jsxs("button",{onClick:()=>yo(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[a.jsx(vn,{className:"w-4 h-4"}),"Create New Label"]})}),$r?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[a.jsx(wt,{className:"w-6 h-6 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):un.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>Un(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(Nd,{className:"w-4 h-4"}),"Retry"]}),Me.length>0&&a.jsxs("button",{onClick:()=>yo(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx(vn,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):a.jsx("div",{className:"space-y-2",children:un.map(D=>{const ge=et.find(Ge=>Ge.id===Be)?.labels?.includes(D.id)||!1;return a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:ge,onChange:Ge=>{Be&&(Ge.target.checked?Ys(Be,[D.id],[]):Ys(Be,[],[D.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:D.name}),D.type==="system"&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},D.id)})})]})]})}),Cc&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{yo(!1),Xo("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),a.jsx("button",{onClick:()=>{yo(!1),Xo(""),Ec("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),a.jsx("input",{type:"text",value:Tl,onChange:D=>Xo(D.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:D=>{if(D.key==="Enter"&&Tl.trim()&&(Jo||Me.length>0)){const fe=Jo||Me[0].email;Ma(Tl.trim(),fe)}},autoFocus:!0})]}),Me.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),a.jsx("select",{value:Jo||Me[0].email,onChange:D=>Ec(D.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Me.map(D=>a.jsx("option",{value:D.email,children:D.email},D.email))})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{yo(!1),Xo(""),Ec("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(Tl.trim()&&Me.length>0){const D=Jo||Me[0].email;Ma(Tl.trim(),D)}},disabled:!Tl.trim()||pu||Me.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:pu?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Ze&&i&&a.jsx(b1e,{isOpen:Ze,onClose:()=>{pt(!1),Kt(null),Rr(null)},userId:i,emailId:br||void 0,emailSubject:Ia,emailBody:Ns,participants:wn,extractedDetails:Ot||void 0,onCreateSuccess:()=>{br&&N?.id===br&&Bv(i,br).then(D=>{D.success&&D.data&&no(D.data)}).catch(()=>{})}}),Sh&&Fc&&N&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",Fc.charAt(0).toUpperCase()+Fc.slice(1)]}),a.jsx("button",{onClick:()=>{yu(!1),Mc(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Fc==="contact"&&a.jsx("div",{className:"space-y-2",children:Oc.map(D=>a.jsxs("button",{onClick:()=>An("contact",D.id),disabled:il,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.name}),a.jsx("p",{className:"text-xs text-slate-500",children:D.email})]},D.id))}),Fc==="company"&&a.jsx("div",{className:"space-y-2",children:Pc.map(D=>a.jsxs("button",{onClick:()=>An("company",D.id),disabled:il,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.name}),D.industry&&a.jsx("p",{className:"text-xs text-slate-500",children:D.industry})]},D.id))}),Fc==="deal"&&a.jsx("div",{className:"space-y-2",children:sl.map(D=>a.jsxs("button",{onClick:()=>An("deal",D.id),disabled:il,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.stage&&a.jsx("p",{className:"text-xs text-slate-500",children:D.stage})]},D.id))}),Fc==="project"&&a.jsx("div",{className:"space-y-2",children:Gs.map(D=>a.jsxs("button",{onClick:()=>An("project",D.id),disabled:il,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.status&&a.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))}),Fc==="contract"&&a.jsx("div",{className:"space-y-2",children:Bd.map(D=>a.jsxs("button",{onClick:()=>An("contract",D.id),disabled:il,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title}),D.status&&a.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]})]})}),Sf&&N&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),a.jsx("button",{onClick:()=>Rc(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",defaultValue:N.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[a.jsx("option",{value:"",children:"None"}),Gs.map(D=>a.jsx("option",{value:D.id,children:D.title||D.name},D.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[a.jsx("option",{value:"",children:"Unassigned"}),pa.map(D=>a.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),a.jsx("button",{onClick:()=>{const D=document.getElementById("task-title"),fe=document.getElementById("task-priority"),ge=document.getElementById("task-project"),Ge=document.getElementById("task-assignee");pi({title:D?.value,priority:fe?.value,projectId:ge?.value||void 0,assigneeId:Ge?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Uc&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Os,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),a.jsx("button",{onClick:()=>{tc(!1),qc("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",value:rc,onChange:D=>qc(D.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),a.jsxs("select",{value:Af,onChange:D=>nc(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),a.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),a.jsx("option",{value:"UTC",children:"UTC"}),a.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[a.jsx("button",{onClick:()=>{tc(!1),qc("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(!rc){r("Please select a date and time");return}if(!i||wn.length===0||!Ia||!Ns){r("Please fill in all required fields");return}try{const D=await Promise.all(Da.filter(ge=>!ge.isDriveFile).map(async ge=>new Promise((Ge,it)=>{const zt=new FileReader;zt.onload=()=>{const _t=zt.result.split(",")[1];Ge({filename:ge.file.name,content:_t,type:ge.file.type})},zt.onerror=it,zt.readAsDataURL(ge.file)})));let fe=Ns;Pl&&(fe+=`<br><br>${Pl}`),await Mae({userId:i,accountEmail:js||Me[0]?.email,to:wn,cc:Pa.length>0?Pa:void 0,bcc:pn.length>0?pn:void 0,subject:Ia,body:fe,scheduledDateTime:rc,timezone:Af,attachments:D.length>0?D:void 0}),t("Email scheduled successfully"),tc(!1),ao(!1),ds([]),ws([]),Ls([]),Ui(""),fa(""),Si([]),qc("")}catch(D){const fe=b(D,"Failed to schedule email");r(fe)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),Ks&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(dc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),a.jsx("button",{onClick:()=>{Xs(!1),Yn([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:oa?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(wt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):No.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(dc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):a.jsx("div",{className:"space-y-3",children:No.map(D=>a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(D.payload?.headers){const fe=D.payload.headers,ge=fe.find(_t=>_t.name==="To"),Ge=fe.find(_t=>_t.name==="Cc"),it=fe.find(_t=>_t.name==="Bcc"),zt=fe.find(_t=>_t.name==="Subject");ge?.value&&ds(ge.value.split(",").map(_t=>_t.trim())),Ge?.value&&ws(Ge.value.split(",").map(_t=>_t.trim())),it?.value&&Ls(it.value.split(",").map(_t=>_t.trim())),zt?.value&&Ui(zt.value)}if(D.payload?.body?.data)try{const fe=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));fa(fe)}catch(fe){console.error("Failed to decode draft body:",fe),r("Failed to decode draft body")}else if(D.payload?.parts){const fe=D.payload.parts.find(ge=>ge.mimeType==="text/html");if(fe?.body?.data)try{const ge=atob(fe.body.data.replace(/-/g,"+").replace(/_/g,"/"));fa(ge)}catch(ge){console.error("Failed to decode draft body:",ge),r("Failed to decode draft body")}}Xs(!1),t("Draft loaded")},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:D.payload?.headers?.find(fe=>fe.name==="Subject")?.value||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",D.payload?.headers?.find(fe=>fe.name==="To")?.value||"No recipients"]}),a.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",D.message?.internalDate?new Date(parseInt(D.message.internalDate)).toLocaleString():"Unknown date"]})]}),a.jsx("button",{onClick:fe=>{if(fe.stopPropagation(),D.payload?.headers){const ge=D.payload.headers,Ge=ge.find(Qt=>Qt.name==="To"),it=ge.find(Qt=>Qt.name==="Cc"),zt=ge.find(Qt=>Qt.name==="Bcc"),_t=ge.find(Qt=>Qt.name==="Subject");Ge?.value&&ds(Ge.value.split(",").map(Qt=>Qt.trim())),it?.value&&ws(it.value.split(",").map(Qt=>Qt.trim())),zt?.value&&Ls(zt.value.split(",").map(Qt=>Qt.trim())),_t?.value&&Ui(_t.value)}if(D.payload?.body?.data)try{const ge=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));fa(ge)}catch(ge){console.error("Failed to decode draft body:",ge),r("Failed to decode draft body")}else if(D.payload?.parts){const ge=D.payload.parts.find(Ge=>Ge.mimeType==="text/html");if(ge?.body?.data)try{const Ge=atob(ge.body.data.replace(/-/g,"+").replace(/_/g,"/"));fa(Ge)}catch(Ge){console.error("Failed to decode draft body:",Ge),r("Failed to decode draft body")}}Xs(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},D.id))})})]})}),pr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{rr(!1),$t("")},children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:a.jsx(yn,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Me.length," account",Me.length!==1?"s":""," connected"]})]})]}),a.jsx("button",{onClick:()=>{rr(!1),$t("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:ft,onChange:D=>$t(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const D=new Set(ut.map(ge=>ge.accountEmail.toLowerCase())),fe=Me.filter((ge,Ge,it)=>it.findIndex(zt=>zt.email===ge.email&&zt.userId===ge.userId)===Ge).filter(ge=>{if(!ft.trim())return!0;const Ge=ft.toLowerCase();return ge.email.toLowerCase().includes(Ge)||ge.ownerName.toLowerCase().includes(Ge)});return fe.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[a.jsx(e0,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium text-sm",children:ft?"No accounts found matching your search":"No accounts connected"}),ft&&a.jsx("button",{onClick:()=>$t(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):a.jsx("div",{className:"space-y-2",children:fe.map((ge,Ge)=>{const it=D.has(ge.email.toLowerCase()),zt=ut.find(_t=>_t.accountEmail.toLowerCase()===ge.email.toLowerCase());return a.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${ge.isCurrentUser?"border-indigo-300 bg-indigo-50/30":it?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${it?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:ge.email.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:ge.email}),ge.isCurrentUser&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),it&&a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ge.ownerName==="Unknown User"?a.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(ge.connectedAt).toLocaleDateString()]}):a.jsxs(a.Fragment,{children:[ge.ownerName,"  Connected ",new Date(ge.connectedAt).toLocaleDateString(),!ge.hasToken&&ge.ownerName!=="Unknown User"&&a.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),a.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[it?a.jsx("button",{onClick:()=>zt&&ta(zt.id,ge.email),disabled:bt===ge.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:bt===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Unfiltering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(wd,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Show"})]})}):a.jsx("button",{onClick:()=>dn(ge.email),disabled:bt===ge.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:bt===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Hiding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(MB,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Hide"})]})}),ge.isCurrentUser&&ge.hasToken!==!1&&a.jsx("button",{onClick:()=>zn(ge.email),disabled:tr===ge.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:tr===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Disconnecting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(sD,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Remove"})]})}),ge.isCurrentUser&&ge.hasToken===!1&&a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${ge.email}-${ge.userId}-${Ge}`)})})})()}),a.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:a.jsxs("button",{onClick:()=>{rr(!1),Bn()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[a.jsx(vn,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[a.jsx(Kg,{className:"w-14 h-14 text-slate-300 mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},j1e=()=>{const{showSuccess:e,showError:t}=ba(),[r,n]=U.useState([]),[s,i]=U.useState(!0),[o,l]=U.useState(!1),[c,u]=U.useState({name:"",trigger:"",action:"",description:""}),[f,d]=U.useState(!1),[m,p]=U.useState(null),[y,v]=U.useState(null),[g,b]=U.useState(null),[w,j]=U.useState(null);U.useEffect(()=>{(async()=>{i(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id,B=await UP(I),C=B?.data||B||[];n(Array.isArray(C)?C:[])}catch(I){console.error("[AUTOMATIONS] Failed to fetch automations:",I),t(I.message||"Failed to load automations"),n([])}finally{i(!1)}})()},[]),U.useEffect(()=>{const T=async()=>{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const B=await UP(I),C=B?.data||B||[];n(Array.isArray(C)?C:[])}catch(B){console.error("Failed to refresh automations:",B)}};return window.addEventListener("refresh-automations",T),()=>window.removeEventListener("refresh-automations",T)},[]);const N=async T=>{p(T);try{await Nne(T);const I=r.find(B=>B.id===T);n(B=>B.map(C=>C.id===T?{...C,active:!C.active}:C)),e(`Automation "${I?.name}" ${I?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to toggle automation:",I),t(I.message||"Failed to toggle automation")}finally{p(null)}},S=T=>{j(T),b(T.id)},P=async()=>{if(w){v(w.id);try{await jne(w.id),n(T=>T.filter(I=>I.id!==w.id)),b(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(T){console.error("Failed to delete automation:",T),t(T.message||"Failed to delete automation")}finally{v(null)}}},A=async T=>{T.preventDefault(),d(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;await wne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:I||void 0}),d(!1),l(!1),u({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to create automation:",I),t(I.message||"Failed to create automation"),d(!1)}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(vn,{className:"w-4 h-4"})," Create Recipe"]})]}),s?a.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[a.jsx(wt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(Yv,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[a.jsx(vn,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(T=>a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{onClick:()=>N(T.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${T.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:a.jsx(Yv,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:T.name}),T.active&&a.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[a.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),a.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:T.description})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),a.jsx("p",{className:"text-xs font-bold text-slate-700",children:T.trigger})]}),a.jsx(ho,{className:"w-4 h-4 text-slate-300"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),a.jsx("p",{className:"text-xs font-bold text-indigo-600",children:T.action})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>N(T.id),disabled:m===T.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${T.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:T.active?"Pause Automation":"Activate Automation",children:m===T.id?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):T.active?a.jsx(rU,{className:"w-5 h-5 fill-indigo-600"}):a.jsx(nU,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>S(T),disabled:y===T.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:y===T.id?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsx(Ur,{className:"w-5 h-5"})})]})]})]},T.id)),a.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:a.jsx(Ji,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),a.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),a.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),a.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",a.jsx(ho,{className:"w-4 h-4"})]})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:A,className:"p-6 space-y-4 text-left",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),a.jsx("input",{required:!0,type:"text",value:c.name,onChange:T=>u({...c,name:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),a.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:T=>u({...c,trigger:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),a.jsx("input",{required:!0,type:"text",value:c.action,onChange:T=>u({...c,action:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),a.jsx("textarea",{required:!0,value:c.description,onChange:T=>u({...c,description:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:f,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ad,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&w&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(s0,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:()=>b(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",a.jsxs("span",{className:"font-bold text-slate-900",children:['"',w.name,'"']}),"?"]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),a.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>b(null),disabled:y===w.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:y===w.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y===w.id?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},k1e=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=ba(),[s,i]=U.useState("registry"),[o,l]=U.useState([]),[c,u]=U.useState([]),[f,d]=U.useState(!0),[m,p]=U.useState("all"),[y,v]=U.useState("open"),[g,b]=U.useState(null),[w,j]=U.useState(!1),[N,S]=U.useState(!1),[P,A]=U.useState({type:"feature",title:"",description:""}),[T,I]=U.useState({type:null,item:null}),[B,C]=U.useState(null),[E,M]=U.useState(!1),[q,G]=U.useState([]),[Z,te]=U.useState(!1),[ae,Q]=U.useState(!1),[ee,W]=U.useState(null),[O,z]=U.useState(!1),[H,R]=U.useState(""),[K,le]=U.useState(null),he=e?.role==="Admin",ie=async()=>{if(s==="registry"){d(!0);try{const[ue,Pe]=await Promise.all([Une(),Td()]),Ne=(ue.data||[]).map(Re=>{const nt=Re.url||null;let xt=[];return Array.isArray(Re.attachments)&&Re.attachments.length>0&&(xt=Re.attachments.filter(kt=>kt&&(kt.source==="file"||kt.data)).map(kt=>({type:kt.type||"image",data:kt.data||"",filename:kt.filename||"attachment",mimeType:kt.mimeType||"image/jpeg",source:"file"}))),{...Re,url:nt,attachments:xt}});l(Ne),u(Pe.data||[])}catch{n("Failed to synchronize roadmap registry.")}finally{d(!1)}}};U.useEffect(()=>{ie();const ue=()=>ie();return window.addEventListener("refresh-roadmap",ue),()=>window.removeEventListener("refresh-roadmap",ue)},[s]),U.useEffect(()=>{const ue=Pe=>{Pe.key==="Escape"&&K&&le(null)};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[K]),U.useEffect(()=>{R(g&&g.description||"")},[g]);const ce=async()=>{if(!(!g||!he)){z(!0);try{await YN(g.id,{description:H.trim()}),l(ue=>ue.map(Pe=>Pe.id===g.id?{...Pe,description:H.trim()}:Pe)),b(ue=>ue&&{...ue,description:H.trim()}),r("Context updated")}catch{n("Failed to update context")}finally{z(!1)}}},De=async(ue,Pe)=>{if(he)try{await YN(ue,{status:Pe}),l(Ne=>Ne.map(Re=>Re.id===ue?{...Re,status:Pe}:Re)),g?.id===ue&&b({...g,status:Pe}),r(`Status updated to ${Pe}`)}catch{n("Update failed.")}},ne=async ue=>{if(he){M(!0);try{await zP(ue),l(Pe=>Pe.filter(Ne=>Ne.id!==ue)),g?.id===ue&&b(null),C(null),r("Entry purged from registry.")}catch{n("Purge failed.")}finally{M(!1)}}},Ue=()=>{q.length===pe.length?G([]):G(pe.map(ue=>ue.id))},Ce=async()=>{if(!he){n("Only admins can delete entries");return}if(q.length===0){n("No items selected");return}te(!0);try{const ue=[...q],Pe=ue.map(Ne=>zP(Ne));await Promise.all(Pe),l(Ne=>Ne.filter(Re=>!ue.includes(Re.id))),g&&ue.includes(g.id)&&b(null),G([]),Q(!1),r(`Successfully deleted ${ue.length} entr${ue.length>1?"ies":"y"}`)}catch(ue){console.error("Bulk delete error:",ue),n(ue.message||"Failed to delete entries. Please try again.")}finally{te(!1)}},de=async ue=>{if(ue.preventDefault(),!P.title||!P.description){n("Title and description are required");return}S(!0);try{const Pe={...P,userId:e?.id||"anonymous",status:"planned"};await I7(Pe),r("Entry added to Strategic Pipeline"),j(!1),A({type:"feature",title:"",description:""}),ie()}catch(Pe){console.error("[FEEDBACK] Creation failed:",Pe),n(`Failed to add entry: ${Pe.message||"Unknown error"}`)}finally{S(!1)}},Y=async()=>{if(!T.item||!T.type)return;let ue,Pe;switch(T.type){case"done":ue="done",Pe="Entry marked as done";break;case"archive":ue="canceled",Pe="Entry archived";break;case"in-execution":ue="in-progress",Pe="Entry marked as in execution";break;default:return}try{await YN(T.item.id,{status:ue}),l(Ne=>Ne.map(Re=>Re.id===T.item.id?{...Re,status:ue}:Re)),g?.id===T.item.id&&b({...g,status:ue}),r(Pe),I({type:null,item:null})}catch{n("Failed to update entry status")}},ve=(ue,Pe="w-4 h-4")=>{switch(ue){case"done":return a.jsx(yn,{className:`${Pe} text-emerald-500`});case"in-progress":return a.jsx(Os,{className:`${Pe} text-blue-500 animate-pulse`});case"postponed":return a.jsx(FB,{className:`${Pe} text-amber-500`});case"canceled":return a.jsx(tD,{className:`${Pe} text-slate-400`});default:return a.jsx(Fv,{className:`${Pe} text-indigo-400`})}},ye=ue=>{switch(ue){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Ae=(ue,Pe="w-4 h-4")=>{switch(ue){case"bug":return a.jsx(Dv,{className:Pe});case"feature":return a.jsx(Ji,{className:Pe});case"idea":return a.jsx(Cj,{className:Pe})}},pe=o.filter(ue=>(y==="open"?ue.status!=="done"&&ue.status!=="canceled":ue.status==="done"||ue.status==="canceled")?m==="all"?!0:ue.type===m:!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),a.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[a.jsx(Fv,{className:"w-4 h-4 text-indigo-500"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:()=>{v("open"),G([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),a.jsx("button",{onClick:()=>{v("completed"),G([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ue=>a.jsx("button",{onClick:()=>{p(ue),G([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${m===ue?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ue},ue)),a.jsxs("button",{onClick:()=>{const Pe=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";A({type:Pe,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(vn,{className:"w-3 h-3"})," New Entry"]})]})]}),f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[a.jsx(wt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):pe.length===0?a.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[a.jsx(Gv,{className:"w-16 h-16 text-slate-100"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),a.jsxs("button",{onClick:()=>{const Pe=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";A({type:Pe,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[a.jsx(vn,{className:"w-4 h-4"})," Add Entry"]})]})]}):a.jsxs(a.Fragment,{children:[pe.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:pe.length>0&&q.length===pe.length,onChange:ue=>{ue.stopPropagation(),Ue()}}),a.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ue=>{ue.stopPropagation(),Ue()},children:"Select All Entries"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:pe.map(ue=>{const Pe=c.find(Re=>Re.id===ue.userId),Ne=q.includes(ue.id);return a.jsxs("div",{onClick:()=>{b(ue),W(null)},className:`bg-white rounded-[32px] border ${Ne?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${ye(ue.type)} flex items-center gap-1.5`,children:[Ae(ue.type,"w-2.5 h-2.5"),ue.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[ve(ue.status,"w-2.5 h-2.5"),ue.status]}),a.jsxs("div",{className:"flex items-center gap-1.5",onClick:Re=>Re.stopPropagation(),children:[a.jsx("div",{className:`${Ne?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:a.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Ne?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ne,onChange:Re=>{Re.stopPropagation(),G(nt=>nt.includes(ue.id)?nt.filter(xt=>xt!==ue.id):[...nt,ue.id])},onClick:Re=>{Re.stopPropagation()}})})}),(ue.status==="planned"||ue.status==="in-progress"||ue.status==="postponed")&&a.jsxs(a.Fragment,{children:[ue.status!=="in-progress"&&a.jsx("button",{onClick:Re=>{Re.stopPropagation(),I({type:"in-execution",item:ue})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:a.jsx(Os,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Re=>{Re.stopPropagation(),I({type:"done",item:ue})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:a.jsx(yn,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Re=>{Re.stopPropagation(),I({type:"archive",item:ue})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:a.jsx(pd,{className:"w-3.5 h-3.5"})})]}),he&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:Re=>{Re.stopPropagation(),W(ee===ue.id?null:ue.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${ee===ue.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:a.jsx(aD,{className:"w-3.5 h-3.5"})}),ee===ue.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[55]",onClick:Re=>{Re.stopPropagation(),W(null)}}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),a.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(Re=>a.jsxs("button",{onClick:nt=>{nt.stopPropagation(),De(ue.id,Re),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ue.status===Re?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",Re]},Re)),a.jsx("button",{onClick:Re=>{Re.stopPropagation(),C(ue),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ue.title}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ue.description,'"']}),ue.url&&a.jsx("div",{className:"mb-6",children:a.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",onClick:Re=>Re.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ue.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(bl,{className:"w-3 h-3"}):a.jsx(Qh,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[120px]",children:ue.url.length>30?`${ue.url.substring(0,30)}...`:ue.url}),a.jsx(Di,{className:"w-3 h-3"})]})}),ue.attachments&&Array.isArray(ue.attachments)&&ue.attachments.length>0&&a.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ue.attachments.map((Re,nt)=>Re.type==="image"&&Re.data?a.jsxs("button",{type:"button",onClick:xt=>{xt.stopPropagation(),le({src:Re.data,alt:Re.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(bl,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:Re.filename||"Screenshot"})]},nt):Re.type==="video"&&Re.data?a.jsxs("a",{href:Re.data,target:"_blank",rel:"noopener noreferrer",onClick:xt=>xt.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(Qh,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:Re.filename||"Video"}),a.jsx(Di,{className:"w-3 h-3"})]},nt):null)}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Pe?.name?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:Pe?.name||"Observer"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ue.createdAt).toLocaleDateString()})]})]}),a.jsx(os,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ue.id)})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:a.jsx(Fv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ue=>ue.type==="bug").length,icon:a.jsx(Dv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ue=>ue.status==="done").length,icon:a.jsx(Ji,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ue=>ue.status==="in-progress").length,icon:a.jsx(Os,{className:"w-4 h-4 text-blue-500"})}].map((ue,Pe)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ue.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ue.label}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:ue.value})]})]},Pe))})]}),s==="registry"&&a.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ji,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),a.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",a.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(ai,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),a.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:a.jsx(Yv,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),a.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:a.jsx(rD,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(V0,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:a.jsx(jd,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:a.jsx(eD,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:a.jsx(qB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:a.jsx(IB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:a.jsx(HB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:a.jsx(tU,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(JB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(ho,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(M9,{currentUser:e})}),s==="automation"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(j1e,{})}),K&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>le(null),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>le(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(ir,{className:"w-6 h-6"})}),a.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ue=>ue.stopPropagation()})]})}),w&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(vn,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),a.jsx("button",{onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(ir,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:de,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Dv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:a.jsx(Ji,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:a.jsx(Cj,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ue=>a.jsxs("button",{type:"button",onClick:()=>A({...P,type:ue.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${P.type===ue.id?`${ue.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ue.icon," ",ue.label]},ue.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:P.title,onChange:ue=>A({...P,title:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),a.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:P.description,onChange:ue=>A({...P,description:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N||!P.title||!P.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:N?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nu,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:()=>b(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(ir,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Ae(g.type,"w-8 h-8")}),a.jsxs("div",{children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${ye(g.type)}`,children:g.type}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[ve(g.status,"w-5 h-5"),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[a.jsx(ha,{className:"w-5 h-5 text-indigo-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(xo,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),he&&a.jsx("button",{type:"button",onClick:ce,disabled:O||H.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-3 h-3 animate-spin"})," Saving"]}):a.jsxs(a.Fragment,{children:[a.jsx(yn,{className:"w-3 h-3"})," Save Context"]})})]}),he?a.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[a.jsx("textarea",{rows:4,value:H,onChange:ue=>R(ue.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),a.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[a.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Vf,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:a.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(bl,{className:"w-4 h-4"}):a.jsx(Qh,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),a.jsx(Di,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(bl,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((ue,Pe)=>ue.type==="image"&&ue.data?a.jsxs("button",{type:"button",onClick:()=>le({src:ue.data,alt:ue.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(bl,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Screenshot"})]},Pe):ue.type==="video"&&ue.data?a.jsxs("a",{href:ue.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(Qh,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Video"}),a.jsx(Di,{className:"w-4 h-4"})]},Pe):null)})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wl,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[a.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(ue=>ue.id===g.userId)?.name?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-black text-slate-900",children:c.find(ue=>ue.id===g.userId)?.name||"Impact Member"}),a.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(ue=>ue.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),he&&a.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ue=>a.jsxs("button",{onClick:()=>De(g.id,ue),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[ve(ue,"w-3 h-3"),ue.replace("-"," ")]},ue))})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>C(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Ur,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>b(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(yn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),T.type&&T.item&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${T.type==="done"?"bg-emerald-50 text-emerald-600":T.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:T.type==="done"?a.jsx(yn,{className:"w-6 h-6"}):T.type==="in-execution"?a.jsx(Os,{className:"w-6 h-6"}):a.jsx(pd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:T.type==="done"?"Mark as Done?":T.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:T.type==="done"?"This will move the entry to Archive & Done":T.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:T.item.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:T.item.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>I({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Y,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${T.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":T.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:T.type==="done"?"Mark Done":T.type==="in-execution"?"Start Execution":"Archive"})]})]})}),B&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:B.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:B.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>C(null),disabled:E,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ne(B.id),disabled:E,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),q.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:q.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ue=>{if(ue.preventDefault(),ue.stopPropagation(),!he){n("Only admins can delete entries");return}if(q.length===0){n("No items selected");return}Q(!0)},disabled:Z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Z?a.jsx(wt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Ur,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>G([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(ir,{className:"w-5 h-5"})})]})]})}),ae&&q.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",q.length," Entr",q.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ue=>q.includes(ue.id)).slice(0,5).map(ue=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Ae(ue.type,"w-4 h-4"),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title}),a.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ue.type})]})]},ue.id)),q.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",q.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Q(!1),disabled:Z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),Ce()},disabled:Z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Z?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${q.length} Entr${q.length>1?"ies":"y"}`})]})]})})]})},S1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),[n,s]=U.useState([]),[i,o]=U.useState([]),[l,c]=U.useState([]),[u,f]=U.useState(null),[d,m]=U.useState(!0),[p,y]=U.useState(!1),[v,g]=U.useState([]),[b,w]=U.useState(!1),[j,N]=U.useState("select"),[S,P]=U.useState(""),[A,T]=U.useState(!1),[I,B]=U.useState(!1),[C,E]=U.useState([]),[M,q]=U.useState(!1),[G,Z]=U.useState(!1),[te,ae]=U.useState(!1),[Q,ee]=U.useState(!1),[W,O]=U.useState(!1),[z,H]=U.useState(!1),[R,K]=U.useState(""),[le,he]=U.useState(!1),ie=U.useRef(null),[ce,De]=U.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),ne=U.useCallback(async()=>{try{const Me=await D7(),vt=Me?.data||Me||[];c(Array.isArray(vt)?vt:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),Ue=U.useCallback(async()=>{m(!0);try{const Me=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Me){s([]),m(!1);return}const vt={userId:Me};v.length===1&&(vt.companyId=v[0]);const ut=await qne(vt);let lt=ut?.data||ut||[];lt=Array.isArray(lt)?lt:[],v.length>1&&(lt=lt.filter(pr=>v.includes(pr.companyId))),s(lt);try{const pr=await Od();o(pr?.data||pr||[])}catch(pr){console.error("[Expenses] Failed to fetch companies:",pr),o([])}}catch(Me){console.error("[Expenses] Error fetching expenses:",Me),r(Me.message||"Failed to load expenses"),s([])}finally{m(!1)}},[e,v,r]);U.useEffect(()=>{ne()},[ne]),U.useEffect(()=>{Ue()},[Ue]),U.useEffect(()=>{const Me=()=>Ue();return window.addEventListener("refresh-expenses",Me),()=>window.removeEventListener("refresh-expenses",Me)},[Ue]);const Ce=Me=>i.find(vt=>vt.id===Me),de=Me=>{switch(Me){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},Y=n,ve={totalExpenses:Y.reduce((Me,vt)=>Me+(vt.amount||0),0),pendingCount:Y.filter(Me=>Me.status==="Pending"||!Me.status).length,approvedCount:Y.filter(Me=>Me.status==="Approved").length,thisMonth:Y.filter(Me=>{const vt=new Date(Me.date),ut=new Date;return vt.getMonth()===ut.getMonth()&&vt.getFullYear()===ut.getFullYear()}).reduce((Me,vt)=>Me+(vt.amount||0),0)},ye=()=>{C.length===Y.length&&Y.length>0?E([]):E(Y.map(Me=>Me.id))},Ae=(Me,vt=1920,ut=1080,lt=.8)=>new Promise((pr,rr)=>{const ft=new FileReader;ft.onload=$t=>{const tr=new Image;tr.onload=()=>{let $e=tr.width,bt=tr.height;$e>bt?$e>vt&&(bt=bt*vt/$e,$e=vt):bt>ut&&($e=$e*ut/bt,bt=ut);const jr=document.createElement("canvas");jr.width=$e,jr.height=bt;const Yt=jr.getContext("2d");if(!Yt){rr(new Error("Failed to create canvas context"));return}Yt.drawImage(tr,0,0,$e,bt);const Fr=jr.toDataURL("image/jpeg",lt);pr(Fr)},tr.onerror=()=>rr(new Error("Failed to load image")),tr.src=$t.target?.result},ft.onerror=()=>rr(new Error("Failed to read file")),ft.readAsDataURL(Me)}),pe=async Me=>{const vt=Me.target.files?.[0];if(vt){if(!vt.type.startsWith("image/")&&!vt.type.includes("pdf")){r("Please select an image or PDF file");return}if(vt.size>10*1024*1024){r("File size must be less than 10MB");return}H(!0);try{if(vt.type.startsWith("image/")){const ut=await Ae(vt,1920,1080,.8);K(ut),De(lt=>({...lt,receiptFile:vt}))}else{const ut=new FileReader;ut.onload=()=>{K(ut.result),De(lt=>({...lt,receiptFile:vt}))},ut.readAsDataURL(vt)}}catch(ut){r(ut.message||"Failed to process receipt")}finally{H(!1)}}},ue=async Me=>{if(Me.preventDefault(),!ce.companyId||!ce.title||!ce.amount||!ce.category||!ce.date){r("Please fill in all required fields");return}O(!0);try{const vt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let ut="",lt="",pr="";ce.receiptFile&&(ce.receiptFile.type.startsWith("image/"),ut=R,lt=ce.receiptFile.name,pr=ce.receiptFile.type),await $ne({companyId:ce.companyId,title:ce.title,amount:parseFloat(ce.amount),category:ce.category,date:new Date(ce.date).toISOString(),description:ce.description,status:ce.status,receiptUrl:ut||void 0,receiptFilename:lt||void 0,receiptMimeType:pr||void 0,userId:vt}),t("Expense added successfully"),ee(!1),De({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value=""),Ue(),window.dispatchEvent(new Event("refresh-expenses"))}catch(vt){r(vt.message||"Failed to add expense")}finally{O(!1)}},Pe=async()=>{if(S.trim()){T(!0);try{const Me=await L7({name:S.trim()});if(Me?.data){const vt=Me.data;c(ut=>[...ut,vt]),De(ut=>({...ut,category:vt.name})),P(""),w(!1),t("Category added successfully")}}catch(Me){Me.message?.includes("already exists")||Me.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(Me.message||"Failed to add category")}finally{T(!1)}}},Ne=async(Me,vt)=>{he(!0);try{await zne(Me,{status:vt}),s(ut=>ut.map(lt=>lt.id===Me?{...lt,status:vt}:lt)),u&&u.id===Me&&f({...u,status:vt}),t(`Expense status updated to ${vt}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(ut){r(ut.message||"Failed to update expense status")}finally{he(!1)}},Re=async()=>{if(u){y(!0);try{await HP(u.id),s(Me=>Me.filter(vt=>vt.id!==u.id)),f(null),ae(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(Me){r(Me.message||"Failed to delete expense")}finally{y(!1)}}},nt=async()=>{const Me=[...C];if(Me.length!==0){q(!0),Z(!1);try{await Promise.all(Me.map(vt=>HP(vt))),s(vt=>vt.filter(ut=>!Me.includes(ut.id))),E([]),t(`Successfully deleted ${Me.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{q(!1)}}},xt=Me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Me),kt=Me=>new Date(Me).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(wt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{N("manage"),w(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[a.jsx(Es,{className:"w-4 h-4"}),"Manage Categories"]}),a.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[a.jsx(vn,{className:"w-5 h-5"}),"Add Expense"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:xt(ve.totalExpenses),icon:a.jsx(ff,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:ve.pendingCount.toString(),icon:a.jsx(Os,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:ve.approvedCount.toString(),icon:a.jsx(jl,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:xt(ve.thisMonth),icon:a.jsx(ha,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((Me,vt)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("div",{className:`p-2 rounded-lg ${Me.color}`,children:Me.icon})}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:Me.label}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:Me.value})]},vt))}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sx,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),a.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[a.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(Me=>Me.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),a.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",Y.length," expense(s)"]})]}),C.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-sm font-black",children:C.length})}),a.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),a.jsx("div",{className:"w-px h-6 bg-white/20"}),a.jsx("button",{onClick:()=>Z(!0),disabled:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:M?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"DELETE"]})}),a.jsx("button",{onClick:()=>E([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:a.jsx(ir,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`lg:col-span-2 space-y-4 ${u?"lg:pr-6":""}`,children:[Y.length>0&&a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:C.length===Y.length&&Y.length>0,onChange:ye,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),Y.length===0?a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[a.jsx(Ij,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),a.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[a.jsx(vn,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):Y.map(Me=>{const vt=Ce(Me.companyId),ut=C.includes(Me.id);return a.jsxs("div",{onClick:()=>f(Me),className:`bg-white rounded-2xl border ${ut?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${u?.id===Me.id?"ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:ut,onChange:lt=>{lt.stopPropagation(),E(pr=>ut?pr.filter(rr=>rr!==Me.id):[...pr,Me.id])},onClick:lt=>lt.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),a.jsx(ni,{src:vt?.logo,fallbackText:vt?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:Me.title}),a.jsx("p",{className:"text-sm text-slate-500 truncate",children:vt?.name||"Unknown Company"})]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-4",children:[a.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:xt(Me.amount)}),a.jsxs("select",{value:Me.status||"Pending",onChange:lt=>{lt.stopPropagation(),Ne(Me.id,lt.target.value)},onClick:lt=>lt.stopPropagation(),disabled:le,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${de(Me.status||"Pending")} ${le?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Es,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:Me.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ha,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:kt(Me.date)})]}),Me.receiptUrl&&a.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[a.jsx(Ka,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),Me.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:Me.description}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:lt=>{lt.stopPropagation(),f(Me)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",a.jsx(os,{className:"w-3 h-3"})]}),a.jsx("button",{onClick:lt=>{lt.stopPropagation(),f(Me),ae(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},Me.id)})]}),u&&a.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),a.jsx("p",{className:"text-lg font-black text-slate-900",children:u.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ni,{src:Ce(u.companyId)?.logo,fallbackText:Ce(u.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ce(u.companyId)?.name||"Unknown"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),a.jsx("p",{className:"text-2xl font-black text-indigo-600",children:xt(u.amount)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),a.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:u.category})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsxs("select",{value:u.status||"Pending",onChange:Me=>{const vt=Me.target.value;Ne(u.id,vt)},disabled:le,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${de(u.status||"Pending")} ${le?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]}),le&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(wt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:kt(u.date)})]}),u.description&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:u.description})]}),u.receiptUrl&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),a.jsx("div",{className:"space-y-2",children:u.receiptMimeType?.startsWith("image/")?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:u.receiptUrl,alt:u.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Me=window.open();Me&&Me.document.write(`<img src="${u.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx(wd,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):a.jsxs("a",{href:u.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[a.jsx(Ka,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:u.receiptFilename||"Receipt"}),a.jsx(H0,{className:"w-4 h-4 text-slate-400"})]})})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsx("button",{onClick:()=>{f(u),ae(!0)},disabled:p,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),Q&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Ij,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),a.jsx("button",{onClick:()=>{ee(!1),De({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(ir,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:ue,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),a.jsxs("select",{required:!0,value:ce.companyId,onChange:Me=>De({...ce,companyId:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"",children:"Select Company"}),i.map(Me=>a.jsx("option",{value:Me.id,children:Me.name},Me.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:ce.title,onChange:Me=>De({...ce,title:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),a.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:ce.amount,onChange:Me=>De({...ce,amount:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),a.jsxs("button",{type:"button",onClick:()=>{N("select"),w(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${ce.category?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:ce.category||"Select Category"}),a.jsx(os,{className:"w-4 h-4 text-slate-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),a.jsx("input",{required:!0,type:"date",value:ce.date,onChange:Me=>De({...ce,date:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),a.jsxs("select",{value:ce.status,onChange:Me=>De({...ce,status:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{rows:3,placeholder:"Additional details...",value:ce.description,onChange:Me=>De({...ce,description:Me.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),a.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:z?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):R?a.jsx(bl,{className:"w-5 h-5"}):a.jsx(Wu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:R?ce.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),a.jsx("input",{ref:ie,type:"file",accept:"image/*,.pdf",onChange:pe,disabled:z,className:"hidden"})]}),R&&ce.receiptFile?.type.startsWith("image/")&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:R,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),R&&ce.receiptFile?.type.includes("pdf")&&a.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[a.jsx(Ka,{className:"w-8 h-8 text-red-600 shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-red-900",children:ce.receiptFile.name}),a.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),a.jsx("button",{type:"button",onClick:()=>{K(""),De(Me=>({...Me,receiptFile:null})),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:a.jsx(ir,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{ee(!1),De({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:W||z,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),te&&u&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:u.title}),a.jsxs("p",{className:"text-xs text-slate-500",children:[xt(u.amount),"  ",Ce(u.companyId)?.name||"Unknown"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{ae(!1),f(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Re,disabled:p,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),b&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),a.jsx("button",{onClick:()=>{w(!1),P("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Es,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(Me=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Es,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:Me.name})]}),a.jsx(yn,{className:"w-5 h-5 text-emerald-600"})]},Me.id)):l.map(Me=>a.jsxs("button",{type:"button",onClick:()=>{De({...ce,category:Me.name}),w(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${ce.category===Me.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:Me.name}),ce.category===Me.name?a.jsx(yn,{className:"w-5 h-5 text-indigo-600"}):a.jsx(bd,{className:"w-5 h-5 text-slate-300"})]},Me.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:Me=>P(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&S.trim()&&!A&&(Me.preventDefault(),Pe())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Pe,disabled:!S.trim()||A,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),a.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(Me=>a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:v.includes(Me.id),onChange:vt=>{vt.target.checked?g(ut=>[...ut,Me.id]):g(ut=>ut.filter(lt=>lt!==Me.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx(ni,{src:Me.logo,fallbackText:Me.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:Me.name})]},Me.id))]})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(ir,{className:"w-4 h-4"}),"Clear All"]}),a.jsxs("button",{onClick:()=>{B(!1),Ue()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),G&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-8 border-b border-slate-100",children:a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Ur,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",C.length," Expense(s)?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:nt,disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},_1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),[n,s]=U.useState([]),[i,o]=U.useState([]),[l,c]=U.useState([]),[u,f]=U.useState(new Date().getFullYear()),[d,m]=U.useState(""),[p,y]=U.useState(null),[v,g]=U.useState(!0),[b,w]=U.useState(!1),[j,N]=U.useState("yearly"),[S,P]=U.useState(!1),[A,T]=U.useState(!1),[I,B]=U.useState(null),[C,E]=U.useState(!1),[M,q]=U.useState(!1),[G,Z]=U.useState(null),[te,ae]=U.useState(!1),[Q,ee]=U.useState(""),[W,O]=U.useState(!1),[z,H]=U.useState({year:new Date().getFullYear(),department:"",categories:[]}),R=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,le=Array.from({length:5},(pe,ue)=>new Date().getFullYear()-2+ue),he=U.useCallback(async()=>{try{const ue=(await Xne())?.data||[];o(Array.isArray(ue)?ue:[])}catch(pe){console.error("[BUDGET] Error fetching departments:",pe)}},[]),ie=U.useCallback(async()=>{try{const ue=(await D7())?.data||[];c(Array.isArray(ue)?ue:[])}catch(pe){console.error("[BUDGET] Error fetching categories:",pe)}},[]),ce=U.useCallback(async()=>{g(!0);try{const pe={year:u};d&&(pe.department=d),console.log("[Budget] Fetching budgets with params:",pe);const Pe=(await Hne(pe))?.data||[];console.log("[Budget] Received budgets:",Pe),s(Array.isArray(Pe)?Pe:[])}catch(pe){console.error("[Budget] Error fetching budgets:",pe),r(pe.message||"Failed to load budgets")}finally{g(!1)}},[u,d,r]),De=U.useCallback(async()=>{w(!0);try{const pe={year:u};d&&(pe.department=d),console.log("[Budget] Fetching tracking with params:",pe);const ue=await Kne(pe);console.log("[Budget] Received tracking:",ue?.data),y(ue?.data||null)}catch(pe){console.error("[Budget] Error fetching tracking:",pe),y(null)}finally{w(!1)}},[u,d]);U.useEffect(()=>{he(),ie()},[he,ie]),U.useEffect(()=>{ce(),De()},[ce,De]);const ne=()=>{H({year:u,department:d,categories:l.map(pe=>({categoryId:pe.id,categoryName:pe.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},Ue=async()=>{if(Q.trim()){O(!0);try{const pe=await L7({name:Q.trim()});if(pe?.data){const ue=pe.data;c(Pe=>[...Pe,ue]),ee(""),t("Category added successfully"),ie()}}catch(pe){pe.message?.includes("already exists")||pe.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(pe.message||"Failed to add category")}finally{O(!1)}}},Ce=async()=>{if(!K){r("User not found");return}if(z.categories.length===0){r("Please add at least one category");return}if(z.categories.reduce((ue,Pe)=>ue+Pe.yearlyBudget,0)===0){r("Total budget cannot be zero");return}E(!0);try{await Wne({year:z.year,department:z.department||null,categories:z.categories,createdBy:K}),t("Budget created successfully"),P(!1),ce(),De()}catch(ue){r(ue.message||"Failed to create budget")}finally{E(!1)}},de=async()=>{if(!(!I||!K)){E(!0);try{await Vne(I.id,{categories:z.categories,updatedBy:K}),t("Budget updated successfully"),T(!1),B(null),ce(),De()}catch(pe){r(pe.message||"Failed to update budget")}finally{E(!1)}}},Y=async pe=>{q(!0);try{await Gne(pe.id),t("Budget deleted successfully"),Z(null),ce(),De()}catch(ue){r(ue.message||"Failed to delete budget")}finally{q(!1)}},ve=pe=>pe>=1e6?`$${(pe/1e6).toFixed(1)}M`:pe>=1e3?`$${(pe/1e3).toFixed(1)}k`:`$${pe.toLocaleString()}`,ye=pe=>pe>=100?"text-red-600":pe>=80?"text-amber-600":"text-emerald-600",Ae=pe=>pe>=100?"bg-red-500":pe>=80?"bg-amber-500":"bg-emerald-500";return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),R&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>ae(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(Es,{className:"w-4 h-4"})," Manage Categories"]}),a.jsxs("button",{onClick:()=>{ne(),P(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(vn,{className:"w-4 h-4"})," Create Budget"]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),a.jsx("select",{value:u,onChange:pe=>f(parseInt(pe.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:le.map(pe=>a.jsx("option",{value:pe,children:pe},pe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:d,onChange:pe=>m(pe.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),a.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(pe=>a.jsx("button",{onClick:()=>N(pe),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===pe?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:pe},pe))})]})]})}),!v&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:p&&p.hasBudget!==!1?"Current Budget":"Available Budgets"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[n.length," budget",n.length!==1?"s":""," for selected filters"]})]}),p&&p.hasBudget!==!1&&R&&a.jsxs("button",{onClick:()=>{const pe=n[0];B(pe),H({year:pe.year,department:pe.department||"",categories:pe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),T(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"})," Edit Budget"]})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:n.map(pe=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[pe.year," ",pe.department&&`- ${pe.department}`]}),!pe.department&&a.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),a.jsx("p",{className:"text-lg font-black text-indigo-600",children:ve(pe.totalBudget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),a.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[pe.categories.length," configured"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"N/A"})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[a.jsx(os,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:pe.categories.map(ue=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.categoryName}),a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",a.jsx("span",{className:"font-black",children:ve(ue.yearlyBudget)})]})]},ue.categoryId))})]})})]}),R&&!(p&&p.hasBudget!==!1)&&a.jsxs("button",{onClick:()=>{B(pe),H({year:pe.year,department:pe.department||"",categories:pe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),T(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"})," View/Edit"]})]})},pe.id))})]}),p&&p.hasBudget!==!1&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:a.jsx(ff,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:ve(p.totalBudget)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:a.jsx(jd,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:ve(p.totalSpent)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${p.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:p.totalRemaining>=0?a.jsx(yn,{className:"w-5 h-5 text-emerald-600"}):a.jsx(ea,{className:"w-5 h-5 text-red-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),a.jsx("h3",{className:`text-2xl font-black ${p.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:ve(Math.abs(p.totalRemaining))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:a.jsx(qm,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),a.jsxs("h3",{className:`text-2xl font-black ${ye(p.totalPercentUsed)}`,children:[p.totalPercentUsed.toFixed(1),"%"]})]})]}),p&&p.isOverBudget&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[a.jsx(s0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),a.jsxs("p",{className:"text-sm text-red-700",children:["You are ",a.jsx("span",{className:"font-black",children:ve(p.overBudgetAmount)})," over budget (",p.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!p||p.hasBudget===!1)&&a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(eD,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:R?`No budget has been set for ${u}${d?` - ${d}`:""}. Create one to start tracking.`:`No budget available for ${u}${d?` - ${d}`:""}.`}),R&&a.jsxs("button",{onClick:()=>{ne(),P(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(vn,{className:"w-4 h-4"})," Create Budget"]})]}),p&&p.hasBudget!==!1&&p.categories&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),a.jsx("div",{className:"divide-y divide-slate-100",children:p.categories.map(pe=>a.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:pe.categoryName}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",a.jsx("span",{className:"font-black text-slate-900",children:ve(pe.yearlyBudget)})]}),a.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",a.jsx("span",{className:"font-black text-slate-900",children:ve(pe.yearlySpent)})]}),a.jsxs("span",{className:`font-black ${ye(pe.yearlyPercentUsed)}`,children:[pe.yearlyPercentUsed.toFixed(1),"%"]})]})]}),pe.isOverBudget&&a.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",ve(pe.overBudgetAmount)]})]}),a.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[a.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Ae(pe.yearlyPercentUsed)}`,style:{width:`${Math.min(pe.yearlyPercentUsed,100)}%`}}),pe.yearlyPercentUsed>100&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&a.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((ue,Pe)=>{const Ne=pe.quarters[ue];return a.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[a.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Pe+1]}),a.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[a.jsx("span",{className:"font-black text-slate-900",children:ve(Ne.spent)})," "," / ",ve(Ne.budget)]}),a.jsxs("p",{className:`text-xs font-black mt-1 ${ye(Ne.percentUsed)}`,children:[Ne.percentUsed.toFixed(0),"%"]})]},ue)})})]},pe.categoryId))})]}),S&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(ff,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",z.year]})]})]}),a.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{value:z.year,onChange:pe=>H(ue=>({...ue,year:parseInt(pe.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:le.map(pe=>a.jsx("option",{value:pe,children:pe},pe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:z.department,onChange:pe=>H(ue=>({...ue,department:pe.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(Es,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),a.jsx("div",{className:"space-y-4",children:z.categories.map((pe,ue)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:pe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:pe.yearlyBudget||"",onChange:Pe=>{const Ne=[...z.categories];Ne[ue].yearlyBudget=parseFloat(Pe.target.value)||0,H(Re=>({...Re,categories:Ne}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Pe,Ne)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ne+1]}),a.jsx("input",{type:"number",value:pe[Pe]||"",onChange:Re=>{const nt=[...z.categories];nt[ue][Pe]=parseFloat(Re.target.value)||0,H(xt=>({...xt,categories:nt}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Pe))]})]},pe.categoryId))}),a.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:ve(z.categories.reduce((pe,ue)=>pe+ue.yearlyBudget,0))})]})})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>P(!1),disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Ce,disabled:C,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),A&&I&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{T(!1),B(null)}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(bc,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",I.year,I.department&&` - ${I.department}`]})]})]}),a.jsx("button",{onClick:()=>{T(!1),B(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-4",children:[z.categories.map((pe,ue)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:pe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:pe.yearlyBudget||"",onChange:Pe=>{const Ne=[...z.categories];Ne[ue].yearlyBudget=parseFloat(Pe.target.value)||0,H(Re=>({...Re,categories:Ne}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Pe,Ne)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ne+1]}),a.jsx("input",{type:"number",value:pe[Pe]||"",onChange:Re=>{const nt=[...z.categories];nt[ue][Pe]=parseFloat(Re.target.value)||0,H(xt=>({...xt,categories:nt}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Pe))]})]},pe.categoryId)),a.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:ve(z.categories.reduce((pe,ue)=>pe+ue.yearlyBudget,0))})]})})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsxs("button",{onClick:()=>Z(I),disabled:C,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4"})," Delete"]}),a.jsx("button",{onClick:()=>{T(!1),B(null)},disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:de,disabled:C,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),G&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Z(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(s0,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",G.year,G.department&&` - ${G.department}`,"? This action cannot be undone."]})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>Z(null),disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:()=>Y(G),disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),te&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),a.jsx("button",{onClick:()=>{ae(!1),ee("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Es,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(pe=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Es,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:pe.name})]}),a.jsx(yn,{className:"w-5 h-5 text-emerald-600"})]},pe.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:Q,onChange:pe=>ee(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&Q.trim()&&!W&&(pe.preventDefault(),Ue())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ue,disabled:!Q.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},J8=["Draft","Pending Signature","Signed","Expired","Terminated"],A1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),[n,s]=U.useState([]),[i,o]=U.useState([]),[l,c]=U.useState([]),[u,f]=U.useState([]),[d,m]=U.useState(null),[p,y]=U.useState(!0),[v,g]=U.useState(!1),[b,w]=U.useState(!1),[j,N]=U.useState(""),[S,P]=U.useState(""),[A,T]=U.useState(""),[I,B]=U.useState(!1),[C,E]=U.useState(!1),[M,q]=U.useState(!1),[G,Z]=U.useState(!1),te=U.useRef(null),[ae,Q]=U.useState(!1),[ee,W]=U.useState(!1),[O,z]=U.useState(!1),[H,R]=U.useState(!1),[K,le]=U.useState(!1),[he,ie]=U.useState(""),[ce,De]=U.useState(!1),[ne,Ue]=U.useState([]),[Ce,de]=U.useState(!1),[Y,ve]=U.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),ye=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Ae=U.useCallback(async()=>{y(!0);try{if(!ye){s([]),y(!1);return}const[$e,bt,jr,Yt]=await Promise.all([F7({userId:ye}),Od(),Jp(),eae()]);s($e?.data||[]),o(bt?.data||[]),c(jr?.data||[]),f(Yt?.data||[])}catch($e){r($e.message||"Failed to load contracts")}finally{y(!1)}},[ye,r]);U.useEffect(()=>{Ae()},[Ae]);const pe=async()=>{if(d){de(!0);try{const $e=await F3("contract",d.id);Ue($e?.data||[])}catch($e){console.error("[CONTRACTS] Failed to fetch contract activities:",$e),Ue([])}finally{de(!1)}}};U.useEffect(()=>{d?pe():Ue([])},[d?.id]),U.useEffect(()=>{(async()=>{if(ye)try{await WP({userId:ye}),z(!0)}catch{z(!1)}})()},[ye]);const ue=async()=>{if(!ye){r("User not authenticated");return}R(!0);try{let $e;try{$e=await WP({userId:ye})}catch(Cr){throw Cr.message?.includes("Failed to fetch")||Cr.message?.includes("ERR_CONNECTION_REFUSED")||Cr.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Cr}const{accessToken:bt,apiKey:jr}=$e?.data||{};if(!bt)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",bt?"Present":"Missing"),console.log("Google Picker - API Key:",jr?`Present (${jr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",$e?.data),await new Promise((Cr,lr)=>{let Ut=0;const wr=50,Er=setInterval(()=>{Ut++,window.google&&window.google.picker?(clearInterval(Er),Cr()):Ut>=wr&&(clearInterval(Er),lr(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Yt=window.google.picker;new Yt.PickerBuilder().setOAuthToken(bt).setCallback(Cr=>{R(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Cr,null,2)),console.log("Google Picker Response Action:",Cr[Yt.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:Yt.Action.PICKED,CANCEL:Yt.Action.CANCEL}),Cr[Yt.Response.ACTION]===Yt.Action.PICKED){const lr=Cr[Yt.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",lr),console.log("Google Picker - Number of documents:",lr?.length),lr&&lr.length>0){const Ut=lr[0];console.log("Google Picker - Selected file data:",JSON.stringify(Ut,null,2)),console.log("Google Picker - File ID:",Ut.id),console.log("Google Picker - File Name:",Ut.name),console.log("Google Picker - File MIME Type:",Ut.mimeType),console.log("Google Picker - File URL:",Ut.url),console.log("Google Picker - File Service ID:",Ut.serviceId),Pe(Ut)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Cr[Yt.Response.ACTION]!==Yt.Action.CANCEL){const lr=Cr[Yt.Response.ERROR];lr&&(console.error("Google Picker Error:",lr),console.error("Error details:",JSON.stringify(Cr,null,2)),lr===Yt.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):lr===Yt.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):lr===Yt.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${lr}. Check browser console for details.`))}}catch(lr){console.error("Error handling picker callback:",lr),r("Failed to process selected file")}}).addView(Yt.ViewId.DOCS).enableFeature(Yt.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch($e){R(!1),console.error("Google Drive Picker Error:",$e),$e.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):$e.message?.includes("not connected")||$e.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):$e.message?.includes("Failed to fetch")||$e.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r($e.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Pe=async $e=>{if(ye){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify($e,null,2)),console.log("File data from Google Picker:",{id:$e.id,name:$e.name,url:$e.url,iconUrl:$e.iconUrl,mimeType:$e.mimeType,serviceId:$e.serviceId,type:$e.type,sizeBytes:$e.sizeBytes});try{const bt=$e.url||$e.embedUrl||"",jr=$e.iconUrl||"",Yt=$e.sizeBytes?parseInt($e.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:$e.id,publicUrl:bt,iconUrl:jr,fileName:$e.name,fileMimeType:$e.mimeType}),ve(Fr=>({...Fr,isGoogleDriveLinked:!0,googleDriveFileId:$e.id,googleDriveWebViewLink:bt,googleDriveDownloadLink:bt,googleDriveIconUrl:jr,fileName:$e.name||"Untitled",fileMimeType:$e.mimeType||"",fileSize:Yt,fileUrl:bt,file:null})),t("File attached from Google Drive")}catch(bt){console.error("Error handling Google Drive file selection:",bt),r(bt.message||"Failed to attach file from Google Drive")}}},Ne=async()=>{if(he.trim()){De(!0);try{const $e=await tae({name:he.trim()});if($e?.data){const bt=$e.data;f(jr=>[...jr,bt]),ie(""),t("Document type added successfully")}}catch($e){$e.message?.includes("already exists")||$e.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r($e.message||"Failed to add document type")}finally{De(!1)}}},Re=$e=>{const bt=$e.target.files?.[0];if(!bt)return;if(bt.size>10*1024*1024){r("File size must be less than 10MB");return}Z(!0);const jr=new FileReader;jr.onload=()=>{const Yt=jr.result;ve(Fr=>({...Fr,file:bt,fileUrl:Yt,fileName:bt.name,fileMimeType:bt.type,fileSize:bt.size})),Z(!1)},jr.onerror=()=>{r("Failed to read file"),Z(!1)},jr.readAsDataURL(bt)},nt=async()=>{if(!Y.fileUrl||!ye){r("Please select a file first");return}Q(!0);try{const $e=await rae({fileName:Y.fileName,fileContent:Y.fileUrl,fileMimeType:Y.fileMimeType,userId:ye});ve(bt=>({...bt,isGoogleDriveLinked:!0,googleDriveFileId:$e.data.id,googleDriveWebViewLink:$e.data.webViewLink,googleDriveDownloadLink:$e.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch($e){r($e.message||"Failed to upload to Google Drive")}finally{Q(!1)}},xt=async($e,bt)=>{W(!0);try{const jr=await nae({contractId:$e,userId:ye,title:bt});t("Signature document created in Google Docs"),Ae(),window.open(jr.data.documentLink,"_blank")}catch(jr){r(jr.message||"Failed to create signature document")}finally{W(!1)}},kt=async()=>{if(!Y.title||!Y.documentType||!Y.contractParty){r("Please fill in all required fields");return}q(!0);try{await Yne({title:Y.title,documentType:Y.documentType,contractParty:Y.contractParty,companyId:Y.companyId||null,contactId:Y.contactId||null,expirationDate:Y.expirationDate||null,renewalDate:Y.renewalDate||null,signedDate:Y.signedDate||null,status:Y.status,description:Y.description||null,tags:Y.tags,requiresSignature:Y.requiresSignature,signatureStatus:Y.requiresSignature?"Pending":"Not Required",fileUrl:Y.fileUrl||null,fileName:Y.fileName||null,fileMimeType:Y.fileMimeType||null,fileSize:Y.fileSize||null,isGoogleDriveLinked:Y.isGoogleDriveLinked,googleDriveFileId:Y.googleDriveFileId||null,googleDriveWebViewLink:Y.googleDriveWebViewLink||null,googleDriveDownloadLink:Y.googleDriveDownloadLink||null,googleDriveIconUrl:Y.googleDriveIconUrl||null,userId:ye}),t("Contract created successfully"),B(!1),lt(),Ae()}catch($e){r($e.message||"Failed to create contract")}finally{q(!1)}},Me=async()=>{if(d){q(!0);try{await Jne(d.id,{title:Y.title,documentType:Y.documentType,contractParty:Y.contractParty,companyId:Y.companyId||null,contactId:Y.contactId||null,expirationDate:Y.expirationDate||null,renewalDate:Y.renewalDate||null,signedDate:Y.signedDate||null,status:Y.status,description:Y.description||null,tags:Y.tags,requiresSignature:Y.requiresSignature,fileUrl:Y.fileUrl||null,fileName:Y.fileName||null,fileMimeType:Y.fileMimeType||null,fileSize:Y.fileSize||null,isGoogleDriveLinked:Y.isGoogleDriveLinked,googleDriveFileId:Y.googleDriveFileId||null,googleDriveWebViewLink:Y.googleDriveWebViewLink||null,googleDriveDownloadLink:Y.googleDriveDownloadLink||null,googleDriveIconUrl:Y.googleDriveIconUrl||null}),t("Contract updated successfully"),E(!1),m(null),lt(),Ae()}catch($e){r($e.message||"Failed to update contract")}finally{q(!1)}}},vt=async()=>{if(d){g(!0);try{await Qne(d.id),t("Contract deleted successfully"),w(!1),m(null),Ae()}catch($e){r($e.message||"Failed to delete contract")}finally{g(!1)}}},ut=async $e=>{try{await Zne($e.id,{signedBy:ye,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Ae()}catch(bt){r(bt.message||"Failed to mark contract as signed")}},lt=()=>{ve({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),te.current&&(te.current.value="")},pr=$e=>{m($e),ve({title:$e.title,documentType:$e.documentType,contractParty:$e.contractParty,companyId:$e.companyId||"",contactId:$e.contactId||"",expirationDate:$e.expirationDate||"",renewalDate:$e.renewalDate||"",signedDate:$e.signedDate||"",status:$e.status,description:$e.description||"",tags:$e.tags||[],requiresSignature:$e.requiresSignature,file:null,fileUrl:$e.fileUrl||"",fileName:$e.fileName||"",fileMimeType:$e.fileMimeType||"",fileSize:$e.fileSize||0,isGoogleDriveLinked:$e.isGoogleDriveLinked,googleDriveFileId:$e.googleDriveFileId||"",googleDriveWebViewLink:$e.googleDriveWebViewLink||"",googleDriveDownloadLink:$e.googleDriveDownloadLink||"",googleDriveIconUrl:$e.googleDriveIconUrl||""}),E(!0)},rr=$e=>{switch($e){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},ft=$e=>{switch($e){case"Signed":return a.jsx(yn,{className:"w-4 h-4"});case"Pending Signature":return a.jsx(Os,{className:"w-4 h-4"});case"Draft":return a.jsx(Ka,{className:"w-4 h-4"});case"Expired":return a.jsx(ea,{className:"w-4 h-4"});case"Terminated":return a.jsx(ir,{className:"w-4 h-4"});default:return a.jsx(Ka,{className:"w-4 h-4"})}},$t=n.filter($e=>{const bt=$e.title.toLowerCase().includes(j.toLowerCase())||$e.contractParty.toLowerCase().includes(j.toLowerCase())||$e.documentType.toLowerCase().includes(j.toLowerCase()),jr=!S||$e.status===S,Yt=!A||$e.documentType===A;return bt&&jr&&Yt}),tr={total:n.length,signed:n.filter($e=>$e.status==="Signed").length,pending:n.filter($e=>$e.status==="Pending Signature").length,expired:n.filter($e=>$e.status==="Expired").length};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>le(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(Es,{className:"w-4 h-4"})," Manage Document Types"]}),a.jsxs("button",{onClick:()=>{lt(),B(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(vn,{className:"w-4 h-4"})," Add Contract"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ka,{className:"w-5 h-5 text-indigo-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:tr.total})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(yn,{className:"w-5 h-5 text-emerald-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),a.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:tr.signed})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Os,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),a.jsx("h3",{className:"text-2xl font-black text-amber-600",children:tr.pending})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(ea,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),a.jsx("h3",{className:"text-2xl font-black text-red-600",children:tr.expired})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Hu,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:j,onChange:$e=>N($e.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("select",{value:S,onChange:$e=>P($e.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),J8.map($e=>a.jsx("option",{value:$e,children:$e},$e))]}),a.jsxs("select",{value:A,onChange:$e=>T($e.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Types"}),u.map($e=>a.jsx("option",{value:$e.name,children:$e.name},$e.id))]})]})}),p?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(wt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):$t.length===0?a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(Ka,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||A?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!A&&a.jsxs("button",{onClick:()=>{lt(),B(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(vn,{className:"w-4 h-4"})," Add Contract"]})]}):a.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:$t.map($e=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>m($e),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-base font-black text-slate-900",children:$e.title}),a.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${rr($e.status)} flex items-center gap-1`,children:[ft($e.status),$e.status]}),$e.isGoogleDriveLinked&&a.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[$e.googleDriveIconUrl?a.jsx("img",{src:$e.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:bt=>{bt.target.style.display="none"}}):a.jsx(hm,{className:"w-3 h-3"}),"Drive"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(Es,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:$e.documentType})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(wl,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:$e.contractParty})]}),$e.expirationDate&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(ha,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"font-medium",children:["Expires: ",new Date($e.expirationDate).toLocaleDateString()]})]}),$e.requiresSignature&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(Lv,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:$e.signatureStatus})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[$e.googleDriveWebViewLink&&a.jsx("a",{href:$e.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:bt=>bt.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:a.jsx(Di,{className:"w-4 h-4"})}),a.jsx("button",{onClick:bt=>{bt.stopPropagation(),pr($e)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(bc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:bt=>{bt.stopPropagation(),m($e),w(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]})},$e.id))})}),(I||C)&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{B(!1),E(!1),lt()}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Ka,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:I?"Add Contract":"Edit Contract"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:I?"Create a new contract with metadata and documents":"Update contract details"})]})]}),a.jsx("button",{onClick:()=>{B(!1),E(!1),lt()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Y.title,onChange:$e=>ve(bt=>({...bt,title:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:Y.documentType,onChange:$e=>ve(bt=>({...bt,documentType:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"Select type"}),u.map($e=>a.jsx("option",{value:$e.name,children:$e.name},$e.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Y.contractParty,onChange:$e=>ve(bt=>({...bt,contractParty:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),a.jsxs("select",{value:Y.companyId,onChange:$e=>ve(bt=>({...bt,companyId:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),i.map($e=>a.jsx("option",{value:$e.id,children:$e.name},$e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),a.jsxs("select",{value:Y.contactId,onChange:$e=>ve(bt=>({...bt,contactId:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),l.map($e=>a.jsx("option",{value:$e.id,children:$e.name},$e.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),a.jsx("input",{type:"date",value:Y.expirationDate,onChange:$e=>ve(bt=>({...bt,expirationDate:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),a.jsx("input",{type:"date",value:Y.renewalDate,onChange:$e=>ve(bt=>({...bt,renewalDate:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),a.jsx("input",{type:"date",value:Y.signedDate,onChange:$e=>ve(bt=>({...bt,signedDate:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsx("select",{value:Y.status,onChange:$e=>ve(bt=>({...bt,status:$e.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:J8.map($e=>a.jsx("option",{value:$e,children:$e},$e))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Y.requiresSignature,onChange:$e=>ve(bt=>({...bt,requiresSignature:$e.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("textarea",{value:Y.description,onChange:$e=>ve(bt=>({...bt,description:$e.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(I||C)&&a.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(Wu,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),a.jsx("input",{ref:te,type:"file",onChange:Re,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!Y.fileUrl&&!Y.isGoogleDriveLinked?a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>te.current?.click(),disabled:G,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:G?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wu,{className:"w-4 h-4"}),"Choose File"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-px bg-slate-200"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),a.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),a.jsx("button",{onClick:ue,disabled:!O||H,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:H?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(hm,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[Y.isGoogleDriveLinked&&Y.googleDriveIconUrl?a.jsx("img",{src:Y.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:$e=>{$e.target.style.display="none";const bt=document.createElement("div");bt.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',$e.target.parentNode?.appendChild(bt)}}):Y.isGoogleDriveLinked?a.jsx(hm,{className:"w-5 h-5 text-blue-600"}):a.jsx(RB,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Y.fileName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Y.fileSize>0&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(Y.fileSize/1024).toFixed(1)," KB"]}),Y.isGoogleDriveLinked&&a.jsxs(a.Fragment,{children:[Y.fileSize>0&&a.jsx("span",{className:"text-slate-300",children:""}),a.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),a.jsx("button",{onClick:()=>{ve($e=>({...$e,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),te.current&&(te.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(ir,{className:"w-4 h-4"})})]}),!Y.isGoogleDriveLinked&&Y.fileUrl&&a.jsx("button",{onClick:nt,disabled:ae,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ae?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(hm,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),Y.isGoogleDriveLinked&&Y.googleDriveWebViewLink&&a.jsxs("a",{href:Y.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[Y.googleDriveIconUrl?a.jsx("img",{src:Y.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:$e=>{$e.target.style.display="none"}}):a.jsx(Di,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>{B(!1),E(!1),lt()},disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:I?kt:Me,disabled:M,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),I?"Creating...":"Updating..."]}):a.jsx(a.Fragment,{children:I?"Create Contract":"Update Contract"})})]})]})})]}),d&&!C&&!b&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:d.title}),a.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${rr(d.status)} flex items-center gap-1`,children:[ft(d.status),d.status]})]}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[d.documentType," - ",d.contractParty]})]}),a.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(ir,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.expirationDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.expirationDate).toLocaleDateString()})]}),d.renewalDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.renewalDate).toLocaleDateString()})]}),d.signedDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.signedDate).toLocaleDateString()})]})]}),d.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),(d.fileUrl||d.isGoogleDriveLinked)&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),a.jsxs("div",{className:"space-y-2",children:[d.fileName&&a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.isGoogleDriveLinked&&d.googleDriveIconUrl?a.jsx("img",{src:d.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:$e=>{$e.target.style.display="none"}}):a.jsx(Ka,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.fileName}),d.fileSize&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(d.fileSize/1024).toFixed(1)," KB"]})]})]}),d.fileUrl&&a.jsx("a",{href:d.fileUrl,download:d.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(H0,{className:"w-4 h-4"})})]}),d.isGoogleDriveLinked&&d.googleDriveWebViewLink&&a.jsx("a",{href:d.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(hm,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),a.jsx(Di,{className:"w-4 h-4 text-blue-600"})]})})]})]}),d.requiresSignature&&a.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Lv,{className:"w-5 h-5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),a.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",a.jsx("span",{className:"font-black",children:d.signatureStatus})]}),d.googleDocsSignatureLink?a.jsx("a",{href:d.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):a.jsx("button",{onClick:()=>xt(d.id,d.title),disabled:ee,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ee?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lv,{className:"w-4 h-4"}),"Create Signature Document"]})}),d.status!=="Signed"&&a.jsxs("button",{onClick:()=>ut(d),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[a.jsx(yn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(af,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Ce?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(wt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):ne.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(ai,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:ne.map(($e,bt)=>{const jr=new Date($e.createdAt),Fr=new Date().getTime()-jr.getTime(),Cr=Math.floor(Fr/(1e3*60*60*24));let lr="";Cr===0?lr="Today":Cr===1?lr="Yesterday":Cr<7?lr=`${Cr} days ago`:Cr<30?lr=`${Math.floor(Cr/7)} week${Math.floor(Cr/7)>1?"s":""} ago`:lr=`${Math.floor(Cr/30)} month${Math.floor(Cr/30)>1?"s":""} ago`;const Ut=$e.activityType==="email_linked",wr=Ut?"border-indigo-600":"border-slate-200",Er=Ut?"bg-indigo-600":"bg-slate-300",Yr=Ut?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${wr} shadow-xl flex items-center justify-center`,children:Ut?a.jsx(ai,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${Er}`})}),a.jsxs("p",{className:`text-[10px] font-black ${Yr} uppercase mb-1 tracking-widest`,children:[Ut?"Email Linked":$e.activityType||"Activity","  ",lr]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:$e.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:$e.description||$e.title}),$e.emailId&&a.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${$e.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Di,{className:"w-3 h-3"})," View Email"]})]},$e.id||bt)})})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>m(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),a.jsxs("button",{onClick:()=>{pr(d)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(bc,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),b&&d&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(ea,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-black",children:d.title}),"?"]}),a.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>w(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:vt,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),a.jsx("button",{onClick:()=>{le(!1),ie("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ka,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):u.map($e=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Ka,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:$e.name})]}),a.jsx(yn,{className:"w-5 h-5 text-emerald-600"})]},$e.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New document type...",value:he,onChange:$e=>ie($e.target.value),onKeyDown:$e=>{$e.key==="Enter"&&he.trim()&&!ce&&($e.preventDefault(),Ne())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ne,disabled:!he.trim()||ce,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ce?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},C1e=({onLogin:e})=>{const[t,r]=U.useState("initial"),[n,s]=U.useState(""),[i,o]=U.useState(["","","","","",""]),[l,c]=U.useState(!1),[u,f]=U.useState(null),d=U.useRef([]),m=async()=>{if(!n||!n.includes("@")){f("Please enter a valid email address");return}c(!0),f(null);try{const w=await LP({email:n});if(w?.status===404)throw new Error(w.message);f(null),o(["","","","","",""]),r("verify")}catch(w){console.error("[AUTH UI] Error caught:",w),w.message&&(w.message.includes("Account not found")||w.status===404)?f("Account not found - contact your Administrator"):f(w.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},p=async()=>{const w=i.join("");if(w.length===6){if(!/^\d{6}$/.test(w)){f("OTP must contain only numbers");return}c(!0),f(null);try{const j=await ine({email:n,verificationCode:w});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?f("Account not found - contact your Administrator"):f(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>d.current[0]?.focus(),100)}finally{c(!1)}}},y=(w,j)=>{if(j&&!/^\d$/.test(j))return;const N=[...i];N[w]=j,o(N),u&&f(null),j&&w<5&&d.current[w+1]?.focus(),j&&w===5&&N.every(S=>S!=="")&&setTimeout(()=>p(),100)},v=(w,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const N=[...i];i[w]?N[w]="":w>0&&(N[w-1]="",d.current[w-1]?.focus()),o(N),u&&f(null)}else j.key==="Enter"?(j.preventDefault(),p()):j.key==="ArrowLeft"&&w>0?(j.preventDefault(),d.current[w-1]?.focus()):j.key==="ArrowRight"&&w<5&&(j.preventDefault(),d.current[w+1]?.focus())},g=w=>{w.preventDefault();const j=w.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),N=[...i];for(let P=0;P<6;P++)N[P]=j[P]||"";o(N),u&&f(null);const S=N.findIndex(P=>P==="");d.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>p(),100)};U.useEffect(()=>{t==="verify"?setTimeout(()=>d.current[0]?.focus(),100):o(["","","","","",""])},[t]);const b=w=>{w.preventDefault(),t==="initial"?m():p()};return a.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),a.jsxs("div",{className:"flex flex-col items-center mb-10",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),a.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-5",children:[u&&a.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(ea,{className:"w-4 h-4 shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[u,u.includes("Administrator")&&a.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ai,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),a.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:n,onChange:w=>s(w.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),a.jsx("p",{className:"text-sm font-semibold text-white",children:n})]}),a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),a.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((w,j)=>a.jsx("input",{ref:N=>{d.current[j]=N},type:"text",inputMode:"numeric",maxLength:1,value:w,onChange:N=>y(j,N.target.value),onKeyDown:N=>v(j,N),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:async()=>{f(null),o(["","","","","",""]),c(!0);try{await LP({email:n}),f(null),setTimeout(()=>d.current[0]?.focus(),100)}catch(w){f(w.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),a.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),f(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),a.jsx("button",{disabled:l||t==="verify"&&i.some(w=>w===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",a.jsx(ho,{className:"w-4 h-4"})]})})]}),a.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx(yd,{className:"w-5 h-5 text-slate-700"}),a.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[a.jsx("p",{children:"Access restricted to authorized personnel."}),a.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[a.jsx("a",{href:"/help",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),a.jsx("span",{className:"text-slate-600",children:""}),a.jsx("a",{href:"/privacy-policy",onClick:w=>{w.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},E1e=({children:e,onUserLoaded:t})=>{const[r,n]=U.useState(!0),[s,i]=U.useState(!1);return U.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),n(!1);return}if(c)try{const u=JSON.parse(c);t(u),i(!0),n(!1),FP().then(f=>{const d=f.data||f,m=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(d)!==JSON.stringify(m)&&(localStorage.setItem("user_data",JSON.stringify(d)),t(d))}).catch(f=>{console.warn("Session expired:",f),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const u=await FP(),f=u.data||u;localStorage.setItem("user_data",JSON.stringify(f)),t(f),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{n(!1)}})()},[t]),r?a.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[a.jsx(wt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),a.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?a.jsx(a.Fragment,{children:e}):a.jsx(C1e,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},T1e=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:n,isRefreshing:s=!1,onClose:i,onViewAll:o})=>{e.filter(u=>!u.read);const l=u=>{switch(u){case"lead":return a.jsx(Uu,{className:"w-4 h-4 text-blue-500"});case"deal":return a.jsx(xo,{className:"w-4 h-4 text-indigo-500"});case"task":return a.jsx(jl,{className:"w-4 h-4 text-emerald-500"});case"payment":return a.jsx(s0,{className:"w-4 h-4 text-red-500"});default:return a.jsx(ix,{className:"w-4 h-4 text-slate-400"})}},c=u=>{switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";default:return"bg-slate-50"}};return a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(gy,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[n&&a.jsx("button",{onClick:n,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:a.jsx(Nd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),a.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?a.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>a.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{t(u.id),u.link&&(u.link.startsWith("/?tab=")||u.link.startsWith("/"),window.location.href=u.link)},children:[a.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${c(u.type)}`,children:l(u.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),a.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),a.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):a.jsxs("div",{className:"p-12 text-center text-slate-400",children:[a.jsx(Ad,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),a.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),a.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:a.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Iv=20,O1e=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=ba(),[s,i]=U.useState([]),[o,l]=U.useState(!0),[c,u]=U.useState(!1),[f,d]=U.useState(1),[m,p]=U.useState(1),[y,v]=U.useState(0),[g,b]=U.useState(!1),w=U.useCallback(async(q=!1)=>{try{const G=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!G?.id)return;q?u(!0):l(!0);const Z=await E7(G.id,500),te=Z?.data||Z||[],ae=(Array.isArray(te)?te:[]).map(Q=>{let ee="Just now";if(Q.createdAt){const W=new Date(Q.createdAt),z=new Date().getTime()-W.getTime(),H=Math.floor(z/6e4),R=Math.floor(z/36e5),K=Math.floor(z/864e5);H<1?ee="Just now":H<60?ee=`${H}m ago`:R<24?ee=`${R}h ago`:K<7?ee=`${K}d ago`:ee=W.toLocaleDateString()}return{id:Q.id,userId:Q.userId,type:Q.type||"system",title:Q.title,message:Q.message,timestamp:ee,read:!!Q.read,link:Q.link||void 0}});i(ae),v(ae.length),p(Math.ceil(ae.length/Iv))}catch(G){console.error("[NOTIFICATIONS] Failed to load notifications",G),n(G.message||"Failed to load notifications")}finally{l(!1),u(!1)}},[e,n]);U.useEffect(()=>{w(!1)},[w]),U.useEffect(()=>{d(1)},[g]),U.useEffect(()=>{const q=()=>{w(!0)};return window.addEventListener("refresh-notifications",q),()=>{window.removeEventListener("refresh-notifications",q)}},[w]);const j=async q=>{try{const G=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!G?.id)return;await T7(q,G.id),i(Z=>Z.map(te=>te.id===q?{...te,read:!0}:te)),window.dispatchEvent(new Event("refresh-notifications"))}catch(G){console.error("[NOTIFICATIONS] Failed to mark as read",G),n(G.message||"Failed to mark notification as read")}},N=async()=>{try{const q=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!q?.id)return;await O7(q.id),i(G=>G.map(Z=>({...Z,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(q){console.error("[NOTIFICATIONS] Failed to mark all as read",q),n(q.message||"Failed to mark all notifications as read")}},S=(q,G)=>{if(q==="note-marked"||G?.toLowerCase().includes("marked"))return a.jsx(Uu,{className:"w-5 h-5 text-indigo-500"});if(G?.toLowerCase().includes("pipeline"))return a.jsx(jd,{className:"w-5 h-5 text-purple-500"});switch(q){case"lead":return a.jsx(Uu,{className:"w-5 h-5 text-blue-500"});case"deal":return a.jsx(xo,{className:"w-5 h-5 text-indigo-500"});case"task":return a.jsx(jl,{className:"w-5 h-5 text-emerald-500"});case"payment":return a.jsx(s0,{className:"w-5 h-5 text-red-500"});default:return a.jsx(ix,{className:"w-5 h-5 text-slate-400"})}},P=(q,G)=>{if(q==="note-marked"||G?.toLowerCase().includes("marked"))return"bg-indigo-50";if(G?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(q){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";default:return"bg-slate-50"}},A=q=>{if(j(q.id),q.link)if(q.link.startsWith("/?tab=")){const Z=new URL(q.link,window.location.origin).searchParams.get("tab");Z&&t?t(Z):window.location.href=q.link}else q.link.startsWith("/"),window.location.href=q.link},T=g?s.filter(q=>q.type==="note-marked"||q.title?.toLowerCase().includes("marked")):s,I=(f-1)*Iv,B=I+Iv,C=T.slice(I,B),E=T.filter(q=>!q.read).length,M=Math.ceil(T.length/Iv);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx(gy,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:E>0?`${E} unread notification${E!==1?"s":""}`:"All caught up!"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>b(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[a.jsx(Uu,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),a.jsxs("button",{onClick:()=>w(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[a.jsx(Nd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),E>0&&a.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(Nd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):T.length===0?a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[a.jsx(Ad,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),a.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:C.map(q=>a.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${q.read?"":"bg-indigo-50/30"}`,onClick:()=>A(q),children:[a.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${P(q.type,q.title)}`,children:S(q.type,q.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[a.jsx("p",{className:`text-sm font-semibold ${q.read?"text-slate-600":"text-slate-900 font-bold"}`,children:q.title}),a.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 font-medium",children:q.timestamp}),!q.read&&a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),a.jsx("p",{className:`text-sm ${q.read?"text-slate-400":"text-slate-600"}`,children:q.message})]})]},q.id))})}),M>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:I+1})," to"," ",a.jsx("span",{className:"font-semibold",children:Math.min(B,T.length)})," of"," ",a.jsx("span",{className:"font-semibold",children:T.length})," notifications"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(q=>Math.max(1,q-1)),disabled:f===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Aj,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:M},(q,G)=>G+1).map(q=>q===1||q===m||q>=f-1&&q<=f+1?a.jsx("button",{onClick:()=>d(q),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${f===q?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:q},q):q===f-2||q===f+2?a.jsx("span",{className:"px-2 text-slate-400",children:"..."},q):null)}),a.jsx("button",{onClick:()=>d(q=>Math.min(M,q+1)),disabled:f===M,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(os,{className:"w-5 h-5"})})]})]})]})]})},zf=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const n=r[1].toLowerCase().trim();return n.includes(".")?n:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const n=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return n.includes(".")?n:null}catch{const n=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return n&&n.includes(".")?n:null}},P1e=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return 1;const s=r.length,i=n.length;if(s===0||i===0)return 0;const o=[];for(let u=0;u<=s;u++)o[u]=[u];for(let u=0;u<=i;u++)o[0][u]=u;for(let u=1;u<=s;u++)for(let f=1;f<=i;f++){const d=r[u-1]===n[f-1]?0:1;o[u][f]=Math.min(o[u-1][f]+1,o[u][f-1]+1,o[u-1][f-1]+d)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},I1e=(e,t)=>{const r=[];if(!e.email)return r;const n=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===n&&r.push({record:s,matchType:"exact",confidence:1})}),r},D1e=(e,t,r=.8)=>{const n=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=P1e(e.name||"",s.name||"");i>=r&&n.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),n},L1e=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],F1e=({type:e,stage:t,lockedType:r,onClose:n,onSuccess:s})=>{const[i,o]=U.useState(e),[l,c]=U.useState("form"),[u,f]=U.useState(!1),[d,m]=U.useState(null),[p,y]=U.useState({}),[v,g]=U.useState([]),[b,w]=U.useState([]),[j,N]=U.useState([]),[S,P]=U.useState([]),[A,T]=U.useState([]),[I,B]=U.useState(!1),[C,E]=U.useState(!1),[M,q]=U.useState(""),G=U.useRef(null),[Z,te]=U.useState(null),[ae,Q]=U.useState(!1),[ee,W]=U.useState(""),[O,z]=U.useState(null),H=U.useRef(null),[R,K]=U.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:wi,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});U.useEffect(()=>{const de={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(de.lineItems=[{description:"",quantity:1,rate:0,amount:0}],de.currency=wi):(de.lineItems=[],e!=="deal"&&(de.currency=wi)),K(Y=>({...Y,...de})),m(null),y({}),c("form"),B(!1),W(""),z(null),H.current&&(H.current.value="")},[e,t]),U.useEffect(()=>{(async()=>{try{const ve=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[ye,Ae,pe,ue]=await Promise.all([Td(),Od(),Jp(),Qp(ve)]);N(ye.data||[]),g(Ae.data||[]),w(pe.data||[]);const Pe=Array.isArray(ue)?ue:ue?.data||[];if(P(Pe.filter(Ne=>!Ne.archived)),i==="task")try{const Ne=await X1(),Re=Array.isArray(Ne?.data)?Ne.data:[];T(Re)}catch{T([])}else T([]);ve&&K(Ne=>({...Ne,ownerId:Ne.ownerId||ve,assigneeId:Ne.assigneeId||ve}))}catch(Y){console.error("[QUICK-CREATE] Data fetch failed:",Y)}})()},[i]),U.useEffect(()=>{const de=Y=>{G.current&&!G.current.contains(Y.target)&&(E(!1),q(""))};if(C)return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[C]);const le=L1e.filter(de=>de.toLowerCase().includes(M.toLowerCase())),he=(de,Y=1200,ve=1200,ye=.8)=>new Promise((Ae,pe)=>{const ue=new FileReader;ue.onload=Pe=>{const Ne=new Image;Ne.onload=()=>{let Re=Ne.width,nt=Ne.height;Re>nt?Re>Y&&(nt=nt*Y/Re,Re=Y):nt>ve&&(Re=Re*ve/nt,nt=ve);const xt=document.createElement("canvas");xt.width=Re,xt.height=nt;const kt=xt.getContext("2d");kt?(kt.drawImage(Ne,0,0,Re,nt),Ae(xt.toDataURL("image/jpeg",ye))):pe(new Error("Canvas context not available"))},Ne.onerror=()=>pe(new Error("Failed to load image")),Ne.src=Pe.target?.result},ue.onerror=()=>pe(new Error("Failed to read file")),ue.readAsDataURL(de)}),ie=async de=>{const Y=de.target.files?.[0];if(Y){if(!Y.type.startsWith("image/")){m("Please select an image file");return}if(Y.size>10*1024*1024){m("Image size must be less than 10MB");return}try{const ve=await he(Y,1200,1200,.8);W(ve),z(Y),m(null)}catch(ve){m(ve.message||"Failed to process image")}}},ce=()=>{W(""),z(null),H.current&&(H.current.value=""),n()},De=()=>{const de={};if(i==="contact")R.name?.trim()||(de.name="Full Name is required"),R.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R.email)||(de.email="Please enter a valid email address"):de.email="Email Address is required";else if(i==="company"){R.name?.trim()||(de.name="Company Name is required"),(!R.region||R.region.trim()==="")&&(de.region="Region is required"),R.ownerId?.trim()||(de.ownerId="Assignee / Lead is required");let Y=R.domain;!Y&&R.website&&(Y=zf(R.website)||""),!Y&&R.email&&(Y=zf(R.email)||""),(!Y||Y.trim()==="")&&(de.domain="Domain is required (can be auto-populated from website or email)",de.website="Add website or email to auto-populate domain")}else if(i==="deal")R.title?.trim()||(de.title="Deal Name is required"),R.companyId?.trim()||(de.companyId="Organization is required"),(!R.value||parseFloat(R.value)<=0)&&(de.value="Amount is required and must be greater than $0"),R.stage?.trim()||(de.stage="Stage is required"),R.ownerId||(de.ownerId="Assignee / Lead is required");else if(i==="project"){if(R.title?.trim()||(de.title="Project Name is required"),R.engagement?.trim()||(de.engagement="Engagement is required"),R.startDate?.trim()||(de.startDate="Start Date is required"),R.endDate?.trim()||(de.endDate="End Date is required"),R.startDate&&R.endDate){const Y=new Date(R.startDate),ve=new Date(R.endDate);!isNaN(Y.getTime())&&!isNaN(ve.getTime())&&Y>=ve&&(de.endDate="End Date must be after Start Date")}R.ownerId||(de.ownerId="Assignee / Lead is required")}else i==="task"?(R.title?.trim()||(de.title="Task Title is required"),R.assigneeId||(de.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(R.companyId||(de.companyId="Client (Organization) is required"),(!R.expectedCloseDate||R.expectedCloseDate.trim()==="")&&(de.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!R.lineItems||R.lineItems.length===0?de.lineItems="At least one line item is required":(R.lineItems.forEach((ve,ye)=>{(!ve.description||!ve.description.trim())&&(de[`lineItem_${ye}_description`]=`Line item ${ye+1}: Description is required`),(!ve.quantity||ve.quantity<=0)&&(de[`lineItem_${ye}_quantity`]=`Line item ${ye+1}: Quantity must be greater than 0`),(!ve.rate||ve.rate<=0)&&(de[`lineItem_${ye}_rate`]=`Line item ${ye+1}: Rate must be greater than 0`)}),R.lineItems.reduce((ve,ye)=>{const Ae=ye.amount||ye.rate*ye.quantity||0;return ve+Ae},0)<=0&&(de.lineItems="Total amount must be greater than $0")));return y(de),Object.keys(de).length===0},ne=async de=>{if(de.preventDefault(),u)return;if(m(null),!De()){f(!1);return}f(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,R);try{const ye=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Ae={name:R.name,email:R.email},pe=I1e(Ae,b),ue=D1e(Ae,b,.8);if(pe.length>0||ue.length>0){const Pe=new Map,Ne=new Set;pe.forEach(nt=>{const xt=nt.record,kt=xt.id||xt.email?.toLowerCase().trim()||"";kt&&!Pe.has(kt)&&(Pe.set(kt,{...xt,matchType:"exact",matchReason:"email"}),xt.email&&Ne.add(xt.email.toLowerCase().trim()))}),ue.forEach(nt=>{const xt=nt.record,kt=xt.id||xt.email?.toLowerCase().trim()||"",Me=xt.email?.toLowerCase().trim();kt&&!Pe.has(kt)&&(!Me||!Ne.has(Me))&&(Pe.set(kt,{...xt,matchType:"fuzzy",matchReason:"name",similarity:nt.similarity}),Me&&Ne.add(Me))});const Re=Array.from(Pe.values());te({open:!0,duplicates:Re,newContact:{name:R.name,email:R.email,companyId:R.companyId||void 0,role:R.role,phone:R.phone,linkedin:R.linkedin||void 0}}),f(!1);return}await MP({name:R.name,companyId:R.companyId||void 0,role:R.role,email:R.email,phone:R.phone,linkedin:R.linkedin||void 0})}else if(i==="company"){let Ae=R.domain;!Ae&&R.website&&(Ae=zf(R.website)||void 0),!Ae&&R.email&&(Ae=zf(R.email)||void 0);const pe={name:R.name?.trim(),industry:R.industry?.trim(),region:R.region?.trim()||"",website:R.website?.trim()||void 0,email:R.email?.trim()||void 0,domain:Ae||"",linkedin:R.linkedin?.trim()||void 0,ownerId:R.ownerId||ye};if(!pe.region){y({region:"Region is required"}),f(!1);return}if(!pe.domain){y({domain:"Domain is required (can be auto-populated from website or email)"}),f(!1);return}await pne(pe)}else if(i==="deal"){if(!R.companyId||R.companyId.trim()===""){y({companyId:"Organization is required"}),f(!1);return}if(!R.value||parseFloat(R.value)<=0){y({value:"Amount is required and must be greater than $0"}),f(!1);return}if(!R.stage||R.stage.trim()===""){y({stage:"Stage is required"}),f(!1);return}await mne({title:R.title,companyId:R.companyId.trim(),value:parseFloat(R.value),currency:R.currency||wi,stage:R.stage,pipelineType:"sales",ownerId:R.ownerId,expectedCloseDate:R.expectedCloseDate||void 0,description:R.description||void 0})}else if(i==="project"){const Ae={};if(R.title?.trim()||(Ae.title="Project Name is required"),R.engagement?.trim()||(Ae.engagement="Engagement is required"),R.startDate?.trim()||(Ae.startDate="Start Date is required"),R.endDate?.trim()||(Ae.endDate="End Date is required"),R.ownerId?.trim()||(Ae.ownerId="Assignee / Lead is required"),R.startDate&&R.endDate){const ue=new Date(R.startDate),Pe=new Date(R.endDate);!isNaN(ue.getTime())&&!isNaN(Pe.getTime())&&ue>=Pe&&(Ae.endDate="End Date must be after Start Date")}if(Object.keys(Ae).length>0){y(Ae),f(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:R.title,engagement:R.engagement,startDate:R.startDate,endDate:R.endDate,ownerId:R.ownerId});const pe={title:R.title.trim(),engagement:R.engagement.trim(),startDate:R.startDate,endDate:R.endDate,companyId:R.companyId&&R.companyId.trim()!==""?R.companyId:void 0,status:R.status,ownerId:R.ownerId,projectManager:R.ownerId,progress:0,description:R.description||void 0};ee&&O&&(pe.noteImage=ee,pe.noteImageName=O.name,pe.noteImageMimeType=O.type),console.debug("[QUICK-CREATE] Project payload:",pe),await gne(pe)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:R.title,assigneeId:R.assigneeId});const Ae={title:R.title,projectId:R.projectId||void 0,description:R.description||void 0,dueDate:R.expectedCloseDate||void 0,priority:R.priority,status:"Todo",assigneeId:R.assigneeId,category:R.category&&R.category.trim()?R.category.trim():void 0};if(ee||R.description){const pe=JSON.parse(localStorage.getItem("user_data")||"{}"),ue={id:`note_${Date.now()}`,userId:ye||pe.id,userName:pe.name||"Unknown User",text:R.description||"",createdAt:new Date().toISOString()};ee&&O&&(ue.imageUrl=ee,ue.imageName=O.name,ue.imageMimeType=O.type),Ae.notes=[ue]}await _7(Ae),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Ae={};if(R.companyId?.trim()||(Ae.companyId="Client (Organization) is required"),R.expectedCloseDate?.trim()||(Ae.expectedCloseDate="Due Date is required"),(!R.lineItems||R.lineItems.length===0)&&(Ae.lineItems="At least one line item is required"),R.lineItems&&R.lineItems.length>0&&R.lineItems.forEach((Pe,Ne)=>{(!Pe.description||!Pe.description.trim())&&(Ae[`lineItem_${Ne}_description`]=`Line item ${Ne+1}: Description is required`),(!Pe.quantity||Pe.quantity<=0)&&(Ae[`lineItem_${Ne}_quantity`]=`Line item ${Ne+1}: Quantity must be greater than 0`),(!Pe.rate||Pe.rate<=0)&&(Ae[`lineItem_${Ne}_rate`]=`Line item ${Ne+1}: Rate must be greater than 0`)}),Object.keys(Ae).length>0){y(Ae),f(!1);return}const pe=R.lineItems.map(Pe=>({description:Pe.description.trim(),quantity:Pe.quantity,rate:Pe.rate,amount:Pe.amount||Pe.rate*Pe.quantity})),ue=pe.reduce((Pe,Ne)=>Pe+(Ne.amount||0),0);if(ue<=0){y({lineItems:"At least one line item with a valid amount is required"}),f(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:R.companyId,amount:ue,dueDate:R.expectedCloseDate,lineItemsCount:pe.length,lineItems:pe,name:R.name,description:R.description}),await yne({companyId:R.companyId,amount:ue,currency:R.currency||wi,dueDate:R.expectedCloseDate,description:R.name||R.description||"",lineItems:pe,items:pe,status:"Draft",userId:ye||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),z(null),H.current&&(H.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{n()},1500)}catch(ve){if(console.error("[QUICK-CREATE] Deployment failed:",ve),console.error("[QUICK-CREATE] Error details:",{message:ve.message,code:ve.code,status:ve.status,details:ve.details,type:i}),ve.code==="DUPLICATE_DETECTED"&&ve.duplicates&&i==="contact"){const ye=new Map;ve.duplicates.forEach(pe=>{if(pe.id)if(!ye.has(pe.id))ye.set(pe.id,pe);else{const ue=ye.get(pe.id);pe.matchType==="exact"&&ue.matchType!=="exact"&&ye.set(pe.id,pe)}});const Ae=Array.from(ye.values());te({open:!0,duplicates:Ae,newContact:{name:R.name,email:R.email,companyId:R.companyId||void 0,role:R.role,phone:R.phone,linkedin:R.linkedin||void 0}}),f(!1);return}if(ve.code==="VALIDATION_ERROR"||ve.details&&ve.details.errors){const ye={};(ve.details?.errors||(ve.message?[ve.message]:[])).forEach(pe=>{const ue=pe.toLowerCase();if(ue.includes("name")||ue.includes("title"))ye.title=pe;else if(ue.includes("industry"))ye.industry=pe;else if(ue.includes("region"))ye.region=pe;else if(ue.includes("domain"))ye.domain=pe;else if(ue.includes("email"))ye.email=pe;else if(ue.includes("engagement"))ye.engagement=pe;else if(ue.includes("start date")||ue.includes("startdate"))ye.startDate=pe;else if(ue.includes("end date")||ue.includes("enddate"))ye.endDate=pe;else if(ue.includes("project manager")||ue.includes("manager"))ye.ownerId=pe;else if(ue.includes("assignee")||ue.includes("lead")||ue.includes("owner"))ye.ownerId=pe;else if(ue.includes("client")||ue.includes("company"))ye.companyId=pe;else if(ue.includes("due date")||ue.includes("duedate"))ye.expectedCloseDate=pe;else if(ue.includes("line item")){const Pe=ue.match(/line item (\d+):\s*(.+)/);if(Pe){const Ne=parseInt(Pe[1])-1,Re=Pe[2];Re.includes("description")?ye[`lineItem_${Ne}_description`]=pe:Re.includes("quantity")?ye[`lineItem_${Ne}_quantity`]=pe:(Re.includes("rate")||Re.includes("amount"))&&(ye[`lineItem_${Ne}_rate`]=pe)}else ye.lineItems=pe}else ue.includes("amount")&&!ue.includes("line item")&&(ye.lineItems=pe)}),Object.keys(ye).length>0?(y(ye),m("Please correct the validation errors below")):m(ve.message||"Validation failed. Please check all required fields.")}else m(ve.message||"Operational error. Verify mandatory fields and team authorization.");f(!1)}},Ue=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Ce=()=>a.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?a.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[a.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:a.jsx(yn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):a.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&a.jsx(yd,{className:"w-6 h-6"}),i==="project"&&a.jsx(Zf,{className:"w-6 h-6"}),i==="task"&&a.jsx(jl,{className:"w-6 h-6"}),i==="invoice"&&a.jsx(Ka,{className:"w-6 h-6"}),i==="contact"&&a.jsx(wl,{className:"w-6 h-6"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:Ue()}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"Workspace Update"})]})]}),a.jsx("button",{onClick:ce,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(ir,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:ne,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&a.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(de=>a.jsx("button",{type:"button",onClick:()=>o(de),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===de?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:de},de))}),d&&Object.keys(p).length===0&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(ea,{className:"w-5 h-5 shrink-0"}),a.jsx("span",{children:d})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",a.jsx(Ce,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?R.title:R.name,onChange:de=>{const Y=i==="deal"||i==="project"||i==="task"?"title":"name";K(ve=>({...ve,[Y]:de.target.value})),p[Y]&&y(ve=>{const ye={...ve};return delete ye[Y],ye})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.title||p.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(p.title||p.name)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.title||p.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&a.jsx(Ce,{})]}),a.jsxs("select",{required:i==="deal"||i==="invoice",value:R.companyId,onChange:de=>{K(Y=>({...Y,companyId:de.target.value})),p.companyId&&y(Y=>{const ve={...Y};return delete ve.companyId,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(de=>a.jsx("option",{value:de.id,children:de.name},de.id))]}),p.companyId&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.companyId]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",a.jsx(Ce,{})]}),a.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:R.email,onChange:de=>{K(Y=>({...Y,email:de.target.value})),p.email&&y(Y=>{const ve={...Y};return delete ve.email,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.email]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),a.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:R.role,onChange:de=>K(Y=>({...Y,role:de.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),a.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:R.phone,onChange:de=>K(Y=>({...Y,phone:de.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),a.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:R.industry,onChange:de=>{K(Y=>({...Y,industry:de.target.value})),p.industry&&y(Y=>{const ve={...Y};return delete ve.industry,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.industry&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.industry]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2 relative",ref:G,children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>{E(!C),C||q("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${p.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${R.region?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:R.region||"Select Region"}),a.jsx(xl,{className:`w-4 h-4 text-slate-400 transition-transform ${C?"rotate-180":""}`})]}),C&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search regions...",value:M,onChange:de=>q(de.target.value),onClick:de=>de.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:le.length>0?le.map(de=>a.jsx("button",{type:"button",onClick:()=>{const Y=de.trim();K(ve=>({...ve,region:Y})),E(!1),q(""),y(ve=>{const ye={...ve};return delete ye.region,ye}),m(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${R.region===de?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:de},de)):a.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),p.region&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.region]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),a.jsx("input",{type:"url",placeholder:"https://www.example.com",value:R.website,onChange:de=>{const Y=de.target.value;K(ve=>{const ye={...ve,website:Y},Ae=Y?zf(Y):null,pe=ve.email?zf(ve.email):null;return ye.domain=Ae||pe||"",ye}),(p.domain||p.website)&&y(ve=>{const ye={...ve};return delete ye.domain,delete ye.website,ye})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.website&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.website]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),a.jsx("input",{type:"email",placeholder:"contact@company.com",value:R.email,onChange:de=>{const Y=de.target.value;K(ve=>{const ye={...ve,email:Y},Ae=ve.website?zf(ve.website):null,pe=Y?zf(Y):null;return ye.domain=Ae||pe||"",ye}),(p.email||p.domain)&&y(ve=>{const ye={...ve};return delete ye.email,delete ye.domain,ye})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.email]})]}),i==="company"&&R.domain&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",a.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),a.jsx("input",{type:"text",value:R.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${p.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),p.domain&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.domain]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),a.jsxs("select",{value:R.projectId||"",onChange:de=>{const Y=de.target.value;K(ve=>({...ve,projectId:Y===""?"":Y}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),S.map(de=>a.jsx("option",{value:de.id,children:de.title},de.id))]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3.5 h-3.5"})," Task Category"]}),a.jsxs("select",{value:I?"__new__":R.category||"",onChange:de=>{const Y=de.target.value;Y==="__new__"?(B(!0),K(ve=>({...ve,category:""}))):(B(!1),K(ve=>({...ve,category:Y})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),A.map(de=>a.jsx("option",{value:de,children:de},de)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),I&&a.jsx("div",{className:"pt-1",children:a.jsx("input",{type:"text",value:R.category,onChange:de=>K(Y=>({...Y,category:de.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Assignee / Lead ",a.jsx(Ce,{})]}),a.jsxs("select",{required:!0,value:i==="task"?R.assigneeId:R.ownerId,onChange:de=>{const Y=i==="task"?"assigneeId":"ownerId";K(ve=>({...ve,[Y]:de.target.value})),p[Y]&&y(ve=>{const ye={...ve};return delete ye[Y],ye})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${p.ownerId||p.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[a.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(de=>a.jsx("option",{value:de.id,children:de.name},de.id))]}),(p.ownerId||p.assigneeId)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.ownerId||p.assigneeId]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"relative w-32",children:a.jsx("select",{value:R.currency||wi,onChange:de=>{K(Y=>({...Y,currency:de.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Rp.map(de=>a.jsxs("option",{value:de.code,children:[de.code," (",de.symbol,")"]},de.code))})}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:Jd(R.currency)}),a.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:R.value,onChange:de=>{K(Y=>({...Y,value:de.target.value})),p.value&&y(Y=>{const ve={...Y};return delete ve.value,ve})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${p.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),p.value&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.value]})]}),i==="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),a.jsx("div",{className:"relative w-full",children:a.jsx("select",{value:R.currency||wi,onChange:de=>{K(Y=>({...Y,currency:de.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Rp.map(de=>a.jsxs("option",{value:de.code,children:[de.code," (",de.symbol,")"]},de.code))})})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"space-y-3",children:[R.lineItems.map((de,Y)=>a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",Y+1]}),R.lineItems.length>1&&a.jsx("button",{type:"button",onClick:()=>{const ve=R.lineItems.filter((ye,Ae)=>Ae!==Y);K(ye=>({...ye,lineItems:ve})),y(ye=>{const Ae={...ye};return delete Ae[`lineItem_${Y}_description`],delete Ae[`lineItem_${Y}_quantity`],delete Ae[`lineItem_${Y}_rate`],Ae})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Item description",value:de.description,onChange:ve=>{const ye=[...R.lineItems];ye[Y]={...ye[Y],description:ve.target.value},K(Ae=>({...Ae,lineItems:ye})),p[`lineItem_${Y}_description`]&&y(Ae=>{const pe={...Ae};return delete pe[`lineItem_${Y}_description`],pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Y}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Y}_description`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Y}_description`]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:de.quantity||"",onChange:ve=>{const ye=parseFloat(ve.target.value)||0,Ae=de.rate||0,pe=[...R.lineItems];pe[Y]={...pe[Y],quantity:ye,amount:ye*Ae},K(ue=>({...ue,lineItems:pe})),p[`lineItem_${Y}_quantity`]&&y(ue=>{const Pe={...ue};return delete Pe[`lineItem_${Y}_quantity`],Pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Y}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Y}_quantity`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Y}_quantity`]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",Jd(R.currency),") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:de.rate||"",onChange:ve=>{const ye=parseFloat(ve.target.value)||0,Ae=de.quantity||0,pe=[...R.lineItems];pe[Y]={...pe[Y],rate:ye,amount:Ae*ye},K(ue=>({...ue,lineItems:pe})),p[`lineItem_${Y}_rate`]&&y(ue=>{const Pe={...ue};return delete Pe[`lineItem_${Y}_rate`],Pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Y}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Y}_rate`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Y}_rate`]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),a.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[Jd(R.currency),((de.quantity||0)*(de.rate||0)).toFixed(2)]})})]})]},Y)),a.jsxs("button",{type:"button",onClick:()=>{K(de=>({...de,lineItems:[...de.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),p.lineItems&&y(de=>{const Y={...de};return delete Y.lineItems,Y})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[a.jsx(vn,{className:"w-4 h-4"}),"Add Line Item"]}),p.lineItems&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.lineItems]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",Jd(R.currency),")"]}),a.jsxs("div",{className:"relative",children:[a.jsx(ff,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[Jd(R.currency),R.lineItems.reduce((de,Y)=>{const ve=Y.amount||Y.rate*Y.quantity||0;return de+ve},0).toFixed(2)]})]})]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",a.jsx(Ce,{})]}),a.jsxs("select",{required:!0,value:R.stage,onChange:de=>{K(Y=>({...Y,stage:de.target.value})),p.stage&&y(Y=>{const ve={...Y};return delete ve.stage,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:"Select Stage"}),a.jsx("option",{value:"Discovery",children:"Discovery"}),a.jsx("option",{value:"Proposal",children:"Proposal"}),a.jsx("option",{value:"Negotiation",children:"Negotiation"}),a.jsx("option",{value:"Won",children:"Won"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),p.stage&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.stage]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",a.jsx(Ce,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:R.engagement,onChange:de=>{K(Y=>({...Y,engagement:de.target.value})),p.engagement&&y(Y=>{const ve={...Y};return delete ve.engagement,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.engagement&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.engagement]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ha,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:R.startDate,onChange:de=>{if(K(Y=>({...Y,startDate:de.target.value})),p.startDate&&y(Y=>{const ve={...Y};return delete ve.startDate,ve}),de.target.value&&R.endDate){const Y=new Date(de.target.value),ve=new Date(R.endDate);!isNaN(Y.getTime())&&!isNaN(ve.getTime())&&Y>=ve?y(ye=>({...ye,endDate:"End Date must be after Start Date"})):p.endDate==="End Date must be after Start Date"&&y(ye=>{const Ae={...ye};return delete Ae.endDate,Ae})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.startDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.startDate]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ha,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:R.endDate,onChange:de=>{if(K(Y=>({...Y,endDate:de.target.value})),p.endDate&&y(Y=>{const ve={...Y};return delete ve.endDate,ve}),R.startDate&&de.target.value){const Y=new Date(R.startDate),ve=new Date(de.target.value);!isNaN(Y.getTime())&&!isNaN(ve.getTime())&&Y>=ve&&y(ye=>({...ye,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.endDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.endDate]})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",a.jsx(Ce,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ha,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:R.expectedCloseDate,onChange:de=>{K(Y=>({...Y,expectedCloseDate:de.target.value})),p.expectedCloseDate&&y(Y=>{const ve={...Y};return delete ve.expectedCloseDate,ve})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.expectedCloseDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"}),p.expectedCloseDate]})]}),i!=="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"Due Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(ha,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"date",value:R.expectedCloseDate,onChange:de=>K(Y=>({...Y,expectedCloseDate:de.target.value})),className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold"})]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Priority"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(de=>a.jsx("button",{type:"button",onClick:()=>K({...R,priority:de}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${R.priority===de?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:de},de))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Add Context or Notes...",value:R.description,onChange:de=>K(Y=>({...Y,description:de.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),a.jsxs("label",{className:"cursor-pointer group block",children:[a.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:ee?a.jsx(bl,{className:"w-5 h-5"}):a.jsx(Wu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:ee?O?.name||"Image attached":"Attach Image to Note"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),a.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:ie,className:"hidden"})]}),ee&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:ee,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),a.jsx("button",{type:"button",onClick:()=>{W(""),z(null),H.current&&(H.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:a.jsx(ir,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:ce,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),a.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[u?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsx(Mi,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Z&&Z.open&&a.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!ae&&te(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Z.duplicates.some(de=>de.matchType==="exact"||de.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),a.jsx("button",{onClick:()=>!ae&&te(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:ae,children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),a.jsx("p",{className:"font-semibold text-slate-900",children:Z.newContact.name||""}),Z.newContact.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Z.newContact.email}),Z.newContact.phone&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Z.newContact.phone]}),Z.newContact.role&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Z.newContact.role]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Z.duplicates.length>1?"s":""]}),a.jsx("div",{className:"space-y-3",children:Z.duplicates.map((de,Y)=>a.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:de.name||""}),de.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:de.email}),a.jsxs("div",{className:"mt-2 space-y-1",children:[de.role?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",de.role]}):Z.newContact.role&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Z.newContact.role," (will be added)"]}),de.phone?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",de.phone]}):Z.newContact.phone&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Z.newContact.phone," (will be added)"]}),!de.companyId&&Z.newContact.companyId&&a.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),de.matchType==="fuzzy"&&de.similarity&&a.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(de.similarity*100),"% name similarity"]}),de.matchType==="exact"&&a.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),a.jsxs("button",{onClick:async()=>{if(!ae){Q(!0);try{const ve={};Z.newContact.name&&(!de.name||de.name.trim()===""||Z.newContact.name.trim()!==de.name.trim())&&(ve.name=Z.newContact.name),Z.newContact.email&&(!de.email||de.email.trim()==="")&&(ve.email=Z.newContact.email),Z.newContact.phone&&(!de.phone||de.phone.trim()==="")&&(ve.phone=Z.newContact.phone),Z.newContact.role&&(!de.role||de.role.trim()==="")&&(ve.role=Z.newContact.role),Z.newContact.companyId&&(!de.companyId||de.companyId.trim()==="")&&(ve.companyId=Z.newContact.companyId),Z.newContact.linkedin&&(!de.linkedin||de.linkedin.trim()==="")&&(ve.linkedin=Z.newContact.linkedin),Object.keys(ve).length>0&&await N7(de.id,ve),te(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(ve){console.error("[MERGE] Failed:",ve),m(ve.message||"Merge failed"),Q(!1)}}},disabled:ae,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[ae?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(Mv,{className:"w-4 h-4"}),"Merge"]})]})},de.id||Y))})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>te(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:ae,children:"Cancel"}),a.jsxs("button",{onClick:async()=>{if(!ae){Q(!0);try{await MP(Z.newContact),te(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(de){console.error("[CREATE] Failed:",de),m(de.message||"Failed to create contact"),Q(!1),te(null)}}},disabled:ae,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[ae?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsx(vn,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},M1e=({event:e,selectedDate:t,onClose:r,onSuccess:n})=>{const{showSuccess:s,showError:i}=ba(),[o,l]=U.useState(!1),[c,u]=U.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});U.useEffect(()=>{if(e)u({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const d=new Date(t);d.setHours(9,0,0,0);const m=new Date(t);m.setHours(10,0,0,0),u(p=>({...p,start:d.toISOString().substring(0,16),end:m.toISOString().substring(0,16)}))}},[e,t]);const f=async d=>{d.preventDefault(),l(!0);try{e?(await fse(e.id,c),s("Event updated successfully")):(await dse({...c,source:"local"}),s("Event created successfully")),n(),r()}catch(m){i(m.message||"Failed to save event")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(ha,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:d=>u({...c,title:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Os,{className:"w-3 h-3"})," Start"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:d=>u({...c,start:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Os,{className:"w-3 h-3"})," End"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:d=>u({...c,end:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Es,{className:"w-3 h-3"})," Event Type"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(d=>a.jsx("button",{type:"button",onClick:()=>u({...c,type:d}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===d?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:d},d))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(OB,{className:"w-3 h-3"})," Description"]}),a.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:d=>u({...c,description:d.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Ad,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},R1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=ba(),[n,s]=U.useState(!1),[i,o]=U.useState(!1),[l,c]=U.useState(!1),[u,f]=U.useState(!1);U.useEffect(()=>{const G=setTimeout(()=>f(!0),500);return()=>clearTimeout(G)},[]);const[d,m]=U.useState({type:"bug",title:"",description:""}),[p,y]=U.useState([]),[v,g]=U.useState(!1),[b,w]=U.useState("upload"),[j,N]=U.useState(""),[S,P]=U.useState(!1),A=U.useRef(null),T=U.useRef(p);U.useEffect(()=>{T.current=p},[p]),U.useEffect(()=>()=>{T.current.forEach(G=>{G.source==="file"&&G.type==="video"&&G.preview.startsWith("blob:")&&URL.revokeObjectURL(G.preview)})},[]);const I=(G,Z=1920,te=1080,ae=.8)=>new Promise((Q,ee)=>{const W=new FileReader;W.onload=O=>{const z=new Image;z.onload=()=>{let H=z.width,R=z.height;H>R?H>Z&&(R=R*Z/H,H=Z):R>te&&(H=H*te/R,R=te);const K=document.createElement("canvas");K.width=H,K.height=R;const le=K.getContext("2d");if(!le){ee(new Error("Failed to create canvas context"));return}le.drawImage(z,0,0,H,R);const he=K.toDataURL("image/jpeg",ae);Q(he)},z.onerror=()=>ee(new Error("Failed to load image")),z.src=O.target?.result},W.onerror=()=>ee(new Error("Failed to read file")),W.readAsDataURL(G)}),B=async G=>{const Z=G.target.files;if(!(!Z||Z.length===0)){g(!0);try{const te=[];for(let ae=0;ae<Z.length;ae++){const Q=Z[ae];if(!Q.type.startsWith("image/")&&!Q.type.startsWith("video/")){r("Please select only image or video files");continue}if(Q.size>10*1024*1024){r(`File "${Q.name}" is too large. Maximum size is 10MB`);continue}const ee=Q.type.startsWith("image/");let W="";ee?W=await I(Q,1920,1080,.8):W=URL.createObjectURL(Q),te.push({file:Q,preview:W,type:ee?"image":"video",source:"file"})}y(ae=>[...ae,...te]),A.current&&(A.current.value="")}catch(te){r(te.message||"Failed to process file")}finally{g(!1)}}},C=G=>new Promise(Z=>{const te=new Image,ae=document.createElement("video"),Q=[".jpg",".jpeg",".png",".gif",".webp",".svg"],ee=[".mp4",".mov",".avi",".webm",".mkv"],W=G.toLowerCase(),O=Q.some(H=>W.includes(H))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),z=ee.some(H=>W.includes(H))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!O&&!z?(te.onload=()=>Z(!0),te.onerror=()=>{ae.onloadedmetadata=()=>Z(!0),ae.onerror=()=>Z(!1),ae.src=G},te.src=G):Z(!0)}),E=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}P(!0);try{if(!await C(j.trim())){r("URL does not appear to be a valid image or video");return}const Z=j.toLowerCase(),te=Z.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Z.includes("image")||!Z.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Z.includes("video"),ae={url:j.trim(),preview:j.trim(),type:te?"image":"video",source:"url"};y(Q=>[...Q,ae]),N(""),t("URL added successfully")}catch(G){r(G.message||"Failed to validate URL")}finally{P(!1)}},M=G=>{const Z=p[G];Z.source==="file"&&Z.type==="video"&&Z.preview.startsWith("blob:")&&URL.revokeObjectURL(Z.preview),y(te=>te.filter((ae,Q)=>Q!==G))},q=async G=>{if(G.preventDefault(),!(!d.title||!d.description)){o(!0);try{const Z=p.filter(W=>W.source==="url"),te=p.filter(W=>W.source==="file"),ae=Z.length>0?Z[0].url:"",Q=await Promise.all(te.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((O,z)=>{const H=new FileReader;H.onload=()=>{O({type:"video",data:H.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},H.onerror=z,H.readAsDataURL(W.file)}))),ee={...d,userId:e?.id||"anonymous",status:"planned",url:ae||void 0,attachments:Q.length>0?Q:[]};await I7(ee),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),m({type:"bug",title:"",description:""}),p.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),y([])},2e3)}catch(Z){console.error("[FEEDBACK] Submission failed:",Z),r(`Submission error: ${Z.message||"Registry error"}`)}finally{o(!1)}}};return a.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[a.jsx("button",{onClick:()=>s(!n),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${u?"transition-all duration-300":""} ${n?"translate-x-full":""}`,children:a.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),a.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${u?"transition-all duration-500 ease-out":""} ${n?"translate-x-0":"translate-x-full"}`,style:u?void 0:{transform:n?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?a.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:a.jsx(yn,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):a.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[a.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:a.jsx(xo,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),a.jsx("button",{onClick:()=>{s(!1),p.forEach(G=>{G.source==="file"&&G.type==="video"&&G.preview.startsWith("blob:")&&URL.revokeObjectURL(G.preview)}),y([]),N("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:a.jsx(ir,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:q,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Dv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:a.jsx(Ji,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:a.jsx(Cj,{className:"w-3 h-3"}),label:"Idea"}].map(G=>a.jsxs("button",{type:"button",onClick:()=>m({...d,type:G.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${d.type===G.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[G.icon," ",G.label]},G.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:d.title,onChange:G=>m({...d,title:G.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),a.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:d.description,onChange:G=>m({...d,description:G.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),a.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[a.jsxs("button",{type:"button",onClick:()=>w("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(Wu,{className:"w-3 h-3"}),"Upload"]}),a.jsxs("button",{type:"button",onClick:()=>w("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(Vf,{className:"w-3 h-3"}),"URL"]})]}),b==="upload"&&a.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?a.jsx(wt,{className:"w-5 h-5 animate-spin"}):a.jsx(Wu,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),a.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",multiple:!0,onChange:B,disabled:v,className:"hidden"})]}),b==="url"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:G=>N(G.target.value),onKeyDown:G=>{G.key==="Enter"&&!S&&j.trim()&&(G.preventDefault(),E())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),a.jsx("button",{type:"button",onClick:E,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?a.jsxs(a.Fragment,{children:[a.jsx(wt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Vf,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),p.length>0&&a.jsx("div",{className:"space-y-2",children:p.map((G,Z)=>a.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:G.type==="image"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:G.preview,alt:`Attachment ${Z+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:te=>{te.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(bl,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:G.source==="file"?G.file.name:"Image URL"}),G.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:G.source==="file"?`${(G.file.size/1024).toFixed(1)} KB`:G.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Z),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ur,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Qh,{className:"w-6 h-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Qh,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:G.source==="file"?G.file.name:"Video URL"}),G.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:G.source==="file"?`${(G.file.size/(1024*1024)).toFixed(2)} MB`:G.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Z),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ur,{className:"w-4 h-4"})})]})},Z))})]}),a.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?a.jsx(wt,{className:"w-4 h-4 animate-spin"}):a.jsx(nu,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},B1e=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(Ek,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(LB,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Enter your professional email address in the login portal"}),a.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),a.jsx("li",{children:"Enter the 6-digit code sent to your email"}),a.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Check your spam or junk folder"}),a.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),a.jsx("li",{children:'Click "Request New Code" on the verification screen'}),a.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),a.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),a.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),a.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),a.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(ai,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's IT administrator"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),U1e=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(Ek,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(ix,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),a.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(Ka,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),a.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),a.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),a.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),a.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(KB,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"To authenticate your access and maintain your account"}),a.jsx("li",{children:"To personalize your experience and provide relevant features"}),a.jsx("li",{children:"To provide customer support and respond to your inquiries"}),a.jsx("li",{children:"To improve our services, features, and user experience"}),a.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),a.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),a.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),a.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),a.jsx("li",{children:"Access controls and role-based permissions"}),a.jsx("li",{children:"Regular security audits and monitoring"}),a.jsx("li",{children:"Restricted access to authorized personnel only"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),a.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Authentication and session management"}),a.jsx("li",{children:"Remembering your preferences"}),a.jsx("li",{children:"Security and fraud prevention"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),a.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),a.jsx("li",{children:"When required by law or to protect our rights and safety"}),a.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),a.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),a.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),a.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),a.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),a.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(ai,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),q1e=new Vse({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),$1e=({children:e})=>a.jsx(Gse,{client:q1e,children:e}),z1e=()=>{const[e,t]=U.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,n]=U.useState(!1),[s,i]=U.useState(null),[o,l]=U.useState(!1),[c,u]=U.useState(!1),[f,d]=U.useState(""),[m,p]=U.useState(!1),[y,v]=U.useState({isOpen:!1,type:"deal"}),[g,b]=U.useState({isOpen:!1,event:null}),[w,j]=U.useState([]),[N,S]=U.useState(!1),[P,A]=U.useState(!1),T=w.filter(H=>!H.read).length,I=U.useRef(null),B=U.useCallback(async(H=!1)=>{try{const R=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!R?.id)return;H&&A(!0);const K=await E7(R.id,20),le=K?.data||K||[],he=(Array.isArray(le)?le:[]).map(ie=>{let ce="Just now";if(ie.createdAt){const De=new Date(ie.createdAt),Ue=new Date().getTime()-De.getTime(),Ce=Math.floor(Ue/6e4),de=Math.floor(Ue/36e5),Y=Math.floor(Ue/864e5);Ce<1?ce="Just now":Ce<60?ce=`${Ce}m ago`:de<24?ce=`${de}h ago`:Y<7?ce=`${Y}d ago`:ce=De.toLocaleDateString()}return{id:ie.id,userId:ie.userId,type:ie.type||"system",title:ie.title,message:ie.message,timestamp:ce,read:!!ie.read,link:ie.link||void 0}});j(he)}catch(R){console.error("[NOTIFICATIONS] Failed to load notifications",R)}finally{H&&A(!1)}},[s]);U.useEffect(()=>{(s||JSON.parse(localStorage.getItem("user_data")||"null"))?.id},[s]),U.useEffect(()=>{B();const H=setInterval(()=>{B(!1)},3e4),R=()=>{B(!0)};return window.addEventListener("refresh-notifications",R),()=>{clearInterval(H),window.removeEventListener("refresh-notifications",R)}},[B]),U.useEffect(()=>{N&&B(!0)},[N,B]),U.useEffect(()=>{const H=()=>{const R=window.innerWidth<1024;l(R),n(!R)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),U.useEffect(()=>{const H=new URLSearchParams(window.location.search),R=H.get("tab");if(R&&["dashboard","schedule","crm","pipeline","projects","tasks","invoices","roadmap","users","settings","integrations"].includes(R)){t(R),localStorage.setItem("activeTab",R),H.delete("tab");const le=H.toString()?`${window.location.pathname}?${H.toString()}`:window.location.pathname;window.history.replaceState({},"",le)}},[]),U.useEffect(()=>{const H=R=>{I.current&&!I.current.contains(R.target)&&S(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const C=async()=>{await one(),window.location.reload()},E=async H=>{const R=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(R){j(K=>K.map(le=>le.id===H?{...le,read:!0}:le));try{await T7(H,R)}catch{}}},M=async()=>{const H=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(H){j(R=>R.map(K=>({...K,read:!0})));try{await O7(H)}catch{}}},q=(H,R)=>{v({isOpen:!0,type:H,stage:R||void 0})},G=(H,R)=>{b({isOpen:!0,event:null,selectedDate:R})},Z=()=>{b({isOpen:!1,event:null})},te=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},ae=typeof window<"u"?window.location.pathname:"",[Q,ee]=U.useState(()=>ae==="/privacy-policy"||ae==="/privacy"?"privacy":ae==="/help"?"help":ae.startsWith("/survey/")?"survey":null),W=ae.startsWith("/survey/")?ae.replace("/survey/",""):null;if(U.useEffect(()=>{const H=window.location.pathname;H==="/privacy-policy"||H==="/privacy"?ee("privacy"):H==="/help"?ee("help"):H.startsWith("/survey/")?ee("survey"):ee(null)},[]),U.useEffect(()=>{const H=()=>{const R=window.location.pathname;R==="/privacy-policy"||R==="/privacy"?ee("privacy"):R==="/help"?ee("help"):R.startsWith("/survey/")?ee("survey"):ee(null)};return window.addEventListener("popstate",H),()=>window.removeEventListener("popstate",H)},[]),Q==="privacy")return a.jsx(U1e,{onBack:()=>{window.history.pushState({},"","/"),ee(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(Q==="help")return a.jsx(B1e,{onBack:()=>{window.history.pushState({},"","/"),ee(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(Q==="survey"&&W)return a.jsx(Tie,{surveyId:W});const O=()=>{switch(e){case"dashboard":return a.jsx(ZP,{onNavigate:t});case"schedule":return a.jsx(zve,{currentUser:s,onNavigate:t,onNewEvent:()=>G()});case"crm":return a.jsx(xie,{onNavigate:t,onAddCompany:()=>q("company"),onAddContact:()=>q("contact"),externalSearchQuery:f});case"pipeline":return a.jsx(gie,{onNavigate:t,onNewDeal:H=>q("deal",H),currentUser:s});case"projects":return a.jsx(Aie,{onNavigate:t,onCreateProject:()=>q("project"),currentUser:s});case"satisfaction":return a.jsx(Cie,{onNavigate:t});case"tasks":return a.jsx(Rge,{onCreateTask:()=>q("task"),currentUser:s});case"invoices":return a.jsx(Fve,{onCreateInvoice:()=>q("invoice"),currentUser:s});case"expenses":return a.jsx(S1e,{currentUser:s});case"budget":return a.jsx(_1e,{currentUser:s});case"contracts":return a.jsx(A1e,{currentUser:s});case"inbox":return a.jsx(M9,{currentUser:s});case"roadmap":return a.jsx(k1e,{currentUser:s,onNavigate:t});case"users":return a.jsx(Mve,{});case"settings":return a.jsx(qve,{currentUser:s,onUserUpdate:i});case"data-hygiene":return a.jsx($ve,{currentUser:s});case"integrations":return a.jsx(Hve,{});case"notifications":return a.jsx(O1e,{currentUser:s,onNavigate:t});default:return a.jsx(ZP,{onNavigate:t})}},z=H=>{t(H),localStorage.setItem("activeTab",H),d(""),o&&n(!1)};return U.useEffect(()=>{const H=setTimeout(()=>u(!0),400);return()=>clearTimeout(H)},[]),a.jsx($1e,{children:a.jsx(yse,{children:a.jsx(E1e,{onUserLoaded:i,children:a.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&a.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>n(!1)}),a.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:a.jsx(ir,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2",children:fU.map(H=>a.jsxs("button",{onClick:()=>z(H.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===H.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsx("div",{className:"shrink-0",children:H.icon}),r&&a.jsx("span",{className:"font-medium whitespace-nowrap",children:H.label})]},H.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0",children:[a.jsxs("button",{onClick:()=>z("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="settings"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(oD,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Settings"})]}),s?.role==="Admin"&&a.jsxs("button",{onClick:()=>z("data-hygiene"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="data-hygiene"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(vy,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Data Hygiene"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[a.jsx(sD,{className:"w-5 h-5 shrink-0"}),r&&a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[a.jsx("button",{onClick:()=>n(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(YB,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{className:"relative group hidden sm:block",children:[a.jsx(Hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),a.jsx("input",{type:"text",placeholder:"Search Current View...",value:f,onChange:H=>d(H.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("div",{className:"relative",ref:I,children:[a.jsxs("button",{onClick:()=>S(!N),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${N?"bg-slate-100":""}`,children:[a.jsx(gy,{className:`w-5 h-5 transition-colors ${T>0?"text-indigo-600":"text-slate-600"} ${P?"animate-pulse":""}`}),T>0&&a.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:a.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${P?"animate-pulse":""}`,children:T})})]}),N&&a.jsx(T1e,{notifications:w,onMarkAsRead:E,onMarkAllAsRead:M,onRefresh:()=>B(!0),isRefreshing:P,onClose:()=>S(!1),onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),a.jsxs("button",{onClick:()=>q("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[a.jsx(vn,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),a.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:a.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:O()})}),a.jsx(R1e,{currentUser:s})]}),y.isOpen&&a.jsx(F1e,{type:y.type,stage:y.stage,onClose:()=>v(H=>({...H,isOpen:!1})),onSuccess:()=>{(y.type==="contact"||y.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),y.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),y.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),y.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):y.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),g.isOpen&&a.jsx(M1e,{event:g.event,selectedDate:g.selectedDate,onClose:Z,onSuccess:te}),m&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(ir,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{onClick:C,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function H1e(){const[e,t]=U.useState("loading"),[r,n]=U.useState(!1);U.useEffect(()=>{const c=Date.now();let u=!1;const f=()=>{if(u)return;const p=Date.now()-c,y=Math.max(0,850-p);setTimeout(()=>{u||t("fading")},y)},d=()=>{if(u)return;(document.fonts?.ready??Promise.resolve()).then(()=>{u||setTimeout(f,1100)}).catch(()=>setTimeout(f,1100))};if(document.readyState==="complete")return d(),()=>{u=!0};window.addEventListener("load",d);const m=setTimeout(()=>{u||t("fading")},4500);return()=>{u=!0,window.removeEventListener("load",d),clearTimeout(m)}},[]),U.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),U.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>n(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return a.jsxs(a.Fragment,{children:[(e==="fading"||e==="done")&&a.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:a.jsx(z1e,{})}),s&&a.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[a.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const R9=document.getElementById("root");if(!R9)throw new Error("Could not find root element to mount to");const W1e=SB.createRoot(R9);W1e.render(a.jsx(at.StrictMode,{children:a.jsx(H1e,{})}));export{Ca as _,Wg as c,Ea as g};
